var fU=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var bRe=fU((xRe,Pb)=>{function hU(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function bc(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var DA={exports:{}},Vf={};var vR;function mU(){if(vR)return Vf;vR=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,r){var o=null;if(r!==void 0&&(o=""+r),s.key!==void 0&&(o=""+s.key),"key"in s){r={};for(var a in s)a!=="key"&&(r[a]=s[a])}else r=s;return s=r.ref,{$$typeof:n,type:i,key:o,ref:s!==void 0?s:null,props:r}}return Vf.Fragment=e,Vf.jsx=t,Vf.jsxs=t,Vf}var yR;function gU(){return yR||(yR=1,DA.exports=mU()),DA.exports}var v=gU(),MA={exports:{}},Qe={};var AR;function pU(){if(AR)return Qe;AR=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),p=Symbol.iterator;function w(B){return B===null||typeof B!="object"?null:(B=p&&B[p]||B["@@iterator"],typeof B=="function"?B:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,k={};function E(B,J,fe){this.props=B,this.context=J,this.refs=k,this.updater=fe||A}E.prototype.isReactComponent={},E.prototype.setState=function(B,J){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,J,"setState")},E.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function S(){}S.prototype=E.prototype;function I(B,J,fe){this.props=B,this.context=J,this.refs=k,this.updater=fe||A}var R=I.prototype=new S;R.constructor=I,C(R,E.prototype),R.isPureReactComponent=!0;var O=Array.isArray;function U(){}var P={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function H(B,J,fe){var he=fe.ref;return{$$typeof:n,type:B,key:J,ref:he!==void 0?he:null,props:fe}}function ie(B,J){return H(B.type,J,B.props)}function ke(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function de(B){var J={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(fe){return J[fe]})}var ve=/\/+/g;function be(B,J){return typeof B=="object"&&B!==null&&B.key!=null?de(""+B.key):J.toString(36)}function Ae(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(U,U):(B.status="pending",B.then(function(J){B.status==="pending"&&(B.status="fulfilled",B.value=J)},function(J){B.status==="pending"&&(B.status="rejected",B.reason=J)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function F(B,J,fe,he,Me){var Ie=typeof B;(Ie==="undefined"||Ie==="boolean")&&(B=null);var oe=!1;if(B===null)oe=!0;else switch(Ie){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(B.$$typeof){case n:case e:oe=!0;break;case h:return oe=B._init,F(oe(B._payload),J,fe,he,Me)}}if(oe)return Me=Me(B),oe=he===""?"."+be(B,0):he,O(Me)?(fe="",oe!=null&&(fe=oe.replace(ve,"$&/")+"/"),F(Me,J,fe,"",function(qe){return qe})):Me!=null&&(ke(Me)&&(Me=ie(Me,fe+(Me.key==null||B&&B.key===Me.key?"":(""+Me.key).replace(ve,"$&/")+"/")+oe)),J.push(Me)),1;oe=0;var Ue=he===""?".":he+":";if(O(B))for(var $e=0;$e<B.length;$e++)he=B[$e],Ie=Ue+be(he,$e),oe+=F(he,J,fe,Ie,Me);else if($e=w(B),typeof $e=="function")for(B=$e.call(B),$e=0;!(he=B.next()).done;)he=he.value,Ie=Ue+be(he,$e++),oe+=F(he,J,fe,Ie,Me);else if(Ie==="object"){if(typeof B.then=="function")return F(Ae(B),J,fe,he,Me);throw J=String(B),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return oe}function X(B,J,fe){if(B==null)return B;var he=[],Me=0;return F(B,he,"","",function(Ie){return J.call(fe,Ie,Me++)}),he}function $(B){if(B._status===-1){var J=B._result;J=J(),J.then(function(fe){(B._status===0||B._status===-1)&&(B._status=1,B._result=fe)},function(fe){(B._status===0||B._status===-1)&&(B._status=2,B._result=fe)}),B._status===-1&&(B._status=0,B._result=J)}if(B._status===1)return B._result.default;throw B._result}var re=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Ve={map:X,forEach:function(B,J,fe){X(B,function(){J.apply(this,arguments)},fe)},count:function(B){var J=0;return X(B,function(){J++}),J},toArray:function(B){return X(B,function(J){return J})||[]},only:function(B){if(!ke(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Qe.Activity=m,Qe.Children=Ve,Qe.Component=E,Qe.Fragment=t,Qe.Profiler=s,Qe.PureComponent=I,Qe.StrictMode=i,Qe.Suspense=c,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return P.H.useMemoCache(B)}},Qe.cache=function(B){return function(){return B.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(B,J,fe){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var he=C({},B.props),Me=B.key;if(J!=null)for(Ie in J.key!==void 0&&(Me=""+J.key),J)!V.call(J,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&J.ref===void 0||(he[Ie]=J[Ie]);var Ie=arguments.length-2;if(Ie===1)he.children=fe;else if(1<Ie){for(var oe=Array(Ie),Ue=0;Ue<Ie;Ue++)oe[Ue]=arguments[Ue+2];he.children=oe}return H(B.type,Me,he)},Qe.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:r,_context:B},B},Qe.createElement=function(B,J,fe){var he,Me={},Ie=null;if(J!=null)for(he in J.key!==void 0&&(Ie=""+J.key),J)V.call(J,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Me[he]=J[he]);var oe=arguments.length-2;if(oe===1)Me.children=fe;else if(1<oe){for(var Ue=Array(oe),$e=0;$e<oe;$e++)Ue[$e]=arguments[$e+2];Me.children=Ue}if(B&&B.defaultProps)for(he in oe=B.defaultProps,oe)Me[he]===void 0&&(Me[he]=oe[he]);return H(B,Ie,Me)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(B){return{$$typeof:a,render:B}},Qe.isValidElement=ke,Qe.lazy=function(B){return{$$typeof:h,_payload:{_status:-1,_result:B},_init:$}},Qe.memo=function(B,J){return{$$typeof:d,type:B,compare:J===void 0?null:J}},Qe.startTransition=function(B){var J=P.T,fe={};P.T=fe;try{var he=B(),Me=P.S;Me!==null&&Me(fe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(U,re)}catch(Ie){re(Ie)}finally{J!==null&&fe.types!==null&&(J.types=fe.types),P.T=J}},Qe.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Qe.use=function(B){return P.H.use(B)},Qe.useActionState=function(B,J,fe){return P.H.useActionState(B,J,fe)},Qe.useCallback=function(B,J){return P.H.useCallback(B,J)},Qe.useContext=function(B){return P.H.useContext(B)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(B,J){return P.H.useDeferredValue(B,J)},Qe.useEffect=function(B,J){return P.H.useEffect(B,J)},Qe.useEffectEvent=function(B){return P.H.useEffectEvent(B)},Qe.useId=function(){return P.H.useId()},Qe.useImperativeHandle=function(B,J,fe){return P.H.useImperativeHandle(B,J,fe)},Qe.useInsertionEffect=function(B,J){return P.H.useInsertionEffect(B,J)},Qe.useLayoutEffect=function(B,J){return P.H.useLayoutEffect(B,J)},Qe.useMemo=function(B,J){return P.H.useMemo(B,J)},Qe.useOptimistic=function(B,J){return P.H.useOptimistic(B,J)},Qe.useReducer=function(B,J,fe){return P.H.useReducer(B,J,fe)},Qe.useRef=function(B){return P.H.useRef(B)},Qe.useState=function(B){return P.H.useState(B)},Qe.useSyncExternalStore=function(B,J,fe){return P.H.useSyncExternalStore(B,J,fe)},Qe.useTransition=function(){return P.H.useTransition()},Qe.version="19.2.3",Qe}var _R;function mm(){return _R||(_R=1,MA.exports=pU()),MA.exports}var _=mm();const Ee=bc(_),hx=hU({__proto__:null,default:Ee},[_]);var BA={exports:{}},Lf={},NA={exports:{}},VA={};var CR;function bU(){return CR||(CR=1,(function(n){function e(F,X){var $=F.length;F.push(X);e:for(;0<$;){var re=$-1>>>1,Ve=F[re];if(0<s(Ve,X))F[re]=X,F[$]=Ve,$=re;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var X=F[0],$=F.pop();if($!==X){F[0]=$;e:for(var re=0,Ve=F.length,B=Ve>>>1;re<B;){var J=2*(re+1)-1,fe=F[J],he=J+1,Me=F[he];if(0>s(fe,$))he<Ve&&0>s(Me,fe)?(F[re]=Me,F[he]=$,re=he):(F[re]=fe,F[J]=$,re=J);else if(he<Ve&&0>s(Me,$))F[re]=Me,F[he]=$,re=he;else break e}}return X}function s(F,X){var $=F.sortIndex-X.sortIndex;return $!==0?$:F.id-X.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],d=[],h=1,m=null,p=3,w=!1,A=!1,C=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function R(F){for(var X=t(d);X!==null;){if(X.callback===null)i(d);else if(X.startTime<=F)i(d),X.sortIndex=X.expirationTime,e(c,X);else break;X=t(d)}}function O(F){if(C=!1,R(F),!A)if(t(c)!==null)A=!0,U||(U=!0,de());else{var X=t(d);X!==null&&Ae(O,X.startTime-F)}}var U=!1,P=-1,V=5,H=-1;function ie(){return k?!0:!(n.unstable_now()-H<V)}function ke(){if(k=!1,U){var F=n.unstable_now();H=F;var X=!0;try{e:{A=!1,C&&(C=!1,S(P),P=-1),w=!0;var $=p;try{t:{for(R(F),m=t(c);m!==null&&!(m.expirationTime>F&&ie());){var re=m.callback;if(typeof re=="function"){m.callback=null,p=m.priorityLevel;var Ve=re(m.expirationTime<=F);if(F=n.unstable_now(),typeof Ve=="function"){m.callback=Ve,R(F),X=!0;break t}m===t(c)&&i(c),R(F)}else i(c);m=t(c)}if(m!==null)X=!0;else{var B=t(d);B!==null&&Ae(O,B.startTime-F),X=!1}}break e}finally{m=null,p=$,w=!1}X=void 0}}finally{X?de():U=!1}}}var de;if(typeof I=="function")de=function(){I(ke)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,be=ve.port2;ve.port1.onmessage=ke,de=function(){be.postMessage(null)}}else de=function(){E(ke,0)};function Ae(F,X){P=E(function(){F(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_next=function(F){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var $=p;p=X;try{return F()}finally{p=$}},n.unstable_requestPaint=function(){k=!0},n.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var $=p;p=F;try{return X()}finally{p=$}},n.unstable_scheduleCallback=function(F,X,$){var re=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?re+$:re):$=re,F){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=$+Ve,F={id:h++,callback:X,priorityLevel:F,startTime:$,expirationTime:Ve,sortIndex:-1},$>re?(F.sortIndex=$,e(d,F),t(c)===null&&F===t(d)&&(C?(S(P),P=-1):C=!0,Ae(O,$-re))):(F.sortIndex=Ve,e(c,F),A||w||(A=!0,U||(U=!0,de()))),F},n.unstable_shouldYield=ie,n.unstable_wrapCallback=function(F){var X=p;return function(){var $=p;p=X;try{return F.apply(this,arguments)}finally{p=$}}}})(VA)),VA}var xR;function wU(){return xR||(xR=1,NA.exports=bU()),NA.exports}var LA={exports:{}},Ci={};var kR;function vU(){if(kR)return Ci;kR=1;var n=mm();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function r(c,d,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:c,containerInfo:d,implementation:h}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ci.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ci.createPortal=function(c,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return r(c,d,null,h)},Ci.flushSync=function(c){var d=o.T,h=i.p;try{if(o.T=null,i.p=2,c)return c()}finally{o.T=d,i.p=h,i.d.f()}},Ci.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(c,d))},Ci.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},Ci.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var h=d.as,m=a(h,d.crossOrigin),p=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?i.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:p,fetchPriority:w}):h==="script"&&i.d.X(c,{crossOrigin:m,integrity:p,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ci.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=a(d.as,d.crossOrigin);i.d.M(c,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(c)},Ci.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,m=a(h,d.crossOrigin);i.d.L(c,h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ci.preloadModule=function(c,d){if(typeof c=="string")if(d){var h=a(d.as,d.crossOrigin);i.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(c)},Ci.requestFormReset=function(c){i.d.r(c)},Ci.unstable_batchedUpdates=function(c,d){return c(d)},Ci.useFormState=function(c,d,h){return o.H.useFormState(c,d,h)},Ci.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ci.version="19.2.3",Ci}var ER;function e3(){if(ER)return LA.exports;ER=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),LA.exports=vU(),LA.exports}var SR;function yU(){if(SR)return Lf;SR=1;var n=wU(),e=mm(),t=e3();function i(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function r(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function a(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(r(l)!==l)throw Error(i(188))}function d(l){var u=l.alternate;if(!u){if(u=r(l),u===null)throw Error(i(188));return u!==l?null:l}for(var f=l,g=u;;){var b=f.return;if(b===null)break;var y=b.alternate;if(y===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===y.child){for(y=b.child;y;){if(y===f)return c(b),l;if(y===g)return c(b),u;y=y.sibling}throw Error(i(188))}if(f.return!==g.return)f=b,g=y;else{for(var x=!1,T=b.child;T;){if(T===f){x=!0,f=b,g=y;break}if(T===g){x=!0,g=b,f=y;break}T=T.sibling}if(!x){for(T=y.child;T;){if(T===f){x=!0,f=y,g=b;break}if(T===g){x=!0,g=y,f=b;break}T=T.sibling}if(!x)throw Error(i(189))}}if(f.alternate!==g)throw Error(i(190))}if(f.tag!==3)throw Error(i(188));return f.stateNode.current===f?l:u}function h(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=h(l),u!==null)return u;l=l.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),I=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),ke=Symbol.iterator;function de(l){return l===null||typeof l!="object"?null:(l=ke&&l[ke]||l["@@iterator"],typeof l=="function"?l:null)}var ve=Symbol.for("react.client.reference");function be(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===ve?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case C:return"Fragment";case E:return"Profiler";case k:return"StrictMode";case O:return"Suspense";case U:return"SuspenseList";case H:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case A:return"Portal";case I:return l.displayName||"Context";case S:return(l._context.displayName||"Context")+".Consumer";case R:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case P:return u=l.displayName||null,u!==null?u:be(l.type)||"Memo";case V:u=l._payload,l=l._init;try{return be(l(u))}catch{}}return null}var Ae=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},re=[],Ve=-1;function B(l){return{current:l}}function J(l){0>Ve||(l.current=re[Ve],re[Ve]=null,Ve--)}function fe(l,u){Ve++,re[Ve]=l.current,l.current=u}var he=B(null),Me=B(null),Ie=B(null),oe=B(null);function Ue(l,u){switch(fe(Ie,u),fe(Me,l),fe(he,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?UI(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=UI(u),l=HI(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}J(he),fe(he,l)}function $e(){J(he),J(Me),J(Ie)}function qe(l){l.memoizedState!==null&&fe(oe,l);var u=he.current,f=HI(u,l.type);u!==f&&(fe(Me,l),fe(he,f))}function Ze(l){Me.current===l&&(J(he),J(Me)),oe.current===l&&(J(oe),Df._currentValue=$)}var it,kn;function On(l){if(it===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);it=u&&u[1]||"",kn=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+it+l+kn}var cs=!1;function us(l,u){if(!l||cs)return"";cs=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Z){var q=Z}Reflect.construct(l,[],ae)}else{try{ae.call()}catch(Z){q=Z}l.call(ae.prototype)}}else{try{throw Error()}catch(Z){q=Z}(ae=l())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Z){if(Z&&q&&typeof Z.stack=="string")return[Z.stack,q.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=g.DetermineComponentFrameRoot(),x=y[0],T=y[1];if(x&&T){var M=x.split(`
`),Y=T.split(`
`);for(b=g=0;g<M.length&&!M[g].includes("DetermineComponentFrameRoot");)g++;for(;b<Y.length&&!Y[b].includes("DetermineComponentFrameRoot");)b++;if(g===M.length||b===Y.length)for(g=M.length-1,b=Y.length-1;1<=g&&0<=b&&M[g]!==Y[b];)b--;for(;1<=g&&0<=b;g--,b--)if(M[g]!==Y[b]){if(g!==1||b!==1)do if(g--,b--,0>b||M[g]!==Y[b]){var ne=`
`+M[g].replace(" at new "," at ");return l.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",l.displayName)),ne}while(1<=g&&0<=b);break}}}finally{cs=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?On(f):""}function $i(l,u){switch(l.tag){case 26:case 27:case 5:return On(l.type);case 16:return On("Lazy");case 13:return l.child!==u&&u!==null?On("Suspense Fallback"):On("Suspense");case 19:return On("SuspenseList");case 0:case 15:return us(l.type,!1);case 11:return us(l.type.render,!1);case 1:return us(l.type,!0);case 31:return On("Activity");default:return""}}function Aa(l){try{var u="",f=null;do u+=$i(l,f),f=l,l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var go=Object.prototype.hasOwnProperty,rr=n.unstable_scheduleCallback,N=n.unstable_cancelCallback,G=n.unstable_shouldYield,te=n.unstable_requestPaint,K=n.unstable_now,ee=n.unstable_getCurrentPriorityLevel,ce=n.unstable_ImmediatePriority,_e=n.unstable_UserBlockingPriority,Ge=n.unstable_NormalPriority,st=n.unstable_LowPriority,$t=n.unstable_IdlePriority,ds=n.log,Gi=n.unstable_setDisableYieldValue,or=null,vn=null;function _i(l){if(typeof ds=="function"&&Gi(l),vn&&typeof vn.setStrictMode=="function")try{vn.setStrictMode(or,l)}catch{}}var $n=Math.clz32?Math.clz32:Mc,_a=Math.log,xl=Math.LN2;function Mc(l){return l>>>=0,l===0?32:31-(_a(l)/xl|0)|0}var Qm=256,Zm=262144,Jm=4194304;function kl(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Xm(l,u,f){var g=l.pendingLanes;if(g===0)return 0;var b=0,y=l.suspendedLanes,x=l.pingedLanes;l=l.warmLanes;var T=g&134217727;return T!==0?(g=T&~y,g!==0?b=kl(g):(x&=T,x!==0?b=kl(x):f||(f=T&~l,f!==0&&(b=kl(f))))):(T=g&~y,T!==0?b=kl(T):x!==0?b=kl(x):f||(f=g&~l,f!==0&&(b=kl(f)))),b===0?0:u!==0&&u!==b&&(u&y)===0&&(y=b&-b,f=u&-u,y>=f||y===32&&(f&4194048)!==0)?u:b}function $d(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Xz(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CS(){var l=Jm;return Jm<<=1,(Jm&62914560)===0&&(Jm=4194304),l}function Ay(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function Gd(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function e9(l,u,f,g,b,y){var x=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var T=l.entanglements,M=l.expirationTimes,Y=l.hiddenUpdates;for(f=x&~f;0<f;){var ne=31-$n(f),ae=1<<ne;T[ne]=0,M[ne]=-1;var q=Y[ne];if(q!==null)for(Y[ne]=null,ne=0;ne<q.length;ne++){var Z=q[ne];Z!==null&&(Z.lane&=-536870913)}f&=~ae}g!==0&&xS(l,g,0),y!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=y&~(x&~u))}function xS(l,u,f){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-$n(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|f&261930}function kS(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var g=31-$n(f),b=1<<g;b&u|l[g]&u&&(l[g]|=u),f&=~b}}function ES(l,u){var f=u&-u;return f=(f&42)!==0?1:_y(f),(f&(l.suspendedLanes|u))!==0?0:f}function _y(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Cy(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function SS(){var l=X.p;return l!==0?l:(l=window.event,l===void 0?32:fR(l.type))}function TS(l,u){var f=X.p;try{return X.p=l,u()}finally{X.p=f}}var Ca=Math.random().toString(36).slice(2),di="__reactFiber$"+Ca,Yi="__reactProps$"+Ca,Bc="__reactContainer$"+Ca,xy="__reactEvents$"+Ca,t9="__reactListeners$"+Ca,n9="__reactHandles$"+Ca,IS="__reactResources$"+Ca,Yd="__reactMarker$"+Ca;function ky(l){delete l[di],delete l[Yi],delete l[xy],delete l[t9],delete l[n9]}function Nc(l){var u=l[di];if(u)return u;for(var f=l.parentNode;f;){if(u=f[Bc]||f[di]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=QI(l);l!==null;){if(f=l[di])return f;l=QI(l)}return u}l=f,f=l.parentNode}return null}function Vc(l){if(l=l[di]||l[Bc]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function Kd(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(i(33))}function Lc(l){var u=l[IS];return u||(u=l[IS]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function ti(l){l[Yd]=!0}var RS=new Set,PS={};function El(l,u){Fc(l,u),Fc(l+"Capture",u)}function Fc(l,u){for(PS[l]=u,l=0;l<u.length;l++)RS.add(u[l])}var i9=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),OS={},DS={};function s9(l){return go.call(DS,l)?!0:go.call(OS,l)?!1:i9.test(l)?DS[l]=!0:(OS[l]=!0,!1)}function eg(l,u,f){if(s9(u))if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+f)}}function tg(l,u,f){if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+f)}}function po(l,u,f,g){if(g===null)l.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(u,f,""+g)}}function Ms(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function MS(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function r9(l,u,f){var g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,y=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(x){f=""+x,y.call(this,x)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(x){f=""+x},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Ey(l){if(!l._valueTracker){var u=MS(l)?"checked":"value";l._valueTracker=r9(l,u,""+l[u])}}function BS(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return l&&(g=MS(l)?l.checked?"true":"false":l.value),l=g,l!==f?(u.setValue(l),!0):!1}function ng(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var o9=/[\n"\\]/g;function Bs(l){return l.replace(o9,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Sy(l,u,f,g,b,y,x,T){l.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?l.type=x:l.removeAttribute("type"),u!=null?x==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Ms(u)):l.value!==""+Ms(u)&&(l.value=""+Ms(u)):x!=="submit"&&x!=="reset"||l.removeAttribute("value"),u!=null?Ty(l,x,Ms(u)):f!=null?Ty(l,x,Ms(f)):g!=null&&l.removeAttribute("value"),b==null&&y!=null&&(l.defaultChecked=!!y),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?l.name=""+Ms(T):l.removeAttribute("name")}function NS(l,u,f,g,b,y,x,T){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(l.type=y),u!=null||f!=null){if(!(y!=="submit"&&y!=="reset"||u!=null)){Ey(l);return}f=f!=null?""+Ms(f):"",u=u!=null?""+Ms(u):f,T||u===l.value||(l.value=u),l.defaultValue=u}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=T?l.checked:!!g,l.defaultChecked=!!g,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(l.name=x),Ey(l)}function Ty(l,u,f){u==="number"&&ng(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function zc(l,u,f,g){if(l=l.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<l.length;f++)b=u.hasOwnProperty("$"+l[f].value),l[f].selected!==b&&(l[f].selected=b),b&&g&&(l[f].defaultSelected=!0)}else{for(f=""+Ms(f),u=null,b=0;b<l.length;b++){if(l[b].value===f){l[b].selected=!0,g&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function VS(l,u,f){if(u!=null&&(u=""+Ms(u),u!==l.value&&(l.value=u),f==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=f!=null?""+Ms(f):""}function LS(l,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(i(92));if(Ae(g)){if(1<g.length)throw Error(i(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=Ms(u),l.defaultValue=f,g=l.textContent,g===f&&g!==""&&g!==null&&(l.value=g),Ey(l)}function jc(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var a9=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function FS(l,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,f):typeof f!="number"||f===0||a9.has(u)?u==="float"?l.cssFloat=f:l[u]=(""+f).trim():l[u]=f+"px"}function zS(l,u,f){if(u!=null&&typeof u!="object")throw Error(i(62));if(l=l.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var b in u)g=u[b],u.hasOwnProperty(b)&&f[b]!==g&&FS(l,b,g)}else for(var y in u)u.hasOwnProperty(y)&&FS(l,y,u[y])}function Iy(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l9=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),c9=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ig(l){return c9.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function bo(){}var Ry=null;function Py(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Uc=null,Hc=null;function jS(l){var u=Vc(l);if(u&&(l=u.stateNode)){var f=l[Yi]||null;e:switch(l=u.stateNode,u.type){case"input":if(Sy(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Bs(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==l&&g.form===l.form){var b=g[Yi]||null;if(!b)throw Error(i(90));Sy(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===l.form&&BS(g)}break e;case"textarea":VS(l,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&zc(l,!!f.multiple,u,!1)}}}var Oy=!1;function US(l,u,f){if(Oy)return l(u,f);Oy=!0;try{var g=l(u);return g}finally{if(Oy=!1,(Uc!==null||Hc!==null)&&(Wg(),Uc&&(u=Uc,l=Hc,Hc=Uc=null,jS(u),l)))for(u=0;u<l.length;u++)jS(l[u])}}function qd(l,u){var f=l.stateNode;if(f===null)return null;var g=f[Yi]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(i(231,u,typeof f));return f}var wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dy=!1;if(wo)try{var Qd={};Object.defineProperty(Qd,"passive",{get:function(){Dy=!0}}),window.addEventListener("test",Qd,Qd),window.removeEventListener("test",Qd,Qd)}catch{Dy=!1}var xa=null,My=null,sg=null;function HS(){if(sg)return sg;var l,u=My,f=u.length,g,b="value"in xa?xa.value:xa.textContent,y=b.length;for(l=0;l<f&&u[l]===b[l];l++);var x=f-l;for(g=1;g<=x&&u[f-g]===b[y-g];g++);return sg=b.slice(l,1<g?1-g:void 0)}function rg(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function og(){return!0}function WS(){return!1}function Ki(l){function u(f,g,b,y,x){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var T in l)l.hasOwnProperty(T)&&(f=l[T],this[T]=f?f(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?og:WS,this.isPropagationStopped=WS,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=og)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=og)},persist:function(){},isPersistent:og}),u}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ag=Ki(Sl),Zd=m({},Sl,{view:0,detail:0}),u9=Ki(Zd),By,Ny,Jd,lg=m({},Zd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ly,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Jd&&(Jd&&l.type==="mousemove"?(By=l.screenX-Jd.screenX,Ny=l.screenY-Jd.screenY):Ny=By=0,Jd=l),By)},movementY:function(l){return"movementY"in l?l.movementY:Ny}}),$S=Ki(lg),d9=m({},lg,{dataTransfer:0}),f9=Ki(d9),h9=m({},Zd,{relatedTarget:0}),Vy=Ki(h9),m9=m({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),g9=Ki(m9),p9=m({},Sl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),b9=Ki(p9),w9=m({},Sl,{data:0}),GS=Ki(w9),v9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _9(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=A9[l])?!!u[l]:!1}function Ly(){return _9}var C9=m({},Zd,{key:function(l){if(l.key){var u=v9[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=rg(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?y9[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ly,charCode:function(l){return l.type==="keypress"?rg(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?rg(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),x9=Ki(C9),k9=m({},lg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),YS=Ki(k9),E9=m({},Zd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ly}),S9=Ki(E9),T9=m({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),I9=Ki(T9),R9=m({},lg,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),P9=Ki(R9),O9=m({},Sl,{newState:0,oldState:0}),D9=Ki(O9),M9=[9,13,27,32],Fy=wo&&"CompositionEvent"in window,Xd=null;wo&&"documentMode"in document&&(Xd=document.documentMode);var B9=wo&&"TextEvent"in window&&!Xd,KS=wo&&(!Fy||Xd&&8<Xd&&11>=Xd),qS=" ",QS=!1;function ZS(l,u){switch(l){case"keyup":return M9.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JS(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Wc=!1;function N9(l,u){switch(l){case"compositionend":return JS(u);case"keypress":return u.which!==32?null:(QS=!0,qS);case"textInput":return l=u.data,l===qS&&QS?null:l;default:return null}}function V9(l,u){if(Wc)return l==="compositionend"||!Fy&&ZS(l,u)?(l=HS(),sg=My=xa=null,Wc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return KS&&u.locale!=="ko"?null:u.data;default:return null}}var L9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function XS(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!L9[l.type]:u==="textarea"}function eT(l,u,f,g){Uc?Hc?Hc.push(g):Hc=[g]:Uc=g,u=Zg(u,"onChange"),0<u.length&&(f=new ag("onChange","change",null,f,g),l.push({event:f,listeners:u}))}var ef=null,tf=null;function F9(l){NI(l,0)}function cg(l){var u=Kd(l);if(BS(u))return l}function tT(l,u){if(l==="change")return u}var nT=!1;if(wo){var zy;if(wo){var jy="oninput"in document;if(!jy){var iT=document.createElement("div");iT.setAttribute("oninput","return;"),jy=typeof iT.oninput=="function"}zy=jy}else zy=!1;nT=zy&&(!document.documentMode||9<document.documentMode)}function sT(){ef&&(ef.detachEvent("onpropertychange",rT),tf=ef=null)}function rT(l){if(l.propertyName==="value"&&cg(tf)){var u=[];eT(u,tf,l,Py(l)),US(F9,u)}}function z9(l,u,f){l==="focusin"?(sT(),ef=u,tf=f,ef.attachEvent("onpropertychange",rT)):l==="focusout"&&sT()}function j9(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return cg(tf)}function U9(l,u){if(l==="click")return cg(u)}function H9(l,u){if(l==="input"||l==="change")return cg(u)}function W9(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var fs=typeof Object.is=="function"?Object.is:W9;function nf(l,u){if(fs(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!go.call(u,b)||!fs(l[b],u[b]))return!1}return!0}function oT(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function aT(l,u){var f=oT(l);l=0;for(var g;f;){if(f.nodeType===3){if(g=l+f.textContent.length,l<=u&&g>=u)return{node:f,offset:u-l};l=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=oT(f)}}function lT(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?lT(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function cT(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=ng(l.document);u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=ng(l.document)}return u}function Uy(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var $9=wo&&"documentMode"in document&&11>=document.documentMode,$c=null,Hy=null,sf=null,Wy=!1;function uT(l,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Wy||$c==null||$c!==ng(g)||(g=$c,"selectionStart"in g&&Uy(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),sf&&nf(sf,g)||(sf=g,g=Zg(Hy,"onSelect"),0<g.length&&(u=new ag("onSelect","select",null,u,f),l.push({event:u,listeners:g}),u.target=$c)))}function Tl(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var Gc={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionrun:Tl("Transition","TransitionRun"),transitionstart:Tl("Transition","TransitionStart"),transitioncancel:Tl("Transition","TransitionCancel"),transitionend:Tl("Transition","TransitionEnd")},$y={},dT={};wo&&(dT=document.createElement("div").style,"AnimationEvent"in window||(delete Gc.animationend.animation,delete Gc.animationiteration.animation,delete Gc.animationstart.animation),"TransitionEvent"in window||delete Gc.transitionend.transition);function Il(l){if($y[l])return $y[l];if(!Gc[l])return l;var u=Gc[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in dT)return $y[l]=u[f];return l}var fT=Il("animationend"),hT=Il("animationiteration"),mT=Il("animationstart"),G9=Il("transitionrun"),Y9=Il("transitionstart"),K9=Il("transitioncancel"),gT=Il("transitionend"),pT=new Map,Gy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gy.push("scrollEnd");function ar(l,u){pT.set(l,u),El(u,[l])}var ug=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ns=[],Yc=0,Yy=0;function dg(){for(var l=Yc,u=Yy=Yc=0;u<l;){var f=Ns[u];Ns[u++]=null;var g=Ns[u];Ns[u++]=null;var b=Ns[u];Ns[u++]=null;var y=Ns[u];if(Ns[u++]=null,g!==null&&b!==null){var x=g.pending;x===null?b.next=b:(b.next=x.next,x.next=b),g.pending=b}y!==0&&bT(f,b,y)}}function fg(l,u,f,g){Ns[Yc++]=l,Ns[Yc++]=u,Ns[Yc++]=f,Ns[Yc++]=g,Yy|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function Ky(l,u,f,g){return fg(l,u,f,g),hg(l)}function Rl(l,u){return fg(l,null,null,u),hg(l)}function bT(l,u,f){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f);for(var b=!1,y=l.return;y!==null;)y.childLanes|=f,g=y.alternate,g!==null&&(g.childLanes|=f),y.tag===22&&(l=y.stateNode,l===null||l._visibility&1||(b=!0)),l=y,y=y.return;return l.tag===3?(y=l.stateNode,b&&u!==null&&(b=31-$n(f),l=y.hiddenUpdates,g=l[b],g===null?l[b]=[u]:g.push(u),u.lane=f|536870912),y):null}function hg(l){if(50<Ef)throw Ef=0,iA=null,Error(i(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Kc={};function q9(l,u,f,g){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(l,u,f,g){return new q9(l,u,f,g)}function qy(l){return l=l.prototype,!(!l||!l.isReactComponent)}function vo(l,u){var f=l.alternate;return f===null?(f=hs(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function wT(l,u){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,u=f.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function mg(l,u,f,g,b,y){var x=0;if(g=l,typeof l=="function")qy(l)&&(x=1);else if(typeof l=="string")x=eU(l,f,he.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case H:return l=hs(31,f,u,b),l.elementType=H,l.lanes=y,l;case C:return Pl(f.children,b,y,u);case k:x=8,b|=24;break;case E:return l=hs(12,f,u,b|2),l.elementType=E,l.lanes=y,l;case O:return l=hs(13,f,u,b),l.elementType=O,l.lanes=y,l;case U:return l=hs(19,f,u,b),l.elementType=U,l.lanes=y,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case I:x=10;break e;case S:x=9;break e;case R:x=11;break e;case P:x=14;break e;case V:x=16,g=null;break e}x=29,f=Error(i(130,l===null?"null":typeof l,"")),g=null}return u=hs(x,f,u,b),u.elementType=l,u.type=g,u.lanes=y,u}function Pl(l,u,f,g){return l=hs(7,l,g,u),l.lanes=f,l}function Qy(l,u,f){return l=hs(6,l,null,u),l.lanes=f,l}function vT(l){var u=hs(18,null,null,0);return u.stateNode=l,u}function Zy(l,u,f){return u=hs(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var yT=new WeakMap;function Vs(l,u){if(typeof l=="object"&&l!==null){var f=yT.get(l);return f!==void 0?f:(u={value:l,source:u,stack:Aa(u)},yT.set(l,u),u)}return{value:l,source:u,stack:Aa(u)}}var qc=[],Qc=0,gg=null,rf=0,Ls=[],Fs=0,ka=null,Nr=1,Vr="";function yo(l,u){qc[Qc++]=rf,qc[Qc++]=gg,gg=l,rf=u}function AT(l,u,f){Ls[Fs++]=Nr,Ls[Fs++]=Vr,Ls[Fs++]=ka,ka=l;var g=Nr;l=Vr;var b=32-$n(g)-1;g&=~(1<<b),f+=1;var y=32-$n(u)+b;if(30<y){var x=b-b%5;y=(g&(1<<x)-1).toString(32),g>>=x,b-=x,Nr=1<<32-$n(u)+b|f<<b|g,Vr=y+l}else Nr=1<<y|f<<b|g,Vr=l}function Jy(l){l.return!==null&&(yo(l,1),AT(l,1,0))}function Xy(l){for(;l===gg;)gg=qc[--Qc],qc[Qc]=null,rf=qc[--Qc],qc[Qc]=null;for(;l===ka;)ka=Ls[--Fs],Ls[Fs]=null,Vr=Ls[--Fs],Ls[Fs]=null,Nr=Ls[--Fs],Ls[Fs]=null}function _T(l,u){Ls[Fs++]=Nr,Ls[Fs++]=Vr,Ls[Fs++]=ka,Nr=u.id,Vr=u.overflow,ka=l}var fi=null,Gt=null,ft=!1,Ea=null,zs=!1,e0=Error(i(519));function Sa(l){var u=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw of(Vs(u,l)),e0}function CT(l){var u=l.stateNode,f=l.type,g=l.memoizedProps;switch(u[di]=l,u[Yi]=g,f){case"dialog":ot("cancel",u),ot("close",u);break;case"iframe":case"object":case"embed":ot("load",u);break;case"video":case"audio":for(f=0;f<Tf.length;f++)ot(Tf[f],u);break;case"source":ot("error",u);break;case"img":case"image":case"link":ot("error",u),ot("load",u);break;case"details":ot("toggle",u);break;case"input":ot("invalid",u),NS(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":ot("invalid",u);break;case"textarea":ot("invalid",u),LS(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||zI(u.textContent,f)?(g.popover!=null&&(ot("beforetoggle",u),ot("toggle",u)),g.onScroll!=null&&ot("scroll",u),g.onScrollEnd!=null&&ot("scrollend",u),g.onClick!=null&&(u.onclick=bo),u=!0):u=!1,u||Sa(l,!0)}function xT(l){for(fi=l.return;fi;)switch(fi.tag){case 5:case 31:case 13:zs=!1;return;case 27:case 3:zs=!0;return;default:fi=fi.return}}function Zc(l){if(l!==fi)return!1;if(!ft)return xT(l),ft=!0,!1;var u=l.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||wA(l.type,l.memoizedProps)),f=!f),f&&Gt&&Sa(l),xT(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));Gt=qI(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));Gt=qI(l)}else u===27?(u=Gt,ja(l.type)?(l=CA,CA=null,Gt=l):Gt=u):Gt=fi?Us(l.stateNode.nextSibling):null;return!0}function Ol(){Gt=fi=null,ft=!1}function t0(){var l=Ea;return l!==null&&(Ji===null?Ji=l:Ji.push.apply(Ji,l),Ea=null),l}function of(l){Ea===null?Ea=[l]:Ea.push(l)}var n0=B(null),Dl=null,Ao=null;function Ta(l,u,f){fe(n0,u._currentValue),u._currentValue=f}function _o(l){l._currentValue=n0.current,J(n0)}function i0(l,u,f){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===f)break;l=l.return}}function s0(l,u,f,g){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var y=b.dependencies;if(y!==null){var x=b.child;y=y.firstContext;e:for(;y!==null;){var T=y;y=b;for(var M=0;M<u.length;M++)if(T.context===u[M]){y.lanes|=f,T=y.alternate,T!==null&&(T.lanes|=f),i0(y.return,f,l),g||(x=null);break e}y=T.next}}else if(b.tag===18){if(x=b.return,x===null)throw Error(i(341));x.lanes|=f,y=x.alternate,y!==null&&(y.lanes|=f),i0(x,f,l),x=null}else x=b.child;if(x!==null)x.return=b;else for(x=b;x!==null;){if(x===l){x=null;break}if(b=x.sibling,b!==null){b.return=x.return,x=b;break}x=x.return}b=x}}function Jc(l,u,f,g){l=null;for(var b=u,y=!1;b!==null;){if(!y){if((b.flags&524288)!==0)y=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var x=b.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var T=b.type;fs(b.pendingProps.value,x.value)||(l!==null?l.push(T):l=[T])}}else if(b===oe.current){if(x=b.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(Df):l=[Df])}b=b.return}l!==null&&s0(u,l,f,g),u.flags|=262144}function pg(l){for(l=l.firstContext;l!==null;){if(!fs(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Ml(l){Dl=l,Ao=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function hi(l){return kT(Dl,l)}function bg(l,u){return Dl===null&&Ml(l),kT(l,u)}function kT(l,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},Ao===null){if(l===null)throw Error(i(308));Ao=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Ao=Ao.next=u;return f}var Q9=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(f,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(f){return f()})}},Z9=n.unstable_scheduleCallback,J9=n.unstable_NormalPriority,Dn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function r0(){return{controller:new Q9,data:new Map,refCount:0}}function af(l){l.refCount--,l.refCount===0&&Z9(J9,function(){l.controller.abort()})}var lf=null,o0=0,Xc=0,eu=null;function X9(l,u){if(lf===null){var f=lf=[];o0=0,Xc=cA(),eu={status:"pending",value:void 0,then:function(g){f.push(g)}}}return o0++,u.then(ET,ET),u}function ET(){if(--o0===0&&lf!==null){eu!==null&&(eu.status="fulfilled");var l=lf;lf=null,Xc=0,eu=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function ej(l,u){var f=[],g={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var b=0;b<f.length;b++)(0,f[b])(u)},function(b){for(g.status="rejected",g.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),g}var ST=F.S;F.S=function(l,u){uI=K(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&X9(l,u),ST!==null&&ST(l,u)};var Bl=B(null);function a0(){var l=Bl.current;return l!==null?l:zt.pooledCache}function wg(l,u){u===null?fe(Bl,Bl.current):fe(Bl,u.pool)}function TT(){var l=a0();return l===null?null:{parent:Dn._currentValue,pool:l}}var tu=Error(i(460)),l0=Error(i(474)),vg=Error(i(542)),yg={then:function(){}};function IT(l){return l=l.status,l==="fulfilled"||l==="rejected"}function RT(l,u,f){switch(f=l[f],f===void 0?l.push(u):f!==u&&(u.then(bo,bo),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,OT(l),l;default:if(typeof u.status=="string")u.then(bo,bo);else{if(l=zt,l!==null&&100<l.shellSuspendCounter)throw Error(i(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=g}},function(g){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,OT(l),l}throw Vl=u,tu}}function Nl(l){try{var u=l._init;return u(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Vl=f,tu):f}}var Vl=null;function PT(){if(Vl===null)throw Error(i(459));var l=Vl;return Vl=null,l}function OT(l){if(l===tu||l===vg)throw Error(i(483))}var nu=null,cf=0;function Ag(l){var u=cf;return cf+=1,nu===null&&(nu=[]),RT(nu,l,u)}function uf(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function _g(l,u){throw u.$$typeof===p?Error(i(525)):(l=Object.prototype.toString.call(u),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function DT(l){function u(j,L){if(l){var W=j.deletions;W===null?(j.deletions=[L],j.flags|=16):W.push(L)}}function f(j,L){if(!l)return null;for(;L!==null;)u(j,L),L=L.sibling;return null}function g(j){for(var L=new Map;j!==null;)j.key!==null?L.set(j.key,j):L.set(j.index,j),j=j.sibling;return L}function b(j,L){return j=vo(j,L),j.index=0,j.sibling=null,j}function y(j,L,W){return j.index=W,l?(W=j.alternate,W!==null?(W=W.index,W<L?(j.flags|=67108866,L):W):(j.flags|=67108866,L)):(j.flags|=1048576,L)}function x(j){return l&&j.alternate===null&&(j.flags|=67108866),j}function T(j,L,W,se){return L===null||L.tag!==6?(L=Qy(W,j.mode,se),L.return=j,L):(L=b(L,W),L.return=j,L)}function M(j,L,W,se){var Fe=W.type;return Fe===C?ne(j,L,W.props.children,se,W.key):L!==null&&(L.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===V&&Nl(Fe)===L.type)?(L=b(L,W.props),uf(L,W),L.return=j,L):(L=mg(W.type,W.key,W.props,null,j.mode,se),uf(L,W),L.return=j,L)}function Y(j,L,W,se){return L===null||L.tag!==4||L.stateNode.containerInfo!==W.containerInfo||L.stateNode.implementation!==W.implementation?(L=Zy(W,j.mode,se),L.return=j,L):(L=b(L,W.children||[]),L.return=j,L)}function ne(j,L,W,se,Fe){return L===null||L.tag!==7?(L=Pl(W,j.mode,se,Fe),L.return=j,L):(L=b(L,W),L.return=j,L)}function ae(j,L,W){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Qy(""+L,j.mode,W),L.return=j,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return W=mg(L.type,L.key,L.props,null,j.mode,W),uf(W,L),W.return=j,W;case A:return L=Zy(L,j.mode,W),L.return=j,L;case V:return L=Nl(L),ae(j,L,W)}if(Ae(L)||de(L))return L=Pl(L,j.mode,W,null),L.return=j,L;if(typeof L.then=="function")return ae(j,Ag(L),W);if(L.$$typeof===I)return ae(j,bg(j,L),W);_g(j,L)}return null}function q(j,L,W,se){var Fe=L!==null?L.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Fe!==null?null:T(j,L,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case w:return W.key===Fe?M(j,L,W,se):null;case A:return W.key===Fe?Y(j,L,W,se):null;case V:return W=Nl(W),q(j,L,W,se)}if(Ae(W)||de(W))return Fe!==null?null:ne(j,L,W,se,null);if(typeof W.then=="function")return q(j,L,Ag(W),se);if(W.$$typeof===I)return q(j,L,bg(j,W),se);_g(j,W)}return null}function Z(j,L,W,se,Fe){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return j=j.get(W)||null,T(L,j,""+se,Fe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return j=j.get(se.key===null?W:se.key)||null,M(L,j,se,Fe);case A:return j=j.get(se.key===null?W:se.key)||null,Y(L,j,se,Fe);case V:return se=Nl(se),Z(j,L,W,se,Fe)}if(Ae(se)||de(se))return j=j.get(W)||null,ne(L,j,se,Fe,null);if(typeof se.then=="function")return Z(j,L,W,Ag(se),Fe);if(se.$$typeof===I)return Z(j,L,W,bg(L,se),Fe);_g(L,se)}return null}function Re(j,L,W,se){for(var Fe=null,wt=null,Ne=L,Xe=L=0,ut=null;Ne!==null&&Xe<W.length;Xe++){Ne.index>Xe?(ut=Ne,Ne=null):ut=Ne.sibling;var vt=q(j,Ne,W[Xe],se);if(vt===null){Ne===null&&(Ne=ut);break}l&&Ne&&vt.alternate===null&&u(j,Ne),L=y(vt,L,Xe),wt===null?Fe=vt:wt.sibling=vt,wt=vt,Ne=ut}if(Xe===W.length)return f(j,Ne),ft&&yo(j,Xe),Fe;if(Ne===null){for(;Xe<W.length;Xe++)Ne=ae(j,W[Xe],se),Ne!==null&&(L=y(Ne,L,Xe),wt===null?Fe=Ne:wt.sibling=Ne,wt=Ne);return ft&&yo(j,Xe),Fe}for(Ne=g(Ne);Xe<W.length;Xe++)ut=Z(Ne,j,Xe,W[Xe],se),ut!==null&&(l&&ut.alternate!==null&&Ne.delete(ut.key===null?Xe:ut.key),L=y(ut,L,Xe),wt===null?Fe=ut:wt.sibling=ut,wt=ut);return l&&Ne.forEach(function(Ga){return u(j,Ga)}),ft&&yo(j,Xe),Fe}function He(j,L,W,se){if(W==null)throw Error(i(151));for(var Fe=null,wt=null,Ne=L,Xe=L=0,ut=null,vt=W.next();Ne!==null&&!vt.done;Xe++,vt=W.next()){Ne.index>Xe?(ut=Ne,Ne=null):ut=Ne.sibling;var Ga=q(j,Ne,vt.value,se);if(Ga===null){Ne===null&&(Ne=ut);break}l&&Ne&&Ga.alternate===null&&u(j,Ne),L=y(Ga,L,Xe),wt===null?Fe=Ga:wt.sibling=Ga,wt=Ga,Ne=ut}if(vt.done)return f(j,Ne),ft&&yo(j,Xe),Fe;if(Ne===null){for(;!vt.done;Xe++,vt=W.next())vt=ae(j,vt.value,se),vt!==null&&(L=y(vt,L,Xe),wt===null?Fe=vt:wt.sibling=vt,wt=vt);return ft&&yo(j,Xe),Fe}for(Ne=g(Ne);!vt.done;Xe++,vt=W.next())vt=Z(Ne,j,Xe,vt.value,se),vt!==null&&(l&&vt.alternate!==null&&Ne.delete(vt.key===null?Xe:vt.key),L=y(vt,L,Xe),wt===null?Fe=vt:wt.sibling=vt,wt=vt);return l&&Ne.forEach(function(dU){return u(j,dU)}),ft&&yo(j,Xe),Fe}function Nt(j,L,W,se){if(typeof W=="object"&&W!==null&&W.type===C&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case w:e:{for(var Fe=W.key;L!==null;){if(L.key===Fe){if(Fe=W.type,Fe===C){if(L.tag===7){f(j,L.sibling),se=b(L,W.props.children),se.return=j,j=se;break e}}else if(L.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===V&&Nl(Fe)===L.type){f(j,L.sibling),se=b(L,W.props),uf(se,W),se.return=j,j=se;break e}f(j,L);break}else u(j,L);L=L.sibling}W.type===C?(se=Pl(W.props.children,j.mode,se,W.key),se.return=j,j=se):(se=mg(W.type,W.key,W.props,null,j.mode,se),uf(se,W),se.return=j,j=se)}return x(j);case A:e:{for(Fe=W.key;L!==null;){if(L.key===Fe)if(L.tag===4&&L.stateNode.containerInfo===W.containerInfo&&L.stateNode.implementation===W.implementation){f(j,L.sibling),se=b(L,W.children||[]),se.return=j,j=se;break e}else{f(j,L);break}else u(j,L);L=L.sibling}se=Zy(W,j.mode,se),se.return=j,j=se}return x(j);case V:return W=Nl(W),Nt(j,L,W,se)}if(Ae(W))return Re(j,L,W,se);if(de(W)){if(Fe=de(W),typeof Fe!="function")throw Error(i(150));return W=Fe.call(W),He(j,L,W,se)}if(typeof W.then=="function")return Nt(j,L,Ag(W),se);if(W.$$typeof===I)return Nt(j,L,bg(j,W),se);_g(j,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,L!==null&&L.tag===6?(f(j,L.sibling),se=b(L,W),se.return=j,j=se):(f(j,L),se=Qy(W,j.mode,se),se.return=j,j=se),x(j)):f(j,L)}return function(j,L,W,se){try{cf=0;var Fe=Nt(j,L,W,se);return nu=null,Fe}catch(Ne){if(Ne===tu||Ne===vg)throw Ne;var wt=hs(29,Ne,null,j.mode);return wt.lanes=se,wt.return=j,wt}}}var Ll=DT(!0),MT=DT(!1),Ia=!1;function c0(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function u0(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ra(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Pa(l,u,f){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(xt&2)!==0){var b=g.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),g.pending=u,u=hg(l),bT(l,null,f),u}return fg(l,g,u,f),hg(l)}function df(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,kS(l,f)}}function d0(l,u){var f=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,y=null;if(f=f.firstBaseUpdate,f!==null){do{var x={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};y===null?b=y=x:y=y.next=x,f=f.next}while(f!==null);y===null?b=y=u:y=y.next=u}else b=y=u;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:y,shared:g.shared,callbacks:g.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}var f0=!1;function ff(){if(f0){var l=eu;if(l!==null)throw l}}function hf(l,u,f,g){f0=!1;var b=l.updateQueue;Ia=!1;var y=b.firstBaseUpdate,x=b.lastBaseUpdate,T=b.shared.pending;if(T!==null){b.shared.pending=null;var M=T,Y=M.next;M.next=null,x===null?y=Y:x.next=Y,x=M;var ne=l.alternate;ne!==null&&(ne=ne.updateQueue,T=ne.lastBaseUpdate,T!==x&&(T===null?ne.firstBaseUpdate=Y:T.next=Y,ne.lastBaseUpdate=M))}if(y!==null){var ae=b.baseState;x=0,ne=Y=M=null,T=y;do{var q=T.lane&-536870913,Z=q!==T.lane;if(Z?(ct&q)===q:(g&q)===q){q!==0&&q===Xc&&(f0=!0),ne!==null&&(ne=ne.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Re=l,He=T;q=u;var Nt=f;switch(He.tag){case 1:if(Re=He.payload,typeof Re=="function"){ae=Re.call(Nt,ae,q);break e}ae=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=He.payload,q=typeof Re=="function"?Re.call(Nt,ae,q):Re,q==null)break e;ae=m({},ae,q);break e;case 2:Ia=!0}}q=T.callback,q!==null&&(l.flags|=64,Z&&(l.flags|=8192),Z=b.callbacks,Z===null?b.callbacks=[q]:Z.push(q))}else Z={lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ne===null?(Y=ne=Z,M=ae):ne=ne.next=Z,x|=q;if(T=T.next,T===null){if(T=b.shared.pending,T===null)break;Z=T,T=Z.next,Z.next=null,b.lastBaseUpdate=Z,b.shared.pending=null}}while(!0);ne===null&&(M=ae),b.baseState=M,b.firstBaseUpdate=Y,b.lastBaseUpdate=ne,y===null&&(b.shared.lanes=0),Na|=x,l.lanes=x,l.memoizedState=ae}}function BT(l,u){if(typeof l!="function")throw Error(i(191,l));l.call(u)}function NT(l,u){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)BT(f[l],u)}var iu=B(null),Cg=B(0);function VT(l,u){l=Po,fe(Cg,l),fe(iu,u),Po=l|u.baseLanes}function h0(){fe(Cg,Po),fe(iu,iu.current)}function m0(){Po=Cg.current,J(iu),J(Cg)}var ms=B(null),js=null;function Oa(l){var u=l.alternate;fe(En,En.current&1),fe(ms,l),js===null&&(u===null||iu.current!==null||u.memoizedState!==null)&&(js=l)}function g0(l){fe(En,En.current),fe(ms,l),js===null&&(js=l)}function LT(l){l.tag===22?(fe(En,En.current),fe(ms,l),js===null&&(js=l)):Da()}function Da(){fe(En,En.current),fe(ms,ms.current)}function gs(l){J(ms),js===l&&(js=null),J(En)}var En=B(0);function xg(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||AA(f)||_A(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Co=0,Je=null,Mt=null,Mn=null,kg=!1,su=!1,Fl=!1,Eg=0,mf=0,ru=null,tj=0;function yn(){throw Error(i(321))}function p0(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!fs(l[f],u[f]))return!1;return!0}function b0(l,u,f,g,b,y){return Co=y,Je=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,F.H=l===null||l.memoizedState===null?A2:O0,Fl=!1,y=f(g,b),Fl=!1,su&&(y=zT(u,f,g,b)),FT(l),y}function FT(l){F.H=bf;var u=Mt!==null&&Mt.next!==null;if(Co=0,Mn=Mt=Je=null,kg=!1,mf=0,ru=null,u)throw Error(i(300));l===null||Bn||(l=l.dependencies,l!==null&&pg(l)&&(Bn=!0))}function zT(l,u,f,g){Je=l;var b=0;do{if(su&&(ru=null),mf=0,su=!1,25<=b)throw Error(i(301));if(b+=1,Mn=Mt=null,l.updateQueue!=null){var y=l.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}F.H=_2,y=u(f,g)}while(su);return y}function nj(){var l=F.H,u=l.useState()[0];return u=typeof u.then=="function"?gf(u):u,l=l.useState()[0],(Mt!==null?Mt.memoizedState:null)!==l&&(Je.flags|=1024),u}function w0(){var l=Eg!==0;return Eg=0,l}function v0(l,u,f){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~f}function y0(l){if(kg){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}kg=!1}Co=0,Mn=Mt=Je=null,su=!1,mf=Eg=0,ru=null}function Ti(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?Je.memoizedState=Mn=l:Mn=Mn.next=l,Mn}function Sn(){if(Mt===null){var l=Je.alternate;l=l!==null?l.memoizedState:null}else l=Mt.next;var u=Mn===null?Je.memoizedState:Mn.next;if(u!==null)Mn=u,Mt=l;else{if(l===null)throw Je.alternate===null?Error(i(467)):Error(i(310));Mt=l,l={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Mn===null?Je.memoizedState=Mn=l:Mn=Mn.next=l}return Mn}function Sg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gf(l){var u=mf;return mf+=1,ru===null&&(ru=[]),l=RT(ru,l,u),u=Je,(Mn===null?u.memoizedState:Mn.next)===null&&(u=u.alternate,F.H=u===null||u.memoizedState===null?A2:O0),l}function Tg(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return gf(l);if(l.$$typeof===I)return hi(l)}throw Error(i(438,String(l)))}function A0(l){var u=null,f=Je.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=Je.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=Sg(),Je.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(l),g=0;g<l;g++)f[g]=ie;return u.index++,f}function xo(l,u){return typeof u=="function"?u(l):u}function Ig(l){var u=Sn();return _0(u,Mt,l)}function _0(l,u,f){var g=l.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=f;var b=l.baseQueue,y=g.pending;if(y!==null){if(b!==null){var x=b.next;b.next=y.next,y.next=x}u.baseQueue=b=y,g.pending=null}if(y=l.baseState,b===null)l.memoizedState=y;else{u=b.next;var T=x=null,M=null,Y=u,ne=!1;do{var ae=Y.lane&-536870913;if(ae!==Y.lane?(ct&ae)===ae:(Co&ae)===ae){var q=Y.revertLane;if(q===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ae===Xc&&(ne=!0);else if((Co&q)===q){Y=Y.next,q===Xc&&(ne=!0);continue}else ae={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},M===null?(T=M=ae,x=y):M=M.next=ae,Je.lanes|=q,Na|=q;ae=Y.action,Fl&&f(y,ae),y=Y.hasEagerState?Y.eagerState:f(y,ae)}else q={lane:ae,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},M===null?(T=M=q,x=y):M=M.next=q,Je.lanes|=ae,Na|=ae;Y=Y.next}while(Y!==null&&Y!==u);if(M===null?x=y:M.next=T,!fs(y,l.memoizedState)&&(Bn=!0,ne&&(f=eu,f!==null)))throw f;l.memoizedState=y,l.baseState=x,l.baseQueue=M,g.lastRenderedState=y}return b===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function C0(l){var u=Sn(),f=u.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=l;var g=f.dispatch,b=f.pending,y=u.memoizedState;if(b!==null){f.pending=null;var x=b=b.next;do y=l(y,x.action),x=x.next;while(x!==b);fs(y,u.memoizedState)||(Bn=!0),u.memoizedState=y,u.baseQueue===null&&(u.baseState=y),f.lastRenderedState=y}return[y,g]}function jT(l,u,f){var g=Je,b=Sn(),y=ft;if(y){if(f===void 0)throw Error(i(407));f=f()}else f=u();var x=!fs((Mt||b).memoizedState,f);if(x&&(b.memoizedState=f,Bn=!0),b=b.queue,E0(WT.bind(null,g,b,l),[l]),b.getSnapshot!==u||x||Mn!==null&&Mn.memoizedState.tag&1){if(g.flags|=2048,ou(9,{destroy:void 0},HT.bind(null,g,b,f,u),null),zt===null)throw Error(i(349));y||(Co&127)!==0||UT(g,u,f)}return f}function UT(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=Je.updateQueue,u===null?(u=Sg(),Je.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function HT(l,u,f,g){u.value=f,u.getSnapshot=g,$T(u)&&GT(l)}function WT(l,u,f){return f(function(){$T(u)&&GT(l)})}function $T(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!fs(l,f)}catch{return!0}}function GT(l){var u=Rl(l,2);u!==null&&Xi(u,l,2)}function x0(l){var u=Ti();if(typeof l=="function"){var f=l;if(l=f(),Fl){_i(!0);try{f()}finally{_i(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:l},u}function YT(l,u,f,g){return l.baseState=f,_0(l,Mt,typeof g=="function"?g:xo)}function ij(l,u,f,g,b){if(Og(l))throw Error(i(485));if(l=u.action,l!==null){var y={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){y.listeners.push(x)}};F.T!==null?f(!0):y.isTransition=!1,g(y),f=u.pending,f===null?(y.next=u.pending=y,KT(u,y)):(y.next=f.next,u.pending=f.next=y)}}function KT(l,u){var f=u.action,g=u.payload,b=l.state;if(u.isTransition){var y=F.T,x={};F.T=x;try{var T=f(b,g),M=F.S;M!==null&&M(x,T),qT(l,u,T)}catch(Y){k0(l,u,Y)}finally{y!==null&&x.types!==null&&(y.types=x.types),F.T=y}}else try{y=f(b,g),qT(l,u,y)}catch(Y){k0(l,u,Y)}}function qT(l,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){QT(l,u,g)},function(g){return k0(l,u,g)}):QT(l,u,f)}function QT(l,u,f){u.status="fulfilled",u.value=f,ZT(u),l.state=f,u=l.pending,u!==null&&(f=u.next,f===u?l.pending=null:(f=f.next,u.next=f,KT(l,f)))}function k0(l,u,f){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,ZT(u),u=u.next;while(u!==g)}l.action=null}function ZT(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function JT(l,u){return u}function XT(l,u){if(ft){var f=zt.formState;if(f!==null){e:{var g=Je;if(ft){if(Gt){t:{for(var b=Gt,y=zs;b.nodeType!==8;){if(!y){b=null;break t}if(b=Us(b.nextSibling),b===null){b=null;break t}}y=b.data,b=y==="F!"||y==="F"?b:null}if(b){Gt=Us(b.nextSibling),g=b.data==="F!";break e}}Sa(g)}g=!1}g&&(u=f[0])}}return f=Ti(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:JT,lastRenderedState:u},f.queue=g,f=w2.bind(null,Je,g),g.dispatch=f,g=x0(!1),y=P0.bind(null,Je,!1,g.queue),g=Ti(),b={state:u,dispatch:null,action:l,pending:null},g.queue=b,f=ij.bind(null,Je,b,y,f),b.dispatch=f,g.memoizedState=l,[u,f,!1]}function e2(l){var u=Sn();return t2(u,Mt,l)}function t2(l,u,f){if(u=_0(l,u,JT)[0],l=Ig(xo)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=gf(u)}catch(x){throw x===tu?vg:x}else g=u;u=Sn();var b=u.queue,y=b.dispatch;return f!==u.memoizedState&&(Je.flags|=2048,ou(9,{destroy:void 0},sj.bind(null,b,f),null)),[g,y,l]}function sj(l,u){l.action=u}function n2(l){var u=Sn(),f=Mt;if(f!==null)return t2(u,f,l);Sn(),u=u.memoizedState,f=Sn();var g=f.queue.dispatch;return f.memoizedState=l,[u,g,!1]}function ou(l,u,f,g){return l={tag:l,create:f,deps:g,inst:u,next:null},u=Je.updateQueue,u===null&&(u=Sg(),Je.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=l.next=l:(g=f.next,f.next=l,l.next=g,u.lastEffect=l),l}function i2(){return Sn().memoizedState}function Rg(l,u,f,g){var b=Ti();Je.flags|=l,b.memoizedState=ou(1|u,{destroy:void 0},f,g===void 0?null:g)}function Pg(l,u,f,g){var b=Sn();g=g===void 0?null:g;var y=b.memoizedState.inst;Mt!==null&&g!==null&&p0(g,Mt.memoizedState.deps)?b.memoizedState=ou(u,y,f,g):(Je.flags|=l,b.memoizedState=ou(1|u,y,f,g))}function s2(l,u){Rg(8390656,8,l,u)}function E0(l,u){Pg(2048,8,l,u)}function rj(l){Je.flags|=4;var u=Je.updateQueue;if(u===null)u=Sg(),Je.updateQueue=u,u.events=[l];else{var f=u.events;f===null?u.events=[l]:f.push(l)}}function r2(l){var u=Sn().memoizedState;return rj({ref:u,nextImpl:l}),function(){if((xt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}function o2(l,u){return Pg(4,2,l,u)}function a2(l,u){return Pg(4,4,l,u)}function l2(l,u){if(typeof u=="function"){l=l();var f=u(l);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function c2(l,u,f){f=f!=null?f.concat([l]):null,Pg(4,4,l2.bind(null,u,l),f)}function S0(){}function u2(l,u){var f=Sn();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&p0(u,g[1])?g[0]:(f.memoizedState=[l,u],l)}function d2(l,u){var f=Sn();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&p0(u,g[1]))return g[0];if(g=l(),Fl){_i(!0);try{l()}finally{_i(!1)}}return f.memoizedState=[g,u],g}function T0(l,u,f){return f===void 0||(Co&1073741824)!==0&&(ct&261930)===0?l.memoizedState=u:(l.memoizedState=f,l=fI(),Je.lanes|=l,Na|=l,f)}function f2(l,u,f,g){return fs(f,u)?f:iu.current!==null?(l=T0(l,f,g),fs(l,u)||(Bn=!0),l):(Co&42)===0||(Co&1073741824)!==0&&(ct&261930)===0?(Bn=!0,l.memoizedState=f):(l=fI(),Je.lanes|=l,Na|=l,u)}function h2(l,u,f,g,b){var y=X.p;X.p=y!==0&&8>y?y:8;var x=F.T,T={};F.T=T,P0(l,!1,u,f);try{var M=b(),Y=F.S;if(Y!==null&&Y(T,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ne=ej(M,g);pf(l,u,ne,ws(l))}else pf(l,u,g,ws(l))}catch(ae){pf(l,u,{then:function(){},status:"rejected",reason:ae},ws())}finally{X.p=y,x!==null&&T.types!==null&&(x.types=T.types),F.T=x}}function oj(){}function I0(l,u,f,g){if(l.tag!==5)throw Error(i(476));var b=m2(l).queue;h2(l,b,u,$,f===null?oj:function(){return g2(l),f(g)})}function m2(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:$},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:f},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function g2(l){var u=m2(l);u.next===null&&(u=l.alternate.memoizedState),pf(l,u.next.queue,{},ws())}function R0(){return hi(Df)}function p2(){return Sn().memoizedState}function b2(){return Sn().memoizedState}function aj(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var f=ws();l=Ra(f);var g=Pa(u,l,f);g!==null&&(Xi(g,u,f),df(g,u,f)),u={cache:r0()},l.payload=u;return}u=u.return}}function lj(l,u,f){var g=ws();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Og(l)?v2(u,f):(f=Ky(l,u,f,g),f!==null&&(Xi(f,l,g),y2(f,u,g)))}function w2(l,u,f){var g=ws();pf(l,u,f,g)}function pf(l,u,f,g){var b={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Og(l))v2(u,b);else{var y=l.alternate;if(l.lanes===0&&(y===null||y.lanes===0)&&(y=u.lastRenderedReducer,y!==null))try{var x=u.lastRenderedState,T=y(x,f);if(b.hasEagerState=!0,b.eagerState=T,fs(T,x))return fg(l,u,b,0),zt===null&&dg(),!1}catch{}if(f=Ky(l,u,b,g),f!==null)return Xi(f,l,g),y2(f,u,g),!0}return!1}function P0(l,u,f,g){if(g={lane:2,revertLane:cA(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Og(l)){if(u)throw Error(i(479))}else u=Ky(l,f,g,2),u!==null&&Xi(u,l,2)}function Og(l){var u=l.alternate;return l===Je||u!==null&&u===Je}function v2(l,u){su=kg=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function y2(l,u,f){if((f&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,kS(l,f)}}var bf={readContext:hi,use:Tg,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useLayoutEffect:yn,useInsertionEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useSyncExternalStore:yn,useId:yn,useHostTransitionStatus:yn,useFormState:yn,useActionState:yn,useOptimistic:yn,useMemoCache:yn,useCacheRefresh:yn};bf.useEffectEvent=yn;var A2={readContext:hi,use:Tg,useCallback:function(l,u){return Ti().memoizedState=[l,u===void 0?null:u],l},useContext:hi,useEffect:s2,useImperativeHandle:function(l,u,f){f=f!=null?f.concat([l]):null,Rg(4194308,4,l2.bind(null,u,l),f)},useLayoutEffect:function(l,u){return Rg(4194308,4,l,u)},useInsertionEffect:function(l,u){Rg(4,2,l,u)},useMemo:function(l,u){var f=Ti();u=u===void 0?null:u;var g=l();if(Fl){_i(!0);try{l()}finally{_i(!1)}}return f.memoizedState=[g,u],g},useReducer:function(l,u,f){var g=Ti();if(f!==void 0){var b=f(u);if(Fl){_i(!0);try{f(u)}finally{_i(!1)}}}else b=u;return g.memoizedState=g.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},g.queue=l,l=l.dispatch=lj.bind(null,Je,l),[g.memoizedState,l]},useRef:function(l){var u=Ti();return l={current:l},u.memoizedState=l},useState:function(l){l=x0(l);var u=l.queue,f=w2.bind(null,Je,u);return u.dispatch=f,[l.memoizedState,f]},useDebugValue:S0,useDeferredValue:function(l,u){var f=Ti();return T0(f,l,u)},useTransition:function(){var l=x0(!1);return l=h2.bind(null,Je,l.queue,!0,!1),Ti().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,f){var g=Je,b=Ti();if(ft){if(f===void 0)throw Error(i(407));f=f()}else{if(f=u(),zt===null)throw Error(i(349));(ct&127)!==0||UT(g,u,f)}b.memoizedState=f;var y={value:f,getSnapshot:u};return b.queue=y,s2(WT.bind(null,g,y,l),[l]),g.flags|=2048,ou(9,{destroy:void 0},HT.bind(null,g,y,f,u),null),f},useId:function(){var l=Ti(),u=zt.identifierPrefix;if(ft){var f=Vr,g=Nr;f=(g&~(1<<32-$n(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=Eg++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=tj++,u="_"+u+"r_"+f.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:R0,useFormState:XT,useActionState:XT,useOptimistic:function(l){var u=Ti();u.memoizedState=u.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=P0.bind(null,Je,!0,f),f.dispatch=u,[l,u]},useMemoCache:A0,useCacheRefresh:function(){return Ti().memoizedState=aj.bind(null,Je)},useEffectEvent:function(l){var u=Ti(),f={impl:l};return u.memoizedState=f,function(){if((xt&2)!==0)throw Error(i(440));return f.impl.apply(void 0,arguments)}}},O0={readContext:hi,use:Tg,useCallback:u2,useContext:hi,useEffect:E0,useImperativeHandle:c2,useInsertionEffect:o2,useLayoutEffect:a2,useMemo:d2,useReducer:Ig,useRef:i2,useState:function(){return Ig(xo)},useDebugValue:S0,useDeferredValue:function(l,u){var f=Sn();return f2(f,Mt.memoizedState,l,u)},useTransition:function(){var l=Ig(xo)[0],u=Sn().memoizedState;return[typeof l=="boolean"?l:gf(l),u]},useSyncExternalStore:jT,useId:p2,useHostTransitionStatus:R0,useFormState:e2,useActionState:e2,useOptimistic:function(l,u){var f=Sn();return YT(f,Mt,l,u)},useMemoCache:A0,useCacheRefresh:b2};O0.useEffectEvent=r2;var _2={readContext:hi,use:Tg,useCallback:u2,useContext:hi,useEffect:E0,useImperativeHandle:c2,useInsertionEffect:o2,useLayoutEffect:a2,useMemo:d2,useReducer:C0,useRef:i2,useState:function(){return C0(xo)},useDebugValue:S0,useDeferredValue:function(l,u){var f=Sn();return Mt===null?T0(f,l,u):f2(f,Mt.memoizedState,l,u)},useTransition:function(){var l=C0(xo)[0],u=Sn().memoizedState;return[typeof l=="boolean"?l:gf(l),u]},useSyncExternalStore:jT,useId:p2,useHostTransitionStatus:R0,useFormState:n2,useActionState:n2,useOptimistic:function(l,u){var f=Sn();return Mt!==null?YT(f,Mt,l,u):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:A0,useCacheRefresh:b2};_2.useEffectEvent=r2;function D0(l,u,f,g){u=l.memoizedState,f=f(g,u),f=f==null?u:m({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var M0={enqueueSetState:function(l,u,f){l=l._reactInternals;var g=ws(),b=Ra(g);b.payload=u,f!=null&&(b.callback=f),u=Pa(l,b,g),u!==null&&(Xi(u,l,g),df(u,l,g))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var g=ws(),b=Ra(g);b.tag=1,b.payload=u,f!=null&&(b.callback=f),u=Pa(l,b,g),u!==null&&(Xi(u,l,g),df(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=ws(),g=Ra(f);g.tag=2,u!=null&&(g.callback=u),u=Pa(l,g,f),u!==null&&(Xi(u,l,f),df(u,l,f))}};function C2(l,u,f,g,b,y,x){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,y,x):u.prototype&&u.prototype.isPureReactComponent?!nf(f,g)||!nf(b,y):!0}function x2(l,u,f,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==l&&M0.enqueueReplaceState(u,u.state,null)}function zl(l,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(l=l.defaultProps){f===u&&(f=m({},f));for(var b in l)f[b]===void 0&&(f[b]=l[b])}return f}function k2(l){ug(l)}function E2(l){console.error(l)}function S2(l){ug(l)}function Dg(l,u){try{var f=l.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function T2(l,u,f){try{var g=l.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function B0(l,u,f){return f=Ra(f),f.tag=3,f.payload={element:null},f.callback=function(){Dg(l,u)},f}function I2(l){return l=Ra(l),l.tag=3,l}function R2(l,u,f,g){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var y=g.value;l.payload=function(){return b(y)},l.callback=function(){T2(u,f,g)}}var x=f.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(l.callback=function(){T2(u,f,g),typeof b!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var T=g.stack;this.componentDidCatch(g.value,{componentStack:T!==null?T:""})})}function cj(l,u,f,g,b){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&Jc(u,f,b,!0),f=ms.current,f!==null){switch(f.tag){case 31:case 13:return js===null?$g():f.alternate===null&&An===0&&(An=3),f.flags&=-257,f.flags|=65536,f.lanes=b,g===yg?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),oA(l,g,b)),!1;case 22:return f.flags|=65536,g===yg?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),oA(l,g,b)),!1}throw Error(i(435,f.tag))}return oA(l,g,b),$g(),!1}if(ft)return u=ms.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,g!==e0&&(l=Error(i(422),{cause:g}),of(Vs(l,f)))):(g!==e0&&(u=Error(i(423),{cause:g}),of(Vs(u,f))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,g=Vs(g,f),b=B0(l.stateNode,g,b),d0(l,b),An!==4&&(An=2)),!1;var y=Error(i(520),{cause:g});if(y=Vs(y,f),kf===null?kf=[y]:kf.push(y),An!==4&&(An=2),u===null)return!0;g=Vs(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,l=b&-b,f.lanes|=l,l=B0(f.stateNode,g,l),d0(f,l),!1;case 1:if(u=f.type,y=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Va===null||!Va.has(y))))return f.flags|=65536,b&=-b,f.lanes|=b,b=I2(b),R2(b,l,f,g),d0(f,b),!1}f=f.return}while(f!==null);return!1}var N0=Error(i(461)),Bn=!1;function mi(l,u,f,g){u.child=l===null?MT(u,null,f,g):Ll(u,l.child,f,g)}function P2(l,u,f,g,b){f=f.render;var y=u.ref;if("ref"in g){var x={};for(var T in g)T!=="ref"&&(x[T]=g[T])}else x=g;return Ml(u),g=b0(l,u,f,x,y,b),T=w0(),l!==null&&!Bn?(v0(l,u,b),ko(l,u,b)):(ft&&T&&Jy(u),u.flags|=1,mi(l,u,g,b),u.child)}function O2(l,u,f,g,b){if(l===null){var y=f.type;return typeof y=="function"&&!qy(y)&&y.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=y,D2(l,u,y,g,b)):(l=mg(f.type,null,g,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(y=l.child,!W0(l,b)){var x=y.memoizedProps;if(f=f.compare,f=f!==null?f:nf,f(x,g)&&l.ref===u.ref)return ko(l,u,b)}return u.flags|=1,l=vo(y,g),l.ref=u.ref,l.return=u,u.child=l}function D2(l,u,f,g,b){if(l!==null){var y=l.memoizedProps;if(nf(y,g)&&l.ref===u.ref)if(Bn=!1,u.pendingProps=g=y,W0(l,b))(l.flags&131072)!==0&&(Bn=!0);else return u.lanes=l.lanes,ko(l,u,b)}return V0(l,u,f,g,b)}function M2(l,u,f,g){var b=g.children,y=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(y=y!==null?y.baseLanes|f:f,l!==null){for(g=u.child=l.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~y}else g=0,u.child=null;return B2(l,u,y,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&wg(u,y!==null?y.cachePool:null),y!==null?VT(u,y):h0(),LT(u);else return g=u.lanes=536870912,B2(l,u,y!==null?y.baseLanes|f:f,f,g)}else y!==null?(wg(u,y.cachePool),VT(u,y),Da(),u.memoizedState=null):(l!==null&&wg(u,null),h0(),Da());return mi(l,u,b,f),u.child}function wf(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function B2(l,u,f,g,b){var y=a0();return y=y===null?null:{parent:Dn._currentValue,pool:y},u.memoizedState={baseLanes:f,cachePool:y},l!==null&&wg(u,null),h0(),LT(u),l!==null&&Jc(l,u,g,!0),u.childLanes=b,null}function Mg(l,u){return u=Ng({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function N2(l,u,f){return Ll(u,l.child,null,f),l=Mg(u,u.pendingProps),l.flags|=2,gs(u),u.memoizedState=null,l}function uj(l,u,f){var g=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(ft){if(g.mode==="hidden")return l=Mg(u,g),u.lanes=536870912,wf(null,l);if(g0(u),(l=Gt)?(l=KI(l,zs),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:ka!==null?{id:Nr,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},f=vT(l),f.return=u,u.child=f,fi=u,Gt=null)):l=null,l===null)throw Sa(u);return u.lanes=536870912,null}return Mg(u,g)}var y=l.memoizedState;if(y!==null){var x=y.dehydrated;if(g0(u),b)if(u.flags&256)u.flags&=-257,u=N2(l,u,f);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(i(558));else if(Bn||Jc(l,u,f,!1),b=(f&l.childLanes)!==0,Bn||b){if(g=zt,g!==null&&(x=ES(g,f),x!==0&&x!==y.retryLane))throw y.retryLane=x,Rl(l,x),Xi(g,l,x),N0;$g(),u=N2(l,u,f)}else l=y.treeContext,Gt=Us(x.nextSibling),fi=u,ft=!0,Ea=null,zs=!1,l!==null&&_T(u,l),u=Mg(u,g),u.flags|=4096;return u}return l=vo(l.child,{mode:g.mode,children:g.children}),l.ref=u.ref,u.child=l,l.return=u,l}function Bg(l,u){var f=u.ref;if(f===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(i(284));(l===null||l.ref!==f)&&(u.flags|=4194816)}}function V0(l,u,f,g,b){return Ml(u),f=b0(l,u,f,g,void 0,b),g=w0(),l!==null&&!Bn?(v0(l,u,b),ko(l,u,b)):(ft&&g&&Jy(u),u.flags|=1,mi(l,u,f,b),u.child)}function V2(l,u,f,g,b,y){return Ml(u),u.updateQueue=null,f=zT(u,g,f,b),FT(l),g=w0(),l!==null&&!Bn?(v0(l,u,y),ko(l,u,y)):(ft&&g&&Jy(u),u.flags|=1,mi(l,u,f,y),u.child)}function L2(l,u,f,g,b){if(Ml(u),u.stateNode===null){var y=Kc,x=f.contextType;typeof x=="object"&&x!==null&&(y=hi(x)),y=new f(g,y),u.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=M0,u.stateNode=y,y._reactInternals=u,y=u.stateNode,y.props=g,y.state=u.memoizedState,y.refs={},c0(u),x=f.contextType,y.context=typeof x=="object"&&x!==null?hi(x):Kc,y.state=u.memoizedState,x=f.getDerivedStateFromProps,typeof x=="function"&&(D0(u,f,x,g),y.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(x=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),x!==y.state&&M0.enqueueReplaceState(y,y.state,null),hf(u,g,y,b),ff(),y.state=u.memoizedState),typeof y.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){y=u.stateNode;var T=u.memoizedProps,M=zl(f,T);y.props=M;var Y=y.context,ne=f.contextType;x=Kc,typeof ne=="object"&&ne!==null&&(x=hi(ne));var ae=f.getDerivedStateFromProps;ne=typeof ae=="function"||typeof y.getSnapshotBeforeUpdate=="function",T=u.pendingProps!==T,ne||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T||Y!==x)&&x2(u,y,g,x),Ia=!1;var q=u.memoizedState;y.state=q,hf(u,g,y,b),ff(),Y=u.memoizedState,T||q!==Y||Ia?(typeof ae=="function"&&(D0(u,f,ae,g),Y=u.memoizedState),(M=Ia||C2(u,f,M,g,q,Y,x))?(ne||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(u.flags|=4194308)):(typeof y.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=Y),y.props=g,y.state=Y,y.context=x,g=M):(typeof y.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{y=u.stateNode,u0(l,u),x=u.memoizedProps,ne=zl(f,x),y.props=ne,ae=u.pendingProps,q=y.context,Y=f.contextType,M=Kc,typeof Y=="object"&&Y!==null&&(M=hi(Y)),T=f.getDerivedStateFromProps,(Y=typeof T=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(x!==ae||q!==M)&&x2(u,y,g,M),Ia=!1,q=u.memoizedState,y.state=q,hf(u,g,y,b),ff();var Z=u.memoizedState;x!==ae||q!==Z||Ia||l!==null&&l.dependencies!==null&&pg(l.dependencies)?(typeof T=="function"&&(D0(u,f,T,g),Z=u.memoizedState),(ne=Ia||C2(u,f,ne,g,q,Z,M)||l!==null&&l.dependencies!==null&&pg(l.dependencies))?(Y||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(g,Z,M),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(g,Z,M)),typeof y.componentDidUpdate=="function"&&(u.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof y.componentDidUpdate!="function"||x===l.memoizedProps&&q===l.memoizedState||(u.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===l.memoizedProps&&q===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=Z),y.props=g,y.state=Z,y.context=M,g=ne):(typeof y.componentDidUpdate!="function"||x===l.memoizedProps&&q===l.memoizedState||(u.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||x===l.memoizedProps&&q===l.memoizedState||(u.flags|=1024),g=!1)}return y=g,Bg(l,u),g=(u.flags&128)!==0,y||g?(y=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:y.render(),u.flags|=1,l!==null&&g?(u.child=Ll(u,l.child,null,b),u.child=Ll(u,null,f,b)):mi(l,u,f,b),u.memoizedState=y.state,l=u.child):l=ko(l,u,b),l}function F2(l,u,f,g){return Ol(),u.flags|=256,mi(l,u,f,g),u.child}var L0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function F0(l){return{baseLanes:l,cachePool:TT()}}function z0(l,u,f){return l=l!==null?l.childLanes&~f:0,u&&(l|=bs),l}function z2(l,u,f){var g=u.pendingProps,b=!1,y=(u.flags&128)!==0,x;if((x=y)||(x=l!==null&&l.memoizedState===null?!1:(En.current&2)!==0),x&&(b=!0,u.flags&=-129),x=(u.flags&32)!==0,u.flags&=-33,l===null){if(ft){if(b?Oa(u):Da(),(l=Gt)?(l=KI(l,zs),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:ka!==null?{id:Nr,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},f=vT(l),f.return=u,u.child=f,fi=u,Gt=null)):l=null,l===null)throw Sa(u);return _A(l)?u.lanes=32:u.lanes=536870912,null}var T=g.children;return g=g.fallback,b?(Da(),b=u.mode,T=Ng({mode:"hidden",children:T},b),g=Pl(g,b,f,null),T.return=u,g.return=u,T.sibling=g,u.child=T,g=u.child,g.memoizedState=F0(f),g.childLanes=z0(l,x,f),u.memoizedState=L0,wf(null,g)):(Oa(u),j0(u,T))}var M=l.memoizedState;if(M!==null&&(T=M.dehydrated,T!==null)){if(y)u.flags&256?(Oa(u),u.flags&=-257,u=U0(l,u,f)):u.memoizedState!==null?(Da(),u.child=l.child,u.flags|=128,u=null):(Da(),T=g.fallback,b=u.mode,g=Ng({mode:"visible",children:g.children},b),T=Pl(T,b,f,null),T.flags|=2,g.return=u,T.return=u,g.sibling=T,u.child=g,Ll(u,l.child,null,f),g=u.child,g.memoizedState=F0(f),g.childLanes=z0(l,x,f),u.memoizedState=L0,u=wf(null,g));else if(Oa(u),_A(T)){if(x=T.nextSibling&&T.nextSibling.dataset,x)var Y=x.dgst;x=Y,g=Error(i(419)),g.stack="",g.digest=x,of({value:g,source:null,stack:null}),u=U0(l,u,f)}else if(Bn||Jc(l,u,f,!1),x=(f&l.childLanes)!==0,Bn||x){if(x=zt,x!==null&&(g=ES(x,f),g!==0&&g!==M.retryLane))throw M.retryLane=g,Rl(l,g),Xi(x,l,g),N0;AA(T)||$g(),u=U0(l,u,f)}else AA(T)?(u.flags|=192,u.child=l.child,u=null):(l=M.treeContext,Gt=Us(T.nextSibling),fi=u,ft=!0,Ea=null,zs=!1,l!==null&&_T(u,l),u=j0(u,g.children),u.flags|=4096);return u}return b?(Da(),T=g.fallback,b=u.mode,M=l.child,Y=M.sibling,g=vo(M,{mode:"hidden",children:g.children}),g.subtreeFlags=M.subtreeFlags&65011712,Y!==null?T=vo(Y,T):(T=Pl(T,b,f,null),T.flags|=2),T.return=u,g.return=u,g.sibling=T,u.child=g,wf(null,g),g=u.child,T=l.child.memoizedState,T===null?T=F0(f):(b=T.cachePool,b!==null?(M=Dn._currentValue,b=b.parent!==M?{parent:M,pool:M}:b):b=TT(),T={baseLanes:T.baseLanes|f,cachePool:b}),g.memoizedState=T,g.childLanes=z0(l,x,f),u.memoizedState=L0,wf(l.child,g)):(Oa(u),f=l.child,l=f.sibling,f=vo(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,l!==null&&(x=u.deletions,x===null?(u.deletions=[l],u.flags|=16):x.push(l)),u.child=f,u.memoizedState=null,f)}function j0(l,u){return u=Ng({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Ng(l,u){return l=hs(22,l,null,u),l.lanes=0,l}function U0(l,u,f){return Ll(u,l.child,null,f),l=j0(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function j2(l,u,f){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),i0(l.return,u,f)}function H0(l,u,f,g,b,y){var x=l.memoizedState;x===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b,treeForkCount:y}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=g,x.tail=f,x.tailMode=b,x.treeForkCount=y)}function U2(l,u,f){var g=u.pendingProps,b=g.revealOrder,y=g.tail;g=g.children;var x=En.current,T=(x&2)!==0;if(T?(x=x&1|2,u.flags|=128):x&=1,fe(En,x),mi(l,u,g,f),g=ft?rf:0,!T&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&j2(l,f,u);else if(l.tag===19)j2(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(f=u.child,b=null;f!==null;)l=f.alternate,l!==null&&xg(l)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),H0(u,!1,b,f,y,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&xg(l)===null){u.child=b;break}l=b.sibling,b.sibling=f,f=b,b=l}H0(u,!0,f,null,y,g);break;case"together":H0(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function ko(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),Na|=u.lanes,(f&u.childLanes)===0)if(l!==null){if(Jc(l,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(i(153));if(u.child!==null){for(l=u.child,f=vo(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=vo(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function W0(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&pg(l)))}function dj(l,u,f){switch(u.tag){case 3:Ue(u,u.stateNode.containerInfo),Ta(u,Dn,l.memoizedState.cache),Ol();break;case 27:case 5:qe(u);break;case 4:Ue(u,u.stateNode.containerInfo);break;case 10:Ta(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,g0(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(Oa(u),u.flags|=128,null):(f&u.child.childLanes)!==0?z2(l,u,f):(Oa(u),l=ko(l,u,f),l!==null?l.sibling:null);Oa(u);break;case 19:var b=(l.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(Jc(l,u,f,!1),g=(f&u.childLanes)!==0),b){if(g)return U2(l,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),fe(En,En.current),g)break;return null;case 22:return u.lanes=0,M2(l,u,f,u.pendingProps);case 24:Ta(u,Dn,l.memoizedState.cache)}return ko(l,u,f)}function H2(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps)Bn=!0;else{if(!W0(l,f)&&(u.flags&128)===0)return Bn=!1,dj(l,u,f);Bn=(l.flags&131072)!==0}else Bn=!1,ft&&(u.flags&1048576)!==0&&AT(u,rf,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(l=Nl(u.elementType),u.type=l,typeof l=="function")qy(l)?(g=zl(l,g),u.tag=1,u=L2(null,u,l,g,f)):(u.tag=0,u=V0(null,u,l,g,f));else{if(l!=null){var b=l.$$typeof;if(b===R){u.tag=11,u=P2(null,u,l,g,f);break e}else if(b===P){u.tag=14,u=O2(null,u,l,g,f);break e}}throw u=be(l)||l,Error(i(306,u,""))}}return u;case 0:return V0(l,u,u.type,u.pendingProps,f);case 1:return g=u.type,b=zl(g,u.pendingProps),L2(l,u,g,b,f);case 3:e:{if(Ue(u,u.stateNode.containerInfo),l===null)throw Error(i(387));g=u.pendingProps;var y=u.memoizedState;b=y.element,u0(l,u),hf(u,g,null,f);var x=u.memoizedState;if(g=x.cache,Ta(u,Dn,g),g!==y.cache&&s0(u,[Dn],f,!0),ff(),g=x.element,y.isDehydrated)if(y={element:g,isDehydrated:!1,cache:x.cache},u.updateQueue.baseState=y,u.memoizedState=y,u.flags&256){u=F2(l,u,g,f);break e}else if(g!==b){b=Vs(Error(i(424)),u),of(b),u=F2(l,u,g,f);break e}else for(l=u.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,Gt=Us(l.firstChild),fi=u,ft=!0,Ea=null,zs=!0,f=MT(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Ol(),g===b){u=ko(l,u,f);break e}mi(l,u,g,f)}u=u.child}return u;case 26:return Bg(l,u),l===null?(f=eR(u.type,null,u.pendingProps,null))?u.memoizedState=f:ft||(f=u.type,l=u.pendingProps,g=Jg(Ie.current).createElement(f),g[di]=u,g[Yi]=l,gi(g,f,l),ti(g),u.stateNode=g):u.memoizedState=eR(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return qe(u),l===null&&ft&&(g=u.stateNode=ZI(u.type,u.pendingProps,Ie.current),fi=u,zs=!0,b=Gt,ja(u.type)?(CA=b,Gt=Us(g.firstChild)):Gt=b),mi(l,u,u.pendingProps.children,f),Bg(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&ft&&((b=g=Gt)&&(g=jj(g,u.type,u.pendingProps,zs),g!==null?(u.stateNode=g,fi=u,Gt=Us(g.firstChild),zs=!1,b=!0):b=!1),b||Sa(u)),qe(u),b=u.type,y=u.pendingProps,x=l!==null?l.memoizedProps:null,g=y.children,wA(b,y)?g=null:x!==null&&wA(b,x)&&(u.flags|=32),u.memoizedState!==null&&(b=b0(l,u,nj,null,null,f),Df._currentValue=b),Bg(l,u),mi(l,u,g,f),u.child;case 6:return l===null&&ft&&((l=f=Gt)&&(f=Uj(f,u.pendingProps,zs),f!==null?(u.stateNode=f,fi=u,Gt=null,l=!0):l=!1),l||Sa(u)),null;case 13:return z2(l,u,f);case 4:return Ue(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=Ll(u,null,g,f):mi(l,u,g,f),u.child;case 11:return P2(l,u,u.type,u.pendingProps,f);case 7:return mi(l,u,u.pendingProps,f),u.child;case 8:return mi(l,u,u.pendingProps.children,f),u.child;case 12:return mi(l,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,Ta(u,u.type,g.value),mi(l,u,g.children,f),u.child;case 9:return b=u.type._context,g=u.pendingProps.children,Ml(u),b=hi(b),g=g(b),u.flags|=1,mi(l,u,g,f),u.child;case 14:return O2(l,u,u.type,u.pendingProps,f);case 15:return D2(l,u,u.type,u.pendingProps,f);case 19:return U2(l,u,f);case 31:return uj(l,u,f);case 22:return M2(l,u,f,u.pendingProps);case 24:return Ml(u),g=hi(Dn),l===null?(b=a0(),b===null&&(b=zt,y=r0(),b.pooledCache=y,y.refCount++,y!==null&&(b.pooledCacheLanes|=f),b=y),u.memoizedState={parent:g,cache:b},c0(u),Ta(u,Dn,b)):((l.lanes&f)!==0&&(u0(l,u),hf(u,null,null,f),ff()),b=l.memoizedState,y=u.memoizedState,b.parent!==g?(b={parent:g,cache:g},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),Ta(u,Dn,g)):(g=y.cache,Ta(u,Dn,g),g!==b.cache&&s0(u,[Dn],f,!0))),mi(l,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(i(156,u.tag))}function Eo(l){l.flags|=4}function $0(l,u,f,g,b){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(pI())l.flags|=8192;else throw Vl=yg,l0}else l.flags&=-16777217}function W2(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!rR(u))if(pI())l.flags|=8192;else throw Vl=yg,l0}function Vg(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?CS():536870912,l.lanes|=u,uu|=u)}function vf(l,u){if(!ft)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Yt(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,g=0;if(u)for(var b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=g,l.childLanes=f,u}function fj(l,u,f){var g=u.pendingProps;switch(Xy(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(u),null;case 1:return Yt(u),null;case 3:return f=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),_o(Dn),$e(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(Zc(u)?Eo(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,t0())),Yt(u),null;case 26:var b=u.type,y=u.memoizedState;return l===null?(Eo(u),y!==null?(Yt(u),W2(u,y)):(Yt(u),$0(u,b,null,g,f))):y?y!==l.memoizedState?(Eo(u),Yt(u),W2(u,y)):(Yt(u),u.flags&=-16777217):(l=l.memoizedProps,l!==g&&Eo(u),Yt(u),$0(u,b,l,g,f)),null;case 27:if(Ze(u),f=Ie.current,b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Eo(u);else{if(!g){if(u.stateNode===null)throw Error(i(166));return Yt(u),null}l=he.current,Zc(u)?CT(u):(l=ZI(b,g,f),u.stateNode=l,Eo(u))}return Yt(u),null;case 5:if(Ze(u),b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&Eo(u);else{if(!g){if(u.stateNode===null)throw Error(i(166));return Yt(u),null}if(y=he.current,Zc(u))CT(u);else{var x=Jg(Ie.current);switch(y){case 1:y=x.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:y=x.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":y=x.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":y=x.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":y=x.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof g.is=="string"?x.createElement("select",{is:g.is}):x.createElement("select"),g.multiple?y.multiple=!0:g.size&&(y.size=g.size);break;default:y=typeof g.is=="string"?x.createElement(b,{is:g.is}):x.createElement(b)}}y[di]=u,y[Yi]=g;e:for(x=u.child;x!==null;){if(x.tag===5||x.tag===6)y.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===u)break e;for(;x.sibling===null;){if(x.return===null||x.return===u)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}u.stateNode=y;e:switch(gi(y,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Eo(u)}}return Yt(u),$0(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,f),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&Eo(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(i(166));if(l=Ie.current,Zc(u)){if(l=u.stateNode,f=u.memoizedProps,g=null,b=fi,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}l[di]=u,l=!!(l.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||zI(l.nodeValue,f)),l||Sa(u,!0)}else l=Jg(l).createTextNode(g),l[di]=u,u.stateNode=l}return Yt(u),null;case 31:if(f=u.memoizedState,l===null||l.memoizedState!==null){if(g=Zc(u),f!==null){if(l===null){if(!g)throw Error(i(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(557));l[di]=u}else Ol(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Yt(u),l=!1}else f=t0(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return u.flags&256?(gs(u),u):(gs(u),null);if((u.flags&128)!==0)throw Error(i(558))}return Yt(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=Zc(u),g!==null&&g.dehydrated!==null){if(l===null){if(!b)throw Error(i(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));b[di]=u}else Ol(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Yt(u),b=!1}else b=t0(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(gs(u),u):(gs(u),null)}return gs(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,l=l!==null&&l.memoizedState!==null,f&&(g=u.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),y=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(y=g.memoizedState.cachePool.pool),y!==b&&(g.flags|=2048)),f!==l&&f&&(u.child.flags|=8192),Vg(u,u.updateQueue),Yt(u),null);case 4:return $e(),l===null&&hA(u.stateNode.containerInfo),Yt(u),null;case 10:return _o(u.type),Yt(u),null;case 19:if(J(En),g=u.memoizedState,g===null)return Yt(u),null;if(b=(u.flags&128)!==0,y=g.rendering,y===null)if(b)vf(g,!1);else{if(An!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(y=xg(l),y!==null){for(u.flags|=128,vf(g,!1),l=y.updateQueue,u.updateQueue=l,Vg(u,l),u.subtreeFlags=0,l=f,f=u.child;f!==null;)wT(f,l),f=f.sibling;return fe(En,En.current&1|2),ft&&yo(u,g.treeForkCount),u.child}l=l.sibling}g.tail!==null&&K()>Ug&&(u.flags|=128,b=!0,vf(g,!1),u.lanes=4194304)}else{if(!b)if(l=xg(y),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,Vg(u,l),vf(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!ft)return Yt(u),null}else 2*K()-g.renderingStartTime>Ug&&f!==536870912&&(u.flags|=128,b=!0,vf(g,!1),u.lanes=4194304);g.isBackwards?(y.sibling=u.child,u.child=y):(l=g.last,l!==null?l.sibling=y:u.child=y,g.last=y)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=K(),l.sibling=null,f=En.current,fe(En,b?f&1|2:f&1),ft&&yo(u,g.treeForkCount),l):(Yt(u),null);case 22:case 23:return gs(u),m0(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(Yt(u),u.subtreeFlags&6&&(u.flags|=8192)):Yt(u),f=u.updateQueue,f!==null&&Vg(u,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),l!==null&&J(Bl),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),_o(Dn),Yt(u),null;case 25:return null;case 30:return null}throw Error(i(156,u.tag))}function hj(l,u){switch(Xy(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return _o(Dn),$e(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Ze(u),null;case 31:if(u.memoizedState!==null){if(gs(u),u.alternate===null)throw Error(i(340));Ol()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(gs(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(i(340));Ol()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return J(En),null;case 4:return $e(),null;case 10:return _o(u.type),null;case 22:case 23:return gs(u),m0(),l!==null&&J(Bl),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return _o(Dn),null;case 25:return null;default:return null}}function $2(l,u){switch(Xy(u),u.tag){case 3:_o(Dn),$e();break;case 26:case 27:case 5:Ze(u);break;case 4:$e();break;case 31:u.memoizedState!==null&&gs(u);break;case 13:gs(u);break;case 19:J(En);break;case 10:_o(u.type);break;case 22:case 23:gs(u),m0(),l!==null&&J(Bl);break;case 24:_o(Dn)}}function yf(l,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&l)===l){g=void 0;var y=f.create,x=f.inst;g=y(),x.destroy=g}f=f.next}while(f!==b)}}catch(T){It(u,u.return,T)}}function Ma(l,u,f){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var y=b.next;g=y;do{if((g.tag&l)===l){var x=g.inst,T=x.destroy;if(T!==void 0){x.destroy=void 0,b=u;var M=f,Y=T;try{Y()}catch(ne){It(b,M,ne)}}}g=g.next}while(g!==y)}}catch(ne){It(u,u.return,ne)}}function G2(l){var u=l.updateQueue;if(u!==null){var f=l.stateNode;try{NT(u,f)}catch(g){It(l,l.return,g)}}}function Y2(l,u,f){f.props=zl(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(g){It(l,u,g)}}function Af(l,u){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof f=="function"?l.refCleanup=f(g):f.current=g}}catch(b){It(l,u,b)}}function Lr(l,u){var f=l.ref,g=l.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(b){It(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){It(l,u,b)}else f.current=null}function K2(l){var u=l.type,f=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(b){It(l,l.return,b)}}function G0(l,u,f){try{var g=l.stateNode;Bj(g,l.type,f,u),g[Yi]=u}catch(b){It(l,l.return,b)}}function q2(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&ja(l.type)||l.tag===4}function Y0(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||q2(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&ja(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function K0(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(l),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=bo));else if(g!==4&&(g===27&&ja(l.type)&&(f=l.stateNode,u=null),l=l.child,l!==null))for(K0(l,u,f),l=l.sibling;l!==null;)K0(l,u,f),l=l.sibling}function Lg(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(g!==4&&(g===27&&ja(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(Lg(l,u,f),l=l.sibling;l!==null;)Lg(l,u,f),l=l.sibling}function Q2(l){var u=l.stateNode,f=l.memoizedProps;try{for(var g=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);gi(u,g,f),u[di]=l,u[Yi]=f}catch(y){It(l,l.return,y)}}var So=!1,Nn=!1,q0=!1,Z2=typeof WeakSet=="function"?WeakSet:Set,ni=null;function mj(l,u){if(l=l.containerInfo,pA=rp,l=cT(l),Uy(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,y=g.focusNode;g=g.focusOffset;try{f.nodeType,y.nodeType}catch{f=null;break e}var x=0,T=-1,M=-1,Y=0,ne=0,ae=l,q=null;t:for(;;){for(var Z;ae!==f||b!==0&&ae.nodeType!==3||(T=x+b),ae!==y||g!==0&&ae.nodeType!==3||(M=x+g),ae.nodeType===3&&(x+=ae.nodeValue.length),(Z=ae.firstChild)!==null;)q=ae,ae=Z;for(;;){if(ae===l)break t;if(q===f&&++Y===b&&(T=x),q===y&&++ne===g&&(M=x),(Z=ae.nextSibling)!==null)break;ae=q,q=ae.parentNode}ae=Z}f=T===-1||M===-1?null:{start:T,end:M}}else f=null}f=f||{start:0,end:0}}else f=null;for(bA={focusedElem:l,selectionRange:f},rp=!1,ni=u;ni!==null;)if(u=ni,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,ni=l;else for(;ni!==null;){switch(u=ni,y=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)b=l[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&y!==null){l=void 0,f=u,b=y.memoizedProps,y=y.memoizedState,g=f.stateNode;try{var Re=zl(f.type,b);l=g.getSnapshotBeforeUpdate(Re,y),g.__reactInternalSnapshotBeforeUpdate=l}catch(He){It(f,f.return,He)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,f=l.nodeType,f===9)yA(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":yA(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(i(163))}if(l=u.sibling,l!==null){l.return=u.return,ni=l;break}ni=u.return}}function J2(l,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Io(l,f),g&4&&yf(5,f);break;case 1:if(Io(l,f),g&4)if(l=f.stateNode,u===null)try{l.componentDidMount()}catch(x){It(f,f.return,x)}else{var b=zl(f.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(x){It(f,f.return,x)}}g&64&&G2(f),g&512&&Af(f,f.return);break;case 3:if(Io(l,f),g&64&&(l=f.updateQueue,l!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{NT(l,u)}catch(x){It(f,f.return,x)}}break;case 27:u===null&&g&4&&Q2(f);case 26:case 5:Io(l,f),u===null&&g&4&&K2(f),g&512&&Af(f,f.return);break;case 12:Io(l,f);break;case 31:Io(l,f),g&4&&tI(l,f);break;case 13:Io(l,f),g&4&&nI(l,f),g&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=Cj.bind(null,f),Hj(l,f))));break;case 22:if(g=f.memoizedState!==null||So,!g){u=u!==null&&u.memoizedState!==null||Nn,b=So;var y=Nn;So=g,(Nn=u)&&!y?Ro(l,f,(f.subtreeFlags&8772)!==0):Io(l,f),So=b,Nn=y}break;case 30:break;default:Io(l,f)}}function X2(l){var u=l.alternate;u!==null&&(l.alternate=null,X2(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&ky(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Zt=null,qi=!1;function To(l,u,f){for(f=f.child;f!==null;)eI(l,u,f),f=f.sibling}function eI(l,u,f){if(vn&&typeof vn.onCommitFiberUnmount=="function")try{vn.onCommitFiberUnmount(or,f)}catch{}switch(f.tag){case 26:Nn||Lr(f,u),To(l,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Nn||Lr(f,u);var g=Zt,b=qi;ja(f.type)&&(Zt=f.stateNode,qi=!1),To(l,u,f),Rf(f.stateNode),Zt=g,qi=b;break;case 5:Nn||Lr(f,u);case 6:if(g=Zt,b=qi,Zt=null,To(l,u,f),Zt=g,qi=b,Zt!==null)if(qi)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(f.stateNode)}catch(y){It(f,u,y)}else try{Zt.removeChild(f.stateNode)}catch(y){It(f,u,y)}break;case 18:Zt!==null&&(qi?(l=Zt,GI(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),wu(l)):GI(Zt,f.stateNode));break;case 4:g=Zt,b=qi,Zt=f.stateNode.containerInfo,qi=!0,To(l,u,f),Zt=g,qi=b;break;case 0:case 11:case 14:case 15:Ma(2,f,u),Nn||Ma(4,f,u),To(l,u,f);break;case 1:Nn||(Lr(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&Y2(f,u,g)),To(l,u,f);break;case 21:To(l,u,f);break;case 22:Nn=(g=Nn)||f.memoizedState!==null,To(l,u,f),Nn=g;break;default:To(l,u,f)}}function tI(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{wu(l)}catch(f){It(u,u.return,f)}}}function nI(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{wu(l)}catch(f){It(u,u.return,f)}}function gj(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new Z2),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new Z2),u;default:throw Error(i(435,l.tag))}}function Fg(l,u){var f=gj(l);u.forEach(function(g){if(!f.has(g)){f.add(g);var b=xj.bind(null,l,g);g.then(b,b)}})}function Qi(l,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g],y=l,x=u,T=x;e:for(;T!==null;){switch(T.tag){case 27:if(ja(T.type)){Zt=T.stateNode,qi=!1;break e}break;case 5:Zt=T.stateNode,qi=!1;break e;case 3:case 4:Zt=T.stateNode.containerInfo,qi=!0;break e}T=T.return}if(Zt===null)throw Error(i(160));eI(y,x,b),Zt=null,qi=!1,y=b.alternate,y!==null&&(y.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)iI(u,l),u=u.sibling}var lr=null;function iI(l,u){var f=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Qi(u,l),Zi(l),g&4&&(Ma(3,l,l.return),yf(3,l),Ma(5,l,l.return));break;case 1:Qi(u,l),Zi(l),g&512&&(Nn||f===null||Lr(f,f.return)),g&64&&So&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var b=lr;if(Qi(u,l),Zi(l),g&512&&(Nn||f===null||Lr(f,f.return)),g&4){var y=f!==null?f.memoizedState:null;if(g=l.memoizedState,f===null)if(g===null)if(l.stateNode===null){e:{g=l.type,f=l.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":y=b.getElementsByTagName("title")[0],(!y||y[Yd]||y[di]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=b.createElement(g),b.head.insertBefore(y,b.querySelector("head > title"))),gi(y,g,f),y[di]=l,ti(y),g=y;break e;case"link":var x=iR("link","href",b).get(g+(f.href||""));if(x){for(var T=0;T<x.length;T++)if(y=x[T],y.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&y.getAttribute("rel")===(f.rel==null?null:f.rel)&&y.getAttribute("title")===(f.title==null?null:f.title)&&y.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){x.splice(T,1);break t}}y=b.createElement(g),gi(y,g,f),b.head.appendChild(y);break;case"meta":if(x=iR("meta","content",b).get(g+(f.content||""))){for(T=0;T<x.length;T++)if(y=x[T],y.getAttribute("content")===(f.content==null?null:""+f.content)&&y.getAttribute("name")===(f.name==null?null:f.name)&&y.getAttribute("property")===(f.property==null?null:f.property)&&y.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&y.getAttribute("charset")===(f.charSet==null?null:f.charSet)){x.splice(T,1);break t}}y=b.createElement(g),gi(y,g,f),b.head.appendChild(y);break;default:throw Error(i(468,g))}y[di]=l,ti(y),g=y}l.stateNode=g}else sR(b,l.type,l.stateNode);else l.stateNode=nR(b,g,l.memoizedProps);else y!==g?(y===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):y.count--,g===null?sR(b,l.type,l.stateNode):nR(b,g,l.memoizedProps)):g===null&&l.stateNode!==null&&G0(l,l.memoizedProps,f.memoizedProps)}break;case 27:Qi(u,l),Zi(l),g&512&&(Nn||f===null||Lr(f,f.return)),f!==null&&g&4&&G0(l,l.memoizedProps,f.memoizedProps);break;case 5:if(Qi(u,l),Zi(l),g&512&&(Nn||f===null||Lr(f,f.return)),l.flags&32){b=l.stateNode;try{jc(b,"")}catch(Re){It(l,l.return,Re)}}g&4&&l.stateNode!=null&&(b=l.memoizedProps,G0(l,b,f!==null?f.memoizedProps:b)),g&1024&&(q0=!0);break;case 6:if(Qi(u,l),Zi(l),g&4){if(l.stateNode===null)throw Error(i(162));g=l.memoizedProps,f=l.stateNode;try{f.nodeValue=g}catch(Re){It(l,l.return,Re)}}break;case 3:if(tp=null,b=lr,lr=Xg(u.containerInfo),Qi(u,l),lr=b,Zi(l),g&4&&f!==null&&f.memoizedState.isDehydrated)try{wu(u.containerInfo)}catch(Re){It(l,l.return,Re)}q0&&(q0=!1,sI(l));break;case 4:g=lr,lr=Xg(l.stateNode.containerInfo),Qi(u,l),Zi(l),lr=g;break;case 12:Qi(u,l),Zi(l);break;case 31:Qi(u,l),Zi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Fg(l,g)));break;case 13:Qi(u,l),Zi(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(jg=K()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Fg(l,g)));break;case 22:b=l.memoizedState!==null;var M=f!==null&&f.memoizedState!==null,Y=So,ne=Nn;if(So=Y||b,Nn=ne||M,Qi(u,l),Nn=ne,So=Y,Zi(l),g&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(f===null||M||So||Nn||jl(l)),f=null,u=l;;){if(u.tag===5||u.tag===26){if(f===null){M=f=u;try{if(y=M.stateNode,b)x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{T=M.stateNode;var ae=M.memoizedProps.style,q=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;T.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(Re){It(M,M.return,Re)}}}else if(u.tag===6){if(f===null){M=u;try{M.stateNode.nodeValue=b?"":M.memoizedProps}catch(Re){It(M,M.return,Re)}}}else if(u.tag===18){if(f===null){M=u;try{var Z=M.stateNode;b?YI(Z,!0):YI(M.stateNode,!1)}catch(Re){It(M,M.return,Re)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Fg(l,f))));break;case 19:Qi(u,l),Zi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Fg(l,g)));break;case 30:break;case 21:break;default:Qi(u,l),Zi(l)}}function Zi(l){var u=l.flags;if(u&2){try{for(var f,g=l.return;g!==null;){if(q2(g)){f=g;break}g=g.return}if(f==null)throw Error(i(160));switch(f.tag){case 27:var b=f.stateNode,y=Y0(l);Lg(l,y,b);break;case 5:var x=f.stateNode;f.flags&32&&(jc(x,""),f.flags&=-33);var T=Y0(l);Lg(l,T,x);break;case 3:case 4:var M=f.stateNode.containerInfo,Y=Y0(l);K0(l,Y,M);break;default:throw Error(i(161))}}catch(ne){It(l,l.return,ne)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function sI(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;sI(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Io(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)J2(l,u.alternate,u),u=u.sibling}function jl(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Ma(4,u,u.return),jl(u);break;case 1:Lr(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&Y2(u,u.return,f),jl(u);break;case 27:Rf(u.stateNode);case 26:case 5:Lr(u,u.return),jl(u);break;case 22:u.memoizedState===null&&jl(u);break;case 30:jl(u);break;default:jl(u)}l=l.sibling}}function Ro(l,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,b=l,y=u,x=y.flags;switch(y.tag){case 0:case 11:case 15:Ro(b,y,f),yf(4,y);break;case 1:if(Ro(b,y,f),g=y,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(Y){It(g,g.return,Y)}if(g=y,b=g.updateQueue,b!==null){var T=g.stateNode;try{var M=b.shared.hiddenCallbacks;if(M!==null)for(b.shared.hiddenCallbacks=null,b=0;b<M.length;b++)BT(M[b],T)}catch(Y){It(g,g.return,Y)}}f&&x&64&&G2(y),Af(y,y.return);break;case 27:Q2(y);case 26:case 5:Ro(b,y,f),f&&g===null&&x&4&&K2(y),Af(y,y.return);break;case 12:Ro(b,y,f);break;case 31:Ro(b,y,f),f&&x&4&&tI(b,y);break;case 13:Ro(b,y,f),f&&x&4&&nI(b,y);break;case 22:y.memoizedState===null&&Ro(b,y,f),Af(y,y.return);break;case 30:break;default:Ro(b,y,f)}u=u.sibling}}function Q0(l,u){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&af(f))}function Z0(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&af(l))}function cr(l,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)rI(l,u,f,g),u=u.sibling}function rI(l,u,f,g){var b=u.flags;switch(u.tag){case 0:case 11:case 15:cr(l,u,f,g),b&2048&&yf(9,u);break;case 1:cr(l,u,f,g);break;case 3:cr(l,u,f,g),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&af(l)));break;case 12:if(b&2048){cr(l,u,f,g),l=u.stateNode;try{var y=u.memoizedProps,x=y.id,T=y.onPostCommit;typeof T=="function"&&T(x,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(M){It(u,u.return,M)}}else cr(l,u,f,g);break;case 31:cr(l,u,f,g);break;case 13:cr(l,u,f,g);break;case 23:break;case 22:y=u.stateNode,x=u.alternate,u.memoizedState!==null?y._visibility&2?cr(l,u,f,g):_f(l,u):y._visibility&2?cr(l,u,f,g):(y._visibility|=2,au(l,u,f,g,(u.subtreeFlags&10256)!==0||!1)),b&2048&&Q0(x,u);break;case 24:cr(l,u,f,g),b&2048&&Z0(u.alternate,u);break;default:cr(l,u,f,g)}}function au(l,u,f,g,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var y=l,x=u,T=f,M=g,Y=x.flags;switch(x.tag){case 0:case 11:case 15:au(y,x,T,M,b),yf(8,x);break;case 23:break;case 22:var ne=x.stateNode;x.memoizedState!==null?ne._visibility&2?au(y,x,T,M,b):_f(y,x):(ne._visibility|=2,au(y,x,T,M,b)),b&&Y&2048&&Q0(x.alternate,x);break;case 24:au(y,x,T,M,b),b&&Y&2048&&Z0(x.alternate,x);break;default:au(y,x,T,M,b)}u=u.sibling}}function _f(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=l,g=u,b=g.flags;switch(g.tag){case 22:_f(f,g),b&2048&&Q0(g.alternate,g);break;case 24:_f(f,g),b&2048&&Z0(g.alternate,g);break;default:_f(f,g)}u=u.sibling}}var Cf=8192;function lu(l,u,f){if(l.subtreeFlags&Cf)for(l=l.child;l!==null;)oI(l,u,f),l=l.sibling}function oI(l,u,f){switch(l.tag){case 26:lu(l,u,f),l.flags&Cf&&l.memoizedState!==null&&tU(f,lr,l.memoizedState,l.memoizedProps);break;case 5:lu(l,u,f);break;case 3:case 4:var g=lr;lr=Xg(l.stateNode.containerInfo),lu(l,u,f),lr=g;break;case 22:l.memoizedState===null&&(g=l.alternate,g!==null&&g.memoizedState!==null?(g=Cf,Cf=16777216,lu(l,u,f),Cf=g):lu(l,u,f));break;default:lu(l,u,f)}}function aI(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function xf(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];ni=g,cI(g,l)}aI(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)lI(l),l=l.sibling}function lI(l){switch(l.tag){case 0:case 11:case 15:xf(l),l.flags&2048&&Ma(9,l,l.return);break;case 3:xf(l);break;case 12:xf(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,zg(l)):xf(l);break;default:xf(l)}}function zg(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];ni=g,cI(g,l)}aI(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Ma(8,u,u.return),zg(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,zg(u));break;default:zg(u)}l=l.sibling}}function cI(l,u){for(;ni!==null;){var f=ni;switch(f.tag){case 0:case 11:case 15:Ma(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:af(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,ni=g;else e:for(f=l;ni!==null;){g=ni;var b=g.sibling,y=g.return;if(X2(g),g===f){ni=null;break e}if(b!==null){b.return=y,ni=b;break e}ni=y}}}var pj={getCacheForType:function(l){var u=hi(Dn),f=u.data.get(l);return f===void 0&&(f=l(),u.data.set(l,f)),f},cacheSignal:function(){return hi(Dn).controller.signal}},bj=typeof WeakMap=="function"?WeakMap:Map,xt=0,zt=null,rt=null,ct=0,Tt=0,ps=null,Ba=!1,cu=!1,J0=!1,Po=0,An=0,Na=0,Ul=0,X0=0,bs=0,uu=0,kf=null,Ji=null,eA=!1,jg=0,uI=0,Ug=1/0,Hg=null,Va=null,Gn=0,La=null,du=null,Oo=0,tA=0,nA=null,dI=null,Ef=0,iA=null;function ws(){return(xt&2)!==0&&ct!==0?ct&-ct:F.T!==null?cA():SS()}function fI(){if(bs===0)if((ct&536870912)===0||ft){var l=Zm;Zm<<=1,(Zm&3932160)===0&&(Zm=262144),bs=l}else bs=536870912;return l=ms.current,l!==null&&(l.flags|=32),bs}function Xi(l,u,f){(l===zt&&(Tt===2||Tt===9)||l.cancelPendingCommit!==null)&&(fu(l,0),Fa(l,ct,bs,!1)),Gd(l,f),((xt&2)===0||l!==zt)&&(l===zt&&((xt&2)===0&&(Ul|=f),An===4&&Fa(l,ct,bs,!1)),Fr(l))}function hI(l,u,f){if((xt&6)!==0)throw Error(i(327));var g=!f&&(u&127)===0&&(u&l.expiredLanes)===0||$d(l,u),b=g?yj(l,u):rA(l,u,!0),y=g;do{if(b===0){cu&&!g&&Fa(l,u,0,!1);break}else{if(f=l.current.alternate,y&&!wj(f)){b=rA(l,u,!1),y=!1;continue}if(b===2){if(y=u,l.errorRecoveryDisabledLanes&y)var x=0;else x=l.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){u=x;e:{var T=l;b=kf;var M=T.current.memoizedState.isDehydrated;if(M&&(fu(T,x).flags|=256),x=rA(T,x,!1),x!==2){if(J0&&!M){T.errorRecoveryDisabledLanes|=y,Ul|=y,b=4;break e}y=Ji,Ji=b,y!==null&&(Ji===null?Ji=y:Ji.push.apply(Ji,y))}b=x}if(y=!1,b!==2)continue}}if(b===1){fu(l,0),Fa(l,u,0,!0);break}e:{switch(g=l,y=b,y){case 0:case 1:throw Error(i(345));case 4:if((u&4194048)!==u)break;case 6:Fa(g,u,bs,!Ba);break e;case 2:Ji=null;break;case 3:case 5:break;default:throw Error(i(329))}if((u&62914560)===u&&(b=jg+300-K(),10<b)){if(Fa(g,u,bs,!Ba),Xm(g,0,!0)!==0)break e;Oo=u,g.timeoutHandle=WI(mI.bind(null,g,f,Ji,Hg,eA,u,bs,Ul,uu,Ba,y,"Throttled",-0,0),b);break e}mI(g,f,Ji,Hg,eA,u,bs,Ul,uu,Ba,y,null,-0,0)}}break}while(!0);Fr(l)}function mI(l,u,f,g,b,y,x,T,M,Y,ne,ae,q,Z){if(l.timeoutHandle=-1,ae=u.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bo},oI(u,y,ae);var Re=(y&62914560)===y?jg-K():(y&4194048)===y?uI-K():0;if(Re=nU(ae,Re),Re!==null){Oo=y,l.cancelPendingCommit=Re(_I.bind(null,l,u,y,f,g,b,x,T,M,ne,ae,null,q,Z)),Fa(l,y,x,!Y);return}}_I(l,u,y,f,g,b,x,T,M)}function wj(l){for(var u=l;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var b=f[g],y=b.getSnapshot;b=b.value;try{if(!fs(y(),b))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Fa(l,u,f,g){u&=~X0,u&=~Ul,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var b=u;0<b;){var y=31-$n(b),x=1<<y;g[y]=-1,b&=~x}f!==0&&xS(l,f,u)}function Wg(){return(xt&6)===0?(Sf(0),!1):!0}function sA(){if(rt!==null){if(Tt===0)var l=rt.return;else l=rt,Ao=Dl=null,y0(l),nu=null,cf=0,l=rt;for(;l!==null;)$2(l.alternate,l),l=l.return;rt=null}}function fu(l,u){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,Lj(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Oo=0,sA(),zt=l,rt=f=vo(l.current,null),ct=u,Tt=0,ps=null,Ba=!1,cu=$d(l,u),J0=!1,uu=bs=X0=Ul=Na=An=0,Ji=kf=null,eA=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var b=31-$n(g),y=1<<b;u|=l[b],g&=~y}return Po=u,dg(),f}function gI(l,u){Je=null,F.H=bf,u===tu||u===vg?(u=PT(),Tt=3):u===l0?(u=PT(),Tt=4):Tt=u===N0?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ps=u,rt===null&&(An=1,Dg(l,Vs(u,l.current)))}function pI(){var l=ms.current;return l===null?!0:(ct&4194048)===ct?js===null:(ct&62914560)===ct||(ct&536870912)!==0?l===js:!1}function bI(){var l=F.H;return F.H=bf,l===null?bf:l}function wI(){var l=F.A;return F.A=pj,l}function $g(){An=4,Ba||(ct&4194048)!==ct&&ms.current!==null||(cu=!0),(Na&134217727)===0&&(Ul&134217727)===0||zt===null||Fa(zt,ct,bs,!1)}function rA(l,u,f){var g=xt;xt|=2;var b=bI(),y=wI();(zt!==l||ct!==u)&&(Hg=null,fu(l,u)),u=!1;var x=An;e:do try{if(Tt!==0&&rt!==null){var T=rt,M=ps;switch(Tt){case 8:sA(),x=6;break e;case 3:case 2:case 9:case 6:ms.current===null&&(u=!0);var Y=Tt;if(Tt=0,ps=null,hu(l,T,M,Y),f&&cu){x=0;break e}break;default:Y=Tt,Tt=0,ps=null,hu(l,T,M,Y)}}vj(),x=An;break}catch(ne){gI(l,ne)}while(!0);return u&&l.shellSuspendCounter++,Ao=Dl=null,xt=g,F.H=b,F.A=y,rt===null&&(zt=null,ct=0,dg()),x}function vj(){for(;rt!==null;)vI(rt)}function yj(l,u){var f=xt;xt|=2;var g=bI(),b=wI();zt!==l||ct!==u?(Hg=null,Ug=K()+500,fu(l,u)):cu=$d(l,u);e:do try{if(Tt!==0&&rt!==null){u=rt;var y=ps;t:switch(Tt){case 1:Tt=0,ps=null,hu(l,u,y,1);break;case 2:case 9:if(IT(y)){Tt=0,ps=null,yI(u);break}u=function(){Tt!==2&&Tt!==9||zt!==l||(Tt=7),Fr(l)},y.then(u,u);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:IT(y)?(Tt=0,ps=null,yI(u)):(Tt=0,ps=null,hu(l,u,y,7));break;case 5:var x=null;switch(rt.tag){case 26:x=rt.memoizedState;case 5:case 27:var T=rt;if(x?rR(x):T.stateNode.complete){Tt=0,ps=null;var M=T.sibling;if(M!==null)rt=M;else{var Y=T.return;Y!==null?(rt=Y,Gg(Y)):rt=null}break t}}Tt=0,ps=null,hu(l,u,y,5);break;case 6:Tt=0,ps=null,hu(l,u,y,6);break;case 8:sA(),An=6;break e;default:throw Error(i(462))}}Aj();break}catch(ne){gI(l,ne)}while(!0);return Ao=Dl=null,F.H=g,F.A=b,xt=f,rt!==null?0:(zt=null,ct=0,dg(),An)}function Aj(){for(;rt!==null&&!G();)vI(rt)}function vI(l){var u=H2(l.alternate,l,Po);l.memoizedProps=l.pendingProps,u===null?Gg(l):rt=u}function yI(l){var u=l,f=u.alternate;switch(u.tag){case 15:case 0:u=V2(f,u,u.pendingProps,u.type,void 0,ct);break;case 11:u=V2(f,u,u.pendingProps,u.type.render,u.ref,ct);break;case 5:y0(u);default:$2(f,u),u=rt=wT(u,Po),u=H2(f,u,Po)}l.memoizedProps=l.pendingProps,u===null?Gg(l):rt=u}function hu(l,u,f,g){Ao=Dl=null,y0(u),nu=null,cf=0;var b=u.return;try{if(cj(l,b,u,f,ct)){An=1,Dg(l,Vs(f,l.current)),rt=null;return}}catch(y){if(b!==null)throw rt=b,y;An=1,Dg(l,Vs(f,l.current)),rt=null;return}u.flags&32768?(ft||g===1?l=!0:cu||(ct&536870912)!==0?l=!1:(Ba=l=!0,(g===2||g===9||g===3||g===6)&&(g=ms.current,g!==null&&g.tag===13&&(g.flags|=16384))),AI(u,l)):Gg(u)}function Gg(l){var u=l;do{if((u.flags&32768)!==0){AI(u,Ba);return}l=u.return;var f=fj(u.alternate,u,Po);if(f!==null){rt=f;return}if(u=u.sibling,u!==null){rt=u;return}rt=u=l}while(u!==null);An===0&&(An=5)}function AI(l,u){do{var f=hj(l.alternate,l);if(f!==null){f.flags&=32767,rt=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(l=l.sibling,l!==null)){rt=l;return}rt=l=f}while(l!==null);An=6,rt=null}function _I(l,u,f,g,b,y,x,T,M){l.cancelPendingCommit=null;do Yg();while(Gn!==0);if((xt&6)!==0)throw Error(i(327));if(u!==null){if(u===l.current)throw Error(i(177));if(y=u.lanes|u.childLanes,y|=Yy,e9(l,f,y,x,T,M),l===zt&&(rt=zt=null,ct=0),du=u,La=l,Oo=f,tA=y,nA=b,dI=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,kj(Ge,function(){return SI(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=F.T,F.T=null,b=X.p,X.p=2,x=xt,xt|=4;try{mj(l,u,f)}finally{xt=x,X.p=b,F.T=g}}Gn=1,CI(),xI(),kI()}}function CI(){if(Gn===1){Gn=0;var l=La,u=du,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=F.T,F.T=null;var g=X.p;X.p=2;var b=xt;xt|=4;try{iI(u,l);var y=bA,x=cT(l.containerInfo),T=y.focusedElem,M=y.selectionRange;if(x!==T&&T&&T.ownerDocument&&lT(T.ownerDocument.documentElement,T)){if(M!==null&&Uy(T)){var Y=M.start,ne=M.end;if(ne===void 0&&(ne=Y),"selectionStart"in T)T.selectionStart=Y,T.selectionEnd=Math.min(ne,T.value.length);else{var ae=T.ownerDocument||document,q=ae&&ae.defaultView||window;if(q.getSelection){var Z=q.getSelection(),Re=T.textContent.length,He=Math.min(M.start,Re),Nt=M.end===void 0?He:Math.min(M.end,Re);!Z.extend&&He>Nt&&(x=Nt,Nt=He,He=x);var j=aT(T,He),L=aT(T,Nt);if(j&&L&&(Z.rangeCount!==1||Z.anchorNode!==j.node||Z.anchorOffset!==j.offset||Z.focusNode!==L.node||Z.focusOffset!==L.offset)){var W=ae.createRange();W.setStart(j.node,j.offset),Z.removeAllRanges(),He>Nt?(Z.addRange(W),Z.extend(L.node,L.offset)):(W.setEnd(L.node,L.offset),Z.addRange(W))}}}}for(ae=[],Z=T;Z=Z.parentNode;)Z.nodeType===1&&ae.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ae.length;T++){var se=ae[T];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}rp=!!pA,bA=pA=null}finally{xt=b,X.p=g,F.T=f}}l.current=u,Gn=2}}function xI(){if(Gn===2){Gn=0;var l=La,u=du,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=F.T,F.T=null;var g=X.p;X.p=2;var b=xt;xt|=4;try{J2(l,u.alternate,u)}finally{xt=b,X.p=g,F.T=f}}Gn=3}}function kI(){if(Gn===4||Gn===3){Gn=0,te();var l=La,u=du,f=Oo,g=dI;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Gn=5:(Gn=0,du=La=null,EI(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Va=null),Cy(f),u=u.stateNode,vn&&typeof vn.onCommitFiberRoot=="function")try{vn.onCommitFiberRoot(or,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=F.T,b=X.p,X.p=2,F.T=null;try{for(var y=l.onRecoverableError,x=0;x<g.length;x++){var T=g[x];y(T.value,{componentStack:T.stack})}}finally{F.T=u,X.p=b}}(Oo&3)!==0&&Yg(),Fr(l),b=l.pendingLanes,(f&261930)!==0&&(b&42)!==0?l===iA?Ef++:(Ef=0,iA=l):Ef=0,Sf(0)}}function EI(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,af(u)))}function Yg(){return CI(),xI(),kI(),SI()}function SI(){if(Gn!==5)return!1;var l=La,u=tA;tA=0;var f=Cy(Oo),g=F.T,b=X.p;try{X.p=32>f?32:f,F.T=null,f=nA,nA=null;var y=La,x=Oo;if(Gn=0,du=La=null,Oo=0,(xt&6)!==0)throw Error(i(331));var T=xt;if(xt|=4,lI(y.current),rI(y,y.current,x,f),xt=T,Sf(0,!1),vn&&typeof vn.onPostCommitFiberRoot=="function")try{vn.onPostCommitFiberRoot(or,y)}catch{}return!0}finally{X.p=b,F.T=g,EI(l,u)}}function TI(l,u,f){u=Vs(f,u),u=B0(l.stateNode,u,2),l=Pa(l,u,2),l!==null&&(Gd(l,2),Fr(l))}function It(l,u,f){if(l.tag===3)TI(l,l,f);else for(;u!==null;){if(u.tag===3){TI(u,l,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Va===null||!Va.has(g))){l=Vs(f,l),f=I2(2),g=Pa(u,f,2),g!==null&&(R2(f,g,u,l),Gd(g,2),Fr(g));break}}u=u.return}}function oA(l,u,f){var g=l.pingCache;if(g===null){g=l.pingCache=new bj;var b=new Set;g.set(u,b)}else b=g.get(u),b===void 0&&(b=new Set,g.set(u,b));b.has(f)||(J0=!0,b.add(f),l=_j.bind(null,l,u,f),u.then(l,l))}function _j(l,u,f){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,zt===l&&(ct&f)===f&&(An===4||An===3&&(ct&62914560)===ct&&300>K()-jg?(xt&2)===0&&fu(l,0):X0|=f,uu===ct&&(uu=0)),Fr(l)}function II(l,u){u===0&&(u=CS()),l=Rl(l,u),l!==null&&(Gd(l,u),Fr(l))}function Cj(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),II(l,f)}function xj(l,u){var f=0;switch(l.tag){case 31:case 13:var g=l.stateNode,b=l.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(i(314))}g!==null&&g.delete(u),II(l,f)}function kj(l,u){return rr(l,u)}var Kg=null,mu=null,aA=!1,qg=!1,lA=!1,za=0;function Fr(l){l!==mu&&l.next===null&&(mu===null?Kg=mu=l:mu=mu.next=l),qg=!0,aA||(aA=!0,Sj())}function Sf(l,u){if(!lA&&qg){lA=!0;do for(var f=!1,g=Kg;g!==null;){if(l!==0){var b=g.pendingLanes;if(b===0)var y=0;else{var x=g.suspendedLanes,T=g.pingedLanes;y=(1<<31-$n(42|l)+1)-1,y&=b&~(x&~T),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(f=!0,DI(g,y))}else y=ct,y=Xm(g,g===zt?y:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(y&3)===0||$d(g,y)||(f=!0,DI(g,y));g=g.next}while(f);lA=!1}}function Ej(){RI()}function RI(){qg=aA=!1;var l=0;za!==0&&Vj()&&(l=za);for(var u=K(),f=null,g=Kg;g!==null;){var b=g.next,y=PI(g,u);y===0?(g.next=null,f===null?Kg=b:f.next=b,b===null&&(mu=f)):(f=g,(l!==0||(y&3)!==0)&&(qg=!0)),g=b}Gn!==0&&Gn!==5||Sf(l),za!==0&&(za=0)}function PI(l,u){for(var f=l.suspendedLanes,g=l.pingedLanes,b=l.expirationTimes,y=l.pendingLanes&-62914561;0<y;){var x=31-$n(y),T=1<<x,M=b[x];M===-1?((T&f)===0||(T&g)!==0)&&(b[x]=Xz(T,u)):M<=u&&(l.expiredLanes|=T),y&=~T}if(u=zt,f=ct,f=Xm(l,l===u?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,f===0||l===u&&(Tt===2||Tt===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&N(g),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||$d(l,f)){if(u=f&-f,u===l.callbackPriority)return u;switch(g!==null&&N(g),Cy(f)){case 2:case 8:f=_e;break;case 32:f=Ge;break;case 268435456:f=$t;break;default:f=Ge}return g=OI.bind(null,l),f=rr(f,g),l.callbackPriority=u,l.callbackNode=f,u}return g!==null&&g!==null&&N(g),l.callbackPriority=2,l.callbackNode=null,2}function OI(l,u){if(Gn!==0&&Gn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(Yg()&&l.callbackNode!==f)return null;var g=ct;return g=Xm(l,l===zt?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(hI(l,g,u),PI(l,K()),l.callbackNode!=null&&l.callbackNode===f?OI.bind(null,l):null)}function DI(l,u){if(Yg())return null;hI(l,u,!0)}function Sj(){Fj(function(){(xt&6)!==0?rr(ce,Ej):RI()})}function cA(){if(za===0){var l=Xc;l===0&&(l=Qm,Qm<<=1,(Qm&261888)===0&&(Qm=256)),za=l}return za}function MI(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:ig(""+l)}function BI(l,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,l.id&&f.setAttribute("form",l.id),u.parentNode.insertBefore(f,u),l=new FormData(l),f.parentNode.removeChild(f),l}function Tj(l,u,f,g,b){if(u==="submit"&&f&&f.stateNode===b){var y=MI((b[Yi]||null).action),x=g.submitter;x&&(u=(u=x[Yi]||null)?MI(u.formAction):x.getAttribute("formAction"),u!==null&&(y=u,x=null));var T=new ag("action","action",null,g,b);l.push({event:T,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(za!==0){var M=x?BI(b,x):new FormData(b);I0(f,{pending:!0,data:M,method:b.method,action:y},null,M)}}else typeof y=="function"&&(T.preventDefault(),M=x?BI(b,x):new FormData(b),I0(f,{pending:!0,data:M,method:b.method,action:y},y,M))},currentTarget:b}]})}}for(var uA=0;uA<Gy.length;uA++){var dA=Gy[uA],Ij=dA.toLowerCase(),Rj=dA[0].toUpperCase()+dA.slice(1);ar(Ij,"on"+Rj)}ar(fT,"onAnimationEnd"),ar(hT,"onAnimationIteration"),ar(mT,"onAnimationStart"),ar("dblclick","onDoubleClick"),ar("focusin","onFocus"),ar("focusout","onBlur"),ar(G9,"onTransitionRun"),ar(Y9,"onTransitionStart"),ar(K9,"onTransitionCancel"),ar(gT,"onTransitionEnd"),Fc("onMouseEnter",["mouseout","mouseover"]),Fc("onMouseLeave",["mouseout","mouseover"]),Fc("onPointerEnter",["pointerout","pointerover"]),Fc("onPointerLeave",["pointerout","pointerover"]),El("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),El("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),El("onBeforeInput",["compositionend","keypress","textInput","paste"]),El("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),El("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),El("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tf));function NI(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var g=l[f],b=g.event;g=g.listeners;e:{var y=void 0;if(u)for(var x=g.length-1;0<=x;x--){var T=g[x],M=T.instance,Y=T.currentTarget;if(T=T.listener,M!==y&&b.isPropagationStopped())break e;y=T,b.currentTarget=Y;try{y(b)}catch(ne){ug(ne)}b.currentTarget=null,y=M}else for(x=0;x<g.length;x++){if(T=g[x],M=T.instance,Y=T.currentTarget,T=T.listener,M!==y&&b.isPropagationStopped())break e;y=T,b.currentTarget=Y;try{y(b)}catch(ne){ug(ne)}b.currentTarget=null,y=M}}}}function ot(l,u){var f=u[xy];f===void 0&&(f=u[xy]=new Set);var g=l+"__bubble";f.has(g)||(VI(u,l,2,!1),f.add(g))}function fA(l,u,f){var g=0;u&&(g|=4),VI(f,l,g,u)}var Qg="_reactListening"+Math.random().toString(36).slice(2);function hA(l){if(!l[Qg]){l[Qg]=!0,RS.forEach(function(f){f!=="selectionchange"&&(Pj.has(f)||fA(f,!1,l),fA(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Qg]||(u[Qg]=!0,fA("selectionchange",!1,u))}}function VI(l,u,f,g){switch(fR(u)){case 2:var b=rU;break;case 8:b=oU;break;default:b=TA}f=b.bind(null,u,f,l),b=void 0,!Dy||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),g?b!==void 0?l.addEventListener(u,f,{capture:!0,passive:b}):l.addEventListener(u,f,!0):b!==void 0?l.addEventListener(u,f,{passive:b}):l.addEventListener(u,f,!1)}function mA(l,u,f,g,b){var y=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var x=g.tag;if(x===3||x===4){var T=g.stateNode.containerInfo;if(T===b)break;if(x===4)for(x=g.return;x!==null;){var M=x.tag;if((M===3||M===4)&&x.stateNode.containerInfo===b)return;x=x.return}for(;T!==null;){if(x=Nc(T),x===null)return;if(M=x.tag,M===5||M===6||M===26||M===27){g=y=x;continue e}T=T.parentNode}}g=g.return}US(function(){var Y=y,ne=Py(f),ae=[];e:{var q=pT.get(l);if(q!==void 0){var Z=ag,Re=l;switch(l){case"keypress":if(rg(f)===0)break e;case"keydown":case"keyup":Z=x9;break;case"focusin":Re="focus",Z=Vy;break;case"focusout":Re="blur",Z=Vy;break;case"beforeblur":case"afterblur":Z=Vy;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=$S;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=f9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=S9;break;case fT:case hT:case mT:Z=g9;break;case gT:Z=I9;break;case"scroll":case"scrollend":Z=u9;break;case"wheel":Z=P9;break;case"copy":case"cut":case"paste":Z=b9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=YS;break;case"toggle":case"beforetoggle":Z=D9}var He=(u&4)!==0,Nt=!He&&(l==="scroll"||l==="scrollend"),j=He?q!==null?q+"Capture":null:q;He=[];for(var L=Y,W;L!==null;){var se=L;if(W=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||W===null||j===null||(se=qd(L,j),se!=null&&He.push(If(L,se,W))),Nt)break;L=L.return}0<He.length&&(q=new Z(q,Re,null,f,ne),ae.push({event:q,listeners:He}))}}if((u&7)===0){e:{if(q=l==="mouseover"||l==="pointerover",Z=l==="mouseout"||l==="pointerout",q&&f!==Ry&&(Re=f.relatedTarget||f.fromElement)&&(Nc(Re)||Re[Bc]))break e;if((Z||q)&&(q=ne.window===ne?ne:(q=ne.ownerDocument)?q.defaultView||q.parentWindow:window,Z?(Re=f.relatedTarget||f.toElement,Z=Y,Re=Re?Nc(Re):null,Re!==null&&(Nt=r(Re),He=Re.tag,Re!==Nt||He!==5&&He!==27&&He!==6)&&(Re=null)):(Z=null,Re=Y),Z!==Re)){if(He=$S,se="onMouseLeave",j="onMouseEnter",L="mouse",(l==="pointerout"||l==="pointerover")&&(He=YS,se="onPointerLeave",j="onPointerEnter",L="pointer"),Nt=Z==null?q:Kd(Z),W=Re==null?q:Kd(Re),q=new He(se,L+"leave",Z,f,ne),q.target=Nt,q.relatedTarget=W,se=null,Nc(ne)===Y&&(He=new He(j,L+"enter",Re,f,ne),He.target=W,He.relatedTarget=Nt,se=He),Nt=se,Z&&Re)t:{for(He=Oj,j=Z,L=Re,W=0,se=j;se;se=He(se))W++;se=0;for(var Fe=L;Fe;Fe=He(Fe))se++;for(;0<W-se;)j=He(j),W--;for(;0<se-W;)L=He(L),se--;for(;W--;){if(j===L||L!==null&&j===L.alternate){He=j;break t}j=He(j),L=He(L)}He=null}else He=null;Z!==null&&LI(ae,q,Z,He,!1),Re!==null&&Nt!==null&&LI(ae,Nt,Re,He,!0)}}e:{if(q=Y?Kd(Y):window,Z=q.nodeName&&q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&q.type==="file")var wt=tT;else if(XS(q))if(nT)wt=H9;else{wt=j9;var Ne=z9}else Z=q.nodeName,!Z||Z.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?Y&&Iy(Y.elementType)&&(wt=tT):wt=U9;if(wt&&(wt=wt(l,Y))){eT(ae,wt,f,ne);break e}Ne&&Ne(l,q,Y),l==="focusout"&&Y&&q.type==="number"&&Y.memoizedProps.value!=null&&Ty(q,"number",q.value)}switch(Ne=Y?Kd(Y):window,l){case"focusin":(XS(Ne)||Ne.contentEditable==="true")&&($c=Ne,Hy=Y,sf=null);break;case"focusout":sf=Hy=$c=null;break;case"mousedown":Wy=!0;break;case"contextmenu":case"mouseup":case"dragend":Wy=!1,uT(ae,f,ne);break;case"selectionchange":if($9)break;case"keydown":case"keyup":uT(ae,f,ne)}var Xe;if(Fy)e:{switch(l){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else Wc?ZS(l,f)&&(ut="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(ut="onCompositionStart");ut&&(KS&&f.locale!=="ko"&&(Wc||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&Wc&&(Xe=HS()):(xa=ne,My="value"in xa?xa.value:xa.textContent,Wc=!0)),Ne=Zg(Y,ut),0<Ne.length&&(ut=new GS(ut,l,null,f,ne),ae.push({event:ut,listeners:Ne}),Xe?ut.data=Xe:(Xe=JS(f),Xe!==null&&(ut.data=Xe)))),(Xe=B9?N9(l,f):V9(l,f))&&(ut=Zg(Y,"onBeforeInput"),0<ut.length&&(Ne=new GS("onBeforeInput","beforeinput",null,f,ne),ae.push({event:Ne,listeners:ut}),Ne.data=Xe)),Tj(ae,l,Y,f,ne)}NI(ae,u)})}function If(l,u,f){return{instance:l,listener:u,currentTarget:f}}function Zg(l,u){for(var f=u+"Capture",g=[];l!==null;){var b=l,y=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||y===null||(b=qd(l,f),b!=null&&g.unshift(If(l,b,y)),b=qd(l,u),b!=null&&g.push(If(l,b,y))),l.tag===3)return g;l=l.return}return[]}function Oj(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function LI(l,u,f,g,b){for(var y=u._reactName,x=[];f!==null&&f!==g;){var T=f,M=T.alternate,Y=T.stateNode;if(T=T.tag,M!==null&&M===g)break;T!==5&&T!==26&&T!==27||Y===null||(M=Y,b?(Y=qd(f,y),Y!=null&&x.unshift(If(f,Y,M))):b||(Y=qd(f,y),Y!=null&&x.push(If(f,Y,M)))),f=f.return}x.length!==0&&l.push({event:u,listeners:x})}var Dj=/\r\n?/g,Mj=/\u0000|\uFFFD/g;function FI(l){return(typeof l=="string"?l:""+l).replace(Dj,`
`).replace(Mj,"")}function zI(l,u){return u=FI(u),FI(l)===u}function Bt(l,u,f,g,b,y){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||jc(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&jc(l,""+g);break;case"className":tg(l,"class",g);break;case"tabIndex":tg(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":tg(l,f,g);break;case"style":zS(l,g,y);break;case"data":if(u!=="object"){tg(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){l.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=ig(""+g),l.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(f==="formAction"?(u!=="input"&&Bt(l,u,"name",b.name,b,null),Bt(l,u,"formEncType",b.formEncType,b,null),Bt(l,u,"formMethod",b.formMethod,b,null),Bt(l,u,"formTarget",b.formTarget,b,null)):(Bt(l,u,"encType",b.encType,b,null),Bt(l,u,"method",b.method,b,null),Bt(l,u,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=ig(""+g),l.setAttribute(f,g);break;case"onClick":g!=null&&(l.onclick=bo);break;case"onScroll":g!=null&&ot("scroll",l);break;case"onScrollEnd":g!=null&&ot("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(i(60));l.innerHTML=f}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}f=ig(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""+g):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":g===!0?l.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,g):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(f,g):l.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(f):l.setAttribute(f,g);break;case"popover":ot("beforetoggle",l),ot("toggle",l),eg(l,"popover",g);break;case"xlinkActuate":po(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":po(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":po(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":po(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":po(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":po(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":po(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":po(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":po(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":eg(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=l9.get(f)||f,eg(l,f,g))}}function gA(l,u,f,g,b,y){switch(f){case"style":zS(l,g,y);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(i(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(i(60));l.innerHTML=f}}break;case"children":typeof g=="string"?jc(l,g):(typeof g=="number"||typeof g=="bigint")&&jc(l,""+g);break;case"onScroll":g!=null&&ot("scroll",l);break;case"onScrollEnd":g!=null&&ot("scrollend",l);break;case"onClick":g!=null&&(l.onclick=bo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!PS.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),u=f.slice(2,b?f.length-7:void 0),y=l[Yi]||null,y=y!=null?y[f]:null,typeof y=="function"&&l.removeEventListener(u,y,b),typeof g=="function")){typeof y!="function"&&y!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(u,g,b);break e}f in l?l[f]=g:g===!0?l.setAttribute(f,""):eg(l,f,g)}}}function gi(l,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",l),ot("load",l);var g=!1,b=!1,y;for(y in f)if(f.hasOwnProperty(y)){var x=f[y];if(x!=null)switch(y){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Bt(l,u,y,x,f,null)}}b&&Bt(l,u,"srcSet",f.srcSet,f,null),g&&Bt(l,u,"src",f.src,f,null);return;case"input":ot("invalid",l);var T=y=x=b=null,M=null,Y=null;for(g in f)if(f.hasOwnProperty(g)){var ne=f[g];if(ne!=null)switch(g){case"name":b=ne;break;case"type":x=ne;break;case"checked":M=ne;break;case"defaultChecked":Y=ne;break;case"value":y=ne;break;case"defaultValue":T=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,u));break;default:Bt(l,u,g,ne,f,null)}}NS(l,y,T,M,Y,x,b,!1);return;case"select":ot("invalid",l),g=x=y=null;for(b in f)if(f.hasOwnProperty(b)&&(T=f[b],T!=null))switch(b){case"value":y=T;break;case"defaultValue":x=T;break;case"multiple":g=T;default:Bt(l,u,b,T,f,null)}u=y,f=x,l.multiple=!!g,u!=null?zc(l,!!g,u,!1):f!=null&&zc(l,!!g,f,!0);return;case"textarea":ot("invalid",l),y=b=g=null;for(x in f)if(f.hasOwnProperty(x)&&(T=f[x],T!=null))switch(x){case"value":g=T;break;case"defaultValue":b=T;break;case"children":y=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:Bt(l,u,x,T,f,null)}LS(l,g,b,y);return;case"option":for(M in f)f.hasOwnProperty(M)&&(g=f[M],g!=null)&&(M==="selected"?l.selected=g&&typeof g!="function"&&typeof g!="symbol":Bt(l,u,M,g,f,null));return;case"dialog":ot("beforetoggle",l),ot("toggle",l),ot("cancel",l),ot("close",l);break;case"iframe":case"object":ot("load",l);break;case"video":case"audio":for(g=0;g<Tf.length;g++)ot(Tf[g],l);break;case"image":ot("error",l),ot("load",l);break;case"details":ot("toggle",l);break;case"embed":case"source":case"link":ot("error",l),ot("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in f)if(f.hasOwnProperty(Y)&&(g=f[Y],g!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,u));default:Bt(l,u,Y,g,f,null)}return;default:if(Iy(u)){for(ne in f)f.hasOwnProperty(ne)&&(g=f[ne],g!==void 0&&gA(l,u,ne,g,f,void 0));return}}for(T in f)f.hasOwnProperty(T)&&(g=f[T],g!=null&&Bt(l,u,T,g,f,null))}function Bj(l,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,y=null,x=null,T=null,M=null,Y=null,ne=null;for(Z in f){var ae=f[Z];if(f.hasOwnProperty(Z)&&ae!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":M=ae;default:g.hasOwnProperty(Z)||Bt(l,u,Z,null,g,ae)}}for(var q in g){var Z=g[q];if(ae=f[q],g.hasOwnProperty(q)&&(Z!=null||ae!=null))switch(q){case"type":y=Z;break;case"name":b=Z;break;case"checked":Y=Z;break;case"defaultChecked":ne=Z;break;case"value":x=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,u));break;default:Z!==ae&&Bt(l,u,q,Z,g,ae)}}Sy(l,x,T,M,Y,ne,y,b);return;case"select":Z=x=T=q=null;for(y in f)if(M=f[y],f.hasOwnProperty(y)&&M!=null)switch(y){case"value":break;case"multiple":Z=M;default:g.hasOwnProperty(y)||Bt(l,u,y,null,g,M)}for(b in g)if(y=g[b],M=f[b],g.hasOwnProperty(b)&&(y!=null||M!=null))switch(b){case"value":q=y;break;case"defaultValue":T=y;break;case"multiple":x=y;default:y!==M&&Bt(l,u,b,y,g,M)}u=T,f=x,g=Z,q!=null?zc(l,!!f,q,!1):!!g!=!!f&&(u!=null?zc(l,!!f,u,!0):zc(l,!!f,f?[]:"",!1));return;case"textarea":Z=q=null;for(T in f)if(b=f[T],f.hasOwnProperty(T)&&b!=null&&!g.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Bt(l,u,T,null,g,b)}for(x in g)if(b=g[x],y=f[x],g.hasOwnProperty(x)&&(b!=null||y!=null))switch(x){case"value":q=b;break;case"defaultValue":Z=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:b!==y&&Bt(l,u,x,b,g,y)}VS(l,q,Z);return;case"option":for(var Re in f)q=f[Re],f.hasOwnProperty(Re)&&q!=null&&!g.hasOwnProperty(Re)&&(Re==="selected"?l.selected=!1:Bt(l,u,Re,null,g,q));for(M in g)q=g[M],Z=f[M],g.hasOwnProperty(M)&&q!==Z&&(q!=null||Z!=null)&&(M==="selected"?l.selected=q&&typeof q!="function"&&typeof q!="symbol":Bt(l,u,M,q,g,Z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in f)q=f[He],f.hasOwnProperty(He)&&q!=null&&!g.hasOwnProperty(He)&&Bt(l,u,He,null,g,q);for(Y in g)if(q=g[Y],Z=f[Y],g.hasOwnProperty(Y)&&q!==Z&&(q!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,u));break;default:Bt(l,u,Y,q,g,Z)}return;default:if(Iy(u)){for(var Nt in f)q=f[Nt],f.hasOwnProperty(Nt)&&q!==void 0&&!g.hasOwnProperty(Nt)&&gA(l,u,Nt,void 0,g,q);for(ne in g)q=g[ne],Z=f[ne],!g.hasOwnProperty(ne)||q===Z||q===void 0&&Z===void 0||gA(l,u,ne,q,g,Z);return}}for(var j in f)q=f[j],f.hasOwnProperty(j)&&q!=null&&!g.hasOwnProperty(j)&&Bt(l,u,j,null,g,q);for(ae in g)q=g[ae],Z=f[ae],!g.hasOwnProperty(ae)||q===Z||q==null&&Z==null||Bt(l,u,ae,q,g,Z)}function jI(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Nj(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var b=f[g],y=b.transferSize,x=b.initiatorType,T=b.duration;if(y&&T&&jI(x)){for(x=0,T=b.responseEnd,g+=1;g<f.length;g++){var M=f[g],Y=M.startTime;if(Y>T)break;var ne=M.transferSize,ae=M.initiatorType;ne&&jI(ae)&&(M=M.responseEnd,x+=ne*(M<T?1:(T-Y)/(M-Y)))}if(--g,u+=8*(y+x)/(b.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var pA=null,bA=null;function Jg(l){return l.nodeType===9?l:l.ownerDocument}function UI(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function HI(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function wA(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var vA=null;function Vj(){var l=window.event;return l&&l.type==="popstate"?l===vA?!1:(vA=l,!0):(vA=null,!1)}var WI=typeof setTimeout=="function"?setTimeout:void 0,Lj=typeof clearTimeout=="function"?clearTimeout:void 0,$I=typeof Promise=="function"?Promise:void 0,Fj=typeof queueMicrotask=="function"?queueMicrotask:typeof $I<"u"?function(l){return $I.resolve(null).then(l).catch(zj)}:WI;function zj(l){setTimeout(function(){throw l})}function ja(l){return l==="head"}function GI(l,u){var f=u,g=0;do{var b=f.nextSibling;if(l.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(g===0){l.removeChild(b),wu(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Rf(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,Rf(f);for(var y=f.firstChild;y;){var x=y.nextSibling,T=y.nodeName;y[Yd]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&y.rel.toLowerCase()==="stylesheet"||f.removeChild(y),y=x}}else f==="body"&&Rf(l.ownerDocument.body);f=b}while(f);wu(u)}function YI(l,u){var f=l;l=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=g}while(f)}function yA(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":yA(f),ky(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function jj(l,u,f,g){for(;l.nodeType===1;){var b=f;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[Yd])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(y=l.getAttribute("rel"),y==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(y!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(y=l.getAttribute("src"),(y!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&y&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var y=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===y)return l}else return l;if(l=Us(l.nextSibling),l===null)break}return null}function Uj(l,u,f){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=Us(l.nextSibling),l===null))return null;return l}function KI(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=Us(l.nextSibling),l===null))return null;return l}function AA(l){return l.data==="$?"||l.data==="$~"}function _A(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function Hj(l,u){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function Us(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var CA=null;function qI(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(u===0)return Us(l.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}l=l.nextSibling}return null}function QI(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return l;u--}else f!=="/$"&&f!=="/&"||u++}l=l.previousSibling}return null}function ZI(l,u,f){switch(u=Jg(f),l){case"html":if(l=u.documentElement,!l)throw Error(i(452));return l;case"head":if(l=u.head,!l)throw Error(i(453));return l;case"body":if(l=u.body,!l)throw Error(i(454));return l;default:throw Error(i(451))}}function Rf(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);ky(l)}var Hs=new Map,JI=new Set;function Xg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Do=X.d;X.d={f:Wj,r:$j,D:Gj,C:Yj,L:Kj,m:qj,X:Zj,S:Qj,M:Jj};function Wj(){var l=Do.f(),u=Wg();return l||u}function $j(l){var u=Vc(l);u!==null&&u.tag===5&&u.type==="form"?g2(u):Do.r(l)}var gu=typeof document>"u"?null:document;function XI(l,u,f){var g=gu;if(g&&typeof u=="string"&&u){var b=Bs(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),JI.has(b)||(JI.add(b),l={rel:l,crossOrigin:f,href:u},g.querySelector(b)===null&&(u=g.createElement("link"),gi(u,"link",l),ti(u),g.head.appendChild(u)))}}function Gj(l){Do.D(l),XI("dns-prefetch",l,null)}function Yj(l,u){Do.C(l,u),XI("preconnect",l,u)}function Kj(l,u,f){Do.L(l,u,f);var g=gu;if(g&&l&&u){var b='link[rel="preload"][as="'+Bs(u)+'"]';u==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+Bs(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+Bs(f.imageSizes)+'"]')):b+='[href="'+Bs(l)+'"]';var y=b;switch(u){case"style":y=pu(l);break;case"script":y=bu(l)}Hs.has(y)||(l=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:l,as:u},f),Hs.set(y,l),g.querySelector(b)!==null||u==="style"&&g.querySelector(Pf(y))||u==="script"&&g.querySelector(Of(y))||(u=g.createElement("link"),gi(u,"link",l),ti(u),g.head.appendChild(u)))}}function qj(l,u){Do.m(l,u);var f=gu;if(f&&l){var g=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+Bs(g)+'"][href="'+Bs(l)+'"]',y=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=bu(l)}if(!Hs.has(y)&&(l=m({rel:"modulepreload",href:l},u),Hs.set(y,l),f.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Of(y)))return}g=f.createElement("link"),gi(g,"link",l),ti(g),f.head.appendChild(g)}}}function Qj(l,u,f){Do.S(l,u,f);var g=gu;if(g&&l){var b=Lc(g).hoistableStyles,y=pu(l);u=u||"default";var x=b.get(y);if(!x){var T={loading:0,preload:null};if(x=g.querySelector(Pf(y)))T.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":u},f),(f=Hs.get(y))&&xA(l,f);var M=x=g.createElement("link");ti(M),gi(M,"link",l),M._p=new Promise(function(Y,ne){M.onload=Y,M.onerror=ne}),M.addEventListener("load",function(){T.loading|=1}),M.addEventListener("error",function(){T.loading|=2}),T.loading|=4,ep(x,u,g)}x={type:"stylesheet",instance:x,count:1,state:T},b.set(y,x)}}}function Zj(l,u){Do.X(l,u);var f=gu;if(f&&l){var g=Lc(f).hoistableScripts,b=bu(l),y=g.get(b);y||(y=f.querySelector(Of(b)),y||(l=m({src:l,async:!0},u),(u=Hs.get(b))&&kA(l,u),y=f.createElement("script"),ti(y),gi(y,"link",l),f.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},g.set(b,y))}}function Jj(l,u){Do.M(l,u);var f=gu;if(f&&l){var g=Lc(f).hoistableScripts,b=bu(l),y=g.get(b);y||(y=f.querySelector(Of(b)),y||(l=m({src:l,async:!0,type:"module"},u),(u=Hs.get(b))&&kA(l,u),y=f.createElement("script"),ti(y),gi(y,"link",l),f.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},g.set(b,y))}}function eR(l,u,f,g){var b=(b=Ie.current)?Xg(b):null;if(!b)throw Error(i(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=pu(f.href),f=Lc(b).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=pu(f.href);var y=Lc(b).hoistableStyles,x=y.get(l);if(x||(b=b.ownerDocument||b,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(l,x),(y=b.querySelector(Pf(l)))&&!y._p&&(x.instance=y,x.state.loading=5),Hs.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Hs.set(l,f),y||Xj(b,l,f,x.state))),u&&g===null)throw Error(i(528,""));return x}if(u&&g!==null)throw Error(i(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=bu(f),f=Lc(b).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,l))}}function pu(l){return'href="'+Bs(l)+'"'}function Pf(l){return'link[rel="stylesheet"]['+l+"]"}function tR(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function Xj(l,u,f,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),gi(u,"link",f),ti(u),l.head.appendChild(u))}function bu(l){return'[src="'+Bs(l)+'"]'}function Of(l){return"script[async]"+l}function nR(l,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+Bs(f.href)+'"]');if(g)return u.instance=g,ti(g),g;var b=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),ti(g),gi(g,"style",b),ep(g,f.precedence,l),u.instance=g;case"stylesheet":b=pu(f.href);var y=l.querySelector(Pf(b));if(y)return u.state.loading|=4,u.instance=y,ti(y),y;g=tR(f),(b=Hs.get(b))&&xA(g,b),y=(l.ownerDocument||l).createElement("link"),ti(y);var x=y;return x._p=new Promise(function(T,M){x.onload=T,x.onerror=M}),gi(y,"link",g),u.state.loading|=4,ep(y,f.precedence,l),u.instance=y;case"script":return y=bu(f.src),(b=l.querySelector(Of(y)))?(u.instance=b,ti(b),b):(g=f,(b=Hs.get(y))&&(g=m({},f),kA(g,b)),l=l.ownerDocument||l,b=l.createElement("script"),ti(b),gi(b,"link",g),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(i(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,ep(g,f.precedence,l));return u.instance}function ep(l,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,y=b,x=0;x<g.length;x++){var T=g[x];if(T.dataset.precedence===u)y=T;else if(y!==b)break}y?y.parentNode.insertBefore(l,y.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(l,u.firstChild))}function xA(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function kA(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var tp=null;function iR(l,u,f){if(tp===null){var g=new Map,b=tp=new Map;b.set(f,g)}else b=tp,g=b.get(f),g||(g=new Map,b.set(f,g));if(g.has(l))return g;for(g.set(l,null),f=f.getElementsByTagName(l),b=0;b<f.length;b++){var y=f[b];if(!(y[Yd]||y[di]||l==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var x=y.getAttribute(u)||"";x=l+x;var T=g.get(x);T?T.push(y):g.set(x,[y])}}return g}function sR(l,u,f){l=l.ownerDocument||l,l.head.insertBefore(f,u==="title"?l.querySelector("head > title"):null)}function eU(l,u,f){if(f===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(l=u.disabled,typeof u.precedence=="string"&&l==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function rR(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function tU(l,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=pu(g.href),y=u.querySelector(Pf(b));if(y){u=y._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=np.bind(l),u.then(l,l)),f.state.loading|=4,f.instance=y,ti(y);return}y=u.ownerDocument||u,g=tR(g),(b=Hs.get(b))&&xA(g,b),y=y.createElement("link"),ti(y);var x=y;x._p=new Promise(function(T,M){x.onload=T,x.onerror=M}),gi(y,"link",g),f.instance=y}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=np.bind(l),u.addEventListener("load",f),u.addEventListener("error",f))}}var EA=0;function nU(l,u){return l.stylesheets&&l.count===0&&sp(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var g=setTimeout(function(){if(l.stylesheets&&sp(l,l.stylesheets),l.unsuspend){var y=l.unsuspend;l.unsuspend=null,y()}},6e4+u);0<l.imgBytes&&EA===0&&(EA=62500*Nj());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&sp(l,l.stylesheets),l.unsuspend)){var y=l.unsuspend;l.unsuspend=null,y()}},(l.imgBytes>EA?50:800)+u);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function np(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sp(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var ip=null;function sp(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,ip=new Map,u.forEach(iU,l),ip=null,np.call(l))}function iU(l,u){if(!(u.state.loading&4)){var f=ip.get(l);if(f)var g=f.get(null);else{f=new Map,ip.set(l,f);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<b.length;y++){var x=b[y];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(f.set(x.dataset.precedence,x),g=x)}g&&f.set(null,g)}b=u.instance,x=b.getAttribute("data-precedence"),y=f.get(x)||g,y===g&&f.set(null,b),f.set(x,b),this.count++,g=np.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),y?y.parentNode.insertBefore(b,y.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var Df={$$typeof:I,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function sU(l,u,f,g,b,y,x,T,M){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ay(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ay(0),this.hiddenUpdates=Ay(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=y,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function oR(l,u,f,g,b,y,x,T,M,Y,ne,ae){return l=new sU(l,u,f,x,M,Y,ne,ae,T),u=1,y===!0&&(u|=24),y=hs(3,null,null,u),l.current=y,y.stateNode=l,u=r0(),u.refCount++,l.pooledCache=u,u.refCount++,y.memoizedState={element:g,isDehydrated:f,cache:u},c0(y),l}function aR(l){return l?(l=Kc,l):Kc}function lR(l,u,f,g,b,y){b=aR(b),g.context===null?g.context=b:g.pendingContext=b,g=Ra(u),g.payload={element:f},y=y===void 0?null:y,y!==null&&(g.callback=y),f=Pa(l,g,u),f!==null&&(Xi(f,l,u),df(f,l,u))}function cR(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function SA(l,u){cR(l,u),(l=l.alternate)&&cR(l,u)}function uR(l){if(l.tag===13||l.tag===31){var u=Rl(l,67108864);u!==null&&Xi(u,l,67108864),SA(l,67108864)}}function dR(l){if(l.tag===13||l.tag===31){var u=ws();u=_y(u);var f=Rl(l,u);f!==null&&Xi(f,l,u),SA(l,u)}}var rp=!0;function rU(l,u,f,g){var b=F.T;F.T=null;var y=X.p;try{X.p=2,TA(l,u,f,g)}finally{X.p=y,F.T=b}}function oU(l,u,f,g){var b=F.T;F.T=null;var y=X.p;try{X.p=8,TA(l,u,f,g)}finally{X.p=y,F.T=b}}function TA(l,u,f,g){if(rp){var b=IA(g);if(b===null)mA(l,u,g,op,f),hR(l,g);else if(lU(b,l,u,f,g))g.stopPropagation();else if(hR(l,g),u&4&&-1<aU.indexOf(l)){for(;b!==null;){var y=Vc(b);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var x=kl(y.pendingLanes);if(x!==0){var T=y;for(T.pendingLanes|=2,T.entangledLanes|=2;x;){var M=1<<31-$n(x);T.entanglements[1]|=M,x&=~M}Fr(y),(xt&6)===0&&(Ug=K()+500,Sf(0))}}break;case 31:case 13:T=Rl(y,2),T!==null&&Xi(T,y,2),Wg(),SA(y,2)}if(y=IA(g),y===null&&mA(l,u,g,op,f),y===b)break;b=y}b!==null&&g.stopPropagation()}else mA(l,u,g,null,f)}}function IA(l){return l=Py(l),RA(l)}var op=null;function RA(l){if(op=null,l=Nc(l),l!==null){var u=r(l);if(u===null)l=null;else{var f=u.tag;if(f===13){if(l=o(u),l!==null)return l;l=null}else if(f===31){if(l=a(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return op=l,null}function fR(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ee()){case ce:return 2;case _e:return 8;case Ge:case st:return 32;case $t:return 268435456;default:return 32}default:return 32}}var PA=!1,Ua=null,Ha=null,Wa=null,Mf=new Map,Bf=new Map,$a=[],aU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hR(l,u){switch(l){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Ha=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Mf.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bf.delete(u.pointerId)}}function Nf(l,u,f,g,b,y){return l===null||l.nativeEvent!==y?(l={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:y,targetContainers:[b]},u!==null&&(u=Vc(u),u!==null&&uR(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function lU(l,u,f,g,b){switch(u){case"focusin":return Ua=Nf(Ua,l,u,f,g,b),!0;case"dragenter":return Ha=Nf(Ha,l,u,f,g,b),!0;case"mouseover":return Wa=Nf(Wa,l,u,f,g,b),!0;case"pointerover":var y=b.pointerId;return Mf.set(y,Nf(Mf.get(y)||null,l,u,f,g,b)),!0;case"gotpointercapture":return y=b.pointerId,Bf.set(y,Nf(Bf.get(y)||null,l,u,f,g,b)),!0}return!1}function mR(l){var u=Nc(l.target);if(u!==null){var f=r(u);if(f!==null){if(u=f.tag,u===13){if(u=o(f),u!==null){l.blockedOn=u,TS(l.priority,function(){dR(f)});return}}else if(u===31){if(u=a(f),u!==null){l.blockedOn=u,TS(l.priority,function(){dR(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function ap(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=IA(l.nativeEvent);if(f===null){f=l.nativeEvent;var g=new f.constructor(f.type,f);Ry=g,f.target.dispatchEvent(g),Ry=null}else return u=Vc(f),u!==null&&uR(u),l.blockedOn=f,!1;u.shift()}return!0}function gR(l,u,f){ap(l)&&f.delete(u)}function cU(){PA=!1,Ua!==null&&ap(Ua)&&(Ua=null),Ha!==null&&ap(Ha)&&(Ha=null),Wa!==null&&ap(Wa)&&(Wa=null),Mf.forEach(gR),Bf.forEach(gR)}function lp(l,u){l.blockedOn===u&&(l.blockedOn=null,PA||(PA=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,cU)))}var cp=null;function pR(l){cp!==l&&(cp=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){cp===l&&(cp=null);for(var u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],b=l[u+2];if(typeof g!="function"){if(RA(g||f)===null)continue;break}var y=Vc(f);y!==null&&(l.splice(u,3),u-=3,I0(y,{pending:!0,data:b,method:f.method,action:g},g,b))}}))}function wu(l){function u(M){return lp(M,l)}Ua!==null&&lp(Ua,l),Ha!==null&&lp(Ha,l),Wa!==null&&lp(Wa,l),Mf.forEach(u),Bf.forEach(u);for(var f=0;f<$a.length;f++){var g=$a[f];g.blockedOn===l&&(g.blockedOn=null)}for(;0<$a.length&&(f=$a[0],f.blockedOn===null);)mR(f),f.blockedOn===null&&$a.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var b=f[g],y=f[g+1],x=b[Yi]||null;if(typeof y=="function")x||pR(f);else if(x){var T=null;if(y&&y.hasAttribute("formAction")){if(b=y,x=y[Yi]||null)T=x.formAction;else if(RA(b)!==null)continue}else T=x.action;typeof T=="function"?f[g+1]=T:(f.splice(g,3),g-=3),pR(f)}}}function bR(){function l(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(x){return b=x})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function OA(l){this._internalRoot=l}up.prototype.render=OA.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(i(409));var f=u.current,g=ws();lR(f,g,l,u,null,null)},up.prototype.unmount=OA.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;lR(l.current,2,null,l,null,null),Wg(),u[Bc]=null}};function up(l){this._internalRoot=l}up.prototype.unstable_scheduleHydration=function(l){if(l){var u=SS();l={blockedOn:null,target:l,priority:u};for(var f=0;f<$a.length&&u!==0&&u<$a[f].priority;f++);$a.splice(f,0,l),f===0&&mR(l)}};var wR=e.version;if(wR!=="19.2.3")throw Error(i(527,wR,"19.2.3"));X.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return l=d(u),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var uU={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dp.isDisabled&&dp.supportsFiber)try{or=dp.inject(uU),vn=dp}catch{}}return Lf.createRoot=function(l,u){if(!s(l))throw Error(i(299));var f=!1,g="",b=k2,y=E2,x=S2;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(y=u.onCaughtError),u.onRecoverableError!==void 0&&(x=u.onRecoverableError)),u=oR(l,1,!1,null,null,f,g,null,b,y,x,bR),l[Bc]=u.current,hA(l),new OA(u)},Lf.hydrateRoot=function(l,u,f){if(!s(l))throw Error(i(299));var g=!1,b="",y=k2,x=E2,T=S2,M=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(y=f.onUncaughtError),f.onCaughtError!==void 0&&(x=f.onCaughtError),f.onRecoverableError!==void 0&&(T=f.onRecoverableError),f.formState!==void 0&&(M=f.formState)),u=oR(l,1,!0,u,f??null,g,b,M,y,x,T,bR),u.context=aR(null),f=u.current,g=ws(),g=_y(g),b=Ra(g),b.callback=null,Pa(f,b,g),f=g,u.current.lanes=f,Gd(u,f),Fr(u),l[Bc]=u.current,hA(l),new up(u)},Lf.version="19.2.3",Lf}var TR;function AU(){if(TR)return BA.exports;TR=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),BA.exports=yU(),BA.exports}var _U=AU();const CU=bc(_U);var FA={exports:{}},zA={};var IR;function xU(){if(IR)return zA;IR=1;var n=mm();function e(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,s=n.useRef,r=n.useEffect,o=n.useMemo,a=n.useDebugValue;return zA.useSyncExternalStoreWithSelector=function(c,d,h,m,p){var w=s(null);if(w.current===null){var A={hasValue:!1,value:null};w.current=A}else A=w.current;w=o(function(){function k(O){if(!E){if(E=!0,S=O,O=m(O),p!==void 0&&A.hasValue){var U=A.value;if(p(U,O))return I=U}return I=O}if(U=I,t(S,O))return U;var P=m(O);return p!==void 0&&p(U,P)?(S=O,U):(S=O,I=P)}var E=!1,S,I,R=h===void 0?null:h;return[function(){return k(d())},R===null?void 0:function(){return k(R())}]},[d,h,m,p]);var C=i(c,w[0],w[1]);return r(function(){A.hasValue=!0,A.value=C},[C]),a(C),C},zA}var RR;function kU(){return RR||(RR=1,FA.exports=xU()),FA.exports}var EU=kU();function SU(n){n()}function TU(){let n=null,e=null;return{clear(){n=null,e=null},notify(){SU(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!i||n===null||(i=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var PR={notify(){},get:()=>[]};function IU(n,e){let t,i=PR,s=0,r=!1;function o(C){h();const k=i.subscribe(C);let E=!1;return()=>{E||(E=!0,k(),m())}}function a(){i.notify()}function c(){A.onStateChange&&A.onStateChange()}function d(){return r}function h(){s++,t||(t=n.subscribe(c),i=TU())}function m(){s--,t&&s===0&&(t(),t=void 0,i.clear(),i=PR)}function p(){r||(r=!0,h())}function w(){r&&(r=!1,m())}const A={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:c,isSubscribed:d,trySubscribe:p,tryUnsubscribe:w,getListeners:()=>i};return A}var RU=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PU=RU(),OU=()=>typeof navigator<"u"&&navigator.product==="ReactNative",DU=OU(),MU=()=>PU||DU?_.useLayoutEffect:_.useEffect,BU=MU(),NU=Symbol.for("react-redux-context"),VU=typeof globalThis<"u"?globalThis:{};function LU(){if(!_.createContext)return{};const n=VU[NU]??=new Map;let e=n.get(_.createContext);return e||(e=_.createContext(null),n.set(_.createContext,e)),e}var il=LU();function FU(n){const{children:e,context:t,serverState:i,store:s}=n,r=_.useMemo(()=>{const c=IU(s);return{store:s,subscription:c,getServerState:i?()=>i:void 0}},[s,i]),o=_.useMemo(()=>s.getState(),[s]);BU(()=>{const{subscription:c}=r;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[r,o]);const a=t||il;return _.createElement(a.Provider,{value:r},e)}var zU=FU;function mx(n=il){return function(){return _.useContext(n)}}var t3=mx();function n3(n=il){const e=n===il?t3:mx(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var jU=n3();function UU(n=il){const e=n===il?jU:n3(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var gx=UU(),HU=(n,e)=>n===e;function WU(n=il){const e=n===il?t3:mx(n),t=(i,s={})=>{const{equalityFn:r=HU}=typeof s=="function"?{equalityFn:s}:s,o=e(),{store:a,subscription:c,getServerState:d}=o;_.useRef(!0);const h=_.useCallback({[i.name](p){return i(p)}}[i.name],[i]),m=EU.useSyncExternalStoreWithSelector(c.addNestedSub,a.getState,d||a.getState,h,r);return _.useDebugValue(m),m};return Object.assign(t,{withTypes:()=>t}),t}var dl=WU();function ib(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ib=function(t){return typeof t}:ib=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ib(n)}function $U(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function GU(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function YU(n,e,t){return e&&GU(n.prototype,e),n}function KU(n,e){return e&&(ib(e)==="object"||typeof e=="function")?e:sb(n)}function C1(n){return C1=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},C1(n)}function sb(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function qU(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&x1(n,e)}function x1(n,e){return x1=Object.setPrototypeOf||function(i,s){return i.__proto__=s,i},x1(n,e)}function rb(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var i3=(function(n){qU(e,n);function e(){var t,i;$U(this,e);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i=KU(this,(t=C1(e)).call.apply(t,[this].concat(r))),rb(sb(i),"state",{bootstrapped:!1}),rb(sb(i),"_unsubscribe",void 0),rb(sb(i),"handlePersistorState",function(){var a=i.props.persistor,c=a.getState(),d=c.bootstrapped;d&&(i.props.onBeforeLift?Promise.resolve(i.props.onBeforeLift()).finally(function(){return i.setState({bootstrapped:!0})}):i.setState({bootstrapped:!0}),i._unsubscribe&&i._unsubscribe())}),i}return YU(e,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),e})(_.PureComponent);rb(i3,"defaultProps",{children:null,loading:null});function pi(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var QU=typeof Symbol=="function"&&Symbol.observable||"@@observable",OR=QU,jA=()=>Math.random().toString(36).substring(7).split("").join("."),ZU={INIT:`@@redux/INIT${jA()}`,REPLACE:`@@redux/REPLACE${jA()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${jA()}`},Ob=ZU;function px(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function bx(n,e,t){if(typeof n!="function")throw new Error(pi(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(pi(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(pi(1));return t(bx)(n,e)}let i=n,s=e,r=new Map,o=r,a=0,c=!1;function d(){o===r&&(o=new Map,r.forEach((k,E)=>{o.set(E,k)}))}function h(){if(c)throw new Error(pi(3));return s}function m(k){if(typeof k!="function")throw new Error(pi(4));if(c)throw new Error(pi(5));let E=!0;d();const S=a++;return o.set(S,k),function(){if(E){if(c)throw new Error(pi(6));E=!1,d(),o.delete(S),r=null}}}function p(k){if(!px(k))throw new Error(pi(7));if(typeof k.type>"u")throw new Error(pi(8));if(typeof k.type!="string")throw new Error(pi(17));if(c)throw new Error(pi(9));try{c=!0,s=i(s,k)}finally{c=!1}return(r=o).forEach(S=>{S()}),k}function w(k){if(typeof k!="function")throw new Error(pi(10));i=k,p({type:Ob.REPLACE})}function A(){const k=m;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(pi(11));function S(){const R=E;R.next&&R.next(h())}return S(),{unsubscribe:k(S)}},[OR](){return this}}}return p({type:Ob.INIT}),{dispatch:p,subscribe:m,getState:h,replaceReducer:w,[OR]:A}}function JU(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Ob.INIT})>"u")throw new Error(pi(12));if(typeof t(void 0,{type:Ob.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(pi(13))})}function s3(n){const e=Object.keys(n),t={};for(let r=0;r<e.length;r++){const o=e[r];typeof n[o]=="function"&&(t[o]=n[o])}const i=Object.keys(t);let s;try{JU(t)}catch(r){s=r}return function(o={},a){if(s)throw s;let c=!1;const d={};for(let h=0;h<i.length;h++){const m=i[h],p=t[m],w=o[m],A=p(w,a);if(typeof A>"u")throw a&&a.type,new Error(pi(14));d[m]=A,c=c||A!==w}return c=c||i.length!==Object.keys(o).length,c?d:o}}function Db(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function XU(...n){return e=>(t,i)=>{const s=e(t,i);let r=()=>{throw new Error(pi(15))};const o={getState:s.getState,dispatch:(c,...d)=>r(c,...d)},a=n.map(c=>c(o));return r=Db(...a)(s.dispatch),{...s,dispatch:r}}}function eH(n){return px(n)&&"type"in n&&typeof n.type=="string"}var r3=Symbol.for("immer-nothing"),DR=Symbol.for("immer-draftable"),Li=Symbol.for("immer-state");function hr(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var xs=Object,ud=xs.getPrototypeOf,Mb="constructor",Hw="prototype",k1="configurable",Bb="enumerable",ob="writable",Ih="value",sa=n=>!!n&&!!n[Li];function Ar(n){return n?o3(n)||$w(n)||!!n[DR]||!!n[Mb]?.[DR]||Gw(n)||Yw(n):!1}var tH=xs[Hw][Mb].toString(),MR=new WeakMap;function o3(n){if(!n||!wx(n))return!1;const e=ud(n);if(e===null||e===xs[Hw])return!0;const t=xs.hasOwnProperty.call(e,Mb)&&e[Mb];if(t===Object)return!0;if(!Lu(t))return!1;let i=MR.get(t);return i===void 0&&(i=Function.toString.call(t),MR.set(t,i)),i===tH}function Ww(n,e,t=!0){gm(n)===0?(t?Reflect.ownKeys(n):xs.keys(n)).forEach(s=>{e(s,n[s],n)}):n.forEach((i,s)=>e(s,i,n))}function gm(n){const e=n[Li];return e?e.type_:$w(n)?1:Gw(n)?2:Yw(n)?3:0}var BR=(n,e,t=gm(n))=>t===2?n.has(e):xs[Hw].hasOwnProperty.call(n,e),E1=(n,e,t=gm(n))=>t===2?n.get(e):n[e],Nb=(n,e,t,i=gm(n))=>{i===2?n.set(e,t):i===3?n.add(t):n[e]=t};function nH(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var $w=Array.isArray,Gw=n=>n instanceof Map,Yw=n=>n instanceof Set,wx=n=>typeof n=="object",Lu=n=>typeof n=="function",UA=n=>typeof n=="boolean";function iH(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var Ho=n=>n.copy_||n.base_,vx=n=>n.modified_?n.copy_:n.base_;function S1(n,e){if(Gw(n))return new Map(n);if(Yw(n))return new Set(n);if($w(n))return Array[Hw].slice.call(n);const t=o3(n);if(e===!0||e==="class_only"&&!t){const i=xs.getOwnPropertyDescriptors(n);delete i[Li];let s=Reflect.ownKeys(i);for(let r=0;r<s.length;r++){const o=s[r],a=i[o];a[ob]===!1&&(a[ob]=!0,a[k1]=!0),(a.get||a.set)&&(i[o]={[k1]:!0,[ob]:!0,[Bb]:a[Bb],[Ih]:n[o]})}return xs.create(ud(n),i)}else{const i=ud(n);if(i!==null&&t)return{...n};const s=xs.create(i);return xs.assign(s,n)}}function yx(n,e=!1){return Kw(n)||sa(n)||!Ar(n)||(gm(n)>1&&xs.defineProperties(n,{set:fp,add:fp,clear:fp,delete:fp}),xs.freeze(n),e&&Ww(n,(t,i)=>{yx(i,!0)},!1)),n}function sH(){hr(2)}var fp={[Ih]:sH};function Kw(n){return n===null||!wx(n)?!0:xs.isFrozen(n)}var Vb="MapSet",T1="Patches",NR="ArrayMethods",a3={};function sc(n){const e=a3[n];return e||hr(0,n),e}var VR=n=>!!a3[n],Rh,l3=()=>Rh,rH=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:VR(Vb)?sc(Vb):void 0,arrayMethodsPlugin_:VR(NR)?sc(NR):void 0});function LR(n,e){e&&(n.patchPlugin_=sc(T1),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function I1(n){R1(n),n.drafts_.forEach(oH),n.drafts_=null}function R1(n){n===Rh&&(Rh=n.parent_)}var FR=n=>Rh=rH(Rh,n);function oH(n){const e=n[Li];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function zR(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[Li].modified_&&(I1(e),hr(4)),Ar(n)&&(n=jR(e,n));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(t[Li].base_,n,e)}else n=jR(e,t);return aH(e,n,!0),I1(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==r3?n:void 0}function jR(n,e){if(Kw(e))return e;const t=e[Li];if(!t)return Lb(e,n.handledSet_,n);if(!qw(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:i}=t;if(i)for(;i.length>0;)i.pop()(n);d3(t,n)}return t.copy_}function aH(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&yx(e,t)}function c3(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var qw=(n,e)=>n.scope_===e,lH=[];function u3(n,e,t,i){const s=Ho(n),r=n.type_;if(i!==void 0&&E1(s,i,r)===e){Nb(s,i,t,r);return}if(!n.draftLocations_){const a=n.draftLocations_=new Map;Ww(s,(c,d)=>{if(sa(d)){const h=a.get(d)||[];h.push(c),a.set(d,h)}})}const o=n.draftLocations_.get(e)??lH;for(const a of o)Nb(s,a,t,r)}function cH(n,e,t){n.callbacks_.push(function(s){const r=e;if(!r||!qw(r,s))return;s.mapSetPlugin_?.fixSetContents(r);const o=vx(r);u3(n,r.draft_??r,o,t),d3(r,s)})}function d3(n,e){if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(n.assigned_?.size??0)>0)){const{patchPlugin_:i}=e;if(i){const s=i.getPath(n);s&&i.generatePatches_(n,s,e)}c3(n)}}function uH(n,e,t){const{scope_:i}=n;if(sa(t)){const s=t[Li];qw(s,i)&&s.callbacks_.push(function(){ab(n);const o=vx(s);u3(n,t,o,e)})}else Ar(t)&&n.callbacks_.push(function(){const r=Ho(n);n.type_===3?r.has(t)&&Lb(t,i.handledSet_,i):E1(r,e,n.type_)===t&&i.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&Lb(E1(n.copy_,e,n.type_),i.handledSet_,i)})}function Lb(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||sa(n)||e.has(n)||!Ar(n)||Kw(n)||(e.add(n),Ww(n,(i,s)=>{if(sa(s)){const r=s[Li];if(qw(r,t)){const o=vx(r);Nb(n,i,o,n.type_),c3(r)}}else Ar(s)&&Lb(s,e,t)})),n}function dH(n,e){const t=$w(n),i={type_:t?1:0,scope_:e?e.scope_:l3(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=i,r=Fb;t&&(s=[i],r=Ph);const{revoke:o,proxy:a}=Proxy.revocable(s,r);return i.draft_=a,i.revoke_=o,[a,i]}var Fb={get(n,e){if(e===Li)return n;let t=n.scope_.arrayMethodsPlugin_;const i=n.type_===1&&typeof e=="string";if(i&&t?.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const s=Ho(n);if(!BR(s,e,n.type_))return fH(n,s,e);const r=s[e];if(n.finalized_||!Ar(r)||i&&n.operationMethod&&t?.isMutatingArrayMethod(n.operationMethod)&&iH(e))return r;if(r===HA(n.base_,e)){ab(n);const o=n.type_===1?+e:e,a=O1(n.scope_,r,n,o);return n.copy_[o]=a}return r},has(n,e){return e in Ho(n)},ownKeys(n){return Reflect.ownKeys(Ho(n))},set(n,e,t){const i=f3(Ho(n),e);if(i?.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const s=HA(Ho(n),e),r=s?.[Li];if(r&&r.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(nH(t,s)&&(t!==void 0||BR(n.base_,e,n.type_)))return!0;ab(n),P1(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),uH(n,e,t)),!0},deleteProperty(n,e){return ab(n),HA(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),P1(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Ho(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{[ob]:!0,[k1]:n.type_!==1||e!=="length",[Bb]:i[Bb],[Ih]:t[e]}},defineProperty(){hr(11)},getPrototypeOf(n){return ud(n.base_)},setPrototypeOf(){hr(12)}},Ph={};for(let n in Fb){let e=Fb[n];Ph[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}Ph.deleteProperty=function(n,e){return Ph.set.call(this,n,e,void 0)};Ph.set=function(n,e,t){return Fb.set.call(this,n[0],e,t,n[0])};function HA(n,e){const t=n[Li];return(t?Ho(t):n)[e]}function fH(n,e,t){const i=f3(e,t);return i?Ih in i?i[Ih]:i.get?.call(n.draft_):void 0}function f3(n,e){if(!(e in n))return;let t=ud(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=ud(t)}}function P1(n){n.modified_||(n.modified_=!0,n.parent_&&P1(n.parent_))}function ab(n){n.copy_||(n.assigned_=new Map,n.copy_=S1(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var hH=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,i)=>{if(Lu(e)&&!Lu(t)){const r=t;t=e;const o=this;return function(c=r,...d){return o.produce(c,h=>t.call(this,h,...d))}}Lu(t)||hr(6),i!==void 0&&!Lu(i)&&hr(7);let s;if(Ar(e)){const r=FR(this),o=O1(r,e,void 0);let a=!0;try{s=t(o),a=!1}finally{a?I1(r):R1(r)}return LR(r,i),zR(s,r)}else if(!e||!wx(e)){if(s=t(e),s===void 0&&(s=e),s===r3&&(s=void 0),this.autoFreeze_&&yx(s,!0),i){const r=[],o=[];sc(T1).generateReplacementPatches_(e,s,{patches_:r,inversePatches_:o}),i(r,o)}return s}else hr(1,e)},this.produceWithPatches=(e,t)=>{if(Lu(e))return(o,...a)=>this.produceWithPatches(o,c=>e(c,...a));let i,s;return[this.produce(e,t,(o,a)=>{i=o,s=a}),i,s]},UA(n?.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),UA(n?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),UA(n?.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){Ar(n)||hr(8),sa(n)&&(n=mH(n));const e=FR(this),t=O1(e,n,void 0);return t[Li].isManual_=!0,R1(e),t}finishDraft(n,e){const t=n&&n[Li];(!t||!t.isManual_)&&hr(9);const{scope_:i}=t;return LR(i,e),zR(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const i=sc(T1).applyPatches_;return sa(n)?i(n,e):this.produce(n,s=>i(s,e))}};function O1(n,e,t,i){const[s,r]=Gw(e)?sc(Vb).proxyMap_(e,t):Yw(e)?sc(Vb).proxySet_(e,t):dH(e,t);return(t?.scope_??l3()).drafts_.push(s),r.callbacks_=t?.callbacks_??[],r.key_=i,t&&i!==void 0?cH(t,r,i):r.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(r);const{patchPlugin_:d}=c;r.modified_&&d&&d.generatePatches_(r,[],c)}),s}function mH(n){return sa(n)||hr(10,n),h3(n)}function h3(n){if(!Ar(n)||Kw(n))return n;const e=n[Li];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=S1(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=S1(n,!0);return Ww(t,(s,r)=>{Nb(t,s,h3(r))},i),e&&(e.finalized_=!1),t}var gH=new hH,m3=gH.produce;function g3(n){return({dispatch:t,getState:i})=>s=>r=>typeof r=="function"?r(t,i,n):s(r)}var pH=g3(),bH=g3,wH=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Db:Db.apply(null,arguments)};function UR(n,e){function t(...i){if(e){let s=e(...i);if(!s)throw new Error(Qo(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>eH(i)&&i.type===n,t}var p3=class ih extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,ih.prototype)}static get[Symbol.species](){return ih}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new ih(...e[0].concat(this)):new ih(...e.concat(this))}};function HR(n){return Ar(n)?m3(n,()=>{}):n}function hp(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function vH(n){return typeof n=="boolean"}var yH=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:s=!0,actionCreatorCheck:r=!0}=e??{};let o=new p3;return t&&(vH(t)?o.push(pH):o.push(bH(t.extraArgument))),o},AH="RTK_autoBatch",WR=n=>e=>{setTimeout(e,n)},_H=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let s=!0,r=!1,o=!1;const a=new Set,c=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:WR(10):n.type==="callback"?n.queueNotification:WR(n.timeout),d=()=>{o=!1,r&&(r=!1,a.forEach(h=>h()))};return Object.assign({},i,{subscribe(h){const m=()=>s&&h(),p=i.subscribe(m);return a.add(h),()=>{p(),a.delete(h)}},dispatch(h){try{return s=!h?.meta?.[AH],r=!s,r&&(o||(o=!0,c(d))),i.dispatch(h)}finally{s=!0}}})},CH=n=>function(t){const{autoBatch:i=!0}=t??{};let s=new p3(n);return i&&s.push(_H(typeof i=="object"?i:void 0)),s};function xH(n){const e=yH(),{reducer:t=void 0,middleware:i,devTools:s=!0,preloadedState:r=void 0,enhancers:o=void 0}=n||{};let a;if(typeof t=="function")a=t;else if(px(t))a=s3(t);else throw new Error(Qo(1));let c;typeof i=="function"?c=i(e):c=e();let d=Db;s&&(d=wH({trace:!1,...typeof s=="object"&&s}));const h=XU(...c),m=CH(h);let p=typeof o=="function"?o(m):m();const w=d(...p);return bx(a,r,w)}function b3(n){const e={},t=[];let i;const s={addCase(r,o){const a=typeof r=="string"?r:r.type;if(!a)throw new Error(Qo(28));if(a in e)throw new Error(Qo(29));return e[a]=o,s},addAsyncThunk(r,o){return o.pending&&(e[r.pending.type]=o.pending),o.rejected&&(e[r.rejected.type]=o.rejected),o.fulfilled&&(e[r.fulfilled.type]=o.fulfilled),o.settled&&t.push({matcher:r.settled,reducer:o.settled}),s},addMatcher(r,o){return t.push({matcher:r,reducer:o}),s},addDefaultCase(r){return i=r,s}};return n(s),[e,t,i]}function kH(n){return typeof n=="function"}function EH(n,e){let[t,i,s]=b3(e),r;if(kH(n))r=()=>HR(n());else{const a=HR(n);r=()=>a}function o(a=r(),c){let d=[t[c.type],...i.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[s]),d.reduce((h,m)=>{if(m)if(sa(h)){const w=m(h,c);return w===void 0?h:w}else{if(Ar(h))return m3(h,p=>m(p,c));{const p=m(h,c);if(p===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return h},a)}return o.getInitialState=r,o}var SH=Symbol.for("rtk-slice-createasyncthunk");function TH(n,e){return`${n}/${e}`}function IH({creators:n}={}){const e=n?.asyncThunk?.[SH];return function(i){const{name:s,reducerPath:r=s}=i;if(!s)throw new Error(Qo(11));const o=(typeof i.reducers=="function"?i.reducers(OH()):i.reducers)||{},a=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(I,R){const O=typeof I=="string"?I:I.type;if(!O)throw new Error(Qo(12));if(O in c.sliceCaseReducersByType)throw new Error(Qo(13));return c.sliceCaseReducersByType[O]=R,d},addMatcher(I,R){return c.sliceMatchers.push({matcher:I,reducer:R}),d},exposeAction(I,R){return c.actionCreators[I]=R,d},exposeCaseReducer(I,R){return c.sliceCaseReducersByName[I]=R,d}};a.forEach(I=>{const R=o[I],O={reducerName:I,type:TH(s,I),createNotation:typeof i.reducers=="function"};MH(R)?NH(O,R,d,e):DH(O,R,d)});function h(){const[I={},R=[],O=void 0]=typeof i.extraReducers=="function"?b3(i.extraReducers):[i.extraReducers],U={...I,...c.sliceCaseReducersByType};return EH(i.initialState,P=>{for(let V in U)P.addCase(V,U[V]);for(let V of c.sliceMatchers)P.addMatcher(V.matcher,V.reducer);for(let V of R)P.addMatcher(V.matcher,V.reducer);O&&P.addDefaultCase(O)})}const m=I=>I,p=new Map,w=new WeakMap;let A;function C(I,R){return A||(A=h()),A(I,R)}function k(){return A||(A=h()),A.getInitialState()}function E(I,R=!1){function O(P){let V=P[I];return typeof V>"u"&&R&&(V=hp(w,O,k)),V}function U(P=m){const V=hp(p,R,()=>new WeakMap);return hp(V,P,()=>{const H={};for(const[ie,ke]of Object.entries(i.selectors??{}))H[ie]=RH(ke,P,()=>hp(w,P,k),R);return H})}return{reducerPath:I,getSelectors:U,get selectors(){return U(O)},selectSlice:O}}const S={name:s,reducer:C,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:k,...E(r),injectInto(I,{reducerPath:R,...O}={}){const U=R??r;return I.inject({reducerPath:U,reducer:C},O),{...S,...E(U,!0)}}};return S}}function RH(n,e,t,i){function s(r,...o){let a=e(r);return typeof a>"u"&&i&&(a=t()),n(a,...o)}return s.unwrapped=n,s}var PH=IH();function OH(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function DH({type:n,reducerName:e,createNotation:t},i,s){let r,o;if("reducer"in i){if(t&&!BH(i))throw new Error(Qo(17));r=i.reducer,o=i.prepare}else r=i;s.addCase(n,r).exposeCaseReducer(e,r).exposeAction(e,o?UR(n,o):UR(n))}function MH(n){return n._reducerDefinitionType==="asyncThunk"}function BH(n){return n._reducerDefinitionType==="reducerWithPrepare"}function NH({type:n,reducerName:e},t,i,s){if(!s)throw new Error(Qo(18));const{payloadCreator:r,fulfilled:o,pending:a,rejected:c,settled:d,options:h}=t,m=s(n,r,h);i.exposeAction(e,m),o&&i.addCase(m.fulfilled,o),a&&i.addCase(m.pending,a),c&&i.addCase(m.rejected,c),d&&i.addMatcher(m.settled,d),i.exposeCaseReducer(e,{fulfilled:o||mp,pending:a||mp,rejected:c||mp,settled:d||mp})}function mp(){}function Qo(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const VH={isLoggedIn:!1,user:null},w3=PH({name:"user",initialState:VH,reducers:{setUser:(n,e)=>{n.isLoggedIn=!0,n.user=e.payload},removeUser:n=>{n.isLoggedIn=!1,n.user=null}}}),{setUser:v3,removeUser:LH}=w3.actions,FH=w3.reducer;function lb(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lb=function(t){return typeof t}:lb=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lb(n)}function WA(){}var zH={getItem:WA,setItem:WA,removeItem:WA};function jH(n){if((typeof self>"u"?"undefined":lb(self))!=="object"||!(n in self))return!1;try{var e=self[n],t="redux-persist ".concat(n," test");e.setItem(t,"test"),e.getItem(t),e.removeItem(t)}catch{return!1}return!0}function UH(n){var e="".concat(n,"Storage");return jH(e)?self[e]:zH}function HH(n){var e=UH(n);return{getItem:function(i){return new Promise(function(s,r){s(e.getItem(i))})},setItem:function(i,s){return new Promise(function(r,o){r(e.setItem(i,s))})},removeItem:function(i){return new Promise(function(s,r){s(e.removeItem(i))})}}}const WH=HH("session");var Ax="persist:",_x="persist/FLUSH",Qw="persist/REHYDRATE",Cx="persist/PAUSE",xx="persist/PERSIST",kx="persist/PURGE",Ex="persist/REGISTER",$H=-1;function cb(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cb=function(t){return typeof t}:cb=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cb(n)}function $R(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function GH(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$R(t,!0).forEach(function(i){YH(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):$R(t).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function YH(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function KH(n,e,t,i){i.debug;var s=GH({},t);return n&&cb(n)==="object"&&Object.keys(n).forEach(function(r){r!=="_persist"&&e[r]===t[r]&&(s[r]=n[r])}),s}function qH(n){var e=n.blacklist||null,t=n.whitelist||null,i=n.transforms||[],s=n.throttle||0,r="".concat(n.keyPrefix!==void 0?n.keyPrefix:Ax).concat(n.key),o=n.storage,a;n.serialize===!1?a=function(O){return O}:typeof n.serialize=="function"?a=n.serialize:a=QH;var c=n.writeFailHandler||null,d={},h={},m=[],p=null,w=null,A=function(O){Object.keys(O).forEach(function(U){E(U)&&d[U]!==O[U]&&m.indexOf(U)===-1&&m.push(U)}),Object.keys(d).forEach(function(U){O[U]===void 0&&E(U)&&m.indexOf(U)===-1&&d[U]!==void 0&&m.push(U)}),p===null&&(p=setInterval(C,s)),d=O};function C(){if(m.length===0){p&&clearInterval(p),p=null;return}var R=m.shift(),O=i.reduce(function(U,P){return P.in(U,R,d)},d[R]);if(O!==void 0)try{h[R]=a(O)}catch(U){console.error("redux-persist/createPersistoid: error serializing state",U)}else delete h[R];m.length===0&&k()}function k(){Object.keys(h).forEach(function(R){d[R]===void 0&&delete h[R]}),w=o.setItem(r,a(h)).catch(S)}function E(R){return!(t&&t.indexOf(R)===-1&&R!=="_persist"||e&&e.indexOf(R)!==-1)}function S(R){c&&c(R)}var I=function(){for(;m.length!==0;)C();return w||Promise.resolve()};return{update:A,flush:I}}function QH(n){return JSON.stringify(n)}function ZH(n){var e=n.transforms||[],t="".concat(n.keyPrefix!==void 0?n.keyPrefix:Ax).concat(n.key),i=n.storage;n.debug;var s;return n.deserialize===!1?s=function(o){return o}:typeof n.deserialize=="function"?s=n.deserialize:s=JH,i.getItem(t).then(function(r){if(r)try{var o={},a=s(r);return Object.keys(a).forEach(function(c){o[c]=e.reduceRight(function(d,h){return h.out(d,c,a)},s(a[c]))}),o}catch(c){throw c}else return})}function JH(n){return JSON.parse(n)}function XH(n){var e=n.storage,t="".concat(n.keyPrefix!==void 0?n.keyPrefix:Ax).concat(n.key);return e.removeItem(t,eW)}function eW(n){}function GR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function Mo(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GR(t,!0).forEach(function(i){tW(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):GR(t).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function tW(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function nW(n,e){if(n==null)return{};var t=iW(n,e),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function iW(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var sW=5e3;function rW(n,e){var t=n.version!==void 0?n.version:$H;n.debug;var i=n.stateReconciler===void 0?KH:n.stateReconciler,s=n.getStoredState||ZH,r=n.timeout!==void 0?n.timeout:sW,o=null,a=!1,c=!0,d=function(m){return m._persist.rehydrated&&o&&!c&&o.update(m),m};return function(h,m){var p=h||{},w=p._persist,A=nW(p,["_persist"]),C=A;if(m.type===xx){var k=!1,E=function(V,H){k||(m.rehydrate(n.key,V,H),k=!0)};if(r&&setTimeout(function(){!k&&E(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(n.key,'"')))},r),c=!1,o||(o=qH(n)),w)return Mo({},e(C,m),{_persist:w});if(typeof m.rehydrate!="function"||typeof m.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return m.register(n.key),s(n).then(function(P){var V=n.migrate||function(H,ie){return Promise.resolve(H)};V(P,t).then(function(H){E(H)},function(H){E(void 0,H)})},function(P){E(void 0,P)}),Mo({},e(C,m),{_persist:{version:t,rehydrated:!1}})}else{if(m.type===kx)return a=!0,m.result(XH(n)),Mo({},e(C,m),{_persist:w});if(m.type===_x)return m.result(o&&o.flush()),Mo({},e(C,m),{_persist:w});if(m.type===Cx)c=!0;else if(m.type===Qw){if(a)return Mo({},C,{_persist:Mo({},w,{rehydrated:!0})});if(m.key===n.key){var S=e(C,m),I=m.payload,R=i!==!1&&I!==void 0?i(I,h,S,n):S,O=Mo({},R,{_persist:Mo({},w,{rehydrated:!0})});return d(O)}}}if(!w)return e(h,m);var U=e(C,m);return U===C?h:d(Mo({},U,{_persist:w}))}}function YR(n){return lW(n)||aW(n)||oW()}function oW(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function aW(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}function lW(n){if(Array.isArray(n)){for(var e=0,t=new Array(n.length);e<n.length;e++)t[e]=n[e];return t}}function KR(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function D1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KR(t,!0).forEach(function(i){cW(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):KR(t).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function cW(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var y3={registry:[],bootstrapped:!1},uW=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y3,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ex:return D1({},e,{registry:[].concat(YR(e.registry),[t.key])});case Qw:var i=e.registry.indexOf(t.key),s=YR(e.registry);return s.splice(i,1),D1({},e,{registry:s,bootstrapped:s.length===0});default:return e}};function dW(n,e,t){var i=bx(uW,y3,void 0),s=function(c){i.dispatch({type:Ex,key:c})},r=function(c,d,h){var m={type:Qw,payload:d,err:h,key:c};n.dispatch(m),i.dispatch(m)},o=D1({},i,{purge:function(){var c=[];return n.dispatch({type:kx,result:function(h){c.push(h)}}),Promise.all(c)},flush:function(){var c=[];return n.dispatch({type:_x,result:function(h){c.push(h)}}),Promise.all(c)},pause:function(){n.dispatch({type:Cx})},persist:function(){n.dispatch({type:xx,register:s,rehydrate:r})}});return o.persist(),o}const fW=s3({user:FH}),hW={key:"root",storage:WH,version:1},mW=rW(hW,fW),A3=xH({reducer:mW,middleware:n=>n({serializableCheck:{ignoredActions:[_x,Qw,Cx,xx,kx,Ex]}})}),gW=dW(A3);var qR="popstate";function pW(n={}){function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return M1("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:Oh(s)}return wW(e,t,null,n)}function on(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ss(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bW(){return Math.random().toString(36).substring(2,10)}function QR(n,e){return{usr:n.state,key:n.key,idx:e}}function M1(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Td(e):e,state:t,key:e&&e.key||i||bW()}}function Oh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Td(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function wW(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a="POP",c=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function m(){a="POP";let k=h(),E=k==null?null:k-d;d=k,c&&c({action:a,location:C.location,delta:E})}function p(k,E){a="PUSH";let S=M1(C.location,k,E);d=h()+1;let I=QR(S,d),R=C.createHref(S);try{o.pushState(I,"",R)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(R)}r&&c&&c({action:a,location:C.location,delta:1})}function w(k,E){a="REPLACE";let S=M1(C.location,k,E);d=h();let I=QR(S,d),R=C.createHref(S);o.replaceState(I,"",R),r&&c&&c({action:a,location:C.location,delta:0})}function A(k){return vW(k)}let C={get action(){return a},get location(){return n(s,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(qR,m),c=k,()=>{s.removeEventListener(qR,m),c=null}},createHref(k){return e(s,k)},createURL:A,encodeLocation(k){let E=A(k);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:w,go(k){return o.go(k)}};return C}function vW(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),on(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Oh(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function _3(n,e,t="/"){return yW(n,e,t,!1)}function yW(n,e,t,i){let s=typeof e=="string"?Td(e):e,r=ra(s.pathname||"/",t);if(r==null)return null;let o=C3(n);AW(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let d=OW(r);a=RW(o[c],d,i)}return a}function C3(n,e=[],t=[],i="",s=!1){let r=(o,a,c=s,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(i)&&c)return;on(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length)}let m=Zo([i,h.relativePath]),p=t.concat(h);o.children&&o.children.length>0&&(on(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),C3(o.children,e,p,m,c)),!(o.path==null&&!o.index)&&e.push({path:m,score:TW(m,o.index),routesMeta:p})};return n.forEach((o,a)=>{if(o.path===""||!o.path?.includes("?"))r(o,a);else for(let c of x3(o.path))r(o,a,!0,c)}),e}function x3(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=x3(i.join("/")),a=[];return a.push(...o.map(c=>c===""?r:[r,c].join("/"))),s&&a.push(...o),a.map(c=>n.startsWith("/")&&c===""?"/":c)}function AW(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:IW(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var _W=/^:[\w-]+$/,CW=3,xW=2,kW=1,EW=10,SW=-2,ZR=n=>n==="*";function TW(n,e){let t=n.split("/"),i=t.length;return t.some(ZR)&&(i+=SW),e&&(i+=xW),t.filter(s=>!ZR(s)).reduce((s,r)=>s+(_W.test(r)?CW:r===""?kW:EW),i)}function IW(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function RW(n,e,t=!1){let{routesMeta:i}=n,s={},r="/",o=[];for(let a=0;a<i.length;++a){let c=i[a],d=a===i.length-1,h=r==="/"?e:e.slice(r.length)||"/",m=zb({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),p=c.route;if(!m&&d&&t&&!i[i.length-1].route.index&&(m=zb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Zo([r,m.pathname]),pathnameBase:NW(Zo([r,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(r=Zo([r,m.pathnameBase]))}return o}function zb(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=PW(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((d,{paramName:h,isOptional:m},p)=>{if(h==="*"){let A=a[p]||"";o=r.slice(0,r.length-A.length).replace(/(.)\/+$/,"$1")}const w=a[p];return m&&!w?d[h]=void 0:d[h]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:r,pathnameBase:o,pattern:n}}function PW(n,e=!1,t=!0){Ss(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(i.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function OW(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ss(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ra(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var k3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DW=n=>k3.test(n);function MW(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Td(n):n,r;if(t)if(DW(t))r=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),Ss(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${t}`)}t.startsWith("/")?r=JR(t.substring(1),"/"):r=JR(t,e)}else r=e;return{pathname:r,search:VW(i),hash:LW(s)}}function JR(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function $A(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BW(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Sx(n){let e=BW(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Tx(n,e,t,i=!1){let s;typeof n=="string"?s=Td(n):(s={...n},on(!s.pathname||!s.pathname.includes("?"),$A("?","pathname","search",s)),on(!s.pathname||!s.pathname.includes("#"),$A("#","pathname","hash",s)),on(!s.search||!s.search.includes("#"),$A("#","search","hash",s)));let r=n===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=t;else{let m=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}a=m>=0?e[m]:"/"}let c=MW(s,a),d=o&&o!=="/"&&o.endsWith("/"),h=(r||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var Zo=n=>n.join("/").replace(/\/\/+/g,"/"),NW=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),VW=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,LW=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,FW=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function zW(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function jW(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var E3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function S3(n,e){let t=n;if(typeof t!="string"||!k3.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,s=!1;if(E3)try{let r=new URL(window.location.href),o=t.startsWith("//")?new URL(r.protocol+t):new URL(t),a=ra(o.pathname,e);o.origin===r.origin&&a!=null?t=a+o.search+o.hash:s=!0}catch{Ss(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var T3=["POST","PUT","PATCH","DELETE"];new Set(T3);var UW=["GET",...T3];new Set(UW);var Id=_.createContext(null);Id.displayName="DataRouter";var Zw=_.createContext(null);Zw.displayName="DataRouterState";var HW=_.createContext(!1),I3=_.createContext({isTransitioning:!1});I3.displayName="ViewTransition";var WW=_.createContext(new Map);WW.displayName="Fetchers";var $W=_.createContext(null);$W.displayName="Await";var Os=_.createContext(null);Os.displayName="Navigation";var pm=_.createContext(null);pm.displayName="Location";var Js=_.createContext({outlet:null,matches:[],isDataRoute:!1});Js.displayName="Route";var Ix=_.createContext(null);Ix.displayName="RouteError";var R3="REACT_ROUTER_ERROR",GW="REDIRECT",YW="ROUTE_ERROR_RESPONSE";function KW(n){if(n.startsWith(`${R3}:${GW}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function qW(n){if(n.startsWith(`${R3}:${YW}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new FW(e.status,e.statusText,e.data)}catch{}}function QW(n,{relative:e}={}){on(Rd(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=_.useContext(Os),{hash:s,pathname:r,search:o}=bm(n,{relative:e}),a=r;return t!=="/"&&(a=r==="/"?t:Zo([t,r])),i.createHref({pathname:a,search:o,hash:s})}function Rd(){return _.useContext(pm)!=null}function ha(){return on(Rd(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(pm).location}var P3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function O3(n){_.useContext(Os).static||_.useLayoutEffect(n)}function ma(){let{isDataRoute:n}=_.useContext(Js);return n?d$():ZW()}function ZW(){on(Rd(),"useNavigate() may be used only in the context of a <Router> component.");let n=_.useContext(Id),{basename:e,navigator:t}=_.useContext(Os),{matches:i}=_.useContext(Js),{pathname:s}=ha(),r=JSON.stringify(Sx(i)),o=_.useRef(!1);return O3(()=>{o.current=!0}),_.useCallback((c,d={})=>{if(Ss(o.current,P3),!o.current)return;if(typeof c=="number"){t.go(c);return}let h=Tx(c,JSON.parse(r),s,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Zo([e,h.pathname])),(d.replace?t.replace:t.push)(h,d.state,d)},[e,t,r,s,n])}var JW=_.createContext(null);function XW(n){let e=_.useContext(Js).outlet;return _.useMemo(()=>e&&_.createElement(JW.Provider,{value:n},e),[e,n])}function Jw(){let{matches:n}=_.useContext(Js),e=n[n.length-1];return e?e.params:{}}function bm(n,{relative:e}={}){let{matches:t}=_.useContext(Js),{pathname:i}=ha(),s=JSON.stringify(Sx(t));return _.useMemo(()=>Tx(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function e$(n,e){return D3(n,e)}function D3(n,e,t,i,s){on(Rd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=_.useContext(Os),{matches:o}=_.useContext(Js),a=o[o.length-1],c=a?a.params:{},d=a?a.pathname:"/",h=a?a.pathnameBase:"/",m=a&&a.route;{let S=m&&m.path||"";B3(d,!m||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=ha(),w;if(e){let S=typeof e=="string"?Td(e):e;on(h==="/"||S.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${S.pathname}" was given in the \`location\` prop.`),w=S}else w=p;let A=w.pathname||"/",C=A;if(h!=="/"){let S=h.replace(/^\//,"").split("/");C="/"+A.replace(/^\//,"").split("/").slice(S.length).join("/")}let k=_3(n,{pathname:C});Ss(m||k!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Ss(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=r$(k&&k.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:Zo([h,r.encodeLocation?r.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?h:Zo([h,r.encodeLocation?r.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),o,t,i,s);return e&&E?_.createElement(pm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},E):E}function t$(){let n=u$(),e=zW(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},r={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:r},"ErrorBoundary")," or"," ",_.createElement("code",{style:r},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),t?_.createElement("pre",{style:s},t):null,o)}var n$=_.createElement(t$,null),M3=class extends _.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=qW(n.digest);t&&(n=t)}let e=n!==void 0?_.createElement(Js.Provider,{value:this.props.routeContext},_.createElement(Ix.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?_.createElement(i$,{error:n},e):e}};M3.contextType=HW;var GA=new WeakMap;function i$({children:n,error:e}){let{basename:t}=_.useContext(Os);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=KW(e.digest);if(i){let s=GA.get(e);if(s)throw s;let r=S3(i.location,t);if(E3&&!GA.get(e))if(r.isExternal||i.reloadDocument)window.location.href=r.absoluteURL||r.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(r.to,{replace:i.replace}));throw GA.set(e,o),o}return _.createElement("meta",{httpEquiv:"refresh",content:`0;url=${r.absoluteURL||r.to}`})}}return n}function s$({routeContext:n,match:e,children:t}){let i=_.useContext(Id);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(Js.Provider,{value:n},t)}function r$(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,o=t?.errors;if(o!=null){let h=r.findIndex(m=>m.route.id&&o?.[m.route.id]!==void 0);on(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,h+1))}let a=!1,c=-1;if(t)for(let h=0;h<r.length;h++){let m=r[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=h),m.route.id){let{loaderData:p,errors:w}=t,A=m.route.loader&&!p.hasOwnProperty(m.route.id)&&(!w||w[m.route.id]===void 0);if(m.route.lazy||A){a=!0,c>=0?r=r.slice(0,c+1):r=[r[0]];break}}}let d=t&&i?(h,m)=>{i(h,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:jW(t.matches),errorInfo:m})}:void 0;return r.reduceRight((h,m,p)=>{let w,A=!1,C=null,k=null;t&&(w=o&&m.route.id?o[m.route.id]:void 0,C=m.route.errorElement||n$,a&&(c<0&&p===0?(B3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,k=null):c===p&&(A=!0,k=m.route.hydrateFallbackElement||null)));let E=e.concat(r.slice(0,p+1)),S=()=>{let I;return w?I=C:A?I=k:m.route.Component?I=_.createElement(m.route.Component,null):m.route.element?I=m.route.element:I=h,_.createElement(s$,{match:m,routeContext:{outlet:h,matches:E,isDataRoute:t!=null},children:I})};return t&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?_.createElement(M3,{location:t.location,revalidation:t.revalidation,component:C,error:w,children:S(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:d}):S()},null)}function Rx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function o$(n){let e=_.useContext(Id);return on(e,Rx(n)),e}function a$(n){let e=_.useContext(Zw);return on(e,Rx(n)),e}function l$(n){let e=_.useContext(Js);return on(e,Rx(n)),e}function Px(n){let e=l$(n),t=e.matches[e.matches.length-1];return on(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function c$(){return Px("useRouteId")}function u$(){let n=_.useContext(Ix),e=a$("useRouteError"),t=Px("useRouteError");return n!==void 0?n:e.errors?.[t]}function d$(){let{router:n}=o$("useNavigate"),e=Px("useNavigate"),t=_.useRef(!1);return O3(()=>{t.current=!0}),_.useCallback(async(s,r={})=>{Ss(t.current,P3),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...r}))},[n,e])}var XR={};function B3(n,e,t){!e&&!XR[n]&&(XR[n]=!0,Ss(!1,t))}_.memo(f$);function f$({routes:n,future:e,state:t,onError:i}){return D3(n,void 0,t,i,e)}function N3({to:n,replace:e,state:t,relative:i}){on(Rd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=_.useContext(Os);Ss(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:r}=_.useContext(Js),{pathname:o}=ha(),a=ma(),c=Tx(n,Sx(r),o,i==="path"),d=JSON.stringify(c);return _.useEffect(()=>{a(JSON.parse(d),{replace:e,state:t,relative:i})},[a,d,i,e,t]),null}function Ox(n){return XW(n.context)}function Vn(n){on(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function h$({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:r=!1,unstable_useTransitions:o}){on(!Rd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),c=_.useMemo(()=>({basename:a,navigator:s,static:r,unstable_useTransitions:o,future:{}}),[a,s,r,o]);typeof t=="string"&&(t=Td(t));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:w="default"}=t,A=_.useMemo(()=>{let C=ra(d,a);return C==null?null:{location:{pathname:C,search:h,hash:m,state:p,key:w},navigationType:i}},[a,d,h,m,p,w,i]);return Ss(A!=null,`<Router basename="${a}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:_.createElement(Os.Provider,{value:c},_.createElement(pm.Provider,{children:e,value:A}))}function m$({children:n,location:e}){return e$(B1(n),e)}function B1(n,e=[]){let t=[];return _.Children.forEach(n,(i,s)=>{if(!_.isValidElement(i))return;let r=[...e,s];if(i.type===_.Fragment){t.push.apply(t,B1(i.props.children,r));return}on(i.type===Vn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),on(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=B1(i.props.children,r)),t.push(o)}),t}var ub="get",db="application/x-www-form-urlencoded";function Xw(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function g$(n){return Xw(n)&&n.tagName.toLowerCase()==="button"}function p$(n){return Xw(n)&&n.tagName.toLowerCase()==="form"}function b$(n){return Xw(n)&&n.tagName.toLowerCase()==="input"}function w$(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function v$(n,e){return n.button===0&&(!e||e==="_self")&&!w$(n)}function N1(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let i=n[t];return e.concat(Array.isArray(i)?i.map(s=>[t,s]):[[t,i]])},[]))}function y$(n,e){let t=N1(n);return e&&e.forEach((i,s)=>{t.has(s)||e.getAll(s).forEach(r=>{t.append(s,r)})}),t}var gp=null;function A$(){if(gp===null)try{new FormData(document.createElement("form"),0),gp=!1}catch{gp=!0}return gp}var _$=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function YA(n){return n!=null&&!_$.has(n)?(Ss(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${db}"`),null):n}function C$(n,e){let t,i,s,r,o;if(p$(n)){let a=n.getAttribute("action");i=a?ra(a,e):null,t=n.getAttribute("method")||ub,s=YA(n.getAttribute("enctype"))||db,r=new FormData(n)}else if(g$(n)||b$(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||a.getAttribute("action");if(i=c?ra(c,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||ub,s=YA(n.getAttribute("formenctype"))||YA(a.getAttribute("enctype"))||db,r=new FormData(a,n),!A$()){let{name:d,type:h,value:m}=n;if(h==="image"){let p=d?`${d}.`:"";r.append(`${p}x`,"0"),r.append(`${p}y`,"0")}else d&&r.append(d,m)}}else{if(Xw(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ub,i=null,s=db,o=n}return r&&s==="text/plain"&&(o=r,r=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:r,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Dx(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function x$(n,e,t,i){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${i}`:s.pathname=`${s.pathname}.${i}`:s.pathname==="/"?s.pathname=`_root.${i}`:e&&ra(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function k$(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function E$(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function S$(n,e,t){let i=await Promise.all(n.map(async s=>{let r=e.routes[s.route.id];if(r){let o=await k$(r,t);return o.links?o.links():[]}return[]}));return P$(i.flat(1).filter(E$).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function e5(n,e,t,i,s,r){let o=(c,d)=>t[d]?c.route.id!==t[d].route.id:!0,a=(c,d)=>t[d].pathname!==c.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==c.params["*"];return r==="assets"?e.filter((c,d)=>o(c,d)||a(c,d)):r==="data"?e.filter((c,d)=>{let h=i.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,d)||a(c,d))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function T$(n,e,{includeHydrateFallback:t}={}){return I$(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1))}function I$(n){return[...new Set(n)]}function R$(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function P$(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let r=JSON.stringify(R$(s));return t.has(r)||(t.add(r),i.push({key:r,link:s})),i},[])}function V3(){let n=_.useContext(Id);return Dx(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function O$(){let n=_.useContext(Zw);return Dx(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Mx=_.createContext(void 0);Mx.displayName="FrameworkContext";function L3(){let n=_.useContext(Mx);return Dx(n,"You must render this element inside a <HydratedRouter> element"),n}function D$(n,e){let t=_.useContext(Mx),[i,s]=_.useState(!1),[r,o]=_.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:m}=e,p=_.useRef(null);_.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let C=E=>{E.forEach(S=>{o(S.isIntersecting)})},k=new IntersectionObserver(C,{threshold:.5});return p.current&&k.observe(p.current),()=>{k.disconnect()}}},[n]),_.useEffect(()=>{if(i){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[i]);let w=()=>{s(!0)},A=()=>{s(!1),o(!1)};return t?n!=="intent"?[r,p,{}]:[r,p,{onFocus:Ff(a,w),onBlur:Ff(c,A),onMouseEnter:Ff(d,w),onMouseLeave:Ff(h,A),onTouchStart:Ff(m,w)}]:[!1,p,{}]}function Ff(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function M$({page:n,...e}){let{router:t}=V3(),i=_.useMemo(()=>_3(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?_.createElement(N$,{page:n,matches:i,...e}):null}function B$(n){let{manifest:e,routeModules:t}=L3(),[i,s]=_.useState([]);return _.useEffect(()=>{let r=!1;return S$(n,e,t).then(o=>{r||s(o)}),()=>{r=!0}},[n,e,t]),i}function N$({page:n,matches:e,...t}){let i=ha(),{future:s,manifest:r,routeModules:o}=L3(),{basename:a}=V3(),{loaderData:c,matches:d}=O$(),h=_.useMemo(()=>e5(n,e,d,r,i,"data"),[n,e,d,r,i]),m=_.useMemo(()=>e5(n,e,d,r,i,"assets"),[n,e,d,r,i]),p=_.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let C=new Set,k=!1;if(e.forEach(S=>{let I=r.routes[S.route.id];!I||!I.hasLoader||(!h.some(R=>R.route.id===S.route.id)&&S.route.id in c&&o[S.route.id]?.shouldRevalidate||I.hasClientLoader?k=!0:C.add(S.route.id))}),C.size===0)return[];let E=x$(n,a,s.unstable_trailingSlashAwareDataRequests,"data");return k&&C.size>0&&E.searchParams.set("_routes",e.filter(S=>C.has(S.route.id)).map(S=>S.route.id).join(",")),[E.pathname+E.search]},[a,s.unstable_trailingSlashAwareDataRequests,c,i,r,h,e,n,o]),w=_.useMemo(()=>T$(m,r),[m,r]),A=B$(m);return _.createElement(_.Fragment,null,p.map(C=>_.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),w.map(C=>_.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),A.map(({key:C,link:k})=>_.createElement("link",{key:C,nonce:t.nonce,...k})))}function V$(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var L$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{L$&&(window.__reactRouterVersion="7.12.0")}catch{}function F$({basename:n,children:e,unstable_useTransitions:t,window:i}){let s=_.useRef();s.current==null&&(s.current=pW({window:i,v5Compat:!0}));let r=s.current,[o,a]=_.useState({action:r.action,location:r.location}),c=_.useCallback(d=>{t===!1?a(d):_.startTransition(()=>a(d))},[t]);return _.useLayoutEffect(()=>r.listen(c),[r,c]),_.createElement(h$,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:r,unstable_useTransitions:t})}var F3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_n=_.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:r,replace:o,state:a,target:c,to:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:p,...w},A){let{basename:C,unstable_useTransitions:k}=_.useContext(Os),E=typeof d=="string"&&F3.test(d),S=S3(d,C);d=S.to;let I=QW(d,{relative:s}),[R,O,U]=D$(i,w),P=H$(d,{replace:o,state:a,target:c,preventScrollReset:h,relative:s,viewTransition:m,unstable_defaultShouldRevalidate:p,unstable_useTransitions:k});function V(ie){e&&e(ie),ie.defaultPrevented||P(ie)}let H=_.createElement("a",{...w,...U,href:S.absoluteURL||I,onClick:S.isExternal||r?e:V,ref:V$(A,O),target:c,"data-discover":!E&&t==="render"?"true":void 0});return R&&!E?_.createElement(_.Fragment,null,H,_.createElement(M$,{page:I})):H});_n.displayName="Link";var z$=_.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:r,to:o,viewTransition:a,children:c,...d},h){let m=bm(o,{relative:d.relative}),p=ha(),w=_.useContext(Zw),{navigator:A,basename:C}=_.useContext(Os),k=w!=null&&q$(m)&&a===!0,E=A.encodeLocation?A.encodeLocation(m).pathname:m.pathname,S=p.pathname,I=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(S=S.toLowerCase(),I=I?I.toLowerCase():null,E=E.toLowerCase()),I&&C&&(I=ra(I,C)||I);const R=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let O=S===E||!s&&S.startsWith(E)&&S.charAt(R)==="/",U=I!=null&&(I===E||!s&&I.startsWith(E)&&I.charAt(E.length)==="/"),P={isActive:O,isPending:U,isTransitioning:k},V=O?e:void 0,H;typeof i=="function"?H=i(P):H=[i,O?"active":null,U?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let ie=typeof r=="function"?r(P):r;return _.createElement(_n,{...d,"aria-current":V,className:H,ref:h,style:ie,to:o,viewTransition:a},typeof c=="function"?c(P):c)});z$.displayName="NavLink";var j$=_.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:r,method:o=ub,action:a,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:p,...w},A)=>{let{unstable_useTransitions:C}=_.useContext(Os),k=Y$(),E=K$(a,{relative:d}),S=o.toLowerCase()==="get"?"get":"post",I=typeof a=="string"&&F3.test(a),R=O=>{if(c&&c(O),O.defaultPrevented)return;O.preventDefault();let U=O.nativeEvent.submitter,P=U?.getAttribute("formmethod")||o,V=()=>k(U||O.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:s,state:r,relative:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:p});C&&t!==!1?_.startTransition(()=>V()):V()};return _.createElement("form",{ref:A,method:S,action:E,onSubmit:i?c:R,...w,"data-discover":!I&&n==="render"?"true":void 0})});j$.displayName="Form";function U$(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function z3(n){let e=_.useContext(Id);return on(e,U$(n)),e}function H$(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:r,viewTransition:o,unstable_defaultShouldRevalidate:a,unstable_useTransitions:c}={}){let d=ma(),h=ha(),m=bm(n,{relative:r});return _.useCallback(p=>{if(v$(p,e)){p.preventDefault();let w=t!==void 0?t:Oh(h)===Oh(m),A=()=>d(n,{replace:w,state:i,preventScrollReset:s,relative:r,viewTransition:o,unstable_defaultShouldRevalidate:a});c?_.startTransition(()=>A()):A()}},[h,d,m,t,i,e,n,s,r,o,a,c])}function W$(n){Ss(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=_.useRef(N1(n)),t=_.useRef(!1),i=ha(),s=_.useMemo(()=>y$(i.search,t.current?null:e.current),[i.search]),r=ma(),o=_.useCallback((a,c)=>{const d=N1(typeof a=="function"?a(new URLSearchParams(s)):a);t.current=!0,r("?"+d,c)},[r,s]);return[s,o]}var $$=0,G$=()=>`__${String(++$$)}__`;function Y$(){let{router:n}=z3("useSubmit"),{basename:e}=_.useContext(Os),t=c$(),i=n.fetch,s=n.navigate;return _.useCallback(async(r,o={})=>{let{action:a,method:c,encType:d,formData:h,body:m}=C$(r,e);if(o.navigate===!1){let p=o.fetcherKey||G$();await i(p,t,o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await s(o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,s,e,t])}function K$(n,{relative:e}={}){let{basename:t}=_.useContext(Os),i=_.useContext(Js);on(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),r={...bm(n||".",{relative:e})},o=ha();if(n==null){r.search=o.search;let a=new URLSearchParams(r.search),c=a.getAll("index");if(c.some(h=>h==="")){a.delete("index"),c.filter(m=>m).forEach(m=>a.append("index",m));let h=a.toString();r.search=h?`?${h}`:""}}return(!n||n===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:Zo([t,r.pathname])),Oh(r)}function q$(n,{relative:e}={}){let t=_.useContext(I3);on(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=z3("useViewTransitionState"),s=bm(n,{relative:e});if(!t.isTransitioning)return!1;let r=ra(t.currentLocation.pathname,i)||t.currentLocation.pathname,o=ra(t.nextLocation.pathname,i)||t.nextLocation.pathname;return zb(s.pathname,o)!=null||zb(s.pathname,r)!=null}var wm=e3();const Q$=bc(wm);function t5(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function ga(...n){return e=>{let t=!1;const i=n.map(s=>{const r=t5(s,e);return!t&&typeof r=="function"&&(t=!0),r});if(t)return()=>{for(let s=0;s<i.length;s++){const r=i[s];typeof r=="function"?r():t5(n[s],null)}}}}function Dt(...n){return _.useCallback(ga(...n),n)}var Z$=Symbol.for("react.lazy"),jb=hx[" use ".trim().toString()];function J$(n){return typeof n=="object"&&n!==null&&"then"in n}function j3(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===Z$&&"_payload"in n&&J$(n._payload)}function Bx(n){const e=X$(n),t=_.forwardRef((i,s)=>{let{children:r,...o}=i;j3(r)&&typeof jb=="function"&&(r=jb(r._payload));const a=_.Children.toArray(r),c=a.find(tG);if(c){const d=c.props.children,h=a.map(m=>m===c?_.Children.count(d)>1?_.Children.only(null):_.isValidElement(d)?d.props.children:null:m);return v.jsx(e,{...o,ref:s,children:_.isValidElement(d)?_.cloneElement(d,void 0,h):null})}return v.jsx(e,{...o,ref:s,children:r})});return t.displayName=`${n}.Slot`,t}var vm=Bx("Slot");function X$(n){const e=_.forwardRef((t,i)=>{let{children:s,...r}=t;if(j3(s)&&typeof jb=="function"&&(s=jb(s._payload)),_.isValidElement(s)){const o=iG(s),a=nG(r,s.props);return s.type!==_.Fragment&&(a.ref=i?ga(i,o):o),_.cloneElement(s,a)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var eG=Symbol("radix.slottable");function tG(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===eG}function nG(n,e){const t={...e};for(const i in e){const s=n[i],r=e[i];/^on[A-Z]/.test(i)?s&&r?t[i]=(...a)=>{const c=r(...a);return s(...a),c}:s&&(t[i]=s):i==="style"?t[i]={...s,...r}:i==="className"&&(t[i]=[s,r].filter(Boolean).join(" "))}return{...n,...t}}function iG(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function U3(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=U3(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function H3(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=U3(n))&&(i&&(i+=" "),i+=e);return i}const n5=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,i5=H3,Nx=(n,e)=>t=>{var i;if(e?.variants==null)return i5(n,t?.class,t?.className);const{variants:s,defaultVariants:r}=e,o=Object.keys(s).map(d=>{const h=t?.[d],m=r?.[d];if(h===null)return null;const p=n5(h)||n5(m);return s[d][p]}),a=t&&Object.entries(t).reduce((d,h)=>{let[m,p]=h;return p===void 0||(d[m]=p),d},{}),c=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((d,h)=>{let{class:m,className:p,...w}=h;return Object.entries(w).every(A=>{let[C,k]=A;return Array.isArray(k)?k.includes({...r,...a}[C]):{...r,...a}[C]===k})?[...d,m,p]:d},[]);return i5(n,o,c,t?.class,t?.className)};const sG=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rG=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),s5=n=>{const e=rG(n);return e.charAt(0).toUpperCase()+e.slice(1)},W3=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),oG=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var aG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const lG=_.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:r,iconNode:o,...a},c)=>_.createElement("svg",{ref:c,...aG,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:W3("lucide",s),...!r&&!oG(a)&&{"aria-hidden":"true"},...a},[...o.map(([d,h])=>_.createElement(d,h)),...Array.isArray(r)?r:[r]]));const ev=(n,e)=>{const t=_.forwardRef(({className:i,...s},r)=>_.createElement(lG,{ref:r,iconNode:e,className:W3(`lucide-${sG(s5(n))}`,`lucide-${n}`,i),...s}));return t.displayName=s5(n),t};const cG=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],uG=ev("check",cG);const dG=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$3=ev("chevron-down",dG);const fG=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],hG=ev("chevron-up",fG);const mG=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gG=ev("x",mG),KA=768;function pG(){const[n,e]=_.useState(void 0);return _.useEffect(()=>{const t=window.matchMedia(`(max-width: ${KA-1}px)`),i=()=>{e(window.innerWidth<KA)};return t.addEventListener("change",i),e(window.innerWidth<KA),()=>t.removeEventListener("change",i)},[]),!!n}const bG=(n,e)=>{const t=new Array(n.length+e.length);for(let i=0;i<n.length;i++)t[i]=n[i];for(let i=0;i<e.length;i++)t[n.length+i]=e[i];return t},wG=(n,e)=>({classGroupId:n,validator:e}),G3=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),Ub="-",r5=[],vG="arbitrary..",yG=n=>{const e=_G(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return AG(o);const a=o.split(Ub),c=a[0]===""&&a.length>1?1:0;return Y3(a,c,e)},getConflictingClassGroupIds:(o,a)=>{if(a){const c=i[o],d=t[o];return c?d?bG(d,c):c:d||r5}return t[o]||r5}}},Y3=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const s=n[e],r=t.nextPart.get(s);if(r){const d=Y3(n,e+1,r);if(d)return d}const o=t.validators;if(o===null)return;const a=e===0?n.join(Ub):n.slice(e).join(Ub),c=o.length;for(let d=0;d<c;d++){const h=o[d];if(h.validator(a))return h.classGroupId}},AG=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),i=e.slice(0,t);return i?vG+i:void 0})(),_G=n=>{const{theme:e,classGroups:t}=n;return CG(t,e)},CG=(n,e)=>{const t=G3();for(const i in n){const s=n[i];Vx(s,t,i,e)}return t},Vx=(n,e,t,i)=>{const s=n.length;for(let r=0;r<s;r++){const o=n[r];xG(o,e,t,i)}},xG=(n,e,t,i)=>{if(typeof n=="string"){kG(n,e,t);return}if(typeof n=="function"){EG(n,e,t,i);return}SG(n,e,t,i)},kG=(n,e,t)=>{const i=n===""?e:K3(e,n);i.classGroupId=t},EG=(n,e,t,i)=>{if(TG(n)){Vx(n(i),e,t,i);return}e.validators===null&&(e.validators=[]),e.validators.push(wG(t,n))},SG=(n,e,t,i)=>{const s=Object.entries(n),r=s.length;for(let o=0;o<r;o++){const[a,c]=s[o];Vx(c,K3(e,a),t,i)}},K3=(n,e)=>{let t=n;const i=e.split(Ub),s=i.length;for(let r=0;r<s;r++){const o=i[r];let a=t.nextPart.get(o);a||(a=G3(),t.nextPart.set(o,a)),t=a}return t},TG=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,IG=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),i=Object.create(null);const s=(r,o)=>{t[r]=o,e++,e>n&&(e=0,i=t,t=Object.create(null))};return{get(r){let o=t[r];if(o!==void 0)return o;if((o=i[r])!==void 0)return s(r,o),o},set(r,o){r in t?t[r]=o:s(r,o)}}},V1="!",o5=":",RG=[],a5=(n,e,t,i,s)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:i,isExternal:s}),PG=n=>{const{prefix:e,experimentalParseClassName:t}=n;let i=s=>{const r=[];let o=0,a=0,c=0,d;const h=s.length;for(let C=0;C<h;C++){const k=s[C];if(o===0&&a===0){if(k===o5){r.push(s.slice(c,C)),c=C+1;continue}if(k==="/"){d=C;continue}}k==="["?o++:k==="]"?o--:k==="("?a++:k===")"&&a--}const m=r.length===0?s:s.slice(c);let p=m,w=!1;m.endsWith(V1)?(p=m.slice(0,-1),w=!0):m.startsWith(V1)&&(p=m.slice(1),w=!0);const A=d&&d>c?d-c:void 0;return a5(r,w,p,A)};if(e){const s=e+o5,r=i;i=o=>o.startsWith(s)?r(o.slice(s.length)):a5(RG,!1,o,void 0,!0)}if(t){const s=i;i=r=>t({className:r,parseClassName:s})}return i},OG=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,i)=>{e.set(t,1e6+i)}),t=>{const i=[];let s=[];for(let r=0;r<t.length;r++){const o=t[r],a=o[0]==="[",c=e.has(o);a||c?(s.length>0&&(s.sort(),i.push(...s),s=[]),i.push(o)):s.push(o)}return s.length>0&&(s.sort(),i.push(...s)),i}},DG=n=>({cache:IG(n.cacheSize),parseClassName:PG(n),sortModifiers:OG(n),...yG(n)}),MG=/\s+/,BG=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:s,sortModifiers:r}=e,o=[],a=n.trim().split(MG);let c="";for(let d=a.length-1;d>=0;d-=1){const h=a[d],{isExternal:m,modifiers:p,hasImportantModifier:w,baseClassName:A,maybePostfixModifierPosition:C}=t(h);if(m){c=h+(c.length>0?" "+c:c);continue}let k=!!C,E=i(k?A.substring(0,C):A);if(!E){if(!k){c=h+(c.length>0?" "+c:c);continue}if(E=i(A),!E){c=h+(c.length>0?" "+c:c);continue}k=!1}const S=p.length===0?"":p.length===1?p[0]:r(p).join(":"),I=w?S+V1:S,R=I+E;if(o.indexOf(R)>-1)continue;o.push(R);const O=s(E,k);for(let U=0;U<O.length;++U){const P=O[U];o.push(I+P)}c=h+(c.length>0?" "+c:c)}return c},NG=(...n)=>{let e=0,t,i,s="";for(;e<n.length;)(t=n[e++])&&(i=q3(t))&&(s&&(s+=" "),s+=i);return s},q3=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=q3(n[i]))&&(t&&(t+=" "),t+=e);return t},VG=(n,...e)=>{let t,i,s,r;const o=c=>{const d=e.reduce((h,m)=>m(h),n());return t=DG(d),i=t.cache.get,s=t.cache.set,r=a,a(c)},a=c=>{const d=i(c);if(d)return d;const h=BG(c,t);return s(c,h),h};return r=o,(...c)=>r(NG(...c))},LG=[],Yn=n=>{const e=t=>t[n]||LG;return e.isThemeGetter=!0,e},Q3=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Z3=/^\((?:(\w[\w-]*):)?(.+)\)$/i,FG=/^\d+\/\d+$/,zG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,UG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,HG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,WG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vu=n=>FG.test(n),nt=n=>!!n&&!Number.isNaN(Number(n)),Ya=n=>!!n&&Number.isInteger(Number(n)),qA=n=>n.endsWith("%")&&nt(n.slice(0,-1)),Bo=n=>zG.test(n),$G=()=>!0,GG=n=>jG.test(n)&&!UG.test(n),J3=()=>!1,YG=n=>HG.test(n),KG=n=>WG.test(n),qG=n=>!Oe(n)&&!De(n),QG=n=>Pd(n,tB,J3),Oe=n=>Q3.test(n),Hl=n=>Pd(n,nB,GG),QA=n=>Pd(n,tY,nt),l5=n=>Pd(n,X3,J3),ZG=n=>Pd(n,eB,KG),pp=n=>Pd(n,iB,YG),De=n=>Z3.test(n),zf=n=>Od(n,nB),JG=n=>Od(n,nY),c5=n=>Od(n,X3),XG=n=>Od(n,tB),eY=n=>Od(n,eB),bp=n=>Od(n,iB,!0),Pd=(n,e,t)=>{const i=Q3.exec(n);return i?i[1]?e(i[1]):t(i[2]):!1},Od=(n,e,t=!1)=>{const i=Z3.exec(n);return i?i[1]?e(i[1]):t:!1},X3=n=>n==="position"||n==="percentage",eB=n=>n==="image"||n==="url",tB=n=>n==="length"||n==="size"||n==="bg-size",nB=n=>n==="length",tY=n=>n==="number",nY=n=>n==="family-name",iB=n=>n==="shadow",iY=()=>{const n=Yn("color"),e=Yn("font"),t=Yn("text"),i=Yn("font-weight"),s=Yn("tracking"),r=Yn("leading"),o=Yn("breakpoint"),a=Yn("container"),c=Yn("spacing"),d=Yn("radius"),h=Yn("shadow"),m=Yn("inset-shadow"),p=Yn("text-shadow"),w=Yn("drop-shadow"),A=Yn("blur"),C=Yn("perspective"),k=Yn("aspect"),E=Yn("ease"),S=Yn("animate"),I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...R(),De,Oe],U=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],V=()=>[De,Oe,c],H=()=>[vu,"full","auto",...V()],ie=()=>[Ya,"none","subgrid",De,Oe],ke=()=>["auto",{span:["full",Ya,De,Oe]},Ya,De,Oe],de=()=>[Ya,"auto",De,Oe],ve=()=>["auto","min","max","fr",De,Oe],be=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ae=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",...V()],X=()=>[vu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...V()],$=()=>[n,De,Oe],re=()=>[...R(),c5,l5,{position:[De,Oe]}],Ve=()=>["no-repeat",{repeat:["","x","y","space","round"]}],B=()=>["auto","cover","contain",XG,QG,{size:[De,Oe]}],J=()=>[qA,zf,Hl],fe=()=>["","none","full",d,De,Oe],he=()=>["",nt,zf,Hl],Me=()=>["solid","dashed","dotted","double"],Ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],oe=()=>[nt,qA,c5,l5],Ue=()=>["","none",A,De,Oe],$e=()=>["none",nt,De,Oe],qe=()=>["none",nt,De,Oe],Ze=()=>[nt,De,Oe],it=()=>[vu,"full",...V()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Bo],breakpoint:[Bo],color:[$G],container:[Bo],"drop-shadow":[Bo],ease:["in","out","in-out"],font:[qG],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Bo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Bo],shadow:[Bo],spacing:["px",nt],text:[Bo],"text-shadow":[Bo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",vu,Oe,De,k]}],container:["container"],columns:[{columns:[nt,Oe,De,a]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:H()}],"inset-x":[{"inset-x":H()}],"inset-y":[{"inset-y":H()}],start:[{start:H()}],end:[{end:H()}],top:[{top:H()}],right:[{right:H()}],bottom:[{bottom:H()}],left:[{left:H()}],visibility:["visible","invisible","collapse"],z:[{z:[Ya,"auto",De,Oe]}],basis:[{basis:[vu,"full","auto",a,...V()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[nt,vu,"auto","initial","none",Oe]}],grow:[{grow:["",nt,De,Oe]}],shrink:[{shrink:["",nt,De,Oe]}],order:[{order:[Ya,"first","last","none",De,Oe]}],"grid-cols":[{"grid-cols":ie()}],"col-start-end":[{col:ke()}],"col-start":[{"col-start":de()}],"col-end":[{"col-end":de()}],"grid-rows":[{"grid-rows":ie()}],"row-start-end":[{row:ke()}],"row-start":[{"row-start":de()}],"row-end":[{"row-end":de()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ve()}],"auto-rows":[{"auto-rows":ve()}],gap:[{gap:V()}],"gap-x":[{"gap-x":V()}],"gap-y":[{"gap-y":V()}],"justify-content":[{justify:[...be(),"normal"]}],"justify-items":[{"justify-items":[...Ae(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ae()]}],"align-content":[{content:["normal",...be()]}],"align-items":[{items:[...Ae(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ae(),{baseline:["","last"]}]}],"place-content":[{"place-content":be()}],"place-items":[{"place-items":[...Ae(),"baseline"]}],"place-self":[{"place-self":["auto",...Ae()]}],p:[{p:V()}],px:[{px:V()}],py:[{py:V()}],ps:[{ps:V()}],pe:[{pe:V()}],pt:[{pt:V()}],pr:[{pr:V()}],pb:[{pb:V()}],pl:[{pl:V()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":V()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":V()}],"space-y-reverse":["space-y-reverse"],size:[{size:X()}],w:[{w:[a,"screen",...X()]}],"min-w":[{"min-w":[a,"screen","none",...X()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...X()]}],h:[{h:["screen","lh",...X()]}],"min-h":[{"min-h":["screen","lh","none",...X()]}],"max-h":[{"max-h":["screen","lh",...X()]}],"font-size":[{text:["base",t,zf,Hl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,De,QA]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",qA,Oe]}],"font-family":[{font:[JG,Oe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,De,Oe]}],"line-clamp":[{"line-clamp":[nt,"none",De,QA]}],leading:[{leading:[r,...V()]}],"list-image":[{"list-image":["none",De,Oe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",De,Oe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:$()}],"text-color":[{text:$()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Me(),"wavy"]}],"text-decoration-thickness":[{decoration:[nt,"from-font","auto",De,Hl]}],"text-decoration-color":[{decoration:$()}],"underline-offset":[{"underline-offset":[nt,"auto",De,Oe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:V()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De,Oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De,Oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:Ve()}],"bg-size":[{bg:B()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ya,De,Oe],radial:["",De,Oe],conic:[Ya,De,Oe]},eY,ZG]}],"bg-color":[{bg:$()}],"gradient-from-pos":[{from:J()}],"gradient-via-pos":[{via:J()}],"gradient-to-pos":[{to:J()}],"gradient-from":[{from:$()}],"gradient-via":[{via:$()}],"gradient-to":[{to:$()}],rounded:[{rounded:fe()}],"rounded-s":[{"rounded-s":fe()}],"rounded-e":[{"rounded-e":fe()}],"rounded-t":[{"rounded-t":fe()}],"rounded-r":[{"rounded-r":fe()}],"rounded-b":[{"rounded-b":fe()}],"rounded-l":[{"rounded-l":fe()}],"rounded-ss":[{"rounded-ss":fe()}],"rounded-se":[{"rounded-se":fe()}],"rounded-ee":[{"rounded-ee":fe()}],"rounded-es":[{"rounded-es":fe()}],"rounded-tl":[{"rounded-tl":fe()}],"rounded-tr":[{"rounded-tr":fe()}],"rounded-br":[{"rounded-br":fe()}],"rounded-bl":[{"rounded-bl":fe()}],"border-w":[{border:he()}],"border-w-x":[{"border-x":he()}],"border-w-y":[{"border-y":he()}],"border-w-s":[{"border-s":he()}],"border-w-e":[{"border-e":he()}],"border-w-t":[{"border-t":he()}],"border-w-r":[{"border-r":he()}],"border-w-b":[{"border-b":he()}],"border-w-l":[{"border-l":he()}],"divide-x":[{"divide-x":he()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":he()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Me(),"hidden","none"]}],"divide-style":[{divide:[...Me(),"hidden","none"]}],"border-color":[{border:$()}],"border-color-x":[{"border-x":$()}],"border-color-y":[{"border-y":$()}],"border-color-s":[{"border-s":$()}],"border-color-e":[{"border-e":$()}],"border-color-t":[{"border-t":$()}],"border-color-r":[{"border-r":$()}],"border-color-b":[{"border-b":$()}],"border-color-l":[{"border-l":$()}],"divide-color":[{divide:$()}],"outline-style":[{outline:[...Me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[nt,De,Oe]}],"outline-w":[{outline:["",nt,zf,Hl]}],"outline-color":[{outline:$()}],shadow:[{shadow:["","none",h,bp,pp]}],"shadow-color":[{shadow:$()}],"inset-shadow":[{"inset-shadow":["none",m,bp,pp]}],"inset-shadow-color":[{"inset-shadow":$()}],"ring-w":[{ring:he()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:$()}],"ring-offset-w":[{"ring-offset":[nt,Hl]}],"ring-offset-color":[{"ring-offset":$()}],"inset-ring-w":[{"inset-ring":he()}],"inset-ring-color":[{"inset-ring":$()}],"text-shadow":[{"text-shadow":["none",p,bp,pp]}],"text-shadow-color":[{"text-shadow":$()}],opacity:[{opacity:[nt,De,Oe]}],"mix-blend":[{"mix-blend":[...Ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[nt]}],"mask-image-linear-from-pos":[{"mask-linear-from":oe()}],"mask-image-linear-to-pos":[{"mask-linear-to":oe()}],"mask-image-linear-from-color":[{"mask-linear-from":$()}],"mask-image-linear-to-color":[{"mask-linear-to":$()}],"mask-image-t-from-pos":[{"mask-t-from":oe()}],"mask-image-t-to-pos":[{"mask-t-to":oe()}],"mask-image-t-from-color":[{"mask-t-from":$()}],"mask-image-t-to-color":[{"mask-t-to":$()}],"mask-image-r-from-pos":[{"mask-r-from":oe()}],"mask-image-r-to-pos":[{"mask-r-to":oe()}],"mask-image-r-from-color":[{"mask-r-from":$()}],"mask-image-r-to-color":[{"mask-r-to":$()}],"mask-image-b-from-pos":[{"mask-b-from":oe()}],"mask-image-b-to-pos":[{"mask-b-to":oe()}],"mask-image-b-from-color":[{"mask-b-from":$()}],"mask-image-b-to-color":[{"mask-b-to":$()}],"mask-image-l-from-pos":[{"mask-l-from":oe()}],"mask-image-l-to-pos":[{"mask-l-to":oe()}],"mask-image-l-from-color":[{"mask-l-from":$()}],"mask-image-l-to-color":[{"mask-l-to":$()}],"mask-image-x-from-pos":[{"mask-x-from":oe()}],"mask-image-x-to-pos":[{"mask-x-to":oe()}],"mask-image-x-from-color":[{"mask-x-from":$()}],"mask-image-x-to-color":[{"mask-x-to":$()}],"mask-image-y-from-pos":[{"mask-y-from":oe()}],"mask-image-y-to-pos":[{"mask-y-to":oe()}],"mask-image-y-from-color":[{"mask-y-from":$()}],"mask-image-y-to-color":[{"mask-y-to":$()}],"mask-image-radial":[{"mask-radial":[De,Oe]}],"mask-image-radial-from-pos":[{"mask-radial-from":oe()}],"mask-image-radial-to-pos":[{"mask-radial-to":oe()}],"mask-image-radial-from-color":[{"mask-radial-from":$()}],"mask-image-radial-to-color":[{"mask-radial-to":$()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[nt]}],"mask-image-conic-from-pos":[{"mask-conic-from":oe()}],"mask-image-conic-to-pos":[{"mask-conic-to":oe()}],"mask-image-conic-from-color":[{"mask-conic-from":$()}],"mask-image-conic-to-color":[{"mask-conic-to":$()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:Ve()}],"mask-size":[{mask:B()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",De,Oe]}],filter:[{filter:["","none",De,Oe]}],blur:[{blur:Ue()}],brightness:[{brightness:[nt,De,Oe]}],contrast:[{contrast:[nt,De,Oe]}],"drop-shadow":[{"drop-shadow":["","none",w,bp,pp]}],"drop-shadow-color":[{"drop-shadow":$()}],grayscale:[{grayscale:["",nt,De,Oe]}],"hue-rotate":[{"hue-rotate":[nt,De,Oe]}],invert:[{invert:["",nt,De,Oe]}],saturate:[{saturate:[nt,De,Oe]}],sepia:[{sepia:["",nt,De,Oe]}],"backdrop-filter":[{"backdrop-filter":["","none",De,Oe]}],"backdrop-blur":[{"backdrop-blur":Ue()}],"backdrop-brightness":[{"backdrop-brightness":[nt,De,Oe]}],"backdrop-contrast":[{"backdrop-contrast":[nt,De,Oe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",nt,De,Oe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[nt,De,Oe]}],"backdrop-invert":[{"backdrop-invert":["",nt,De,Oe]}],"backdrop-opacity":[{"backdrop-opacity":[nt,De,Oe]}],"backdrop-saturate":[{"backdrop-saturate":[nt,De,Oe]}],"backdrop-sepia":[{"backdrop-sepia":["",nt,De,Oe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":V()}],"border-spacing-x":[{"border-spacing-x":V()}],"border-spacing-y":[{"border-spacing-y":V()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",De,Oe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[nt,"initial",De,Oe]}],ease:[{ease:["linear","initial",E,De,Oe]}],delay:[{delay:[nt,De,Oe]}],animate:[{animate:["none",S,De,Oe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,De,Oe]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:$e()}],"rotate-x":[{"rotate-x":$e()}],"rotate-y":[{"rotate-y":$e()}],"rotate-z":[{"rotate-z":$e()}],scale:[{scale:qe()}],"scale-x":[{"scale-x":qe()}],"scale-y":[{"scale-y":qe()}],"scale-z":[{"scale-z":qe()}],"scale-3d":["scale-3d"],skew:[{skew:Ze()}],"skew-x":[{"skew-x":Ze()}],"skew-y":[{"skew-y":Ze()}],transform:[{transform:[De,Oe,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:it()}],"translate-x":[{"translate-x":it()}],"translate-y":[{"translate-y":it()}],"translate-z":[{"translate-z":it()}],"translate-none":["translate-none"],accent:[{accent:$()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:$()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De,Oe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":V()}],"scroll-mx":[{"scroll-mx":V()}],"scroll-my":[{"scroll-my":V()}],"scroll-ms":[{"scroll-ms":V()}],"scroll-me":[{"scroll-me":V()}],"scroll-mt":[{"scroll-mt":V()}],"scroll-mr":[{"scroll-mr":V()}],"scroll-mb":[{"scroll-mb":V()}],"scroll-ml":[{"scroll-ml":V()}],"scroll-p":[{"scroll-p":V()}],"scroll-px":[{"scroll-px":V()}],"scroll-py":[{"scroll-py":V()}],"scroll-ps":[{"scroll-ps":V()}],"scroll-pe":[{"scroll-pe":V()}],"scroll-pt":[{"scroll-pt":V()}],"scroll-pr":[{"scroll-pr":V()}],"scroll-pb":[{"scroll-pb":V()}],"scroll-pl":[{"scroll-pl":V()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De,Oe]}],fill:[{fill:["none",...$()]}],"stroke-w":[{stroke:[nt,zf,Hl,QA]}],stroke:[{stroke:["none",...$()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},sY=VG(iY);function Ye(...n){return sY(H3(n))}const rY=Nx("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function ai({className:n,variant:e="default",size:t="default",asChild:i=!1,...s}){const r=i?vm:"button";return v.jsx(r,{"data-slot":"button","data-variant":e,"data-size":t,className:Ye(rY({variant:e,size:t,className:n})),...s})}function oi({className:n,type:e,...t}){return v.jsx("input",{type:e,"data-slot":"input",className:Ye("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}function Be(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function oY(n,e){const t=_.createContext(e),i=r=>{const{children:o,...a}=r,c=_.useMemo(()=>a,Object.values(a));return v.jsx(t.Provider,{value:c,children:o})};i.displayName=n+"Provider";function s(r){const o=_.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${r}\` must be used within \`${n}\``)}return[i,s]}function fl(n,e=[]){let t=[];function i(r,o){const a=_.createContext(o),c=t.length;t=[...t,o];const d=m=>{const{scope:p,children:w,...A}=m,C=p?.[n]?.[c]||a,k=_.useMemo(()=>A,Object.values(A));return v.jsx(C.Provider,{value:k,children:w})};d.displayName=r+"Provider";function h(m,p){const w=p?.[n]?.[c]||a,A=_.useContext(w);if(A)return A;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${r}\``)}return[d,h]}const s=()=>{const r=t.map(o=>_.createContext(o));return function(a){const c=a?.[n]||r;return _.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return s.scopeName=n,[i,aY(s,...e)]}function aY(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const o=i.reduce((a,{useScope:c,scopeName:d})=>{const m=c(r)[`__scope${d}`];return{...a,...m}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var Qn=globalThis?.document?_.useLayoutEffect:()=>{},lY=hx[" useId ".trim().toString()]||(()=>{}),cY=0;function Yr(n){const[e,t]=_.useState(lY());return Qn(()=>{t(i=>i??String(cY++))},[n]),n||(e?`radix-${e}`:"")}var uY=hx[" useInsertionEffect ".trim().toString()]||Qn;function dd({prop:n,defaultProp:e,onChange:t=()=>{},caller:i}){const[s,r,o]=dY({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:s;{const h=_.useRef(n!==void 0);_.useEffect(()=>{const m=h.current;m!==a&&console.warn(`${i} is changing from ${m?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=a},[a,i])}const d=_.useCallback(h=>{if(a){const m=fY(h)?h(n):h;m!==n&&o.current?.(m)}else r(h)},[a,n,r,o]);return[c,d]}function dY({defaultProp:n,onChange:e}){const[t,i]=_.useState(n),s=_.useRef(t),r=_.useRef(e);return uY(()=>{r.current=e},[e]),_.useEffect(()=>{s.current!==t&&(r.current?.(t),s.current=t)},[t,s]),[t,i,r]}function fY(n){return typeof n=="function"}function hY(n){const e=mY(n),t=_.forwardRef((i,s)=>{const{children:r,...o}=i,a=_.Children.toArray(r),c=a.find(pY);if(c){const d=c.props.children,h=a.map(m=>m===c?_.Children.count(d)>1?_.Children.only(null):_.isValidElement(d)?d.props.children:null:m);return v.jsx(e,{...o,ref:s,children:_.isValidElement(d)?_.cloneElement(d,void 0,h):null})}return v.jsx(e,{...o,ref:s,children:r})});return t.displayName=`${n}.Slot`,t}function mY(n){const e=_.forwardRef((t,i)=>{const{children:s,...r}=t;if(_.isValidElement(s)){const o=wY(s),a=bY(r,s.props);return s.type!==_.Fragment&&(a.ref=i?ga(i,o):o),_.cloneElement(s,a)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var gY=Symbol("radix.slottable");function pY(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===gY}function bY(n,e){const t={...e};for(const i in e){const s=n[i],r=e[i];/^on[A-Z]/.test(i)?s&&r?t[i]=(...a)=>{const c=r(...a);return s(...a),c}:s&&(t[i]=s):i==="style"?t[i]={...s,...r}:i==="className"&&(t[i]=[s,r].filter(Boolean).join(" "))}return{...n,...t}}function wY(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var vY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ht=vY.reduce((n,e)=>{const t=hY(`Primitive.${e}`),i=_.forwardRef((s,r)=>{const{asChild:o,...a}=s,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(c,{...a,ref:r})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function sB(n,e){n&&wm.flushSync(()=>n.dispatchEvent(e))}function _r(n){const e=_.useRef(n);return _.useEffect(()=>{e.current=n}),_.useMemo(()=>(...t)=>e.current?.(...t),[])}function yY(n,e=globalThis?.document){const t=_r(n);_.useEffect(()=>{const i=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var AY="DismissableLayer",L1="dismissableLayer.update",_Y="dismissableLayer.pointerDownOutside",CY="dismissableLayer.focusOutside",u5,rB=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ym=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:r,onInteractOutside:o,onDismiss:a,...c}=n,d=_.useContext(rB),[h,m]=_.useState(null),p=h?.ownerDocument??globalThis?.document,[,w]=_.useState({}),A=Dt(e,P=>m(P)),C=Array.from(d.layers),[k]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),E=C.indexOf(k),S=h?C.indexOf(h):-1,I=d.layersWithOutsidePointerEventsDisabled.size>0,R=S>=E,O=EY(P=>{const V=P.target,H=[...d.branches].some(ie=>ie.contains(V));!R||H||(s?.(P),o?.(P),P.defaultPrevented||a?.())},p),U=SY(P=>{const V=P.target;[...d.branches].some(ie=>ie.contains(V))||(r?.(P),o?.(P),P.defaultPrevented||a?.())},p);return yY(P=>{S===d.layers.size-1&&(i?.(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},p),_.useEffect(()=>{if(h)return t&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(u5=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),d5(),()=>{t&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=u5)}},[h,p,t,d]),_.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),d5())},[h,d]),_.useEffect(()=>{const P=()=>w({});return document.addEventListener(L1,P),()=>document.removeEventListener(L1,P)},[]),v.jsx(ht.div,{...c,ref:A,style:{pointerEvents:I?R?"auto":"none":void 0,...n.style},onFocusCapture:Be(n.onFocusCapture,U.onFocusCapture),onBlurCapture:Be(n.onBlurCapture,U.onBlurCapture),onPointerDownCapture:Be(n.onPointerDownCapture,O.onPointerDownCapture)})});ym.displayName=AY;var xY="DismissableLayerBranch",kY=_.forwardRef((n,e)=>{const t=_.useContext(rB),i=_.useRef(null),s=Dt(e,i);return _.useEffect(()=>{const r=i.current;if(r)return t.branches.add(r),()=>{t.branches.delete(r)}},[t.branches]),v.jsx(ht.div,{...n,ref:s})});kY.displayName=xY;function EY(n,e=globalThis?.document){const t=_r(n),i=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const r=a=>{if(a.target&&!i.current){let c=function(){oB(_Y,t,d,{discrete:!0})};const d={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",r),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function SY(n,e=globalThis?.document){const t=_r(n),i=_.useRef(!1);return _.useEffect(()=>{const s=r=>{r.target&&!i.current&&oB(CY,t,{originalEvent:r},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function d5(){const n=new CustomEvent(L1);document.dispatchEvent(n)}function oB(n,e,t,{discrete:i}){const s=t.originalEvent.target,r=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),i?sB(s,r):s.dispatchEvent(r)}var ZA="focusScope.autoFocusOnMount",JA="focusScope.autoFocusOnUnmount",f5={bubbles:!1,cancelable:!0},TY="FocusScope",tv=_.forwardRef((n,e)=>{const{loop:t=!1,trapped:i=!1,onMountAutoFocus:s,onUnmountAutoFocus:r,...o}=n,[a,c]=_.useState(null),d=_r(s),h=_r(r),m=_.useRef(null),p=Dt(e,C=>c(C)),w=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(i){let C=function(I){if(w.paused||!a)return;const R=I.target;a.contains(R)?m.current=R:Qa(m.current,{select:!0})},k=function(I){if(w.paused||!a)return;const R=I.relatedTarget;R!==null&&(a.contains(R)||Qa(m.current,{select:!0}))},E=function(I){if(document.activeElement===document.body)for(const O of I)O.removedNodes.length>0&&Qa(a)};document.addEventListener("focusin",C),document.addEventListener("focusout",k);const S=new MutationObserver(E);return a&&S.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",k),S.disconnect()}}},[i,a,w.paused]),_.useEffect(()=>{if(a){m5.add(w);const C=document.activeElement;if(!a.contains(C)){const E=new CustomEvent(ZA,f5);a.addEventListener(ZA,d),a.dispatchEvent(E),E.defaultPrevented||(IY(MY(aB(a)),{select:!0}),document.activeElement===C&&Qa(a))}return()=>{a.removeEventListener(ZA,d),setTimeout(()=>{const E=new CustomEvent(JA,f5);a.addEventListener(JA,h),a.dispatchEvent(E),E.defaultPrevented||Qa(C??document.body,{select:!0}),a.removeEventListener(JA,h),m5.remove(w)},0)}}},[a,d,h,w]);const A=_.useCallback(C=>{if(!t&&!i||w.paused)return;const k=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,E=document.activeElement;if(k&&E){const S=C.currentTarget,[I,R]=RY(S);I&&R?!C.shiftKey&&E===R?(C.preventDefault(),t&&Qa(I,{select:!0})):C.shiftKey&&E===I&&(C.preventDefault(),t&&Qa(R,{select:!0})):E===S&&C.preventDefault()}},[t,i,w.paused]);return v.jsx(ht.div,{tabIndex:-1,...o,ref:p,onKeyDown:A})});tv.displayName=TY;function IY(n,{select:e=!1}={}){const t=document.activeElement;for(const i of n)if(Qa(i,{select:e}),document.activeElement!==t)return}function RY(n){const e=aB(n),t=h5(e,n),i=h5(e.reverse(),n);return[t,i]}function aB(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const s=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||s?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function h5(n,e){for(const t of n)if(!PY(t,{upTo:e}))return t}function PY(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function OY(n){return n instanceof HTMLInputElement&&"select"in n}function Qa(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&OY(n)&&e&&n.select()}}var m5=DY();function DY(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=g5(n,e),n.unshift(e)},remove(e){n=g5(n,e),n[0]?.resume()}}}function g5(n,e){const t=[...n],i=t.indexOf(e);return i!==-1&&t.splice(i,1),t}function MY(n){return n.filter(e=>e.tagName!=="A")}var BY="Portal",Am=_.forwardRef((n,e)=>{const{container:t,...i}=n,[s,r]=_.useState(!1);Qn(()=>r(!0),[]);const o=t||s&&globalThis?.document?.body;return o?Q$.createPortal(v.jsx(ht.div,{...i,ref:e}),o):null});Am.displayName=BY;function NY(n,e){return _.useReducer((t,i)=>e[t][i]??t,n)}var oo=n=>{const{present:e,children:t}=n,i=VY(e),s=typeof t=="function"?t({present:i.isPresent}):_.Children.only(t),r=Dt(i.ref,LY(s));return typeof t=="function"||i.isPresent?_.cloneElement(s,{ref:r}):null};oo.displayName="Presence";function VY(n){const[e,t]=_.useState(),i=_.useRef(null),s=_.useRef(n),r=_.useRef("none"),o=n?"mounted":"unmounted",[a,c]=NY(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const d=wp(i.current);r.current=a==="mounted"?d:"none"},[a]),Qn(()=>{const d=i.current,h=s.current;if(h!==n){const p=r.current,w=wp(d);n?c("MOUNT"):w==="none"||d?.display==="none"?c("UNMOUNT"):c(h&&p!==w?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,c]),Qn(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,m=w=>{const C=wp(i.current).includes(CSS.escape(w.animationName));if(w.target===e&&C&&(c("ANIMATION_END"),!s.current)){const k=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=k)})}},p=w=>{w.target===e&&(r.current=wp(i.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:_.useCallback(d=>{i.current=d?getComputedStyle(d):null,t(d)},[])}}function wp(n){return n?.animationName||"none"}function LY(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var XA=0;function Lx(){_.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??p5()),document.body.insertAdjacentElement("beforeend",n[1]??p5()),XA++,()=>{XA===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),XA--}},[])}function p5(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Wr=function(){return Wr=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Wr.apply(this,arguments)};function lB(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function wc(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{d(i.next(h))}catch(m){o(m)}}function c(h){try{d(i.throw(h))}catch(m){o(m)}}function d(h){h.done?r(h.value):s(h.value).then(a,c)}d((i=i.apply(n,e||[])).next())})}function FY(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}var fb="right-scroll-bar-position",hb="width-before-scroll-bar",zY="with-scroll-bars-hidden",jY="--removed-body-scroll-bar-size";function e_(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function UY(n,e){var t=_.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(i){var s=t.value;s!==i&&(t.value=i,t.callback(i,s))}}}})[0];return t.callback=e,t.facade}var HY=typeof window<"u"?_.useLayoutEffect:_.useEffect,b5=new WeakMap;function WY(n,e){var t=UY(null,function(i){return n.forEach(function(s){return e_(s,i)})});return HY(function(){var i=b5.get(t);if(i){var s=new Set(i),r=new Set(n),o=t.current;s.forEach(function(a){r.has(a)||e_(a,null)}),r.forEach(function(a){s.has(a)||e_(a,o)})}b5.set(t,n)},[n]),t}function $Y(n){return n}function GY(n,e){e===void 0&&(e=$Y);var t=[],i=!1,s={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(r){var o=e(r,i);return t.push(o),function(){t=t.filter(function(a){return a!==o})}},assignSyncMedium:function(r){for(i=!0;t.length;){var o=t;t=[],o.forEach(r)}t={push:function(a){return r(a)},filter:function(){return t}}},assignMedium:function(r){i=!0;var o=[];if(t.length){var a=t;t=[],a.forEach(r),o=t}var c=function(){var h=o;o=[],h.forEach(r)},d=function(){return Promise.resolve().then(c)};d(),t={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),t}}}};return s}function YY(n){n===void 0&&(n={});var e=GY(null);return e.options=Wr({async:!0,ssr:!1},n),e}var cB=function(n){var e=n.sideCar,t=lB(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return _.createElement(i,Wr({},t))};cB.isSideCarExport=!0;function KY(n,e){return n.useMedium(e),cB}var uB=YY(),t_=function(){},nv=_.forwardRef(function(n,e){var t=_.useRef(null),i=_.useState({onScrollCapture:t_,onWheelCapture:t_,onTouchMoveCapture:t_}),s=i[0],r=i[1],o=n.forwardProps,a=n.children,c=n.className,d=n.removeScrollBar,h=n.enabled,m=n.shards,p=n.sideCar,w=n.noRelative,A=n.noIsolation,C=n.inert,k=n.allowPinchZoom,E=n.as,S=E===void 0?"div":E,I=n.gapMode,R=lB(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=p,U=WY([t,e]),P=Wr(Wr({},R),s);return _.createElement(_.Fragment,null,h&&_.createElement(O,{sideCar:uB,removeScrollBar:d,shards:m,noRelative:w,noIsolation:A,inert:C,setCallbacks:r,allowPinchZoom:!!k,lockRef:t,gapMode:I}),o?_.cloneElement(_.Children.only(a),Wr(Wr({},P),{ref:U})):_.createElement(S,Wr({},P,{className:c,ref:U}),a))});nv.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};nv.classNames={fullWidth:hb,zeroRight:fb};var qY=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function QY(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=qY();return e&&n.setAttribute("nonce",e),n}function ZY(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function JY(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var XY=function(){var n=0,e=null;return{add:function(t){n==0&&(e=QY())&&(ZY(e,t),JY(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},eK=function(){var n=XY();return function(e,t){_.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},dB=function(){var n=eK(),e=function(t){var i=t.styles,s=t.dynamic;return n(i,s),null};return e},tK={left:0,top:0,right:0,gap:0},n_=function(n){return parseInt(n||"",10)||0},nK=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],i=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[n_(t),n_(i),n_(s)]},iK=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return tK;var e=nK(n),t=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-t+e[2]-e[0])}},sK=dB(),Ju="data-scroll-locked",rK=function(n,e,t,i){var s=n.left,r=n.top,o=n.right,a=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(zY,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(Ju,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),t==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(fb,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(hb,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(fb," .").concat(fb,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(hb," .").concat(hb,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Ju,`] {
    `).concat(jY,": ").concat(a,`px;
  }
`)},w5=function(){var n=parseInt(document.body.getAttribute(Ju)||"0",10);return isFinite(n)?n:0},oK=function(){_.useEffect(function(){return document.body.setAttribute(Ju,(w5()+1).toString()),function(){var n=w5()-1;n<=0?document.body.removeAttribute(Ju):document.body.setAttribute(Ju,n.toString())}},[])},aK=function(n){var e=n.noRelative,t=n.noImportant,i=n.gapMode,s=i===void 0?"margin":i;oK();var r=_.useMemo(function(){return iK(s)},[s]);return _.createElement(sK,{styles:rK(r,!e,s,t?"":"!important")})},F1=!1;if(typeof window<"u")try{var vp=Object.defineProperty({},"passive",{get:function(){return F1=!0,!0}});window.addEventListener("test",vp,vp),window.removeEventListener("test",vp,vp)}catch{F1=!1}var yu=F1?{passive:!1}:!1,lK=function(n){return n.tagName==="TEXTAREA"},fB=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!lK(n)&&t[e]==="visible")},cK=function(n){return fB(n,"overflowY")},uK=function(n){return fB(n,"overflowX")},v5=function(n,e){var t=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var s=hB(n,i);if(s){var r=mB(n,i),o=r[1],a=r[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==t.body);return!1},dK=function(n){var e=n.scrollTop,t=n.scrollHeight,i=n.clientHeight;return[e,t,i]},fK=function(n){var e=n.scrollLeft,t=n.scrollWidth,i=n.clientWidth;return[e,t,i]},hB=function(n,e){return n==="v"?cK(e):uK(e)},mB=function(n,e){return n==="v"?dK(e):fK(e)},hK=function(n,e){return n==="h"&&e==="rtl"?-1:1},mK=function(n,e,t,i,s){var r=hK(n,window.getComputedStyle(e).direction),o=r*i,a=t.target,c=e.contains(a),d=!1,h=o>0,m=0,p=0;do{if(!a)break;var w=mB(n,a),A=w[0],C=w[1],k=w[2],E=C-k-r*A;(A||E)&&hB(n,a)&&(m+=E,p+=A);var S=a.parentNode;a=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!c&&a!==document.body||c&&(e.contains(a)||e===a));return(h&&Math.abs(m)<1||!h&&Math.abs(p)<1)&&(d=!0),d},yp=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},y5=function(n){return[n.deltaX,n.deltaY]},A5=function(n){return n&&"current"in n?n.current:n},gK=function(n,e){return n[0]===e[0]&&n[1]===e[1]},pK=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},bK=0,Au=[];function wK(n){var e=_.useRef([]),t=_.useRef([0,0]),i=_.useRef(),s=_.useState(bK++)[0],r=_.useState(dB)[0],o=_.useRef(n);_.useEffect(function(){o.current=n},[n]),_.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var C=FY([n.lockRef.current],(n.shards||[]).map(A5),!0).filter(Boolean);return C.forEach(function(k){return k.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),C.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var a=_.useCallback(function(C,k){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!o.current.allowPinchZoom;var E=yp(C),S=t.current,I="deltaX"in C?C.deltaX:S[0]-E[0],R="deltaY"in C?C.deltaY:S[1]-E[1],O,U=C.target,P=Math.abs(I)>Math.abs(R)?"h":"v";if("touches"in C&&P==="h"&&U.type==="range")return!1;var V=window.getSelection(),H=V&&V.anchorNode,ie=H?H===U||H.contains(U):!1;if(ie)return!1;var ke=v5(P,U);if(!ke)return!0;if(ke?O=P:(O=P==="v"?"h":"v",ke=v5(P,U)),!ke)return!1;if(!i.current&&"changedTouches"in C&&(I||R)&&(i.current=O),!O)return!0;var de=i.current||O;return mK(de,k,C,de==="h"?I:R)},[]),c=_.useCallback(function(C){var k=C;if(!(!Au.length||Au[Au.length-1]!==r)){var E="deltaY"in k?y5(k):yp(k),S=e.current.filter(function(O){return O.name===k.type&&(O.target===k.target||k.target===O.shadowParent)&&gK(O.delta,E)})[0];if(S&&S.should){k.cancelable&&k.preventDefault();return}if(!S){var I=(o.current.shards||[]).map(A5).filter(Boolean).filter(function(O){return O.contains(k.target)}),R=I.length>0?a(k,I[0]):!o.current.noIsolation;R&&k.cancelable&&k.preventDefault()}}},[]),d=_.useCallback(function(C,k,E,S){var I={name:C,delta:k,target:E,should:S,shadowParent:vK(E)};e.current.push(I),setTimeout(function(){e.current=e.current.filter(function(R){return R!==I})},1)},[]),h=_.useCallback(function(C){t.current=yp(C),i.current=void 0},[]),m=_.useCallback(function(C){d(C.type,y5(C),C.target,a(C,n.lockRef.current))},[]),p=_.useCallback(function(C){d(C.type,yp(C),C.target,a(C,n.lockRef.current))},[]);_.useEffect(function(){return Au.push(r),n.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,yu),document.addEventListener("touchmove",c,yu),document.addEventListener("touchstart",h,yu),function(){Au=Au.filter(function(C){return C!==r}),document.removeEventListener("wheel",c,yu),document.removeEventListener("touchmove",c,yu),document.removeEventListener("touchstart",h,yu)}},[]);var w=n.removeScrollBar,A=n.inert;return _.createElement(_.Fragment,null,A?_.createElement(r,{styles:pK(s)}):null,w?_.createElement(aK,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function vK(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const yK=KY(uB,wK);var iv=_.forwardRef(function(n,e){return _.createElement(nv,Wr({},n,{ref:e,sideCar:yK}))});iv.classNames=nv.classNames;var AK=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},_u=new WeakMap,Ap=new WeakMap,_p={},i_=0,gB=function(n){return n&&(n.host||gB(n.parentNode))},_K=function(n,e){return e.map(function(t){if(n.contains(t))return t;var i=gB(t);return i&&n.contains(i)?i:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},CK=function(n,e,t,i){var s=_K(e,Array.isArray(n)?n:[n]);_p[t]||(_p[t]=new WeakMap);var r=_p[t],o=[],a=new Set,c=new Set(s),d=function(m){!m||a.has(m)||(a.add(m),d(m.parentNode))};s.forEach(d);var h=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(p){if(a.has(p))h(p);else try{var w=p.getAttribute(i),A=w!==null&&w!=="false",C=(_u.get(p)||0)+1,k=(r.get(p)||0)+1;_u.set(p,C),r.set(p,k),o.push(p),C===1&&A&&Ap.set(p,!0),k===1&&p.setAttribute(t,"true"),A||p.setAttribute(i,"true")}catch(E){console.error("aria-hidden: cannot operate on ",p,E)}})};return h(e),a.clear(),i_++,function(){o.forEach(function(m){var p=_u.get(m)-1,w=r.get(m)-1;_u.set(m,p),r.set(m,w),p||(Ap.has(m)||m.removeAttribute(i),Ap.delete(m)),w||m.removeAttribute(t)}),i_--,i_||(_u=new WeakMap,_u=new WeakMap,Ap=new WeakMap,_p={})}},Fx=function(n,e,t){t===void 0&&(t="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),s=AK(n);return s?(i.push.apply(i,Array.from(s.querySelectorAll("[aria-live], script"))),CK(i,s,t,"aria-hidden")):function(){return null}};function xK(n){const e=kK(n),t=_.forwardRef((i,s)=>{const{children:r,...o}=i,a=_.Children.toArray(r),c=a.find(SK);if(c){const d=c.props.children,h=a.map(m=>m===c?_.Children.count(d)>1?_.Children.only(null):_.isValidElement(d)?d.props.children:null:m);return v.jsx(e,{...o,ref:s,children:_.isValidElement(d)?_.cloneElement(d,void 0,h):null})}return v.jsx(e,{...o,ref:s,children:r})});return t.displayName=`${n}.Slot`,t}function kK(n){const e=_.forwardRef((t,i)=>{const{children:s,...r}=t;if(_.isValidElement(s)){const o=IK(s),a=TK(r,s.props);return s.type!==_.Fragment&&(a.ref=i?ga(i,o):o),_.cloneElement(s,a)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var EK=Symbol("radix.slottable");function SK(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===EK}function TK(n,e){const t={...e};for(const i in e){const s=n[i],r=e[i];/^on[A-Z]/.test(i)?s&&r?t[i]=(...a)=>{const c=r(...a);return s(...a),c}:s&&(t[i]=s):i==="style"?t[i]={...s,...r}:i==="className"&&(t[i]=[s,r].filter(Boolean).join(" "))}return{...n,...t}}function IK(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var sv="Dialog",[pB]=fl(sv),[RK,Pr]=pB(sv),bB=n=>{const{__scopeDialog:e,children:t,open:i,defaultOpen:s,onOpenChange:r,modal:o=!0}=n,a=_.useRef(null),c=_.useRef(null),[d,h]=dd({prop:i,defaultProp:s??!1,onChange:r,caller:sv});return v.jsx(RK,{scope:e,triggerRef:a,contentRef:c,contentId:Yr(),titleId:Yr(),descriptionId:Yr(),open:d,onOpenChange:h,onOpenToggle:_.useCallback(()=>h(m=>!m),[h]),modal:o,children:t})};bB.displayName=sv;var wB="DialogTrigger",PK=_.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Pr(wB,t),r=Dt(e,s.triggerRef);return v.jsx(ht.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Ux(s.open),...i,ref:r,onClick:Be(n.onClick,s.onOpenToggle)})});PK.displayName=wB;var zx="DialogPortal",[OK,vB]=pB(zx,{forceMount:void 0}),yB=n=>{const{__scopeDialog:e,forceMount:t,children:i,container:s}=n,r=Pr(zx,e);return v.jsx(OK,{scope:e,forceMount:t,children:_.Children.map(i,o=>v.jsx(oo,{present:t||r.open,children:v.jsx(Am,{asChild:!0,container:s,children:o})}))})};yB.displayName=zx;var Hb="DialogOverlay",AB=_.forwardRef((n,e)=>{const t=vB(Hb,n.__scopeDialog),{forceMount:i=t.forceMount,...s}=n,r=Pr(Hb,n.__scopeDialog);return r.modal?v.jsx(oo,{present:i||r.open,children:v.jsx(MK,{...s,ref:e})}):null});AB.displayName=Hb;var DK=xK("DialogOverlay.RemoveScroll"),MK=_.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Pr(Hb,t);return v.jsx(iv,{as:DK,allowPinchZoom:!0,shards:[s.contentRef],children:v.jsx(ht.div,{"data-state":Ux(s.open),...i,ref:e,style:{pointerEvents:"auto",...i.style}})})}),rc="DialogContent",_B=_.forwardRef((n,e)=>{const t=vB(rc,n.__scopeDialog),{forceMount:i=t.forceMount,...s}=n,r=Pr(rc,n.__scopeDialog);return v.jsx(oo,{present:i||r.open,children:r.modal?v.jsx(BK,{...s,ref:e}):v.jsx(NK,{...s,ref:e})})});_B.displayName=rc;var BK=_.forwardRef((n,e)=>{const t=Pr(rc,n.__scopeDialog),i=_.useRef(null),s=Dt(e,t.contentRef,i);return _.useEffect(()=>{const r=i.current;if(r)return Fx(r)},[]),v.jsx(CB,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Be(n.onCloseAutoFocus,r=>{r.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Be(n.onPointerDownOutside,r=>{const o=r.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&r.preventDefault()}),onFocusOutside:Be(n.onFocusOutside,r=>r.preventDefault())})}),NK=_.forwardRef((n,e)=>{const t=Pr(rc,n.__scopeDialog),i=_.useRef(!1),s=_.useRef(!1);return v.jsx(CB,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{n.onCloseAutoFocus?.(r),r.defaultPrevented||(i.current||t.triggerRef.current?.focus(),r.preventDefault()),i.current=!1,s.current=!1},onInteractOutside:r=>{n.onInteractOutside?.(r),r.defaultPrevented||(i.current=!0,r.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=r.target;t.triggerRef.current?.contains(o)&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&s.current&&r.preventDefault()}})}),CB=_.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:r,...o}=n,a=Pr(rc,t),c=_.useRef(null),d=Dt(e,c);return Lx(),v.jsxs(v.Fragment,{children:[v.jsx(tv,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:s,onUnmountAutoFocus:r,children:v.jsx(ym,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Ux(a.open),...o,ref:d,onDismiss:()=>a.onOpenChange(!1)})}),v.jsxs(v.Fragment,{children:[v.jsx(VK,{titleId:a.titleId}),v.jsx(FK,{contentRef:c,descriptionId:a.descriptionId})]})]})}),jx="DialogTitle",xB=_.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Pr(jx,t);return v.jsx(ht.h2,{id:s.titleId,...i,ref:e})});xB.displayName=jx;var kB="DialogDescription",EB=_.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Pr(kB,t);return v.jsx(ht.p,{id:s.descriptionId,...i,ref:e})});EB.displayName=kB;var SB="DialogClose",TB=_.forwardRef((n,e)=>{const{__scopeDialog:t,...i}=n,s=Pr(SB,t);return v.jsx(ht.button,{type:"button",...i,ref:e,onClick:Be(n.onClick,()=>s.onOpenChange(!1))})});TB.displayName=SB;function Ux(n){return n?"open":"closed"}var IB="DialogTitleWarning",[vRe,RB]=oY(IB,{contentName:rc,titleName:jx,docsSlug:"dialog"}),VK=({titleId:n})=>{const e=RB(IB),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},LK="DialogDescriptionWarning",FK=({contentRef:n,descriptionId:e})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${RB(LK).contentName}}.`;return _.useEffect(()=>{const s=n.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(i))},[i,n,e]),null},zK=bB,jK=yB,UK=AB,HK=_B,WK=xB,$K=EB,GK=TB;function YK({...n}){return v.jsx(zK,{"data-slot":"sheet",...n})}function KK({...n}){return v.jsx(jK,{"data-slot":"sheet-portal",...n})}function qK({className:n,...e}){return v.jsx(UK,{"data-slot":"sheet-overlay",className:Ye("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function QK({className:n,children:e,side:t="right",...i}){return v.jsxs(KK,{children:[v.jsx(qK,{}),v.jsxs(HK,{"data-slot":"sheet-content",className:Ye("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",t==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",t==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",t==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",t==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",n),...i,children:[e,v.jsxs(GK,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[v.jsx(gG,{className:"size-4"}),v.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ZK({className:n,...e}){return v.jsx("div",{"data-slot":"sheet-header",className:Ye("flex flex-col gap-1.5 p-4",n),...e})}function JK({className:n,...e}){return v.jsx(WK,{"data-slot":"sheet-title",className:Ye("text-foreground font-semibold",n),...e})}function XK({className:n,...e}){return v.jsx($K,{"data-slot":"sheet-description",className:Ye("text-muted-foreground text-sm",n),...e})}const eq=["top","right","bottom","left"],sl=Math.min,As=Math.max,Wb=Math.round,Cp=Math.floor,Kr=n=>({x:n,y:n}),tq={left:"right",right:"left",bottom:"top",top:"bottom"},nq={start:"end",end:"start"};function z1(n,e,t){return As(n,sl(e,t))}function oa(n,e){return typeof n=="function"?n(e):n}function aa(n){return n.split("-")[0]}function Dd(n){return n.split("-")[1]}function Hx(n){return n==="x"?"y":"x"}function Wx(n){return n==="y"?"height":"width"}const iq=new Set(["top","bottom"]);function Gr(n){return iq.has(aa(n))?"y":"x"}function $x(n){return Hx(Gr(n))}function sq(n,e,t){t===void 0&&(t=!1);const i=Dd(n),s=$x(n),r=Wx(s);let o=s==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(o=$b(o)),[o,$b(o)]}function rq(n){const e=$b(n);return[j1(n),e,j1(e)]}function j1(n){return n.replace(/start|end/g,e=>nq[e])}const _5=["left","right"],C5=["right","left"],oq=["top","bottom"],aq=["bottom","top"];function lq(n,e,t){switch(n){case"top":case"bottom":return t?e?C5:_5:e?_5:C5;case"left":case"right":return e?oq:aq;default:return[]}}function cq(n,e,t,i){const s=Dd(n);let r=lq(aa(n),t==="start",i);return s&&(r=r.map(o=>o+"-"+s),e&&(r=r.concat(r.map(j1)))),r}function $b(n){return n.replace(/left|right|bottom|top/g,e=>tq[e])}function uq(n){return{top:0,right:0,bottom:0,left:0,...n}}function PB(n){return typeof n!="number"?uq(n):{top:n,right:n,bottom:n,left:n}}function Gb(n){const{x:e,y:t,width:i,height:s}=n;return{width:i,height:s,top:t,left:e,right:e+i,bottom:t+s,x:e,y:t}}function x5(n,e,t){let{reference:i,floating:s}=n;const r=Gr(e),o=$x(e),a=Wx(o),c=aa(e),d=r==="y",h=i.x+i.width/2-s.width/2,m=i.y+i.height/2-s.height/2,p=i[a]/2-s[a]/2;let w;switch(c){case"top":w={x:h,y:i.y-s.height};break;case"bottom":w={x:h,y:i.y+i.height};break;case"right":w={x:i.x+i.width,y:m};break;case"left":w={x:i.x-s.width,y:m};break;default:w={x:i.x,y:i.y}}switch(Dd(e)){case"start":w[o]-=p*(t&&d?-1:1);break;case"end":w[o]+=p*(t&&d?-1:1);break}return w}const dq=async(n,e,t)=>{const{placement:i="bottom",strategy:s="absolute",middleware:r=[],platform:o}=t,a=r.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:h,y:m}=x5(d,i,c),p=i,w={},A=0;for(let C=0;C<a.length;C++){const{name:k,fn:E}=a[C],{x:S,y:I,data:R,reset:O}=await E({x:h,y:m,initialPlacement:i,placement:p,strategy:s,middlewareData:w,rects:d,platform:o,elements:{reference:n,floating:e}});h=S??h,m=I??m,w={...w,[k]:{...w[k],...R}},O&&A<=50&&(A++,typeof O=="object"&&(O.placement&&(p=O.placement),O.rects&&(d=O.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):O.rects),{x:h,y:m}=x5(d,p,c)),C=-1)}return{x:h,y:m,placement:p,strategy:s,middlewareData:w}};async function Dh(n,e){var t;e===void 0&&(e={});const{x:i,y:s,platform:r,rects:o,elements:a,strategy:c}=n,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:p=!1,padding:w=0}=oa(e,n),A=PB(w),k=a[p?m==="floating"?"reference":"floating":m],E=Gb(await r.getClippingRect({element:(t=await(r.isElement==null?void 0:r.isElement(k)))==null||t?k:k.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:d,rootBoundary:h,strategy:c})),S=m==="floating"?{x:i,y:s,width:o.floating.width,height:o.floating.height}:o.reference,I=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),R=await(r.isElement==null?void 0:r.isElement(I))?await(r.getScale==null?void 0:r.getScale(I))||{x:1,y:1}:{x:1,y:1},O=Gb(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:S,offsetParent:I,strategy:c}):S);return{top:(E.top-O.top+A.top)/R.y,bottom:(O.bottom-E.bottom+A.bottom)/R.y,left:(E.left-O.left+A.left)/R.x,right:(O.right-E.right+A.right)/R.x}}const fq=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:s,rects:r,platform:o,elements:a,middlewareData:c}=e,{element:d,padding:h=0}=oa(n,e)||{};if(d==null)return{};const m=PB(h),p={x:t,y:i},w=$x(s),A=Wx(w),C=await o.getDimensions(d),k=w==="y",E=k?"top":"left",S=k?"bottom":"right",I=k?"clientHeight":"clientWidth",R=r.reference[A]+r.reference[w]-p[w]-r.floating[A],O=p[w]-r.reference[w],U=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let P=U?U[I]:0;(!P||!await(o.isElement==null?void 0:o.isElement(U)))&&(P=a.floating[I]||r.floating[A]);const V=R/2-O/2,H=P/2-C[A]/2-1,ie=sl(m[E],H),ke=sl(m[S],H),de=ie,ve=P-C[A]-ke,be=P/2-C[A]/2+V,Ae=z1(de,be,ve),F=!c.arrow&&Dd(s)!=null&&be!==Ae&&r.reference[A]/2-(be<de?ie:ke)-C[A]/2<0,X=F?be<de?be-de:be-ve:0;return{[w]:p[w]+X,data:{[w]:Ae,centerOffset:be-Ae-X,...F&&{alignmentOffset:X}},reset:F}}}),hq=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:s,middlewareData:r,rects:o,initialPlacement:a,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:C=!0,...k}=oa(n,e);if((t=r.arrow)!=null&&t.alignmentOffset)return{};const E=aa(s),S=Gr(a),I=aa(a)===a,R=await(c.isRTL==null?void 0:c.isRTL(d.floating)),O=p||(I||!C?[$b(a)]:rq(a)),U=A!=="none";!p&&U&&O.push(...cq(a,C,A,R));const P=[a,...O],V=await Dh(e,k),H=[];let ie=((i=r.flip)==null?void 0:i.overflows)||[];if(h&&H.push(V[E]),m){const be=sq(s,o,R);H.push(V[be[0]],V[be[1]])}if(ie=[...ie,{placement:s,overflows:H}],!H.every(be=>be<=0)){var ke,de;const be=(((ke=r.flip)==null?void 0:ke.index)||0)+1,Ae=P[be];if(Ae&&(!(m==="alignment"?S!==Gr(Ae):!1)||ie.every($=>Gr($.placement)===S?$.overflows[0]>0:!0)))return{data:{index:be,overflows:ie},reset:{placement:Ae}};let F=(de=ie.filter(X=>X.overflows[0]<=0).sort((X,$)=>X.overflows[1]-$.overflows[1])[0])==null?void 0:de.placement;if(!F)switch(w){case"bestFit":{var ve;const X=(ve=ie.filter($=>{if(U){const re=Gr($.placement);return re===S||re==="y"}return!0}).map($=>[$.placement,$.overflows.filter(re=>re>0).reduce((re,Ve)=>re+Ve,0)]).sort(($,re)=>$[1]-re[1])[0])==null?void 0:ve[0];X&&(F=X);break}case"initialPlacement":F=a;break}if(s!==F)return{reset:{placement:F}}}return{}}}};function k5(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function E5(n){return eq.some(e=>n[e]>=0)}const mq=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...s}=oa(n,e);switch(i){case"referenceHidden":{const r=await Dh(e,{...s,elementContext:"reference"}),o=k5(r,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:E5(o)}}}case"escaped":{const r=await Dh(e,{...s,altBoundary:!0}),o=k5(r,t.floating);return{data:{escapedOffsets:o,escaped:E5(o)}}}default:return{}}}}},OB=new Set(["left","top"]);async function gq(n,e){const{placement:t,platform:i,elements:s}=n,r=await(i.isRTL==null?void 0:i.isRTL(s.floating)),o=aa(t),a=Dd(t),c=Gr(t)==="y",d=OB.has(o)?-1:1,h=r&&c?-1:1,m=oa(e,n);let{mainAxis:p,crossAxis:w,alignmentAxis:A}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return a&&typeof A=="number"&&(w=a==="end"?A*-1:A),c?{x:w*h,y:p*d}:{x:p*d,y:w*h}}const pq=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:s,y:r,placement:o,middlewareData:a}=e,c=await gq(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:s+c.x,y:r+c.y,data:{...c,placement:o}}}}},bq=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:s}=e,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:k=>{let{x:E,y:S}=k;return{x:E,y:S}}},...c}=oa(n,e),d={x:t,y:i},h=await Dh(e,c),m=Gr(aa(s)),p=Hx(m);let w=d[p],A=d[m];if(r){const k=p==="y"?"top":"left",E=p==="y"?"bottom":"right",S=w+h[k],I=w-h[E];w=z1(S,w,I)}if(o){const k=m==="y"?"top":"left",E=m==="y"?"bottom":"right",S=A+h[k],I=A-h[E];A=z1(S,A,I)}const C=a.fn({...e,[p]:w,[m]:A});return{...C,data:{x:C.x-t,y:C.y-i,enabled:{[p]:r,[m]:o}}}}}},wq=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:s,rects:r,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:d=!0}=oa(n,e),h={x:t,y:i},m=Gr(s),p=Hx(m);let w=h[p],A=h[m];const C=oa(a,e),k=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(c){const I=p==="y"?"height":"width",R=r.reference[p]-r.floating[I]+k.mainAxis,O=r.reference[p]+r.reference[I]-k.mainAxis;w<R?w=R:w>O&&(w=O)}if(d){var E,S;const I=p==="y"?"width":"height",R=OB.has(aa(s)),O=r.reference[m]-r.floating[I]+(R&&((E=o.offset)==null?void 0:E[m])||0)+(R?0:k.crossAxis),U=r.reference[m]+r.reference[I]+(R?0:((S=o.offset)==null?void 0:S[m])||0)-(R?k.crossAxis:0);A<O?A=O:A>U&&(A=U)}return{[p]:w,[m]:A}}}},vq=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:s,rects:r,platform:o,elements:a}=e,{apply:c=()=>{},...d}=oa(n,e),h=await Dh(e,d),m=aa(s),p=Dd(s),w=Gr(s)==="y",{width:A,height:C}=r.floating;let k,E;m==="top"||m==="bottom"?(k=m,E=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=m,k=p==="end"?"top":"bottom");const S=C-h.top-h.bottom,I=A-h.left-h.right,R=sl(C-h[k],S),O=sl(A-h[E],I),U=!e.middlewareData.shift;let P=R,V=O;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(V=I),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(P=S),U&&!p){const ie=As(h.left,0),ke=As(h.right,0),de=As(h.top,0),ve=As(h.bottom,0);w?V=A-2*(ie!==0||ke!==0?ie+ke:As(h.left,h.right)):P=C-2*(de!==0||ve!==0?de+ve:As(h.top,h.bottom))}await c({...e,availableWidth:V,availableHeight:P});const H=await o.getDimensions(a.floating);return A!==H.width||C!==H.height?{reset:{rects:!0}}:{}}}};function rv(){return typeof window<"u"}function Md(n){return DB(n)?(n.nodeName||"").toLowerCase():"#document"}function Es(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ao(n){var e;return(e=(DB(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function DB(n){return rv()?n instanceof Node||n instanceof Es(n).Node:!1}function Cr(n){return rv()?n instanceof Element||n instanceof Es(n).Element:!1}function eo(n){return rv()?n instanceof HTMLElement||n instanceof Es(n).HTMLElement:!1}function S5(n){return!rv()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Es(n).ShadowRoot}const yq=new Set(["inline","contents"]);function _m(n){const{overflow:e,overflowX:t,overflowY:i,display:s}=xr(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!yq.has(s)}const Aq=new Set(["table","td","th"]);function _q(n){return Aq.has(Md(n))}const Cq=[":popover-open",":modal"];function ov(n){return Cq.some(e=>{try{return n.matches(e)}catch{return!1}})}const xq=["transform","translate","scale","rotate","perspective"],kq=["transform","translate","scale","rotate","perspective","filter"],Eq=["paint","layout","strict","content"];function Gx(n){const e=Yx(),t=Cr(n)?xr(n):n;return xq.some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||kq.some(i=>(t.willChange||"").includes(i))||Eq.some(i=>(t.contain||"").includes(i))}function Sq(n){let e=rl(n);for(;eo(e)&&!fd(e);){if(Gx(e))return e;if(ov(e))return null;e=rl(e)}return null}function Yx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Tq=new Set(["html","body","#document"]);function fd(n){return Tq.has(Md(n))}function xr(n){return Es(n).getComputedStyle(n)}function av(n){return Cr(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function rl(n){if(Md(n)==="html")return n;const e=n.assignedSlot||n.parentNode||S5(n)&&n.host||ao(n);return S5(e)?e.host:e}function MB(n){const e=rl(n);return fd(e)?n.ownerDocument?n.ownerDocument.body:n.body:eo(e)&&_m(e)?e:MB(e)}function Mh(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=MB(n),r=s===((i=n.ownerDocument)==null?void 0:i.body),o=Es(s);if(r){const a=U1(o);return e.concat(o,o.visualViewport||[],_m(s)?s:[],a&&t?Mh(a):[])}return e.concat(s,Mh(s,[],t))}function U1(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function BB(n){const e=xr(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const s=eo(n),r=s?n.offsetWidth:t,o=s?n.offsetHeight:i,a=Wb(t)!==r||Wb(i)!==o;return a&&(t=r,i=o),{width:t,height:i,$:a}}function Kx(n){return Cr(n)?n:n.contextElement}function Xu(n){const e=Kx(n);if(!eo(e))return Kr(1);const t=e.getBoundingClientRect(),{width:i,height:s,$:r}=BB(e);let o=(r?Wb(t.width):t.width)/i,a=(r?Wb(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Iq=Kr(0);function NB(n){const e=Es(n);return!Yx()||!e.visualViewport?Iq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Rq(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Es(n)?!1:e}function oc(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),r=Kx(n);let o=Kr(1);e&&(i?Cr(i)&&(o=Xu(i)):o=Xu(n));const a=Rq(r,t,i)?NB(r):Kr(0);let c=(s.left+a.x)/o.x,d=(s.top+a.y)/o.y,h=s.width/o.x,m=s.height/o.y;if(r){const p=Es(r),w=i&&Cr(i)?Es(i):i;let A=p,C=U1(A);for(;C&&i&&w!==A;){const k=Xu(C),E=C.getBoundingClientRect(),S=xr(C),I=E.left+(C.clientLeft+parseFloat(S.paddingLeft))*k.x,R=E.top+(C.clientTop+parseFloat(S.paddingTop))*k.y;c*=k.x,d*=k.y,h*=k.x,m*=k.y,c+=I,d+=R,A=Es(C),C=U1(A)}}return Gb({width:h,height:m,x:c,y:d})}function lv(n,e){const t=av(n).scrollLeft;return e?e.left+t:oc(ao(n)).left+t}function VB(n,e){const t=n.getBoundingClientRect(),i=t.left+e.scrollLeft-lv(n,t),s=t.top+e.scrollTop;return{x:i,y:s}}function Pq(n){let{elements:e,rect:t,offsetParent:i,strategy:s}=n;const r=s==="fixed",o=ao(i),a=e?ov(e.floating):!1;if(i===o||a&&r)return t;let c={scrollLeft:0,scrollTop:0},d=Kr(1);const h=Kr(0),m=eo(i);if((m||!m&&!r)&&((Md(i)!=="body"||_m(o))&&(c=av(i)),eo(i))){const w=oc(i);d=Xu(i),h.x=w.x+i.clientLeft,h.y=w.y+i.clientTop}const p=o&&!m&&!r?VB(o,c):Kr(0);return{width:t.width*d.x,height:t.height*d.y,x:t.x*d.x-c.scrollLeft*d.x+h.x+p.x,y:t.y*d.y-c.scrollTop*d.y+h.y+p.y}}function Oq(n){return Array.from(n.getClientRects())}function Dq(n){const e=ao(n),t=av(n),i=n.ownerDocument.body,s=As(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),r=As(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+lv(n);const a=-t.scrollTop;return xr(i).direction==="rtl"&&(o+=As(e.clientWidth,i.clientWidth)-s),{width:s,height:r,x:o,y:a}}const T5=25;function Mq(n,e){const t=Es(n),i=ao(n),s=t.visualViewport;let r=i.clientWidth,o=i.clientHeight,a=0,c=0;if(s){r=s.width,o=s.height;const h=Yx();(!h||h&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}const d=lv(i);if(d<=0){const h=i.ownerDocument,m=h.body,p=getComputedStyle(m),w=h.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,A=Math.abs(i.clientWidth-m.clientWidth-w);A<=T5&&(r-=A)}else d<=T5&&(r+=d);return{width:r,height:o,x:a,y:c}}const Bq=new Set(["absolute","fixed"]);function Nq(n,e){const t=oc(n,!0,e==="fixed"),i=t.top+n.clientTop,s=t.left+n.clientLeft,r=eo(n)?Xu(n):Kr(1),o=n.clientWidth*r.x,a=n.clientHeight*r.y,c=s*r.x,d=i*r.y;return{width:o,height:a,x:c,y:d}}function I5(n,e,t){let i;if(e==="viewport")i=Mq(n,t);else if(e==="document")i=Dq(ao(n));else if(Cr(e))i=Nq(e,t);else{const s=NB(n);i={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Gb(i)}function LB(n,e){const t=rl(n);return t===e||!Cr(t)||fd(t)?!1:xr(t).position==="fixed"||LB(t,e)}function Vq(n,e){const t=e.get(n);if(t)return t;let i=Mh(n,[],!1).filter(a=>Cr(a)&&Md(a)!=="body"),s=null;const r=xr(n).position==="fixed";let o=r?rl(n):n;for(;Cr(o)&&!fd(o);){const a=xr(o),c=Gx(o);!c&&a.position==="fixed"&&(s=null),(r?!c&&!s:!c&&a.position==="static"&&!!s&&Bq.has(s.position)||_m(o)&&!c&&LB(n,o))?i=i.filter(h=>h!==o):s=a,o=rl(o)}return e.set(n,i),i}function Lq(n){let{element:e,boundary:t,rootBoundary:i,strategy:s}=n;const o=[...t==="clippingAncestors"?ov(e)?[]:Vq(e,this._c):[].concat(t),i],a=o[0],c=o.reduce((d,h)=>{const m=I5(e,h,s);return d.top=As(m.top,d.top),d.right=sl(m.right,d.right),d.bottom=sl(m.bottom,d.bottom),d.left=As(m.left,d.left),d},I5(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Fq(n){const{width:e,height:t}=BB(n);return{width:e,height:t}}function zq(n,e,t){const i=eo(e),s=ao(e),r=t==="fixed",o=oc(n,!0,r,e);let a={scrollLeft:0,scrollTop:0};const c=Kr(0);function d(){c.x=lv(s)}if(i||!i&&!r)if((Md(e)!=="body"||_m(s))&&(a=av(e)),i){const w=oc(e,!0,r,e);c.x=w.x+e.clientLeft,c.y=w.y+e.clientTop}else s&&d();r&&!i&&s&&d();const h=s&&!i&&!r?VB(s,a):Kr(0),m=o.left+a.scrollLeft-c.x-h.x,p=o.top+a.scrollTop-c.y-h.y;return{x:m,y:p,width:o.width,height:o.height}}function s_(n){return xr(n).position==="static"}function R5(n,e){if(!eo(n)||xr(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ao(n)===t&&(t=t.ownerDocument.body),t}function FB(n,e){const t=Es(n);if(ov(n))return t;if(!eo(n)){let s=rl(n);for(;s&&!fd(s);){if(Cr(s)&&!s_(s))return s;s=rl(s)}return t}let i=R5(n,e);for(;i&&_q(i)&&s_(i);)i=R5(i,e);return i&&fd(i)&&s_(i)&&!Gx(i)?t:i||Sq(n)||t}const jq=async function(n){const e=this.getOffsetParent||FB,t=this.getDimensions,i=await t(n.floating);return{reference:zq(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Uq(n){return xr(n).direction==="rtl"}const Hq={convertOffsetParentRelativeRectToViewportRelativeRect:Pq,getDocumentElement:ao,getClippingRect:Lq,getOffsetParent:FB,getElementRects:jq,getClientRects:Oq,getDimensions:Fq,getScale:Xu,isElement:Cr,isRTL:Uq};function zB(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function Wq(n,e){let t=null,i;const s=ao(n);function r(){var a;clearTimeout(i),(a=t)==null||a.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),r();const d=n.getBoundingClientRect(),{left:h,top:m,width:p,height:w}=d;if(a||e(),!p||!w)return;const A=Cp(m),C=Cp(s.clientWidth-(h+p)),k=Cp(s.clientHeight-(m+w)),E=Cp(h),I={rootMargin:-A+"px "+-C+"px "+-k+"px "+-E+"px",threshold:As(0,sl(1,c))||1};let R=!0;function O(U){const P=U[0].intersectionRatio;if(P!==c){if(!R)return o();P?o(!1,P):i=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!zB(d,n.getBoundingClientRect())&&o(),R=!1}try{t=new IntersectionObserver(O,{...I,root:s.ownerDocument})}catch{t=new IntersectionObserver(O,I)}t.observe(n)}return o(!0),r}function $q(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=i,d=Kx(n),h=s||r?[...d?Mh(d):[],...Mh(e)]:[];h.forEach(E=>{s&&E.addEventListener("scroll",t,{passive:!0}),r&&E.addEventListener("resize",t)});const m=d&&a?Wq(d,t):null;let p=-1,w=null;o&&(w=new ResizeObserver(E=>{let[S]=E;S&&S.target===d&&w&&(w.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var I;(I=w)==null||I.observe(e)})),t()}),d&&!c&&w.observe(d),w.observe(e));let A,C=c?oc(n):null;c&&k();function k(){const E=oc(n);C&&!zB(C,E)&&t(),C=E,A=requestAnimationFrame(k)}return t(),()=>{var E;h.forEach(S=>{s&&S.removeEventListener("scroll",t),r&&S.removeEventListener("resize",t)}),m?.(),(E=w)==null||E.disconnect(),w=null,c&&cancelAnimationFrame(A)}}const Gq=pq,Yq=bq,Kq=hq,qq=vq,Qq=mq,P5=fq,Zq=wq,Jq=(n,e,t)=>{const i=new Map,s={platform:Hq,...t},r={...s.platform,_c:i};return dq(n,e,{...s,platform:r})};var Xq=typeof document<"u",eQ=function(){},mb=Xq?_.useLayoutEffect:eQ;function Yb(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!Yb(n[i],e[i]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,s[i]))return!1;for(i=t;i--!==0;){const r=s[i];if(!(r==="_owner"&&n.$$typeof)&&!Yb(n[r],e[r]))return!1}return!0}return n!==n&&e!==e}function jB(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function O5(n,e){const t=jB(n);return Math.round(e*t)/t}function r_(n){const e=_.useRef(n);return mb(()=>{e.current=n}),e}function tQ(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:s,elements:{reference:r,floating:o}={},transform:a=!0,whileElementsMounted:c,open:d}=n,[h,m]=_.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[p,w]=_.useState(i);Yb(p,i)||w(i);const[A,C]=_.useState(null),[k,E]=_.useState(null),S=_.useCallback($=>{$!==U.current&&(U.current=$,C($))},[]),I=_.useCallback($=>{$!==P.current&&(P.current=$,E($))},[]),R=r||A,O=o||k,U=_.useRef(null),P=_.useRef(null),V=_.useRef(h),H=c!=null,ie=r_(c),ke=r_(s),de=r_(d),ve=_.useCallback(()=>{if(!U.current||!P.current)return;const $={placement:e,strategy:t,middleware:p};ke.current&&($.platform=ke.current),Jq(U.current,P.current,$).then(re=>{const Ve={...re,isPositioned:de.current!==!1};be.current&&!Yb(V.current,Ve)&&(V.current=Ve,wm.flushSync(()=>{m(Ve)}))})},[p,e,t,ke,de]);mb(()=>{d===!1&&V.current.isPositioned&&(V.current.isPositioned=!1,m($=>({...$,isPositioned:!1})))},[d]);const be=_.useRef(!1);mb(()=>(be.current=!0,()=>{be.current=!1}),[]),mb(()=>{if(R&&(U.current=R),O&&(P.current=O),R&&O){if(ie.current)return ie.current(R,O,ve);ve()}},[R,O,ve,ie,H]);const Ae=_.useMemo(()=>({reference:U,floating:P,setReference:S,setFloating:I}),[S,I]),F=_.useMemo(()=>({reference:R,floating:O}),[R,O]),X=_.useMemo(()=>{const $={position:t,left:0,top:0};if(!F.floating)return $;const re=O5(F.floating,h.x),Ve=O5(F.floating,h.y);return a?{...$,transform:"translate("+re+"px, "+Ve+"px)",...jB(F.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:re,top:Ve}},[t,a,F.floating,h.x,h.y]);return _.useMemo(()=>({...h,update:ve,refs:Ae,elements:F,floatingStyles:X}),[h,ve,Ae,F,X])}const nQ=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:s}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?P5({element:i.current,padding:s}).fn(t):{}:i?P5({element:i,padding:s}).fn(t):{}}}},iQ=(n,e)=>({...Gq(n),options:[n,e]}),sQ=(n,e)=>({...Yq(n),options:[n,e]}),rQ=(n,e)=>({...Zq(n),options:[n,e]}),oQ=(n,e)=>({...Kq(n),options:[n,e]}),aQ=(n,e)=>({...qq(n),options:[n,e]}),lQ=(n,e)=>({...Qq(n),options:[n,e]}),cQ=(n,e)=>({...nQ(n),options:[n,e]});var uQ="Arrow",UB=_.forwardRef((n,e)=>{const{children:t,width:i=10,height:s=5,...r}=n;return v.jsx(ht.svg,{...r,ref:e,width:i,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:v.jsx("polygon",{points:"0,0 30,0 15,10"})})});UB.displayName=uQ;var dQ=UB;function fQ(n){const[e,t]=_.useState(void 0);return Qn(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const r=s[0];let o,a;if("borderBoxSize"in r){const c=r.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,a=d.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}var qx="Popper",[HB,Bd]=fl(qx),[hQ,WB]=HB(qx),$B=n=>{const{__scopePopper:e,children:t}=n,[i,s]=_.useState(null);return v.jsx(hQ,{scope:e,anchor:i,onAnchorChange:s,children:t})};$B.displayName=qx;var GB="PopperAnchor",YB=_.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...s}=n,r=WB(GB,t),o=_.useRef(null),a=Dt(e,o),c=_.useRef(null);return _.useEffect(()=>{const d=c.current;c.current=i?.current||o.current,d!==c.current&&r.onAnchorChange(c.current)}),i?null:v.jsx(ht.div,{...s,ref:a})});YB.displayName=GB;var Qx="PopperContent",[mQ,gQ]=HB(Qx),KB=_.forwardRef((n,e)=>{const{__scopePopper:t,side:i="bottom",sideOffset:s=0,align:r="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:w="optimized",onPlaced:A,...C}=n,k=WB(Qx,t),[E,S]=_.useState(null),I=Dt(e,oe=>S(oe)),[R,O]=_.useState(null),U=fQ(R),P=U?.width??0,V=U?.height??0,H=i+(r!=="center"?"-"+r:""),ie=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},ke=Array.isArray(d)?d:[d],de=ke.length>0,ve={padding:ie,boundary:ke.filter(bQ),altBoundary:de},{refs:be,floatingStyles:Ae,placement:F,isPositioned:X,middlewareData:$}=tQ({strategy:"fixed",placement:H,whileElementsMounted:(...oe)=>$q(...oe,{animationFrame:w==="always"}),elements:{reference:k.anchor},middleware:[iQ({mainAxis:s+V,alignmentAxis:o}),c&&sQ({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?rQ():void 0,...ve}),c&&oQ({...ve}),aQ({...ve,apply:({elements:oe,rects:Ue,availableWidth:$e,availableHeight:qe})=>{const{width:Ze,height:it}=Ue.reference,kn=oe.floating.style;kn.setProperty("--radix-popper-available-width",`${$e}px`),kn.setProperty("--radix-popper-available-height",`${qe}px`),kn.setProperty("--radix-popper-anchor-width",`${Ze}px`),kn.setProperty("--radix-popper-anchor-height",`${it}px`)}}),R&&cQ({element:R,padding:a}),wQ({arrowWidth:P,arrowHeight:V}),p&&lQ({strategy:"referenceHidden",...ve})]}),[re,Ve]=ZB(F),B=_r(A);Qn(()=>{X&&B?.()},[X,B]);const J=$.arrow?.x,fe=$.arrow?.y,he=$.arrow?.centerOffset!==0,[Me,Ie]=_.useState();return Qn(()=>{E&&Ie(window.getComputedStyle(E).zIndex)},[E]),v.jsx("div",{ref:be.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ae,transform:X?Ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[$.transformOrigin?.x,$.transformOrigin?.y].join(" "),...$.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:v.jsx(mQ,{scope:t,placedSide:re,onArrowChange:O,arrowX:J,arrowY:fe,shouldHideArrow:he,children:v.jsx(ht.div,{"data-side":re,"data-align":Ve,...C,ref:I,style:{...C.style,animation:X?void 0:"none"}})})})});KB.displayName=Qx;var qB="PopperArrow",pQ={top:"bottom",right:"left",bottom:"top",left:"right"},QB=_.forwardRef(function(e,t){const{__scopePopper:i,...s}=e,r=gQ(qB,i),o=pQ[r.placedSide];return v.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:v.jsx(dQ,{...s,ref:t,style:{...s.style,display:"block"}})})});QB.displayName=qB;function bQ(n){return n!==null}var wQ=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:i,middlewareData:s}=e,o=s.arrow?.centerOffset!==0,a=o?0:n.arrowWidth,c=o?0:n.arrowHeight,[d,h]=ZB(t),m={start:"0%",center:"50%",end:"100%"}[h],p=(s.arrow?.x??0)+a/2,w=(s.arrow?.y??0)+c/2;let A="",C="";return d==="bottom"?(A=o?m:`${p}px`,C=`${-c}px`):d==="top"?(A=o?m:`${p}px`,C=`${i.floating.height+c}px`):d==="right"?(A=`${-c}px`,C=o?m:`${w}px`):d==="left"&&(A=`${i.floating.width+c}px`,C=o?m:`${w}px`),{data:{x:A,y:C}}}});function ZB(n){const[e,t="center"]=n.split("-");return[e,t]}var Zx=$B,Jx=YB,Xx=KB,ek=QB,vQ=Symbol("radix.slottable");function yQ(n){const e=({children:t})=>v.jsx(v.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=vQ,e}var JB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),AQ="VisuallyHidden",XB=_.forwardRef((n,e)=>v.jsx(ht.span,{...n,ref:e,style:{...JB,...n.style}}));XB.displayName=AQ;var _Q=XB,[cv]=fl("Tooltip",[Bd]),uv=Bd(),eN="TooltipProvider",CQ=700,H1="tooltip.open",[xQ,tk]=cv(eN),tN=n=>{const{__scopeTooltip:e,delayDuration:t=CQ,skipDelayDuration:i=300,disableHoverableContent:s=!1,children:r}=n,o=_.useRef(!0),a=_.useRef(!1),c=_.useRef(0);return _.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),v.jsx(xQ,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:_.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,i)},[i]),isPointerInTransitRef:a,onPointerInTransitChange:_.useCallback(d=>{a.current=d},[]),disableHoverableContent:s,children:r})};tN.displayName=eN;var Bh="Tooltip",[kQ,Cm]=cv(Bh),nN=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:s,onOpenChange:r,disableHoverableContent:o,delayDuration:a}=n,c=tk(Bh,n.__scopeTooltip),d=uv(e),[h,m]=_.useState(null),p=Yr(),w=_.useRef(0),A=o??c.disableHoverableContent,C=a??c.delayDuration,k=_.useRef(!1),[E,S]=dd({prop:i,defaultProp:s??!1,onChange:P=>{P?(c.onOpen(),document.dispatchEvent(new CustomEvent(H1))):c.onClose(),r?.(P)},caller:Bh}),I=_.useMemo(()=>E?k.current?"delayed-open":"instant-open":"closed",[E]),R=_.useCallback(()=>{window.clearTimeout(w.current),w.current=0,k.current=!1,S(!0)},[S]),O=_.useCallback(()=>{window.clearTimeout(w.current),w.current=0,S(!1)},[S]),U=_.useCallback(()=>{window.clearTimeout(w.current),w.current=window.setTimeout(()=>{k.current=!0,S(!0),w.current=0},C)},[C,S]);return _.useEffect(()=>()=>{w.current&&(window.clearTimeout(w.current),w.current=0)},[]),v.jsx(Zx,{...d,children:v.jsx(kQ,{scope:e,contentId:p,open:E,stateAttribute:I,trigger:h,onTriggerChange:m,onTriggerEnter:_.useCallback(()=>{c.isOpenDelayedRef.current?U():R()},[c.isOpenDelayedRef,U,R]),onTriggerLeave:_.useCallback(()=>{A?O():(window.clearTimeout(w.current),w.current=0)},[O,A]),onOpen:R,onClose:O,disableHoverableContent:A,children:t})})};nN.displayName=Bh;var W1="TooltipTrigger",iN=_.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,s=Cm(W1,t),r=tk(W1,t),o=uv(t),a=_.useRef(null),c=Dt(e,a,s.onTriggerChange),d=_.useRef(!1),h=_.useRef(!1),m=_.useCallback(()=>d.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),v.jsx(Jx,{asChild:!0,...o,children:v.jsx(ht.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...i,ref:c,onPointerMove:Be(n.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!r.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:Be(n.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:Be(n.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Be(n.onFocus,()=>{d.current||s.onOpen()}),onBlur:Be(n.onBlur,s.onClose),onClick:Be(n.onClick,s.onClose)})})});iN.displayName=W1;var nk="TooltipPortal",[EQ,SQ]=cv(nk,{forceMount:void 0}),sN=n=>{const{__scopeTooltip:e,forceMount:t,children:i,container:s}=n,r=Cm(nk,e);return v.jsx(EQ,{scope:e,forceMount:t,children:v.jsx(oo,{present:t||r.open,children:v.jsx(Am,{asChild:!0,container:s,children:i})})})};sN.displayName=nk;var hd="TooltipContent",rN=_.forwardRef((n,e)=>{const t=SQ(hd,n.__scopeTooltip),{forceMount:i=t.forceMount,side:s="top",...r}=n,o=Cm(hd,n.__scopeTooltip);return v.jsx(oo,{present:i||o.open,children:o.disableHoverableContent?v.jsx(oN,{side:s,...r,ref:e}):v.jsx(TQ,{side:s,...r,ref:e})})}),TQ=_.forwardRef((n,e)=>{const t=Cm(hd,n.__scopeTooltip),i=tk(hd,n.__scopeTooltip),s=_.useRef(null),r=Dt(e,s),[o,a]=_.useState(null),{trigger:c,onClose:d}=t,h=s.current,{onPointerInTransitChange:m}=i,p=_.useCallback(()=>{a(null),m(!1)},[m]),w=_.useCallback((A,C)=>{const k=A.currentTarget,E={x:A.clientX,y:A.clientY},S=OQ(E,k.getBoundingClientRect()),I=DQ(E,S),R=MQ(C.getBoundingClientRect()),O=NQ([...I,...R]);a(O),m(!0)},[m]);return _.useEffect(()=>()=>p(),[p]),_.useEffect(()=>{if(c&&h){const A=k=>w(k,h),C=k=>w(k,c);return c.addEventListener("pointerleave",A),h.addEventListener("pointerleave",C),()=>{c.removeEventListener("pointerleave",A),h.removeEventListener("pointerleave",C)}}},[c,h,w,p]),_.useEffect(()=>{if(o){const A=C=>{const k=C.target,E={x:C.clientX,y:C.clientY},S=c?.contains(k)||h?.contains(k),I=!BQ(E,o);S?p():I&&(p(),d())};return document.addEventListener("pointermove",A),()=>document.removeEventListener("pointermove",A)}},[c,h,o,d,p]),v.jsx(oN,{...n,ref:r})}),[IQ,RQ]=cv(Bh,{isInside:!1}),PQ=yQ("TooltipContent"),oN=_.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":s,onEscapeKeyDown:r,onPointerDownOutside:o,...a}=n,c=Cm(hd,t),d=uv(t),{onClose:h}=c;return _.useEffect(()=>(document.addEventListener(H1,h),()=>document.removeEventListener(H1,h)),[h]),_.useEffect(()=>{if(c.trigger){const m=p=>{p.target?.contains(c.trigger)&&h()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,h]),v.jsx(ym,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:h,children:v.jsxs(Xx,{"data-state":c.stateAttribute,...d,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[v.jsx(PQ,{children:i}),v.jsx(IQ,{scope:t,isInside:!0,children:v.jsx(_Q,{id:c.contentId,role:"tooltip",children:s||i})})]})})});rN.displayName=hd;var aN="TooltipArrow",lN=_.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,s=uv(t);return RQ(aN,t).isInside?null:v.jsx(ek,{...s,...i,ref:e})});lN.displayName=aN;function OQ(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),r=Math.abs(e.left-n.x);switch(Math.min(t,i,s,r)){case r:return"left";case s:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function DQ(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function MQ(n){const{top:e,right:t,bottom:i,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:i},{x:s,y:i}]}function BQ(n,e){const{x:t,y:i}=n;let s=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){const a=e[r],c=e[o],d=a.x,h=a.y,m=c.x,p=c.y;h>i!=p>i&&t<(m-d)*(i-h)/(p-h)+d&&(s=!s)}return s}function NQ(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),VQ(e)}function VQ(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const s=n[i];for(;e.length>=2;){const r=e[e.length-1],o=e[e.length-2];if((r.x-o.x)*(s.y-o.y)>=(r.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const s=n[i];for(;t.length>=2;){const r=t[t.length-1],o=t[t.length-2];if((r.x-o.x)*(s.y-o.y)>=(r.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var LQ=tN,FQ=nN,zQ=iN,jQ=sN,UQ=rN,HQ=lN;function cN({delayDuration:n=0,...e}){return v.jsx(LQ,{"data-slot":"tooltip-provider",delayDuration:n,...e})}function WQ({...n}){return v.jsx(cN,{children:v.jsx(FQ,{"data-slot":"tooltip",...n})})}function $Q({...n}){return v.jsx(zQ,{"data-slot":"tooltip-trigger",...n})}function GQ({className:n,sideOffset:e=0,children:t,...i}){return v.jsx(jQ,{children:v.jsxs(UQ,{"data-slot":"tooltip-content",sideOffset:e,className:Ye("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",n),...i,children:[t,v.jsx(HQ,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const YQ="sidebar_state",KQ=3600*24*7,qQ="16rem",QQ="18rem",ZQ="3rem",JQ="b",uN=_.createContext(null);function ik(){const n=_.useContext(uN);if(!n)throw new Error("useSidebar must be used within a SidebarProvider.");return n}function XQ({defaultOpen:n=!0,open:e,onOpenChange:t,className:i,style:s,children:r,...o}){const a=pG(),[c,d]=_.useState(!1),[h,m]=_.useState(n),p=e??h,w=_.useCallback(E=>{const S=typeof E=="function"?E(p):E;t?t(S):m(S),document.cookie=`${YQ}=${S}; path=/; max-age=${KQ}`},[t,p]),A=_.useCallback(()=>a?d(E=>!E):w(E=>!E),[a,w,d]);_.useEffect(()=>{const E=S=>{S.key===JQ&&(S.metaKey||S.ctrlKey)&&(S.preventDefault(),A())};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[A]);const C=p?"expanded":"collapsed",k=_.useMemo(()=>({state:C,open:p,setOpen:w,isMobile:a,openMobile:c,setOpenMobile:d,toggleSidebar:A}),[C,p,w,a,c,d,A]);return v.jsx(uN.Provider,{value:k,children:v.jsx(cN,{delayDuration:0,children:v.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":qQ,"--sidebar-width-icon":ZQ,...s},className:Ye("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",i),...o,children:r})})})}function eZ({side:n="left",variant:e="sidebar",collapsible:t="offcanvas",className:i,children:s,...r}){const{isMobile:o,state:a,openMobile:c,setOpenMobile:d}=ik();return t==="none"?v.jsx("div",{"data-slot":"sidebar",className:Ye("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",i),...r,children:s}):o?v.jsx(YK,{open:c,onOpenChange:d,...r,children:v.jsxs(QK,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":QQ},side:n,children:[v.jsxs(ZK,{className:"sr-only",children:[v.jsx(JK,{children:"Sidebar"}),v.jsx(XK,{children:"Displays the mobile sidebar."})]}),v.jsx("div",{className:"flex h-full w-full flex-col",children:s})]})}):v.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":a,"data-collapsible":a==="collapsed"?t:"","data-variant":e,"data-side":n,"data-slot":"sidebar",children:[v.jsx("div",{"data-slot":"sidebar-gap",className:Ye("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),v.jsx("div",{"data-slot":"sidebar-container",className:Ye("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",n==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",i),...r,children:v.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:s})})]})}function tZ({className:n,...e}){return v.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:Ye("flex flex-col gap-2 p-2",n),...e})}function nZ({className:n,...e}){return v.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:Ye("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",n),...e})}function D5({className:n,...e}){return v.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:Ye("relative flex w-full min-w-0 flex-col p-2",n),...e})}function iZ({className:n,asChild:e=!1,...t}){const i=e?vm:"div";return v.jsx(i,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:Ye("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",n),...t})}function M5({className:n,...e}){return v.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:Ye("flex w-full min-w-0 flex-col gap-1",n),...e})}function Cu({className:n,...e}){return v.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:Ye("group/menu-item relative",n),...e})}const sZ=Nx("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function xu({asChild:n=!1,isActive:e=!1,variant:t="default",size:i="default",tooltip:s,className:r,...o}){const a=n?vm:"button",{isMobile:c,state:d}=ik(),h=v.jsx(a,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":i,"data-active":e,className:Ye(sZ({variant:t,size:i}),r),...o});return s?(typeof s=="string"&&(s={children:s}),v.jsxs(WQ,{children:[v.jsx($Q,{asChild:!0,children:h}),v.jsx(GQ,{side:"right",align:"center",hidden:d!=="collapsed"||c,...s})]})):h}const sk="/assets/PassItOn-vOxkLJvw.png";var dN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},B5=Ee.createContext&&Ee.createContext(dN),rZ=["attr","size","title"];function oZ(n,e){if(n==null)return{};var t=aZ(n,e),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function aZ(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function Kb(){return Kb=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Kb.apply(this,arguments)}function N5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function qb(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?N5(Object(t),!0).forEach(function(i){lZ(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):N5(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function lZ(n,e,t){return e=cZ(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function cZ(n){var e=uZ(n,"string");return typeof e=="symbol"?e:e+""}function uZ(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function fN(n){return n&&n.map((e,t)=>Ee.createElement(e.tag,qb({key:t},e.attr),fN(e.child)))}function Zn(n){return e=>Ee.createElement(dZ,Kb({attr:qb({},n.attr)},e),fN(n.child))}function dZ(n){var e=t=>{var{attr:i,size:s,title:r}=n,o=oZ(n,rZ),a=s||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),Ee.createElement("svg",Kb({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:c,style:qb(qb({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),r&&Ee.createElement("title",null,r),n.children)};return B5!==void 0?Ee.createElement(B5.Consumer,null,t=>e(t)):e(dN)}function fZ(n){return Zn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m350.54 148.68-26.62-42.06C318.31 100.08 310.62 96 302 96h-92c-8.62 0-16.31 4.08-21.92 10.62l-26.62 42.06C155.85 155.23 148.62 160 140 160H80a32 32 0 0 0-32 32v192a32 32 0 0 0 32 32h352a32 32 0 0 0 32-32V192a32 32 0 0 0-32-32h-59c-8.65 0-16.85-4.77-22.46-11.32z"},child:[]},{tag:"circle",attr:{cx:"256",cy:"272",r:"80",fill:"none",strokeMiterlimit:"10",strokeWidth:"32"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M124 158v-22h-24v22"},child:[]}]})(n)}function hZ(n){return Zn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M80 212v236a16 16 0 0 0 16 16h96V328a24 24 0 0 1 24-24h80a24 24 0 0 1 24 24v136h96a16 16 0 0 0 16-16V212"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M480 256 266.89 52c-5-5.28-16.69-5.34-21.78 0L32 256m368-77V64h-48v69"},child:[]}]})(n)}function mZ(n){return Zn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M304 336v40a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V136a40 40 0 0 1 40-40h152c22.09 0 48 17.91 48 40v40m64 160 80-80-80-80m-192 80h256"},child:[]}]})(n)}function gZ(n){return Zn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 3H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM9 9H5V5h4v4zm11 4h-6a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1zm-1 6h-4v-4h4v4zM17 3c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2zM7 13c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2z"},child:[]}]})(n)}function pZ(n){return Zn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 3H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM9 9H5V5h4v4zm11-6h-6a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm-1 6h-4V5h4v4zm-9 4H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1zm-1 6H5v-4h4v4zm8-6c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4-1.794-4-4-4zm0 6c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2z"},child:[]}]})(n)}function bZ(n){return Zn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M5,16 C3.343,16 2,17.343 2,19 C2,20.657 3.343,22 5,22 C6.657,22 8,20.657 8,19 C8,17.343 6.657,16 5,16 L5,16 L5,16 Z M5,1 C14.925,1 23,9.075 23,19 L23,19 M18,19 C18,11.832 12.168,6 5,6 M13,19 C13,14.589 9.411,11 5,11 M2,11 L2,19 L2,19"},child:[]}]})(n)}function wZ(n){return Zn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"},child:[]}]})(n)}function vZ(n){return Zn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M88.2 309.1c9.8-18.3 6.8-40.8-7.5-55.8C59.4 230.9 48 204 48 176c0-63.5 63.8-128 160-128s160 64.5 160 128s-63.8 128-160 128c-13.1 0-25.8-1.3-37.8-3.6c-10.4-2-21.2-.6-30.7 4.2c-4.1 2.1-8.3 4.1-12.6 6c-16 7.2-32.9 13.5-49.9 18c2.8-4.6 5.4-9.1 7.9-13.6c1.1-1.9 2.2-3.9 3.2-5.9zM208 352c114.9 0 208-78.8 208-176S322.9 0 208 0S0 78.8 0 176c0 41.8 17.2 80.1 45.9 110.3c-.9 1.7-1.9 3.5-2.8 5.1c-10.3 18.4-22.3 36.5-36.6 52.1c-6.6 7-8.3 17.2-4.6 25.9C5.8 378.3 14.4 384 24 384c43 0 86.5-13.3 122.7-29.7c4.8-2.2 9.6-4.5 14.2-6.8c15.1 3 30.9 4.5 47.1 4.5zM432 480c16.2 0 31.9-1.6 47.1-4.5c4.6 2.3 9.4 4.6 14.2 6.8C529.5 498.7 573 512 616 512c9.6 0 18.2-5.7 22-14.5c3.8-8.8 2-19-4.6-25.9c-14.2-15.6-26.2-33.7-36.6-52.1c-.9-1.7-1.9-3.4-2.8-5.1C622.8 384.1 640 345.8 640 304c0-94.4-87.9-171.5-198.2-175.8c4.1 15.2 6.2 31.2 6.2 47.8l0 .6c87.2 6.7 144 67.5 144 127.4c0 28-11.4 54.9-32.7 77.2c-14.3 15-17.3 37.6-7.5 55.8c1.1 2 2.2 4 3.2 5.9c2.5 4.5 5.2 9 7.9 13.6c-17-4.5-33.9-10.7-49.9-18c-4.3-1.9-8.5-3.9-12.6-6c-9.5-4.8-20.3-6.2-30.7-4.2c-12.1 2.4-24.8 3.6-37.8 3.6c-61.7 0-110-26.5-136.8-62.3c-16 5.4-32.8 9.4-50 11.8C279 439.8 350 480 432 480z"},child:[]}]})(n)}function yZ(n){return Zn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(n)}function AZ(n){return Zn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12Zm0-1.5a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9Z"},child:[]}]})(n)}const md="/",ac="/sign-in",hN="/sign-up",mN="/profile",gN="/categories",pN="/category/add",bN=n=>n?`/category/edit/${n}`:"/category/edit/:category_id",dv="/blog",rk="/blog/add",wN=n=>n?`/blog/edit/${n}`:"/blog/edit/:blogid",ok=(n,e)=>!n||!e?"/blog/:category/:blog":`/blog/${n}/${e}`,vN=n=>n?`/blog/${n}`:"/blog/:category",yN=n=>n?`/search?q=${n}`:"/search",AN="/comments",_N="/users",vi=(n,e={},t=[])=>{const[i,s]=_.useState(),[r,o]=_.useState(!1),[a,c]=_.useState();return _.useEffect(()=>{const d=new AbortController,h=d.signal;return(async()=>{o(!0);try{const p=await fetch(n,{...e,signal:h});if(!p.ok)throw new Error(`Error: ${p.statusText}, ${p.status}`);const w=await p.json();s(w),c(void 0)}catch(p){p instanceof Error&&p.name!=="AbortError"&&c(p)}finally{o(!1)}})(),()=>d.abort()},t),{data:i,loading:r,error:a}},_Z={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE_URL:"http://localhost:3000/api"},Et=n=>_Z[n],CZ=()=>{const n=dl(t=>t.user),{data:e}=vi(`${Et("VITE_API_BASE_URL")}/category/all-category`,{method:"get",credentials:"include"});return v.jsxs(eZ,{children:[v.jsx(tZ,{className:"bg-white",children:v.jsx("img",{src:sk,width:120,alt:"Logo"})}),v.jsxs(nZ,{className:"bg-white",children:[v.jsx(D5,{children:v.jsxs(M5,{children:[v.jsx(Cu,{children:v.jsx(xu,{asChild:!0,children:v.jsxs(_n,{to:md,children:[v.jsx(hZ,{}),v.jsx("span",{children:"Home"})]})})}),n?.isLoggedIn&&v.jsxs(v.Fragment,{children:[v.jsx(Cu,{children:v.jsx(xu,{asChild:!0,children:v.jsxs(_n,{to:dv,children:[v.jsx(bZ,{}),v.jsx("span",{children:"Blogs"})]})})}),v.jsx(Cu,{children:v.jsx(xu,{asChild:!0,children:v.jsxs(_n,{to:AN,children:[v.jsx(vZ,{}),v.jsx("span",{children:"Comments"})]})})})]}),n?.isLoggedIn&&n.user?.role==="admin"&&v.jsxs(v.Fragment,{children:[v.jsx(Cu,{children:v.jsx(xu,{asChild:!0,children:v.jsxs(_n,{to:gN,children:[v.jsx(gZ,{}),v.jsx("span",{children:"Categories"})]})})}),v.jsx(Cu,{children:v.jsx(xu,{asChild:!0,children:v.jsxs(_n,{to:_N,children:[v.jsx(yZ,{}),v.jsx("span",{children:"Users"})]})})})]})]})}),v.jsxs(D5,{children:[v.jsx(iZ,{children:"Categories"}),v.jsx(M5,{children:e?.category&&e.category.length>0&&e.category.map(t=>v.jsx(Cu,{children:v.jsx(xu,{asChild:!0,children:v.jsxs(_n,{to:vN(t.slug),children:[v.jsx(AZ,{}),v.jsx("span",{children:t.name})]})})},t.id))})]})]})]})},xZ=()=>v.jsxs("div",{className:"text-sm text-center bg-gray-50 py-4",children:[" Copyright 2026 | Designed & Developed By: ",v.jsx("a",{href:"#",className:"font-bold",children:"THABCT079"})]});function kZ(n){return Zn({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5-5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8v14z"},child:[]}]})(n)}const EZ=()=>{const n=ma(),[e,t]=_.useState(""),i=r=>{t(r.target.value)},s=r=>{r.preventDefault(),e.trim()&&n(yN(e))};return v.jsx("form",{onSubmit:s,children:v.jsx(oi,{name:"q",value:e,onChange:i,placeholder:"Search here...",className:"h-9 rounded-full bg-gray-50"})})};function V5(n){const e=SZ(n),t=_.forwardRef((i,s)=>{const{children:r,...o}=i,a=_.Children.toArray(r),c=a.find(IZ);if(c){const d=c.props.children,h=a.map(m=>m===c?_.Children.count(d)>1?_.Children.only(null):_.isValidElement(d)?d.props.children:null:m);return v.jsx(e,{...o,ref:s,children:_.isValidElement(d)?_.cloneElement(d,void 0,h):null})}return v.jsx(e,{...o,ref:s,children:r})});return t.displayName=`${n}.Slot`,t}function SZ(n){const e=_.forwardRef((t,i)=>{const{children:s,...r}=t;if(_.isValidElement(s)){const o=PZ(s),a=RZ(r,s.props);return s.type!==_.Fragment&&(a.ref=i?ga(i,o):o),_.cloneElement(s,a)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var TZ=Symbol("radix.slottable");function IZ(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===TZ}function RZ(n,e){const t={...e};for(const i in e){const s=n[i],r=e[i];/^on[A-Z]/.test(i)?s&&r?t[i]=(...a)=>{const c=r(...a);return s(...a),c}:s&&(t[i]=s):i==="style"?t[i]={...s,...r}:i==="className"&&(t[i]=[s,r].filter(Boolean).join(" "))}return{...n,...t}}function PZ(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function ak(n){const e=n+"CollectionProvider",[t,i]=fl(e),[s,r]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=C=>{const{scope:k,children:E}=C,S=Ee.useRef(null),I=Ee.useRef(new Map).current;return v.jsx(s,{scope:k,itemMap:I,collectionRef:S,children:E})};o.displayName=e;const a=n+"CollectionSlot",c=V5(a),d=Ee.forwardRef((C,k)=>{const{scope:E,children:S}=C,I=r(a,E),R=Dt(k,I.collectionRef);return v.jsx(c,{ref:R,children:S})});d.displayName=a;const h=n+"CollectionItemSlot",m="data-radix-collection-item",p=V5(h),w=Ee.forwardRef((C,k)=>{const{scope:E,children:S,...I}=C,R=Ee.useRef(null),O=Dt(k,R),U=r(h,E);return Ee.useEffect(()=>(U.itemMap.set(R,{ref:R,...I}),()=>{U.itemMap.delete(R)})),v.jsx(p,{[m]:"",ref:O,children:S})});w.displayName=h;function A(C){const k=r(n+"CollectionConsumer",C);return Ee.useCallback(()=>{const S=k.collectionRef.current;if(!S)return[];const I=Array.from(S.querySelectorAll(`[${m}]`));return Array.from(k.itemMap.values()).sort((U,P)=>I.indexOf(U.ref.current)-I.indexOf(P.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:o,Slot:d,ItemSlot:w},A,i]}var OZ=_.createContext(void 0);function lk(n){const e=_.useContext(OZ);return n||e||"ltr"}var o_="rovingFocusGroup.onEntryFocus",DZ={bubbles:!1,cancelable:!0},xm="RovingFocusGroup",[$1,CN,MZ]=ak(xm),[BZ,xN]=fl(xm,[MZ]),[NZ,VZ]=BZ(xm),kN=_.forwardRef((n,e)=>v.jsx($1.Provider,{scope:n.__scopeRovingFocusGroup,children:v.jsx($1.Slot,{scope:n.__scopeRovingFocusGroup,children:v.jsx(LZ,{...n,ref:e})})}));kN.displayName=xm;var LZ=_.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:i,loop:s=!1,dir:r,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...m}=n,p=_.useRef(null),w=Dt(e,p),A=lk(r),[C,k]=dd({prop:o,defaultProp:a??null,onChange:c,caller:xm}),[E,S]=_.useState(!1),I=_r(d),R=CN(t),O=_.useRef(!1),[U,P]=_.useState(0);return _.useEffect(()=>{const V=p.current;if(V)return V.addEventListener(o_,I),()=>V.removeEventListener(o_,I)},[I]),v.jsx(NZ,{scope:t,orientation:i,dir:A,loop:s,currentTabStopId:C,onItemFocus:_.useCallback(V=>k(V),[k]),onItemShiftTab:_.useCallback(()=>S(!0),[]),onFocusableItemAdd:_.useCallback(()=>P(V=>V+1),[]),onFocusableItemRemove:_.useCallback(()=>P(V=>V-1),[]),children:v.jsx(ht.div,{tabIndex:E||U===0?-1:0,"data-orientation":i,...m,ref:w,style:{outline:"none",...n.style},onMouseDown:Be(n.onMouseDown,()=>{O.current=!0}),onFocus:Be(n.onFocus,V=>{const H=!O.current;if(V.target===V.currentTarget&&H&&!E){const ie=new CustomEvent(o_,DZ);if(V.currentTarget.dispatchEvent(ie),!ie.defaultPrevented){const ke=R().filter(F=>F.focusable),de=ke.find(F=>F.active),ve=ke.find(F=>F.id===C),Ae=[de,ve,...ke].filter(Boolean).map(F=>F.ref.current);TN(Ae,h)}}O.current=!1}),onBlur:Be(n.onBlur,()=>S(!1))})})}),EN="RovingFocusGroupItem",SN=_.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:i=!0,active:s=!1,tabStopId:r,children:o,...a}=n,c=Yr(),d=r||c,h=VZ(EN,t),m=h.currentTabStopId===d,p=CN(t),{onFocusableItemAdd:w,onFocusableItemRemove:A,currentTabStopId:C}=h;return _.useEffect(()=>{if(i)return w(),()=>A()},[i,w,A]),v.jsx($1.ItemSlot,{scope:t,id:d,focusable:i,active:s,children:v.jsx(ht.span,{tabIndex:m?0:-1,"data-orientation":h.orientation,...a,ref:e,onMouseDown:Be(n.onMouseDown,k=>{i?h.onItemFocus(d):k.preventDefault()}),onFocus:Be(n.onFocus,()=>h.onItemFocus(d)),onKeyDown:Be(n.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){h.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const E=jZ(k,h.orientation,h.dir);if(E!==void 0){if(k.metaKey||k.ctrlKey||k.altKey||k.shiftKey)return;k.preventDefault();let I=p().filter(R=>R.focusable).map(R=>R.ref.current);if(E==="last")I.reverse();else if(E==="prev"||E==="next"){E==="prev"&&I.reverse();const R=I.indexOf(k.currentTarget);I=h.loop?UZ(I,R+1):I.slice(R+1)}setTimeout(()=>TN(I))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:C!=null}):o})})});SN.displayName=EN;var FZ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function zZ(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function jZ(n,e,t){const i=zZ(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return FZ[i]}function TN(n,e=!1){const t=document.activeElement;for(const i of n)if(i===t||(i.focus({preventScroll:e}),document.activeElement!==t))return}function UZ(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var HZ=kN,WZ=SN;function $Z(n){const e=GZ(n),t=_.forwardRef((i,s)=>{const{children:r,...o}=i,a=_.Children.toArray(r),c=a.find(KZ);if(c){const d=c.props.children,h=a.map(m=>m===c?_.Children.count(d)>1?_.Children.only(null):_.isValidElement(d)?d.props.children:null:m);return v.jsx(e,{...o,ref:s,children:_.isValidElement(d)?_.cloneElement(d,void 0,h):null})}return v.jsx(e,{...o,ref:s,children:r})});return t.displayName=`${n}.Slot`,t}function GZ(n){const e=_.forwardRef((t,i)=>{const{children:s,...r}=t;if(_.isValidElement(s)){const o=QZ(s),a=qZ(r,s.props);return s.type!==_.Fragment&&(a.ref=i?ga(i,o):o),_.cloneElement(s,a)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var YZ=Symbol("radix.slottable");function KZ(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===YZ}function qZ(n,e){const t={...e};for(const i in e){const s=n[i],r=e[i];/^on[A-Z]/.test(i)?s&&r?t[i]=(...a)=>{const c=r(...a);return s(...a),c}:s&&(t[i]=s):i==="style"?t[i]={...s,...r}:i==="className"&&(t[i]=[s,r].filter(Boolean).join(" "))}return{...n,...t}}function QZ(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var G1=["Enter"," "],ZZ=["ArrowDown","PageUp","Home"],IN=["ArrowUp","PageDown","End"],JZ=[...ZZ,...IN],XZ={ltr:[...G1,"ArrowRight"],rtl:[...G1,"ArrowLeft"]},eJ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},km="Menu",[Nh,tJ,nJ]=ak(km),[vc,RN]=fl(km,[nJ,Bd,xN]),fv=Bd(),PN=xN(),[iJ,yc]=vc(km),[sJ,Em]=vc(km),ON=n=>{const{__scopeMenu:e,open:t=!1,children:i,dir:s,onOpenChange:r,modal:o=!0}=n,a=fv(e),[c,d]=_.useState(null),h=_.useRef(!1),m=_r(r),p=lk(s);return _.useEffect(()=>{const w=()=>{h.current=!0,document.addEventListener("pointerdown",A,{capture:!0,once:!0}),document.addEventListener("pointermove",A,{capture:!0,once:!0})},A=()=>h.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",A,{capture:!0}),document.removeEventListener("pointermove",A,{capture:!0})}},[]),v.jsx(Zx,{...a,children:v.jsx(iJ,{scope:e,open:t,onOpenChange:m,content:c,onContentChange:d,children:v.jsx(sJ,{scope:e,onClose:_.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:p,modal:o,children:i})})})};ON.displayName=km;var rJ="MenuAnchor",ck=_.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n,s=fv(t);return v.jsx(Jx,{...s,...i,ref:e})});ck.displayName=rJ;var uk="MenuPortal",[oJ,DN]=vc(uk,{forceMount:void 0}),MN=n=>{const{__scopeMenu:e,forceMount:t,children:i,container:s}=n,r=yc(uk,e);return v.jsx(oJ,{scope:e,forceMount:t,children:v.jsx(oo,{present:t||r.open,children:v.jsx(Am,{asChild:!0,container:s,children:i})})})};MN.displayName=uk;var Ks="MenuContent",[aJ,dk]=vc(Ks),BN=_.forwardRef((n,e)=>{const t=DN(Ks,n.__scopeMenu),{forceMount:i=t.forceMount,...s}=n,r=yc(Ks,n.__scopeMenu),o=Em(Ks,n.__scopeMenu);return v.jsx(Nh.Provider,{scope:n.__scopeMenu,children:v.jsx(oo,{present:i||r.open,children:v.jsx(Nh.Slot,{scope:n.__scopeMenu,children:o.modal?v.jsx(lJ,{...s,ref:e}):v.jsx(cJ,{...s,ref:e})})})})}),lJ=_.forwardRef((n,e)=>{const t=yc(Ks,n.__scopeMenu),i=_.useRef(null),s=Dt(e,i);return _.useEffect(()=>{const r=i.current;if(r)return Fx(r)},[]),v.jsx(fk,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Be(n.onFocusOutside,r=>r.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),cJ=_.forwardRef((n,e)=>{const t=yc(Ks,n.__scopeMenu);return v.jsx(fk,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),uJ=$Z("MenuContent.ScrollLock"),fk=_.forwardRef((n,e)=>{const{__scopeMenu:t,loop:i=!1,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:w,disableOutsideScroll:A,...C}=n,k=yc(Ks,t),E=Em(Ks,t),S=fv(t),I=PN(t),R=tJ(t),[O,U]=_.useState(null),P=_.useRef(null),V=Dt(e,P,k.onContentChange),H=_.useRef(0),ie=_.useRef(""),ke=_.useRef(0),de=_.useRef(null),ve=_.useRef("right"),be=_.useRef(0),Ae=A?iv:_.Fragment,F=A?{as:uJ,allowPinchZoom:!0}:void 0,X=re=>{const Ve=ie.current+re,B=R().filter(oe=>!oe.disabled),J=document.activeElement,fe=B.find(oe=>oe.ref.current===J)?.textValue,he=B.map(oe=>oe.textValue),Me=_J(he,Ve,fe),Ie=B.find(oe=>oe.textValue===Me)?.ref.current;(function oe(Ue){ie.current=Ue,window.clearTimeout(H.current),Ue!==""&&(H.current=window.setTimeout(()=>oe(""),1e3))})(Ve),Ie&&setTimeout(()=>Ie.focus())};_.useEffect(()=>()=>window.clearTimeout(H.current),[]),Lx();const $=_.useCallback(re=>ve.current===de.current?.side&&xJ(re,de.current?.area),[]);return v.jsx(aJ,{scope:t,searchRef:ie,onItemEnter:_.useCallback(re=>{$(re)&&re.preventDefault()},[$]),onItemLeave:_.useCallback(re=>{$(re)||(P.current?.focus(),U(null))},[$]),onTriggerLeave:_.useCallback(re=>{$(re)&&re.preventDefault()},[$]),pointerGraceTimerRef:ke,onPointerGraceIntentChange:_.useCallback(re=>{de.current=re},[]),children:v.jsx(Ae,{...F,children:v.jsx(tv,{asChild:!0,trapped:s,onMountAutoFocus:Be(r,re=>{re.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:v.jsx(ym,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:p,onDismiss:w,children:v.jsx(HZ,{asChild:!0,...I,dir:E.dir,orientation:"vertical",loop:i,currentTabStopId:O,onCurrentTabStopIdChange:U,onEntryFocus:Be(c,re=>{E.isUsingKeyboardRef.current||re.preventDefault()}),preventScrollOnEntryFocus:!0,children:v.jsx(Xx,{role:"menu","aria-orientation":"vertical","data-state":ZN(k.open),"data-radix-menu-content":"",dir:E.dir,...S,...C,ref:V,style:{outline:"none",...C.style},onKeyDown:Be(C.onKeyDown,re=>{const B=re.target.closest("[data-radix-menu-content]")===re.currentTarget,J=re.ctrlKey||re.altKey||re.metaKey,fe=re.key.length===1;B&&(re.key==="Tab"&&re.preventDefault(),!J&&fe&&X(re.key));const he=P.current;if(re.target!==he||!JZ.includes(re.key))return;re.preventDefault();const Ie=R().filter(oe=>!oe.disabled).map(oe=>oe.ref.current);IN.includes(re.key)&&Ie.reverse(),yJ(Ie)}),onBlur:Be(n.onBlur,re=>{re.currentTarget.contains(re.target)||(window.clearTimeout(H.current),ie.current="")}),onPointerMove:Be(n.onPointerMove,Vh(re=>{const Ve=re.target,B=be.current!==re.clientX;if(re.currentTarget.contains(Ve)&&B){const J=re.clientX>be.current?"right":"left";ve.current=J,be.current=re.clientX}}))})})})})})})});BN.displayName=Ks;var dJ="MenuGroup",hk=_.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return v.jsx(ht.div,{role:"group",...i,ref:e})});hk.displayName=dJ;var fJ="MenuLabel",NN=_.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return v.jsx(ht.div,{...i,ref:e})});NN.displayName=fJ;var Qb="MenuItem",L5="menu.itemSelect",hv=_.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:i,...s}=n,r=_.useRef(null),o=Em(Qb,n.__scopeMenu),a=dk(Qb,n.__scopeMenu),c=Dt(e,r),d=_.useRef(!1),h=()=>{const m=r.current;if(!t&&m){const p=new CustomEvent(L5,{bubbles:!0,cancelable:!0});m.addEventListener(L5,w=>i?.(w),{once:!0}),sB(m,p),p.defaultPrevented?d.current=!1:o.onClose()}};return v.jsx(VN,{...s,ref:c,disabled:t,onClick:Be(n.onClick,h),onPointerDown:m=>{n.onPointerDown?.(m),d.current=!0},onPointerUp:Be(n.onPointerUp,m=>{d.current||m.currentTarget?.click()}),onKeyDown:Be(n.onKeyDown,m=>{const p=a.searchRef.current!=="";t||p&&m.key===" "||G1.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});hv.displayName=Qb;var VN=_.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:i=!1,textValue:s,...r}=n,o=dk(Qb,t),a=PN(t),c=_.useRef(null),d=Dt(e,c),[h,m]=_.useState(!1),[p,w]=_.useState("");return _.useEffect(()=>{const A=c.current;A&&w((A.textContent??"").trim())},[r.children]),v.jsx(Nh.ItemSlot,{scope:t,disabled:i,textValue:s??p,children:v.jsx(WZ,{asChild:!0,...a,focusable:!i,children:v.jsx(ht.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...r,ref:d,onPointerMove:Be(n.onPointerMove,Vh(A=>{i?o.onItemLeave(A):(o.onItemEnter(A),A.defaultPrevented||A.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Be(n.onPointerLeave,Vh(A=>o.onItemLeave(A))),onFocus:Be(n.onFocus,()=>m(!0)),onBlur:Be(n.onBlur,()=>m(!1))})})})}),hJ="MenuCheckboxItem",LN=_.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:i,...s}=n;return v.jsx(HN,{scope:n.__scopeMenu,checked:t,children:v.jsx(hv,{role:"menuitemcheckbox","aria-checked":Zb(t)?"mixed":t,...s,ref:e,"data-state":gk(t),onSelect:Be(s.onSelect,()=>i?.(Zb(t)?!0:!t),{checkForDefaultPrevented:!1})})})});LN.displayName=hJ;var FN="MenuRadioGroup",[mJ,gJ]=vc(FN,{value:void 0,onValueChange:()=>{}}),zN=_.forwardRef((n,e)=>{const{value:t,onValueChange:i,...s}=n,r=_r(i);return v.jsx(mJ,{scope:n.__scopeMenu,value:t,onValueChange:r,children:v.jsx(hk,{...s,ref:e})})});zN.displayName=FN;var jN="MenuRadioItem",UN=_.forwardRef((n,e)=>{const{value:t,...i}=n,s=gJ(jN,n.__scopeMenu),r=t===s.value;return v.jsx(HN,{scope:n.__scopeMenu,checked:r,children:v.jsx(hv,{role:"menuitemradio","aria-checked":r,...i,ref:e,"data-state":gk(r),onSelect:Be(i.onSelect,()=>s.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});UN.displayName=jN;var mk="MenuItemIndicator",[HN,pJ]=vc(mk,{checked:!1}),WN=_.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:i,...s}=n,r=pJ(mk,t);return v.jsx(oo,{present:i||Zb(r.checked)||r.checked===!0,children:v.jsx(ht.span,{...s,ref:e,"data-state":gk(r.checked)})})});WN.displayName=mk;var bJ="MenuSeparator",$N=_.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n;return v.jsx(ht.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});$N.displayName=bJ;var wJ="MenuArrow",GN=_.forwardRef((n,e)=>{const{__scopeMenu:t,...i}=n,s=fv(t);return v.jsx(ek,{...s,...i,ref:e})});GN.displayName=wJ;var vJ="MenuSub",[yRe,YN]=vc(vJ),sh="MenuSubTrigger",KN=_.forwardRef((n,e)=>{const t=yc(sh,n.__scopeMenu),i=Em(sh,n.__scopeMenu),s=YN(sh,n.__scopeMenu),r=dk(sh,n.__scopeMenu),o=_.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=r,d={__scopeMenu:n.__scopeMenu},h=_.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return _.useEffect(()=>h,[h]),_.useEffect(()=>{const m=a.current;return()=>{window.clearTimeout(m),c(null)}},[a,c]),v.jsx(ck,{asChild:!0,...d,children:v.jsx(VN,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":ZN(t.open),...n,ref:ga(e,s.onTriggerChange),onClick:m=>{n.onClick?.(m),!(n.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Be(n.onPointerMove,Vh(m=>{r.onItemEnter(m),!m.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(r.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),h()},100))})),onPointerLeave:Be(n.onPointerLeave,Vh(m=>{h();const p=t.content?.getBoundingClientRect();if(p){const w=t.content?.dataset.side,A=w==="right",C=A?-5:5,k=p[A?"left":"right"],E=p[A?"right":"left"];r.onPointerGraceIntentChange({area:[{x:m.clientX+C,y:m.clientY},{x:k,y:p.top},{x:E,y:p.top},{x:E,y:p.bottom},{x:k,y:p.bottom}],side:w}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>r.onPointerGraceIntentChange(null),300)}else{if(r.onTriggerLeave(m),m.defaultPrevented)return;r.onPointerGraceIntentChange(null)}})),onKeyDown:Be(n.onKeyDown,m=>{const p=r.searchRef.current!=="";n.disabled||p&&m.key===" "||XZ[i.dir].includes(m.key)&&(t.onOpenChange(!0),t.content?.focus(),m.preventDefault())})})})});KN.displayName=sh;var qN="MenuSubContent",QN=_.forwardRef((n,e)=>{const t=DN(Ks,n.__scopeMenu),{forceMount:i=t.forceMount,...s}=n,r=yc(Ks,n.__scopeMenu),o=Em(Ks,n.__scopeMenu),a=YN(qN,n.__scopeMenu),c=_.useRef(null),d=Dt(e,c);return v.jsx(Nh.Provider,{scope:n.__scopeMenu,children:v.jsx(oo,{present:i||r.open,children:v.jsx(Nh.Slot,{scope:n.__scopeMenu,children:v.jsx(fk,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{o.isUsingKeyboardRef.current&&c.current?.focus(),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Be(n.onFocusOutside,h=>{h.target!==a.trigger&&r.onOpenChange(!1)}),onEscapeKeyDown:Be(n.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:Be(n.onKeyDown,h=>{const m=h.currentTarget.contains(h.target),p=eJ[o.dir].includes(h.key);m&&p&&(r.onOpenChange(!1),a.trigger?.focus(),h.preventDefault())})})})})})});QN.displayName=qN;function ZN(n){return n?"open":"closed"}function Zb(n){return n==="indeterminate"}function gk(n){return Zb(n)?"indeterminate":n?"checked":"unchecked"}function yJ(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function AJ(n,e){return n.map((t,i)=>n[(e+i)%n.length])}function _J(n,e,t){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,r=t?n.indexOf(t):-1;let o=AJ(n,Math.max(r,0));s.length===1&&(o=o.filter(d=>d!==t));const c=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return c!==t?c:void 0}function CJ(n,e){const{x:t,y:i}=n;let s=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){const a=e[r],c=e[o],d=a.x,h=a.y,m=c.x,p=c.y;h>i!=p>i&&t<(m-d)*(i-h)/(p-h)+d&&(s=!s)}return s}function xJ(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return CJ(t,e)}function Vh(n){return e=>e.pointerType==="mouse"?n(e):void 0}var kJ=ON,EJ=ck,SJ=MN,TJ=BN,IJ=hk,RJ=NN,PJ=hv,OJ=LN,DJ=zN,MJ=UN,BJ=WN,NJ=$N,VJ=GN,LJ=KN,FJ=QN,mv="DropdownMenu",[zJ]=fl(mv,[RN]),Hi=RN(),[jJ,JN]=zJ(mv),XN=n=>{const{__scopeDropdownMenu:e,children:t,dir:i,open:s,defaultOpen:r,onOpenChange:o,modal:a=!0}=n,c=Hi(e),d=_.useRef(null),[h,m]=dd({prop:s,defaultProp:r??!1,onChange:o,caller:mv});return v.jsx(jJ,{scope:e,triggerId:Yr(),triggerRef:d,contentId:Yr(),open:h,onOpenChange:m,onOpenToggle:_.useCallback(()=>m(p=>!p),[m]),modal:a,children:v.jsx(kJ,{...c,open:h,onOpenChange:m,dir:i,modal:a,children:t})})};XN.displayName=mv;var eV="DropdownMenuTrigger",tV=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:i=!1,...s}=n,r=JN(eV,t),o=Hi(t);return v.jsx(EJ,{asChild:!0,...o,children:v.jsx(ht.button,{type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...s,ref:ga(e,r.triggerRef),onPointerDown:Be(n.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(r.onOpenToggle(),r.open||a.preventDefault())}),onKeyDown:Be(n.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&r.onOpenToggle(),a.key==="ArrowDown"&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});tV.displayName=eV;var UJ="DropdownMenuPortal",nV=n=>{const{__scopeDropdownMenu:e,...t}=n,i=Hi(e);return v.jsx(SJ,{...i,...t})};nV.displayName=UJ;var iV="DropdownMenuContent",sV=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=JN(iV,t),r=Hi(t),o=_.useRef(!1);return v.jsx(TJ,{id:s.contentId,"aria-labelledby":s.triggerId,...r,...i,ref:e,onCloseAutoFocus:Be(n.onCloseAutoFocus,a=>{o.current||s.triggerRef.current?.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:Be(n.onInteractOutside,a=>{const c=a.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,h=c.button===2||d;(!s.modal||h)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});sV.displayName=iV;var HJ="DropdownMenuGroup",WJ=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hi(t);return v.jsx(IJ,{...s,...i,ref:e})});WJ.displayName=HJ;var $J="DropdownMenuLabel",rV=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hi(t);return v.jsx(RJ,{...s,...i,ref:e})});rV.displayName=$J;var GJ="DropdownMenuItem",oV=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hi(t);return v.jsx(PJ,{...s,...i,ref:e})});oV.displayName=GJ;var YJ="DropdownMenuCheckboxItem",KJ=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hi(t);return v.jsx(OJ,{...s,...i,ref:e})});KJ.displayName=YJ;var qJ="DropdownMenuRadioGroup",QJ=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hi(t);return v.jsx(DJ,{...s,...i,ref:e})});QJ.displayName=qJ;var ZJ="DropdownMenuRadioItem",JJ=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hi(t);return v.jsx(MJ,{...s,...i,ref:e})});JJ.displayName=ZJ;var XJ="DropdownMenuItemIndicator",eX=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hi(t);return v.jsx(BJ,{...s,...i,ref:e})});eX.displayName=XJ;var tX="DropdownMenuSeparator",aV=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hi(t);return v.jsx(NJ,{...s,...i,ref:e})});aV.displayName=tX;var nX="DropdownMenuArrow",iX=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hi(t);return v.jsx(VJ,{...s,...i,ref:e})});iX.displayName=nX;var sX="DropdownMenuSubTrigger",rX=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hi(t);return v.jsx(LJ,{...s,...i,ref:e})});rX.displayName=sX;var oX="DropdownMenuSubContent",aX=_.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...i}=n,s=Hi(t);return v.jsx(FJ,{...s,...i,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});aX.displayName=oX;var lX=XN,cX=tV,uX=nV,dX=sV,fX=rV,hX=oV,mX=aV;function gX({...n}){return v.jsx(lX,{"data-slot":"dropdown-menu",...n})}function pX({...n}){return v.jsx(cX,{"data-slot":"dropdown-menu-trigger",...n})}function bX({className:n,sideOffset:e=4,...t}){return v.jsx(uX,{children:v.jsx(dX,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Ye("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",n),...t})})}function a_({className:n,inset:e,variant:t="default",...i}){return v.jsx(hX,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":t,className:Ye("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...i})}function wX({className:n,inset:e,...t}){return v.jsx(fX,{"data-slot":"dropdown-menu-label","data-inset":e,className:Ye("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",n),...t})}function F5({className:n,...e}){return v.jsx(mX,{"data-slot":"dropdown-menu-separator",className:Ye("bg-border -mx-1 my-1 h-px",n),...e})}function vX(n,e=[]){let t=[];function i(r,o){const a=_.createContext(o);a.displayName=r+"Context";const c=t.length;t=[...t,o];const d=m=>{const{scope:p,children:w,...A}=m,C=p?.[n]?.[c]||a,k=_.useMemo(()=>A,Object.values(A));return v.jsx(C.Provider,{value:k,children:w})};d.displayName=r+"Provider";function h(m,p){const w=p?.[n]?.[c]||a,A=_.useContext(w);if(A)return A;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${r}\``)}return[d,h]}const s=()=>{const r=t.map(o=>_.createContext(o));return function(a){const c=a?.[n]||r;return _.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return s.scopeName=n,[i,yX(s,...e)]}function yX(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const o=i.reduce((a,{useScope:c,scopeName:d})=>{const m=c(r)[`__scope${d}`];return{...a,...m}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var AX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],pk=AX.reduce((n,e)=>{const t=Bx(`Primitive.${e}`),i=_.forwardRef((s,r)=>{const{asChild:o,...a}=s,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(c,{...a,ref:r})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),l_={exports:{}},c_={};var z5;function _X(){if(z5)return c_;z5=1;var n=mm();function e(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,s=n.useEffect,r=n.useLayoutEffect,o=n.useDebugValue;function a(m,p){var w=p(),A=i({inst:{value:w,getSnapshot:p}}),C=A[0].inst,k=A[1];return r(function(){C.value=w,C.getSnapshot=p,c(C)&&k({inst:C})},[m,w,p]),s(function(){return c(C)&&k({inst:C}),m(function(){c(C)&&k({inst:C})})},[m]),o(w),w}function c(m){var p=m.getSnapshot;m=m.value;try{var w=p();return!t(m,w)}catch{return!0}}function d(m,p){return p()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:a;return c_.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:h,c_}var j5;function CX(){return j5||(j5=1,l_.exports=_X()),l_.exports}var xX=CX();function kX(){return xX.useSyncExternalStore(EX,()=>!0,()=>!1)}function EX(){return()=>{}}var bk="Avatar",[SX]=vX(bk),[TX,lV]=SX(bk),cV=_.forwardRef((n,e)=>{const{__scopeAvatar:t,...i}=n,[s,r]=_.useState("idle");return v.jsx(TX,{scope:t,imageLoadingStatus:s,onImageLoadingStatusChange:r,children:v.jsx(pk.span,{...i,ref:e})})});cV.displayName=bk;var uV="AvatarImage",wk=_.forwardRef((n,e)=>{const{__scopeAvatar:t,src:i,onLoadingStatusChange:s=()=>{},...r}=n,o=lV(uV,t),a=RX(i,r),c=_r(d=>{s(d),o.onImageLoadingStatusChange(d)});return Qn(()=>{a!=="idle"&&c(a)},[a,c]),a==="loaded"?v.jsx(pk.img,{...r,ref:e,src:i}):null});wk.displayName=uV;var dV="AvatarFallback",IX=_.forwardRef((n,e)=>{const{__scopeAvatar:t,delayMs:i,...s}=n,r=lV(dV,t),[o,a]=_.useState(i===void 0);return _.useEffect(()=>{if(i!==void 0){const c=window.setTimeout(()=>a(!0),i);return()=>window.clearTimeout(c)}},[i]),o&&r.imageLoadingStatus!=="loaded"?v.jsx(pk.span,{...s,ref:e}):null});IX.displayName=dV;function U5(n,e){return n?e?(n.src!==e&&(n.src=e),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function RX(n,{referrerPolicy:e,crossOrigin:t}){const i=kX(),s=_.useRef(null),r=i?(s.current||(s.current=new window.Image),s.current):null,[o,a]=_.useState(()=>U5(r,n));return Qn(()=>{a(U5(r,n))},[r,n]),Qn(()=>{const c=m=>()=>{a(m)};if(!r)return;const d=c("loaded"),h=c("error");return r.addEventListener("load",d),r.addEventListener("error",h),e&&(r.referrerPolicy=e),typeof t=="string"&&(r.crossOrigin=t),()=>{r.removeEventListener("load",d),r.removeEventListener("error",h)}},[r,t,e]),o}var PX=cV,OX=wk;function lc({className:n,size:e="default",...t}){return v.jsx(PX,{"data-slot":"avatar","data-size":e,className:Ye("group/avatar relative flex size-8 shrink-0 overflow-hidden rounded-full select-none data-[size=lg]:size-10 data-[size=sm]:size-6",n),...t})}function gd({className:n,...e}){return v.jsx(OX,{"data-slot":"avatar-image",className:Ye("aspect-square size-full",n),...e})}const Lh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAD0QAAA9EBmIqJtAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA8eSURBVHic7Z1bbBzXecd/M3vjLneXI62llWk6ou1GtGTdfJGbILRTqw0MBHkwggSNC9h9aAvE7UOaokjduIFtuE7coGiah9YPbQq0BloXMQI/GAaMNHJTMYgaybZs0ZKl1BYv4mXFHXLFvXB39jJ9mFmKokjubWbOWWl/gCBQ4s73zXz//c6Zc/mOYpomNxoZPRUH9gAj9p+7AA2IA7F1fwMsA9l1f2eAj4Hz9p8LWiK57N1deIPS7QLI6Kl+YBQ4CjyIFfBbXTI3hyWGXwHHgDEtkcy7ZMsTuk4AGT0V5GrAHwGOAAFB7pSBk1hieBtLEIYgX9qiawSQ0VOfAZ4AvgZsF+zOZiwCrwKvaInkCdHONIPUAsjoqd1YQX8Cq03vJi4Ar2CJYVK0M5shpQAyeuoB4NvAY4Ai2J1OMYHXge9qieQp0c6sRyoBZPTUQ8AzwKOifXGJt4AXtUTyuGhH6kghgIye+m3gWeAh0b54xHHgeS2R/JloR4QKIKOnhoAfAF8R5oRYXgO+qSWSl0Q5IEQAGT3lB74BPAdEPXdALnJYz+GHWiJZ8dq45wLI6KlR4GVgv6eG5WcceEpLJMe8NOqZADJ6yge8ADxN9/fs3cIEXgK+oyWSVS8MeiIAu63/D6wRvB6NGQMe96JvoLptIKOnvgicphf8VhgFTtvPzlVcywAZPaUA3wO+RS/lt4sJfB/4Sy2RdCVQrgjAnrD5V6xx+x6d8yrw+25MNDkugIyeigI/Ab7g6IV7/BT4spZI5py8qKMCyOipHcCbwAOOXbTHWk4BX9QSyQWnLuiYADJ66lNYKu22Wbtu4wLwBS2RnHLiYo4IwP7mj9Flwa9WrVdtn88n2JOWuQCMOpEJOhaA3ea/jcRpv1AokMtlMQyDSqVCpVKmUqlQv3dFUfD7/fj9Afx+P8FgkGg0RiQSEez5lpwCHum0T9CRAOze/htI1uEzzRq5XJ5cbplsNrv6TW8Vn89HLBYjGo0TjfajKK4Pm7TKT4EvdfJ20LYA7Pf8f0eiVz3TNMlklkinF6hUnJ1X8fv93HLLDjRtG4oi1bDGq8DvtTtO4O/A8PeQKPjLy1dYWLiMYbizJrNSqTA/P8fios6OHTuJxwdcsdMGXwMmseZYWqatDGAPUb6BBCN85bLBzMwlVlZWPLUbDoe57bYhAoGgp3Y3wcRqCt5s9YMtC8Ce2DkNJFo15jSFQoFLl6babuM7xefzMTT0KVk6izpwuNUJpJYEYE/p/jcSTOxkMkvMz88hekmboijs2nUrmrZNqB82Y8BvtTKV3Gq39gUkCP7lyynm5maFBx+sjufc3CyXL6dEuwJWbF5o5QNNZwB7Jc//ILjdX1zUSaXmRbqwKcnkLrZvF94ymsDDza4saioD2Gv4XkZw8HO5nLTBB0il5snlHJ2raQcFeNmOWUOabQK+geA1fKVSiZmZaZEuNMXMzDSlUkm0G/uxYtaQhk2A3es/h8DVu7VajU8++ZhyuTv2XQYCQe688y5UVejIYQ7Y2+itoBkPf4DgpduLi3rXBB+ssYnFRV20G1Gs2G3JlgKwd+wI3bRRqVTQ9bRIF9pC19OOD0e3wVfsGG5KowzwrIPOtEU6vUCtVhPtRsvUajXSacfWbXTCljHcVAD2Rk2he/UMwyCTWRLpQkdkMkuuzU20wEN2LDdkqwzwjAvOtMTS0qIUgz3tYpomS0uLot2ALWK5oQDs/fnCt2jnclnRLnSMJPfwqB3T69gsA3zbRWeaolQqyZA+O8YwDBnGBWCTmF4nALssy2Ouu9MASb45jiDJvTxmx/YaNsoATyDBPH82e+OU5JPkXhSs2F7DZgIQTrFYFO2CY0h0L1sLwC7FJnxp99oVuzcCpmnKMCgEsMeO8SrrM4AU335JHpajSHRPT679YVUA9hJvKRZ5SvSwHEOie/pdO9bAtRlgFEkqcFYqZdEuOI5E97SdNau61grgqPe+bEw3jv03QrJ7Wo31WgE8IsCRDQkERNV+dg/J7mk11iqsllw/IsyddUiy1t5RJLunI3bMVzPAKOJKrl+HZN8WR5DsngLY/YC6AKRp/8HacCF4OZWjqKoq4xb0o3BVAA8KdGRDgkGpUmZHSHovD8JVAYwIdGRDJEuZHSHpvYwAqPYBS26dsdM2kciNU0JY0nu5NaOn4ioSjP1vxMDAgGz78NtCURQGBqTZSr6ePSoSpn+wOoIS7cFvm3h8QMYOYJ0RaQUAoGmaaBc6RvJ7GFGxDlWUkkikX9YedFMEg0EikX7RbmzFXSrWiZrSIsm++7boAt81lavHp0rJtm3buzILBINBtm2TYnJ1K+Iq1hm60qKqKoODQ131RqAoCoODQ90wmhmTPgOAVZBpx46dot1omh07dhIOh0W70QzyZ4A6icQtsneoAKvjmkjcItqNZumODFBncPA2md+p8fl8DA7eJtqNVohL30itJRAIMDR0O6oqnwhU1cfQ0O2yjvtvigpIsWuhWSKRfoaH75DqQQcCAYaH7+iKJmodyyogxb6lVgiFQgwP3ylFRyscDjM8fCehUEi0K+2Q7boMUMfv97N79zCxmLguTCwWZ/fuYfz+TkouC6U7M0AdRVHQtG1COoY+n0/GyuGtkvXThRmgVCpx5UqGK1cywjZcVKtVpqcn8fv9DAxoDAxo3dgMLPuBjGgvmqFWq60G3evK4FtRL2Kl62nC4fCqGLpgFBAg4wc+Fu3FVrh5CITTrKyssLKyQjq9IOvhEuv52A+cF+3FZrh9CIRbSHy4xHrOSymAfD7P5cvzMu2rbwvDsA6z0PU0O3fuor9funGC88pSej4OXBHtCViHPaVSKVkqaznOtm3bSSaTMh0+NaCYpklGT80ieGVwsVhkdvaSLAWVXCMUCjE4OERfX59oV+a0RHKwLkWhzcDios7ExCc3fPDBeoWdmPhEhlrC5+HqxpBfifCgWq0yNTVBKjV/Q5WEaYRpmqRS80xNTQg77wg75nUBHPPaerlcZnLyIvl83mvT0pDP55mcvEi5LKR4xDG4KoAxwDMvDKPE5OTFmyLlN6JUsp6FYXj6LMpYMbcEoCWSeeCkF5aLxRUmJoSpXkrK5TITExcpFj0b4Txpx/yaCiFvu23VSnlC2z1pqVarTE5OeNUkrsZ6rQBc7QcUiytMT0/JVitHKmq1GtPTU15kgtVYrxXAGODKCEylUmZ6egrT7AW/EaZpicDFqmKL2O0/rBGAfQT5q05bq6ta9okcmahUKm5my/9ce9z8+jHJV5y2Njs70/Vj+iKwRkZn3Lj0v6394RoBaInkCeCCU5YWFi7LUim7K8lml1lYuOzkJS/YMV5lo1kJR7JAPp+X5dCkriadXnDyzeC62G4mgI7GZU2zxvz8bCeX6LGG+flZJzrQJs0IQEskJ4HXO7G0sLDQdYs4ZMYwDBYWOs6mr9uxvYbNJqa/266VYrGIrguf6brh0HW90870hjHdUABaInkKeKtVC6ZpMjc3Q4ctSI8NsZ5tm7Omb9kxvY6tlqa82KqVpaXF3iufixSLxXZXS20ay00FoCWSx4HjzVowTbMrz/jtNnQ93WoWOG7HckMaLU57vlkrmcxSb7TPAyqVSqvH6W4Zwy0FoCWSPwNea2zD7HX8PMR61k1lgdfsGG5KM8tTvwnktvqF5eVlyuXea59XlMsGy8sNR1hzWLHbkoYC0BLJS8BzW/1OOt1r+72miWf+nB27LWl2gfoPgfGN/iOfz1Eq9Xr+XlMqFcnnN03M41gxa0hTAtASyQrwFBs0PE2koh4uscmzN4Gn7Jg1pOktKloiOQa8tP7fJTkY+aZkk2f/kh2rpmh1j9J3WLOapFAo9F79BFKpVCgUCmv/aQwrRk3TkgC0RLIKPA7oIM2p2Dc1a2KgA4/bMWqalncp2j3LJwEzm+2lf9HYMTCBJ5vp9a+nrW2qWiL5Zj6f/1Hv3V885bJBPp/7Fy2RfLOdz7e9TzmTWfx6JBKZbvfzPZwhHA7PpNPpr7f7eaWTTZkffXg6XigUJkulotRnDtyohEKh5b6+8O59B+5ru85TR5UK7r7n8HJfX9+hQCDYGwnymEAgWAyFQoc7CT50KACAfQfum4rFYkcCgUBvs59HBAKBciwWO3LPwQcudnotR2qVjOw7NB6PDzzs9/dE4DZ+f6Acjw88PLLv0IZD863iWLGaPXsPnohGo0d6zYF7BALBYjQaPbJn78ETjX+7OTrqBG7E2TPv7F5ZKX5gGKWuOYegGwgGQ8vhcN/BfQfuv25lbyc4LgCAs2fe1cpl44NCoXC74xe/CYlEItOBQPBgpx2+jXBFAAC//uiMWiqVfpHNLn/GFQM3CbFY/EQoFPrcp+8+4MpOUdcEUOfDD975fi6X/fNarSZ1zVTZUFXVjEZjf3vPwfu/5aYd1wUAcG783c8XCitvGEZJymO0ZSMYDOUikfCX9u6/7+du2/JEAADj758Km6b5di6X/U1PDHYp0WjsfxVFeWT/oQc8KRjkmQDqnD97+k+y2ezflcvl7jsO1EUCgYARi8X+bGTf4X/w0q7nAgA4c/pkDPhJPp/7nZupQORGKIpCf3/0v4AvHzh8xPP5dSECqHNu/L3RUqn445WVlV3CnBBIOByeD4X6vrp3/71NL+FyGqECqPPRh+/9RaFQeKZUKnXFKaadEgqFspFI5MW777n3b0T7IoUA6pw9887TxWLx6VKpJO0JC50QCoWu9PX1vbTvwP3XLa4VhVQCqHNu/L0/MozS84VCQWgJe6eIRCJzwWDo2b377/0n0b6sR0oB1Dl/9v3Rctn460Jh5XPVaqWrDufz+fyVSCT8i0Ag+Fcj+w4Ja+MbIbUA6vxy7JgvHh/402q18ofFYnGkWq1KOaro8/nMvr6+8z6f/5+Xl6/8/WdHj0pfE7crBLCWi//3UaRUKv5xuWx81TCM/YZhRET6EwwGC8FgcDwQCP44FOr7xzt+4+5C40/JQ9cJYD3j758cVlXfH9Rq1UfL5fKnDcMYcGveQVVVMxgMXgkEAr9WVd9btVr1R/sPHZlww5ZXdL0A1vPLsWNKf390v8/n+zxwX61W21ur1QZrtWp/rVbrq1ZrQdM0faZpKqZpCUVRVFNRFFNRlKrPpxqqqhZV1ZdXVXVWVdVzwLvVavXn+Xxu/LOjR2+oB/b/eq8o0Kr0ir4AAAAASUVORK5CYII=";function DX(n){return Zn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(n)}function MX(n){return Zn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"},child:[]}]})(n)}function BX(n){return Zn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29 7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160-93.3 160-208 160z"},child:[]}]})(n)}function gv(n){return Zn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"},child:[]}]})(n)}function NX(n){return Zn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"},child:[]}]})(n)}function VX(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}VX(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var vk=n=>typeof n=="number"&&!isNaN(n),Fh=n=>typeof n=="string",fV=n=>typeof n=="function",LX=n=>Fh(n)||vk(n),FX=n=>_.isValidElement(n)||Fh(n)||fV(n)||vk(n),zX=1,hV=()=>`${zX++}`,qr=new Map,Y1=[],H5=new Set,mV=()=>qr.size>0,jX=(n,{containerId:e})=>{var t;return(t=qr.get(e||1))==null?void 0:t.toasts.get(n)};function UX(n,e){var t;if(e)return!!((t=qr.get(e))!=null&&t.isToastActive(n));let i=!1;return qr.forEach(s=>{s.isToastActive(n)&&(i=!0)}),i}function HX(n){if(!mV()){Y1=Y1.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||LX(n))qr.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=qr.get(n.containerId);e?e.removeToast(n.id):qr.forEach(t=>{t.removeToast(n.id)})}}var WX=(n={})=>{qr.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function $X(n,e){FX(n)&&(mV()||Y1.push({content:n,options:e}),qr.forEach(t=>{t.buildToast(n,e)}))}function gV(n,e){qr.forEach(t=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===t.id)&&t.toggle(n,e?.id)})}function GX(n){return H5.add(n),()=>{H5.delete(n)}}function YX(n){return n&&(Fh(n.toastId)||vk(n.toastId))?n.toastId:hV()}function Sm(n,e){return $X(n,e),e.toastId}function pv(n,e){return{...e,type:e&&e.type||n,toastId:YX(e)}}function bv(n){return(e,t)=>Sm(e,pv(n,t))}function Ut(n,e){return Sm(n,pv("default",e))}Ut.loading=(n,e)=>Sm(n,pv("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function KX(n,{pending:e,error:t,success:i},s){let r;e&&(r=Fh(e)?Ut.loading(e,s):Ut.loading(e.render,{...s,...e}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},a=(d,h,m)=>{if(h==null){Ut.dismiss(r);return}let p={type:d,...o,...s,data:m},w=Fh(h)?{render:h}:h;return r?Ut.update(r,{...p,...w}):Ut(w.render,{...p,...w}),m},c=fV(n)?n():n;return c.then(d=>a("success",i,d)).catch(d=>a("error",t,d)),c}Ut.promise=KX;Ut.success=bv("success");Ut.info=bv("info");Ut.error=bv("error");Ut.warning=bv("warning");Ut.warn=Ut.warning;Ut.dark=(n,e)=>Sm(n,pv("default",{theme:"dark",...e}));function qX(n){HX(n)}Ut.dismiss=qX;Ut.clearWaitingQueue=WX;Ut.isActive=UX;Ut.update=(n,e={})=>{let t=jX(n,e);if(t){let{props:i,content:s}=t,r={delay:100,...i,...e,toastId:e.toastId||n,updateId:hV()};r.toastId!==n&&(r.staleId=n);let o=r.render||s;delete r.render,Sm(o,r)}};Ut.done=n=>{Ut.update(n,{progress:1})};Ut.onChange=GX;Ut.play=n=>gV(!0,n);Ut.pause=n=>gV(!1,n);const bt=(n,e)=>{const t={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"};switch(n){case"success":Ut.success(e,t);break;case"error":Ut.error(e,t);break;case"info":Ut.info(e,t);break;default:Ut(e,t);break}};function QX(n){return Zn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M337.509 305.372h-17.501l-6.571-5.486c20.791-25.232 33.922-57.054 33.922-93.257C347.358 127.632 283.896 64 205.135 64 127.452 64 64 127.632 64 206.629s63.452 142.628 142.225 142.628c35.011 0 67.831-13.167 92.991-34.008l6.561 5.487v17.551L415.18 448 448 415.086 337.509 305.372zm-131.284 0c-54.702 0-98.463-43.887-98.463-98.743 0-54.858 43.761-98.742 98.463-98.742 54.7 0 98.462 43.884 98.462 98.742 0 54.856-43.762 98.743-98.462 98.743z"},child:[]}]})(n)}function ZX(n){return Zn({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"},child:[]}]})(n)}const JX=()=>{const{toggleSidebar:n}=ik(),[e,t]=_.useState(!1),i=gx(),s=ma(),r=dl(c=>c.user),o=async()=>{try{const c=await fetch(`${Et("VITE_API_BASE_URL")}/auth/logout`,{method:"get",credentials:"include"}),d=await c.json();if(!c.ok)return bt("error",d.message);i(LH()),s(md),bt("success",d.message)}catch(c){bt("error",c.message||"Logout failed")}},a=()=>{t(c=>!c)};return v.jsxs("div",{className:"flex justify-between items-center h-16 fixed w-full z-20 bg-white px-5 border-b",children:[v.jsxs("div",{className:"flex justify-center items-center gap-2",children:[v.jsx("button",{onClick:n,className:"md:hidden",type:"button","aria-label":"Toggle Sidebar",children:v.jsx(ZX,{size:20})}),v.jsx(_n,{to:md,children:v.jsx("img",{src:sk,className:"md:w-auto w-48 h-10",alt:"Company Logo"})})]}),v.jsx("div",{className:"w-[500px]",children:v.jsx("div",{className:`md:relative md:block absolute bg-white left-0 w-full md:top-0 top-16 md:p-0 p-5 shadow-md md:shadow-none ${e?"block":"hidden"}`,children:v.jsx(EZ,{})})}),v.jsxs("div",{className:"flex items-center gap-5",children:[v.jsx("button",{onClick:a,type:"button",className:"md:hidden block","aria-label":"Toggle Search",children:v.jsx(QX,{size:25})}),!r.isLoggedIn||!r.user?v.jsx(ai,{asChild:!0,className:"rounded-full",children:v.jsxs(_n,{to:ac,children:[v.jsx(kZ,{className:"mr-2"}),"Sign In"]})}):v.jsxs(gX,{children:[v.jsx(pX,{className:"outline-none",children:v.jsx(lc,{children:v.jsx(gd,{src:r.user.avatar||Lh,alt:r.user.name})})}),v.jsxs(bX,{align:"end",className:"w-56",children:[v.jsxs(wX,{children:[v.jsx("p",{className:"font-bold truncate",children:r.user.name}),v.jsx("p",{className:"text-xs text-gray-500 truncate",children:r.user.email})]}),v.jsx(F5,{}),v.jsx(a_,{asChild:!0,className:"cursor-pointer",children:v.jsxs(_n,{to:mN,className:"flex items-center w-full",children:[v.jsx(NX,{className:"mr-2"}),"Profile"]})}),v.jsx(a_,{asChild:!0,className:"cursor-pointer",children:v.jsxs(_n,{to:rk,className:"flex items-center w-full",children:[v.jsx(wZ,{className:"mr-2"}),"Create Blog"]})}),v.jsx(F5,{}),v.jsxs(a_,{onClick:o,className:"cursor-pointer text-red-600 focus:text-red-600 focus:bg-red-50",children:[v.jsx(mZ,{className:"mr-2",size:18}),"Logout"]})]})]})]})]})},XX=()=>v.jsxs(XQ,{children:[v.jsx(JX,{}),v.jsx(CZ,{}),v.jsxs("main",{className:"w-full",children:[v.jsx("div",{className:"w-full min-h-[calc(100vh-45px)] py-28  px-10",children:v.jsx(Ox,{})}),v.jsx(xZ,{})]})]});function Xs({className:n,...e}){return v.jsx("div",{"data-slot":"card",className:Ye("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",n),...e})}function pV({className:n,...e}){return v.jsx("div",{"data-slot":"card-header",className:Ye("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...e})}function lo({className:n,...e}){return v.jsx("div",{"data-slot":"card-content",className:Ye("px-6",n),...e})}const eee=Nx("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function tee({className:n,variant:e="default",asChild:t=!1,...i}){const s=t?vm:"span";return v.jsx(s,{"data-slot":"badge","data-variant":e,className:Ye(eee({variant:e}),n),...i})}var bV;function ye(){return bV.apply(null,arguments)}function nee(n){bV=n}function kr(n){return n instanceof Array||Object.prototype.toString.call(n)==="[object Array]"}function nc(n){return n!=null&&Object.prototype.toString.call(n)==="[object Object]"}function _t(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function yk(n){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(n).length===0;var e;for(e in n)if(_t(n,e))return!1;return!0}function es(n){return n===void 0}function la(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function Tm(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function wV(n,e){var t=[],i,s=n.length;for(i=0;i<s;++i)t.push(e(n[i],i));return t}function Ja(n,e){for(var t in e)_t(e,t)&&(n[t]=e[t]);return _t(e,"toString")&&(n.toString=e.toString),_t(e,"valueOf")&&(n.valueOf=e.valueOf),n}function co(n,e,t,i){return jV(n,e,t,i,!0).utc()}function iee(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function et(n){return n._pf==null&&(n._pf=iee()),n._pf}var K1;Array.prototype.some?K1=Array.prototype.some:K1=function(n){var e=Object(this),t=e.length>>>0,i;for(i=0;i<t;i++)if(i in e&&n.call(this,e[i],i,e))return!0;return!1};function Ak(n){var e=null,t=!1,i=n._d&&!isNaN(n._d.getTime());if(i&&(e=et(n),t=K1.call(e.parsedDateParts,function(s){return s!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),n._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(n))n._isValid=i;else return i;return n._isValid}function wv(n){var e=co(NaN);return n!=null?Ja(et(e),n):et(e).userInvalidated=!0,e}var W5=ye.momentProperties=[],u_=!1;function _k(n,e){var t,i,s,r=W5.length;if(es(e._isAMomentObject)||(n._isAMomentObject=e._isAMomentObject),es(e._i)||(n._i=e._i),es(e._f)||(n._f=e._f),es(e._l)||(n._l=e._l),es(e._strict)||(n._strict=e._strict),es(e._tzm)||(n._tzm=e._tzm),es(e._isUTC)||(n._isUTC=e._isUTC),es(e._offset)||(n._offset=e._offset),es(e._pf)||(n._pf=et(e)),es(e._locale)||(n._locale=e._locale),r>0)for(t=0;t<r;t++)i=W5[t],s=e[i],es(s)||(n[i]=s);return n}function Im(n){_k(this,n),this._d=new Date(n._d!=null?n._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),u_===!1&&(u_=!0,ye.updateOffset(this),u_=!1)}function Er(n){return n instanceof Im||n!=null&&n._isAMomentObject!=null}function vV(n){ye.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+n)}function er(n,e){var t=!0;return Ja(function(){if(ye.deprecationHandler!=null&&ye.deprecationHandler(null,n),t){var i=[],s,r,o,a=arguments.length;for(r=0;r<a;r++){if(s="",typeof arguments[r]=="object"){s+=`
[`+r+"] ";for(o in arguments[0])_t(arguments[0],o)&&(s+=o+": "+arguments[0][o]+", ");s=s.slice(0,-2)}else s=arguments[r];i.push(s)}vV(n+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var $5={};function yV(n,e){ye.deprecationHandler!=null&&ye.deprecationHandler(n,e),$5[n]||(vV(e),$5[n]=!0)}ye.suppressDeprecationWarnings=!1;ye.deprecationHandler=null;function uo(n){return typeof Function<"u"&&n instanceof Function||Object.prototype.toString.call(n)==="[object Function]"}function see(n){var e,t;for(t in n)_t(n,t)&&(e=n[t],uo(e)?this[t]=e:this["_"+t]=e);this._config=n,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function q1(n,e){var t=Ja({},n),i;for(i in e)_t(e,i)&&(nc(n[i])&&nc(e[i])?(t[i]={},Ja(t[i],n[i]),Ja(t[i],e[i])):e[i]!=null?t[i]=e[i]:delete t[i]);for(i in n)_t(n,i)&&!_t(e,i)&&nc(n[i])&&(t[i]=Ja({},t[i]));return t}function Ck(n){n!=null&&this.set(n)}var Q1;Object.keys?Q1=Object.keys:Q1=function(n){var e,t=[];for(e in n)_t(n,e)&&t.push(e);return t};var ree={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function oee(n,e,t){var i=this._calendar[n]||this._calendar.sameElse;return uo(i)?i.call(e,t):i}function to(n,e,t){var i=""+Math.abs(n),s=e-i.length,r=n>=0;return(r?t?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}var xk=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,xp=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,d_={},ed={};function ze(n,e,t,i){var s=i;typeof i=="string"&&(s=function(){return this[i]()}),n&&(ed[n]=s),e&&(ed[e[0]]=function(){return to(s.apply(this,arguments),e[1],e[2])}),t&&(ed[t]=function(){return this.localeData().ordinal(s.apply(this,arguments),n)})}function aee(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function lee(n){var e=n.match(xk),t,i;for(t=0,i=e.length;t<i;t++)ed[e[t]]?e[t]=ed[e[t]]:e[t]=aee(e[t]);return function(s){var r="",o;for(o=0;o<i;o++)r+=uo(e[o])?e[o].call(s,n):e[o];return r}}function gb(n,e){return n.isValid()?(e=AV(e,n.localeData()),d_[e]=d_[e]||lee(e),d_[e](n)):n.localeData().invalidDate()}function AV(n,e){var t=5;function i(s){return e.longDateFormat(s)||s}for(xp.lastIndex=0;t>=0&&xp.test(n);)n=n.replace(xp,i),xp.lastIndex=0,t-=1;return n}var cee={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function uee(n){var e=this._longDateFormat[n],t=this._longDateFormat[n.toUpperCase()];return e||!t?e:(this._longDateFormat[n]=t.match(xk).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[n])}var dee="Invalid date";function fee(){return this._invalidDate}var hee="%d",mee=/\d{1,2}/;function gee(n){return this._ordinal.replace("%d",n)}var pee={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function bee(n,e,t,i){var s=this._relativeTime[t];return uo(s)?s(n,e,t,i):s.replace(/%d/i,n)}function wee(n,e){var t=this._relativeTime[n>0?"future":"past"];return uo(t)?t(e):t.replace(/%s/i,e)}var G5={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function tr(n){return typeof n=="string"?G5[n]||G5[n.toLowerCase()]:void 0}function kk(n){var e={},t,i;for(i in n)_t(n,i)&&(t=tr(i),t&&(e[t]=n[i]));return e}var vee={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function yee(n){var e=[],t;for(t in n)_t(n,t)&&e.push({unit:t,priority:vee[t]});return e.sort(function(i,s){return i.priority-s.priority}),e}var _V=/\d/,Ds=/\d\d/,CV=/\d{3}/,Ek=/\d{4}/,vv=/[+-]?\d{6}/,Qt=/\d\d?/,xV=/\d\d\d\d?/,kV=/\d\d\d\d\d\d?/,yv=/\d{1,3}/,Sk=/\d{1,4}/,Av=/[+-]?\d{1,6}/,Nd=/\d+/,_v=/[+-]?\d+/,Aee=/Z|[+-]\d\d:?\d\d/gi,Cv=/Z|[+-]\d\d(?::?\d\d)?/gi,_ee=/[+-]?\d+(\.\d{1,3})?/,Rm=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Vd=/^[1-9]\d?/,Tk=/^([1-9]\d|\d)/,Jb;Jb={};function Te(n,e,t){Jb[n]=uo(e)?e:function(i,s){return i&&t?t:e}}function Cee(n,e){return _t(Jb,n)?Jb[n](e._strict,e._locale):new RegExp(xee(n))}function xee(n){return Jo(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,s,r){return t||i||s||r}))}function Jo(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Gs(n){return n<0?Math.ceil(n)||0:Math.floor(n)}function dt(n){var e=+n,t=0;return e!==0&&isFinite(e)&&(t=Gs(e)),t}var Z1={};function Ft(n,e){var t,i=e,s;for(typeof n=="string"&&(n=[n]),la(e)&&(i=function(r,o){o[e]=dt(r)}),s=n.length,t=0;t<s;t++)Z1[n[t]]=i}function Pm(n,e){Ft(n,function(t,i,s,r){s._w=s._w||{},e(t,s._w,s,r)})}function kee(n,e,t){e!=null&&_t(Z1,n)&&Z1[n](e,t._a,t,n)}function xv(n){return n%4===0&&n%100!==0||n%400===0}var Si=0,Yo=1,$r=2,Kn=3,br=4,Ko=5,Jl=6,Eee=7,See=8;ze("Y",0,0,function(){var n=this.year();return n<=9999?to(n,4):"+"+n});ze(0,["YY",2],0,function(){return this.year()%100});ze(0,["YYYY",4],0,"year");ze(0,["YYYYY",5],0,"year");ze(0,["YYYYYY",6,!0],0,"year");Te("Y",_v);Te("YY",Qt,Ds);Te("YYYY",Sk,Ek);Te("YYYYY",Av,vv);Te("YYYYYY",Av,vv);Ft(["YYYYY","YYYYYY"],Si);Ft("YYYY",function(n,e){e[Si]=n.length===2?ye.parseTwoDigitYear(n):dt(n)});Ft("YY",function(n,e){e[Si]=ye.parseTwoDigitYear(n)});Ft("Y",function(n,e){e[Si]=parseInt(n,10)});function hh(n){return xv(n)?366:365}ye.parseTwoDigitYear=function(n){return dt(n)+(dt(n)>68?1900:2e3)};var EV=Ld("FullYear",!0);function Tee(){return xv(this.year())}function Ld(n,e){return function(t){return t!=null?(SV(this,n,t),ye.updateOffset(this,e),this):zh(this,n)}}function zh(n,e){if(!n.isValid())return NaN;var t=n._d,i=n._isUTC;switch(e){case"Milliseconds":return i?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return i?t.getUTCSeconds():t.getSeconds();case"Minutes":return i?t.getUTCMinutes():t.getMinutes();case"Hours":return i?t.getUTCHours():t.getHours();case"Date":return i?t.getUTCDate():t.getDate();case"Day":return i?t.getUTCDay():t.getDay();case"Month":return i?t.getUTCMonth():t.getMonth();case"FullYear":return i?t.getUTCFullYear():t.getFullYear();default:return NaN}}function SV(n,e,t){var i,s,r,o,a;if(!(!n.isValid()||isNaN(t))){switch(i=n._d,s=n._isUTC,e){case"Milliseconds":return void(s?i.setUTCMilliseconds(t):i.setMilliseconds(t));case"Seconds":return void(s?i.setUTCSeconds(t):i.setSeconds(t));case"Minutes":return void(s?i.setUTCMinutes(t):i.setMinutes(t));case"Hours":return void(s?i.setUTCHours(t):i.setHours(t));case"Date":return void(s?i.setUTCDate(t):i.setDate(t));case"FullYear":break;default:return}r=t,o=n.month(),a=n.date(),a=a===29&&o===1&&!xv(r)?28:a,s?i.setUTCFullYear(r,o,a):i.setFullYear(r,o,a)}}function Iee(n){return n=tr(n),uo(this[n])?this[n]():this}function Ree(n,e){if(typeof n=="object"){n=kk(n);var t=yee(n),i,s=t.length;for(i=0;i<s;i++)this[t[i].unit](n[t[i].unit])}else if(n=tr(n),uo(this[n]))return this[n](e);return this}function Pee(n,e){return(n%e+e)%e}var In;Array.prototype.indexOf?In=Array.prototype.indexOf:In=function(n){var e;for(e=0;e<this.length;++e)if(this[e]===n)return e;return-1};function Ik(n,e){if(isNaN(n)||isNaN(e))return NaN;var t=Pee(e,12);return n+=(e-t)/12,t===1?xv(n)?29:28:31-t%7%2}ze("M",["MM",2],"Mo",function(){return this.month()+1});ze("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});ze("MMMM",0,0,function(n){return this.localeData().months(this,n)});Te("M",Qt,Vd);Te("MM",Qt,Ds);Te("MMM",function(n,e){return e.monthsShortRegex(n)});Te("MMMM",function(n,e){return e.monthsRegex(n)});Ft(["M","MM"],function(n,e){e[Yo]=dt(n)-1});Ft(["MMM","MMMM"],function(n,e,t,i){var s=t._locale.monthsParse(n,i,t._strict);s!=null?e[Yo]=s:et(t).invalidMonth=n});var Oee="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),TV="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),IV=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Dee=Rm,Mee=Rm;function Bee(n,e){return n?kr(this._months)?this._months[n.month()]:this._months[(this._months.isFormat||IV).test(e)?"format":"standalone"][n.month()]:kr(this._months)?this._months:this._months.standalone}function Nee(n,e){return n?kr(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[IV.test(e)?"format":"standalone"][n.month()]:kr(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Vee(n,e,t){var i,s,r,o=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=co([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return t?e==="MMM"?(s=In.call(this._shortMonthsParse,o),s!==-1?s:null):(s=In.call(this._longMonthsParse,o),s!==-1?s:null):e==="MMM"?(s=In.call(this._shortMonthsParse,o),s!==-1?s:(s=In.call(this._longMonthsParse,o),s!==-1?s:null)):(s=In.call(this._longMonthsParse,o),s!==-1?s:(s=In.call(this._shortMonthsParse,o),s!==-1?s:null))}function Lee(n,e,t){var i,s,r;if(this._monthsParseExact)return Vee.call(this,n,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=co([2e3,i]),t&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!t&&!this._monthsParse[i]&&(r="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[i].test(n))return i;if(t&&e==="MMM"&&this._shortMonthsParse[i].test(n))return i;if(!t&&this._monthsParse[i].test(n))return i}}function RV(n,e){if(!n.isValid())return n;if(typeof e=="string"){if(/^\d+$/.test(e))e=dt(e);else if(e=n.localeData().monthsParse(e),!la(e))return n}var t=e,i=n.date();return i=i<29?i:Math.min(i,Ik(n.year(),t)),n._isUTC?n._d.setUTCMonth(t,i):n._d.setMonth(t,i),n}function PV(n){return n!=null?(RV(this,n),ye.updateOffset(this,!0),this):zh(this,"Month")}function Fee(){return Ik(this.year(),this.month())}function zee(n){return this._monthsParseExact?(_t(this,"_monthsRegex")||OV.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):(_t(this,"_monthsShortRegex")||(this._monthsShortRegex=Dee),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)}function jee(n){return this._monthsParseExact?(_t(this,"_monthsRegex")||OV.call(this),n?this._monthsStrictRegex:this._monthsRegex):(_t(this,"_monthsRegex")||(this._monthsRegex=Mee),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)}function OV(){function n(c,d){return d.length-c.length}var e=[],t=[],i=[],s,r,o,a;for(s=0;s<12;s++)r=co([2e3,s]),o=Jo(this.monthsShort(r,"")),a=Jo(this.months(r,"")),e.push(o),t.push(a),i.push(a),i.push(o);e.sort(n),t.sort(n),i.sort(n),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Uee(n,e,t,i,s,r,o){var a;return n<100&&n>=0?(a=new Date(n+400,e,t,i,s,r,o),isFinite(a.getFullYear())&&a.setFullYear(n)):a=new Date(n,e,t,i,s,r,o),a}function jh(n){var e,t;return n<100&&n>=0?(t=Array.prototype.slice.call(arguments),t[0]=n+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(n)):e=new Date(Date.UTC.apply(null,arguments)),e}function Xb(n,e,t){var i=7+e-t,s=(7+jh(n,0,i).getUTCDay()-e)%7;return-s+i-1}function DV(n,e,t,i,s){var r=(7+t-i)%7,o=Xb(n,i,s),a=1+7*(e-1)+r+o,c,d;return a<=0?(c=n-1,d=hh(c)+a):a>hh(n)?(c=n+1,d=a-hh(n)):(c=n,d=a),{year:c,dayOfYear:d}}function Uh(n,e,t){var i=Xb(n.year(),e,t),s=Math.floor((n.dayOfYear()-i-1)/7)+1,r,o;return s<1?(o=n.year()-1,r=s+Xo(o,e,t)):s>Xo(n.year(),e,t)?(r=s-Xo(n.year(),e,t),o=n.year()+1):(o=n.year(),r=s),{week:r,year:o}}function Xo(n,e,t){var i=Xb(n,e,t),s=Xb(n+1,e,t);return(hh(n)-i+s)/7}ze("w",["ww",2],"wo","week");ze("W",["WW",2],"Wo","isoWeek");Te("w",Qt,Vd);Te("ww",Qt,Ds);Te("W",Qt,Vd);Te("WW",Qt,Ds);Pm(["w","ww","W","WW"],function(n,e,t,i){e[i.substr(0,1)]=dt(n)});function Hee(n){return Uh(n,this._week.dow,this._week.doy).week}var Wee={dow:0,doy:6};function $ee(){return this._week.dow}function Gee(){return this._week.doy}function Yee(n){var e=this.localeData().week(this);return n==null?e:this.add((n-e)*7,"d")}function Kee(n){var e=Uh(this,1,4).week;return n==null?e:this.add((n-e)*7,"d")}ze("d",0,"do","day");ze("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)});ze("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)});ze("dddd",0,0,function(n){return this.localeData().weekdays(this,n)});ze("e",0,0,"weekday");ze("E",0,0,"isoWeekday");Te("d",Qt);Te("e",Qt);Te("E",Qt);Te("dd",function(n,e){return e.weekdaysMinRegex(n)});Te("ddd",function(n,e){return e.weekdaysShortRegex(n)});Te("dddd",function(n,e){return e.weekdaysRegex(n)});Pm(["dd","ddd","dddd"],function(n,e,t,i){var s=t._locale.weekdaysParse(n,i,t._strict);s!=null?e.d=s:et(t).invalidWeekday=n});Pm(["d","e","E"],function(n,e,t,i){e[i]=dt(n)});function qee(n,e){return typeof n!="string"?n:isNaN(n)?(n=e.weekdaysParse(n),typeof n=="number"?n:null):parseInt(n,10)}function Qee(n,e){return typeof n=="string"?e.weekdaysParse(n)%7||7:isNaN(n)?null:n}function Rk(n,e){return n.slice(e,7).concat(n.slice(0,e))}var Zee="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),MV="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Jee="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Xee=Rm,ete=Rm,tte=Rm;function nte(n,e){var t=kr(this._weekdays)?this._weekdays:this._weekdays[n&&n!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return n===!0?Rk(t,this._week.dow):n?t[n.day()]:t}function ite(n){return n===!0?Rk(this._weekdaysShort,this._week.dow):n?this._weekdaysShort[n.day()]:this._weekdaysShort}function ste(n){return n===!0?Rk(this._weekdaysMin,this._week.dow):n?this._weekdaysMin[n.day()]:this._weekdaysMin}function rte(n,e,t){var i,s,r,o=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=co([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return t?e==="dddd"?(s=In.call(this._weekdaysParse,o),s!==-1?s:null):e==="ddd"?(s=In.call(this._shortWeekdaysParse,o),s!==-1?s:null):(s=In.call(this._minWeekdaysParse,o),s!==-1?s:null):e==="dddd"?(s=In.call(this._weekdaysParse,o),s!==-1||(s=In.call(this._shortWeekdaysParse,o),s!==-1)?s:(s=In.call(this._minWeekdaysParse,o),s!==-1?s:null)):e==="ddd"?(s=In.call(this._shortWeekdaysParse,o),s!==-1||(s=In.call(this._weekdaysParse,o),s!==-1)?s:(s=In.call(this._minWeekdaysParse,o),s!==-1?s:null)):(s=In.call(this._minWeekdaysParse,o),s!==-1||(s=In.call(this._weekdaysParse,o),s!==-1)?s:(s=In.call(this._shortWeekdaysParse,o),s!==-1?s:null))}function ote(n,e,t){var i,s,r;if(this._weekdaysParseExact)return rte.call(this,n,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=co([2e3,1]).day(i),t&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[i].test(n))return i;if(t&&e==="ddd"&&this._shortWeekdaysParse[i].test(n))return i;if(t&&e==="dd"&&this._minWeekdaysParse[i].test(n))return i;if(!t&&this._weekdaysParse[i].test(n))return i}}function ate(n){if(!this.isValid())return n!=null?this:NaN;var e=zh(this,"Day");return n!=null?(n=qee(n,this.localeData()),this.add(n-e,"d")):e}function lte(n){if(!this.isValid())return n!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return n==null?e:this.add(n-e,"d")}function cte(n){if(!this.isValid())return n!=null?this:NaN;if(n!=null){var e=Qee(n,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function ute(n){return this._weekdaysParseExact?(_t(this,"_weekdaysRegex")||Pk.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):(_t(this,"_weekdaysRegex")||(this._weekdaysRegex=Xee),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)}function dte(n){return this._weekdaysParseExact?(_t(this,"_weekdaysRegex")||Pk.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(_t(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ete),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function fte(n){return this._weekdaysParseExact?(_t(this,"_weekdaysRegex")||Pk.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(_t(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=tte),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Pk(){function n(h,m){return m.length-h.length}var e=[],t=[],i=[],s=[],r,o,a,c,d;for(r=0;r<7;r++)o=co([2e3,1]).day(r),a=Jo(this.weekdaysMin(o,"")),c=Jo(this.weekdaysShort(o,"")),d=Jo(this.weekdays(o,"")),e.push(a),t.push(c),i.push(d),s.push(a),s.push(c),s.push(d);e.sort(n),t.sort(n),i.sort(n),s.sort(n),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Ok(){return this.hours()%12||12}function hte(){return this.hours()||24}ze("H",["HH",2],0,"hour");ze("h",["hh",2],0,Ok);ze("k",["kk",2],0,hte);ze("hmm",0,0,function(){return""+Ok.apply(this)+to(this.minutes(),2)});ze("hmmss",0,0,function(){return""+Ok.apply(this)+to(this.minutes(),2)+to(this.seconds(),2)});ze("Hmm",0,0,function(){return""+this.hours()+to(this.minutes(),2)});ze("Hmmss",0,0,function(){return""+this.hours()+to(this.minutes(),2)+to(this.seconds(),2)});function BV(n,e){ze(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}BV("a",!0);BV("A",!1);function NV(n,e){return e._meridiemParse}Te("a",NV);Te("A",NV);Te("H",Qt,Tk);Te("h",Qt,Vd);Te("k",Qt,Vd);Te("HH",Qt,Ds);Te("hh",Qt,Ds);Te("kk",Qt,Ds);Te("hmm",xV);Te("hmmss",kV);Te("Hmm",xV);Te("Hmmss",kV);Ft(["H","HH"],Kn);Ft(["k","kk"],function(n,e,t){var i=dt(n);e[Kn]=i===24?0:i});Ft(["a","A"],function(n,e,t){t._isPm=t._locale.isPM(n),t._meridiem=n});Ft(["h","hh"],function(n,e,t){e[Kn]=dt(n),et(t).bigHour=!0});Ft("hmm",function(n,e,t){var i=n.length-2;e[Kn]=dt(n.substr(0,i)),e[br]=dt(n.substr(i)),et(t).bigHour=!0});Ft("hmmss",function(n,e,t){var i=n.length-4,s=n.length-2;e[Kn]=dt(n.substr(0,i)),e[br]=dt(n.substr(i,2)),e[Ko]=dt(n.substr(s)),et(t).bigHour=!0});Ft("Hmm",function(n,e,t){var i=n.length-2;e[Kn]=dt(n.substr(0,i)),e[br]=dt(n.substr(i))});Ft("Hmmss",function(n,e,t){var i=n.length-4,s=n.length-2;e[Kn]=dt(n.substr(0,i)),e[br]=dt(n.substr(i,2)),e[Ko]=dt(n.substr(s))});function mte(n){return(n+"").toLowerCase().charAt(0)==="p"}var gte=/[ap]\.?m?\.?/i,pte=Ld("Hours",!0);function bte(n,e,t){return n>11?t?"pm":"PM":t?"am":"AM"}var VV={calendar:ree,longDateFormat:cee,invalidDate:dee,ordinal:hee,dayOfMonthOrdinalParse:mee,relativeTime:pee,months:Oee,monthsShort:TV,week:Wee,weekdays:Zee,weekdaysMin:Jee,weekdaysShort:MV,meridiemParse:gte},Jt={},jf={},Hh;function wte(n,e){var t,i=Math.min(n.length,e.length);for(t=0;t<i;t+=1)if(n[t]!==e[t])return t;return i}function Y5(n){return n&&n.toLowerCase().replace("_","-")}function vte(n){for(var e=0,t,i,s,r;e<n.length;){for(r=Y5(n[e]).split("-"),t=r.length,i=Y5(n[e+1]),i=i?i.split("-"):null;t>0;){if(s=kv(r.slice(0,t).join("-")),s)return s;if(i&&i.length>=t&&wte(r,i)>=t-1)break;t--}e++}return Hh}function yte(n){return!!(n&&n.match("^[^/\\\\]*$"))}function kv(n){var e=null,t;if(Jt[n]===void 0&&typeof Pb<"u"&&Pb&&Pb.exports&&yte(n))try{e=Hh._abbr,t=require,t("./locale/"+n),tl(e)}catch{Jt[n]=null}return Jt[n]}function tl(n,e){var t;return n&&(es(e)?t=pa(n):t=Dk(n,e),t?Hh=t:typeof console<"u"&&console.warn&&console.warn("Locale "+n+" not found. Did you forget to load it?")),Hh._abbr}function Dk(n,e){if(e!==null){var t,i=VV;if(e.abbr=n,Jt[n]!=null)yV("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Jt[n]._config;else if(e.parentLocale!=null)if(Jt[e.parentLocale]!=null)i=Jt[e.parentLocale]._config;else if(t=kv(e.parentLocale),t!=null)i=t._config;else return jf[e.parentLocale]||(jf[e.parentLocale]=[]),jf[e.parentLocale].push({name:n,config:e}),null;return Jt[n]=new Ck(q1(i,e)),jf[n]&&jf[n].forEach(function(s){Dk(s.name,s.config)}),tl(n),Jt[n]}else return delete Jt[n],null}function Ate(n,e){if(e!=null){var t,i,s=VV;Jt[n]!=null&&Jt[n].parentLocale!=null?Jt[n].set(q1(Jt[n]._config,e)):(i=kv(n),i!=null&&(s=i._config),e=q1(s,e),i==null&&(e.abbr=n),t=new Ck(e),t.parentLocale=Jt[n],Jt[n]=t),tl(n)}else Jt[n]!=null&&(Jt[n].parentLocale!=null?(Jt[n]=Jt[n].parentLocale,n===tl()&&tl(n)):Jt[n]!=null&&delete Jt[n]);return Jt[n]}function pa(n){var e;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return Hh;if(!kr(n)){if(e=kv(n),e)return e;n=[n]}return vte(n)}function _te(){return Q1(Jt)}function Mk(n){var e,t=n._a;return t&&et(n).overflow===-2&&(e=t[Yo]<0||t[Yo]>11?Yo:t[$r]<1||t[$r]>Ik(t[Si],t[Yo])?$r:t[Kn]<0||t[Kn]>24||t[Kn]===24&&(t[br]!==0||t[Ko]!==0||t[Jl]!==0)?Kn:t[br]<0||t[br]>59?br:t[Ko]<0||t[Ko]>59?Ko:t[Jl]<0||t[Jl]>999?Jl:-1,et(n)._overflowDayOfYear&&(e<Si||e>$r)&&(e=$r),et(n)._overflowWeeks&&e===-1&&(e=Eee),et(n)._overflowWeekday&&e===-1&&(e=See),et(n).overflow=e),n}var Cte=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xte=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,kte=/Z|[+-]\d\d(?::?\d\d)?/,kp=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],f_=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ete=/^\/?Date\((-?\d+)/i,Ste=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Tte={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function LV(n){var e,t,i=n._i,s=Cte.exec(i)||xte.exec(i),r,o,a,c,d=kp.length,h=f_.length;if(s){for(et(n).iso=!0,e=0,t=d;e<t;e++)if(kp[e][1].exec(s[1])){o=kp[e][0],r=kp[e][2]!==!1;break}if(o==null){n._isValid=!1;return}if(s[3]){for(e=0,t=h;e<t;e++)if(f_[e][1].exec(s[3])){a=(s[2]||" ")+f_[e][0];break}if(a==null){n._isValid=!1;return}}if(!r&&a!=null){n._isValid=!1;return}if(s[4])if(kte.exec(s[4]))c="Z";else{n._isValid=!1;return}n._f=o+(a||"")+(c||""),Nk(n)}else n._isValid=!1}function Ite(n,e,t,i,s,r){var o=[Rte(n),TV.indexOf(e),parseInt(t,10),parseInt(i,10),parseInt(s,10)];return r&&o.push(parseInt(r,10)),o}function Rte(n){var e=parseInt(n,10);return e<=49?2e3+e:e<=999?1900+e:e}function Pte(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ote(n,e,t){if(n){var i=MV.indexOf(n),s=new Date(e[0],e[1],e[2]).getDay();if(i!==s)return et(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function Dte(n,e,t){if(n)return Tte[n];if(e)return 0;var i=parseInt(t,10),s=i%100,r=(i-s)/100;return r*60+s}function FV(n){var e=Ste.exec(Pte(n._i)),t;if(e){if(t=Ite(e[4],e[3],e[2],e[5],e[6],e[7]),!Ote(e[1],t,n))return;n._a=t,n._tzm=Dte(e[8],e[9],e[10]),n._d=jh.apply(null,n._a),n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),et(n).rfc2822=!0}else n._isValid=!1}function Mte(n){var e=Ete.exec(n._i);if(e!==null){n._d=new Date(+e[1]);return}if(LV(n),n._isValid===!1)delete n._isValid;else return;if(FV(n),n._isValid===!1)delete n._isValid;else return;n._strict?n._isValid=!1:ye.createFromInputFallback(n)}ye.createFromInputFallback=er("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))});function Fu(n,e,t){return n??e??t}function Bte(n){var e=new Date(ye.now());return n._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Bk(n){var e,t,i=[],s,r,o;if(!n._d){for(s=Bte(n),n._w&&n._a[$r]==null&&n._a[Yo]==null&&Nte(n),n._dayOfYear!=null&&(o=Fu(n._a[Si],s[Si]),(n._dayOfYear>hh(o)||n._dayOfYear===0)&&(et(n)._overflowDayOfYear=!0),t=jh(o,0,n._dayOfYear),n._a[Yo]=t.getUTCMonth(),n._a[$r]=t.getUTCDate()),e=0;e<3&&n._a[e]==null;++e)n._a[e]=i[e]=s[e];for(;e<7;e++)n._a[e]=i[e]=n._a[e]==null?e===2?1:0:n._a[e];n._a[Kn]===24&&n._a[br]===0&&n._a[Ko]===0&&n._a[Jl]===0&&(n._nextDay=!0,n._a[Kn]=0),n._d=(n._useUTC?jh:Uee).apply(null,i),r=n._useUTC?n._d.getUTCDay():n._d.getDay(),n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),n._nextDay&&(n._a[Kn]=24),n._w&&typeof n._w.d<"u"&&n._w.d!==r&&(et(n).weekdayMismatch=!0)}}function Nte(n){var e,t,i,s,r,o,a,c,d;e=n._w,e.GG!=null||e.W!=null||e.E!=null?(r=1,o=4,t=Fu(e.GG,n._a[Si],Uh(Kt(),1,4).year),i=Fu(e.W,1),s=Fu(e.E,1),(s<1||s>7)&&(c=!0)):(r=n._locale._week.dow,o=n._locale._week.doy,d=Uh(Kt(),r,o),t=Fu(e.gg,n._a[Si],d.year),i=Fu(e.w,d.week),e.d!=null?(s=e.d,(s<0||s>6)&&(c=!0)):e.e!=null?(s=e.e+r,(e.e<0||e.e>6)&&(c=!0)):s=r),i<1||i>Xo(t,r,o)?et(n)._overflowWeeks=!0:c!=null?et(n)._overflowWeekday=!0:(a=DV(t,i,s,r,o),n._a[Si]=a.year,n._dayOfYear=a.dayOfYear)}ye.ISO_8601=function(){};ye.RFC_2822=function(){};function Nk(n){if(n._f===ye.ISO_8601){LV(n);return}if(n._f===ye.RFC_2822){FV(n);return}n._a=[],et(n).empty=!0;var e=""+n._i,t,i,s,r,o,a=e.length,c=0,d,h;for(s=AV(n._f,n._locale).match(xk)||[],h=s.length,t=0;t<h;t++)r=s[t],i=(e.match(Cee(r,n))||[])[0],i&&(o=e.substr(0,e.indexOf(i)),o.length>0&&et(n).unusedInput.push(o),e=e.slice(e.indexOf(i)+i.length),c+=i.length),ed[r]?(i?et(n).empty=!1:et(n).unusedTokens.push(r),kee(r,i,n)):n._strict&&!i&&et(n).unusedTokens.push(r);et(n).charsLeftOver=a-c,e.length>0&&et(n).unusedInput.push(e),n._a[Kn]<=12&&et(n).bigHour===!0&&n._a[Kn]>0&&(et(n).bigHour=void 0),et(n).parsedDateParts=n._a.slice(0),et(n).meridiem=n._meridiem,n._a[Kn]=Vte(n._locale,n._a[Kn],n._meridiem),d=et(n).era,d!==null&&(n._a[Si]=n._locale.erasConvertYear(d,n._a[Si])),Bk(n),Mk(n)}function Vte(n,e,t){var i;return t==null?e:n.meridiemHour!=null?n.meridiemHour(e,t):(n.isPM!=null&&(i=n.isPM(t),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function Lte(n){var e,t,i,s,r,o,a=!1,c=n._f.length;if(c===0){et(n).invalidFormat=!0,n._d=new Date(NaN);return}for(s=0;s<c;s++)r=0,o=!1,e=_k({},n),n._useUTC!=null&&(e._useUTC=n._useUTC),e._f=n._f[s],Nk(e),Ak(e)&&(o=!0),r+=et(e).charsLeftOver,r+=et(e).unusedTokens.length*10,et(e).score=r,a?r<i&&(i=r,t=e):(i==null||r<i||o)&&(i=r,t=e,o&&(a=!0));Ja(n,t||e)}function Fte(n){if(!n._d){var e=kk(n._i),t=e.day===void 0?e.date:e.day;n._a=wV([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),Bk(n)}}function zte(n){var e=new Im(Mk(zV(n)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function zV(n){var e=n._i,t=n._f;return n._locale=n._locale||pa(n._l),e===null||t===void 0&&e===""?wv({nullInput:!0}):(typeof e=="string"&&(n._i=e=n._locale.preparse(e)),Er(e)?new Im(Mk(e)):(Tm(e)?n._d=e:kr(t)?Lte(n):t?Nk(n):jte(n),Ak(n)||(n._d=null),n))}function jte(n){var e=n._i;es(e)?n._d=new Date(ye.now()):Tm(e)?n._d=new Date(e.valueOf()):typeof e=="string"?Mte(n):kr(e)?(n._a=wV(e.slice(0),function(t){return parseInt(t,10)}),Bk(n)):nc(e)?Fte(n):la(e)?n._d=new Date(e):ye.createFromInputFallback(n)}function jV(n,e,t,i,s){var r={};return(e===!0||e===!1)&&(i=e,e=void 0),(t===!0||t===!1)&&(i=t,t=void 0),(nc(n)&&yk(n)||kr(n)&&n.length===0)&&(n=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=s,r._l=t,r._i=n,r._f=e,r._strict=i,zte(r)}function Kt(n,e,t,i){return jV(n,e,t,i,!1)}var Ute=er("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=Kt.apply(null,arguments);return this.isValid()&&n.isValid()?n<this?this:n:wv()}),Hte=er("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=Kt.apply(null,arguments);return this.isValid()&&n.isValid()?n>this?this:n:wv()});function UV(n,e){var t,i;if(e.length===1&&kr(e[0])&&(e=e[0]),!e.length)return Kt();for(t=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][n](t))&&(t=e[i]);return t}function Wte(){var n=[].slice.call(arguments,0);return UV("isBefore",n)}function $te(){var n=[].slice.call(arguments,0);return UV("isAfter",n)}var Gte=function(){return Date.now?Date.now():+new Date},Uf=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Yte(n){var e,t=!1,i,s=Uf.length;for(e in n)if(_t(n,e)&&!(In.call(Uf,e)!==-1&&(n[e]==null||!isNaN(n[e]))))return!1;for(i=0;i<s;++i)if(n[Uf[i]]){if(t)return!1;parseFloat(n[Uf[i]])!==dt(n[Uf[i]])&&(t=!0)}return!0}function Kte(){return this._isValid}function qte(){return Or(NaN)}function Ev(n){var e=kk(n),t=e.year||0,i=e.quarter||0,s=e.month||0,r=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,c=e.minute||0,d=e.second||0,h=e.millisecond||0;this._isValid=Yte(e),this._milliseconds=+h+d*1e3+c*6e4+a*1e3*60*60,this._days=+o+r*7,this._months=+s+i*3+t*12,this._data={},this._locale=pa(),this._bubble()}function pb(n){return n instanceof Ev}function J1(n){return n<0?Math.round(-1*n)*-1:Math.round(n)}function Qte(n,e,t){var i=Math.min(n.length,e.length),s=Math.abs(n.length-e.length),r=0,o;for(o=0;o<i;o++)dt(n[o])!==dt(e[o])&&r++;return r+s}function HV(n,e){ze(n,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+to(~~(t/60),2)+e+to(~~t%60,2)})}HV("Z",":");HV("ZZ","");Te("Z",Cv);Te("ZZ",Cv);Ft(["Z","ZZ"],function(n,e,t){t._useUTC=!0,t._tzm=Vk(Cv,n)});var Zte=/([\+\-]|\d\d)/gi;function Vk(n,e){var t=(e||"").match(n),i,s,r;return t===null?null:(i=t[t.length-1]||[],s=(i+"").match(Zte)||["-",0,0],r=+(s[1]*60)+dt(s[2]),r===0?0:s[0]==="+"?r:-r)}function Lk(n,e){var t,i;return e._isUTC?(t=e.clone(),i=(Er(n)||Tm(n)?n.valueOf():Kt(n).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+i),ye.updateOffset(t,!1),t):Kt(n).local()}function X1(n){return-Math.round(n._d.getTimezoneOffset())}ye.updateOffset=function(){};function Jte(n,e,t){var i=this._offset||0,s;if(!this.isValid())return n!=null?this:NaN;if(n!=null){if(typeof n=="string"){if(n=Vk(Cv,n),n===null)return this}else Math.abs(n)<16&&!t&&(n=n*60);return!this._isUTC&&e&&(s=X1(this)),this._offset=n,this._isUTC=!0,s!=null&&this.add(s,"m"),i!==n&&(!e||this._changeInProgress?GV(this,Or(n-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ye.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:X1(this)}function Xte(n,e){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,e),this):-this.utcOffset()}function ene(n){return this.utcOffset(0,n)}function tne(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract(X1(this),"m")),this}function nne(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var n=Vk(Aee,this._i);n!=null?this.utcOffset(n):this.utcOffset(0,!0)}return this}function ine(n){return this.isValid()?(n=n?Kt(n).utcOffset():0,(this.utcOffset()-n)%60===0):!1}function sne(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function rne(){if(!es(this._isDSTShifted))return this._isDSTShifted;var n={},e;return _k(n,this),n=zV(n),n._a?(e=n._isUTC?co(n._a):Kt(n._a),this._isDSTShifted=this.isValid()&&Qte(n._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function one(){return this.isValid()?!this._isUTC:!1}function ane(){return this.isValid()?this._isUTC:!1}function WV(){return this.isValid()?this._isUTC&&this._offset===0:!1}var lne=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,cne=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Or(n,e){var t=n,i=null,s,r,o;return pb(n)?t={ms:n._milliseconds,d:n._days,M:n._months}:la(n)||!isNaN(+n)?(t={},e?t[e]=+n:t.milliseconds=+n):(i=lne.exec(n))?(s=i[1]==="-"?-1:1,t={y:0,d:dt(i[$r])*s,h:dt(i[Kn])*s,m:dt(i[br])*s,s:dt(i[Ko])*s,ms:dt(J1(i[Jl]*1e3))*s}):(i=cne.exec(n))?(s=i[1]==="-"?-1:1,t={y:Wl(i[2],s),M:Wl(i[3],s),w:Wl(i[4],s),d:Wl(i[5],s),h:Wl(i[6],s),m:Wl(i[7],s),s:Wl(i[8],s)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=une(Kt(t.from),Kt(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),r=new Ev(t),pb(n)&&_t(n,"_locale")&&(r._locale=n._locale),pb(n)&&_t(n,"_isValid")&&(r._isValid=n._isValid),r}Or.fn=Ev.prototype;Or.invalid=qte;function Wl(n,e){var t=n&&parseFloat(n.replace(",","."));return(isNaN(t)?0:t)*e}function K5(n,e){var t={};return t.months=e.month()-n.month()+(e.year()-n.year())*12,n.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+n.clone().add(t.months,"M"),t}function une(n,e){var t;return n.isValid()&&e.isValid()?(e=Lk(e,n),n.isBefore(e)?t=K5(n,e):(t=K5(e,n),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function $V(n,e){return function(t,i){var s,r;return i!==null&&!isNaN(+i)&&(yV(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=t,t=i,i=r),s=Or(t,i),GV(this,s,n),this}}function GV(n,e,t,i){var s=e._milliseconds,r=J1(e._days),o=J1(e._months);n.isValid()&&(i=i??!0,o&&RV(n,zh(n,"Month")+o*t),r&&SV(n,"Date",zh(n,"Date")+r*t),s&&n._d.setTime(n._d.valueOf()+s*t),i&&ye.updateOffset(n,r||o))}var dne=$V(1,"add"),fne=$V(-1,"subtract");function YV(n){return typeof n=="string"||n instanceof String}function hne(n){return Er(n)||Tm(n)||YV(n)||la(n)||gne(n)||mne(n)||n===null||n===void 0}function mne(n){var e=nc(n)&&!yk(n),t=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,r,o=i.length;for(s=0;s<o;s+=1)r=i[s],t=t||_t(n,r);return e&&t}function gne(n){var e=kr(n),t=!1;return e&&(t=n.filter(function(i){return!la(i)&&YV(n)}).length===0),e&&t}function pne(n){var e=nc(n)&&!yk(n),t=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,r;for(s=0;s<i.length;s+=1)r=i[s],t=t||_t(n,r);return e&&t}function bne(n,e){var t=n.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function wne(n,e){arguments.length===1&&(arguments[0]?hne(arguments[0])?(n=arguments[0],e=void 0):pne(arguments[0])&&(e=arguments[0],n=void 0):(n=void 0,e=void 0));var t=n||Kt(),i=Lk(t,this).startOf("day"),s=ye.calendarFormat(this,i)||"sameElse",r=e&&(uo(e[s])?e[s].call(this,t):e[s]);return this.format(r||this.localeData().calendar(s,this,Kt(t)))}function vne(){return new Im(this)}function yne(n,e){var t=Er(n)?n:Kt(n);return this.isValid()&&t.isValid()?(e=tr(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function Ane(n,e){var t=Er(n)?n:Kt(n);return this.isValid()&&t.isValid()?(e=tr(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function _ne(n,e,t,i){var s=Er(n)?n:Kt(n),r=Er(e)?e:Kt(e);return this.isValid()&&s.isValid()&&r.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(s,t):!this.isBefore(s,t))&&(i[1]===")"?this.isBefore(r,t):!this.isAfter(r,t))):!1}function Cne(n,e){var t=Er(n)?n:Kt(n),i;return this.isValid()&&t.isValid()?(e=tr(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(i=t.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function xne(n,e){return this.isSame(n,e)||this.isAfter(n,e)}function kne(n,e){return this.isSame(n,e)||this.isBefore(n,e)}function Ene(n,e,t){var i,s,r;if(!this.isValid())return NaN;if(i=Lk(n,this),!i.isValid())return NaN;switch(s=(i.utcOffset()-this.utcOffset())*6e4,e=tr(e),e){case"year":r=bb(this,i)/12;break;case"month":r=bb(this,i);break;case"quarter":r=bb(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-s)/864e5;break;case"week":r=(this-i-s)/6048e5;break;default:r=this-i}return t?r:Gs(r)}function bb(n,e){if(n.date()<e.date())return-bb(e,n);var t=(e.year()-n.year())*12+(e.month()-n.month()),i=n.clone().add(t,"months"),s,r;return e-i<0?(s=n.clone().add(t-1,"months"),r=(e-i)/(i-s)):(s=n.clone().add(t+1,"months"),r=(e-i)/(s-i)),-(t+r)||0}ye.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";ye.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Sne(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Tne(n){if(!this.isValid())return null;var e=n!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?gb(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):uo(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",gb(t,"Z")):gb(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Ine(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var n="moment",e="",t,i,s,r;return this.isLocal()||(n=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+n+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",r=e+'[")]',this.format(t+i+s+r)}function Rne(n){n||(n=this.isUtc()?ye.defaultFormatUtc:ye.defaultFormat);var e=gb(this,n);return this.localeData().postformat(e)}function Pne(n,e){return this.isValid()&&(Er(n)&&n.isValid()||Kt(n).isValid())?Or({to:this,from:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function One(n){return this.from(Kt(),n)}function Dne(n,e){return this.isValid()&&(Er(n)&&n.isValid()||Kt(n).isValid())?Or({from:this,to:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function Mne(n){return this.to(Kt(),n)}function KV(n){var e;return n===void 0?this._locale._abbr:(e=pa(n),e!=null&&(this._locale=e),this)}var qV=er("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===void 0?this.localeData():this.locale(n)});function QV(){return this._locale}var ew=1e3,td=60*ew,tw=60*td,ZV=(365*400+97)*24*tw;function nd(n,e){return(n%e+e)%e}function JV(n,e,t){return n<100&&n>=0?new Date(n+400,e,t)-ZV:new Date(n,e,t).valueOf()}function XV(n,e,t){return n<100&&n>=0?Date.UTC(n+400,e,t)-ZV:Date.UTC(n,e,t)}function Bne(n){var e,t;if(n=tr(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?XV:JV,n){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=nd(e+(this._isUTC?0:this.utcOffset()*td),tw);break;case"minute":e=this._d.valueOf(),e-=nd(e,td);break;case"second":e=this._d.valueOf(),e-=nd(e,ew);break}return this._d.setTime(e),ye.updateOffset(this,!0),this}function Nne(n){var e,t;if(n=tr(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?XV:JV,n){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=tw-nd(e+(this._isUTC?0:this.utcOffset()*td),tw)-1;break;case"minute":e=this._d.valueOf(),e+=td-nd(e,td)-1;break;case"second":e=this._d.valueOf(),e+=ew-nd(e,ew)-1;break}return this._d.setTime(e),ye.updateOffset(this,!0),this}function Vne(){return this._d.valueOf()-(this._offset||0)*6e4}function Lne(){return Math.floor(this.valueOf()/1e3)}function Fne(){return new Date(this.valueOf())}function zne(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function jne(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function Une(){return this.isValid()?this.toISOString():null}function Hne(){return Ak(this)}function Wne(){return Ja({},et(this))}function $ne(){return et(this).overflow}function Gne(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ze("N",0,0,"eraAbbr");ze("NN",0,0,"eraAbbr");ze("NNN",0,0,"eraAbbr");ze("NNNN",0,0,"eraName");ze("NNNNN",0,0,"eraNarrow");ze("y",["y",1],"yo","eraYear");ze("y",["yy",2],0,"eraYear");ze("y",["yyy",3],0,"eraYear");ze("y",["yyyy",4],0,"eraYear");Te("N",Fk);Te("NN",Fk);Te("NNN",Fk);Te("NNNN",iie);Te("NNNNN",sie);Ft(["N","NN","NNN","NNNN","NNNNN"],function(n,e,t,i){var s=t._locale.erasParse(n,i,t._strict);s?et(t).era=s:et(t).invalidEra=n});Te("y",Nd);Te("yy",Nd);Te("yyy",Nd);Te("yyyy",Nd);Te("yo",rie);Ft(["y","yy","yyy","yyyy"],Si);Ft(["yo"],function(n,e,t,i){var s;t._locale._eraYearOrdinalRegex&&(s=n.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[Si]=t._locale.eraYearOrdinalParse(n,s):e[Si]=parseInt(n,10)});function Yne(n,e){var t,i,s,r=this._eras||pa("en")._eras;for(t=0,i=r.length;t<i;++t)switch(typeof r[t].since==="string"&&(s=ye(r[t].since).startOf("day"),r[t].since=s.valueOf()),typeof r[t].until){case"undefined":r[t].until=1/0;break;case"string":s=ye(r[t].until).startOf("day").valueOf(),r[t].until=s.valueOf();break}return r}function Kne(n,e,t){var i,s,r=this.eras(),o,a,c;for(n=n.toUpperCase(),i=0,s=r.length;i<s;++i)if(o=r[i].name.toUpperCase(),a=r[i].abbr.toUpperCase(),c=r[i].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(a===n)return r[i];break;case"NNNN":if(o===n)return r[i];break;case"NNNNN":if(c===n)return r[i];break}else if([o,a,c].indexOf(n)>=0)return r[i]}function qne(n,e){var t=n.since<=n.until?1:-1;return e===void 0?ye(n.since).year():ye(n.since).year()+(e-n.offset)*t}function Qne(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].name;return""}function Zne(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].narrow;return""}function Jne(){var n,e,t,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(t=this.clone().startOf("day").valueOf(),i[n].since<=t&&t<=i[n].until||i[n].until<=t&&t<=i[n].since)return i[n].abbr;return""}function Xne(){var n,e,t,i,s=this.localeData().eras();for(n=0,e=s.length;n<e;++n)if(t=s[n].since<=s[n].until?1:-1,i=this.clone().startOf("day").valueOf(),s[n].since<=i&&i<=s[n].until||s[n].until<=i&&i<=s[n].since)return(this.year()-ye(s[n].since).year())*t+s[n].offset;return this.year()}function eie(n){return _t(this,"_erasNameRegex")||zk.call(this),n?this._erasNameRegex:this._erasRegex}function tie(n){return _t(this,"_erasAbbrRegex")||zk.call(this),n?this._erasAbbrRegex:this._erasRegex}function nie(n){return _t(this,"_erasNarrowRegex")||zk.call(this),n?this._erasNarrowRegex:this._erasRegex}function Fk(n,e){return e.erasAbbrRegex(n)}function iie(n,e){return e.erasNameRegex(n)}function sie(n,e){return e.erasNarrowRegex(n)}function rie(n,e){return e._eraYearOrdinalRegex||Nd}function zk(){var n=[],e=[],t=[],i=[],s,r,o,a,c,d=this.eras();for(s=0,r=d.length;s<r;++s)o=Jo(d[s].name),a=Jo(d[s].abbr),c=Jo(d[s].narrow),e.push(o),n.push(a),t.push(c),i.push(o),i.push(a),i.push(c);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}ze(0,["gg",2],0,function(){return this.weekYear()%100});ze(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Sv(n,e){ze(0,[n,n.length],0,e)}Sv("gggg","weekYear");Sv("ggggg","weekYear");Sv("GGGG","isoWeekYear");Sv("GGGGG","isoWeekYear");Te("G",_v);Te("g",_v);Te("GG",Qt,Ds);Te("gg",Qt,Ds);Te("GGGG",Sk,Ek);Te("gggg",Sk,Ek);Te("GGGGG",Av,vv);Te("ggggg",Av,vv);Pm(["gggg","ggggg","GGGG","GGGGG"],function(n,e,t,i){e[i.substr(0,2)]=dt(n)});Pm(["gg","GG"],function(n,e,t,i){e[i]=ye.parseTwoDigitYear(n)});function oie(n){return eL.call(this,n,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function aie(n){return eL.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)}function lie(){return Xo(this.year(),1,4)}function cie(){return Xo(this.isoWeekYear(),1,4)}function uie(){var n=this.localeData()._week;return Xo(this.year(),n.dow,n.doy)}function die(){var n=this.localeData()._week;return Xo(this.weekYear(),n.dow,n.doy)}function eL(n,e,t,i,s){var r;return n==null?Uh(this,i,s).year:(r=Xo(n,i,s),e>r&&(e=r),fie.call(this,n,e,t,i,s))}function fie(n,e,t,i,s){var r=DV(n,e,t,i,s),o=jh(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}ze("Q",0,"Qo","quarter");Te("Q",_V);Ft("Q",function(n,e){e[Yo]=(dt(n)-1)*3});function hie(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}ze("D",["DD",2],"Do","date");Te("D",Qt,Vd);Te("DD",Qt,Ds);Te("Do",function(n,e){return n?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Ft(["D","DD"],$r);Ft("Do",function(n,e){e[$r]=dt(n.match(Qt)[0])});var tL=Ld("Date",!0);ze("DDD",["DDDD",3],"DDDo","dayOfYear");Te("DDD",yv);Te("DDDD",CV);Ft(["DDD","DDDD"],function(n,e,t){t._dayOfYear=dt(n)});function mie(n){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?e:this.add(n-e,"d")}ze("m",["mm",2],0,"minute");Te("m",Qt,Tk);Te("mm",Qt,Ds);Ft(["m","mm"],br);var gie=Ld("Minutes",!1);ze("s",["ss",2],0,"second");Te("s",Qt,Tk);Te("ss",Qt,Ds);Ft(["s","ss"],Ko);var pie=Ld("Seconds",!1);ze("S",0,0,function(){return~~(this.millisecond()/100)});ze(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ze(0,["SSS",3],0,"millisecond");ze(0,["SSSS",4],0,function(){return this.millisecond()*10});ze(0,["SSSSS",5],0,function(){return this.millisecond()*100});ze(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ze(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ze(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ze(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Te("S",yv,_V);Te("SS",yv,Ds);Te("SSS",yv,CV);var Xa,nL;for(Xa="SSSS";Xa.length<=9;Xa+="S")Te(Xa,Nd);function bie(n,e){e[Jl]=dt(("0."+n)*1e3)}for(Xa="S";Xa.length<=9;Xa+="S")Ft(Xa,bie);nL=Ld("Milliseconds",!1);ze("z",0,0,"zoneAbbr");ze("zz",0,0,"zoneName");function wie(){return this._isUTC?"UTC":""}function vie(){return this._isUTC?"Coordinated Universal Time":""}var pe=Im.prototype;pe.add=dne;pe.calendar=wne;pe.clone=vne;pe.diff=Ene;pe.endOf=Nne;pe.format=Rne;pe.from=Pne;pe.fromNow=One;pe.to=Dne;pe.toNow=Mne;pe.get=Iee;pe.invalidAt=$ne;pe.isAfter=yne;pe.isBefore=Ane;pe.isBetween=_ne;pe.isSame=Cne;pe.isSameOrAfter=xne;pe.isSameOrBefore=kne;pe.isValid=Hne;pe.lang=qV;pe.locale=KV;pe.localeData=QV;pe.max=Hte;pe.min=Ute;pe.parsingFlags=Wne;pe.set=Ree;pe.startOf=Bne;pe.subtract=fne;pe.toArray=zne;pe.toObject=jne;pe.toDate=Fne;pe.toISOString=Tne;pe.inspect=Ine;typeof Symbol<"u"&&Symbol.for!=null&&(pe[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});pe.toJSON=Une;pe.toString=Sne;pe.unix=Lne;pe.valueOf=Vne;pe.creationData=Gne;pe.eraName=Qne;pe.eraNarrow=Zne;pe.eraAbbr=Jne;pe.eraYear=Xne;pe.year=EV;pe.isLeapYear=Tee;pe.weekYear=oie;pe.isoWeekYear=aie;pe.quarter=pe.quarters=hie;pe.month=PV;pe.daysInMonth=Fee;pe.week=pe.weeks=Yee;pe.isoWeek=pe.isoWeeks=Kee;pe.weeksInYear=uie;pe.weeksInWeekYear=die;pe.isoWeeksInYear=lie;pe.isoWeeksInISOWeekYear=cie;pe.date=tL;pe.day=pe.days=ate;pe.weekday=lte;pe.isoWeekday=cte;pe.dayOfYear=mie;pe.hour=pe.hours=pte;pe.minute=pe.minutes=gie;pe.second=pe.seconds=pie;pe.millisecond=pe.milliseconds=nL;pe.utcOffset=Jte;pe.utc=ene;pe.local=tne;pe.parseZone=nne;pe.hasAlignedHourOffset=ine;pe.isDST=sne;pe.isLocal=one;pe.isUtcOffset=ane;pe.isUtc=WV;pe.isUTC=WV;pe.zoneAbbr=wie;pe.zoneName=vie;pe.dates=er("dates accessor is deprecated. Use date instead.",tL);pe.months=er("months accessor is deprecated. Use month instead",PV);pe.years=er("years accessor is deprecated. Use year instead",EV);pe.zone=er("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Xte);pe.isDSTShifted=er("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",rne);function yie(n){return Kt(n*1e3)}function Aie(){return Kt.apply(null,arguments).parseZone()}function iL(n){return n}var Ct=Ck.prototype;Ct.calendar=oee;Ct.longDateFormat=uee;Ct.invalidDate=fee;Ct.ordinal=gee;Ct.preparse=iL;Ct.postformat=iL;Ct.relativeTime=bee;Ct.pastFuture=wee;Ct.set=see;Ct.eras=Yne;Ct.erasParse=Kne;Ct.erasConvertYear=qne;Ct.erasAbbrRegex=tie;Ct.erasNameRegex=eie;Ct.erasNarrowRegex=nie;Ct.months=Bee;Ct.monthsShort=Nee;Ct.monthsParse=Lee;Ct.monthsRegex=jee;Ct.monthsShortRegex=zee;Ct.week=Hee;Ct.firstDayOfYear=Gee;Ct.firstDayOfWeek=$ee;Ct.weekdays=nte;Ct.weekdaysMin=ste;Ct.weekdaysShort=ite;Ct.weekdaysParse=ote;Ct.weekdaysRegex=ute;Ct.weekdaysShortRegex=dte;Ct.weekdaysMinRegex=fte;Ct.isPM=mte;Ct.meridiem=bte;function nw(n,e,t,i){var s=pa(),r=co().set(i,e);return s[t](r,n)}function sL(n,e,t){if(la(n)&&(e=n,n=void 0),n=n||"",e!=null)return nw(n,e,t,"month");var i,s=[];for(i=0;i<12;i++)s[i]=nw(n,i,t,"month");return s}function jk(n,e,t,i){typeof n=="boolean"?(la(e)&&(t=e,e=void 0),e=e||""):(e=n,t=e,n=!1,la(e)&&(t=e,e=void 0),e=e||"");var s=pa(),r=n?s._week.dow:0,o,a=[];if(t!=null)return nw(e,(t+r)%7,i,"day");for(o=0;o<7;o++)a[o]=nw(e,(o+r)%7,i,"day");return a}function _ie(n,e){return sL(n,e,"months")}function Cie(n,e){return sL(n,e,"monthsShort")}function xie(n,e,t){return jk(n,e,t,"weekdays")}function kie(n,e,t){return jk(n,e,t,"weekdaysShort")}function Eie(n,e,t){return jk(n,e,t,"weekdaysMin")}tl("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var e=n%10,t=dt(n%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return n+t}});ye.lang=er("moment.lang is deprecated. Use moment.locale instead.",tl);ye.langData=er("moment.langData is deprecated. Use moment.localeData instead.",pa);var No=Math.abs;function Sie(){var n=this._data;return this._milliseconds=No(this._milliseconds),this._days=No(this._days),this._months=No(this._months),n.milliseconds=No(n.milliseconds),n.seconds=No(n.seconds),n.minutes=No(n.minutes),n.hours=No(n.hours),n.months=No(n.months),n.years=No(n.years),this}function rL(n,e,t,i){var s=Or(e,t);return n._milliseconds+=i*s._milliseconds,n._days+=i*s._days,n._months+=i*s._months,n._bubble()}function Tie(n,e){return rL(this,n,e,1)}function Iie(n,e){return rL(this,n,e,-1)}function q5(n){return n<0?Math.floor(n):Math.ceil(n)}function Rie(){var n=this._milliseconds,e=this._days,t=this._months,i=this._data,s,r,o,a,c;return n>=0&&e>=0&&t>=0||n<=0&&e<=0&&t<=0||(n+=q5(eC(t)+e)*864e5,e=0,t=0),i.milliseconds=n%1e3,s=Gs(n/1e3),i.seconds=s%60,r=Gs(s/60),i.minutes=r%60,o=Gs(r/60),i.hours=o%24,e+=Gs(o/24),c=Gs(oL(e)),t+=c,e-=q5(eC(c)),a=Gs(t/12),t%=12,i.days=e,i.months=t,i.years=a,this}function oL(n){return n*4800/146097}function eC(n){return n*146097/4800}function Pie(n){if(!this.isValid())return NaN;var e,t,i=this._milliseconds;if(n=tr(n),n==="month"||n==="quarter"||n==="year")switch(e=this._days+i/864e5,t=this._months+oL(e),n){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(eC(this._months)),n){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+n)}}function ba(n){return function(){return this.as(n)}}var aL=ba("ms"),Oie=ba("s"),Die=ba("m"),Mie=ba("h"),Bie=ba("d"),Nie=ba("w"),Vie=ba("M"),Lie=ba("Q"),Fie=ba("y"),zie=aL;function jie(){return Or(this)}function Uie(n){return n=tr(n),this.isValid()?this[n+"s"]():NaN}function Ac(n){return function(){return this.isValid()?this._data[n]:NaN}}var Hie=Ac("milliseconds"),Wie=Ac("seconds"),$ie=Ac("minutes"),Gie=Ac("hours"),Yie=Ac("days"),Kie=Ac("months"),qie=Ac("years");function Qie(){return Gs(this.days()/7)}var jo=Math.round,Yu={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Zie(n,e,t,i,s){return s.relativeTime(e||1,!!t,n,i)}function Jie(n,e,t,i){var s=Or(n).abs(),r=jo(s.as("s")),o=jo(s.as("m")),a=jo(s.as("h")),c=jo(s.as("d")),d=jo(s.as("M")),h=jo(s.as("w")),m=jo(s.as("y")),p=r<=t.ss&&["s",r]||r<t.s&&["ss",r]||o<=1&&["m"]||o<t.m&&["mm",o]||a<=1&&["h"]||a<t.h&&["hh",a]||c<=1&&["d"]||c<t.d&&["dd",c];return t.w!=null&&(p=p||h<=1&&["w"]||h<t.w&&["ww",h]),p=p||d<=1&&["M"]||d<t.M&&["MM",d]||m<=1&&["y"]||["yy",m],p[2]=e,p[3]=+n>0,p[4]=i,Zie.apply(null,p)}function Xie(n){return n===void 0?jo:typeof n=="function"?(jo=n,!0):!1}function ese(n,e){return Yu[n]===void 0?!1:e===void 0?Yu[n]:(Yu[n]=e,n==="s"&&(Yu.ss=e-1),!0)}function tse(n,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,i=Yu,s,r;return typeof n=="object"&&(e=n,n=!1),typeof n=="boolean"&&(t=n),typeof e=="object"&&(i=Object.assign({},Yu,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),s=this.localeData(),r=Jie(this,!t,i,s),t&&(r=s.pastFuture(+this,r)),s.postformat(r)}var h_=Math.abs;function ku(n){return(n>0)-(n<0)||+n}function Tv(){if(!this.isValid())return this.localeData().invalidDate();var n=h_(this._milliseconds)/1e3,e=h_(this._days),t=h_(this._months),i,s,r,o,a=this.asSeconds(),c,d,h,m;return a?(i=Gs(n/60),s=Gs(i/60),n%=60,i%=60,r=Gs(t/12),t%=12,o=n?n.toFixed(3).replace(/\.?0+$/,""):"",c=a<0?"-":"",d=ku(this._months)!==ku(a)?"-":"",h=ku(this._days)!==ku(a)?"-":"",m=ku(this._milliseconds)!==ku(a)?"-":"",c+"P"+(r?d+r+"Y":"")+(t?d+t+"M":"")+(e?h+e+"D":"")+(s||i||n?"T":"")+(s?m+s+"H":"")+(i?m+i+"M":"")+(n?m+o+"S":"")):"P0D"}var gt=Ev.prototype;gt.isValid=Kte;gt.abs=Sie;gt.add=Tie;gt.subtract=Iie;gt.as=Pie;gt.asMilliseconds=aL;gt.asSeconds=Oie;gt.asMinutes=Die;gt.asHours=Mie;gt.asDays=Bie;gt.asWeeks=Nie;gt.asMonths=Vie;gt.asQuarters=Lie;gt.asYears=Fie;gt.valueOf=zie;gt._bubble=Rie;gt.clone=jie;gt.get=Uie;gt.milliseconds=Hie;gt.seconds=Wie;gt.minutes=$ie;gt.hours=Gie;gt.days=Yie;gt.weeks=Qie;gt.months=Kie;gt.years=qie;gt.humanize=tse;gt.toISOString=Tv;gt.toString=Tv;gt.toJSON=Tv;gt.locale=KV;gt.localeData=QV;gt.toIsoString=er("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Tv);gt.lang=qV;ze("X",0,0,"unix");ze("x",0,0,"valueOf");Te("x",_v);Te("X",_ee);Ft("X",function(n,e,t){t._d=new Date(parseFloat(n)*1e3)});Ft("x",function(n,e,t){t._d=new Date(dt(n))});ye.version="2.30.1";nee(Kt);ye.fn=pe;ye.min=Wte;ye.max=$te;ye.now=Gte;ye.utc=co;ye.unix=yie;ye.months=_ie;ye.isDate=Tm;ye.locale=tl;ye.invalid=wv;ye.duration=Or;ye.isMoment=Er;ye.weekdays=xie;ye.parseZone=Aie;ye.localeData=pa;ye.isDuration=pb;ye.monthsShort=Cie;ye.weekdaysMin=Eie;ye.defineLocale=Dk;ye.updateLocale=Ate;ye.locales=_te;ye.weekdaysShort=kie;ye.normalizeUnits=tr;ye.relativeTimeRounding=Xie;ye.relativeTimeThreshold=ese;ye.calendarFormat=bne;ye.prototype=pe;ye.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Uk=({props:n})=>v.jsx(_n,{to:ok(n.category.slug,n.slug),children:v.jsx(Xs,{className:"pt-5 transition-shadow hover:shadow-md",children:v.jsxs(lo,{children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex justify-between items-center gap-2",children:[v.jsx(lc,{children:v.jsx(wk,{src:n.author.avatar||Lh,alt:n.author.name})}),v.jsx("span",{className:"font-medium",children:n.author.name})]}),n.author.role==="admin"&&v.jsx(tee,{variant:"outline",className:"bg-violet-500 text-white border-none",children:"Admin"})]}),v.jsx("div",{className:"my-4",children:v.jsx("img",{src:n.featured_image,className:"rounded w-full h-48 object-cover",alt:n.title})}),v.jsxs("div",{children:[v.jsxs("p",{className:"flex items-center gap-2 mb-2 text-gray-500 text-sm",children:[v.jsx(MX,{}),v.jsx("span",{children:ye(n.createdAt).format("DD-MM-YYYY")})]}),v.jsx("h2",{className:"text-2xl font-bold line-clamp-2 hover:text-violet-600 transition-colors",children:n.title})]})]})})}),nse="/assets/loading-hiQI1AdZ.svg",fo=()=>v.jsx("div",{className:"w-screen h-screen fixed top-0 left-0 z-50 flex justify-center items-center bg-white/80 backdrop-blur-sm",children:v.jsx("img",{src:nse,width:100,alt:"Loading..."})}),ise=()=>{const{data:n,loading:e}=vi(`${Et("VITE_API_BASE_URL")}/blog/blogs`,{method:"get",credentials:"include"});return e?v.jsx(fo,{}):v.jsx("div",{className:"grid md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-10",children:n&&n.blog.length>0?n.blog.map(t=>v.jsx(Uk,{props:t},t._id)):v.jsxs("div",{className:"col-span-full text-center py-20 text-gray-500",children:[v.jsx("p",{className:"text-xl font-semibold",children:"No blogs found."}),v.jsx("p",{children:"Check back later for new content!"})]})})};var Om=n=>n.type==="checkbox",Xl=n=>n instanceof Date,ts=n=>n==null;const lL=n=>typeof n=="object";var Un=n=>!ts(n)&&!Array.isArray(n)&&lL(n)&&!Xl(n),cL=n=>Un(n)&&n.target?Om(n.target)?n.target.checked:n.target.value:n,sse=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,uL=(n,e)=>n.has(sse(e)),rse=n=>{const e=n.constructor&&n.constructor.prototype;return Un(e)&&e.hasOwnProperty("isPrototypeOf")},Hk=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ln(n){if(n instanceof Date)return new Date(n);const e=typeof FileList<"u"&&n instanceof FileList;if(Hk&&(n instanceof Blob||e))return n;const t=Array.isArray(n);if(!t&&!(Un(n)&&rse(n)))return n;const i=t?[]:Object.create(Object.getPrototypeOf(n));for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=Ln(n[s]));return i}var Iv=n=>/^\w*$/.test(n),en=n=>n===void 0,Wk=n=>Array.isArray(n)?n.filter(Boolean):[],$k=n=>Wk(n.replace(/["|']|\]/g,"").split(/\.|\[/)),Ce=(n,e,t)=>{if(!e||!Un(n))return t;const i=(Iv(e)?[e]:$k(e)).reduce((s,r)=>ts(s)?s:s[r],n);return en(i)||i===n?en(n[e])?t:n[e]:i},ys=n=>typeof n=="boolean",Mi=n=>typeof n=="function",Rt=(n,e,t)=>{let i=-1;const s=Iv(e)?[e]:$k(e),r=s.length,o=r-1;for(;++i<r;){const a=s[i];let c=t;if(i!==o){const d=n[a];c=Un(d)||Array.isArray(d)?d:isNaN(+s[i+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;n[a]=c,n=n[a]}};const iw={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},mr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Vo={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Gk=Ee.createContext(null);Gk.displayName="HookFormControlContext";const Yk=()=>Ee.useContext(Gk);var dL=(n,e,t,i=!0)=>{const s={defaultValues:e._defaultValues};for(const r in n)Object.defineProperty(s,r,{get:()=>{const o=r;return e._proxyFormState[o]!==mr.all&&(e._proxyFormState[o]=!i||mr.all),t&&(t[o]=!0),n[o]}});return s};const Kk=typeof window<"u"?Ee.useLayoutEffect:Ee.useEffect;function fL(n){const e=Yk(),{control:t=e,disabled:i,name:s,exact:r}=n||{},[o,a]=Ee.useState(t._formState),c=Ee.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Kk(()=>t._subscribe({name:s,formState:c.current,exact:r,callback:d=>{!i&&a({...t._formState,...d})}}),[s,i,r]),Ee.useEffect(()=>{c.current.isValid&&t._setValid(!0)},[t]),Ee.useMemo(()=>dL(o,t,c.current,!1),[o,t])}var _s=n=>typeof n=="string",tC=(n,e,t,i,s)=>_s(n)?(i&&e.watch.add(n),Ce(t,n,s)):Array.isArray(n)?n.map(r=>(i&&e.watch.add(r),Ce(t,r))):(i&&(e.watchAll=!0),t),nC=n=>ts(n)||!lL(n);function gr(n,e,t=new WeakSet){if(nC(n)||nC(e))return Object.is(n,e);if(Xl(n)&&Xl(e))return Object.is(n.getTime(),e.getTime());const i=Object.keys(n),s=Object.keys(e);if(i.length!==s.length)return!1;if(t.has(n)||t.has(e))return!0;t.add(n),t.add(e);for(const r of i){const o=n[r];if(!s.includes(r))return!1;if(r!=="ref"){const a=e[r];if(Xl(o)&&Xl(a)||Un(o)&&Un(a)||Array.isArray(o)&&Array.isArray(a)?!gr(o,a,t):!Object.is(o,a))return!1}}return!0}function ose(n){const e=Yk(),{control:t=e,name:i,defaultValue:s,disabled:r,exact:o,compute:a}=n||{},c=Ee.useRef(s),d=Ee.useRef(a),h=Ee.useRef(void 0),m=Ee.useRef(t),p=Ee.useRef(i);d.current=a;const[w,A]=Ee.useState(()=>{const R=t._getWatch(i,c.current);return d.current?d.current(R):R}),C=Ee.useCallback(R=>{const O=tC(i,t._names,R||t._formValues,!1,c.current);return d.current?d.current(O):O},[t._formValues,t._names,i]),k=Ee.useCallback(R=>{if(!r){const O=tC(i,t._names,R||t._formValues,!1,c.current);if(d.current){const U=d.current(O);gr(U,h.current)||(A(U),h.current=U)}else A(O)}},[t._formValues,t._names,r,i]);Kk(()=>((m.current!==t||!gr(p.current,i))&&(m.current=t,p.current=i,k()),t._subscribe({name:i,formState:{values:!0},exact:o,callback:R=>{k(R.values)}})),[t,o,i,k]),Ee.useEffect(()=>t._removeUnmounted());const E=m.current!==t,S=p.current,I=Ee.useMemo(()=>{if(r)return null;const R=!E&&!gr(S,i);return E||R?C():null},[r,E,i,S,C]);return I!==null?I:w}function ase(n){const e=Yk(),{name:t,disabled:i,control:s=e,shouldUnregister:r,defaultValue:o,exact:a=!0}=n,c=uL(s._names.array,t),d=Ee.useMemo(()=>Ce(s._formValues,t,Ce(s._defaultValues,t,o)),[s,t,o]),h=ose({control:s,name:t,defaultValue:d,exact:a}),m=fL({control:s,name:t,exact:a}),p=Ee.useRef(n),w=Ee.useRef(void 0),A=Ee.useRef(s.register(t,{...n.rules,value:h,...ys(n.disabled)?{disabled:n.disabled}:{}}));p.current=n;const C=Ee.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ce(m.errors,t)},isDirty:{enumerable:!0,get:()=>!!Ce(m.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!Ce(m.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!Ce(m.validatingFields,t)},error:{enumerable:!0,get:()=>Ce(m.errors,t)}}),[m,t]),k=Ee.useCallback(R=>A.current.onChange({target:{value:cL(R),name:t},type:iw.CHANGE}),[t]),E=Ee.useCallback(()=>A.current.onBlur({target:{value:Ce(s._formValues,t),name:t},type:iw.BLUR}),[t,s._formValues]),S=Ee.useCallback(R=>{const O=Ce(s._fields,t);O&&O._f&&R&&(O._f.ref={focus:()=>Mi(R.focus)&&R.focus(),select:()=>Mi(R.select)&&R.select(),setCustomValidity:U=>Mi(R.setCustomValidity)&&R.setCustomValidity(U),reportValidity:()=>Mi(R.reportValidity)&&R.reportValidity()})},[s._fields,t]),I=Ee.useMemo(()=>({name:t,value:h,...ys(i)||m.disabled?{disabled:m.disabled||i}:{},onChange:k,onBlur:E,ref:S}),[t,i,m.disabled,k,E,S,h]);return Ee.useEffect(()=>{const R=s._options.shouldUnregister||r,O=w.current;O&&O!==t&&!c&&s.unregister(O),s.register(t,{...p.current.rules,...ys(p.current.disabled)?{disabled:p.current.disabled}:{}});const U=(P,V)=>{const H=Ce(s._fields,P);H&&H._f&&(H._f.mount=V)};if(U(t,!0),R){const P=Ln(Ce(s._options.defaultValues,t,p.current.defaultValue));Rt(s._defaultValues,t,P),en(Ce(s._formValues,t))&&Rt(s._formValues,t,P)}return!c&&s.register(t),w.current=t,()=>{(c?R&&!s._state.action:R)?s.unregister(t):U(t,!1)}},[t,s,c,r]),Ee.useEffect(()=>{s._setDisabledField({disabled:i,name:t})},[i,t,s]),Ee.useMemo(()=>({field:I,formState:m,fieldState:C}),[I,m,C])}const lse=n=>n.render(ase(n)),qk=Ee.createContext(null);qk.displayName="HookFormContext";const cse=()=>Ee.useContext(qk),use=n=>{const{children:e,watch:t,getValues:i,getFieldState:s,setError:r,clearErrors:o,setValue:a,trigger:c,formState:d,resetField:h,reset:m,handleSubmit:p,unregister:w,control:A,register:C,setFocus:k,subscribe:E}=n;return Ee.createElement(qk.Provider,{value:Ee.useMemo(()=>({watch:t,getValues:i,getFieldState:s,setError:r,clearErrors:o,setValue:a,trigger:c,formState:d,resetField:h,reset:m,handleSubmit:p,unregister:w,control:A,register:C,setFocus:k,subscribe:E}),[o,A,d,s,i,p,C,m,h,r,k,a,E,c,w,t])},Ee.createElement(Gk.Provider,{value:A},e))};var Qk=(n,e,t,i,s)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[i]:s||!0}}:{},mh=n=>Array.isArray(n)?n:[n],Q5=()=>{let n=[];return{get observers(){return n},next:s=>{for(const r of n)r.next&&r.next(s)},subscribe:s=>(n.push(s),{unsubscribe:()=>{n=n.filter(r=>r!==s)}}),unsubscribe:()=>{n=[]}}};function hL(n,e){const t={};for(const i in n)if(n.hasOwnProperty(i)){const s=n[i],r=e[i];if(s&&Un(s)&&r){const o=hL(s,r);Un(o)&&(t[i]=o)}else n[i]&&(t[i]=r)}return t}var Pi=n=>Un(n)&&!Object.keys(n).length,Zk=n=>n.type==="file",sw=n=>{if(!Hk)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},mL=n=>n.type==="select-multiple",Jk=n=>n.type==="radio",dse=n=>Jk(n)||Om(n),m_=n=>sw(n)&&n.isConnected;function fse(n,e){const t=e.slice(0,-1).length;let i=0;for(;i<t;)n=en(n)?i++:n[e[i++]];return n}function hse(n){for(const e in n)if(n.hasOwnProperty(e)&&!en(n[e]))return!1;return!0}function Fn(n,e){const t=Array.isArray(e)?e:Iv(e)?[e]:$k(e),i=t.length===1?n:fse(n,t),s=t.length-1,r=t[s];return i&&delete i[r],s!==0&&(Un(i)&&Pi(i)||Array.isArray(i)&&hse(i))&&Fn(n,t.slice(0,-1)),n}var mse=n=>{for(const e in n)if(Mi(n[e]))return!0;return!1};function gL(n){return Array.isArray(n)||Un(n)&&!mse(n)}function iC(n,e={}){for(const t in n){const i=n[t];gL(i)?(e[t]=Array.isArray(i)?[]:{},iC(i,e[t])):en(i)||(e[t]=!0)}return e}function zu(n,e,t){t||(t=iC(e));for(const i in n){const s=n[i];if(gL(s))en(e)||nC(t[i])?t[i]=iC(s,Array.isArray(s)?[]:{}):zu(s,ts(e)?{}:e[i],t[i]);else{const r=e[i];t[i]=!gr(s,r)}}return t}const Z5={value:!1,isValid:!1},J5={value:!0,isValid:!0};var pL=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!en(n[0].attributes.value)?en(n[0].value)||n[0].value===""?J5:{value:n[0].value,isValid:!0}:J5:Z5}return Z5},bL=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:i})=>en(n)?n:e?n===""?NaN:n&&+n:t&&_s(n)?new Date(n):i?i(n):n;const X5={isValid:!1,value:null};var wL=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,X5):X5;function eP(n){const e=n.ref;return Zk(e)?e.files:Jk(e)?wL(n.refs).value:mL(e)?[...e.selectedOptions].map(({value:t})=>t):Om(e)?pL(n.refs).value:bL(en(e.value)?n.ref.value:e.value,n)}var gse=(n,e,t,i)=>{const s={};for(const r of n){const o=Ce(e,r);o&&Rt(s,r,o._f)}return{criteriaMode:t,names:[...n],fields:s,shouldUseNativeValidation:i}},rw=n=>n instanceof RegExp,Hf=n=>en(n)?n:rw(n)?n.source:Un(n)?rw(n.value)?n.value.source:n.value:n,tP=n=>({isOnSubmit:!n||n===mr.onSubmit,isOnBlur:n===mr.onBlur,isOnChange:n===mr.onChange,isOnAll:n===mr.all,isOnTouch:n===mr.onTouched});const nP="AsyncFunction";var pse=n=>!!n&&!!n.validate&&!!(Mi(n.validate)&&n.validate.constructor.name===nP||Un(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===nP)),bse=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),iP=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(i=>n.startsWith(i)&&/^\.\w+/.test(n.slice(i.length))));const gh=(n,e,t,i)=>{for(const s of t||Object.keys(n)){const r=Ce(n,s);if(r){const{_f:o,...a}=r;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!i)return!0;if(o.ref&&e(o.ref,o.name)&&!i)return!0;if(gh(a,e))break}else if(Un(a)&&gh(a,e))break}}};function sP(n,e,t){const i=Ce(n,t);if(i||Iv(t))return{error:i,name:t};const s=t.split(".");for(;s.length;){const r=s.join("."),o=Ce(e,r),a=Ce(n,r);if(o&&!Array.isArray(o)&&t!==r)return{name:t};if(a&&a.type)return{name:r,error:a};if(a&&a.root&&a.root.type)return{name:`${r}.root`,error:a.root};s.pop()}return{name:t}}var wse=(n,e,t,i)=>{t(n);const{name:s,...r}=n;return Pi(r)||Object.keys(r).length>=Object.keys(e).length||Object.keys(r).find(o=>e[o]===(!i||mr.all))},vse=(n,e,t)=>!n||!e||n===e||mh(n).some(i=>i&&(t?i===e:i.startsWith(e)||e.startsWith(i))),yse=(n,e,t,i,s)=>s.isOnAll?!1:!t&&s.isOnTouch?!(e||n):(t?i.isOnBlur:s.isOnBlur)?!n:(t?i.isOnChange:s.isOnChange)?n:!0,Ase=(n,e)=>!Wk(Ce(n,e)).length&&Fn(n,e),_se=(n,e,t)=>{const i=mh(Ce(n,t));return Rt(i,"root",e[t]),Rt(n,t,i),n};function rP(n,e,t="validate"){if(_s(n)||Array.isArray(n)&&n.every(_s)||ys(n)&&!n)return{type:t,message:_s(n)?n:"",ref:e}}var Eu=n=>Un(n)&&!rw(n)?n:{value:n,message:""},oP=async(n,e,t,i,s,r)=>{const{ref:o,refs:a,required:c,maxLength:d,minLength:h,min:m,max:p,pattern:w,validate:A,name:C,valueAsNumber:k,mount:E}=n._f,S=Ce(t,C);if(!E||e.has(C))return{};const I=a?a[0]:o,R=de=>{s&&I.reportValidity&&(I.setCustomValidity(ys(de)?"":de||""),I.reportValidity())},O={},U=Jk(o),P=Om(o),V=U||P,H=(k||Zk(o))&&en(o.value)&&en(S)||sw(o)&&o.value===""||S===""||Array.isArray(S)&&!S.length,ie=Qk.bind(null,C,i,O),ke=(de,ve,be,Ae=Vo.maxLength,F=Vo.minLength)=>{const X=de?ve:be;O[C]={type:de?Ae:F,message:X,ref:o,...ie(de?Ae:F,X)}};if(r?!Array.isArray(S)||!S.length:c&&(!V&&(H||ts(S))||ys(S)&&!S||P&&!pL(a).isValid||U&&!wL(a).isValid)){const{value:de,message:ve}=_s(c)?{value:!!c,message:c}:Eu(c);if(de&&(O[C]={type:Vo.required,message:ve,ref:I,...ie(Vo.required,ve)},!i))return R(ve),O}if(!H&&(!ts(m)||!ts(p))){let de,ve;const be=Eu(p),Ae=Eu(m);if(!ts(S)&&!isNaN(S)){const F=o.valueAsNumber||S&&+S;ts(be.value)||(de=F>be.value),ts(Ae.value)||(ve=F<Ae.value)}else{const F=o.valueAsDate||new Date(S),X=Ve=>new Date(new Date().toDateString()+" "+Ve),$=o.type=="time",re=o.type=="week";_s(be.value)&&S&&(de=$?X(S)>X(be.value):re?S>be.value:F>new Date(be.value)),_s(Ae.value)&&S&&(ve=$?X(S)<X(Ae.value):re?S<Ae.value:F<new Date(Ae.value))}if((de||ve)&&(ke(!!de,be.message,Ae.message,Vo.max,Vo.min),!i))return R(O[C].message),O}if((d||h)&&!H&&(_s(S)||r&&Array.isArray(S))){const de=Eu(d),ve=Eu(h),be=!ts(de.value)&&S.length>+de.value,Ae=!ts(ve.value)&&S.length<+ve.value;if((be||Ae)&&(ke(be,de.message,ve.message),!i))return R(O[C].message),O}if(w&&!H&&_s(S)){const{value:de,message:ve}=Eu(w);if(rw(de)&&!S.match(de)&&(O[C]={type:Vo.pattern,message:ve,ref:o,...ie(Vo.pattern,ve)},!i))return R(ve),O}if(A){if(Mi(A)){const de=await A(S,t),ve=rP(de,I);if(ve&&(O[C]={...ve,...ie(Vo.validate,ve.message)},!i))return R(ve.message),O}else if(Un(A)){let de={};for(const ve in A){if(!Pi(de)&&!i)break;const be=rP(await A[ve](S,t),I,ve);be&&(de={...be,...ie(ve,be.message)},R(be.message),i&&(O[C]=de))}if(!Pi(de)&&(O[C]={ref:I,...de},!i))return O}}return R(!0),O};const Cse={mode:mr.onSubmit,reValidateMode:mr.onChange,shouldFocusError:!0};function xse(n={}){let e={...Cse,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Mi(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},i={},s=Un(e.defaultValues)||Un(e.values)?Ln(e.defaultValues||e.values)||{}:{},r=e.shouldUnregister?{}:Ln(s),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},m={...h};let p={...m};const w={array:Q5(),state:Q5()},A=e.criteriaMode===mr.all,C=N=>G=>{clearTimeout(d),d=setTimeout(N,G)},k=async N=>{if(!o.keepIsValid&&!e.disabled&&(m.isValid||p.isValid||N)){let G;e.resolver?(G=Pi((await V()).errors),E()):G=await ie(i,!0),G!==t.isValid&&w.state.next({isValid:G})}},E=(N,G)=>{!e.disabled&&(m.isValidating||m.validatingFields||p.isValidating||p.validatingFields)&&((N||Array.from(a.mount)).forEach(te=>{te&&(G?Rt(t.validatingFields,te,G):Fn(t.validatingFields,te))}),w.state.next({validatingFields:t.validatingFields,isValidating:!Pi(t.validatingFields)}))},S=(N,G=[],te,K,ee=!0,ce=!0)=>{if(K&&te&&!e.disabled){if(o.action=!0,ce&&Array.isArray(Ce(i,N))){const _e=te(Ce(i,N),K.argA,K.argB);ee&&Rt(i,N,_e)}if(ce&&Array.isArray(Ce(t.errors,N))){const _e=te(Ce(t.errors,N),K.argA,K.argB);ee&&Rt(t.errors,N,_e),Ase(t.errors,N)}if((m.touchedFields||p.touchedFields)&&ce&&Array.isArray(Ce(t.touchedFields,N))){const _e=te(Ce(t.touchedFields,N),K.argA,K.argB);ee&&Rt(t.touchedFields,N,_e)}(m.dirtyFields||p.dirtyFields)&&(t.dirtyFields=zu(s,r)),w.state.next({name:N,isDirty:de(N,G),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Rt(r,N,G)},I=(N,G)=>{Rt(t.errors,N,G),w.state.next({errors:t.errors})},R=N=>{t.errors=N,w.state.next({errors:t.errors,isValid:!1})},O=(N,G,te,K)=>{const ee=Ce(i,N);if(ee){const ce=Ce(r,N,en(te)?Ce(s,N):te);en(ce)||K&&K.defaultChecked||G?Rt(r,N,G?ce:eP(ee._f)):Ae(N,ce),o.mount&&!o.action&&k()}},U=(N,G,te,K,ee)=>{let ce=!1,_e=!1;const Ge={name:N};if(!e.disabled){if(!te||K){(m.isDirty||p.isDirty)&&(_e=t.isDirty,t.isDirty=Ge.isDirty=de(),ce=_e!==Ge.isDirty);const st=gr(Ce(s,N),G);_e=!!Ce(t.dirtyFields,N),st?Fn(t.dirtyFields,N):Rt(t.dirtyFields,N,!0),Ge.dirtyFields=t.dirtyFields,ce=ce||(m.dirtyFields||p.dirtyFields)&&_e!==!st}if(te){const st=Ce(t.touchedFields,N);st||(Rt(t.touchedFields,N,te),Ge.touchedFields=t.touchedFields,ce=ce||(m.touchedFields||p.touchedFields)&&st!==te)}ce&&ee&&w.state.next(Ge)}return ce?Ge:{}},P=(N,G,te,K)=>{const ee=Ce(t.errors,N),ce=(m.isValid||p.isValid)&&ys(G)&&t.isValid!==G;if(e.delayError&&te?(c=C(()=>I(N,te)),c(e.delayError)):(clearTimeout(d),c=null,te?Rt(t.errors,N,te):Fn(t.errors,N)),(te?!gr(ee,te):ee)||!Pi(K)||ce){const _e={...K,...ce&&ys(G)?{isValid:G}:{},errors:t.errors,name:N};t={...t,..._e},w.state.next(_e)}},V=async N=>(E(N,!0),await e.resolver(r,e.context,gse(N||a.mount,i,e.criteriaMode,e.shouldUseNativeValidation))),H=async N=>{const{errors:G}=await V(N);if(E(N),N)for(const te of N){const K=Ce(G,te);K?Rt(t.errors,te,K):Fn(t.errors,te)}else t.errors=G;return G},ie=async(N,G,te={valid:!0})=>{for(const K in N){const ee=N[K];if(ee){const{_f:ce,..._e}=ee;if(ce){const Ge=a.array.has(ce.name),st=ee._f&&pse(ee._f);st&&m.validatingFields&&E([ce.name],!0);const $t=await oP(ee,a.disabled,r,A,e.shouldUseNativeValidation&&!G,Ge);if(st&&m.validatingFields&&E([ce.name]),$t[ce.name]&&(te.valid=!1,G||n.shouldUseNativeValidation))break;!G&&(Ce($t,ce.name)?Ge?_se(t.errors,$t,ce.name):Rt(t.errors,ce.name,$t[ce.name]):Fn(t.errors,ce.name))}!Pi(_e)&&await ie(_e,G,te)}}return te.valid},ke=()=>{for(const N of a.unMount){const G=Ce(i,N);G&&(G._f.refs?G._f.refs.every(te=>!m_(te)):!m_(G._f.ref))&&Ue(N)}a.unMount=new Set},de=(N,G)=>!e.disabled&&(N&&G&&Rt(r,N,G),!gr(B(),s)),ve=(N,G,te)=>tC(N,a,{...o.mount?r:en(G)?s:_s(N)?{[N]:G}:G},te,G),be=N=>Wk(Ce(o.mount?r:s,N,e.shouldUnregister?Ce(s,N,[]):[])),Ae=(N,G,te={})=>{const K=Ce(i,N);let ee=G;if(K){const ce=K._f;ce&&(!ce.disabled&&Rt(r,N,bL(G,ce)),ee=sw(ce.ref)&&ts(G)?"":G,mL(ce.ref)?[...ce.ref.options].forEach(_e=>_e.selected=ee.includes(_e.value)):ce.refs?Om(ce.ref)?ce.refs.forEach(_e=>{(!_e.defaultChecked||!_e.disabled)&&(Array.isArray(ee)?_e.checked=!!ee.find(Ge=>Ge===_e.value):_e.checked=ee===_e.value||!!ee)}):ce.refs.forEach(_e=>_e.checked=_e.value===ee):Zk(ce.ref)?ce.ref.value="":(ce.ref.value=ee,ce.ref.type||w.state.next({name:N,values:Ln(r)})))}(te.shouldDirty||te.shouldTouch)&&U(N,ee,te.shouldTouch,te.shouldDirty,!0),te.shouldValidate&&Ve(N)},F=(N,G,te)=>{for(const K in G){if(!G.hasOwnProperty(K))return;const ee=G[K],ce=N+"."+K,_e=Ce(i,ce);(a.array.has(N)||Un(ee)||_e&&!_e._f)&&!Xl(ee)?F(ce,ee,te):Ae(ce,ee,te)}},X=(N,G,te={})=>{const K=Ce(i,N),ee=a.array.has(N),ce=Ln(G);Rt(r,N,ce),ee?(w.array.next({name:N,values:Ln(r)}),(m.isDirty||m.dirtyFields||p.isDirty||p.dirtyFields)&&te.shouldDirty&&w.state.next({name:N,dirtyFields:zu(s,r),isDirty:de(N,ce)})):K&&!K._f&&!ts(ce)?F(N,ce,te):Ae(N,ce,te),iP(N,a)?w.state.next({...t,name:N,values:Ln(r)}):w.state.next({name:o.mount?N:void 0,values:Ln(r)})},$=async N=>{o.mount=!0;const G=N.target;let te=G.name,K=!0;const ee=Ce(i,te),ce=st=>{K=Number.isNaN(st)||Xl(st)&&isNaN(st.getTime())||gr(st,Ce(r,te,st))},_e=tP(e.mode),Ge=tP(e.reValidateMode);if(ee){let st,$t;const ds=G.type?eP(ee._f):cL(N),Gi=N.type===iw.BLUR||N.type===iw.FOCUS_OUT,or=!bse(ee._f)&&!e.resolver&&!Ce(t.errors,te)&&!ee._f.deps||yse(Gi,Ce(t.touchedFields,te),t.isSubmitted,Ge,_e),vn=iP(te,a,Gi);Rt(r,te,ds),Gi?(!G||!G.readOnly)&&(ee._f.onBlur&&ee._f.onBlur(N),c&&c(0)):ee._f.onChange&&ee._f.onChange(N);const _i=U(te,ds,Gi),$n=!Pi(_i)||vn;if(!Gi&&w.state.next({name:te,type:N.type,values:Ln(r)}),or)return(m.isValid||p.isValid)&&(e.mode==="onBlur"?Gi&&k():Gi||k()),$n&&w.state.next({name:te,...vn?{}:_i});if(!Gi&&vn&&w.state.next({...t}),e.resolver){const{errors:_a}=await V([te]);if(E([te]),ce(ds),K){const xl=sP(t.errors,i,te),Mc=sP(_a,i,xl.name||te);st=Mc.error,te=Mc.name,$t=Pi(_a)}}else E([te],!0),st=(await oP(ee,a.disabled,r,A,e.shouldUseNativeValidation))[te],E([te]),ce(ds),K&&(st?$t=!1:(m.isValid||p.isValid)&&($t=await ie(i,!0)));K&&(ee._f.deps&&(!Array.isArray(ee._f.deps)||ee._f.deps.length>0)&&Ve(ee._f.deps),P(te,$t,st,_i))}},re=(N,G)=>{if(Ce(t.errors,G)&&N.focus)return N.focus(),1},Ve=async(N,G={})=>{let te,K;const ee=mh(N);if(e.resolver){const ce=await H(en(N)?N:ee);te=Pi(ce),K=N?!ee.some(_e=>Ce(ce,_e)):te}else N?(K=(await Promise.all(ee.map(async ce=>{const _e=Ce(i,ce);return await ie(_e&&_e._f?{[ce]:_e}:_e)}))).every(Boolean),!(!K&&!t.isValid)&&k()):K=te=await ie(i);return w.state.next({...!_s(N)||(m.isValid||p.isValid)&&te!==t.isValid?{}:{name:N},...e.resolver||!N?{isValid:te}:{},errors:t.errors}),G.shouldFocus&&!K&&gh(i,re,N?ee:a.mount),K},B=(N,G)=>{let te={...o.mount?r:s};return G&&(te=hL(G.dirtyFields?t.dirtyFields:t.touchedFields,te)),en(N)?te:_s(N)?Ce(te,N):N.map(K=>Ce(te,K))},J=(N,G)=>({invalid:!!Ce((G||t).errors,N),isDirty:!!Ce((G||t).dirtyFields,N),error:Ce((G||t).errors,N),isValidating:!!Ce(t.validatingFields,N),isTouched:!!Ce((G||t).touchedFields,N)}),fe=N=>{N&&mh(N).forEach(G=>Fn(t.errors,G)),w.state.next({errors:N?t.errors:{}})},he=(N,G,te)=>{const K=(Ce(i,N,{_f:{}})._f||{}).ref,ee=Ce(t.errors,N)||{},{ref:ce,message:_e,type:Ge,...st}=ee;Rt(t.errors,N,{...st,...G,ref:K}),w.state.next({name:N,errors:t.errors,isValid:!1}),te&&te.shouldFocus&&K&&K.focus&&K.focus()},Me=(N,G)=>Mi(N)?w.state.subscribe({next:te=>"values"in te&&N(ve(void 0,G),te)}):ve(N,G,!0),Ie=N=>w.state.subscribe({next:G=>{vse(N.name,G.name,N.exact)&&wse(G,N.formState||m,Aa,N.reRenderRoot)&&N.callback({values:{...r},...t,...G,defaultValues:s})}}).unsubscribe,oe=N=>(o.mount=!0,p={...p,...N.formState},Ie({...N,formState:{...h,...N.formState}})),Ue=(N,G={})=>{for(const te of N?mh(N):a.mount)a.mount.delete(te),a.array.delete(te),G.keepValue||(Fn(i,te),Fn(r,te)),!G.keepError&&Fn(t.errors,te),!G.keepDirty&&Fn(t.dirtyFields,te),!G.keepTouched&&Fn(t.touchedFields,te),!G.keepIsValidating&&Fn(t.validatingFields,te),!e.shouldUnregister&&!G.keepDefaultValue&&Fn(s,te);w.state.next({values:Ln(r)}),w.state.next({...t,...G.keepDirty?{isDirty:de()}:{}}),!G.keepIsValid&&k()},$e=({disabled:N,name:G})=>{if(ys(N)&&o.mount||N||a.disabled.has(G)){const ee=a.disabled.has(G)!==!!N;N?a.disabled.add(G):a.disabled.delete(G),ee&&o.mount&&!o.action&&k()}},qe=(N,G={})=>{let te=Ce(i,N);const K=ys(G.disabled)||ys(e.disabled);return Rt(i,N,{...te||{},_f:{...te&&te._f?te._f:{ref:{name:N}},name:N,mount:!0,...G}}),a.mount.add(N),te?$e({disabled:ys(G.disabled)?G.disabled:e.disabled,name:N}):O(N,!0,G.value),{...K?{disabled:G.disabled||e.disabled}:{},...e.progressive?{required:!!G.required,min:Hf(G.min),max:Hf(G.max),minLength:Hf(G.minLength),maxLength:Hf(G.maxLength),pattern:Hf(G.pattern)}:{},name:N,onChange:$,onBlur:$,ref:ee=>{if(ee){qe(N,G),te=Ce(i,N);const ce=en(ee.value)&&ee.querySelectorAll&&ee.querySelectorAll("input,select,textarea")[0]||ee,_e=dse(ce),Ge=te._f.refs||[];if(_e?Ge.find(st=>st===ce):ce===te._f.ref)return;Rt(i,N,{_f:{...te._f,..._e?{refs:[...Ge.filter(m_),ce,...Array.isArray(Ce(s,N))?[{}]:[]],ref:{type:ce.type,name:N}}:{ref:ce}}}),O(N,!1,void 0,ce)}else te=Ce(i,N,{}),te._f&&(te._f.mount=!1),(e.shouldUnregister||G.shouldUnregister)&&!(uL(a.array,N)&&o.action)&&a.unMount.add(N)}}},Ze=()=>e.shouldFocusError&&gh(i,re,a.mount),it=N=>{ys(N)&&(w.state.next({disabled:N}),gh(i,(G,te)=>{const K=Ce(i,te);K&&(G.disabled=K._f.disabled||N,Array.isArray(K._f.refs)&&K._f.refs.forEach(ee=>{ee.disabled=K._f.disabled||N}))},0,!1))},kn=(N,G)=>async te=>{let K;te&&(te.preventDefault&&te.preventDefault(),te.persist&&te.persist());let ee=Ln(r);if(w.state.next({isSubmitting:!0}),e.resolver){const{errors:ce,values:_e}=await V();E(),t.errors=ce,ee=Ln(_e)}else await ie(i);if(a.disabled.size)for(const ce of a.disabled)Fn(ee,ce);if(Fn(t.errors,"root"),Pi(t.errors)){w.state.next({errors:{}});try{await N(ee,te)}catch(ce){K=ce}}else G&&await G({...t.errors},te),Ze(),setTimeout(Ze);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Pi(t.errors)&&!K,submitCount:t.submitCount+1,errors:t.errors}),K)throw K},On=(N,G={})=>{Ce(i,N)&&(en(G.defaultValue)?X(N,Ln(Ce(s,N))):(X(N,G.defaultValue),Rt(s,N,Ln(G.defaultValue))),G.keepTouched||Fn(t.touchedFields,N),G.keepDirty||(Fn(t.dirtyFields,N),t.isDirty=G.defaultValue?de(N,Ln(Ce(s,N))):de()),G.keepError||(Fn(t.errors,N),m.isValid&&k()),w.state.next({...t}))},cs=(N,G={})=>{const te=N?Ln(N):s,K=Ln(te),ee=Pi(N),ce=ee?s:K;if(G.keepDefaultValues||(s=te),!G.keepValues){if(G.keepDirtyValues){const _e=new Set([...a.mount,...Object.keys(zu(s,r))]);for(const Ge of Array.from(_e)){const st=Ce(t.dirtyFields,Ge),$t=Ce(r,Ge),ds=Ce(ce,Ge);st&&!en($t)?Rt(ce,Ge,$t):!st&&!en(ds)&&X(Ge,ds)}}else{if(Hk&&en(N))for(const _e of a.mount){const Ge=Ce(i,_e);if(Ge&&Ge._f){const st=Array.isArray(Ge._f.refs)?Ge._f.refs[0]:Ge._f.ref;if(sw(st)){const $t=st.closest("form");if($t){$t.reset();break}}}}if(G.keepFieldsRef)for(const _e of a.mount)X(_e,Ce(ce,_e));else i={}}r=e.shouldUnregister?G.keepDefaultValues?Ln(s):{}:Ln(ce),w.array.next({values:{...ce}}),w.state.next({values:{...ce}})}a={mount:G.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!m.isValid||!!G.keepIsValid||!!G.keepDirtyValues||!e.shouldUnregister&&!Pi(ce),o.watch=!!e.shouldUnregister,o.keepIsValid=!!G.keepIsValid,o.action=!1,G.keepErrors||(t.errors={}),w.state.next({submitCount:G.keepSubmitCount?t.submitCount:0,isDirty:ee?!1:G.keepDirty?t.isDirty:!!(G.keepDefaultValues&&!gr(N,s)),isSubmitted:G.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:ee?{}:G.keepDirtyValues?G.keepDefaultValues&&r?zu(s,r):t.dirtyFields:G.keepDefaultValues&&N?zu(s,N):G.keepDirty?t.dirtyFields:{},touchedFields:G.keepTouched?t.touchedFields:{},errors:G.keepErrors?t.errors:{},isSubmitSuccessful:G.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},us=(N,G)=>cs(Mi(N)?N(r):N,{...e.resetOptions,...G}),$i=(N,G={})=>{const te=Ce(i,N),K=te&&te._f;if(K){const ee=K.refs?K.refs[0]:K.ref;ee.focus&&setTimeout(()=>{ee.focus(),G.shouldSelect&&Mi(ee.select)&&ee.select()})}},Aa=N=>{t={...t,...N}},rr={control:{register:qe,unregister:Ue,getFieldState:J,handleSubmit:kn,setError:he,_subscribe:Ie,_runSchema:V,_updateIsValidating:E,_focusError:Ze,_getWatch:ve,_getDirty:de,_setValid:k,_setFieldArray:S,_setDisabledField:$e,_setErrors:R,_getFieldArray:be,_reset:cs,_resetDefaultValues:()=>Mi(e.defaultValues)&&e.defaultValues().then(N=>{us(N,e.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:ke,_disableForm:it,_subjects:w,_proxyFormState:m,get _fields(){return i},get _formValues(){return r},get _state(){return o},set _state(N){o=N},get _defaultValues(){return s},get _names(){return a},set _names(N){a=N},get _formState(){return t},get _options(){return e},set _options(N){e={...e,...N}}},subscribe:oe,trigger:Ve,register:qe,handleSubmit:kn,watch:Me,setValue:X,getValues:B,reset:us,resetField:On,clearErrors:fe,unregister:Ue,setError:he,setFocus:$i,getFieldState:J};return{...rr,formControl:rr}}function hl(n={}){const e=Ee.useRef(void 0),t=Ee.useRef(void 0),[i,s]=Ee.useState({isDirty:!1,isValidating:!1,isLoading:Mi(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:Mi(n.defaultValues)?void 0:n.defaultValues});if(!e.current)if(n.formControl)e.current={...n.formControl,formState:i},n.defaultValues&&!Mi(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:o,...a}=xse(n);e.current={...a,formState:i}}const r=e.current.control;return r._options=n,Kk(()=>{const o=r._subscribe({formState:r._proxyFormState,callback:()=>s({...r._formState}),reRenderRoot:!0});return s(a=>({...a,isReady:!0})),r._formState.isReady=!0,o},[r]),Ee.useEffect(()=>r._disableForm(n.disabled),[r,n.disabled]),Ee.useEffect(()=>{n.mode&&(r._options.mode=n.mode),n.reValidateMode&&(r._options.reValidateMode=n.reValidateMode)},[r,n.mode,n.reValidateMode]),Ee.useEffect(()=>{n.errors&&(r._setErrors(n.errors),r._focusError())},[r,n.errors]),Ee.useEffect(()=>{n.shouldUnregister&&r._subjects.state.next({values:r._getWatch()})},[r,n.shouldUnregister]),Ee.useEffect(()=>{if(r._proxyFormState.isDirty){const o=r._getDirty();o!==i.isDirty&&r._subjects.state.next({isDirty:o})}},[r,i.isDirty]),Ee.useEffect(()=>{var o;n.values&&!gr(n.values,t.current)?(r._reset(n.values,{keepFieldsRef:!0,...r._options.resetOptions}),!((o=r._options.resetOptions)===null||o===void 0)&&o.keepIsValid||r._setValid(),t.current=n.values,s(a=>({...a}))):r._resetDefaultValues()},[r,n.values]),Ee.useEffect(()=>{r._state.mount||(r._setValid(),r._state.mount=!0),r._state.watch&&(r._state.watch=!1,r._subjects.state.next({...r._formState})),r._removeUnmounted()}),e.current.formState=Ee.useMemo(()=>dL(i,r),[r,i]),e.current}var kse=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ese=kse.reduce((n,e)=>{const t=Bx(`Primitive.${e}`),i=_.forwardRef((s,r)=>{const{asChild:o,...a}=s,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(c,{...a,ref:r})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),Sse="Label",vL=_.forwardRef((n,e)=>v.jsx(Ese.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));vL.displayName=Sse;var Tse=vL;function Ise({className:n,...e}){return v.jsx(Tse,{"data-slot":"label",className:Ye("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}const ml=use,yL=_.createContext({}),dn=({...n})=>v.jsx(yL.Provider,{value:{name:n.name},children:v.jsx(lse,{...n})}),Xk=()=>{const n=_.useContext(yL),e=_.useContext(AL),{getFieldState:t}=cse(),i=fL({name:n.name}),s=t(n.name,i);if(!n)throw new Error("useFormField should be used within <FormField>");const{id:r}=e;return{id:r,name:n.name,formItemId:`${r}-form-item`,formDescriptionId:`${r}-form-item-description`,formMessageId:`${r}-form-item-message`,...s}},AL=_.createContext({});function fn({className:n,...e}){const t=_.useId();return v.jsx(AL.Provider,{value:{id:t},children:v.jsx("div",{"data-slot":"form-item",className:Ye("grid gap-2",n),...e})})}function hn({className:n,...e}){const{error:t,formItemId:i}=Xk();return v.jsx(Ise,{"data-slot":"form-label","data-error":!!t,className:Ye("data-[error=true]:text-destructive",n),htmlFor:i,...e})}function mn({...n}){const{error:e,formItemId:t,formDescriptionId:i,formMessageId:s}=Xk();return v.jsx(vm,{"data-slot":"form-control",id:t,"aria-describedby":e?`${i} ${s}`:`${i}`,"aria-invalid":!!e,...n})}function gn({className:n,...e}){const{error:t,formMessageId:i}=Xk(),s=t?String(t?.message??""):e.children;return s?v.jsx("p",{"data-slot":"form-message",id:i,className:Ye("text-destructive text-sm",n),...e,children:s}):null}function ue(n,e,t){function i(a,c){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:c,constr:o,traits:new Set},enumerable:!1}),a._zod.traits.has(n))return;a._zod.traits.add(n),e(a,c);const d=o.prototype,h=Object.keys(d);for(let m=0;m<h.length;m++){const p=h[m];p in a||(a[p]=d[p].bind(a))}}const s=t?.Parent??Object;class r extends s{}Object.defineProperty(r,"name",{value:n});function o(a){var c;const d=t?.Parent?new r:this;i(d,a),(c=d._zod).deferred??(c.deferred=[]);for(const h of d._zod.deferred)h();return d}return Object.defineProperty(o,"init",{value:i}),Object.defineProperty(o,Symbol.hasInstance,{value:a=>t?.Parent&&a instanceof t.Parent?!0:a?._zod?.traits?.has(n)}),Object.defineProperty(o,"name",{value:n}),o}class id extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class _L extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const CL={};function cc(n){return CL}function xL(n){const e=Object.values(n).filter(i=>typeof i=="number");return Object.entries(n).filter(([i,s])=>e.indexOf(+i)===-1).map(([i,s])=>s)}function sC(n,e){return typeof e=="bigint"?e.toString():e}function eE(n){return{get value(){{const e=n();return Object.defineProperty(this,"value",{value:e}),e}}}}function tE(n){return n==null}function nE(n){const e=n.startsWith("^")?1:0,t=n.endsWith("$")?n.length-1:n.length;return n.slice(e,t)}const aP=Symbol("evaluating");function Pt(n,e,t){let i;Object.defineProperty(n,e,{get(){if(i!==aP)return i===void 0&&(i=aP,i=t()),i},set(s){Object.defineProperty(n,e,{value:s})},configurable:!0})}function _c(n,e,t){Object.defineProperty(n,e,{value:t,writable:!0,enumerable:!0,configurable:!0})}function gl(...n){const e={};for(const t of n){const i=Object.getOwnPropertyDescriptors(t);Object.assign(e,i)}return Object.defineProperties({},e)}function lP(n){return JSON.stringify(n)}function Rse(n){return n.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const kL="captureStackTrace"in Error?Error.captureStackTrace:(...n)=>{};function ow(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}const Pse=eE(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const n=Function;return new n(""),!0}catch{return!1}});function Wh(n){if(ow(n)===!1)return!1;const e=n.constructor;if(e===void 0||typeof e!="function")return!0;const t=e.prototype;return!(ow(t)===!1||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)}function EL(n){return Wh(n)?{...n}:Array.isArray(n)?[...n]:n}const Ose=new Set(["string","number","symbol"]);function Rv(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pl(n,e,t){const i=new n._zod.constr(e??n._zod.def);return(!e||t?.parent)&&(i._zod.parent=n),i}function Ke(n){const e=n;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Dse(n){return Object.keys(n).filter(e=>n[e]._zod.optin==="optional"&&n[e]._zod.optout==="optional")}function Mse(n,e){const t=n._zod.def,i=t.checks;if(i&&i.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const r=gl(n._zod.def,{get shape(){const o={};for(const a in e){if(!(a in t.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(o[a]=t.shape[a])}return _c(this,"shape",o),o},checks:[]});return pl(n,r)}function Bse(n,e){const t=n._zod.def,i=t.checks;if(i&&i.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const r=gl(n._zod.def,{get shape(){const o={...n._zod.def.shape};for(const a in e){if(!(a in t.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&delete o[a]}return _c(this,"shape",o),o},checks:[]});return pl(n,r)}function Nse(n,e){if(!Wh(e))throw new Error("Invalid input to extend: expected a plain object");const t=n._zod.def.checks;if(t&&t.length>0){const r=n._zod.def.shape;for(const o in e)if(Object.getOwnPropertyDescriptor(r,o)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=gl(n._zod.def,{get shape(){const r={...n._zod.def.shape,...e};return _c(this,"shape",r),r}});return pl(n,s)}function Vse(n,e){if(!Wh(e))throw new Error("Invalid input to safeExtend: expected a plain object");const t=gl(n._zod.def,{get shape(){const i={...n._zod.def.shape,...e};return _c(this,"shape",i),i}});return pl(n,t)}function Lse(n,e){const t=gl(n._zod.def,{get shape(){const i={...n._zod.def.shape,...e._zod.def.shape};return _c(this,"shape",i),i},get catchall(){return e._zod.def.catchall},checks:[]});return pl(n,t)}function Fse(n,e,t){const s=e._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const o=gl(e._zod.def,{get shape(){const a=e._zod.def.shape,c={...a};if(t)for(const d in t){if(!(d in a))throw new Error(`Unrecognized key: "${d}"`);t[d]&&(c[d]=n?new n({type:"optional",innerType:a[d]}):a[d])}else for(const d in a)c[d]=n?new n({type:"optional",innerType:a[d]}):a[d];return _c(this,"shape",c),c},checks:[]});return pl(e,o)}function zse(n,e,t){const i=gl(e._zod.def,{get shape(){const s=e._zod.def.shape,r={...s};if(t)for(const o in t){if(!(o in r))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(r[o]=new n({type:"nonoptional",innerType:s[o]}))}else for(const o in s)r[o]=new n({type:"nonoptional",innerType:s[o]});return _c(this,"shape",r),r}});return pl(e,i)}function Ku(n,e=0){if(n.aborted===!0)return!0;for(let t=e;t<n.issues.length;t++)if(n.issues[t]?.continue!==!0)return!0;return!1}function SL(n,e){return e.map(t=>{var i;return(i=t).path??(i.path=[]),t.path.unshift(n),t})}function Ep(n){return typeof n=="string"?n:n?.message}function uc(n,e,t){const i={...n,path:n.path??[]};if(!n.message){const s=Ep(n.inst?._zod.def?.error?.(n))??Ep(e?.error?.(n))??Ep(t.customError?.(n))??Ep(t.localeError?.(n))??"Invalid input";i.message=s}return delete i.inst,delete i.continue,e?.reportInput||delete i.input,i}function iE(n){return Array.isArray(n)?"array":typeof n=="string"?"string":"unknown"}function $h(...n){const[e,t,i]=n;return typeof e=="string"?{message:e,code:"custom",input:t,inst:i}:{...e}}const TL=(n,e)=>{n.name="$ZodError",Object.defineProperty(n,"_zod",{value:n._zod,enumerable:!1}),Object.defineProperty(n,"issues",{value:e,enumerable:!1}),n.message=JSON.stringify(e,sC,2),Object.defineProperty(n,"toString",{value:()=>n.message,enumerable:!1})},sE=ue("$ZodError",TL),Pv=ue("$ZodError",TL,{Parent:Error});function jse(n,e=t=>t.message){const t={},i=[];for(const s of n.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):i.push(e(s));return{formErrors:i,fieldErrors:t}}function Use(n,e=t=>t.message){const t={_errors:[]},i=s=>{for(const r of s.issues)if(r.code==="invalid_union"&&r.errors.length)r.errors.map(o=>i({issues:o}));else if(r.code==="invalid_key")i({issues:r.issues});else if(r.code==="invalid_element")i({issues:r.issues});else if(r.path.length===0)t._errors.push(e(r));else{let o=t,a=0;for(;a<r.path.length;){const c=r.path[a];a===r.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(e(r))):o[c]=o[c]||{_errors:[]},o=o[c],a++}}};return i(n),t}const Ov=n=>(e,t,i,s)=>{const r=i?Object.assign(i,{async:!1}):{async:!1},o=e._zod.run({value:t,issues:[]},r);if(o instanceof Promise)throw new id;if(o.issues.length){const a=new(s?.Err??n)(o.issues.map(c=>uc(c,r,cc())));throw kL(a,s?.callee),a}return o.value},Hse=Ov(Pv),Dv=n=>async(e,t,i,s)=>{const r=i?Object.assign(i,{async:!0}):{async:!0};let o=e._zod.run({value:t,issues:[]},r);if(o instanceof Promise&&(o=await o),o.issues.length){const a=new(s?.Err??n)(o.issues.map(c=>uc(c,r,cc())));throw kL(a,s?.callee),a}return o.value},Wse=Dv(Pv),Mv=n=>(e,t,i)=>{const s=i?{...i,async:!1}:{async:!1},r=e._zod.run({value:t,issues:[]},s);if(r instanceof Promise)throw new id;return r.issues.length?{success:!1,error:new(n??sE)(r.issues.map(o=>uc(o,s,cc())))}:{success:!0,data:r.value}},$se=Mv(Pv),Bv=n=>async(e,t,i)=>{const s=i?Object.assign(i,{async:!0}):{async:!0};let r=e._zod.run({value:t,issues:[]},s);return r instanceof Promise&&(r=await r),r.issues.length?{success:!1,error:new n(r.issues.map(o=>uc(o,s,cc())))}:{success:!0,data:r.value}},Gse=Bv(Pv),Yse=n=>(e,t,i)=>{const s=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ov(n)(e,t,s)},Kse=n=>(e,t,i)=>Ov(n)(e,t,i),qse=n=>async(e,t,i)=>{const s=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Dv(n)(e,t,s)},Qse=n=>async(e,t,i)=>Dv(n)(e,t,i),Zse=n=>(e,t,i)=>{const s=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Mv(n)(e,t,s)},Jse=n=>(e,t,i)=>Mv(n)(e,t,i),Xse=n=>async(e,t,i)=>{const s=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Bv(n)(e,t,s)},ere=n=>async(e,t,i)=>Bv(n)(e,t,i),tre=/^[cC][^\s-]{8,}$/,nre=/^[0-9a-z]+$/,ire=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,sre=/^[0-9a-vA-V]{20}$/,rre=/^[A-Za-z0-9]{27}$/,ore=/^[a-zA-Z0-9_-]{21}$/,are=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,lre=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,cP=n=>n?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${n}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,cre=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ure="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function dre(){return new RegExp(ure,"u")}const fre=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,hre=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,mre=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,gre=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,pre=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,IL=/^[A-Za-z0-9_-]*$/,bre=/^\+[1-9]\d{6,14}$/,RL="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",wre=new RegExp(`^${RL}$`);function PL(n){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof n.precision=="number"?n.precision===-1?`${e}`:n.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${n.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function vre(n){return new RegExp(`^${PL(n)}$`)}function yre(n){const e=PL({precision:n.precision}),t=["Z"];n.local&&t.push(""),n.offset&&t.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${e}(?:${t.join("|")})`;return new RegExp(`^${RL}T(?:${i})$`)}const Are=n=>{const e=n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},_re=/^[^A-Z]*$/,Cre=/^[^a-z]*$/,ho=ue("$ZodCheck",(n,e)=>{var t;n._zod??(n._zod={}),n._zod.def=e,(t=n._zod).onattach??(t.onattach=[])}),xre=ue("$ZodCheckMaxLength",(n,e)=>{var t;ho.init(n,e),(t=n._zod.def).when??(t.when=i=>{const s=i.value;return!tE(s)&&s.length!==void 0}),n._zod.onattach.push(i=>{const s=i._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(i._zod.bag.maximum=e.maximum)}),n._zod.check=i=>{const s=i.value;if(s.length<=e.maximum)return;const o=iE(s);i.issues.push({origin:o,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:n,continue:!e.abort})}}),kre=ue("$ZodCheckMinLength",(n,e)=>{var t;ho.init(n,e),(t=n._zod.def).when??(t.when=i=>{const s=i.value;return!tE(s)&&s.length!==void 0}),n._zod.onattach.push(i=>{const s=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(i._zod.bag.minimum=e.minimum)}),n._zod.check=i=>{const s=i.value;if(s.length>=e.minimum)return;const o=iE(s);i.issues.push({origin:o,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:n,continue:!e.abort})}}),Ere=ue("$ZodCheckLengthEquals",(n,e)=>{var t;ho.init(n,e),(t=n._zod.def).when??(t.when=i=>{const s=i.value;return!tE(s)&&s.length!==void 0}),n._zod.onattach.push(i=>{const s=i._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),n._zod.check=i=>{const s=i.value,r=s.length;if(r===e.length)return;const o=iE(s),a=r>e.length;i.issues.push({origin:o,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:i.value,inst:n,continue:!e.abort})}}),Nv=ue("$ZodCheckStringFormat",(n,e)=>{var t,i;ho.init(n,e),n._zod.onattach.push(s=>{const r=s._zod.bag;r.format=e.format,e.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(e.pattern))}),e.pattern?(t=n._zod).check??(t.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:n,continue:!e.abort})}):(i=n._zod).check??(i.check=()=>{})}),Sre=ue("$ZodCheckRegex",(n,e)=>{Nv.init(n,e),n._zod.check=t=>{e.pattern.lastIndex=0,!e.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:e.pattern.toString(),inst:n,continue:!e.abort})}}),Tre=ue("$ZodCheckLowerCase",(n,e)=>{e.pattern??(e.pattern=_re),Nv.init(n,e)}),Ire=ue("$ZodCheckUpperCase",(n,e)=>{e.pattern??(e.pattern=Cre),Nv.init(n,e)}),Rre=ue("$ZodCheckIncludes",(n,e)=>{ho.init(n,e);const t=Rv(e.includes),i=new RegExp(typeof e.position=="number"?`^.{${e.position}}${t}`:t);e.pattern=i,n._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(i)}),n._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:n,continue:!e.abort})}}),Pre=ue("$ZodCheckStartsWith",(n,e)=>{ho.init(n,e);const t=new RegExp(`^${Rv(e.prefix)}.*`);e.pattern??(e.pattern=t),n._zod.onattach.push(i=>{const s=i._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),n._zod.check=i=>{i.value.startsWith(e.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:i.value,inst:n,continue:!e.abort})}}),Ore=ue("$ZodCheckEndsWith",(n,e)=>{ho.init(n,e);const t=new RegExp(`.*${Rv(e.suffix)}$`);e.pattern??(e.pattern=t),n._zod.onattach.push(i=>{const s=i._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),n._zod.check=i=>{i.value.endsWith(e.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:i.value,inst:n,continue:!e.abort})}}),Dre=ue("$ZodCheckOverwrite",(n,e)=>{ho.init(n,e),n._zod.check=t=>{t.value=e.tx(t.value)}});class Mre{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const i=e.split(`
`).filter(o=>o),s=Math.min(...i.map(o=>o.length-o.trimStart().length)),r=i.map(o=>o.slice(s)).map(o=>" ".repeat(this.indent*2)+o);for(const o of r)this.content.push(o)}compile(){const e=Function,t=this?.args,s=[...(this?.content??[""]).map(r=>`  ${r}`)];return new e(...t,s.join(`
`))}}const Bre={major:4,minor:3,patch:5},Jn=ue("$ZodType",(n,e)=>{var t;n??(n={}),n._zod.def=e,n._zod.bag=n._zod.bag||{},n._zod.version=Bre;const i=[...n._zod.def.checks??[]];n._zod.traits.has("$ZodCheck")&&i.unshift(n);for(const s of i)for(const r of s._zod.onattach)r(n);if(i.length===0)(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred?.push(()=>{n._zod.run=n._zod.parse});else{const s=(o,a,c)=>{let d=Ku(o),h;for(const m of a){if(m._zod.def.when){if(!m._zod.def.when(o))continue}else if(d)continue;const p=o.issues.length,w=m._zod.check(o);if(w instanceof Promise&&c?.async===!1)throw new id;if(h||w instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await w,o.issues.length!==p&&(d||(d=Ku(o,p)))});else{if(o.issues.length===p)continue;d||(d=Ku(o,p))}}return h?h.then(()=>o):o},r=(o,a,c)=>{if(Ku(o))return o.aborted=!0,o;const d=s(a,i,c);if(d instanceof Promise){if(c.async===!1)throw new id;return d.then(h=>n._zod.parse(h,c))}return n._zod.parse(d,c)};n._zod.run=(o,a)=>{if(a.skipChecks)return n._zod.parse(o,a);if(a.direction==="backward"){const d=n._zod.parse({value:o.value,issues:[]},{...a,skipChecks:!0});return d instanceof Promise?d.then(h=>r(h,o,a)):r(d,o,a)}const c=n._zod.parse(o,a);if(c instanceof Promise){if(a.async===!1)throw new id;return c.then(d=>s(d,i,a))}return s(c,i,a)}}Pt(n,"~standard",()=>({validate:s=>{try{const r=$se(n,s);return r.success?{value:r.data}:{issues:r.error?.issues}}catch{return Gse(n,s).then(o=>o.success?{value:o.data}:{issues:o.error?.issues})}},vendor:"zod",version:1}))}),rE=ue("$ZodString",(n,e)=>{Jn.init(n,e),n._zod.pattern=[...n?._zod.bag?.patterns??[]].pop()??Are(n._zod.bag),n._zod.parse=(t,i)=>{if(e.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:n}),t}}),an=ue("$ZodStringFormat",(n,e)=>{Nv.init(n,e),rE.init(n,e)}),Nre=ue("$ZodGUID",(n,e)=>{e.pattern??(e.pattern=lre),an.init(n,e)}),Vre=ue("$ZodUUID",(n,e)=>{if(e.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(i===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=cP(i))}else e.pattern??(e.pattern=cP());an.init(n,e)}),Lre=ue("$ZodEmail",(n,e)=>{e.pattern??(e.pattern=cre),an.init(n,e)}),Fre=ue("$ZodURL",(n,e)=>{an.init(n,e),n._zod.check=t=>{try{const i=t.value.trim(),s=new URL(i);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:t.value,inst:n,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:t.value,inst:n,continue:!e.abort})),e.normalize?t.value=s.href:t.value=i;return}catch{t.issues.push({code:"invalid_format",format:"url",input:t.value,inst:n,continue:!e.abort})}}}),zre=ue("$ZodEmoji",(n,e)=>{e.pattern??(e.pattern=dre()),an.init(n,e)}),jre=ue("$ZodNanoID",(n,e)=>{e.pattern??(e.pattern=ore),an.init(n,e)}),Ure=ue("$ZodCUID",(n,e)=>{e.pattern??(e.pattern=tre),an.init(n,e)}),Hre=ue("$ZodCUID2",(n,e)=>{e.pattern??(e.pattern=nre),an.init(n,e)}),Wre=ue("$ZodULID",(n,e)=>{e.pattern??(e.pattern=ire),an.init(n,e)}),$re=ue("$ZodXID",(n,e)=>{e.pattern??(e.pattern=sre),an.init(n,e)}),Gre=ue("$ZodKSUID",(n,e)=>{e.pattern??(e.pattern=rre),an.init(n,e)}),Yre=ue("$ZodISODateTime",(n,e)=>{e.pattern??(e.pattern=yre(e)),an.init(n,e)}),Kre=ue("$ZodISODate",(n,e)=>{e.pattern??(e.pattern=wre),an.init(n,e)}),qre=ue("$ZodISOTime",(n,e)=>{e.pattern??(e.pattern=vre(e)),an.init(n,e)}),Qre=ue("$ZodISODuration",(n,e)=>{e.pattern??(e.pattern=are),an.init(n,e)}),Zre=ue("$ZodIPv4",(n,e)=>{e.pattern??(e.pattern=fre),an.init(n,e),n._zod.bag.format="ipv4"}),Jre=ue("$ZodIPv6",(n,e)=>{e.pattern??(e.pattern=hre),an.init(n,e),n._zod.bag.format="ipv6",n._zod.check=t=>{try{new URL(`http://[${t.value}]`)}catch{t.issues.push({code:"invalid_format",format:"ipv6",input:t.value,inst:n,continue:!e.abort})}}}),Xre=ue("$ZodCIDRv4",(n,e)=>{e.pattern??(e.pattern=mre),an.init(n,e)}),eoe=ue("$ZodCIDRv6",(n,e)=>{e.pattern??(e.pattern=gre),an.init(n,e),n._zod.check=t=>{const i=t.value.split("/");try{if(i.length!==2)throw new Error;const[s,r]=i;if(!r)throw new Error;const o=Number(r);if(`${o}`!==r)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${s}]`)}catch{t.issues.push({code:"invalid_format",format:"cidrv6",input:t.value,inst:n,continue:!e.abort})}}});function OL(n){if(n==="")return!0;if(n.length%4!==0)return!1;try{return atob(n),!0}catch{return!1}}const toe=ue("$ZodBase64",(n,e)=>{e.pattern??(e.pattern=pre),an.init(n,e),n._zod.bag.contentEncoding="base64",n._zod.check=t=>{OL(t.value)||t.issues.push({code:"invalid_format",format:"base64",input:t.value,inst:n,continue:!e.abort})}});function noe(n){if(!IL.test(n))return!1;const e=n.replace(/[-_]/g,i=>i==="-"?"+":"/"),t=e.padEnd(Math.ceil(e.length/4)*4,"=");return OL(t)}const ioe=ue("$ZodBase64URL",(n,e)=>{e.pattern??(e.pattern=IL),an.init(n,e),n._zod.bag.contentEncoding="base64url",n._zod.check=t=>{noe(t.value)||t.issues.push({code:"invalid_format",format:"base64url",input:t.value,inst:n,continue:!e.abort})}}),soe=ue("$ZodE164",(n,e)=>{e.pattern??(e.pattern=bre),an.init(n,e)});function roe(n,e=null){try{const t=n.split(".");if(t.length!==3)return!1;const[i]=t;if(!i)return!1;const s=JSON.parse(atob(i));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const ooe=ue("$ZodJWT",(n,e)=>{an.init(n,e),n._zod.check=t=>{roe(t.value,e.alg)||t.issues.push({code:"invalid_format",format:"jwt",input:t.value,inst:n,continue:!e.abort})}}),aoe=ue("$ZodUnknown",(n,e)=>{Jn.init(n,e),n._zod.parse=t=>t}),loe=ue("$ZodNever",(n,e)=>{Jn.init(n,e),n._zod.parse=(t,i)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:n}),t)});function uP(n,e,t){n.issues.length&&e.issues.push(...SL(t,n.issues)),e.value[t]=n.value}const coe=ue("$ZodArray",(n,e)=>{Jn.init(n,e),n._zod.parse=(t,i)=>{const s=t.value;if(!Array.isArray(s))return t.issues.push({expected:"array",code:"invalid_type",input:s,inst:n}),t;t.value=Array(s.length);const r=[];for(let o=0;o<s.length;o++){const a=s[o],c=e.element._zod.run({value:a,issues:[]},i);c instanceof Promise?r.push(c.then(d=>uP(d,t,o))):uP(c,t,o)}return r.length?Promise.all(r).then(()=>t):t}});function aw(n,e,t,i,s){if(n.issues.length){if(s&&!(t in i))return;e.issues.push(...SL(t,n.issues))}n.value===void 0?t in i&&(e.value[t]=void 0):e.value[t]=n.value}function DL(n){const e=Object.keys(n.shape);for(const i of e)if(!n.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const t=Dse(n.shape);return{...n,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(t)}}function ML(n,e,t,i,s,r){const o=[],a=s.keySet,c=s.catchall._zod,d=c.def.type,h=c.optout==="optional";for(const m in e){if(a.has(m))continue;if(d==="never"){o.push(m);continue}const p=c.run({value:e[m],issues:[]},i);p instanceof Promise?n.push(p.then(w=>aw(w,t,m,e,h))):aw(p,t,m,e,h)}return o.length&&t.issues.push({code:"unrecognized_keys",keys:o,input:e,inst:r}),n.length?Promise.all(n).then(()=>t):t}const uoe=ue("$ZodObject",(n,e)=>{if(Jn.init(n,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const a=e.shape;Object.defineProperty(e,"shape",{get:()=>{const c={...a};return Object.defineProperty(e,"shape",{value:c}),c}})}const i=eE(()=>DL(e));Pt(n._zod,"propValues",()=>{const a=e.shape,c={};for(const d in a){const h=a[d]._zod;if(h.values){c[d]??(c[d]=new Set);for(const m of h.values)c[d].add(m)}}return c});const s=ow,r=e.catchall;let o;n._zod.parse=(a,c)=>{o??(o=i.value);const d=a.value;if(!s(d))return a.issues.push({expected:"object",code:"invalid_type",input:d,inst:n}),a;a.value={};const h=[],m=o.shape;for(const p of o.keys){const w=m[p],A=w._zod.optout==="optional",C=w._zod.run({value:d[p],issues:[]},c);C instanceof Promise?h.push(C.then(k=>aw(k,a,p,d,A))):aw(C,a,p,d,A)}return r?ML(h,d,a,c,i.value,n):h.length?Promise.all(h).then(()=>a):a}}),doe=ue("$ZodObjectJIT",(n,e)=>{uoe.init(n,e);const t=n._zod.parse,i=eE(()=>DL(e)),s=p=>{const w=new Mre(["shape","payload","ctx"]),A=i.value,C=I=>{const R=lP(I);return`shape[${R}]._zod.run({ value: input[${R}], issues: [] }, ctx)`};w.write("const input = payload.value;");const k=Object.create(null);let E=0;for(const I of A.keys)k[I]=`key_${E++}`;w.write("const newResult = {};");for(const I of A.keys){const R=k[I],O=lP(I),P=p[I]?._zod?.optout==="optional";w.write(`const ${R} = ${C(I)};`),P?w.write(`
        if (${R}.issues.length) {
          if (${O} in input) {
            payload.issues = payload.issues.concat(${R}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${O}, ...iss.path] : [${O}]
            })));
          }
        }
        
        if (${R}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${R}.value;
        }
        
      `):w.write(`
        if (${R}.issues.length) {
          payload.issues = payload.issues.concat(${R}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${O}, ...iss.path] : [${O}]
          })));
        }
        
        if (${R}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${R}.value;
        }
        
      `)}w.write("payload.value = newResult;"),w.write("return payload;");const S=w.compile();return(I,R)=>S(p,I,R)};let r;const o=ow,a=!CL.jitless,d=a&&Pse.value,h=e.catchall;let m;n._zod.parse=(p,w)=>{m??(m=i.value);const A=p.value;return o(A)?a&&d&&w?.async===!1&&w.jitless!==!0?(r||(r=s(e.shape)),p=r(p,w),h?ML([],A,p,w,m,n):p):t(p,w):(p.issues.push({expected:"object",code:"invalid_type",input:A,inst:n}),p)}});function dP(n,e,t,i){for(const r of n)if(r.issues.length===0)return e.value=r.value,e;const s=n.filter(r=>!Ku(r));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:t,errors:n.map(r=>r.issues.map(o=>uc(o,i,cc())))}),e)}const foe=ue("$ZodUnion",(n,e)=>{Jn.init(n,e),Pt(n._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Pt(n._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Pt(n._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),Pt(n._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(r=>r._zod.pattern);return new RegExp(`^(${s.map(r=>nE(r.source)).join("|")})$`)}});const t=e.options.length===1,i=e.options[0]._zod.run;n._zod.parse=(s,r)=>{if(t)return i(s,r);let o=!1;const a=[];for(const c of e.options){const d=c._zod.run({value:s.value,issues:[]},r);if(d instanceof Promise)a.push(d),o=!0;else{if(d.issues.length===0)return d;a.push(d)}}return o?Promise.all(a).then(c=>dP(c,s,n,r)):dP(a,s,n,r)}}),hoe=ue("$ZodIntersection",(n,e)=>{Jn.init(n,e),n._zod.parse=(t,i)=>{const s=t.value,r=e.left._zod.run({value:s,issues:[]},i),o=e.right._zod.run({value:s,issues:[]},i);return r instanceof Promise||o instanceof Promise?Promise.all([r,o]).then(([c,d])=>fP(t,c,d)):fP(t,r,o)}});function rC(n,e){if(n===e)return{valid:!0,data:n};if(n instanceof Date&&e instanceof Date&&+n==+e)return{valid:!0,data:n};if(Wh(n)&&Wh(e)){const t=Object.keys(e),i=Object.keys(n).filter(r=>t.indexOf(r)!==-1),s={...n,...e};for(const r of i){const o=rC(n[r],e[r]);if(!o.valid)return{valid:!1,mergeErrorPath:[r,...o.mergeErrorPath]};s[r]=o.data}return{valid:!0,data:s}}if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let i=0;i<n.length;i++){const s=n[i],r=e[i],o=rC(s,r);if(!o.valid)return{valid:!1,mergeErrorPath:[i,...o.mergeErrorPath]};t.push(o.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function fP(n,e,t){const i=new Map;let s;for(const a of e.issues)if(a.code==="unrecognized_keys"){s??(s=a);for(const c of a.keys)i.has(c)||i.set(c,{}),i.get(c).l=!0}else n.issues.push(a);for(const a of t.issues)if(a.code==="unrecognized_keys")for(const c of a.keys)i.has(c)||i.set(c,{}),i.get(c).r=!0;else n.issues.push(a);const r=[...i].filter(([,a])=>a.l&&a.r).map(([a])=>a);if(r.length&&s&&n.issues.push({...s,keys:r}),Ku(n))return n;const o=rC(e.value,t.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return n.value=o.data,n}const moe=ue("$ZodEnum",(n,e)=>{Jn.init(n,e);const t=xL(e.entries),i=new Set(t);n._zod.values=i,n._zod.pattern=new RegExp(`^(${t.filter(s=>Ose.has(typeof s)).map(s=>typeof s=="string"?Rv(s):s.toString()).join("|")})$`),n._zod.parse=(s,r)=>{const o=s.value;return i.has(o)||s.issues.push({code:"invalid_value",values:t,input:o,inst:n}),s}}),goe=ue("$ZodTransform",(n,e)=>{Jn.init(n,e),n._zod.parse=(t,i)=>{if(i.direction==="backward")throw new _L(n.constructor.name);const s=e.transform(t.value,t);if(i.async)return(s instanceof Promise?s:Promise.resolve(s)).then(o=>(t.value=o,t));if(s instanceof Promise)throw new id;return t.value=s,t}});function hP(n,e){return n.issues.length&&e===void 0?{issues:[],value:void 0}:n}const BL=ue("$ZodOptional",(n,e)=>{Jn.init(n,e),n._zod.optin="optional",n._zod.optout="optional",Pt(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Pt(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${nE(t.source)})?$`):void 0}),n._zod.parse=(t,i)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(r=>hP(r,t.value)):hP(s,t.value)}return t.value===void 0?t:e.innerType._zod.run(t,i)}}),poe=ue("$ZodExactOptional",(n,e)=>{BL.init(n,e),Pt(n._zod,"values",()=>e.innerType._zod.values),Pt(n._zod,"pattern",()=>e.innerType._zod.pattern),n._zod.parse=(t,i)=>e.innerType._zod.run(t,i)}),boe=ue("$ZodNullable",(n,e)=>{Jn.init(n,e),Pt(n._zod,"optin",()=>e.innerType._zod.optin),Pt(n._zod,"optout",()=>e.innerType._zod.optout),Pt(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${nE(t.source)}|null)$`):void 0}),Pt(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),n._zod.parse=(t,i)=>t.value===null?t:e.innerType._zod.run(t,i)}),woe=ue("$ZodDefault",(n,e)=>{Jn.init(n,e),n._zod.optin="optional",Pt(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,i)=>{if(i.direction==="backward")return e.innerType._zod.run(t,i);if(t.value===void 0)return t.value=e.defaultValue,t;const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(r=>mP(r,e)):mP(s,e)}});function mP(n,e){return n.value===void 0&&(n.value=e.defaultValue),n}const voe=ue("$ZodPrefault",(n,e)=>{Jn.init(n,e),n._zod.optin="optional",Pt(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,i)=>(i.direction==="backward"||t.value===void 0&&(t.value=e.defaultValue),e.innerType._zod.run(t,i))}),yoe=ue("$ZodNonOptional",(n,e)=>{Jn.init(n,e),Pt(n._zod,"values",()=>{const t=e.innerType._zod.values;return t?new Set([...t].filter(i=>i!==void 0)):void 0}),n._zod.parse=(t,i)=>{const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(r=>gP(r,n)):gP(s,n)}});function gP(n,e){return!n.issues.length&&n.value===void 0&&n.issues.push({code:"invalid_type",expected:"nonoptional",input:n.value,inst:e}),n}const Aoe=ue("$ZodCatch",(n,e)=>{Jn.init(n,e),Pt(n._zod,"optin",()=>e.innerType._zod.optin),Pt(n._zod,"optout",()=>e.innerType._zod.optout),Pt(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,i)=>{if(i.direction==="backward")return e.innerType._zod.run(t,i);const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(r=>(t.value=r.value,r.issues.length&&(t.value=e.catchValue({...t,error:{issues:r.issues.map(o=>uc(o,i,cc()))},input:t.value}),t.issues=[]),t)):(t.value=s.value,s.issues.length&&(t.value=e.catchValue({...t,error:{issues:s.issues.map(r=>uc(r,i,cc()))},input:t.value}),t.issues=[]),t)}}),_oe=ue("$ZodPipe",(n,e)=>{Jn.init(n,e),Pt(n._zod,"values",()=>e.in._zod.values),Pt(n._zod,"optin",()=>e.in._zod.optin),Pt(n._zod,"optout",()=>e.out._zod.optout),Pt(n._zod,"propValues",()=>e.in._zod.propValues),n._zod.parse=(t,i)=>{if(i.direction==="backward"){const r=e.out._zod.run(t,i);return r instanceof Promise?r.then(o=>Sp(o,e.in,i)):Sp(r,e.in,i)}const s=e.in._zod.run(t,i);return s instanceof Promise?s.then(r=>Sp(r,e.out,i)):Sp(s,e.out,i)}});function Sp(n,e,t){return n.issues.length?(n.aborted=!0,n):e._zod.run({value:n.value,issues:n.issues},t)}const Coe=ue("$ZodReadonly",(n,e)=>{Jn.init(n,e),Pt(n._zod,"propValues",()=>e.innerType._zod.propValues),Pt(n._zod,"values",()=>e.innerType._zod.values),Pt(n._zod,"optin",()=>e.innerType?._zod?.optin),Pt(n._zod,"optout",()=>e.innerType?._zod?.optout),n._zod.parse=(t,i)=>{if(i.direction==="backward")return e.innerType._zod.run(t,i);const s=e.innerType._zod.run(t,i);return s instanceof Promise?s.then(pP):pP(s)}});function pP(n){return n.value=Object.freeze(n.value),n}const xoe=ue("$ZodCustom",(n,e)=>{ho.init(n,e),Jn.init(n,e),n._zod.parse=(t,i)=>t,n._zod.check=t=>{const i=t.value,s=e.fn(i);if(s instanceof Promise)return s.then(r=>bP(r,t,i,n));bP(s,t,i,n)}});function bP(n,e,t,i){if(!n){const s={code:"custom",input:t,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(s.params=i._zod.def.params),e.issues.push($h(s))}}var wP;class koe{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const i=t[0];return this._map.set(e,i),i&&typeof i=="object"&&"id"in i&&this._idmap.set(i.id,e),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const i={...this.get(t)??{}};delete i.id;const s={...i,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Eoe(){return new koe}(wP=globalThis).__zod_globalRegistry??(wP.__zod_globalRegistry=Eoe());const rh=globalThis.__zod_globalRegistry;function Soe(n,e){return new n({type:"string",...Ke(e)})}function Toe(n,e){return new n({type:"string",format:"email",check:"string_format",abort:!1,...Ke(e)})}function vP(n,e){return new n({type:"string",format:"guid",check:"string_format",abort:!1,...Ke(e)})}function Ioe(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,...Ke(e)})}function Roe(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ke(e)})}function Poe(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ke(e)})}function Ooe(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ke(e)})}function Doe(n,e){return new n({type:"string",format:"url",check:"string_format",abort:!1,...Ke(e)})}function Moe(n,e){return new n({type:"string",format:"emoji",check:"string_format",abort:!1,...Ke(e)})}function Boe(n,e){return new n({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ke(e)})}function Noe(n,e){return new n({type:"string",format:"cuid",check:"string_format",abort:!1,...Ke(e)})}function Voe(n,e){return new n({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ke(e)})}function Loe(n,e){return new n({type:"string",format:"ulid",check:"string_format",abort:!1,...Ke(e)})}function Foe(n,e){return new n({type:"string",format:"xid",check:"string_format",abort:!1,...Ke(e)})}function zoe(n,e){return new n({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ke(e)})}function joe(n,e){return new n({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ke(e)})}function Uoe(n,e){return new n({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ke(e)})}function Hoe(n,e){return new n({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ke(e)})}function Woe(n,e){return new n({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ke(e)})}function $oe(n,e){return new n({type:"string",format:"base64",check:"string_format",abort:!1,...Ke(e)})}function Goe(n,e){return new n({type:"string",format:"base64url",check:"string_format",abort:!1,...Ke(e)})}function Yoe(n,e){return new n({type:"string",format:"e164",check:"string_format",abort:!1,...Ke(e)})}function Koe(n,e){return new n({type:"string",format:"jwt",check:"string_format",abort:!1,...Ke(e)})}function qoe(n,e){return new n({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ke(e)})}function Qoe(n,e){return new n({type:"string",format:"date",check:"string_format",...Ke(e)})}function Zoe(n,e){return new n({type:"string",format:"time",check:"string_format",precision:null,...Ke(e)})}function Joe(n,e){return new n({type:"string",format:"duration",check:"string_format",...Ke(e)})}function Xoe(n){return new n({type:"unknown"})}function eae(n,e){return new n({type:"never",...Ke(e)})}function NL(n,e){return new xre({check:"max_length",...Ke(e),maximum:n})}function lw(n,e){return new kre({check:"min_length",...Ke(e),minimum:n})}function VL(n,e){return new Ere({check:"length_equals",...Ke(e),length:n})}function tae(n,e){return new Sre({check:"string_format",format:"regex",...Ke(e),pattern:n})}function nae(n){return new Tre({check:"string_format",format:"lowercase",...Ke(n)})}function iae(n){return new Ire({check:"string_format",format:"uppercase",...Ke(n)})}function sae(n,e){return new Rre({check:"string_format",format:"includes",...Ke(e),includes:n})}function rae(n,e){return new Pre({check:"string_format",format:"starts_with",...Ke(e),prefix:n})}function oae(n,e){return new Ore({check:"string_format",format:"ends_with",...Ke(e),suffix:n})}function Fd(n){return new Dre({check:"overwrite",tx:n})}function aae(n){return Fd(e=>e.normalize(n))}function lae(){return Fd(n=>n.trim())}function cae(){return Fd(n=>n.toLowerCase())}function uae(){return Fd(n=>n.toUpperCase())}function dae(){return Fd(n=>Rse(n))}function fae(n,e,t){return new n({type:"array",element:e,...Ke(t)})}function hae(n,e,t){return new n({type:"custom",check:"custom",fn:e,...Ke(t)})}function mae(n){const e=gae(t=>(t.addIssue=i=>{if(typeof i=="string")t.issues.push($h(i,t.value,e._zod.def));else{const s=i;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=t.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),t.issues.push($h(s))}},n(t.value,t)));return e}function gae(n,e){const t=new ho({check:"custom",...Ke(e)});return t._zod.check=n,t}function LL(n){let e=n?.target??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:n.processors??{},metadataRegistry:n?.metadata??rh,target:e,unrepresentable:n?.unrepresentable??"throw",override:n?.override??(()=>{}),io:n?.io??"output",counter:0,seen:new Map,cycles:n?.cycles??"ref",reused:n?.reused??"inline",external:n?.external??void 0}}function yi(n,e,t={path:[],schemaPath:[]}){var i;const s=n._zod.def,r=e.seen.get(n);if(r)return r.count++,t.schemaPath.includes(n)&&(r.cycle=t.path),r.schema;const o={schema:{},count:1,cycle:void 0,path:t.path};e.seen.set(n,o);const a=n._zod.toJSONSchema?.();if(a)o.schema=a;else{const h={...t,schemaPath:[...t.schemaPath,n],path:t.path};if(n._zod.processJSONSchema)n._zod.processJSONSchema(e,o.schema,h);else{const p=o.schema,w=e.processors[s.type];if(!w)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);w(n,e,p,h)}const m=n._zod.parent;m&&(o.ref||(o.ref=m),yi(m,e,h),e.seen.get(m).isParent=!0)}const c=e.metadataRegistry.get(n);return c&&Object.assign(o.schema,c),e.io==="input"&&Ii(n)&&(delete o.schema.examples,delete o.schema.default),e.io==="input"&&o.schema._prefault&&((i=o.schema).default??(i.default=o.schema._prefault)),delete o.schema._prefault,e.seen.get(n).schema}function FL(n,e){const t=n.seen.get(e);if(!t)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=new Map;for(const o of n.seen.entries()){const a=n.metadataRegistry.get(o[0])?.id;if(a){const c=i.get(a);if(c&&c!==o[0])throw new Error(`Duplicate schema id "${a}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);i.set(a,o[0])}}const s=o=>{const a=n.target==="draft-2020-12"?"$defs":"definitions";if(n.external){const m=n.external.registry.get(o[0])?.id,p=n.external.uri??(A=>A);if(m)return{ref:p(m)};const w=o[1].defId??o[1].schema.id??`schema${n.counter++}`;return o[1].defId=w,{defId:w,ref:`${p("__shared")}#/${a}/${w}`}}if(o[1]===t)return{ref:"#"};const d=`#/${a}/`,h=o[1].schema.id??`__schema${n.counter++}`;return{defId:h,ref:d+h}},r=o=>{if(o[1].schema.$ref)return;const a=o[1],{ref:c,defId:d}=s(o);a.def={...a.schema},d&&(a.defId=d);const h=a.schema;for(const m in h)delete h[m];h.$ref=c};if(n.cycles==="throw")for(const o of n.seen.entries()){const a=o[1];if(a.cycle)throw new Error(`Cycle detected: #/${a.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const o of n.seen.entries()){const a=o[1];if(e===o[0]){r(o);continue}if(n.external){const d=n.external.registry.get(o[0])?.id;if(e!==o[0]&&d){r(o);continue}}if(n.metadataRegistry.get(o[0])?.id){r(o);continue}if(a.cycle){r(o);continue}if(a.count>1&&n.reused==="ref"){r(o);continue}}}function zL(n,e){const t=n.seen.get(e);if(!t)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=o=>{const a=n.seen.get(o);if(a.ref===null)return;const c=a.def??a.schema,d={...c},h=a.ref;if(a.ref=null,h){i(h);const p=n.seen.get(h),w=p.schema;if(w.$ref&&(n.target==="draft-07"||n.target==="draft-04"||n.target==="openapi-3.0")?(c.allOf=c.allOf??[],c.allOf.push(w)):Object.assign(c,w),Object.assign(c,d),o._zod.parent===h)for(const C in c)C==="$ref"||C==="allOf"||C in d||delete c[C];if(w.$ref)for(const C in c)C==="$ref"||C==="allOf"||C in p.def&&JSON.stringify(c[C])===JSON.stringify(p.def[C])&&delete c[C]}const m=o._zod.parent;if(m&&m!==h){i(m);const p=n.seen.get(m);if(p?.schema.$ref&&(c.$ref=p.schema.$ref,p.def))for(const w in c)w==="$ref"||w==="allOf"||w in p.def&&JSON.stringify(c[w])===JSON.stringify(p.def[w])&&delete c[w]}n.override({zodSchema:o,jsonSchema:c,path:a.path??[]})};for(const o of[...n.seen.entries()].reverse())i(o[0]);const s={};if(n.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":n.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":n.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":n.target,n.external?.uri){const o=n.external.registry.get(e)?.id;if(!o)throw new Error("Schema is missing an `id` property");s.$id=n.external.uri(o)}Object.assign(s,t.def??t.schema);const r=n.external?.defs??{};for(const o of n.seen.entries()){const a=o[1];a.def&&a.defId&&(r[a.defId]=a.def)}n.external||Object.keys(r).length>0&&(n.target==="draft-2020-12"?s.$defs=r:s.definitions=r);try{const o=JSON.parse(JSON.stringify(s));return Object.defineProperty(o,"~standard",{value:{...e["~standard"],jsonSchema:{input:cw(e,"input",n.processors),output:cw(e,"output",n.processors)}},enumerable:!1,writable:!1}),o}catch{throw new Error("Error converting schema to JSON.")}}function Ii(n,e){const t=e??{seen:new Set};if(t.seen.has(n))return!1;t.seen.add(n);const i=n._zod.def;if(i.type==="transform")return!0;if(i.type==="array")return Ii(i.element,t);if(i.type==="set")return Ii(i.valueType,t);if(i.type==="lazy")return Ii(i.getter(),t);if(i.type==="promise"||i.type==="optional"||i.type==="nonoptional"||i.type==="nullable"||i.type==="readonly"||i.type==="default"||i.type==="prefault")return Ii(i.innerType,t);if(i.type==="intersection")return Ii(i.left,t)||Ii(i.right,t);if(i.type==="record"||i.type==="map")return Ii(i.keyType,t)||Ii(i.valueType,t);if(i.type==="pipe")return Ii(i.in,t)||Ii(i.out,t);if(i.type==="object"){for(const s in i.shape)if(Ii(i.shape[s],t))return!0;return!1}if(i.type==="union"){for(const s of i.options)if(Ii(s,t))return!0;return!1}if(i.type==="tuple"){for(const s of i.items)if(Ii(s,t))return!0;return!!(i.rest&&Ii(i.rest,t))}return!1}const pae=(n,e={})=>t=>{const i=LL({...t,processors:e});return yi(n,i),FL(i,n),zL(i,n)},cw=(n,e,t={})=>i=>{const{libraryOptions:s,target:r}=i??{},o=LL({...s??{},target:r,io:e,processors:t});return yi(n,o),FL(o,n),zL(o,n)},bae={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},wae=(n,e,t,i)=>{const s=t;s.type="string";const{minimum:r,maximum:o,format:a,patterns:c,contentEncoding:d}=n._zod.bag;if(typeof r=="number"&&(s.minLength=r),typeof o=="number"&&(s.maxLength=o),a&&(s.format=bae[a]??a,s.format===""&&delete s.format,a==="time"&&delete s.format),d&&(s.contentEncoding=d),c&&c.size>0){const h=[...c];h.length===1?s.pattern=h[0].source:h.length>1&&(s.allOf=[...h.map(m=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:m.source}))])}},vae=(n,e,t,i)=>{t.not={}},yae=(n,e,t,i)=>{},Aae=(n,e,t,i)=>{const s=n._zod.def,r=xL(s.entries);r.every(o=>typeof o=="number")&&(t.type="number"),r.every(o=>typeof o=="string")&&(t.type="string"),t.enum=r},_ae=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Cae=(n,e,t,i)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},xae=(n,e,t,i)=>{const s=t,r=n._zod.def,{minimum:o,maximum:a}=n._zod.bag;typeof o=="number"&&(s.minItems=o),typeof a=="number"&&(s.maxItems=a),s.type="array",s.items=yi(r.element,e,{...i,path:[...i.path,"items"]})},kae=(n,e,t,i)=>{const s=t,r=n._zod.def;s.type="object",s.properties={};const o=r.shape;for(const d in o)s.properties[d]=yi(o[d],e,{...i,path:[...i.path,"properties",d]});const a=new Set(Object.keys(o)),c=new Set([...a].filter(d=>{const h=r.shape[d]._zod;return e.io==="input"?h.optin===void 0:h.optout===void 0}));c.size>0&&(s.required=Array.from(c)),r.catchall?._zod.def.type==="never"?s.additionalProperties=!1:r.catchall?r.catchall&&(s.additionalProperties=yi(r.catchall,e,{...i,path:[...i.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},Eae=(n,e,t,i)=>{const s=n._zod.def,r=s.inclusive===!1,o=s.options.map((a,c)=>yi(a,e,{...i,path:[...i.path,r?"oneOf":"anyOf",c]}));r?t.oneOf=o:t.anyOf=o},Sae=(n,e,t,i)=>{const s=n._zod.def,r=yi(s.left,e,{...i,path:[...i.path,"allOf",0]}),o=yi(s.right,e,{...i,path:[...i.path,"allOf",1]}),a=d=>"allOf"in d&&Object.keys(d).length===1,c=[...a(r)?r.allOf:[r],...a(o)?o.allOf:[o]];t.allOf=c},Tae=(n,e,t,i)=>{const s=n._zod.def,r=yi(s.innerType,e,i),o=e.seen.get(n);e.target==="openapi-3.0"?(o.ref=s.innerType,t.nullable=!0):t.anyOf=[r,{type:"null"}]},Iae=(n,e,t,i)=>{const s=n._zod.def;yi(s.innerType,e,i);const r=e.seen.get(n);r.ref=s.innerType},Rae=(n,e,t,i)=>{const s=n._zod.def;yi(s.innerType,e,i);const r=e.seen.get(n);r.ref=s.innerType,t.default=JSON.parse(JSON.stringify(s.defaultValue))},Pae=(n,e,t,i)=>{const s=n._zod.def;yi(s.innerType,e,i);const r=e.seen.get(n);r.ref=s.innerType,e.io==="input"&&(t._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},Oae=(n,e,t,i)=>{const s=n._zod.def;yi(s.innerType,e,i);const r=e.seen.get(n);r.ref=s.innerType;let o;try{o=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}t.default=o},Dae=(n,e,t,i)=>{const s=n._zod.def,r=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;yi(r,e,i);const o=e.seen.get(n);o.ref=r},Mae=(n,e,t,i)=>{const s=n._zod.def;yi(s.innerType,e,i);const r=e.seen.get(n);r.ref=s.innerType,t.readOnly=!0},jL=(n,e,t,i)=>{const s=n._zod.def;yi(s.innerType,e,i);const r=e.seen.get(n);r.ref=s.innerType},Bae=ue("ZodISODateTime",(n,e)=>{Yre.init(n,e),wn.init(n,e)});function Nae(n){return qoe(Bae,n)}const Vae=ue("ZodISODate",(n,e)=>{Kre.init(n,e),wn.init(n,e)});function Lae(n){return Qoe(Vae,n)}const Fae=ue("ZodISOTime",(n,e)=>{qre.init(n,e),wn.init(n,e)});function zae(n){return Zoe(Fae,n)}const jae=ue("ZodISODuration",(n,e)=>{Qre.init(n,e),wn.init(n,e)});function Uae(n){return Joe(jae,n)}const Hae=(n,e)=>{sE.init(n,e),n.name="ZodError",Object.defineProperties(n,{format:{value:t=>Use(n,t)},flatten:{value:t=>jse(n,t)},addIssue:{value:t=>{n.issues.push(t),n.message=JSON.stringify(n.issues,sC,2)}},addIssues:{value:t=>{n.issues.push(...t),n.message=JSON.stringify(n.issues,sC,2)}},isEmpty:{get(){return n.issues.length===0}}})},nr=ue("ZodError",Hae,{Parent:Error}),Wae=Ov(nr),$ae=Dv(nr),Gae=Mv(nr),Yae=Bv(nr),Kae=Yse(nr),qae=Kse(nr),Qae=qse(nr),Zae=Qse(nr),Jae=Zse(nr),Xae=Jse(nr),ele=Xse(nr),tle=ere(nr),Xn=ue("ZodType",(n,e)=>(Jn.init(n,e),Object.assign(n["~standard"],{jsonSchema:{input:cw(n,"input"),output:cw(n,"output")}}),n.toJSONSchema=pae(n,{}),n.def=e,n.type=e.type,Object.defineProperty(n,"_def",{value:e}),n.check=(...t)=>n.clone(gl(e,{checks:[...e.checks??[],...t.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]}),{parent:!0}),n.with=n.check,n.clone=(t,i)=>pl(n,t,i),n.brand=()=>n,n.register=((t,i)=>(t.add(n,i),n)),n.parse=(t,i)=>Wae(n,t,i,{callee:n.parse}),n.safeParse=(t,i)=>Gae(n,t,i),n.parseAsync=async(t,i)=>$ae(n,t,i,{callee:n.parseAsync}),n.safeParseAsync=async(t,i)=>Yae(n,t,i),n.spa=n.safeParseAsync,n.encode=(t,i)=>Kae(n,t,i),n.decode=(t,i)=>qae(n,t,i),n.encodeAsync=async(t,i)=>Qae(n,t,i),n.decodeAsync=async(t,i)=>Zae(n,t,i),n.safeEncode=(t,i)=>Jae(n,t,i),n.safeDecode=(t,i)=>Xae(n,t,i),n.safeEncodeAsync=async(t,i)=>ele(n,t,i),n.safeDecodeAsync=async(t,i)=>tle(n,t,i),n.refine=(t,i)=>n.check(Yle(t,i)),n.superRefine=t=>n.check(Kle(t)),n.overwrite=t=>n.check(Fd(t)),n.optional=()=>_P(n),n.exactOptional=()=>Mle(n),n.nullable=()=>CP(n),n.nullish=()=>_P(CP(n)),n.nonoptional=t=>zle(n,t),n.array=()=>xle(n),n.or=t=>Sle([n,t]),n.and=t=>Ile(n,t),n.transform=t=>xP(n,Ole(t)),n.default=t=>Vle(n,t),n.prefault=t=>Fle(n,t),n.catch=t=>Ule(n,t),n.pipe=t=>xP(n,t),n.readonly=()=>$le(n),n.describe=t=>{const i=n.clone();return rh.add(i,{description:t}),i},Object.defineProperty(n,"description",{get(){return rh.get(n)?.description},configurable:!0}),n.meta=(...t)=>{if(t.length===0)return rh.get(n);const i=n.clone();return rh.add(i,t[0]),i},n.isOptional=()=>n.safeParse(void 0).success,n.isNullable=()=>n.safeParse(null).success,n.apply=t=>t(n),n)),UL=ue("_ZodString",(n,e)=>{rE.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(i,s,r)=>wae(n,i,s);const t=n._zod.bag;n.format=t.format??null,n.minLength=t.minimum??null,n.maxLength=t.maximum??null,n.regex=(...i)=>n.check(tae(...i)),n.includes=(...i)=>n.check(sae(...i)),n.startsWith=(...i)=>n.check(rae(...i)),n.endsWith=(...i)=>n.check(oae(...i)),n.min=(...i)=>n.check(lw(...i)),n.max=(...i)=>n.check(NL(...i)),n.length=(...i)=>n.check(VL(...i)),n.nonempty=(...i)=>n.check(lw(1,...i)),n.lowercase=i=>n.check(nae(i)),n.uppercase=i=>n.check(iae(i)),n.trim=()=>n.check(lae()),n.normalize=(...i)=>n.check(aae(...i)),n.toLowerCase=()=>n.check(cae()),n.toUpperCase=()=>n.check(uae()),n.slugify=()=>n.check(dae())}),nle=ue("ZodString",(n,e)=>{rE.init(n,e),UL.init(n,e),n.email=t=>n.check(Toe(ile,t)),n.url=t=>n.check(Doe(sle,t)),n.jwt=t=>n.check(Koe(vle,t)),n.emoji=t=>n.check(Moe(rle,t)),n.guid=t=>n.check(vP(yP,t)),n.uuid=t=>n.check(Ioe(Tp,t)),n.uuidv4=t=>n.check(Roe(Tp,t)),n.uuidv6=t=>n.check(Poe(Tp,t)),n.uuidv7=t=>n.check(Ooe(Tp,t)),n.nanoid=t=>n.check(Boe(ole,t)),n.guid=t=>n.check(vP(yP,t)),n.cuid=t=>n.check(Noe(ale,t)),n.cuid2=t=>n.check(Voe(lle,t)),n.ulid=t=>n.check(Loe(cle,t)),n.base64=t=>n.check($oe(ple,t)),n.base64url=t=>n.check(Goe(ble,t)),n.xid=t=>n.check(Foe(ule,t)),n.ksuid=t=>n.check(zoe(dle,t)),n.ipv4=t=>n.check(joe(fle,t)),n.ipv6=t=>n.check(Uoe(hle,t)),n.cidrv4=t=>n.check(Hoe(mle,t)),n.cidrv6=t=>n.check(Woe(gle,t)),n.e164=t=>n.check(Yoe(wle,t)),n.datetime=t=>n.check(Nae(t)),n.date=t=>n.check(Lae(t)),n.time=t=>n.check(zae(t)),n.duration=t=>n.check(Uae(t))});function pn(n){return Soe(nle,n)}const wn=ue("ZodStringFormat",(n,e)=>{an.init(n,e),UL.init(n,e)}),ile=ue("ZodEmail",(n,e)=>{Lre.init(n,e),wn.init(n,e)}),yP=ue("ZodGUID",(n,e)=>{Nre.init(n,e),wn.init(n,e)}),Tp=ue("ZodUUID",(n,e)=>{Vre.init(n,e),wn.init(n,e)}),sle=ue("ZodURL",(n,e)=>{Fre.init(n,e),wn.init(n,e)}),rle=ue("ZodEmoji",(n,e)=>{zre.init(n,e),wn.init(n,e)}),ole=ue("ZodNanoID",(n,e)=>{jre.init(n,e),wn.init(n,e)}),ale=ue("ZodCUID",(n,e)=>{Ure.init(n,e),wn.init(n,e)}),lle=ue("ZodCUID2",(n,e)=>{Hre.init(n,e),wn.init(n,e)}),cle=ue("ZodULID",(n,e)=>{Wre.init(n,e),wn.init(n,e)}),ule=ue("ZodXID",(n,e)=>{$re.init(n,e),wn.init(n,e)}),dle=ue("ZodKSUID",(n,e)=>{Gre.init(n,e),wn.init(n,e)}),fle=ue("ZodIPv4",(n,e)=>{Zre.init(n,e),wn.init(n,e)}),hle=ue("ZodIPv6",(n,e)=>{Jre.init(n,e),wn.init(n,e)}),mle=ue("ZodCIDRv4",(n,e)=>{Xre.init(n,e),wn.init(n,e)}),gle=ue("ZodCIDRv6",(n,e)=>{eoe.init(n,e),wn.init(n,e)}),ple=ue("ZodBase64",(n,e)=>{toe.init(n,e),wn.init(n,e)}),ble=ue("ZodBase64URL",(n,e)=>{ioe.init(n,e),wn.init(n,e)}),wle=ue("ZodE164",(n,e)=>{soe.init(n,e),wn.init(n,e)}),vle=ue("ZodJWT",(n,e)=>{ooe.init(n,e),wn.init(n,e)}),yle=ue("ZodUnknown",(n,e)=>{aoe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>yae()});function AP(){return Xoe(yle)}const Ale=ue("ZodNever",(n,e)=>{loe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>vae(n,t,i)});function _le(n){return eae(Ale,n)}const Cle=ue("ZodArray",(n,e)=>{coe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>xae(n,t,i,s),n.element=e.element,n.min=(t,i)=>n.check(lw(t,i)),n.nonempty=t=>n.check(lw(1,t)),n.max=(t,i)=>n.check(NL(t,i)),n.length=(t,i)=>n.check(VL(t,i)),n.unwrap=()=>n.element});function xle(n,e){return fae(Cle,n,e)}const kle=ue("ZodObject",(n,e)=>{doe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>kae(n,t,i,s),Pt(n,"shape",()=>e.shape),n.keyof=()=>Rle(Object.keys(n._zod.def.shape)),n.catchall=t=>n.clone({...n._zod.def,catchall:t}),n.passthrough=()=>n.clone({...n._zod.def,catchall:AP()}),n.loose=()=>n.clone({...n._zod.def,catchall:AP()}),n.strict=()=>n.clone({...n._zod.def,catchall:_le()}),n.strip=()=>n.clone({...n._zod.def,catchall:void 0}),n.extend=t=>Nse(n,t),n.safeExtend=t=>Vse(n,t),n.merge=t=>Lse(n,t),n.pick=t=>Mse(n,t),n.omit=t=>Bse(n,t),n.partial=(...t)=>Fse(HL,n,t[0]),n.required=(...t)=>zse(WL,n,t[0])});function bl(n,e){const t={type:"object",shape:n??{},...Ke(e)};return new kle(t)}const Ele=ue("ZodUnion",(n,e)=>{foe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>Eae(n,t,i,s),n.options=e.options});function Sle(n,e){return new Ele({type:"union",options:n,...Ke(e)})}const Tle=ue("ZodIntersection",(n,e)=>{hoe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>Sae(n,t,i,s)});function Ile(n,e){return new Tle({type:"intersection",left:n,right:e})}const oC=ue("ZodEnum",(n,e)=>{moe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(i,s,r)=>Aae(n,i,s),n.enum=e.entries,n.options=Object.values(e.entries);const t=new Set(Object.keys(e.entries));n.extract=(i,s)=>{const r={};for(const o of i)if(t.has(o))r[o]=e.entries[o];else throw new Error(`Key ${o} not found in enum`);return new oC({...e,checks:[],...Ke(s),entries:r})},n.exclude=(i,s)=>{const r={...e.entries};for(const o of i)if(t.has(o))delete r[o];else throw new Error(`Key ${o} not found in enum`);return new oC({...e,checks:[],...Ke(s),entries:r})}});function Rle(n,e){const t=Array.isArray(n)?Object.fromEntries(n.map(i=>[i,i])):n;return new oC({type:"enum",entries:t,...Ke(e)})}const Ple=ue("ZodTransform",(n,e)=>{goe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>Cae(n,t),n._zod.parse=(t,i)=>{if(i.direction==="backward")throw new _L(n.constructor.name);t.addIssue=r=>{if(typeof r=="string")t.issues.push($h(r,t.value,e));else{const o=r;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=t.value),o.inst??(o.inst=n),t.issues.push($h(o))}};const s=e.transform(t.value,t);return s instanceof Promise?s.then(r=>(t.value=r,t)):(t.value=s,t)}});function Ole(n){return new Ple({type:"transform",transform:n})}const HL=ue("ZodOptional",(n,e)=>{BL.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>jL(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function _P(n){return new HL({type:"optional",innerType:n})}const Dle=ue("ZodExactOptional",(n,e)=>{poe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>jL(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function Mle(n){return new Dle({type:"optional",innerType:n})}const Ble=ue("ZodNullable",(n,e)=>{boe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>Tae(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function CP(n){return new Ble({type:"nullable",innerType:n})}const Nle=ue("ZodDefault",(n,e)=>{woe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>Rae(n,t,i,s),n.unwrap=()=>n._zod.def.innerType,n.removeDefault=n.unwrap});function Vle(n,e){return new Nle({type:"default",innerType:n,get defaultValue(){return typeof e=="function"?e():EL(e)}})}const Lle=ue("ZodPrefault",(n,e)=>{voe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>Pae(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function Fle(n,e){return new Lle({type:"prefault",innerType:n,get defaultValue(){return typeof e=="function"?e():EL(e)}})}const WL=ue("ZodNonOptional",(n,e)=>{yoe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>Iae(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function zle(n,e){return new WL({type:"nonoptional",innerType:n,...Ke(e)})}const jle=ue("ZodCatch",(n,e)=>{Aoe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>Oae(n,t,i,s),n.unwrap=()=>n._zod.def.innerType,n.removeCatch=n.unwrap});function Ule(n,e){return new jle({type:"catch",innerType:n,catchValue:typeof e=="function"?e:()=>e})}const Hle=ue("ZodPipe",(n,e)=>{_oe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>Dae(n,t,i,s),n.in=e.in,n.out=e.out});function xP(n,e){return new Hle({type:"pipe",in:n,out:e})}const Wle=ue("ZodReadonly",(n,e)=>{Coe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>Mae(n,t,i,s),n.unwrap=()=>n._zod.def.innerType});function $le(n){return new Wle({type:"readonly",innerType:n})}const Gle=ue("ZodCustom",(n,e)=>{xoe.init(n,e),Xn.init(n,e),n._zod.processJSONSchema=(t,i,s)=>_ae(n,t)});function Yle(n,e={}){return hae(Gle,n,e)}function Kle(n){return mae(n)}const kP=(n,e,t)=>{if(n&&"reportValidity"in n){const i=Ce(t,e);n.setCustomValidity(i&&i.message||""),n.reportValidity()}},aC=(n,e)=>{for(const t in e.fields){const i=e.fields[t];i&&i.ref&&"reportValidity"in i.ref?kP(i.ref,t,n):i&&i.refs&&i.refs.forEach(s=>kP(s,t,n))}},EP=(n,e)=>{e.shouldUseNativeValidation&&aC(n,e);const t={};for(const i in n){const s=Ce(e.fields,i),r=Object.assign(n[i]||{},{ref:s&&s.ref});if(qle(e.names||Object.keys(n),i)){const o=Object.assign({},Ce(t,i));Rt(o,"root",r),Rt(t,i,o)}else Rt(t,i,r)}return t},qle=(n,e)=>{const t=SP(e);return n.some(i=>SP(i).match(`^${t}\\.\\d+`))};function SP(n){return n.replace(/\]|\[/g,"")}function TP(n,e){try{var t=n()}catch(i){return e(i)}return t&&t.then?t.then(void 0,e):t}function Qle(n,e){for(var t={};n.length;){var i=n[0],s=i.code,r=i.message,o=i.path.join(".");if(!t[o])if("unionErrors"in i){var a=i.unionErrors[0].errors[0];t[o]={message:a.message,type:a.code}}else t[o]={message:r,type:s};if("unionErrors"in i&&i.unionErrors.forEach(function(h){return h.errors.forEach(function(m){return n.push(m)})}),e){var c=t[o].types,d=c&&c[i.code];t[o]=Qk(o,e,t,s,d?[].concat(d,i.message):i.message)}n.shift()}return t}function Zle(n,e){for(var t={};n.length;){var i=n[0],s=i.code,r=i.message,o=i.path.join(".");if(!t[o])if(i.code==="invalid_union"&&i.errors.length>0){var a=i.errors[0][0];t[o]={message:a.message,type:a.code}}else t[o]={message:r,type:s};if(i.code==="invalid_union"&&i.errors.forEach(function(h){return h.forEach(function(m){return n.push(m)})}),e){var c=t[o].types,d=c&&c[i.code];t[o]=Qk(o,e,t,s,d?[].concat(d,i.message):i.message)}n.shift()}return t}function wl(n,e,t){if(t===void 0&&(t={}),(function(i){return"_def"in i&&typeof i._def=="object"&&"typeName"in i._def})(n))return function(i,s,r){try{return Promise.resolve(TP(function(){return Promise.resolve(n[t.mode==="sync"?"parse":"parseAsync"](i,e)).then(function(o){return r.shouldUseNativeValidation&&aC({},r),{errors:{},values:t.raw?Object.assign({},i):o}})},function(o){if((function(a){return Array.isArray(a?.issues)})(o))return{values:{},errors:EP(Qle(o.errors,!r.shouldUseNativeValidation&&r.criteriaMode==="all"),r)};throw o}))}catch(o){return Promise.reject(o)}};if((function(i){return"_zod"in i&&typeof i._zod=="object"})(n))return function(i,s,r){try{return Promise.resolve(TP(function(){return Promise.resolve((t.mode==="sync"?Hse:Wse)(n,i,e)).then(function(o){return r.shouldUseNativeValidation&&aC({},r),{errors:{},values:t.raw?Object.assign({},i):o}})},function(o){if((function(a){return a instanceof sE})(o))return{values:{},errors:EP(Zle(o.issues,!r.shouldUseNativeValidation&&r.criteriaMode==="all"),r)};throw o}))}catch(o){return Promise.reject(o)}};throw new Error("Invalid input: not a Zod schema")}const Jle=bl({name:pn().min(3,"Name must be at least 3 characters long."),email:pn().email("Invalid email address."),password:pn().min(8,"Password must be at least 8 characters long."),confirmPassword:pn()}).refine(n=>n.password===n.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),Xle=()=>{const n=ma(),[e,t]=_.useState(!1),i=hl({resolver:wl(Jle),defaultValues:{name:"",email:"",password:"",confirmPassword:""}});async function s(r){t(!0);try{const o=await fetch(`${Et("VITE_API_BASE_URL")}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.name,email:r.email,password:r.password})}),a=await o.json();o.ok||console.log("okay response"),console.log("success",a.message),n(ac)}catch{console.log("error")}finally{t(!1)}}return v.jsx("div",{className:"flex justify-center items-center h-screen w-screen",children:v.jsxs(Xs,{className:"w-[400px] p-5 shadow-lg",children:[v.jsx("h1",{className:"text-2xl font-bold text-center mb-5",children:"Create Your Account"}),v.jsx("div",{children:v.jsxs("div",{className:"relative my-8",children:[v.jsx("div",{className:"absolute inset-0 flex items-center",children:v.jsx("span",{className:"w-full border-t"})}),v.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:v.jsx("span",{className:"bg-white px-2 text-muted-foreground",children:"Or continue with"})})]})}),v.jsx(ml,{...i,children:v.jsxs("form",{onSubmit:i.handleSubmit(s),className:"space-y-4",children:[v.jsx(dn,{control:i.control,name:"name",render:({field:r})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Name"}),v.jsx(mn,{children:v.jsx(oi,{placeholder:"John Doe",...r})}),v.jsx(gn,{})]})}),v.jsx(dn,{control:i.control,name:"email",render:({field:r})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Email"}),v.jsx(mn,{children:v.jsx(oi,{placeholder:"example@email.com",...r})}),v.jsx(gn,{})]})}),v.jsx(dn,{control:i.control,name:"password",render:({field:r})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Password"}),v.jsx(mn,{children:v.jsx(oi,{type:"password",placeholder:"",...r})}),v.jsx(gn,{})]})}),v.jsx(dn,{control:i.control,name:"confirmPassword",render:({field:r})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Confirm Password"}),v.jsx(mn,{children:v.jsx(oi,{type:"password",placeholder:"",...r})}),v.jsx(gn,{})]})}),v.jsx(ai,{type:"submit",className:"w-full mt-6",disabled:e,children:e?"Creating Account...":"Sign Up"}),v.jsxs("div",{className:"mt-5 text-sm flex justify-center items-center gap-2",children:[v.jsx("p",{className:"text-muted-foreground",children:"Already have an account?"}),v.jsx(_n,{className:"text-primary font-semibold hover:underline",to:ac,children:"Sign In"})]})]})})]})})},ece=bl({email:pn().email("Please enter a valid email address."),password:pn().min(1,"Password is required.")}),tce=()=>{const n=gx(),e=ma(),[t,i]=_.useState(!1),s=hl({resolver:wl(ece),defaultValues:{email:"",password:""}});async function r(o){i(!0);try{const a=await fetch(`${Et("VITE_API_BASE_URL")}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)}),c=await a.json();if(!a.ok)return console.log("error",c.message||"Login failed.");n(v3(c.user)),console.log("success",c.message),e(md)}catch(a){console.log("error",a.message||"Something went wrong.")}finally{i(!1)}}return v.jsx("div",{className:"flex justify-center items-center h-screen w-screen",children:v.jsxs(Xs,{className:"w-[400px] p-5 shadow-lg",children:[v.jsx("div",{className:"flex justify-center items-center mb-2",children:v.jsx(_n,{to:md,children:v.jsx("img",{src:sk,alt:"Logo",className:"h-12 w-auto"})})}),v.jsx("h1",{className:"text-2xl font-bold text-center mb-5",children:"Login Into Account"}),v.jsx("div",{className:"mb-6",children:v.jsxs("div",{className:"relative my-6",children:[v.jsx("div",{className:"absolute inset-0 flex items-center",children:v.jsx("span",{className:"w-full border-t"})}),v.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:v.jsx("span",{className:"bg-white px-2 text-muted-foreground",children:"Or continue with"})})]})}),v.jsx(ml,{...s,children:v.jsxs("form",{onSubmit:s.handleSubmit(r),className:"space-y-4",children:[v.jsx(dn,{control:s.control,name:"email",render:({field:o})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Email"}),v.jsx(mn,{children:v.jsx(oi,{placeholder:"example@email.com",...o})}),v.jsx(gn,{})]})}),v.jsx(dn,{control:s.control,name:"password",render:({field:o})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Password"}),v.jsx(mn,{children:v.jsx(oi,{type:"password",placeholder:"",...o})}),v.jsx(gn,{})]})}),v.jsxs("div",{className:"pt-2",children:[v.jsx(ai,{type:"submit",className:"w-full",disabled:t,children:t?"Signing in...":"Sign In"}),v.jsxs("div",{className:"mt-5 text-sm flex justify-center items-center gap-2",children:[v.jsx("p",{className:"text-muted-foreground",children:"Don't have an account?"}),v.jsx(_n,{className:"text-primary font-semibold hover:underline",to:hN,children:"Sign Up"})]})]})]})})]})})};function $L({className:n,...e}){return v.jsx("textarea",{"data-slot":"textarea",className:Ye("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),...e})}var g_={exports:{}},p_,IP;function nce(){if(IP)return p_;IP=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return p_=n,p_}var b_,RP;function ice(){if(RP)return b_;RP=1;var n=nce();function e(){}function t(){}return t.resetWarningCache=e,b_=function(){function i(o,a,c,d,h,m){if(m!==n){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}i.isRequired=i;function s(){return i}var r={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return r.PropTypes=r,r},b_}var PP;function sce(){return PP||(PP=1,g_.exports=ice()()),g_.exports}var rce=sce();const jt=bc(rce),oce=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function pd(n,e,t){const i=ace(n),{webkitRelativePath:s}=n,r=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${n.name}`;return typeof i.path!="string"&&OP(i,"path",r),OP(i,"relativePath",r),i}function ace(n){const{name:e}=n;if(e&&e.lastIndexOf(".")!==-1&&!n.type){const i=e.split(".").pop().toLowerCase(),s=oce.get(i);s&&Object.defineProperty(n,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return n}function OP(n,e,t){Object.defineProperty(n,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const lce=[".DS_Store","Thumbs.db"];function cce(n){return wc(this,void 0,void 0,function*(){return uw(n)&&uce(n.dataTransfer)?mce(n.dataTransfer,n.type):dce(n)?fce(n):Array.isArray(n)&&n.every(e=>"getFile"in e&&typeof e.getFile=="function")?hce(n):[]})}function uce(n){return uw(n)}function dce(n){return uw(n)&&uw(n.target)}function uw(n){return typeof n=="object"&&n!==null}function fce(n){return lC(n.target.files).map(e=>pd(e))}function hce(n){return wc(this,void 0,void 0,function*(){return(yield Promise.all(n.map(t=>t.getFile()))).map(t=>pd(t))})}function mce(n,e){return wc(this,void 0,void 0,function*(){if(n.items){const t=lC(n.items).filter(s=>s.kind==="file");if(e!=="drop")return t;const i=yield Promise.all(t.map(gce));return DP(GL(i))}return DP(lC(n.files).map(t=>pd(t)))})}function DP(n){return n.filter(e=>lce.indexOf(e.name)===-1)}function lC(n){if(n===null)return[];const e=[];for(let t=0;t<n.length;t++){const i=n[t];e.push(i)}return e}function gce(n){if(typeof n.webkitGetAsEntry!="function")return MP(n);const e=n.webkitGetAsEntry();return e&&e.isDirectory?YL(e):MP(n,e)}function GL(n){return n.reduce((e,t)=>[...e,...Array.isArray(t)?GL(t):[t]],[])}function MP(n,e){return wc(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof n.getAsFileSystemHandle=="function"){const r=yield n.getAsFileSystemHandle();if(r===null)throw new Error(`${n} is not a File`);if(r!==void 0){const o=yield r.getFile();return o.handle=r,pd(o)}}const i=n.getAsFile();if(!i)throw new Error(`${n} is not a File`);return pd(i,(t=e?.fullPath)!==null&&t!==void 0?t:void 0)})}function pce(n){return wc(this,void 0,void 0,function*(){return n.isDirectory?YL(n):bce(n)})}function YL(n){const e=n.createReader();return new Promise((t,i)=>{const s=[];function r(){e.readEntries(o=>wc(this,void 0,void 0,function*(){if(o.length){const a=Promise.all(o.map(pce));s.push(a),r()}else try{const a=yield Promise.all(s);t(a)}catch(a){i(a)}}),o=>{i(o)})}r()})}function bce(n){return wc(this,void 0,void 0,function*(){return new Promise((e,t)=>{n.file(i=>{const s=pd(i,n.fullPath);e(s)},i=>{t(i)})})})}var Ip={},BP;function wce(){return BP||(BP=1,Ip.__esModule=!0,Ip.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var i=n.name||"",s=(n.type||"").toLowerCase(),r=s.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?i.toLowerCase().endsWith(a):a.endsWith("/*")?r===a.replace(/\/.*$/,""):s===a})}return!0}),Ip}var vce=wce();const w_=bc(vce);function NP(n){return _ce(n)||Ace(n)||qL(n)||yce()}function yce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ace(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _ce(n){if(Array.isArray(n))return cC(n)}function VP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function LP(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VP(Object(t),!0).forEach(function(i){KL(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):VP(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function KL(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Gh(n,e){return kce(n)||xce(n,e)||qL(n,e)||Cce()}function Cce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qL(n,e){if(n){if(typeof n=="string")return cC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return cC(n,e)}}function cC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function xce(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],s=!0,r=!1,o,a;try{for(t=t.call(n);!(s=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));s=!0);}catch(c){r=!0,a=c}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw a}}return i}}function kce(n){if(Array.isArray(n))return n}var Ece=typeof w_=="function"?w_:w_.default,Sce="file-invalid-type",Tce="file-too-large",Ice="file-too-small",Rce="too-many-files",Pce=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),i=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:Sce,message:"File type must be ".concat(i)}},FP=function(e){return{code:Tce,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},zP=function(e){return{code:Ice,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},Oce={code:Rce,message:"Too many files"};function QL(n,e){var t=n.type==="application/x-moz-file"||Ece(n,e);return[t,t?null:Pce(e)]}function ZL(n,e,t){if(ql(n.size))if(ql(e)&&ql(t)){if(n.size>t)return[!1,FP(t)];if(n.size<e)return[!1,zP(e)]}else{if(ql(e)&&n.size<e)return[!1,zP(e)];if(ql(t)&&n.size>t)return[!1,FP(t)]}return[!0,null]}function ql(n){return n!=null}function Dce(n){var e=n.files,t=n.accept,i=n.minSize,s=n.maxSize,r=n.multiple,o=n.maxFiles,a=n.validator;return!r&&e.length>1||r&&o>=1&&e.length>o?!1:e.every(function(c){var d=QL(c,t),h=Gh(d,1),m=h[0],p=ZL(c,i,s),w=Gh(p,1),A=w[0],C=a?a(c):null;return m&&A&&!C})}function dw(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function Rp(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function jP(n){n.preventDefault()}function Mce(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function Bce(n){return n.indexOf("Edge/")!==-1}function Nce(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Mce(n)||Bce(n)}function zr(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var s=arguments.length,r=new Array(s>1?s-1:0),o=1;o<s;o++)r[o-1]=arguments[o];return e.some(function(a){return!dw(i)&&a&&a.apply(void 0,[i].concat(r)),dw(i)})}}function Vce(){return"showOpenFilePicker"in window}function Lce(n){if(ql(n)){var e=Object.entries(n).filter(function(t){var i=Gh(t,2),s=i[0],r=i[1],o=!0;return JL(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(r)||!r.every(XL))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(t,i){var s=Gh(i,2),r=s[0],o=s[1];return LP(LP({},t),{},KL({},r,o))},{});return[{description:"Files",accept:e}]}return n}function Fce(n){if(ql(n))return Object.entries(n).reduce(function(e,t){var i=Gh(t,2),s=i[0],r=i[1];return[].concat(NP(e),[s],NP(r))},[]).filter(function(e){return JL(e)||XL(e)}).join(",")}function zce(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function jce(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function JL(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||n==="application/*"||/\w+\/[-+.\w]+/g.test(n)}function XL(n){return/^.*\.[\w]+$/.test(n)}var Uce=["children"],Hce=["open"],Wce=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],$ce=["refKey","onChange","onClick"];function Gce(n){return qce(n)||Kce(n)||eF(n)||Yce()}function Yce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kce(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function qce(n){if(Array.isArray(n))return uC(n)}function v_(n,e){return Jce(n)||Zce(n,e)||eF(n,e)||Qce()}function Qce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eF(n,e){if(n){if(typeof n=="string")return uC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return uC(n,e)}}function uC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Zce(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],s=!0,r=!1,o,a;try{for(t=t.call(n);!(s=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));s=!0);}catch(c){r=!0,a=c}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw a}}return i}}function Jce(n){if(Array.isArray(n))return n}function UP(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function ln(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?UP(Object(t),!0).forEach(function(i){dC(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):UP(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function dC(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fw(n,e){if(n==null)return{};var t=Xce(n,e),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Xce(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var zd=_.forwardRef(function(n,e){var t=n.children,i=fw(n,Uce),s=eue(i),r=s.open,o=fw(s,Hce);return _.useImperativeHandle(e,function(){return{open:r}},[r]),Ee.createElement(_.Fragment,null,t(ln(ln({},o),{},{open:r})))});zd.displayName="Dropzone";var tF={disabled:!1,getFilesFromEvent:cce,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};zd.defaultProps=tF;zd.propTypes={children:jt.func,accept:jt.objectOf(jt.arrayOf(jt.string)),multiple:jt.bool,preventDropOnDocument:jt.bool,noClick:jt.bool,noKeyboard:jt.bool,noDrag:jt.bool,noDragEventsBubbling:jt.bool,minSize:jt.number,maxSize:jt.number,maxFiles:jt.number,disabled:jt.bool,getFilesFromEvent:jt.func,onFileDialogCancel:jt.func,onFileDialogOpen:jt.func,useFsAccessApi:jt.bool,autoFocus:jt.bool,onDragEnter:jt.func,onDragLeave:jt.func,onDragOver:jt.func,onDrop:jt.func,onDropAccepted:jt.func,onDropRejected:jt.func,onError:jt.func,validator:jt.func};var fC={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function eue(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ln(ln({},tF),n),t=e.accept,i=e.disabled,s=e.getFilesFromEvent,r=e.maxSize,o=e.minSize,a=e.multiple,c=e.maxFiles,d=e.onDragEnter,h=e.onDragLeave,m=e.onDragOver,p=e.onDrop,w=e.onDropAccepted,A=e.onDropRejected,C=e.onFileDialogCancel,k=e.onFileDialogOpen,E=e.useFsAccessApi,S=e.autoFocus,I=e.preventDropOnDocument,R=e.noClick,O=e.noKeyboard,U=e.noDrag,P=e.noDragEventsBubbling,V=e.onError,H=e.validator,ie=_.useMemo(function(){return Fce(t)},[t]),ke=_.useMemo(function(){return Lce(t)},[t]),de=_.useMemo(function(){return typeof k=="function"?k:HP},[k]),ve=_.useMemo(function(){return typeof C=="function"?C:HP},[C]),be=_.useRef(null),Ae=_.useRef(null),F=_.useReducer(tue,fC),X=v_(F,2),$=X[0],re=X[1],Ve=$.isFocused,B=$.isFileDialogActive,J=_.useRef(typeof window<"u"&&window.isSecureContext&&E&&Vce()),fe=function(){!J.current&&B&&setTimeout(function(){if(Ae.current){var ee=Ae.current.files;ee.length||(re({type:"closeDialog"}),ve())}},300)};_.useEffect(function(){return window.addEventListener("focus",fe,!1),function(){window.removeEventListener("focus",fe,!1)}},[Ae,B,ve,J]);var he=_.useRef([]),Me=function(ee){be.current&&be.current.contains(ee.target)||(ee.preventDefault(),he.current=[])};_.useEffect(function(){return I&&(document.addEventListener("dragover",jP,!1),document.addEventListener("drop",Me,!1)),function(){I&&(document.removeEventListener("dragover",jP),document.removeEventListener("drop",Me))}},[be,I]),_.useEffect(function(){return!i&&S&&be.current&&be.current.focus(),function(){}},[be,S,i]);var Ie=_.useCallback(function(K){V?V(K):console.error(K)},[V]),oe=_.useCallback(function(K){K.preventDefault(),K.persist(),rr(K),he.current=[].concat(Gce(he.current),[K.target]),Rp(K)&&Promise.resolve(s(K)).then(function(ee){if(!(dw(K)&&!P)){var ce=ee.length,_e=ce>0&&Dce({files:ee,accept:ie,minSize:o,maxSize:r,multiple:a,maxFiles:c,validator:H}),Ge=ce>0&&!_e;re({isDragAccept:_e,isDragReject:Ge,isDragActive:!0,type:"setDraggedFiles"}),d&&d(K)}}).catch(function(ee){return Ie(ee)})},[s,d,Ie,P,ie,o,r,a,c,H]),Ue=_.useCallback(function(K){K.preventDefault(),K.persist(),rr(K);var ee=Rp(K);if(ee&&K.dataTransfer)try{K.dataTransfer.dropEffect="copy"}catch{}return ee&&m&&m(K),!1},[m,P]),$e=_.useCallback(function(K){K.preventDefault(),K.persist(),rr(K);var ee=he.current.filter(function(_e){return be.current&&be.current.contains(_e)}),ce=ee.indexOf(K.target);ce!==-1&&ee.splice(ce,1),he.current=ee,!(ee.length>0)&&(re({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Rp(K)&&h&&h(K))},[be,h,P]),qe=_.useCallback(function(K,ee){var ce=[],_e=[];K.forEach(function(Ge){var st=QL(Ge,ie),$t=v_(st,2),ds=$t[0],Gi=$t[1],or=ZL(Ge,o,r),vn=v_(or,2),_i=vn[0],$n=vn[1],_a=H?H(Ge):null;if(ds&&_i&&!_a)ce.push(Ge);else{var xl=[Gi,$n];_a&&(xl=xl.concat(_a)),_e.push({file:Ge,errors:xl.filter(function(Mc){return Mc})})}}),(!a&&ce.length>1||a&&c>=1&&ce.length>c)&&(ce.forEach(function(Ge){_e.push({file:Ge,errors:[Oce]})}),ce.splice(0)),re({acceptedFiles:ce,fileRejections:_e,isDragReject:_e.length>0,type:"setFiles"}),p&&p(ce,_e,ee),_e.length>0&&A&&A(_e,ee),ce.length>0&&w&&w(ce,ee)},[re,a,ie,o,r,c,p,w,A,H]),Ze=_.useCallback(function(K){K.preventDefault(),K.persist(),rr(K),he.current=[],Rp(K)&&Promise.resolve(s(K)).then(function(ee){dw(K)&&!P||qe(ee,K)}).catch(function(ee){return Ie(ee)}),re({type:"reset"})},[s,qe,Ie,P]),it=_.useCallback(function(){if(J.current){re({type:"openDialog"}),de();var K={multiple:a,types:ke};window.showOpenFilePicker(K).then(function(ee){return s(ee)}).then(function(ee){qe(ee,null),re({type:"closeDialog"})}).catch(function(ee){zce(ee)?(ve(ee),re({type:"closeDialog"})):jce(ee)?(J.current=!1,Ae.current?(Ae.current.value=null,Ae.current.click()):Ie(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Ie(ee)});return}Ae.current&&(re({type:"openDialog"}),de(),Ae.current.value=null,Ae.current.click())},[re,de,ve,E,qe,Ie,ke,a]),kn=_.useCallback(function(K){!be.current||!be.current.isEqualNode(K.target)||(K.key===" "||K.key==="Enter"||K.keyCode===32||K.keyCode===13)&&(K.preventDefault(),it())},[be,it]),On=_.useCallback(function(){re({type:"focus"})},[]),cs=_.useCallback(function(){re({type:"blur"})},[]),us=_.useCallback(function(){R||(Nce()?setTimeout(it,0):it())},[R,it]),$i=function(ee){return i?null:ee},Aa=function(ee){return O?null:$i(ee)},go=function(ee){return U?null:$i(ee)},rr=function(ee){P&&ee.stopPropagation()},N=_.useMemo(function(){return function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee=K.refKey,ce=ee===void 0?"ref":ee,_e=K.role,Ge=K.onKeyDown,st=K.onFocus,$t=K.onBlur,ds=K.onClick,Gi=K.onDragEnter,or=K.onDragOver,vn=K.onDragLeave,_i=K.onDrop,$n=fw(K,Wce);return ln(ln(dC({onKeyDown:Aa(zr(Ge,kn)),onFocus:Aa(zr(st,On)),onBlur:Aa(zr($t,cs)),onClick:$i(zr(ds,us)),onDragEnter:go(zr(Gi,oe)),onDragOver:go(zr(or,Ue)),onDragLeave:go(zr(vn,$e)),onDrop:go(zr(_i,Ze)),role:typeof _e=="string"&&_e!==""?_e:"presentation"},ce,be),!i&&!O?{tabIndex:0}:{}),$n)}},[be,kn,On,cs,us,oe,Ue,$e,Ze,O,U,i]),G=_.useCallback(function(K){K.stopPropagation()},[]),te=_.useMemo(function(){return function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ee=K.refKey,ce=ee===void 0?"ref":ee,_e=K.onChange,Ge=K.onClick,st=fw(K,$ce),$t=dC({accept:ie,multiple:a,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:$i(zr(_e,Ze)),onClick:$i(zr(Ge,G)),tabIndex:-1},ce,Ae);return ln(ln({},$t),st)}},[Ae,t,a,Ze,i]);return ln(ln({},$),{},{isFocused:Ve&&!i,getRootProps:N,getInputProps:te,rootRef:be,inputRef:Ae,open:$i(it)})}function tue(n,e){switch(e.type){case"focus":return ln(ln({},n),{},{isFocused:!0});case"blur":return ln(ln({},n),{},{isFocused:!1});case"openDialog":return ln(ln({},fC),{},{isFileDialogActive:!0});case"closeDialog":return ln(ln({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return ln(ln({},n),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return ln(ln({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return ln({},fC);default:return n}}function HP(){}const nue=bl({name:pn().min(3,"Name must be at least 3 characters long."),email:pn().email("Please enter a valid email address."),bio:pn().min(3,"Bio must be at least 3 characters long."),password:pn().optional()}),iue=()=>{const[n,e]=_.useState(),[t,i]=_.useState(),s=dl(m=>m.user),r=gx(),{data:o,loading:a}=vi(`${Et("VITE_API_BASE_URL")}/user/get-user/${s.user.id}`,{method:"get",credentials:"include"}),c=hl({resolver:wl(nue),defaultValues:{name:"",email:"",bio:"",password:""}});_.useEffect(()=>{o?.success&&c.reset({name:o.user.name,email:o.user.email,bio:o.user.bio,password:""})},[o,c]);async function d(m){try{const p=new FormData;t&&p.append("file",t);const w={...m};w.password||delete w.password,p.append("data",JSON.stringify(w));const A=await fetch(`${Et("VITE_API_BASE_URL")}/user/update-user/${o?.user.id}`,{method:"put",credentials:"include",body:p}),C=await A.json();if(!A.ok)return bt("error",C.message);r(v3(C.user)),bt("success",C.message)}catch(p){bt("error",p.message||"Something went wrong")}}const h=m=>{const p=m[0];if(p){const w=URL.createObjectURL(p);i(p),e(w)}};return a?v.jsx(fo,{}):v.jsx(Xs,{className:"max-w-screen-md mx-auto my-10",children:v.jsxs(lo,{children:[v.jsxs("div",{className:"flex flex-col justify-center items-center mt-10 gap-4",children:[v.jsx(zd,{onDrop:h,multiple:!1,accept:{"image/*":[]},children:({getRootProps:m,getInputProps:p})=>v.jsxs("div",{...m(),className:"cursor-pointer",children:[v.jsx("input",{...p()}),v.jsxs(lc,{className:"w-28 h-28 relative group border-2 border-muted",children:[v.jsx(gd,{src:n||o?.user?.avatar,className:"object-cover"}),v.jsx("div",{className:"absolute inset-0 z-10 flex justify-center items-center bg-black/40 group-hover:opacity-100 opacity-0 transition-opacity rounded-full",children:v.jsx(fZ,{size:30,color:"white"})})]})]})}),v.jsx("p",{className:"text-sm text-muted-foreground",children:"Click the avatar to change your photo"})]}),v.jsx("div",{className:"mt-8",children:v.jsx(ml,{...c,children:v.jsxs("form",{onSubmit:c.handleSubmit(d),className:"space-y-4",children:[v.jsx(dn,{control:c.control,name:"name",render:({field:m})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Name"}),v.jsx(mn,{children:v.jsx(oi,{placeholder:"Enter your name",...m})}),v.jsx(gn,{})]})}),v.jsx(dn,{control:c.control,name:"email",render:({field:m})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Email"}),v.jsx(mn,{children:v.jsx(oi,{placeholder:"Enter your email address",...m})}),v.jsx(gn,{})]})}),v.jsx(dn,{control:c.control,name:"bio",render:({field:m})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Bio"}),v.jsx(mn,{children:v.jsx($L,{placeholder:"Tell us about yourself",...m})}),v.jsx(gn,{})]})}),v.jsx(dn,{control:c.control,name:"password",render:({field:m})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"New Password (leave blank to keep current)"}),v.jsx(mn,{children:v.jsx(oi,{type:"password",placeholder:"",...m})}),v.jsx(gn,{})]})}),v.jsx(ai,{type:"submit",className:"w-full",children:"Save Changes"})]})})})]})})};var wb={exports:{}},sue=wb.exports,WP;function rue(){return WP||(WP=1,(function(n,e){(function(t,i,s){n.exports=s(),n.exports.default=s()})("slugify",sue,function(){var t=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","":"cent","":"pound","":"currency","":"yen","":"(c)","":"a","":"(r)","":"o","":"A","":"A","":"A","":"A","":"A","":"A","":"AE","":"C","":"E","":"E","":"E","":"E","":"I","":"I","":"I","":"I","":"D","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"U","":"U","":"U","":"U","":"Y","":"TH","":"ss","":"a","":"a","":"a","":"a","":"a","":"a","":"ae","":"c","":"e","":"e","":"e","":"e","":"i","":"i","":"i","":"i","":"d","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"u","":"u","":"u","":"u","":"y","":"th","":"y","":"A","":"a","":"A","":"a","":"A","":"a","":"C","":"c","":"C","":"c","":"D","":"d","":"DJ","":"dj","":"E","":"e","":"E","":"e","":"e","":"e","":"E","":"e","":"G","":"g","":"G","":"g","":"I","":"i","":"i","":"i","":"I","":"i","":"I","":"i","":"k","":"k","":"L","":"l","":"L","":"l","":"L","":"l","":"N","":"n","":"N","":"n","":"N","":"n","":"O","":"o","":"O","":"o","":"OE","":"oe","":"R","":"r","":"R","":"r","":"S","":"s","":"S","":"s","":"S","":"s","":"T","":"t","":"T","":"t","":"U","":"u","":"u","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"z","":"Z","":"z","":"Z","":"z","":"E","":"f","":"O","":"o","":"U","":"u","":"LJ","":"lj","":"NJ","":"nj","":"S","":"s","":"T","":"t","":"e","":"o","":"A","":"E","":"H","":"I","":"O","":"Y","":"W","":"i","":"A","":"B","":"G","":"D","":"E","":"Z","":"H","":"8","":"I","":"K","":"L","":"M","":"N","":"3","":"O","":"P","":"R","":"S","":"T","":"Y","":"F","":"X","":"PS","":"W","":"I","":"Y","":"a","":"e","":"h","":"i","":"y","":"a","":"b","":"g","":"d","":"e","":"z","":"h","":"8","":"i","":"k","":"l","":"m","":"n","":"3","":"o","":"p","":"r","":"s","":"s","":"t","":"y","":"f","":"x","":"ps","":"w","":"i","":"y","":"o","":"y","":"w","":"Yo","":"DJ","":"Ye","":"I","":"Yi","":"J","":"LJ","":"NJ","":"C","":"DZ","":"A","":"B","":"V","":"G","":"D","":"E","":"Zh","":"Z","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"S","":"T","":"U","":"F","":"H","":"C","":"Ch","":"Sh","":"Sh","":"U","":"Y","":"","":"E","":"Yu","":"Ya","":"a","":"b","":"v","":"g","":"d","":"e","":"zh","":"z","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"f","":"h","":"c","":"ch","":"sh","":"sh","":"u","":"y","":"","":"e","":"yu","":"ya","":"yo","":"dj","":"ye","":"i","":"yi","":"j","":"lj","":"nj","":"c","":"u","":"dz","":"G","":"g","":"GH","":"gh","":"KH","":"kh","":"NG","":"ng","":"UE","":"ue","":"U","":"u","":"H","":"h","":"AE","":"ae","":"OE","":"oe","":"A","":"B","":"G","":"D","":"E","":"Z","":"E'","":"Y'","":"T'","":"JH","":"I","":"L","":"X","":"C'","":"K","":"H","":"D'","":"GH","":"TW","":"M","":"Y","":"N","":"SH","":"CH","":"P","":"J","":"R'","":"S","":"V","":"T","":"R","":"C","":"P'","":"Q'","":"O''","":"F","":"EV","":"a","":"aa","":"a","":"u","":"i","":"e","":"a","":"b","":"h","":"t","":"th","":"j","":"h","":"kh","":"d","":"th","":"r","":"z","":"s","":"sh","":"s","":"dh","":"t","":"z","":"a","":"gh","":"f","":"q","":"k","":"l","":"m","":"n","":"h","":"w","":"a","":"y","":"an","":"on","":"en","":"a","":"u","":"e","":"","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"p","":"ch","":"zh","":"k","":"g","":"y","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"baht","":"a","":"b","":"g","":"d","":"e","":"v","":"z","":"t","":"i","":"k","":"l","":"m","":"n","":"o","":"p","":"zh","":"r","":"s","":"t","":"u","":"f","":"k","":"gh","":"q","":"sh","":"ch","":"ts","":"dz","":"ts","":"ch","":"kh","":"j","":"h","":"S","":"s","":"W","":"w","":"W","":"w","":"W","":"w","":"SS","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"A","":"a","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"E","":"e","":"I","":"i","":"I","":"i","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"O","":"o","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"U","":"u","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"Y","":"y","":"-","":"'","":"'","":"\\"","":"\\"","":"\\"","":"+","":"*","":"...","":"ecu","":"cruzeiro","":"french franc","":"lira","":"mill","":"naira","":"peseta","":"rupee","":"won","":"new shequel","":"dong","":"euro","":"kip","":"tugrik","":"drachma","":"penny","":"peso","":"guarani","":"austral","":"hryvnia","":"cedi","":"kazakhstani tenge","":"indian rupee","":"turkish lira","":"russian ruble","":"bitcoin","":"sm","":"tm","":"d","":"delta","":"sum","":"infinity","":"love","":"yuan","":"yen","":"rial","":"laa","":"laa","":"lai","":"la"}`),i=JSON.parse('{"bg":{"":"Y","":"Ts","":"Sht","":"A","":"Y","":"y","":"ts","":"sht","":"a","":"y"},"de":{"":"AE","":"ae","":"OE","":"oe","":"UE","":"ue","":"ss","%":"prozent","&":"und","|":"oder","":"summe","":"unendlich","":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","":"centavos","":"libras","":"moneda","":"francos","":"suma","":"infinito","":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","":"centime","":"livre","":"devise","":"franc","":"somme","":"infini","":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","":"centavo","":"soma","":"libra","":"infinito","":"amor"},"uk":{"":"Y","":"y","":"Y","":"y","":"Ts","":"ts","":"Kh","":"kh","":"Shch","":"shch","":"H","":"h"},"vi":{"":"D","":"d"},"da":{"":"OE","":"oe","":"AA","":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"strre end"},"nb":{"&":"og","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","":"AA","":"AE","":"OE","":"aa","":"ae","":"oe"}}');function s(r,o){if(typeof r!="string")throw new Error("slugify: string argument expected");o=typeof o=="string"?{replacement:o}:o||{};var a=i[o.locale]||{},c=o.replacement===void 0?"-":o.replacement,d=o.trim===void 0?!0:o.trim,h=r.normalize().split("").reduce(function(m,p){var w=a[p];return w===void 0&&(w=t[p]),w===void 0&&(w=p),w===c&&(w=" "),m+w.replace(o.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return o.strict&&(h=h.replace(/[^A-Za-z0-9\s]/g,"")),d&&(h=h.trim()),h=h.replace(/\s+/g,c),o.lower&&(h=h.toLowerCase()),h}return s.extend=function(r){Object.assign(t,r)},s})})(wb)),wb.exports}var oue=rue();const Vv=bc(oue),aue=bl({name:pn().min(3,"Name must be at least 3 characters long."),slug:pn().min(3,"Slug must be at least 3 characters long.")}),lue=()=>{const n=hl({resolver:wl(aue),defaultValues:{name:"",slug:""}}),e=n.watch("name");_.useEffect(()=>{if(e){const i=Vv(e,{lower:!0});n.setValue("slug",i,{shouldValidate:!0})}},[e,n]);async function t(i){try{const s=await fetch(`${Et("VITE_API_BASE_URL")}/category/add`,{method:"post",credentials:"include",headers:{"Content-type":"application/json"},body:JSON.stringify(i)}),r=await s.json();if(!s.ok)return bt("error",r.message||"Failed to add category");n.reset(),bt("success",r.message)}catch(s){bt("error",s.message||"An unexpected error occurred")}}return v.jsx("div",{className:"p-4",children:v.jsx(Xs,{className:"pt-6 max-w-screen-md mx-auto shadow-sm",children:v.jsxs(lo,{children:[v.jsx("h2",{className:"text-xl font-bold mb-6",children:"Add New Category"}),v.jsx(ml,{...n,children:v.jsxs("form",{onSubmit:n.handleSubmit(t),className:"space-y-4",children:[v.jsx(dn,{control:n.control,name:"name",render:({field:i})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Category Name"}),v.jsx(mn,{children:v.jsx(oi,{placeholder:"e.g. Technology",...i})}),v.jsx(gn,{})]})}),v.jsx(dn,{control:n.control,name:"slug",render:({field:i})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Slug"}),v.jsx(mn,{children:v.jsx(oi,{placeholder:"technology",...i})}),v.jsx(gn,{})]})}),v.jsx(ai,{type:"submit",className:"w-full bg-violet-600 hover:bg-violet-700",children:"Create Category"})]})})]})})})};function Lv({className:n,...e}){return v.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:v.jsx("table",{"data-slot":"table",className:Ye("w-full caption-bottom text-sm",n),...e})})}function Fv({className:n,...e}){return v.jsx("thead",{"data-slot":"table-header",className:Ye("[&_tr]:border-b",n),...e})}function zv({className:n,...e}){return v.jsx("tbody",{"data-slot":"table-body",className:Ye("[&_tr:last-child]:border-0",n),...e})}function qs({className:n,...e}){return v.jsx("tr",{"data-slot":"table-row",className:Ye("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",n),...e})}function zn({className:n,...e}){return v.jsx("th",{"data-slot":"table-head",className:Ye("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e})}function nn({className:n,...e}){return v.jsx("td",{"data-slot":"table-cell",className:Ye("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...e})}function nF(n){return Zn({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(n)}const jv=async n=>{if(!window.confirm("Are you sure to delete this data?"))return!1;try{const t=await fetch(n,{method:"DELETE",credentials:"include"});if(!t.ok)throw console.error(`Delete failed: ${t.status} ${t.statusText}`),new Error(t.statusText);return await t.json(),!0}catch(t){return t instanceof Error?console.error("Fetch Error:",t.message):console.error("An unknown error occurred during deletion"),!1}},cue=()=>{const[n,e]=_.useState(!1),{data:t,loading:i}=vi(`${Et("VITE_API_BASE_URL")}/category/all-category`,{method:"get",credentials:"include"},[n]),s=async r=>{if(window.confirm("Are you sure you want to delete this category?"))try{await jv(`${Et("VITE_API_BASE_URL")}/category/delete/${r}`)?(e(a=>!a),bt("success","Category deleted successfully.")):bt("error","Failed to delete category.")}catch(o){bt("error",o.message||"An error occurred.")}};return i?v.jsx(fo,{}):v.jsx("div",{className:"p-4",children:v.jsxs(Xs,{className:"shadow-sm",children:[v.jsxs(pV,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[v.jsx("h2",{className:"text-xl font-bold",children:"Categories"}),v.jsx(ai,{asChild:!0,children:v.jsx(_n,{to:pN,children:"Add Category"})})]}),v.jsx(lo,{children:v.jsxs(Lv,{children:[v.jsx(Fv,{children:v.jsxs(qs,{children:[v.jsx(zn,{className:"w-[40%]",children:"Category Name"}),v.jsx(zn,{className:"w-[40%]",children:"Slug"}),v.jsx(zn,{className:"text-right",children:"Action"})]})}),v.jsx(zv,{children:t&&t.category.length>0?t.category.map(r=>v.jsxs(qs,{className:"hover:bg-muted/50 transition-colors",children:[v.jsx(nn,{className:"font-medium",children:r.name}),v.jsx(nn,{children:v.jsx("span",{className:"bg-slate-100 px-2 py-1 rounded text-xs font-mono",children:r.slug})}),v.jsx(nn,{className:"text-right",children:v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx(ai,{variant:"outline",size:"icon",className:"hover:bg-violet-600 hover:text-white",asChild:!0,children:v.jsx(_n,{to:bN(r.id),children:v.jsx(nF,{className:"h-4 w-4"})})}),v.jsx(ai,{onClick:()=>s(r.id),variant:"outline",size:"icon",className:"hover:bg-red-600 hover:text-white",children:v.jsx(gv,{className:"h-4 w-4"})})]})})]},r.id)):v.jsx(qs,{children:v.jsx(nn,{colSpan:3,className:"h-24 text-center text-muted-foreground",children:"No categories found. Start by adding one!"})})})]})})]})})},uue=bl({name:pn().min(3,"Name must be at least 3 characters long."),slug:pn().min(3,"Slug must be at least 3 characters long.")}),due=()=>{const{category_id:n}=Jw(),{data:e,loading:t}=vi(`${Et("VITE_API_BASE_URL")}/category/show/${n}`,{method:"get",credentials:"include"},[n]),i=hl({resolver:wl(uue),defaultValues:{name:"",slug:""}});_.useEffect(()=>{e?.category&&i.reset({name:e.category.name,slug:e.category.slug})},[e,i]);const s=i.watch("name");_.useEffect(()=>{if(i.formState.isDirty){const o=Vv(s,{lower:!0});i.setValue("slug",o,{shouldValidate:!0})}},[s,i]);async function r(o){try{const a=await fetch(`${Et("VITE_API_BASE_URL")}/category/update/${n}`,{method:"put",headers:{"Content-type":"application/json"},body:JSON.stringify(o)}),c=await a.json();if(!a.ok)return bt("error",c.message||"Update failed");bt("success",c.message)}catch(a){bt("error",a.message||"An unexpected error occurred")}}return t?v.jsx(fo,{}):v.jsx("div",{className:"p-4",children:v.jsx(Xs,{className:"pt-6 max-w-screen-md mx-auto shadow-md border-t-4 border-t-violet-500",children:v.jsxs(lo,{children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Edit Category"}),v.jsx(ml,{...i,children:v.jsxs("form",{onSubmit:i.handleSubmit(r),className:"space-y-5",children:[v.jsx(dn,{control:i.control,name:"name",render:({field:o})=>v.jsxs(fn,{children:[v.jsx(hn,{className:"font-semibold",children:"Category Name"}),v.jsx(mn,{children:v.jsx(oi,{placeholder:"Enter category name",...o})}),v.jsx(gn,{})]})}),v.jsx(dn,{control:i.control,name:"slug",render:({field:o})=>v.jsxs(fn,{children:[v.jsx(hn,{className:"font-semibold",children:"URL Slug"}),v.jsx(mn,{children:v.jsx(oi,{placeholder:"category-slug",...o})}),v.jsx(gn,{})]})}),v.jsx(ai,{type:"submit",className:"w-full bg-violet-600 hover:bg-violet-700 h-11 text-white transition-all",disabled:!i.formState.isDirty,children:"Update Category"})]})})]})})})};function $P(n,[e,t]){return Math.min(t,Math.max(e,n))}function fue(n){const e=hue(n),t=_.forwardRef((i,s)=>{const{children:r,...o}=i,a=_.Children.toArray(r),c=a.find(gue);if(c){const d=c.props.children,h=a.map(m=>m===c?_.Children.count(d)>1?_.Children.only(null):_.isValidElement(d)?d.props.children:null:m);return v.jsx(e,{...o,ref:s,children:_.isValidElement(d)?_.cloneElement(d,void 0,h):null})}return v.jsx(e,{...o,ref:s,children:r})});return t.displayName=`${n}.Slot`,t}function hue(n){const e=_.forwardRef((t,i)=>{const{children:s,...r}=t;if(_.isValidElement(s)){const o=bue(s),a=pue(r,s.props);return s.type!==_.Fragment&&(a.ref=i?ga(i,o):o),_.cloneElement(s,a)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var mue=Symbol("radix.slottable");function gue(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===mue}function pue(n,e){const t={...e};for(const i in e){const s=n[i],r=e[i];/^on[A-Z]/.test(i)?s&&r?t[i]=(...a)=>{const c=r(...a);return s(...a),c}:s&&(t[i]=s):i==="style"?t[i]={...s,...r}:i==="className"&&(t[i]=[s,r].filter(Boolean).join(" "))}return{...n,...t}}function bue(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function wue(n){const e=_.useRef({value:n,previous:n});return _.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var vue=[" ","Enter","ArrowUp","ArrowDown"],yue=[" ","Enter"],dc="Select",[Uv,Hv,Aue]=ak(dc),[jd]=fl(dc,[Aue,Bd]),Wv=Bd(),[_ue,vl]=jd(dc),[Cue,xue]=jd(dc),iF=n=>{const{__scopeSelect:e,children:t,open:i,defaultOpen:s,onOpenChange:r,value:o,defaultValue:a,onValueChange:c,dir:d,name:h,autoComplete:m,disabled:p,required:w,form:A}=n,C=Wv(e),[k,E]=_.useState(null),[S,I]=_.useState(null),[R,O]=_.useState(!1),U=lk(d),[P,V]=dd({prop:i,defaultProp:s??!1,onChange:r,caller:dc}),[H,ie]=dd({prop:o,defaultProp:a,onChange:c,caller:dc}),ke=_.useRef(null),de=k?A||!!k.closest("form"):!0,[ve,be]=_.useState(new Set),Ae=Array.from(ve).map(F=>F.props.value).join(";");return v.jsx(Zx,{...C,children:v.jsxs(_ue,{required:w,scope:e,trigger:k,onTriggerChange:E,valueNode:S,onValueNodeChange:I,valueNodeHasChildren:R,onValueNodeHasChildrenChange:O,contentId:Yr(),value:H,onValueChange:ie,open:P,onOpenChange:V,dir:U,triggerPointerDownPosRef:ke,disabled:p,children:[v.jsx(Uv.Provider,{scope:e,children:v.jsx(Cue,{scope:n.__scopeSelect,onNativeOptionAdd:_.useCallback(F=>{be(X=>new Set(X).add(F))},[]),onNativeOptionRemove:_.useCallback(F=>{be(X=>{const $=new Set(X);return $.delete(F),$})},[]),children:t})}),de?v.jsxs(kF,{"aria-hidden":!0,required:w,tabIndex:-1,name:h,autoComplete:m,value:H,onChange:F=>ie(F.target.value),disabled:p,form:A,children:[H===void 0?v.jsx("option",{value:""}):null,Array.from(ve)]},Ae):null]})})};iF.displayName=dc;var sF="SelectTrigger",rF=_.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:i=!1,...s}=n,r=Wv(t),o=vl(sF,t),a=o.disabled||i,c=Dt(e,o.onTriggerChange),d=Hv(t),h=_.useRef("touch"),[m,p,w]=SF(C=>{const k=d().filter(I=>!I.disabled),E=k.find(I=>I.value===o.value),S=TF(k,C,E);S!==void 0&&o.onValueChange(S.value)}),A=C=>{a||(o.onOpenChange(!0),w()),C&&(o.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return v.jsx(Jx,{asChild:!0,...r,children:v.jsx(ht.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":EF(o.value)?"":void 0,...s,ref:c,onClick:Be(s.onClick,C=>{C.currentTarget.focus(),h.current!=="mouse"&&A(C)}),onPointerDown:Be(s.onPointerDown,C=>{h.current=C.pointerType;const k=C.target;k.hasPointerCapture(C.pointerId)&&k.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(A(C),C.preventDefault())}),onKeyDown:Be(s.onKeyDown,C=>{const k=m.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&p(C.key),!(k&&C.key===" ")&&vue.includes(C.key)&&(A(),C.preventDefault())})})})});rF.displayName=sF;var oF="SelectValue",aF=_.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:s,children:r,placeholder:o="",...a}=n,c=vl(oF,t),{onValueNodeHasChildrenChange:d}=c,h=r!==void 0,m=Dt(e,c.onValueNodeChange);return Qn(()=>{d(h)},[d,h]),v.jsx(ht.span,{...a,ref:m,style:{pointerEvents:"none"},children:EF(c.value)?v.jsx(v.Fragment,{children:o}):r})});aF.displayName=oF;var kue="SelectIcon",lF=_.forwardRef((n,e)=>{const{__scopeSelect:t,children:i,...s}=n;return v.jsx(ht.span,{"aria-hidden":!0,...s,ref:e,children:i||""})});lF.displayName=kue;var Eue="SelectPortal",cF=n=>v.jsx(Am,{asChild:!0,...n});cF.displayName=Eue;var fc="SelectContent",uF=_.forwardRef((n,e)=>{const t=vl(fc,n.__scopeSelect),[i,s]=_.useState();if(Qn(()=>{s(new DocumentFragment)},[]),!t.open){const r=i;return r?wm.createPortal(v.jsx(dF,{scope:n.__scopeSelect,children:v.jsx(Uv.Slot,{scope:n.__scopeSelect,children:v.jsx("div",{children:n.children})})}),r):null}return v.jsx(fF,{...n,ref:e})});uF.displayName=fc;var ur=10,[dF,yl]=jd(fc),Sue="SelectContentImpl",Tue=fue("SelectContent.RemoveScroll"),fF=_.forwardRef((n,e)=>{const{__scopeSelect:t,position:i="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:r,onPointerDownOutside:o,side:a,sideOffset:c,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:w,sticky:A,hideWhenDetached:C,avoidCollisions:k,...E}=n,S=vl(fc,t),[I,R]=_.useState(null),[O,U]=_.useState(null),P=Dt(e,oe=>R(oe)),[V,H]=_.useState(null),[ie,ke]=_.useState(null),de=Hv(t),[ve,be]=_.useState(!1),Ae=_.useRef(!1);_.useEffect(()=>{if(I)return Fx(I)},[I]),Lx();const F=_.useCallback(oe=>{const[Ue,...$e]=de().map(it=>it.ref.current),[qe]=$e.slice(-1),Ze=document.activeElement;for(const it of oe)if(it===Ze||(it?.scrollIntoView({block:"nearest"}),it===Ue&&O&&(O.scrollTop=0),it===qe&&O&&(O.scrollTop=O.scrollHeight),it?.focus(),document.activeElement!==Ze))return},[de,O]),X=_.useCallback(()=>F([V,I]),[F,V,I]);_.useEffect(()=>{ve&&X()},[ve,X]);const{onOpenChange:$,triggerPointerDownPosRef:re}=S;_.useEffect(()=>{if(I){let oe={x:0,y:0};const Ue=qe=>{oe={x:Math.abs(Math.round(qe.pageX)-(re.current?.x??0)),y:Math.abs(Math.round(qe.pageY)-(re.current?.y??0))}},$e=qe=>{oe.x<=10&&oe.y<=10?qe.preventDefault():I.contains(qe.target)||$(!1),document.removeEventListener("pointermove",Ue),re.current=null};return re.current!==null&&(document.addEventListener("pointermove",Ue),document.addEventListener("pointerup",$e,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ue),document.removeEventListener("pointerup",$e,{capture:!0})}}},[I,$,re]),_.useEffect(()=>{const oe=()=>$(!1);return window.addEventListener("blur",oe),window.addEventListener("resize",oe),()=>{window.removeEventListener("blur",oe),window.removeEventListener("resize",oe)}},[$]);const[Ve,B]=SF(oe=>{const Ue=de().filter(Ze=>!Ze.disabled),$e=Ue.find(Ze=>Ze.ref.current===document.activeElement),qe=TF(Ue,oe,$e);qe&&setTimeout(()=>qe.ref.current.focus())}),J=_.useCallback((oe,Ue,$e)=>{const qe=!Ae.current&&!$e;(S.value!==void 0&&S.value===Ue||qe)&&(H(oe),qe&&(Ae.current=!0))},[S.value]),fe=_.useCallback(()=>I?.focus(),[I]),he=_.useCallback((oe,Ue,$e)=>{const qe=!Ae.current&&!$e;(S.value!==void 0&&S.value===Ue||qe)&&ke(oe)},[S.value]),Me=i==="popper"?hC:hF,Ie=Me===hC?{side:a,sideOffset:c,align:d,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:w,sticky:A,hideWhenDetached:C,avoidCollisions:k}:{};return v.jsx(dF,{scope:t,content:I,viewport:O,onViewportChange:U,itemRefCallback:J,selectedItem:V,onItemLeave:fe,itemTextRefCallback:he,focusSelectedItem:X,selectedItemText:ie,position:i,isPositioned:ve,searchRef:Ve,children:v.jsx(iv,{as:Tue,allowPinchZoom:!0,children:v.jsx(tv,{asChild:!0,trapped:S.open,onMountAutoFocus:oe=>{oe.preventDefault()},onUnmountAutoFocus:Be(s,oe=>{S.trigger?.focus({preventScroll:!0}),oe.preventDefault()}),children:v.jsx(ym,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:oe=>oe.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:v.jsx(Me,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:oe=>oe.preventDefault(),...E,...Ie,onPlaced:()=>be(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Be(E.onKeyDown,oe=>{const Ue=oe.ctrlKey||oe.altKey||oe.metaKey;if(oe.key==="Tab"&&oe.preventDefault(),!Ue&&oe.key.length===1&&B(oe.key),["ArrowUp","ArrowDown","Home","End"].includes(oe.key)){let qe=de().filter(Ze=>!Ze.disabled).map(Ze=>Ze.ref.current);if(["ArrowUp","End"].includes(oe.key)&&(qe=qe.slice().reverse()),["ArrowUp","ArrowDown"].includes(oe.key)){const Ze=oe.target,it=qe.indexOf(Ze);qe=qe.slice(it+1)}setTimeout(()=>F(qe)),oe.preventDefault()}})})})})})})});fF.displayName=Sue;var Iue="SelectItemAlignedPosition",hF=_.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:i,...s}=n,r=vl(fc,t),o=yl(fc,t),[a,c]=_.useState(null),[d,h]=_.useState(null),m=Dt(e,P=>h(P)),p=Hv(t),w=_.useRef(!1),A=_.useRef(!0),{viewport:C,selectedItem:k,selectedItemText:E,focusSelectedItem:S}=o,I=_.useCallback(()=>{if(r.trigger&&r.valueNode&&a&&d&&C&&k&&E){const P=r.trigger.getBoundingClientRect(),V=d.getBoundingClientRect(),H=r.valueNode.getBoundingClientRect(),ie=E.getBoundingClientRect();if(r.dir!=="rtl"){const Ze=ie.left-V.left,it=H.left-Ze,kn=P.left-it,On=P.width+kn,cs=Math.max(On,V.width),us=window.innerWidth-ur,$i=$P(it,[ur,Math.max(ur,us-cs)]);a.style.minWidth=On+"px",a.style.left=$i+"px"}else{const Ze=V.right-ie.right,it=window.innerWidth-H.right-Ze,kn=window.innerWidth-P.right-it,On=P.width+kn,cs=Math.max(On,V.width),us=window.innerWidth-ur,$i=$P(it,[ur,Math.max(ur,us-cs)]);a.style.minWidth=On+"px",a.style.right=$i+"px"}const ke=p(),de=window.innerHeight-ur*2,ve=C.scrollHeight,be=window.getComputedStyle(d),Ae=parseInt(be.borderTopWidth,10),F=parseInt(be.paddingTop,10),X=parseInt(be.borderBottomWidth,10),$=parseInt(be.paddingBottom,10),re=Ae+F+ve+$+X,Ve=Math.min(k.offsetHeight*5,re),B=window.getComputedStyle(C),J=parseInt(B.paddingTop,10),fe=parseInt(B.paddingBottom,10),he=P.top+P.height/2-ur,Me=de-he,Ie=k.offsetHeight/2,oe=k.offsetTop+Ie,Ue=Ae+F+oe,$e=re-Ue;if(Ue<=he){const Ze=ke.length>0&&k===ke[ke.length-1].ref.current;a.style.bottom="0px";const it=d.clientHeight-C.offsetTop-C.offsetHeight,kn=Math.max(Me,Ie+(Ze?fe:0)+it+X),On=Ue+kn;a.style.height=On+"px"}else{const Ze=ke.length>0&&k===ke[0].ref.current;a.style.top="0px";const kn=Math.max(he,Ae+C.offsetTop+(Ze?J:0)+Ie)+$e;a.style.height=kn+"px",C.scrollTop=Ue-he+C.offsetTop}a.style.margin=`${ur}px 0`,a.style.minHeight=Ve+"px",a.style.maxHeight=de+"px",i?.(),requestAnimationFrame(()=>w.current=!0)}},[p,r.trigger,r.valueNode,a,d,C,k,E,r.dir,i]);Qn(()=>I(),[I]);const[R,O]=_.useState();Qn(()=>{d&&O(window.getComputedStyle(d).zIndex)},[d]);const U=_.useCallback(P=>{P&&A.current===!0&&(I(),S?.(),A.current=!1)},[I,S]);return v.jsx(Pue,{scope:t,contentWrapper:a,shouldExpandOnScrollRef:w,onScrollButtonChange:U,children:v.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:v.jsx(ht.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});hF.displayName=Iue;var Rue="SelectPopperPosition",hC=_.forwardRef((n,e)=>{const{__scopeSelect:t,align:i="start",collisionPadding:s=ur,...r}=n,o=Wv(t);return v.jsx(Xx,{...o,...r,ref:e,align:i,collisionPadding:s,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});hC.displayName=Rue;var[Pue,oE]=jd(fc,{}),mC="SelectViewport",mF=_.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:i,...s}=n,r=yl(mC,t),o=oE(mC,t),a=Dt(e,r.onViewportChange),c=_.useRef(0);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),v.jsx(Uv.Slot,{scope:t,children:v.jsx(ht.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Be(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=o;if(p?.current&&m){const w=Math.abs(c.current-h.scrollTop);if(w>0){const A=window.innerHeight-ur*2,C=parseFloat(m.style.minHeight),k=parseFloat(m.style.height),E=Math.max(C,k);if(E<A){const S=E+w,I=Math.min(A,S),R=S-I;m.style.height=I+"px",m.style.bottom==="0px"&&(h.scrollTop=R>0?R:0,m.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});mF.displayName=mC;var gF="SelectGroup",[Oue,Due]=jd(gF),Mue=_.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=Yr();return v.jsx(Oue,{scope:t,id:s,children:v.jsx(ht.div,{role:"group","aria-labelledby":s,...i,ref:e})})});Mue.displayName=gF;var pF="SelectLabel",Bue=_.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=Due(pF,t);return v.jsx(ht.div,{id:s.id,...i,ref:e})});Bue.displayName=pF;var hw="SelectItem",[Nue,bF]=jd(hw),wF=_.forwardRef((n,e)=>{const{__scopeSelect:t,value:i,disabled:s=!1,textValue:r,...o}=n,a=vl(hw,t),c=yl(hw,t),d=a.value===i,[h,m]=_.useState(r??""),[p,w]=_.useState(!1),A=Dt(e,S=>c.itemRefCallback?.(S,i,s)),C=Yr(),k=_.useRef("touch"),E=()=>{s||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return v.jsx(Nue,{scope:t,value:i,disabled:s,textId:C,isSelected:d,onItemTextChange:_.useCallback(S=>{m(I=>I||(S?.textContent??"").trim())},[]),children:v.jsx(Uv.ItemSlot,{scope:t,value:i,disabled:s,textValue:h,children:v.jsx(ht.div,{role:"option","aria-labelledby":C,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:A,onFocus:Be(o.onFocus,()=>w(!0)),onBlur:Be(o.onBlur,()=>w(!1)),onClick:Be(o.onClick,()=>{k.current!=="mouse"&&E()}),onPointerUp:Be(o.onPointerUp,()=>{k.current==="mouse"&&E()}),onPointerDown:Be(o.onPointerDown,S=>{k.current=S.pointerType}),onPointerMove:Be(o.onPointerMove,S=>{k.current=S.pointerType,s?c.onItemLeave?.():k.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Be(o.onPointerLeave,S=>{S.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:Be(o.onKeyDown,S=>{c.searchRef?.current!==""&&S.key===" "||(yue.includes(S.key)&&E(),S.key===" "&&S.preventDefault())})})})})});wF.displayName=hw;var oh="SelectItemText",vF=_.forwardRef((n,e)=>{const{__scopeSelect:t,className:i,style:s,...r}=n,o=vl(oh,t),a=yl(oh,t),c=bF(oh,t),d=xue(oh,t),[h,m]=_.useState(null),p=Dt(e,E=>m(E),c.onItemTextChange,E=>a.itemTextRefCallback?.(E,c.value,c.disabled)),w=h?.textContent,A=_.useMemo(()=>v.jsx("option",{value:c.value,disabled:c.disabled,children:w},c.value),[c.disabled,c.value,w]),{onNativeOptionAdd:C,onNativeOptionRemove:k}=d;return Qn(()=>(C(A),()=>k(A)),[C,k,A]),v.jsxs(v.Fragment,{children:[v.jsx(ht.span,{id:c.textId,...r,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?wm.createPortal(r.children,o.valueNode):null]})});vF.displayName=oh;var yF="SelectItemIndicator",AF=_.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return bF(yF,t).isSelected?v.jsx(ht.span,{"aria-hidden":!0,...i,ref:e}):null});AF.displayName=yF;var gC="SelectScrollUpButton",_F=_.forwardRef((n,e)=>{const t=yl(gC,n.__scopeSelect),i=oE(gC,n.__scopeSelect),[s,r]=_.useState(!1),o=Dt(e,i.onScrollButtonChange);return Qn(()=>{if(t.viewport&&t.isPositioned){let a=function(){const d=c.scrollTop>0;r(d)};const c=t.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?v.jsx(xF,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=t;a&&c&&(a.scrollTop=a.scrollTop-c.offsetHeight)}}):null});_F.displayName=gC;var pC="SelectScrollDownButton",CF=_.forwardRef((n,e)=>{const t=yl(pC,n.__scopeSelect),i=oE(pC,n.__scopeSelect),[s,r]=_.useState(!1),o=Dt(e,i.onScrollButtonChange);return Qn(()=>{if(t.viewport&&t.isPositioned){let a=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;r(h)};const c=t.viewport;return a(),c.addEventListener("scroll",a),()=>c.removeEventListener("scroll",a)}},[t.viewport,t.isPositioned]),s?v.jsx(xF,{...n,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:c}=t;a&&c&&(a.scrollTop=a.scrollTop+c.offsetHeight)}}):null});CF.displayName=pC;var xF=_.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:i,...s}=n,r=yl("SelectScrollButton",t),o=_.useRef(null),a=Hv(t),c=_.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return _.useEffect(()=>()=>c(),[c]),Qn(()=>{a().find(h=>h.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[a]),v.jsx(ht.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Be(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:Be(s.onPointerMove,()=>{r.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:Be(s.onPointerLeave,()=>{c()})})}),Vue="SelectSeparator",Lue=_.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n;return v.jsx(ht.div,{"aria-hidden":!0,...i,ref:e})});Lue.displayName=Vue;var bC="SelectArrow",Fue=_.forwardRef((n,e)=>{const{__scopeSelect:t,...i}=n,s=Wv(t),r=vl(bC,t),o=yl(bC,t);return r.open&&o.position==="popper"?v.jsx(ek,{...s,...i,ref:e}):null});Fue.displayName=bC;var zue="SelectBubbleInput",kF=_.forwardRef(({__scopeSelect:n,value:e,...t},i)=>{const s=_.useRef(null),r=Dt(i,s),o=wue(e);return _.useEffect(()=>{const a=s.current;if(!a)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const m=new Event("change",{bubbles:!0});h.call(a,e),a.dispatchEvent(m)}},[o,e]),v.jsx(ht.select,{...t,style:{...JB,...t.style},ref:r,defaultValue:e})});kF.displayName=zue;function EF(n){return n===""||n===void 0}function SF(n){const e=_r(n),t=_.useRef(""),i=_.useRef(0),s=_.useCallback(o=>{const a=t.current+o;e(a),(function c(d){t.current=d,window.clearTimeout(i.current),d!==""&&(i.current=window.setTimeout(()=>c(""),1e3))})(a)},[e]),r=_.useCallback(()=>{t.current="",window.clearTimeout(i.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(i.current),[]),[t,s,r]}function TF(n,e,t){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,r=t?n.indexOf(t):-1;let o=jue(n,Math.max(r,0));s.length===1&&(o=o.filter(d=>d!==t));const c=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==t?c:void 0}function jue(n,e){return n.map((t,i)=>n[(e+i)%n.length])}var Uue=iF,Hue=rF,Wue=aF,$ue=lF,Gue=cF,Yue=uF,Kue=mF,que=wF,Que=vF,Zue=AF,Jue=_F,Xue=CF;function IF({...n}){return v.jsx(Uue,{"data-slot":"select",...n})}function RF({...n}){return v.jsx(Wue,{"data-slot":"select-value",...n})}function PF({className:n,size:e="default",children:t,...i}){return v.jsxs(Hue,{"data-slot":"select-trigger","data-size":e,className:Ye("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...i,children:[t,v.jsx($ue,{asChild:!0,children:v.jsx($3,{className:"size-4 opacity-50"})})]})}function OF({className:n,children:e,position:t="item-aligned",align:i="center",...s}){return v.jsx(Gue,{children:v.jsxs(Yue,{"data-slot":"select-content",className:Ye("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,align:i,...s,children:[v.jsx(ede,{}),v.jsx(Kue,{className:Ye("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),v.jsx(tde,{})]})})}function DF({className:n,children:e,...t}){return v.jsxs(que,{"data-slot":"select-item",className:Ye("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...t,children:[v.jsx("span",{"data-slot":"select-item-indicator",className:"absolute right-2 flex size-3.5 items-center justify-center",children:v.jsx(Zue,{children:v.jsx(uG,{className:"size-4"})})}),v.jsx(Que,{children:e})]})}function ede({className:n,...e}){return v.jsx(Jue,{"data-slot":"select-scroll-up-button",className:Ye("flex cursor-default items-center justify-center py-1",n),...e,children:v.jsx(hG,{className:"size-4"})})}function tde({className:n,...e}){return v.jsx(Xue,{"data-slot":"select-scroll-down-button",className:Ye("flex cursor-default items-center justify-center py-1",n),...e,children:v.jsx($3,{className:"size-4"})})}function nde(){const n={resolve:null,promise:null};return n.promise=new Promise(e=>{n.resolve=e}),n}function ide(n){let e=null;return(...t)=>(e||(e={current:n(...t)}),e.current)}const xi=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function sde(){const[n,e,t,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+xi[n>>0&255]+xi[n>>8&255]+xi[n>>16&255]+xi[n>>24&255]+xi[e>>0&255]+xi[e>>8&255]+xi[e>>16&255]+xi[e>>24&255]+xi[t>>0&255]+xi[t>>8&255]+xi[t>>16&255]+xi[t>>24&255]+xi[i>>0&255]+xi[i>>8&255]+xi[i>>16&255]+xi[i>>24&255]}function rde(n,e){const t=n.extraPlugins||[];return{...n,extraPlugins:[...t,...e.filter(i=>!t.includes(i))]}}function MF(n){return!!n&&/^\d+\.\d+\.\d+/.test(n)}function BF(n){return n?["nightly","alpha","internal","nightly-","staging"].some(e=>n.includes(e)):!1}function ode(n){return MF(n)||BF(n)}function ade(n){if(!MF(n))throw new Error(`Invalid semantic version: ${n||"<blank>"}.`);const[e,t,i]=n.split(".");return{major:Number.parseInt(e,10),minor:Number.parseInt(t,10),patch:Number.parseInt(i,10)}}function lde(n){if(BF(n))return 3;const{major:e}=ade(n);switch(!0){case e>=44:return 3;case e>=38:return 2;default:return 1}}function cde(){const{CKEDITOR_VERSION:n,CKEDITOR:e}=window;return ode(n)?{source:e?"cdn":"npm",version:n}:null}function ude(){const n=cde();return n?lde(n.version):null}function NF(n,e){switch(e||=ude()||void 0,e){case 1:case 2:return n===void 0;case 3:return n==="GPL";default:return!1}}function dde(n,e){return function(i){NF(i.config.get("licenseKey"))||i.on("collectUsageData",(s,{setUsageData:r})=>{r(`integration.${n}`,e)})}}var fde=Object.defineProperty,hde=(n,e,t)=>e in n?fde(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,is=(n,e,t)=>hde(n,typeof e!="symbol"?e+"":e,t);const VF=class LF{constructor(e,t){is(this,"_lifecycle"),is(this,"_element"),is(this,"_releaseLock",null),is(this,"_value",null),is(this,"_afterMountCallbacks",[]),is(this,"_state",{destroyedBeforeInitialization:!1,mountingInProgress:null}),is(this,"release",ide(()=>{const{_releaseLock:i,_state:s,_element:r,_lifecycle:o}=this;s.mountingInProgress?s.mountingInProgress.then(()=>o.unmount({element:r,mountResult:this.value})).catch(a=>{console.error("Semaphore unmounting error:",a)}).then(i.resolve).then(()=>{this._value=null}):(s.destroyedBeforeInitialization=!0,i.resolve())})),this._element=e,this._lifecycle=t,this._lock()}get value(){return this._value}unsafeSetValue(e){this._value=e,this._afterMountCallbacks.forEach(t=>t(e)),this._afterMountCallbacks=[]}runAfterMount(e){const{_value:t,_afterMountCallbacks:i}=this;t?e(t):i.push(e)}_lock(){const{_semaphores:e}=LF,{_state:t,_element:i,_lifecycle:s}=this,r=e.get(i)||Promise.resolve(null),o=nde();this._releaseLock=o;const a=r.then(()=>t.destroyedBeforeInitialization?Promise.resolve(void 0):(t.mountingInProgress=s.mount().then(c=>(c&&this.unsafeSetValue(c),c)),t.mountingInProgress)).then(async c=>{c&&s.afterMount&&await s.afterMount({element:i,mountResult:c})}).then(()=>o.promise).catch(c=>{console.error("Semaphore mounting error:",c)}).then(()=>{e.get(i)===a&&e.delete(i)});e.set(i,a)}};is(VF,"_semaphores",new Map);let mde=VF;const gde="$__CKEditorReactContextMetadata";function pde(n,e){return{...e,[gde]:n}}const bde=Ee.createContext(null),wde=n=>!!n&&typeof n=="object"&&"status"in n&&["initializing","initialized","error"].includes(n.status),FF=n=>e=>wde(e)&&e.status===n,GP=FF("initializing"),vde=n=>FF("initialized")(n)&&n.watchdog.state==="ready";const yde=dde("react",{version:"9.5.0",frameworkVersion:Ee.version});function Ade(n){return NF(n.licenseKey)?n:rde(n,[yde])}const y_="Lock from React integration (@ckeditor/ckeditor5-react)";class zF extends Ee.Component{constructor(e){super(e),is(this,"domContainer",Ee.createRef()),is(this,"editorSemaphore",null),this._checkVersion()}_checkVersion(){const{CKEDITOR_VERSION:e}=window;if(!e)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[t]=e.split(".").map(Number);t>=42||e.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}get _semaphoreValue(){const{editorSemaphore:e}=this;return e?e.value:null}get watchdog(){const{_semaphoreValue:e}=this;return e?e.watchdog:null}get editor(){const{_semaphoreValue:e}=this;return e?e.instance:null}shouldComponentUpdate(e){const{props:t,editorSemaphore:i}=this;return e.id!==t.id||e.disableWatchdog!==t.disableWatchdog?!0:(i&&(i.runAfterMount(({instance:s})=>{this._shouldUpdateEditorData(t,e,s)&&s.data.set(e.data)}),"disabled"in e&&i.runAfterMount(({instance:s})=>{e.disabled?s.enableReadOnlyMode(y_):s.disableReadOnlyMode(y_)})),!1)}componentDidMount(){GP(this.context)||this._initLifeCycleSemaphore()}componentDidUpdate(){GP(this.context)||this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new mde(this.domContainer.current,{mount:async()=>this._initializeEditor(),afterMount:({mountResult:e})=>{const{onReady:t}=this.props;t&&this.domContainer.current!==null&&t(e.instance)},unmount:async({element:e,mountResult:t})=>{const{onAfterDestroy:i}=this.props;try{await this._destroyEditor(t),e.innerHTML=""}finally{i&&i(t.instance)}}})}render(){return Ee.createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};const e=vde(this.context)?new _de(this.context.watchdog):new this.props.editor.EditorWatchdog(this.props.editor,this.props.watchdogConfig),t={current:0};return e.setCreator(async(i,s)=>{var r;const{editorSemaphore:o}=this,{onAfterDestroy:a}=this.props;t.current>0&&a&&((r=o?.value)!=null&&r.instance)&&a(o.value.instance);const c=await this._createEditor(i,s);return o&&t.current>0&&(o.unsafeSetValue({instance:c,watchdog:e}),setTimeout(()=>{this.props.onReady&&this.props.onReady(e.editor)})),t.current++,c}),e.on("error",(i,{error:s,causesRestart:r})=>{(this.props.onError||console.error)(s,{phase:"runtime",willEditorRestart:r})}),await e.create(this.domContainer.current,this._getConfig()).catch(i=>{(this.props.onError||console.error)(i,{phase:"initialization",willEditorRestart:!1})}),{watchdog:e,instance:e.editor}}_createEditor(e,t){const{contextItemMetadata:i}=this.props;return i&&(t=pde(i,t)),this.props.editor.create(e,Ade(t)).then(s=>{if("disabled"in this.props){this.props.disabled&&s.enableReadOnlyMode(y_)}const r=s.model.document,o=s.editing.view.document;return r.on("change:data",a=>{this.props.onChange&&this.props.onChange(a,s)}),o.on("focus",a=>{this.props.onFocus&&this.props.onFocus(a,s)}),o.on("blur",a=>{this.props.onBlur&&this.props.onBlur(a,s)}),s})}async _destroyEditor(e){const{watchdog:t,instance:i}=e;return new Promise((s,r)=>{setTimeout(async()=>{try{if(t)return await t.destroy(),s();if(i)return await i.destroy(),s();s()}catch(o){console.error(o),r(o)}})})}_shouldUpdateEditorData(e,t,i){return!(e.data===t.data||i.data.get()===t.data)}_getConfig(){const e=this.props.config||{};return this.props.data&&e.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...e,initialData:e.initialData||this.props.data||""}}}is(zF,"contextType",bde);class _de{constructor(e){is(this,"_contextWatchdog"),is(this,"_id"),is(this,"_creator"),this._contextWatchdog=e,this._id=sde()}setCreator(e){this._creator=e}create(e,t){return this._contextWatchdog.add({sourceElementOrData:e,config:t,creator:this._creator,id:this._id,type:"editor"})}on(e,t){this._contextWatchdog.on("itemError",(i,{itemId:s,error:r})=>{s===this._id&&t(null,{error:r,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}function jF(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}const Cde=_.memo(_.forwardRef(({id:n,semaphore:e,rootName:t},i)=>{const s=_.useRef(null);return _.useEffect(()=>{let r,o;return e.runAfterMount(({instance:a})=>{if(!s.current)return;o=a;const{ui:c,model:d}=o,h=d.document.getRoot(t);h&&o.ui.getEditableElement(t)&&o.detachEditable(h),r=c.view.createEditable(t,s.current),c.addEditable(r),a.editing.view.forceRender()}),()=>{if(o&&o.state!=="destroyed"&&s.current){const a=o.model.document.getRoot(t);a&&o.detachEditable(a)}}},[e.revision]),Ee.createElement("div",{key:e.revision,id:n,ref:jF(i,s)})}));Cde.displayName="EditorEditable";const xde=_.forwardRef(({editor:n},e)=>{const t=_.useRef(null);return _.useEffect(()=>{const i=t.current;if(!n||!i)return;const s=n.ui.view.toolbar.element;return i.appendChild(s),()=>{i.contains(s)&&i.removeChild(s)}},[n&&n.id]),Ee.createElement("div",{ref:jF(t,e)})});xde.displayName="EditorToolbarWrapper";function kde(n){return Number.isSafeInteger(n)&&n>=0}function Ede(n){return n!=null&&typeof n!="function"&&kde(n.length)}function UF(n){return n}function Yh(n){return n==="__proto__"}function HF(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}function aE(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}function lE(n){const e=[],t=n.length;if(t===0)return e;let i=0,s="",r="",o=!1;for(n.charCodeAt(0)===46&&(e.push(""),i++);i<t;){const a=n[i];r?a==="\\"&&i+1<t?(i++,s+=n[i]):a===r?r="":s+=a:o?a==='"'||a==="'"?r=a:a==="]"?(o=!1,e.push(s),s=""):s+=a:a==="["?(o=!0,s&&(e.push(s),s="")):a==="."?s&&(e.push(s),s=""):s+=a,i++}return s&&e.push(s),e}function ol(n,e,t){if(n==null)return t;switch(typeof e){case"string":{if(Yh(e))return t;const i=n[e];return i===void 0?HF(e)?ol(n,lE(e),t):t:i}case"number":case"symbol":{typeof e=="number"&&(e=aE(e));const i=n[e];return i===void 0?t:i}default:{if(Array.isArray(e))return Sde(n,e,t);if(Object.is(e?.valueOf(),-0)?e="-0":e=String(e),Yh(e))return t;const i=n[e];return i===void 0?t:i}}}function Sde(n,e,t){if(e.length===0)return t;let i=n;for(let s=0;s<e.length;s++){if(i==null||Yh(e[s]))return t;i=i[e[s]]}return i===void 0?t:i}function Tde(n){return function(e){return ol(e,n)}}function Fi(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function Dm(n){return n==null||typeof n!="object"&&typeof n!="function"}function Kh(n,e){return n===e||Number.isNaN(n)&&Number.isNaN(e)}function Ide(n,e,t){return typeof t!="function"?cE(n,e):wC(n,e,function i(s,r,o,a,c,d){const h=t(s,r,o,a,c,d);return h!==void 0?!!h:wC(s,r,i,d)},new Map)}function wC(n,e,t,i){if(e===n)return!0;switch(typeof e){case"object":return Rde(n,e,t,i);case"function":return Object.keys(e).length>0?wC(n,{...e},t,i):Kh(n,e);default:return Fi(n)?typeof e=="string"?e==="":!0:Kh(n,e)}}function Rde(n,e,t,i){if(e==null)return!0;if(Array.isArray(e))return WF(n,e,t,i);if(e instanceof Map)return Pde(n,e,t,i);if(e instanceof Set)return Ode(n,e,t,i);const s=Object.keys(e);if(n==null)return s.length===0;if(s.length===0)return!0;if(i&&i.has(e))return i.get(e)===n;i&&i.set(e,n);try{for(let r=0;r<s.length;r++){const o=s[r];if(!Dm(n)&&!(o in n)||e[o]===void 0&&n[o]!==void 0||e[o]===null&&n[o]!==null||!t(n[o],e[o],o,n,e,i))return!1}return!0}finally{i&&i.delete(e)}}function Pde(n,e,t,i){if(e.size===0)return!0;if(!(n instanceof Map))return!1;for(const[s,r]of e.entries()){const o=n.get(s);if(t(o,r,s,n,e,i)===!1)return!1}return!0}function WF(n,e,t,i){if(e.length===0)return!0;if(!Array.isArray(n))return!1;const s=new Set;for(let r=0;r<e.length;r++){const o=e[r];let a=!1;for(let c=0;c<n.length;c++){if(s.has(c))continue;const d=n[c];let h=!1;if(t(d,o,r,n,e,i)&&(h=!0),h){s.add(c),a=!0;break}}if(!a)return!1}return!0}function Ode(n,e,t,i){return e.size===0?!0:n instanceof Set?WF([...n],[...e],t,i):!1}function cE(n,e){return Ide(n,e,()=>{})}function mw(n){return Object.getOwnPropertySymbols(n).filter(e=>Object.prototype.propertyIsEnumerable.call(n,e))}function bd(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const $v="[object RegExp]",wd="[object String]",Mm="[object Number]",Bm="[object Boolean]",vd="[object Arguments]",Gv="[object Symbol]",Yv="[object Date]",Kv="[object Map]",qv="[object Set]",uE="[object Array]",Dde="[object Function]",Qv="[object ArrayBuffer]",ph="[object Object]",Mde="[object Error]",Zv="[object DataView]",dE="[object Uint8Array]",fE="[object Uint8ClampedArray]",hE="[object Uint16Array]",mE="[object Uint32Array]",Bde="[object BigUint64Array]",gE="[object Int8Array]",pE="[object Int16Array]",bE="[object Int32Array]",Nde="[object BigInt64Array]",wE="[object Float32Array]",vE="[object Float64Array]";function yE(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Vde(n,e){return ec(n,void 0,n,new Map,e)}function ec(n,e,t,i=new Map,s=void 0){const r=s?.(n,e,t,i);if(r!=null)return r;if(Dm(n))return n;if(i.has(n))return i.get(n);if(Array.isArray(n)){const o=new Array(n.length);i.set(n,o);for(let a=0;a<n.length;a++)o[a]=ec(n[a],a,t,i,s);return Object.hasOwn(n,"index")&&(o.index=n.index),Object.hasOwn(n,"input")&&(o.input=n.input),o}if(n instanceof Date)return new Date(n.getTime());if(n instanceof RegExp){const o=new RegExp(n.source,n.flags);return o.lastIndex=n.lastIndex,o}if(n instanceof Map){const o=new Map;i.set(n,o);for(const[a,c]of n)o.set(a,ec(c,a,t,i,s));return o}if(n instanceof Set){const o=new Set;i.set(n,o);for(const a of n)o.add(ec(a,void 0,t,i,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(n))return n.subarray();if(yE(n)){const o=new(Object.getPrototypeOf(n)).constructor(n.length);i.set(n,o);for(let a=0;a<n.length;a++)o[a]=ec(n[a],a,t,i,s);return o}if(n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);if(n instanceof DataView){const o=new DataView(n.buffer.slice(0),n.byteOffset,n.byteLength);return i.set(n,o),Ql(o,n,t,i,s),o}if(typeof File<"u"&&n instanceof File){const o=new File([n],n.name,{type:n.type});return i.set(n,o),Ql(o,n,t,i,s),o}if(n instanceof Blob){const o=new Blob([n],{type:n.type});return i.set(n,o),Ql(o,n,t,i,s),o}if(n instanceof Error){const o=new n.constructor;return i.set(n,o),o.message=n.message,o.name=n.name,o.stack=n.stack,o.cause=n.cause,Ql(o,n,t,i,s),o}if(typeof n=="object"&&Lde(n)){const o=Object.create(Object.getPrototypeOf(n));return i.set(n,o),Ql(o,n,t,i,s),o}return n}function Ql(n,e,t=n,i,s){const r=[...Object.keys(e),...mw(e)];for(let o=0;o<r.length;o++){const a=r[o],c=Object.getOwnPropertyDescriptor(n,a);(c==null||c.writable)&&(n[a]=ec(e[a],a,t,i,s))}}function Lde(n){switch(bd(n)){case vd:case uE:case Qv:case Zv:case Bm:case Yv:case wE:case vE:case gE:case pE:case bE:case Kv:case Mm:case ph:case $v:case qv:case wd:case Gv:case dE:case fE:case hE:case mE:return!0;default:return!1}}function Fde(n){return ec(n,void 0,n,new Map,void 0)}function zde(n){return n=Fde(n),e=>cE(e,n)}function Jv(n,e){return Vde(n,(t,i,s,r)=>{const o=e?.(t,i,s,r);if(o!=null)return o;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case Mm:case wd:case Bm:{const a=new n.constructor(n?.valueOf());return Ql(a,n),a}case vd:{const a={};return Ql(a,n),a.length=n.length,a[Symbol.iterator]=n[Symbol.iterator],a}default:return}})}function zi(n){return Jv(n)}const jde=/^(?:0|[1-9]\d*)$/;function $F(n,e=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<e;case"symbol":return!1;case"string":return jde.test(n)}}function vC(n){return n!==null&&typeof n=="object"&&bd(n)==="[object Arguments]"}function Ude(n,e){let t;if(Array.isArray(e)?t=e:typeof e=="string"&&HF(e)&&n?.[e]==null?t=lE(e):t=[e],t.length===0)return!1;let i=n;for(let s=0;s<t.length;s++){const r=t[s];if((i==null||!Object.hasOwn(i,r))&&!((Array.isArray(i)||vC(i))&&$F(r)&&r<i.length))return!1;i=i[r]}return!0}function Hde(n,e){switch(typeof n){case"object":{Object.is(n?.valueOf(),-0)&&(n="-0");break}case"number":{n=aE(n);break}}return e=zi(e),function(t){const i=ol(t,n);return i===void 0?Ude(t,n):e===void 0?i===void 0:cE(i,e)}}function Wde(n){if(n==null)return UF;switch(typeof n){case"function":return n;case"object":return Array.isArray(n)&&n.length===2?Hde(n[0],n[1]):zde(n);case"string":case"symbol":case"number":return Tde(n)}}function yC(n){return typeof n=="object"&&n!==null}function GF(n){return typeof n=="symbol"||n instanceof Symbol}function $de(n){return GF(n)?NaN:Number(n)}function Gde(n){return n?(n=$de(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}function Yde(n){const e=Gde(n),t=e%1;return t?e-t:e}function YP(n){return typeof n=="string"||n instanceof String}const Kde=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qde=/^\w*$/;function Qde(n,e){return Array.isArray(n)?!1:typeof n=="number"||typeof n=="boolean"||n==null||GF(n)?!0:typeof n=="string"&&(qde.test(n)||!Kde.test(n))||e!=null&&Object.hasOwn(e,n)}function Zde(n){return Array.isArray(n)}function Wf(n){return n}const Jde=(n,e,t)=>{const i=n[e];(!(Object.hasOwn(n,e)&&Kh(i,t))||t===void 0&&!(e in n))&&(n[e]=t)};function Xde(n,e,t,i){if(n==null&&!Fi(n))return n;const s=Qde(e,n)?[e]:Array.isArray(e)?e:typeof e=="string"?lE(e):[e];let r=n;for(let o=0;o<s.length&&r!=null;o++){const a=aE(s[o]);if(Yh(a))continue;let c;if(o===s.length-1)c=t(r[a]);else{const d=r[a],h=i?.(d,a,n);c=h!==void 0?h:Fi(d)?d:$F(s[o+1])?[]:{}}Jde(r,a,c),r=r[a]}return n}function YF(n,e,t){return Xde(n,e,()=>t,()=>{})}function efe(n,e,{signal:t,edges:i}={}){let s,r=null;const o=i!=null&&i.includes("leading"),a=i==null||i.includes("trailing"),c=()=>{r!==null&&(n.apply(s,r),s=void 0,r=null)},d=()=>{a&&c(),w()};let h=null;const m=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,d()},e)},p=()=>{h!==null&&(clearTimeout(h),h=null)},w=()=>{p(),s=void 0,r=null},A=()=>{p(),c()},C=function(...k){if(t?.aborted)return;s=this,r=k;const E=h==null;m(),o&&E&&c()};return C.schedule=m,C.cancel=w,C.flush=A,t?.addEventListener("abort",w,{once:!0}),C}function Ts(n,e=0,t={}){typeof t!="object"&&(t={});const{leading:i=!1,trailing:s=!0,maxWait:r}=t,o=Array(2);i&&(o[0]="leading"),s&&(o[1]="trailing");let a,c=null;const d=efe(function(...p){a=n.apply(this,p),c=null},e,{edges:o}),h=function(...p){return r!=null&&(c===null&&(c=Date.now()),Date.now()-c>=r)?(a=n.apply(this,p),c=Date.now(),d.cancel(),d.schedule(),a):(d.apply(this,p),a)},m=()=>(d.flush(),a);return h.cancel=d.cancel,h.flush=m,h}function hc(n,e=0,t={}){typeof t!="object"&&(t={});const{leading:i=!0,trailing:s=!0}=t;return Ts(n,e,{leading:i,trailing:s,maxWait:e})}function Xv(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(Xv).join(",");const e=String(n);return e==="0"&&Object.is(Number(n),-0)?"-0":e}function KP(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(n)==="[object Object]":!1}function KF(n,e,t){return ah(n,e,void 0,void 0,void 0,void 0,t)}function ah(n,e,t,i,s,r,o){const a=o(n,e,t,i,s,r);if(a!==void 0)return a;if(typeof n==typeof e)switch(typeof n){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return n===e;case"number":return n===e||Object.is(n,e);case"function":return n===e;case"object":return bh(n,e,r,o)}return bh(n,e,r,o)}function bh(n,e,t,i){if(Object.is(n,e))return!0;let s=bd(n),r=bd(e);if(s===vd&&(s=ph),r===vd&&(r=ph),s!==r)return!1;switch(s){case wd:return n.toString()===e.toString();case Mm:{const c=n.valueOf(),d=e.valueOf();return Kh(c,d)}case Bm:case Yv:case Gv:return Object.is(n.valueOf(),e.valueOf());case $v:return n.source===e.source&&n.flags===e.flags;case Dde:return n===e}t=t??new Map;const o=t.get(n),a=t.get(e);if(o!=null&&a!=null)return o===e;t.set(n,e),t.set(e,n);try{switch(s){case Kv:{if(n.size!==e.size)return!1;for(const[c,d]of n.entries())if(!e.has(c)||!ah(d,e.get(c),c,n,e,t,i))return!1;return!0}case qv:{if(n.size!==e.size)return!1;const c=Array.from(n.values()),d=Array.from(e.values());for(let h=0;h<c.length;h++){const m=c[h],p=d.findIndex(w=>ah(m,w,void 0,n,e,t,i));if(p===-1)return!1;d.splice(p,1)}return!0}case uE:case dE:case fE:case hE:case mE:case Bde:case gE:case pE:case bE:case Nde:case wE:case vE:{if(typeof Buffer<"u"&&Buffer.isBuffer(n)!==Buffer.isBuffer(e)||n.length!==e.length)return!1;for(let c=0;c<n.length;c++)if(!ah(n[c],e[c],c,n,e,t,i))return!1;return!0}case Qv:return n.byteLength!==e.byteLength?!1:bh(new Uint8Array(n),new Uint8Array(e),t,i);case Zv:return n.byteLength!==e.byteLength||n.byteOffset!==e.byteOffset?!1:bh(new Uint8Array(n),new Uint8Array(e),t,i);case Mde:return n.name===e.name&&n.message===e.message;case ph:{if(!(bh(n.constructor,e.constructor,t,i)||KP(n)&&KP(e)))return!1;const d=[...Object.keys(n),...mw(n)],h=[...Object.keys(e),...mw(e)];if(d.length!==h.length)return!1;for(let m=0;m<d.length;m++){const p=d[m],w=n[p];if(!Object.hasOwn(e,p))return!1;const A=e[p];if(!ah(w,A,p,n,e,t,i))return!1}return!0}default:return!1}}finally{t.delete(n),t.delete(e)}}function qF(){}function yd(n,e){return KF(n,e,qF)}function tfe(n){return typeof Buffer<"u"&&Buffer.isBuffer(n)}function nfe(n){const e=n?.constructor,t=typeof e=="function"?e.prototype:Object.prototype;return n===t}function AE(n){return yE(n)}function ife(n,e){if(n=Yde(n),n<1||!Number.isSafeInteger(n))return[];const t=new Array(n);for(let i=0;i<n;i++)t[i]=typeof e=="function"?e(i):i;return t}function sfe(n){if(n==null)return[];switch(typeof n){case"object":case"function":return Ede(n)?ofe(n):nfe(n)?rfe(n):gw(n);default:return gw(Object(n))}}function gw(n){const e=[];for(const t in n)e.push(t);return e}function rfe(n){return gw(n).filter(t=>t!=="constructor")}function ofe(n){const e=ife(n.length,i=>`${i}`),t=new Set(e);return tfe(n)&&(t.add("offset"),t.add("parent")),AE(n)&&(t.add("buffer"),t.add("byteLength"),t.add("byteOffset")),[...e,...gw(n).filter(i=>!t.has(i))]}function QF(n,...e){for(let t=0;t<e.length;t++)afe(n,e[t]);return n}function afe(n,e){const t=sfe(e);for(let i=0;i<t.length;i++){const s=t[i];(!(s in n)||!Kh(n[s],e[s]))&&(n[s]=e[s])}}function lfe(n){if(Dm(n))return n;const e=bd(n);if(!cfe(n))return{};if(Zde(n)){const i=Array.from(n);return n.length>0&&typeof n[0]=="string"&&Object.hasOwn(n,"index")&&(i.index=n.index,i.input=n.input),i}if(AE(n)){const i=n,s=i.constructor;return new s(i.buffer,i.byteOffset,i.length)}if(e===Qv)return new ArrayBuffer(n.byteLength);if(e===Zv){const i=n,s=i.buffer,r=i.byteOffset,o=i.byteLength,a=new ArrayBuffer(o),c=new Uint8Array(s,r,o);return new Uint8Array(a).set(c),new DataView(a)}if(e===Bm||e===Mm||e===wd){const i=n.constructor,s=new i(n.valueOf());return e===wd?dfe(s,n):A_(s,n),s}if(e===Yv)return new Date(Number(n));if(e===$v){const i=n,s=new RegExp(i.source,i.flags);return s.lastIndex=i.lastIndex,s}if(e===Gv)return Object(Symbol.prototype.valueOf.call(n));if(e===Kv){const i=n,s=new Map;return i.forEach((r,o)=>{s.set(o,r)}),s}if(e===qv){const i=n,s=new Set;return i.forEach(r=>{s.add(r)}),s}if(e===vd){const i=n,s={};return A_(s,i),s.length=i.length,s[Symbol.iterator]=i[Symbol.iterator],s}const t={};return ffe(t,n),A_(t,n),ufe(t,n),t}function cfe(n){switch(bd(n)){case vd:case uE:case Qv:case Zv:case Bm:case Yv:case wE:case vE:case gE:case pE:case bE:case Kv:case Mm:case ph:case $v:case qv:case wd:case Gv:case dE:case fE:case hE:case mE:return!0;default:return!1}}function A_(n,e){for(const t in e)Object.hasOwn(e,t)&&(n[t]=e[t])}function ufe(n,e){const t=Object.getOwnPropertySymbols(e);for(let i=0;i<t.length;i++){const s=t[i];Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}}function dfe(n,e){const t=e.valueOf().length;for(const i in e)Object.hasOwn(e,i)&&(Number.isNaN(Number(i))||Number(i)>=t)&&(n[i]=e[i])}function ffe(n,e){const t=Object.getPrototypeOf(e);t!==null&&typeof e.constructor=="function"&&Object.setPrototypeOf(n,t)}function pr(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const t=n[Symbol.toStringTag];return t==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${t}]`}let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function hfe(n,e){const t={},i=Object.keys(n);for(let s=0;s<i.length;s++){const r=i[s],o=n[r];t[r]=e(o,r,n)}return t}function mfe(n,e=UF){return n==null?{}:hfe(n,Wde(e))}function gfe(n){if(Dm(n))return n;if(Array.isArray(n)||yE(n)||n instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&n instanceof SharedArrayBuffer)return n.slice(0);const e=Object.getPrototypeOf(n),t=e.constructor;if(n instanceof Date||n instanceof Map||n instanceof Set)return new t(n);if(n instanceof RegExp){const i=new t(n);return i.lastIndex=n.lastIndex,i}if(n instanceof DataView)return new t(n.buffer.slice(0));if(n instanceof Error){const i=new t(n.message);return i.stack=n.stack,i.name=n.name,i.cause=n.cause,i}if(typeof File<"u"&&n instanceof File)return new t([n],n.name,{type:n.type,lastModified:n.lastModified});if(typeof n=="object"){const i=Object.create(e);return Object.assign(i,n)}return n}function ZF(n,...e){const t=e.slice(0,-1),i=e[e.length-1];let s=n;for(let r=0;r<t.length;r++){const o=t[r];s=vb(s,o,i,new Map)}return s}function vb(n,e,t,i){if(Dm(n)&&(n=Object(n)),e==null||typeof e!="object")return n;if(i.has(e))return gfe(i.get(e));if(i.set(e,n),Array.isArray(e)){e=e.slice();for(let r=0;r<e.length;r++)e[r]=e[r]??void 0}const s=[...Object.keys(e),...mw(e)];for(let r=0;r<s.length;r++){const o=s[r];if(Yh(o))continue;let a=e[o],c=n[o];if(vC(a)&&(a={...a}),vC(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=zi(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const h=[],m=Reflect.ownKeys(c);for(let p=0;p<m.length;p++){const w=m[p];h[w]=c[w]}c=h}else c=[];const d=t(c,a,o,n,e,i);d!=null?n[o]=d:Array.isArray(a)||yC(c)&&yC(a)?n[o]=vb(c,a,t,i):c==null&&pr(a)?n[o]=vb({},a,t,i):c==null&&AE(a)?n[o]=zi(a):(c===void 0||a!==void 0)&&(n[o]=a)}return n}function _E(n,...e){return ZF(n,...e,qF)}function pw(n){return typeof n=="function"}function ca(n){return yC(n)&&n.nodeType===1&&!pr(n)}function qP(n,e){if(!Number.isInteger(n)||n<0)throw new Error("n must be a non-negative integer.");let t=0;return(...i)=>{if(++t>=n)return e(...i)}}function AC(n,e,t){return typeof t!="function"&&(t=()=>{}),KF(n,e,(...i)=>{const s=t(...i);if(s!==void 0)return!!s;if(n instanceof Map&&e instanceof Map||n instanceof Set&&e instanceof Set)return AC(Array.from(n),Array.from(e),qP(2,t))})}const pfe=new RegExp("\\p{Lu}?\\p{Ll}+|[0-9]+|\\p{Lu}+(?!\\p{Ll})|\\p{Emoji_Presentation}|\\p{Extended_Pictographic}|\\p{L}+","gu");function bfe(n){return Array.from(n.match(pfe)??[])}function wfe(n){return typeof n!="string"&&(n=Xv(n)),n.replace(/['\u2019]/g,"")}function vfe(n){return n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}function JF(n){return vfe(Xv(n))}function yfe(n){const e=bfe(wfe(n).trim());let t="";for(let i=0;i<e.length;i++){const s=e[i];t&&(t+=" "),s===s.toUpperCase()?t+=s:t+=s[0].toUpperCase()+s.slice(1).toLowerCase()}return t}function Afe(n){return n.substring(0,1).toUpperCase()+n.substring(1)}function _fe(n){return Afe(Xv(n))}let me;try{me={window,document}}catch{me={window:{},document:{}}}function Cfe(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const $l=Cfe(),Pe={isMac:XF($l),isWindows:xfe($l),isGecko:kfe($l),isSafari:Efe($l),isiOS:Sfe($l),isAndroid:Tfe($l),isBlink:Ife($l),get isMediaForcedColors(){return Pfe()},features:{isRegExpUnicodePropertySupported:Rfe()}};function XF(n){return n.indexOf("macintosh")>-1}function xfe(n){return n.indexOf("windows")>-1}function kfe(n){return!!n.match(/gecko\/\d+/)}function Efe(n){return n.indexOf(" applewebkit/")>-1&&n.indexOf("chrome")===-1}function Sfe(n){return!!n.match(/iphone|ipad/i)||XF(n)&&navigator.maxTouchPoints>0}function Tfe(n){return n.indexOf("android")>-1}function Ife(n){return n.indexOf("chrome/")>-1&&n.indexOf("edge/")<0}function Rfe(){let n=!1;try{n="".search(new RegExp("[\\p{L}]","u"))===0}catch{}return n}function Pfe(){return me.window.matchMedia?me.window.matchMedia("(forced-colors: active)").matches:!1}function e6(n,e,t,i){t=t||function(c,d){return c===d};const s=Array.isArray(n)?n:Array.prototype.slice.call(n),r=Array.isArray(e)?e:Array.prototype.slice.call(e),o=Ofe(s,r,t);return i?Mfe(o,r.length):Dfe(r,o)}function Ofe(n,e,t){const i=QP(n,e,t);if(i===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const s=ZP(n,i),r=ZP(e,i),o=QP(s,r,t),a=n.length-o,c=e.length-o;return{firstIndex:i,lastIndexOld:a,lastIndexNew:c}}function QP(n,e,t){for(let i=0;i<Math.max(n.length,e.length);i++)if(n[i]===void 0||e[i]===void 0||!t(n[i],e[i]))return i;return-1}function ZP(n,e){return n.slice(e).reverse()}function Dfe(n,e){const t=[],{firstIndex:i,lastIndexOld:s,lastIndexNew:r}=e;return r-i>0&&t.push({index:i,type:"insert",values:n.slice(i,r)}),s-i>0&&t.push({index:i+(r-i),type:"delete",howMany:s-i}),t}function Mfe(n,e){const{firstIndex:t,lastIndexOld:i,lastIndexNew:s}=n;if(t===-1)return Array(e).fill("equal");let r=[];return t>0&&(r=r.concat(Array(t).fill("equal"))),s-t>0&&(r=r.concat(Array(s-t).fill("insert"))),i-t>0&&(r=r.concat(Array(i-t).fill("delete"))),s<e&&(r=r.concat(Array(e-s).fill("equal"))),r}function sd(n,e,t){t=t||function(C,k){return C===k};const i=n.length,s=e.length;if(i>200||s>200||i+s>300)return sd.fastDiff(n,e,t,!0);let r,o;if(s<i){const C=n;n=e,e=C,r="delete",o="insert"}else r="insert",o="delete";const a=n.length,c=e.length,d=c-a,h={},m={};function p(C){const k=(m[C-1]!==void 0?m[C-1]:-1)+1,E=m[C+1]!==void 0?m[C+1]:-1,S=k>E?-1:1;h[C+S]&&(h[C]=h[C+S].slice(0)),h[C]||(h[C]=[]),h[C].push(k>E?r:o);let I=Math.max(k,E),R=I-C;for(;R<a&&I<c&&t(n[R],e[I]);)R++,I++,h[C].push("equal");return I}let w=0,A;do{for(A=-w;A<d;A++)m[A]=p(A);for(A=d+w;A>d;A--)m[A]=p(A);m[d]=p(d),w++}while(m[d]!==c);return h[d].slice(1)}sd.fastDiff=e6;function JP(){return function n(){n.called=!0}}class ua{source;name;path;stop;off;return;constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=JP(),this.off=JP()}}const ki=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function li(){const[n,e,t,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+ki[n>>0&255]+ki[n>>8&255]+ki[n>>16&255]+ki[n>>24&255]+ki[e>>0&255]+ki[e>>8&255]+ki[e>>16&255]+ki[e>>24&255]+ki[t>>0&255]+ki[t>>8&255]+ki[t>>16&255]+ki[t>>24&255]+ki[i>>0&255]+ki[i>>8&255]+ki[i>>16&255]+ki[i>>24&255]}const rs={get(n="normal"){return typeof n!="number"?this[n]||this.normal:n},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function t6(n,e){const t=rs.get(e.priority);let i=0,s=n.length;for(;i<s;){const r=i+s>>1;rs.get(n[r].priority)<t?s=r:i=r+1}n.splice(i,0,e)}const Bfe="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class D extends Error{context;data;constructor(e,t,i,s){super(Vfe(e,i,s)),this.name="CKEditorError",this.context=t,this.data=i,s&&(this.stack=s.stack)}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,t){throw e.is&&e.is("CKEditorError")?e:new D("unexpected-error",t,void 0,e)}}function lt(n,e){console.warn(...i6(n,e))}function Nfe(n,e){console.error(...i6(n,e))}function n6(n){return`
Read more: ${Bfe}#error-${n}`}function Vfe(n,e,t){const i=new WeakSet,r=e?` ${JSON.stringify(e,(c,d)=>{if(typeof d=="object"&&d!==null){if(i.has(d))return`[object ${d.constructor.name}]`;i.add(d)}return d})}`:"",o=n6(n),a=t?`
Original error: ${t.name}: ${t.message}`:"";return n+r+o+a}function i6(n,e){const t=n6(n);return e?[n,e,t]:[n,t]}const Lfe="47.4.0",Ffe=new Date(2026,0,14);if(globalThis.CKEDITOR_VERSION)throw new D("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=Lfe;const ju=Symbol("listeningTo"),_C=Symbol("emitterId"),Lo=Symbol("delegations"),zfe=Ot(Object);function Ot(n){if(!n)return zfe;class e extends n{on(i,s,r){this.listenTo(this,i,s,r)}once(i,s,r){let o=!1;const a=(c,...d)=>{o||(o=!0,c.off(),s.call(this,c,...d))};this.listenTo(this,i,a,r)}off(i,s){this.stopListening(this,i,s)}listenTo(i,s,r,o={}){let a,c;this[ju]||(this[ju]={});const d=this[ju];__(i)||s6(i);const h=__(i);(a=d[h])||(a=d[h]={emitter:i,callbacks:{}}),(c=a.callbacks[s])||(c=a.callbacks[s]=[]),c.push(r),$fe(this,i,s,r,o)}stopListening(i,s,r){const o=this[ju];let a=i&&__(i);const c=o&&a?o[a]:void 0,d=c&&s?c.callbacks[s]:void 0;if(!(!o||i&&!c||s&&!d))if(r)C_(this,i,s,r),d.indexOf(r)!==-1&&(d.length===1?delete c.callbacks[s]:C_(this,i,s,r));else if(d){for(;r=d.pop();)C_(this,i,s,r);delete c.callbacks[s]}else if(c){for(s in c.callbacks)this.stopListening(i,s);delete o[a]}else{for(a in o)this.stopListening(o[a].emitter);delete this[ju]}}fire(i,...s){try{const r=i instanceof ua?i:new ua(this,i),o=r.name;let a=Wfe(this,o);if(r.path.push(this),a){a=a.slice();for(let d=0;d<a.length;d++){const h=a[d].callback;if(h.call(this,r,...s),r.off.called&&(delete r.off.called,this._removeEventListener(o,h)),r.stop.called)break}}const c=this[Lo];if(c){const d=c.get(o),h=c.get("*");d&&XP(d,r,s),h&&XP(h,r,s)}return r.return}catch(r){D.rethrowUnexpectedError(r,this)}}delegate(...i){return{to:(s,r)=>{this[Lo]||(this[Lo]=new Map),i.forEach(o=>{const a=this[Lo].get(o);a?a.set(s,r):this[Lo].set(o,new Map([[s,r]]))})}}}stopDelegating(i,s){if(this[Lo])if(!i)this[Lo].clear();else if(!s)this[Lo].delete(i);else{const r=this[Lo].get(i);r&&r.delete(s)}}_addEventListener(i,s,r){Hfe(this,i);const o=CC(this,i),a=rs.get(r.priority),c={callback:s,priority:a};for(const d of o)t6(d,c)}_removeEventListener(i,s){const r=CC(this,i);for(const o of r)for(let a=0;a<o.length;a++)o[a].callback==s&&(o.splice(a,1),a--)}}return e}function jfe(n,e){const t=n[ju];return t&&t[e]?t[e].emitter:null}function s6(n,e){n[_C]||(n[_C]=e||li())}function __(n){return n[_C]}function r6(n){return n._events||Object.defineProperty(n,"_events",{value:{}}),n._events}function Ufe(){return{callbacks:[],childEvents:[]}}function Hfe(n,e){const t=r6(n);if(t[e])return;let i=e,s=null;const r=[];for(;i!==""&&!t[i];)t[i]=Ufe(),r.push(t[i]),s&&t[i].childEvents.push(s),s=i,i=i.substr(0,i.lastIndexOf(":"));if(i!==""){for(const o of r)o.callbacks=t[i].callbacks.slice();t[i].childEvents.push(s)}}function CC(n,e){const t=r6(n)[e];if(!t)return[];let i=[t.callbacks];for(let s=0;s<t.childEvents.length;s++){const r=CC(n,t.childEvents[s]);i=i.concat(r)}return i}function Wfe(n,e){if(!n._events)return null;let t=e;do{const i=n._events[t];if(i&&i.callbacks&&i.callbacks.length)return i.callbacks;const s=t.lastIndexOf(":");t=s>-1?t.substring(0,s):""}while(t);return null}function XP(n,e,t){for(let[i,s]of n){s?typeof s=="function"&&(s=s(e.name)):s=e.name;const r=new ua(e.source,s);r.path=[...e.path],i.fire(r,...t)}}function $fe(n,e,t,i,s){e._addEventListener?e._addEventListener(t,i,s):n._addEventListener.call(e,t,i,s)}function C_(n,e,t,i){e._removeEventListener?e._removeEventListener(t,i):n._removeEventListener.call(e,t,i)}const wh=Symbol("observableProperties"),qh=Symbol("boundObservables"),vh=Symbol("boundProperties"),Gl=Symbol("decoratedMethods"),eO=Symbol("decoratedOriginal"),Gfe=kt(Ot());function kt(n){if(!n)return Gfe;class e extends n{set(i,s){if(Fi(i)){Object.keys(i).forEach(o=>{this.set(o,i[o])},this);return}x_(this);const r=this[wh];if(i in this&&!r.has(i))throw new D("observable-set-cannot-override",this);Object.defineProperty(this,i,{enumerable:!0,configurable:!0,get(){return r.get(i)},set(o){const a=r.get(i);let c=this.fire(`set:${i}`,i,o,a);c===void 0&&(c=o),(a!==c||!r.has(i))&&(r.set(i,c),this.fire(`change:${i}`,i,c,a))}}),this[i]=s}bind(...i){if(!i.length||!tO(i))throw new D("observable-bind-wrong-properties",this);if(new Set(i).size!==i.length)throw new D("observable-bind-duplicate-properties",this);x_(this);const s=this[vh];i.forEach(o=>{if(s.has(o))throw new D("observable-bind-rebind",this)});const r=new Map;return i.forEach(o=>{const a={property:o,to:[]};s.set(o,a),r.set(o,a)}),{to:Yfe,toMany:Kfe,_observable:this,_bindProperties:i,_to:[],_bindings:r}}unbind(...i){if(!this[wh])return;const s=this[vh],r=this[qh];if(i.length){if(!tO(i))throw new D("observable-unbind-wrong-properties",this);i.forEach(o=>{const a=s.get(o);a&&(a.to.forEach(([c,d])=>{const h=r.get(c),m=h[d];m.delete(a),m.size||delete h[d],Object.keys(h).length||(r.delete(c),this.stopListening(c,"change"))}),s.delete(o))})}else r.forEach((o,a)=>{this.stopListening(a,"change")}),r.clear(),s.clear()}decorate(i){x_(this);const s=this[i];if(!s)throw new D("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:i});this.on(i,(r,o)=>{r.return=s.apply(this,o)}),this[i]=function(...r){return this.fire(i,r)},this[i][eO]=s,this[Gl]||(this[Gl]=[]),this[Gl].push(i)}stopListening(i,s,r){if(!i&&this[Gl]){for(const o of this[Gl])this[o]=this[o][eO];delete this[Gl]}super.stopListening(i,s,r)}[wh];[Gl];[vh];[qh]}return e}function x_(n){n[wh]||(Object.defineProperty(n,wh,{value:new Map}),Object.defineProperty(n,qh,{value:new Map}),Object.defineProperty(n,vh,{value:new Map}))}function Yfe(...n){const e=Qfe(...n),t=Array.from(this._bindings.keys()),i=t.length;if(!e.callback&&e.to.length>1)throw new D("observable-bind-to-no-callback",this);if(i>1&&e.callback)throw new D("observable-bind-to-extra-callback",this);e.to.forEach(s=>{if(s.properties.length&&s.properties.length!==i)throw new D("observable-bind-to-properties-length",this);s.properties.length||(s.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),Xfe(this._observable,this._to),Jfe(this),this._bindProperties.forEach(s=>{o6(this._observable,s)})}function Kfe(n,e,t){if(this._bindings.size>1)throw new D("observable-bind-to-many-not-one-binding",this);this.to(...qfe(n,e),t)}function qfe(n,e){const t=n.map(i=>[i,e]);return Array.prototype.concat.apply([],t)}function tO(n){return n.every(e=>typeof e=="string")}function Qfe(...n){if(!n.length)throw new D("observable-bind-to-parse-error",null);const e={to:[]};let t;return typeof n[n.length-1]=="function"&&(e.callback=n.pop()),n.forEach(i=>{if(typeof i=="string")t.properties.push(i);else if(typeof i=="object")t={observable:i,properties:[]},e.to.push(t);else throw new D("observable-bind-to-parse-error",null)}),e}function Zfe(n,e,t,i){const s=n[qh],r=s.get(t),o=r||{};o[i]||(o[i]=new Set),o[i].add(e),r||s.set(t,o)}function Jfe(n){let e;n._bindings.forEach((t,i)=>{n._to.forEach(s=>{e=s.properties[t.callback?0:n._bindProperties.indexOf(i)],t.to.push([s.observable,e]),Zfe(n._observable,t,s.observable,e)})})}function o6(n,e){const i=n[vh].get(e);let s;i.callback?s=i.callback.apply(n,i.to.map(r=>r[0][r[1]])):(s=i.to[0],s=s[0][s[1]]),Object.prototype.hasOwnProperty.call(n,e)?n[e]=s:n.set(e,s)}function Xfe(n,e){e.forEach(t=>{const i=n[qh];let s;i.get(t.observable)||n.listenTo(t.observable,"change",(r,o)=>{s=i.get(t.observable)[o],s&&s.forEach(a=>{o6(n,a.property)})})})}class a6{_replacedElements;constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}}function xC(n){let e=0;for(const t of n)e++;return e}function ri(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)if(n[i]!=e[i])return i;return n.length==e.length?"same":n.length<e.length?"prefix":"extension"}function Is(n){return!!(n&&n[Symbol.iterator])}function si(n,e,t={},i=[]){const s=t&&t.xmlns,r=s?n.createElementNS(s,e):n.createElement(e);for(const o in t)r.setAttribute(o,t[o]);(YP(i)||!Is(i))&&(i=[i]);for(let o of i)YP(o)&&(o=n.createTextNode(o)),r.appendChild(o);return r}class l6{_config;constructor(e,t){this._config=Object.create(null),t&&this.define(nO(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(const e of Object.keys(this._config))yield e}_setToTarget(e,t,i,s=!1){if(pr(t)){this._setObjectToTarget(e,t,s);return}const r=t.split(".");t=r.pop();for(const o of r)pr(e[o])||(e[o]=Object.create(null)),e=e[o];if(pr(i)){pr(e[t])||(e[t]=Object.create(null)),e=e[t],this._setObjectToTarget(e,i,s);return}s&&typeof e[t]<"u"||(e[t]=i)}_getFromSource(e,t){const i=t.split(".");t=i.pop();for(const s of i){if(!pr(e[s])){e=null;break}e=e[s]}return e?nO(e[t]):void 0}_setObjectToTarget(e,t,i){Object.keys(t).forEach(s=>{this._setToTarget(e,s,t[s],i)})}}function nO(n){return Jv(n,ehe)}function ehe(n){return ca(n)||typeof n=="function"?n:void 0}function al(n){if(n){if(n.defaultView)return n instanceof n.defaultView.Document;if(n.ownerDocument&&n.ownerDocument.defaultView)return n instanceof n.ownerDocument.defaultView.Node}return!1}function bw(n){const e=Object.prototype.toString.apply(n);return e=="[object Window]"||e=="[object global]"}const the=Wi(Ot());function Wi(n){if(!n)return the;class e extends n{listenTo(i,s,r,o={}){if(al(i)||bw(i)||i instanceof me.window.EventTarget){const a={capture:!!o.useCapture,passive:!!o.usePassive},c=this._getProxyEmitter(i,a)||new nhe(i,a);this.listenTo(c,s,r,o)}else super.listenTo(i,s,r,o)}stopListening(i,s,r){if(al(i)||bw(i)||i instanceof me.window.EventTarget){const o=this._getAllProxyEmitters(i);for(const a of o)this.stopListening(a,s,r)}else super.stopListening(i,s,r)}_getProxyEmitter(i,s){return jfe(this,c6(i,s))}_getAllProxyEmitters(i){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(s=>this._getProxyEmitter(i,s)).filter(s=>!!s)}}return e}class nhe extends Ot(){_domNode;_options;constructor(e,t){super(),s6(this,c6(e,t)),this._domNode=e,this._options=t}_domListeners;attach(e){if(this._domListeners&&this._domListeners[e])return;const t=this._createDomListener(e);this._domNode.addEventListener(e,t,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=t}detach(e){let t;this._domListeners[e]&&(!(t=this._events[e])||!t.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,t,i){this.attach(e),Ot().prototype._addEventListener.call(this,e,t,i)}_removeEventListener(e,t){Ot().prototype._removeEventListener.call(this,e,t),this.detach(e)}_createDomListener(e){const t=i=>{this.fire(e,i)};return t.removeListener=()=>{this._domNode.removeEventListener(e,t,this._options),delete this._domListeners[e]},t}}function ihe(n){return n["data-ck-expando"]||(n["data-ck-expando"]=li())}function c6(n,e){let t=ihe(n);for(const i of Object.keys(e).sort())e[i]&&(t+="-"+i);return t}function u6(n){const e=[];let t=n;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}function she(n){return n instanceof HTMLTextAreaElement?n.value:n.innerHTML}function d6(n){const e=n.ownerDocument.defaultView.getComputedStyle(n);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}function f6(n){if(!n.target)return null;const e=n.target.ownerDocument,t=n.clientX,i=n.clientY;let s=null;return e.caretRangeFromPoint&&e.caretRangeFromPoint(t,i)?s=e.caretRangeFromPoint(t,i):n.rangeParent&&(s=e.createRange(),s.setStart(n.rangeParent,n.rangeOffset),s.collapse(!0)),s}function h6(n){return!n||!n.parentNode||n.offsetParent===me.document.body?null:n.offsetParent}function sn(n){return Object.prototype.toString.call(n)=="[object Text]"}function ey(n){return Object.prototype.toString.apply(n)=="[object Range]"}const m6=["top","right","bottom","left","width","height"];class Le{top;right;bottom;left;width;height;_source;constructor(e){const t=ey(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),kC(e)||t)if(t){const i=Le.getDomRangeRects(e);Pp(this,Le.getBoundingRect(i))}else Pp(this,e.getBoundingClientRect());else if(bw(e)){const{innerWidth:i,innerHeight:s}=e;Pp(this,{top:0,right:i,bottom:s,left:0,width:i,height:s})}else Pp(this,e)}clone(){return new Le(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){const t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{const i=new Le(t);return i._source=this._source,i}}getIntersectionArea(e){const t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){const e=this._source;let t=this.clone();if(iO(e))return t;let i=e,s=e.parentNode||e.commonAncestorContainer,r;for(;s&&!iO(s);){const o=rhe(s)==="visible";i instanceof HTMLElement&&sO(i)==="absolute"&&(r=i);const a=sO(s);if(o||r&&(a==="relative"&&o||a!=="relative")){i=s,s=s.parentNode;continue}const c=new Le(s),d=t.getIntersection(c);if(d)d.getArea()<t.getArea()&&(t=d);else return null;i=s,s=s.parentNode}return t}isEqual(e){for(const t of m6)if(this[t]!==e[t])return!1;return!0}contains(e){const t=this.getIntersection(e);return!!(t&&t.isEqual(e))}toAbsoluteRect(){const{scrollX:e,scrollY:t}=me.window,i=this.clone().moveBy(e,t);if(kC(i._source)){const s=h6(i._source);s&&ohe(i,s)}return i}excludeScrollbarsAndBorders(){const e=this._source;let t,i,s;if(bw(e))t=e.innerWidth-e.document.documentElement.clientWidth,i=e.innerHeight-e.document.documentElement.clientHeight,s=e.getComputedStyle(e.document.documentElement).direction;else{const r=d6(e);t=e.offsetWidth-e.clientWidth-r.left-r.right,i=e.offsetHeight-e.clientHeight-r.top-r.bottom,s=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=r.left,this.top+=r.top,this.right-=r.right,this.bottom-=r.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,s==="ltr"?this.right-=t:this.left+=t,this.height-=i,this.bottom-=i,this}static getDomRangeRects(e){const t=[],i=Array.from(e.getClientRects());if(i.length)for(const s of i)t.push(new Le(s));else{let s=e.startContainer;sn(s)&&(s=s.parentNode);const r=new Le(s.getBoundingClientRect());r.right=r.left,r.width=0,t.push(r)}return t}static getBoundingRect(e){const t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let i=0;for(const s of e)i++,t.left=Math.min(t.left,s.left),t.top=Math.min(t.top,s.top),t.right=Math.max(t.right,s.right),t.bottom=Math.max(t.bottom,s.bottom);return i==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new Le(t))}}function Pp(n,e){for(const t of m6)n[t]=e[t]}function iO(n){return kC(n)?n===n.ownerDocument.body:!1}function kC(n){return n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.getBoundingClientRect=="function"}function sO(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).position:"static"}function rhe(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).overflow:"visible"}function ohe(n,e){const t=new Le(e),i=d6(e);let s=0,r=0;s-=t.left,r-=t.top,s+=e.scrollLeft,r+=e.scrollTop,s-=i.left,r-=i.top,n.moveBy(s,r)}let Nm=class Tn{_element;_callback;static _observerInstance=null;static _elementCallbacks=null;constructor(e,t){Tn._observerInstance||Tn._createObserver(),this._element=e,this._callback=t,Tn._addElementCallback(e,t),Tn._observerInstance.observe(e)}get element(){return this._element}destroy(){Tn._deleteElementCallback(this._element,this._callback)}static _addElementCallback(e,t){Tn._elementCallbacks||(Tn._elementCallbacks=new Map);let i=Tn._elementCallbacks.get(e);i||(i=new Set,Tn._elementCallbacks.set(e,i)),i.add(t)}static _deleteElementCallback(e,t){const i=Tn._getElementCallbacks(e);i&&(i.delete(t),i.size||(Tn._elementCallbacks.delete(e),Tn._observerInstance.unobserve(e))),Tn._elementCallbacks&&!Tn._elementCallbacks.size&&(Tn._observerInstance=null,Tn._elementCallbacks=null)}static _getElementCallbacks(e){return Tn._elementCallbacks?Tn._elementCallbacks.get(e):null}static _createObserver(){Tn._observerInstance=new me.window.ResizeObserver(e=>{for(const t of e){const i=Tn._getElementCallbacks(t.target);if(i)for(const s of i)s(t)}})}};function rO(n,e){n instanceof HTMLTextAreaElement&&(n.value=e),n.innerHTML=e}function wa(n){return e=>e+n}function qu(n){let e=0;for(;n.previousSibling;)n=n.previousSibling,e++;return e}function g6(n,e,t){n.insertBefore(t,n.childNodes[e]||null)}function yh(n){return n&&n.nodeType===Node.COMMENT_NODE}function p6(n){try{me.document.createAttribute(n)}catch{return!1}return!0}function no(n){return n?sn(n)?no(n.parentElement):n.getClientRects?!!n.getClientRects().length:!1:!1}function CE({element:n,target:e,positions:t,limiter:i,fitInViewport:s,viewportOffsetConfig:r}){pw(e)&&(e=e()),pw(i)&&(i=i());const o=h6(n),a=b6(r),c=new Le(n),d=oO(e,a);let h;if(!d||!a.getIntersection(d))return null;const m={targetRect:d,elementRect:c,positionedElementAncestor:o,viewportRect:a};if(!i&&!s)h=new w6(t[0],m);else{if(i){const p=oO(i,a);p&&(m.limiterRect=p)}h=ahe(t,m)}return h}function oO(n,e){const t=new Le(n).getVisible();return t?t.getIntersection(e):null}function b6(n){n=Object.assign({top:0,bottom:0,left:0,right:0},n);const e=new Le(me.window);return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e.left+=n.left,e.right-=n.right,e.width-=n.left+n.right,e}function ahe(n,e){const{elementRect:t}=e,i=t.getArea(),s=n.map(a=>new w6(a,e)).filter(a=>!!a.name);let r=0,o=null;for(const a of s){const{limiterIntersectionArea:c,viewportIntersectionArea:d}=a;if(c===i)return a;const h=d**2+c**2;h>r&&(r=h,o=a)}return o}class w6{name;config;_positioningFunctionCoordinates;_options;_cachedRect;_cachedAbsoluteRect;constructor(e,t){const i=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!i)return;const{left:s,top:r,name:o,config:a}=i;this.name=o,this.config=a,this._positioningFunctionCoordinates={left:s,top:r},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}function aO(n){const e=n.parentNode;e&&e.removeChild(n)}function yb(){const n=me.window.visualViewport;if(!n||!(Pe.isiOS||Pe.isSafari))return{left:0,top:0};const e=Math.max(Math.round(n.offsetLeft),0),t=Math.max(Math.round(n.offsetTop),0);return{left:e,top:t}}function v6({target:n,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:i,forceScroll:s}){const r=xE(n);let o=r,a=null;for(e=uhe(e);o;){let c;o==r?c=lO(n):c=lO(a),che({parent:c,getRect:()=>k_(n,o),alignToTop:i,ancestorOffset:t,forceScroll:s});let d=k_(n,o);const h=k_(c,o);if(d.height>h.height){const m=d.getIntersection(h);m&&(d=m)}if(lhe({window:o,rect:d,viewportOffset:e,alignToTop:i,forceScroll:s}),o.parent!=o){if(a=o.frameElement,o=o.parent,!a)return}else o=null}}function lhe({window:n,rect:e,alignToTop:t,forceScroll:i,viewportOffset:s}){const r=e.clone().moveBy(0,s.bottom),o=e.clone().moveBy(0,-s.top),a=new Le(n).excludeScrollbarsAndBorders(),c=[o,r],d=t&&i,h=c.every(C=>a.contains(C));let{scrollX:m,scrollY:p}=n;const w=m,A=p;d?p-=a.top-e.top+s.top:h||(A6(o,a)?p-=a.top-e.top+s.top:y6(r,a)&&(t?p+=e.top-a.top-s.top:p+=e.bottom-a.bottom+s.bottom)),h||(_6(e,a)?m-=a.left-e.left+s.left:C6(e,a)&&(m+=e.right-a.right+s.right)),(m!=w||p!==A)&&n.scrollTo(m,p)}function che({parent:n,getRect:e,alignToTop:t,forceScroll:i,ancestorOffset:s=0,limiterElement:r}){const o=xE(n),a=t&&i;let c,d,h;const m=r||o.document.body;for(;n!=m;)d=e(),c=new Le(n).excludeScrollbarsAndBorders(),h=c.contains(d),a?n.scrollTop-=c.top-d.top+s:h||(A6(d,c)?n.scrollTop-=c.top-d.top+s:y6(d,c)&&(t?n.scrollTop+=d.top-c.top-s:n.scrollTop+=d.bottom-c.bottom+s)),h||(_6(d,c)?n.scrollLeft-=c.left-d.left+s:C6(d,c)&&(n.scrollLeft+=d.right-c.right+s)),n=n.parentNode}function y6(n,e){return n.bottom>e.bottom}function A6(n,e){return n.top<e.top}function _6(n,e){return n.left<e.left}function C6(n,e){return n.right>e.right}function xE(n){return ey(n)?n.startContainer.ownerDocument.defaultView:n.ownerDocument.defaultView}function lO(n){if(ey(n)){let e=n.commonAncestorContainer;return sn(e)&&(e=e.parentNode),e}else return n.parentNode}function k_(n,e){const t=xE(n),i=new Le(n);if(t===e)return i;{let s=t;for(;s!=e;){const r=s.frameElement,o=new Le(r).excludeScrollbarsAndBorders();i.moveBy(o.left,o.top),s=s.parent}}return i}function uhe(n){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:n}const dhe={ctrl:"",cmd:"",alt:"",shift:""},fhe={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},cO={37:"",38:"",39:"",40:"",9:"",33:"Page Up",34:"Page Down"},tt=bhe(),hhe=Object.fromEntries(Object.entries(tt).map(([n,e])=>{let t;return e in cO?t=cO[e]:t=n.charAt(0).toUpperCase()+n.slice(1),[e,t]}));function mc(n){let e;if(typeof n=="string"){if(e=tt[n.toLowerCase()],!e)throw new D("keyboard-unknown-key",null,{key:n})}else e=n.keyCode+(n.altKey?tt.alt:0)+(n.ctrlKey?tt.ctrl:0)+(n.shiftKey?tt.shift:0)+(n.metaKey?tt.cmd:0);return e}function ty(n){return typeof n=="string"&&(n=whe(n)),n.map(e=>typeof e=="string"?ghe(e):e).reduce((e,t)=>t+e,0)}function ww(n,e){let t=ty(n);const i=Pe.isMac||Pe.isiOS;return Object.entries(i?dhe:fhe).reduce((o,[a,c])=>((t&tt[a])!=0&&(t&=~tt[a],o+=c),o),"")+(t?hhe[t]:"")}function mhe(n){return n==tt.arrowright||n==tt.arrowleft||n==tt.arrowup||n==tt.arrowdown}function ny(n,e){const t=e==="ltr";switch(n){case tt.arrowleft:return t?"left":"right";case tt.arrowright:return t?"right":"left";case tt.arrowup:return"up";case tt.arrowdown:return"down"}}function ghe(n){if(n.endsWith("!"))return mc(n.slice(0,-1));const e=mc(n);return(Pe.isMac||Pe.isiOS)&&e==tt.ctrl?tt.cmd:e}function phe(n,e){const t=ny(n,e);return t==="down"||t==="right"}function bhe(){const n={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){const t=String.fromCharCode(e);n[t.toLowerCase()]=e}for(let e=48;e<=57;e++)n[e-48]=e;for(let e=112;e<=123;e++)n["f"+(e-111)]=e;return Object.assign(n,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),n}function whe(n){return n.split("+").map(e=>e.trim())}const vhe=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig","ur","urd"];function EC(n){return vhe.includes(n)?"rtl":"ltr"}function yt(n){return Array.isArray(n)?n:[n]}me.window.CKEDITOR_TRANSLATIONS||(me.window.CKEDITOR_TRANSLATIONS={});function yhe(n,e,t=1,i){if(typeof t!="number")throw new D("translation-service-quantity-not-a-number",null,{quantity:t});const s=i||me.window.CKEDITOR_TRANSLATIONS,r=Che(s);r===1&&(n=Object.keys(s)[0]);const o=e.id||e.string;if(r===0||!_he(n,o,s))return t!==1?e.plural:e.string;const a=s[n].dictionary,c=s[n].getPluralForm||(m=>m===1?0:1),d=a[o];if(typeof d=="string")return d;const h=Number(c(t));return d[h]}function Ahe(n){return Array.isArray(n)?n.reduce((e,t)=>_E(e,t)):n}function _he(n,e,t){return!!t[n]&&!!t[n].dictionary[e]}function Che(n){return Object.keys(n).length}class xhe{uiLanguage;uiLanguageDirection;contentLanguage;contentLanguageDirection;t;translations;constructor({uiLanguage:e="en",contentLanguage:t,translations:i}={}){this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=EC(this.uiLanguage),this.contentLanguageDirection=EC(this.contentLanguage),this.translations=Ahe(i),this.t=(s,r)=>this._t(s,r)}_t(e,t=[]){t=yt(t),typeof e=="string"&&(e={string:e});const s=!!e.plural?t[0]:1,r=yhe(this.uiLanguage,e,s,this.translations);return khe(r,t)}}function khe(n,e){return n.replace(/%(\d+)/g,(t,i)=>i<e.length?e[i]:t)}class Wn extends Ot(){_items;_itemMap;_idProperty;_bindToCollection;_bindToExternalToInternalMap;_bindToInternalToExternalMap;_skippedIndexesFromExternal;constructor(e={},t={}){super();const i=Is(e);if(i||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const s of e)this._items.push(s),this._itemMap.set(this._getItemIdBeforeAdding(s),s)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(t===void 0)t=this._items.length;else if(t>this._items.length||t<0)throw new D("collection-add-item-invalid-index",this);let i=0;for(const s of e){const r=this._getItemIdBeforeAdding(s),o=t+i;this._items.splice(o,0,s),this._itemMap.set(r,s),this.fire("add",s,o),i++}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if(typeof e=="string")t=this._itemMap.get(e);else if(typeof e=="number")t=this._items[e];else throw new D("collection-get-invalid-arg",this);return t||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{const t=this._idProperty,i=e[t];return i&&this._itemMap.has(i)}}getIndex(e){let t;return typeof e=="string"?t=this._itemMap.get(e):t=e,t?this._items.indexOf(t):-1}remove(e){const[t,i]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:i}),t}map(e,t){return this._items.map(e,t)}forEach(e,t){this._items.forEach(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new D("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(i=>new t(i))},using:t=>{typeof t=="function"?this._setUpBindToBinding(t):this._setUpBindToBinding(i=>i[t])}}}_setUpBindToBinding(e){const t=this._bindToCollection,i=(s,r,o)=>{const a=t._bindToCollection==this,c=t._bindToInternalToExternalMap.get(r);if(a&&c)this._bindToExternalToInternalMap.set(r,c),this._bindToInternalToExternalMap.set(c,r);else{const d=e(r);if(!d){this._skippedIndexesFromExternal.push(o);return}let h=o;for(const m of this._skippedIndexesFromExternal)o>m&&h--;for(const m of t._skippedIndexesFromExternal)h>=m&&h++;this._bindToExternalToInternalMap.set(r,d),this._bindToInternalToExternalMap.set(d,r),this.add(d,h);for(let m=0;m<t._skippedIndexesFromExternal.length;m++)h<=t._skippedIndexesFromExternal[m]&&t._skippedIndexesFromExternal[m]++}};for(const s of t)i(null,s,t.getIndex(s));this.listenTo(t,"add",i),this.listenTo(t,"remove",(s,r,o)=>{const a=this._bindToExternalToInternalMap.get(r);a&&this.remove(a),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,d)=>(o<d&&c.push(d-1),o>d&&c.push(d),c),[])})}_getItemIdBeforeAdding(e){const t=this._idProperty;let i;if(t in e){if(i=e[t],typeof i!="string")throw new D("collection-add-invalid-id",this);if(this.get(i))throw new D("collection-add-item-already-exists",this)}else e[t]=i=li();return i}_remove(e){let t,i,s,r=!1;const o=this._idProperty;if(typeof e=="string"?(i=e,s=this._itemMap.get(i),r=!s,s&&(t=this._items.indexOf(s))):typeof e=="number"?(t=e,s=this._items[t],r=!s,s&&(i=s[o])):(s=e,i=s[o],t=this._items.indexOf(s),r=t==-1||!this._itemMap.get(i)),r)throw new D("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(i);const a=this._bindToInternalToExternalMap.get(s);return this._bindToInternalToExternalMap.delete(s),this._bindToExternalToInternalMap.delete(a),this.fire("remove",s,t),[s,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}function qt(n){const e=n.next();return e.done?null:e.value}class St extends Wi(kt()){_elements=new Set;_externalViews=new Set;_blurTimeout=null;constructor(){super(),this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(e){if(dO(e))this._addElement(e);else if(uO(e))this._addView(e);else{if(!e.element)throw new D("focustracker-add-view-missing-element",{focusTracker:this,view:e});this._addElement(e.element)}}remove(e){dO(e)?this._removeElement(e):uO(e)?this._removeView(e):this._removeElement(e.element)}_addElement(e){if(this._elements.has(e))throw new D("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>{const t=this.externalViews.find(i=>Ehe(e,i));t?this._focus(t.element):this._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(e)}_removeElement(e){this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e)),e===this.focusedElement&&this._blur()}_addView(e){e.element&&this._addElement(e.element),this.listenTo(e.focusTracker,"change:focusedElement",()=>{e.focusTracker.focusedElement?e.element&&this._focus(e.element):this._blur()}),this._externalViews.add(e)}_removeView(e){e.element&&this._removeElement(e.element),this.stopListening(e.focusTracker),this._externalViews.delete(e)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(e){this._clearBlurTimeout(),this.focusedElement=e,this.isFocused=!0}_blur(){this.elements.find(i=>i.contains(document.activeElement))||this.externalViews.find(i=>i.focusTracker.isFocused&&!i.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function uO(n){return"focusTracker"in n&&n.focusTracker instanceof St}function dO(n){return ca(n)}function Ehe(n,e){return fO(n,e)?!0:!!e.focusTracker.externalViews.find(t=>fO(n,t))}function fO(n,e){return!!e.element&&e.element.contains(document.activeElement)&&n.contains(e.element)}class Ht{_listener;constructor(){this._listener=new(Wi())}listenTo(e){this._listener.listenTo(e,"keydown",(t,i)=>{this._listener.fire("_keydown:"+mc(i),i)})}set(e,t,i={}){const s=ty(e),r=i.priority;this._listener.listenTo(this._listener,"_keydown:"+s,(o,a)=>{i.filter&&!i.filter(a)||(t(a,()=>{a.preventDefault(),a.stopPropagation(),o.stop()}),o.return=!0)},{priority:r})}press(e){return!!this._listener.fire("_keydown:"+mc(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}}function She(n){const e=new Map;for(const t in n)e.set(t,n[t]);return e}function io(n){return Is(n)?new Map(n):She(n)}function hO(n,e,t){const i=n.length,s=e.length;for(let r=i-1;r>=t;r--)n[r+s]=n[r];for(let r=0;r<s;r++)n[t+r]=e[r]}function kE(n,e){let t;function i(...s){i.cancel(),t=setTimeout(()=>n(...s),e)}return i.cancel=()=>{clearTimeout(t)},i}function EE(n){try{if(!n.startsWith("ey"))return null;const e=atob(n.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(e)}catch{return null}}function The(){const n=[];for(let e=0;e<256;e++){let t=e;for(let i=0;i<8;i++)t&1?t=3988292384^t>>>1:t=t>>>1;n[e]=t}return n}function Ihe(n){const e=Array.isArray(n)?n:[n],t=The();let i=-1;const s=e.map(r=>Array.isArray(r)?r.join(""):String(r)).join("");for(let r=0;r<s.length;r++){const o=s.charCodeAt(r);i=i>>>8^t[(i^o)&255]}return i=(i^-1)>>>0,i.toString(16).padStart(8,"0")}function Rhe(n){const e=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],t=e.map(o=>o.name).join("|"),i=n.replace(new RegExp(`</?(${t})( .*?)?>`,"g"),`
$&
`).replace(/<br[^>]*>/g,`$&
`).split(`
`);let s=0,r=!1;return i.map(o=>(r=Dhe(o,r),!o.length&&!r?"":Phe(o,e)?Op(o,s++):Ohe(o,e)?Op(o,--s):r==="middle"||r==="last"?Op(o,0):Op(o,s))).join("").trimEnd()}function Phe(n,e){return e.some(t=>!(t.isVoid||!new RegExp(`<${t.name}( .*?)?>`).test(n)))}function Ohe(n,e){return e.some(t=>new RegExp(`</${t.name}>`).test(n))}function Op(n,e,t="    "){return`${t.repeat(Math.max(0,e))}${n}
`}function Dhe(n,e){const t=/<pre( .*?)?>/.test(n),i=/<\/pre>/.test(n);return t&&i?!1:t?"first":i?"last":e==="first"||e==="middle"?"middle":!1}function Mhe(n){return!!n&&n.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n)}function Bhe(n){return!!n&&n.length==1&&/[\ud800-\udbff]/.test(n)}function Nhe(n){return!!n&&n.length==1&&/[\udc00-\udfff]/.test(n)}function SE(n,e){return Bhe(n.charAt(e-1))&&Nhe(n.charAt(e))}function TE(n,e){return Mhe(n.charAt(e))}const Vhe=Lhe();function x6(n,e){const t=String(n).matchAll(Vhe);return Array.from(t).some(i=>i.index<e&&e<i.index+i[0].length)}function Lhe(){const n=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],e=new RegExp("\\p{Regional_Indicator}{2}","u").source,t="(?:"+n.map(s=>s.source).join("|")+")",i=`${e}|${t}(?:${t})*`;return new RegExp(i,"ug")}function mO(n){if(!n)return null;const e=Fhe(n);return e?EE(e):null}function Fhe(n){const e=n.split(".");return e.length!=3?null:e[1]}function zhe(n,e){return(n.removeFeatures||[]).includes(e)}const $f=new WeakMap;let gO=!1;function iy({view:n,element:e,text:t,isDirectHost:i=!0,keepOnFocus:s=!1}){const r=n.document;$f.has(r)||($f.set(r,new Map),r.registerPostFixer(a=>E_($f.get(r),a)),r.on("change:isComposing",()=>{n.change(a=>E_($f.get(r),a))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(a,c,d)=>o(d)),e.placeholder?o(e.placeholder):t&&o(t),t&&Hhe();function o(a){const c={text:a,isDirectHost:i,keepOnFocus:s,hostElement:i?e:null};$f.get(r).set(e,c),n.change(d=>E_([[e,c]],d))}}function k6(n,e){return e.hasClass("ck-placeholder")?!1:(n.addClass("ck-placeholder",e),!0)}function vw(n,e){return e.hasClass("ck-placeholder")?(n.removeClass("ck-placeholder",e),!0):!1}function E6(n,e){if(!n.isAttached()||jhe(n))return!1;const t=n.document,s=t.selection.anchor;return t.isComposing&&s&&s.parent===n?!1:e||!t.isFocused?!0:!!s&&s.parent!==n}function jhe(n){for(const e of n.getChildren())if(!e.is("uiElement"))return!0;return!1}function E_(n,e){const t=[];let i=!1;for(const[s,r]of n)r.isDirectHost&&(t.push(s),pO(e,s,r)&&(i=!0));for(const[s,r]of n){if(r.isDirectHost)continue;const o=Uhe(s);o!==r.hostElement&&r.hostElement&&(e.removeAttribute("data-placeholder",r.hostElement),vw(e,r.hostElement),r.hostElement=null,i=!0),o&&(t.includes(o)||(r.hostElement=o,pO(e,s,r)&&(i=!0)))}return i}function pO(n,e,t){const{text:i,isDirectHost:s,hostElement:r}=t;let o=!1;return r.getAttribute("data-placeholder")!==i&&(n.setAttribute("data-placeholder",i,r),o=!0),(s||e.childCount==1)&&E6(r,t.keepOnFocus)?k6(n,r)&&(o=!0):vw(n,r)&&(o=!0),o}function Uhe(n){if(n.childCount){const e=n.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function Hhe(){gO||lt("enableViewPlaceholder-deprecated-text-option"),gO=!0}class Cc{is(){throw new Error("is() method is abstract")}}class xc extends Ot(Cc){document;parent;constructor(e){super(),this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new D("view-node-not-found-in-parent",this);return e}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){const i=this.getAncestors(t),s=e.getAncestors(t);let r=0;for(;i[r]==s[r]&&i[r];)r++;return r===0?null:i[r-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),i=e.getPath(),s=ri(t,i);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<i[s]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t,i){this.fire(`change:${e}`,t,i),this.parent&&this.parent._fireChange(e,t,i)}toJSON(){const e={path:this.getPath(),type:"Node"};return this!==this.root&&this.root.is("rootElement")&&(e.root=this.root.toJSON()),e}}xc.prototype.is=function(n){return n==="node"||n==="view:node"};class Hn extends xc{_textData;constructor(e,t){super(e),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof Hn?this===e||this.data===e.data:!1}toJSON(){const e=super.toJSON();return e.type="Text",e.data=this.data,e}_clone(){return new Hn(this.document,this.data)}}Hn.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};class Wo extends Cc{textNode;data;offsetInText;constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.data.length)throw new D("view-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.data.length)throw new D("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){const t=[];let i=e.includeSelf?this.textNode:this.parent;for(;i!==null;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}}Wo.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};class yw{_consumables=new Map;add(e,t){let i;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?i=this._consumables.get(e):(i=new Whe(e),this._consumables.set(e,i)),i.add(t?lh(t):e._getConsumables())}test(e,t){const i=this._consumables.get(e);return i===void 0?null:e.is("$text")||e.is("documentFragment")?i:i.test(lh(t))}consume(e,t){if(e.is("$text")||e.is("documentFragment"))return this.test(e,t)?(this._consumables.set(e,!1),!0):!1;const i=this._consumables.get(e);return i===void 0?!1:i.consume(lh(t))}revert(e,t){const i=this._consumables.get(e);i!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(lh(t)))}static createFrom(e,t){if(t||(t=new yw),e.is("$text"))t.add(e);else if(e.is("element")||e.is("documentFragment")){t.add(e);for(const i of e.getChildren())yw.createFrom(i,t)}return t}}class Whe{element;_canConsumeName=null;_attributes=new Map;constructor(e){this.element=e}add(e){e.name&&(this._canConsumeName=!0);for(const[t,i]of e.attributes)if(i){let s=this._attributes.get(t);(!s||typeof s=="boolean")&&(s=new Map,this._attributes.set(t,s)),s.set(i,!0)}else{if(t=="style"||t=="class")throw new D("viewconsumable-invalid-attribute",this);this._attributes.set(t,!0)}}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(const[t,i]of e.attributes){const s=this._attributes.get(t);if(s===void 0)return null;if(s===!1)return!1;if(s!==!0){if(i){const r=s.get(i);if(r===void 0)return null;if(!r)return!1}else for(const r of s.values())if(!r)return!1}}return!0}consume(e){if(!this.test(e))return!1;e.name&&(this._canConsumeName=!1);for(const[t,i]of e.attributes){const s=this._attributes.get(t);if(typeof s=="boolean")for(const[r]of this.element._getConsumables(t,i).attributes)this._attributes.set(r,!1);else if(i)for(const[,r]of this.element._getConsumables(t,i).attributes)s.set(r,!1);else for(const r of s.keys())s.set(r,!1)}return!0}revert(e){e.name&&(this._canConsumeName=!0);for(const[t,i]of e.attributes){const s=this._attributes.get(t);if(s===!1){this._attributes.set(t,!0);continue}if(!(s===void 0||s===!0))if(i)s.get(i)===!1&&s.set(i,!0);else for(const r of s.keys())s.set(r,!0)}}}function lh(n){const e=[];return"attributes"in n&&n.attributes&&S_(e,n.attributes),"classes"in n&&n.classes&&S_(e,n.classes,"class"),"styles"in n&&n.styles&&S_(e,n.styles,"style"),{name:n.name||!1,attributes:e}}function S_(n,e,t){if(typeof e=="string"){n.push(t?[t,e]:[e]);return}for(const i of e)Array.isArray(i)?n.push(i):n.push(t?[t,i]:[i])}class ji{_patterns=[];constructor(...e){this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(const t of e)for(const i of this._patterns){const s=this._isElementMatching(t,i);if(s)return{element:t,pattern:i,match:s}}return null}matchAll(...e){const t=[];for(const i of e)for(const s of this._patterns){const r=this._isElementMatching(i,s);r&&t.push({element:i,pattern:s,match:r})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;const e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}_isElementMatching(e,t){if(typeof t=="function"){const r=t(e);return!r||typeof r!="object"?r:lh(r)}const i={};if(t.name&&(i.name=$he(t.name,e.name),!i.name))return null;const s=[];return t.attributes&&!Ghe(t.attributes,e,s)||t.classes&&!Yhe(t.classes,e,s)||t.styles&&!Khe(t.styles,e,s)?null:(s.length&&(i.attributes=s),i)}}function Aw(n,e){return n===!0||n===e||n instanceof RegExp&&!!String(e).match(n)}function $he(n,e){return n instanceof RegExp?!!e.match(n):n===e}function IE(n,e){if(Array.isArray(n))return n.map(i=>typeof i!="object"||i instanceof RegExp?e?[e,i,!0]:[i,!0]:((i.key===void 0||i.value===void 0)&&lt("matcher-pattern-missing-key-or-value",i),e?[e,i.key,i.value]:[i.key,i.value]));if(typeof n!="object"||n instanceof RegExp)return[e?[e,n,!0]:[n,!0]];const t=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(e?[e,i,n[i]]:[i,n[i]]);return t}function Ghe(n,e,t){let i;return typeof n=="object"&&!(n instanceof RegExp)&&!Array.isArray(n)?(n.style!==void 0&&lt("matcher-pattern-deprecated-attributes-style-key",n),n.class!==void 0&&lt("matcher-pattern-deprecated-attributes-class-key",n)):i=["class","style"],e._collectAttributesMatch(IE(n),t,i)}function Yhe(n,e,t){return e._collectAttributesMatch(IE(n,"class"),t)}function Khe(n,e,t){return e._collectAttributesMatch(IE(n,"style"),t)}class rd{_styles;_cachedStyleNames=null;_cachedExpandedStyleNames=null;_styleProcessor;constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();const t=Qhe(e);for(const[i,s]of t)this._styleProcessor.toNormalizedForm(i,s,this._styles);return this}has(e){if(this.isEmpty)return!1;const i=this._styleProcessor.getReducedForm(e,this._styles).find(([s])=>s===e);return Array.isArray(i)}set(e,t){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,Fi(e))for(const[i,s]of Object.entries(e))this._styleProcessor.toNormalizedForm(i,s,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){const t={};for(const i of yt(e)){const s=SC(i),r=ol(this._styles,s);if(r)Ab(t,s,r);else{const o=this.getAsString(i);o!==void 0&&this._styleProcessor.toNormalizedForm(i,o,t)}}Object.keys(t).length&&(S6(this._styles,t),this._cachedStyleNames=null,this._cachedExpandedStyleNames=null)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!Fi(this._styles[e]))return this._styles[e];const i=this._styleProcessor.getReducedForm(e,this._styles).find(([s])=>s===e);if(Array.isArray(i))return i[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?(this._cachedExpandedStyleNames||=this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames||=this.getStylesEntries().map(([t])=>t),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(e){if(this.size!==e.size)return!1;for(const t of this.getStyleNames())if(!e.has(t)||e.getAsString(t)!==this.getAsString(t))return!1;return!0}getStylesEntries(){const e=[],t=Object.keys(this._styles);for(const i of t)e.push(...this._styleProcessor.getReducedForm(i,this._styles));return e}_clone(){const e=new this.constructor(this._styleProcessor);return e.set(this.getNormalized()),e}_getTokensMatch(e,t){const i=[];for(const s of this.getStyleNames(!0))if(Aw(e,s)){if(t===!0){i.push(s);continue}const r=this.getAsString(s);Aw(t,r)&&i.push(s)}return i.length?i:void 0}_getConsumables(e){const t=[];if(e){t.push(e);for(const i of this._styleProcessor.getRelatedStyles(e))t.push(i)}else for(const i of this.getStyleNames()){for(const s of this._styleProcessor.getRelatedStyles(i))t.push(s);t.push(i)}return t}_canMergeFrom(e){for(const t of e.getStyleNames())if(this.has(t)&&this.getAsString(t)!==e.getAsString(t))return!1;return!0}_mergeFrom(e){for(const t of e.getStyleNames())this.has(t)||this.set(t,e.getAsString(t))}_isMatching(e){for(const t of e.getStyleNames())if(!this.has(t)||this.getAsString(t)!==e.getAsString(t))return!1;return!0}}class qhe{_normalizers;_extractors;_reducers;_consumables;constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,i){if(Fi(t)){Ab(i,SC(e),t);return}if(this._normalizers.has(e)){const s=this._normalizers.get(e),{path:r,value:o}=s(t);Ab(i,r,o)}else Ab(i,e,t)}getNormalized(e,t){if(!e)return _E({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){const i=this._extractors.get(e);if(typeof i=="string")return ol(t,i);const s=i(e,t);if(s)return s}return ol(t,SC(e))}getReducedForm(e,t){const i=this.getNormalized(e,t);return i===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(i):[[e,i]]}getStyleNames(e){const t=new Set;for(const i of this._consumables.keys()){const s=this.getNormalized(i,e);s&&(typeof s!="object"||Object.keys(s).length)&&t.add(i)}for(const i of Object.keys(e))t.add(i);return Array.from(t)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(const i of t)this._mapStyleNames(i,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}}function Qhe(n){let e=null,t=0,i=0,s=null;const r=new Map;if(n==="")return r;n.charAt(n.length-1)!=";"&&(n=n+";");for(let o=0;o<n.length;o++){const a=n.charAt(o);if(e===null)switch(a){case":":s||(s=n.substr(t,o-t),i=o+1);break;case'"':case"'":e=a;break;case";":{const c=n.substr(i,o-i);s&&r.set(s.trim(),c.trim()),s=null,t=o+1;break}}else a===e&&(e=null)}return r}function SC(n){return n.replace("-",".")}function Ab(n,e,t){let i=t;Fi(t)&&(i=_E({},ol(n,e),t)),YF(n,e,i)}function S6(n,e){for(const t of Object.keys(e))n[t]!==null&&!Array.isArray(n[t])&&typeof n[t]=="object"&&typeof e[t]=="object"?(S6(n[t],e[t]),Object.keys(n[t]).length||delete n[t]):delete n[t]}class T_{_set=new Set;get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(e){return this._set.has(e)}keys(){return Array.from(this._set.keys())}setTo(e){this.clear();for(const t of e.split(/\s+/))t&&this._set.add(t);return this}set(e){for(const t of yt(e))t&&this._set.add(t)}remove(e){for(const t of yt(e))this._set.delete(t)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(e){if(this.size!==e.size)return!1;for(const t of this.keys())if(!e.has(t))return!1;return!0}_clone(){const e=new this.constructor;return e._set=new Set(this._set),e}_getTokensMatch(e){const t=[];if(e===!0){for(const i of this._set.keys())t.push(i);return t}if(typeof e=="string"){for(const i of e.split(/\s+/))if(this._set.has(i))t.push(i);else return;return t}for(const i of this._set.keys())i.match(e)&&t.push(i);return t.length?t:void 0}_getConsumables(e){return e?[e]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(e){for(const t of e._set.keys())this._set.has(t)||this._set.add(t)}_isMatching(e){for(const t of e._set.keys())if(!this._set.has(t))return!1;return!0}}class Sr extends xc{name;_unsafeAttributesToRender=[];_attrs;_children;_customProperties=new Map;get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}constructor(e,t,i,s){super(e),this.name=t,this._attrs=this._parseAttributes(i),this._children=[],s&&this._insertChild(0,s)}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const e of this._attrs.keys())e!="class"&&e!="style"&&(yield e)}*getAttributes(){for(const[e,t]of this._attrs.entries())yield[e,String(t)]}getAttribute(e){return this._attrs.has(e)?String(this._attrs.get(e)):void 0}hasAttribute(e,t){return this._attrs.has(e)?t!==void 0?Su(this.name,e)||Gf(this.name,e)?this._attrs.get(e).has(t):this._attrs.get(e)===t:!0:!1}isSimilar(e){if(!(e instanceof Sr))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size)return!1;for(const[t,i]of this._attrs){const s=e._attrs.get(t);if(s===void 0)return!1;if(typeof i=="string"||typeof s=="string"){if(s!==i)return!1}else if(!i.isSimilar(s))return!1}return!0}hasClass(...e){for(const t of e)if(!this._classes||!this._classes.has(t))return!1;return!0}getClassNames(){const e=this._classes?this._classes.keys():[],t=e[Symbol.iterator]();return Object.assign(e,{next:t.next.bind(t)})}getStyle(e){return this._styles&&this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles&&this._styles.getNormalized(e)}getStyleNames(e){return this._styles?this._styles.getStyleNames(e):[]}hasStyle(...e){for(const t of e)if(!this._styles||!this._styles.has(t))return!1;return!0}findAncestor(...e){const t=new ji(...e);let i=this.parent;for(;i&&!i.is("documentFragment");){if(t.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const e=this._classes?this._classes.keys().sort().join(","):"",t=this._styles&&String(this._styles),i=Array.from(this._attrs).filter(([s])=>s!="style"&&s!="class").map(s=>`${s[0]}="${s[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}toJSON(){const e=super.toJSON();if(e.name=this.name,e.type="Element",this._attrs.size&&(e.attributes=Object.fromEntries(this.getAttributes())),this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=[];if(e)for(const s of this.getChildren())t.push(s._clone(e));const i=new this.constructor(this.document,this.name,this._attrs,t);return i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this,{index:e});let i=0;const s=Zhe(this.document,t);for(const r of s)r.parent!==null&&r._remove(),r.parent=this,r.document=this.document,this._children.splice(e,0,r),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this,{index:e});for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_setAttribute(e,t,i=!0){if(this._fireChange("attributes",this),Su(this.name,e)||Gf(this.name,e)){let s=this._attrs.get(e);s||(s=Su(this.name,e)?new rd(this.document.stylesProcessor):new T_,this._attrs.set(e,s)),i?s.setTo(String(t)):Su(this.name,e)?Array.isArray(t)?s.set(t[0],t[1]):s.set(t):s.set(typeof t=="string"?t.split(/\s+/):t)}else this._attrs.set(e,String(t))}_removeAttribute(e,t){if(this._fireChange("attributes",this),t!==void 0&&(Su(this.name,e)||Gf(this.name,e))){const i=this._attrs.get(e);return i?(Gf(this.name,e)&&typeof t=="string"&&(t=t.split(/\s+/)),i.remove(t),i.isEmpty?this._attrs.delete(e):!1):!1}return this._attrs.delete(e)}_addClass(e){this._setAttribute("class",e,!1)}_removeClass(e){this._removeAttribute("class",e)}_setStyle(e,t){typeof e!="string"?this._setAttribute("style",e,!1):this._setAttribute("style",[e,t],!1)}_removeStyle(e){this._removeAttribute("style",e)}_collectAttributesMatch(e,t,i){for(const[s,r,o]of e){let a=!1,c=!1;for(const[d,h]of this._attrs)if(!(i&&i.includes(d)||!Aw(s,d)))if(a=!0,typeof h=="string"){if(Aw(r,h))t.push([d]),c=!0;else if(!(s instanceof RegExp))return!1}else{const m=h._getTokensMatch(r,o||!0);if(m){c=!0;for(const p of m)t.push([d,p])}else if(!(s instanceof RegExp))return!1}if(!a||!c)return!1}return!0}_getConsumables(e,t){const i=[];if(e){const s=this._attrs.get(e);if(s!==void 0)if(typeof s=="string")i.push([e]);else for(const r of s._getConsumables(t))i.push([e,r])}else for(const[s,r]of this._attrs)if(typeof r=="string")i.push([s]);else for(const o of r._getConsumables())i.push([s,o]);return{name:!e,attributes:i}}_canMergeAttributesFrom(e){if(this.name!=e.name)return!1;for(const[t,i]of e._attrs){const s=this._attrs.get(t);if(s!==void 0){if(typeof s=="string"||typeof i=="string"){if(s!==i)return!1}else if(!s._canMergeFrom(i))return!1}}return!0}_mergeAttributesFrom(e){this._fireChange("attributes",this);for(const[t,i]of e._attrs){const s=this._attrs.get(t);s===void 0||typeof s=="string"||typeof i=="string"?this._setAttribute(t,i):s._mergeFrom(i)}}_canSubtractAttributesOf(e){if(this.name!=e.name)return!1;for(const[t,i]of e._attrs){const s=this._attrs.get(t);if(s===void 0)return!1;if(typeof s=="string"||typeof i=="string"){if(s!==i)return!1}else if(!s._isMatching(i))return!1}return!0}_subtractAttributesOf(e){this._fireChange("attributes",this);for(const[t,i]of e._attrs){const s=this._attrs.get(t);typeof s=="string"||typeof i=="string"?this._attrs.delete(t):(s.remove(i.keys()),s.isEmpty&&this._attrs.delete(t))}}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}_parseAttributes(e){const t=io(e);for(const[i,s]of t)if(s===null)t.delete(i);else if(Su(this.name,i)){const r=s instanceof rd?s._clone():new rd(this.document.stylesProcessor).setTo(String(s));t.set(i,r)}else if(Gf(this.name,i)){const r=s instanceof T_?s._clone():new T_().setTo(String(s));t.set(i,r)}else typeof s!="string"&&t.set(i,String(s));return t}}Sr.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Zhe(n,e){if(typeof e=="string")return[new Hn(n,e)];Is(e)||(e=[e]);const t=[];for(const i of e)typeof i=="string"?t.push(new Hn(n,i)):i instanceof Wo?t.push(new Hn(n,i.data)):t.push(i);return t}function Gf(n,e){return e=="class"||n=="a"&&e=="rel"}function Su(n,e){return e=="style"}class Qh extends Sr{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=Jhe}toJSON(){const e=super.toJSON();return e.type="ContainerElement",e}}Qh.prototype.is=function(n,e){return e?e===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Jhe(){const n=[...this.getChildren()],e=n[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const t of n)if(!t.is("uiElement"))return null;return this.childCount}class sy extends kt(Qh){constructor(e,t,i,s){super(e,t,i,s),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",r=>r&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}toJSON(){const e=super.toJSON();return e.type="EditableElement",e.isReadOnly=this.isReadOnly,e.isFocused=this.isFocused,e}}sy.prototype.is=function(n,e){return e?e===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};const bO=Symbol("rootName");class T6 extends sy{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(bO)}set rootName(e){this._setCustomProperty(bO,e)}toJSON(){return this.rootName}set _name(e){this.name=e}}T6.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};class tc{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new D("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new D("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=ge._createAt(e.startPosition):this._position=ge._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i;do i=this.position,t=this.next();while(!t.done&&e(t.value));t.done||(this._position=i)}jumpTo(e){this._boundaryStartParent&&e.isBefore(this.boundaries.start)?e=this.boundaries.start:this._boundaryEndParent&&e.isAfter(this.boundaries.end)&&(e=this.boundaries.end),this._position=e.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone();const t=this.position,i=e.parent;if(i.parent===null&&e.offset===i.childCount)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let s;if(i&&i.is("view:$text")){if(e.isAtEnd)return this._position=ge._createAfter(i),this._next();s=i.data[e.offset]}else s=i.getChild(e.offset);if(typeof s=="string"){let r;this.singleCharacters?r=1:r=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-e.offset;const o=new Wo(i,e.offset,r);return e.offset+=r,this._position=e,this._formatReturnValue("text",o,t,e,r)}if(s&&s.is("view:element")){if(!this.shallow)e=new ge(s,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",s,t,e,1)}if(s&&s.is("view:$text")){if(this.singleCharacters)return e=new ge(s,0),this._position=e,this._next();let r=s.data.length,o;return s==this._boundaryEndParent?(r=this.boundaries.end.offset,o=new Wo(s,0,r),e=ge._createAfter(o)):(o=new Wo(s,0,s.data.length),e.offset++),this._position=e,this._formatReturnValue("text",o,t,e,r)}return e=ge._createAfter(i),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,t,e)}_previous(){let e=this.position.clone();const t=this.position,i=e.parent;if(i.parent===null&&e.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let s;if(i.is("view:$text")){if(e.isAtStart)return this._position=ge._createBefore(i),this._previous();s=i.data[e.offset-1]}else s=i.getChild(e.offset-1);if(typeof s=="string"){let r;if(this.singleCharacters)r=1;else{const a=i===this._boundaryStartParent?this.boundaries.start.offset:0;r=e.offset-a}e.offset-=r;const o=new Wo(i,e.offset,r);return this._position=e,this._formatReturnValue("text",o,t,e,r)}if(s&&s.is("view:element"))return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",s,t,e,1)):(e=new ge(s,s.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",s,t,e));if(s&&s.is("view:$text")){if(this.singleCharacters)return e=new ge(s,s.data.length),this._position=e,this._previous();let r=s.data.length,o;if(s==this._boundaryStartParent){const a=this.boundaries.start.offset;o=new Wo(s,a,s.data.length-a),r=o.data.length,e=ge._createBefore(o)}else o=new Wo(s,0,s.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",o,t,e,r)}return e=ge._createBefore(i),this._position=e,this._formatReturnValue("elementStart",i,t,e,1)}_formatReturnValue(e,t,i,s,r){return t.is("view:$textProxy")&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(s=ge._createAfter(t.textNode),this._position=s):i=ge._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(s=ge._createBefore(t.textNode),this._position=s):i=ge._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:s,length:r}}}}class ge extends Cc{parent;offset;constructor(e,t){super(),this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof sy);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){const t=ge._createAt(this),i=t.offset+e;return t.offset=i<0?0:i,t}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new tc(t);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]==i[s]&&t[s];)s++;return s===0?null:t[s-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";const t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),i.push(e.offset);const s=ri(t,i);switch(s){case"prefix":return"before";case"extension":return"after";default:return t[s]<i[s]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new tc(e)}clone(){return new ge(this.parent,this.offset)}toJSON(){return{parent:this.parent.toJSON(),offset:this.offset}}static _createAt(e,t){if(e instanceof ge)return new this(e.parent,e.offset);{const i=e;if(t=="end")t=i.is("$text")?i.data.length:i.childCount;else{if(t=="before")return this._createBefore(i);if(t=="after")return this._createAfter(i);if(t!==0&&!t)throw new D("view-createpositionat-offset-required",i)}return new ge(i,t)}}static _createAfter(e){if(e.is("$textProxy"))return new ge(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new D("view-position-after-root",e,{root:e});return new ge(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new ge(e.textNode,e.offsetInText);if(!e.parent)throw new D("view-position-before-root",e,{root:e});return new ge(e.parent,e.index)}}ge.prototype.is=function(n){return n==="position"||n==="view:position"};class We extends Cc{start;end;constructor(e,t=null){super(),this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*new tc({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(Dp,{direction:"backward"}),t=this.end.getLastMatchingPosition(Dp);return e.parent.is("$text")&&e.isAtStart&&(e=ge._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=ge._createAfter(t.parent)),new We(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(Dp);if(e.isAfter(this.end)||e.isEqual(this.end))return new We(e,e);let t=this.end.getLastMatchingPosition(Dp,{direction:"backward"});const i=e.nodeAfter,s=t.nodeBefore;return i&&i.is("$text")&&(e=new ge(i,0)),s&&s.is("$text")&&(t=new ge(s,s.data.length)),new We(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&s}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new We(this.start,e.start)),this.containsPosition(e.end)&&t.push(new We(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new We(t,i)}return null}getWalker(e={}){return e.boundaries=this,new tc(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new We(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new tc(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new tc(e);yield t.position;for(const i of t)yield i.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}static _createFromParentsAndOffsets(e,t,i,s){return new this(new ge(e,t),new ge(i,s))}static _createFromPositionAndShift(e,t){const i=e,s=e.getShiftedBy(t);return t>0?new this(i,s):new this(s,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){const t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(ge._createBefore(e),t)}}We.prototype.is=function(n){return n==="range"||n==="view:range"};function Dp(n){return!!(n.item.is("attributeElement")||n.item.is("uiElement"))}class vr extends Ot(Cc){_ranges;_lastRangeBackward;_isFake;_fakeSelectionLabel;constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;const e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?e.clone():null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?e.clone():null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const s of e._ranges)if(t.isEqual(s)){i=!0;break}if(!i)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;const t=xC(this.getRanges()),i=xC(e.getRanges());if(t!=i)return!1;if(t==0)return!0;for(let s of this.getRanges()){s=s.getTrimmed();let r=!1;for(let o of e.getRanges())if(o=o.getTrimmed(),s.start.isEqual(o.start)&&s.end.isEqual(o.end)){r=!0;break}if(!r)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,i,s]=e;if(typeof i=="object"&&(s=i,i=void 0),t===null)this._setRanges([]),this._setFakeOptions(s);else if(t instanceof vr||t instanceof RE)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof We)this._setRanges([t],s&&s.backward),this._setFakeOptions(s);else if(t instanceof ge)this._setRanges([new We(t)]),this._setFakeOptions(s);else if(t instanceof xc){const r=!!s&&!!s.backward;let o;if(i===void 0)throw new D("view-selection-setto-required-second-parameter",this);i=="in"?o=We._createIn(t):i=="on"?o=We._createOn(t):o=new We(ge._createAt(t,i)),this._setRanges([o],r),this._setFakeOptions(s)}else if(Is(t))this._setRanges(t,s&&s.backward),this._setFakeOptions(s);else throw new D("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new D("view-selection-setfocus-no-ranges",this);const i=ge._createAt(e,t);if(i.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.pop(),i.compareWith(s)=="before"?this._addRange(new We(i,s),!0):this._addRange(new We(s,i)),this.fire("change")}toJSON(){const e={ranges:Array.from(this.getRanges()).map(t=>t.toJSON())};return this.isBackward&&(e.isBackward=!0),this.isFake&&(e.isFake=!0),e}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(const i of e)this._addRange(i);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof We))throw new D("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(const t of this._ranges)if(e.isIntersecting(t))throw new D("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new We(e.start,e.end))}}vr.prototype.is=function(n){return n==="selection"||n==="view:selection"};class RE extends Ot(Cc){_selection;constructor(...e){super(),this._selection=new vr,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}toJSON(){return this._selection.toJSON()}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}}RE.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};class kc extends ua{startRange;_eventPhase;_currentTarget;constructor(e,t,i){super(e,t),this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const I_=Symbol("bubblingEmitter"),R_=Symbol("bubblingCallbacks"),P_=Symbol("bubblingContexts");function Xhe(n){class e extends n{fire(i,...s){try{const r=i instanceof ua?i:new ua(this,i),o=O_(this),a=vO(this);if(Yf(r,"capturing",this),Mp(o,"$capture",r,...s))return r.return;const c=r.startRange||this.selection.getFirstRange(),d=c?c.getContainedElement():null,h=d?tme(a,d):!1;let m=d||nme(c);if(Yf(r,"atTarget",m),!h){if(Mp(o,"$text",r,...s))return r.return;Yf(r,"bubbling",m)}for(;m;){if(m.is("element")&&Mp(o,m,r,...s))return r.return;m=m.parent,Yf(r,"bubbling",m)}return Yf(r,"bubbling",this),Mp(o,"$document",r,...s),r.return}catch(r){D.rethrowUnexpectedError(r,this)}}_addEventListener(i,s,r){const o=yt(r.context||"$document"),a=O_(this),c=wO(this);for(const h of o)typeof h=="function"&&vO(this).add(h);const d=eme(this,o,s);c.set(s,d),this.listenTo(a,i,d,r)}_removeEventListener(i,s){const r=O_(this),o=wO(this),a=o.get(s);a&&(o.delete(s),this.stopListening(r,i,a))}}return e}function Yf(n,e,t){n instanceof kc&&(n._eventPhase=e,n._currentTarget=t)}function Mp(n,e,t,...i){return n.fire(t,{currentTarget:e,eventArgs:i}),!!t.stop.called}function eme(n,e,t){return function(i,s){const{currentTarget:r,eventArgs:o}=s;if(typeof r=="string"){e.includes(r)&&t.call(n,i,...o);return}if(r.is("rootElement")&&e.includes("$root")){t.call(n,i,...o);return}if(e.includes(r.name)){t.call(n,i,...o);return}for(const a of e)if(typeof a=="function"&&a(r)){t.call(n,i,...o);return}}}function O_(n){return n[I_]||(n[I_]=new(Ot())),n[I_]}function wO(n){return n[R_]||(n[R_]=new Map),n[R_]}function vO(n){return n[P_]||(n[P_]=new Set),n[P_]}function tme(n,e){for(const t of n)if(t(e))return!0;return!1}function nme(n){if(!n)return null;const e=n.start.parent,t=n.end.parent,i=e.getPath(),s=t.getPath();return i.length>s.length?e:t}class ry extends Xhe(kt()){selection;roots;stylesProcessor;_postFixers=new Set;constructor(e){super(),this.selection=new RE,this.roots=new Wn({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(const i of this._postFixers)if(t=i(e),t)break;while(t)}}const yO=10;class od extends Sr{static DEFAULT_PRIORITY=yO;_priority=yO;_id=null;_clonesGroup=null;constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=ime}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new D("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(e){return this.id!==null||e.id!==null?this.id===e.id:super.isSimilar(e)&&this.priority==e.priority}toJSON(){const e=super.toJSON();return e.type="AttributeElement",e}_clone(e=!1){const t=super._clone(e);return t._priority=this._priority,t._id=this._id,t}_canMergeAttributesFrom(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canMergeAttributesFrom(e)}_canSubtractAttributesOf(e){return this.id!==null||e.id!==null||this.priority!==e.priority?!1:super._canSubtractAttributesOf(e)}}od.prototype.is=function(n,e){return e?e===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function ime(){if(D_(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if(D_(n)>1)return null;n=n.parent}return!n||D_(n)>1?null:this.childCount}function D_(n){return Array.from(n.getChildren()).filter(e=>!e.is("uiElement")).length}class PE extends Sr{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=sme}toJSON(){const e=super.toJSON();return e.type="EmptyElement",e}_insertChild(e,t){if(t&&(t instanceof xc||Array.from(t).length>0))throw new D("view-emptyelement-cannot-add",[this,t]);return 0}}PE.prototype.is=function(n,e){return e?e===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function sme(){return null}class oy extends Sr{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=ome}_insertChild(e,t){if(t&&(t instanceof xc||Array.from(t).length>0))throw new D("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){const t=e.createElement(this.name);for(const i of this.getAttributeKeys())t.setAttribute(i,this.getAttribute(i));return t}toJSON(){const e=super.toJSON();return e.type="UIElement",e}}oy.prototype.is=function(n,e){return e?e===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function rme(n){n.document.on("arrowKey",(e,t)=>ame(e,t,n.domConverter),{priority:"low"})}function ome(){return null}function ame(n,e,t){if(e.keyCode==tt.arrowright){const i=e.domTarget.ownerDocument.defaultView.getSelection(),s=i.rangeCount==1&&i.getRangeAt(0).collapsed;if(s||e.shiftKey){const r=i.focusNode,o=i.focusOffset,a=t.domPositionToView(r,o);if(a===null)return;let c=!1;const d=a.getLastMatchingPosition(h=>(h.item.is("uiElement")&&(c=!0),!!(h.item.is("uiElement")||h.item.is("attributeElement"))));if(c){const h=t.viewPositionToDom(d);s?i.collapse(h.parent,h.offset):i.extend(h.parent,h.offset)}}}}class OE extends Sr{constructor(e,t,i,s){super(e,t,i,s),this.getFillerOffset=lme}toJSON(){const e=super.toJSON();return e.type="RawElement",e}_insertChild(e,t){if(t&&(t instanceof xc||Array.from(t).length>0))throw new D("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}}OE.prototype.is=function(n,e){return e?e===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function lme(){return null}class ic extends Ot(Cc){document;_children=[];_customProperties=new Map;constructor(e,t){super(),this.document=e,t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*this._customProperties.entries()}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this,{index:e});let i=0;const s=cme(this.document,t);for(const r of s)r.parent!==null&&r._remove(),r.parent=this,this._children.splice(e,0,r),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this,{index:e});for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_fireChange(e,t,i){this.fire(`change:${e}`,t,i)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}}ic.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};function cme(n,e){return typeof e=="string"?[new Hn(n,e)]:(Is(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new Hn(n,t):t instanceof Wo?new Hn(n,t.data):t))}class DE{document;_cloneGroups=new Map;_slotFactory=null;constructor(e){this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new ic(this.document,e)}createText(e){return new Hn(this.document,e)}createAttributeElement(e,t,i={}){const s=new od(this.document,e,t);return typeof i.priority=="number"&&(s._priority=i.priority),i.id&&(s._id=i.id),i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createContainerElement(e,t,i={},s={}){let r;hme(i)?s=i:r=i;const o=new Qh(this.document,e,t,r);return s.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),o}createEditableElement(e,t,i={}){const s=new sy(this.document,e,t);return i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createEmptyElement(e,t,i={}){const s=new PE(this.document,e,t);return i.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),s}createUIElement(e,t,i){const s=new oy(this.document,e,t);return i&&(s.render=i),s}createRawElement(e,t,i,s={}){const r=new OE(this.document,e,t);return i&&(r.render=i),s.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),r}setAttribute(e,t,i,s){s!==void 0?s._setAttribute(e,t,i):i._setAttribute(e,t)}removeAttribute(e,t,i){i!==void 0?i._removeAttribute(e,t):t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){pr(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof ge?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){const t=e.parent;if(!t.is("containerElement"))throw new D("view-writer-break-non-container-element",this.document);if(!t.parent)throw new D("view-writer-break-root",this.document);if(e.isAtStart)return ge._createBefore(t);if(!e.isAtEnd){const i=t._clone(!1);this.insert(ge._createAfter(t),i);const s=new We(e,ge._createAt(t,"end")),r=new ge(i,0);this.move(s,r)}return ge._createAfter(t)}mergeAttributes(e){const t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&i.childCount===0){const o=i.parent,a=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new ge(o,a))}const s=i.getChild(t-1),r=i.getChild(t);if(!s||!r)return e;if(s.is("$text")&&r.is("$text"))return _O(s,r);if(s.is("attributeElement")&&r.is("attributeElement")&&s.isSimilar(r)){const o=s.childCount;return s._appendChild(r.getChildren()),r._remove(),this._removeFromClonedElementsGroup(r),this.mergeAttributes(new ge(s,o))}return e}mergeContainers(e){const t=e.nodeBefore,i=e.nodeAfter;if(!t||!i||!t.is("containerElement")||!i.is("containerElement"))throw new D("view-writer-merge-containers-invalid-position",this.document);const s=t.getChild(t.childCount-1),r=s instanceof Hn?ge._createAt(s,"end"):ge._createAt(t,"end");return this.move(We._createIn(i),ge._createAt(t,"end")),this.remove(We._createOn(i)),r}insert(e,t){t=Is(t)?[...t]:[t],I6(t,this.document);const i=t.reduce((o,a)=>{const c=o[o.length-1],d=!a.is("uiElement");return!c||c.breakAttributes!=d?o.push({breakAttributes:d,nodes:[a]}):c.nodes.push(a),o},[]);let s=null,r=e;for(const{nodes:o,breakAttributes:a}of i){const c=this._insertNodes(r,o,a);s||(s=c.start),r=c.end}return s?new We(s,r):new We(e)}remove(e){const t=e instanceof We?e:We._createOn(e);if(Kf(t,this.document),t.isCollapsed)return new ic(this.document);const{start:i,end:s}=this._breakAttributesRange(t,!0),r=i.parent,o=s.offset-i.offset,a=r._removeChildren(i.offset,o);for(const d of a)this._removeFromClonedElementsGroup(d);const c=this.mergeAttributes(i);return t.start=c,t.end=c.clone(),new ic(this.document,a)}clear(e,t){Kf(e,this.document);const i=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(const s of i){const r=s.item;let o;if(r.is("element")&&t.isSimilar(r))o=We._createOn(r);else if(!s.nextPosition.isAfter(e.start)&&r.is("$textProxy")){const a=r.getAncestors().find(c=>c.is("element")&&t.isSimilar(c));a&&(o=We._createIn(a))}o&&(o.end.isAfter(e.end)&&(o.end=e.end),o.start.isBefore(e.start)&&(o.start=e.start),this.remove(o))}}move(e,t){let i;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);const s=t.parent,r=s.childCount;e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=s.childCount-r}else i=this.remove(e);return this.insert(t,i)}wrap(e,t){if(!(t instanceof od))throw new D("view-writer-wrap-invalid-attribute",this.document);if(Kf(e,this.document),e.isCollapsed){let i=e.start;i.parent.is("element")&&!ume(i.parent)&&(i=i.getLastMatchingPosition(r=>r.item.is("uiElement"))),i=this._wrapPosition(i,t);const s=this.document.selection;return s.isCollapsed&&s.getFirstPosition().isEqual(e.start)&&this.setSelection(i),new We(i)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof od))throw new D("view-writer-unwrap-invalid-attribute",this.document);if(Kf(e,this.document),e.isCollapsed)return e;const{start:i,end:s}=this._breakAttributesRange(e,!0),r=i.parent,o=this._unwrapChildren(r,i.offset,s.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const c=this.mergeAttributes(o.end);return new We(a,c)}rename(e,t){const i=new Qh(this.document,e,t.getAttributes());return this.insert(ge._createAfter(t),i),this.move(We._createIn(t),ge._createAt(i,0)),this.remove(We._createOn(t)),i}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return ge._createAt(e,t)}createPositionAfter(e){return ge._createAfter(e)}createPositionBefore(e){return ge._createBefore(e)}createRange(e,t){return new We(e,t)}createRangeOn(e){return We._createOn(e)}createRangeIn(e){return We._createIn(e)}createSelection(...e){return new vr(...e)}createSlot(e="children"){if(!this._slotFactory)throw new D("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,i){let s;if(i?s=TC(e):s=e.parent.is("$text")?e.parent.parent:e.parent,!s)throw new D("view-writer-invalid-position-container",this.document);let r;i?r=this._breakAttributes(e,!0):r=e.parent.is("$text")?M_(e):e;const o=s._insertChild(r.offset,t);for(const h of t)this._addToClonedElementsGroup(h);const a=r.getShiftedBy(o),c=this.mergeAttributes(r);c.isEqual(r)||a.offset--;const d=this.mergeAttributes(a);return new We(c,d)}_wrapChildren(e,t,i,s){let r=t;const o=[];for(;r<i;){const c=e.getChild(r),d=c.is("$text"),h=c.is("attributeElement");if(h&&c._canMergeAttributesFrom(s))c._mergeAttributesFrom(s),o.push(new ge(e,r));else if(d||!h||dme(s,c)){const m=s._clone();c._remove(),m._appendChild(c),e._insertChild(r,m),this._addToClonedElementsGroup(m),o.push(new ge(e,r))}else this._wrapChildren(c,0,c.childCount,s);r++}let a=0;for(const c of o){if(c.offset-=a,c.offset==t)continue;this.mergeAttributes(c).isEqual(c)||(a++,i--)}return We._createFromParentsAndOffsets(e,t,e,i)}_unwrapChildren(e,t,i,s){let r=t;const o=[];for(;r<i;){const c=e.getChild(r);if(!c.is("attributeElement")){r++;continue}if(c.isSimilar(s)){const d=c.getChildren(),h=c.childCount;c._remove(),e._insertChild(r,d),this._removeFromClonedElementsGroup(c),o.push(new ge(e,r),new ge(e,r+h)),r+=h,i+=h-1;continue}if(c._canSubtractAttributesOf(s)){c._subtractAttributesOf(s),o.push(new ge(e,r),new ge(e,r+1)),r++;continue}this._unwrapChildren(c,0,c.childCount,s),r++}let a=0;for(const c of o){if(c.offset-=a,c.offset==t||c.offset==i)continue;this.mergeAttributes(c).isEqual(c)||(a++,i--)}return We._createFromParentsAndOffsets(e,t,e,i)}_wrapRange(e,t){const{start:i,end:s}=this._breakAttributesRange(e,!0),r=i.parent,o=this._wrapChildren(r,i.offset,s.offset,t),a=this.mergeAttributes(o.start);a.isEqual(o.start)||o.end.offset--;const c=this.mergeAttributes(o.end);return new We(a,c)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return AO(e.clone());e.parent.is("$text")&&(e=M_(e));const i=this.createAttributeElement("_wrapPosition-fake-element");i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,e.parent._insertChild(e.offset,i);const s=new We(e,e.getShiftedBy(1));this.wrap(s,t);const r=new ge(i.parent,i.index);i._remove();const o=r.nodeBefore,a=r.nodeAfter;return o&&o.is("view:$text")&&a&&a.is("view:$text")?_O(o,a):AO(r)}_breakAttributesRange(e,t=!1){const i=e.start,s=e.end;if(Kf(e,this.document),e.isCollapsed){const c=this._breakAttributes(e.start,t);return new We(c,c)}const r=this._breakAttributes(s,t),o=r.parent.childCount,a=this._breakAttributes(i,t);return r.offset+=r.parent.childCount-o,new We(a,r)}_breakAttributes(e,t=!1){const i=e.offset,s=e.parent;if(e.parent.is("emptyElement"))throw new D("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new D("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new D("view-writer-cannot-break-raw-element",this.document);if(!t&&s.is("$text")&&IC(s.parent)||IC(s))return e.clone();if(s.is("$text"))return this._breakAttributes(M_(e),t);const r=s.childCount;if(i==r){const o=new ge(s.parent,s.index+1);return this._breakAttributes(o,t)}else if(i===0){const o=new ge(s.parent,s.index);return this._breakAttributes(o,t)}else{const o=s.index+1,a=s._clone();s.parent._insertChild(o,a),this._addToClonedElementsGroup(a);const c=s.childCount-i,d=s._removeChildren(i,c);a._appendChild(d);const h=new ge(s.parent,o);return this._breakAttributes(h,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(const s of e.getChildren())this._addToClonedElementsGroup(s);const t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i||(i=new Set,this._cloneGroups.set(t,i)),i.add(e),e._clonesGroup=i}_removeFromClonedElementsGroup(e){if(e.is("element"))for(const s of e.getChildren())this._removeFromClonedElementsGroup(s);const t=e.id;if(!t)return;const i=this._cloneGroups.get(t);i&&i.delete(e)}}function ume(n){return Array.from(n.getChildren()).some(e=>!e.is("uiElement"))}function TC(n){let e=n.parent;for(;!IC(e);){if(!e)return;e=e.parent}return e}function dme(n,e){return n.priority<e.priority?!0:n.priority>e.priority?!1:n.getIdentity()<e.getIdentity()}function AO(n){const e=n.nodeBefore;if(e&&e.is("$text"))return new ge(e,e.data.length);const t=n.nodeAfter;return t&&t.is("$text")?new ge(t,0):n}function M_(n){if(n.offset==n.parent.data.length)return new ge(n.parent.parent,n.parent.index+1);if(n.offset===0)return new ge(n.parent.parent,n.parent.index);const e=n.parent.data.slice(n.offset);return n.parent._data=n.parent.data.slice(0,n.offset),n.parent.parent._insertChild(n.parent.index+1,new Hn(n.root.document,e)),new ge(n.parent.parent,n.parent.index+1)}function _O(n,e){const t=n.data.length;return n._data+=e.data,e._remove(),new ge(n,t)}const fme=[Hn,od,Qh,PE,OE,oy];function I6(n,e){for(const t of n){if(!fme.some(i=>t instanceof i))throw new D("view-writer-insert-invalid-node-type",e);t.is("$text")||I6(t.getChildren(),e)}}function IC(n){return n&&(n.is("containerElement")||n.is("documentFragment"))}function Kf(n,e){const t=TC(n.start),i=TC(n.end);if(!t||!i||t!==i)throw new D("view-writer-invalid-range-container",e)}function hme(n){return pr(n)}const R6=n=>n.createTextNode(""),P6=n=>{const e=n.createElement("span");return e.dataset.ckeFiller="true",e.innerText="",e},O6=n=>{const e=n.createElement("br");return e.dataset.ckeFiller="true",e},ks=7,Zh="".repeat(ks);function Di(n){return typeof n=="string"?n.substr(0,ks)===Zh:sn(n)&&n.data.substr(0,ks)===Zh}function Qu(n){return n.data.length==ks&&Di(n)}function CO(n){const e=typeof n=="string"?n:n.data;return Di(n)?e.slice(ks):e}function mme(n){n.document.on("arrowKey",gme,{priority:"low"})}function gme(n,e){if(e.keyCode==tt.arrowleft){const t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){const i=t.getRangeAt(0).startContainer,s=t.getRangeAt(0).startOffset;Di(i)&&s<=ks&&t.collapse(i,0)}}}class pme extends kt(){domDocuments=new Set;domConverter;markedAttributes=new Set;markedChildren=new Set;markedTexts=new Set;selection;_inlineFiller=null;_fakeSelectionContainer=null;constructor(e,t){super(),this.domConverter=e,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),Pe.isBlink&&!Pe.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else if(e==="children")this.markedChildren.add(t);else throw new D("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!Pe.isAndroid)return;let e=null;const t=Pe.isBlink&&!Pe.isAndroid?!this.isSelecting:!0;for(const i of this.markedChildren)this._updateChildrenMappings(i);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=ge._createBefore(e.parent)));for(const i of this.markedAttributes)this._updateAttrs(i);for(const i of this.markedChildren)this._updateChildren(i,{inlineFillerPosition:e});for(const i of this.markedTexts)!this.markedChildren.has(i.parent)&&this.domConverter.mapViewToDom(i.parent)&&this._updateText(i,{inlineFillerPosition:e});if(t)if(e){const i=this.domConverter.viewPositionToDom(e),s=i.parent.ownerDocument;Di(i.parent)?this._inlineFiller=i.parent:this._inlineFiller=xO(s,i.parent,i.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){const t=this.domConverter.mapViewToDom(e);if(!t)return;const i=Array.from(t.childNodes),s=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),r=this._diffNodeLists(i,s),o=this._findUpdateActions(r,i,s,wme);if(o.indexOf("update")!==-1){const a={equal:0,insert:0,delete:0};for(const c of o)if(c==="update"){const d=a.equal+a.insert,h=a.equal+a.delete,m=e.getChild(d);m&&!m.is("uiElement")&&!m.is("rawElement")&&this._updateElementMappings(m,i[h]),aO(s[d]),a.equal++}else a[c]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){const e=this.selection.getFirstPosition();return e.parent.is("$text")?ge._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&sn(t.parent)&&Di(t.parent))}_removeInlineFiller(){const e=this._inlineFiller;if(!Di(e))throw new D("view-renderer-filler-was-lost",this);Qu(e)?e.remove():e.data=e.data.substr(ks),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const e=this.selection.getFirstPosition(),t=e.parent,i=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!bme(t))return!1;const s=e.nodeBefore,r=e.nodeAfter;return!(s instanceof Hn||r instanceof Hn||i===t.getFillerOffset()&&(!s||!s.is("element","br"))||Pe.isAndroid&&(s||r))}_updateText(e,t){const i=this.domConverter.findCorrespondingDomText(e);let r=this.domConverter.viewToDom(e).data;const o=t.inlineFillerPosition;o&&o.parent==e.parent&&o.offset==e.index&&(r=Zh+r),this._updateTextNode(i,r)}_updateAttrs(e){const t=this.domConverter.mapViewToDom(e);if(t){for(const i of Array.from(t.attributes)){const s=i.name;e.hasAttribute(s)||this.domConverter.removeDomElementAttribute(t,s)}for(const i of e.getAttributeKeys())this.domConverter.setDomElementAttribute(t,i,e.getAttribute(i),e)}}_updateChildren(e,t){const i=this.domConverter.mapViewToDom(e);if(!i)return;if(Pe.isAndroid){let m=null;for(const p of Array.from(i.childNodes)){if(m&&sn(m)&&sn(p)){i.normalize();break}m=p}}const s=t.inlineFillerPosition,r=i.childNodes,o=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));s&&s.parent===e&&xO(i.ownerDocument,o,s.offset);const a=this._diffNodeLists(r,o),c=this._findUpdateActions(a,r,o,vme);let d=0;const h=new Set;for(const m of c)m==="delete"?(h.add(r[d]),aO(r[d])):(m==="equal"||m==="update")&&d++;d=0;for(const m of c)m==="insert"?(g6(i,d,o[d]),d++):m==="update"?(this._updateTextNode(r[d],o[d].data),d++):m==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(o[d])),d++);for(const m of h)m.parentNode||this.domConverter.unbindDomElement(m)}_diffNodeLists(e,t){return e=_me(e,this._fakeSelectionContainer),sd(e,t,yme.bind(null,this.domConverter))}_findUpdateActions(e,t,i,s){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let r=[],o=[],a=[];const c={equal:0,insert:0,delete:0};for(const d of e)d==="insert"?a.push(i[c.equal+c.insert]):d==="delete"?o.push(t[c.equal+c.delete]):(r=r.concat(sd(o,a,s).map(h=>h==="equal"?"update":h)),r.push("equal"),o=[],a=[]),c[d]++;return r.concat(sd(o,a,s).map(d=>d==="equal"?"update":d))}_updateTextNode(e,t){const i=e.data;i!=t&&(Pe.isAndroid&&this.isComposing&&i.replace(/\u00A0/g," ")==t.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,t))}_updateTextNodeInternal(e,t){const i=e6(e.data,t);for(const s of i)s.type==="insert"?e.insertData(s.index,s.values.join("")):e.deleteData(s.index,s.howMany)}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(const t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(Pe.isBlink&&!Pe.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const e=this.domConverter.mapViewToDom(this.selection.editableElement);if(!this.isFocused||!e){!this.selection.isFake&&this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected&&this._removeFakeSelection();return}this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&Pe.isAndroid||this._updateDomSelection(e)}_updateFakeSelection(e){const t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=Cme(t));const i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!i.parentElement||i.parentElement!=e)&&e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||"";const s=t.getSelection(),r=t.createRange();s.removeAllRanges(),r.selectNodeContents(i),s.addRange(r)}_updateDomSelection(e){const t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;const i=this.domConverter.viewPositionToDom(this.selection.anchor),s=this.domConverter.viewPositionToDom(this.selection.focus);t.setBaseAndExtent(i.parent,i.offset,s.parent,s.offset),Pe.isGecko&&Ame(s,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;const t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){const t=this._fakeSelectionContainer,i=e.ownerDocument.getSelection();return!t||t.parentElement!==e||i.anchorNode!==t&&!t.contains(i.anchorNode)?!0:t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const e of this.domDocuments){const t=e.getSelection();if(t.rangeCount){const i=e.activeElement,s=this.domConverter.mapDomToView(i);i&&s&&t.removeAllRanges()}}}_removeFakeSelection(){const e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){const e=this.selection.editableElement;e&&this.domConverter.focus(e)}}}function bme(n){if(n.getAttribute("contenteditable")=="false")return!1;const e=n.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function xO(n,e,t){const i=e instanceof Array?e:e.childNodes,s=i[t];if(sn(s))return s.data=Zh+s.data,s;{const r=n.createTextNode(Zh);return Array.isArray(e)?i.splice(t,0,r):g6(e,t,r),r}}function wme(n,e){return al(n)&&al(e)&&!sn(n)&&!sn(e)&&!yh(n)&&!yh(e)&&n.tagName.toLowerCase()===e.tagName.toLowerCase()}function vme(n,e){return al(n)&&al(e)&&sn(n)&&sn(e)}function yme(n,e,t){return e===t?!0:sn(e)&&sn(t)?e.data===t.data:!!(n.isBlockFiller(e)&&n.isBlockFiller(t))}function Ame(n,e){let t=n.parent,i=n.offset;if(sn(t)&&Qu(t)&&(i=qu(t)+1,t=t.parentNode),t.nodeType!=Node.ELEMENT_NODE||i!=t.childNodes.length-1)return;const s=t.childNodes[i];s&&s.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function _me(n,e){const t=Array.from(n);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function Cme(n){const e=n.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent="",e}const xme=O6(me.document),kme=R6(me.document),Eme=P6(me.document),Bp="data-ck-unsafe-attribute-",kO="data-ck-unsafe-element";class ay{document;renderingMode;blockFillerMode;preElements;blockElements;inlineObjectElements;unsafeElements;_domDocument;_domToViewMapping=new WeakMap;_viewToDomMapping=new WeakMap;_fakeSelectionMapping=new WeakMap;_rawContentElementMatcher=new ji;_inlineObjectElementMatcher=new ji;_elementsWithTemporaryCustomProperties=new Set;constructor(e,{blockFillerMode:t,renderingMode:i="editing"}={}){this.document=e,this.renderingMode=i,this.blockFillerMode=t||(i==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?me.document:me.document.implementation.createHTMLDocument("")}get domDocument(){return this._domDocument}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new vr(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){const t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(const i of e.children)this.unbindDomElement(i)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,i){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:i==="img"&&(e==="src"||e==="srcset")||i==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}const i=new DOMParser().parseFromString(t,"text/html"),s=i.createDocumentFragment(),r=i.body.childNodes;for(;r.length>0;)s.appendChild(r[0]);const o=i.createTreeWalker(s,NodeFilter.SHOW_ELEMENT),a=[];let c;for(;c=o.nextNode();)a.push(c);for(const d of a){for(const m of d.getAttributeNames())this.setDomElementAttribute(d,m,d.getAttribute(m));const h=d.tagName.toLowerCase();this._shouldRenameElement(h)&&(IO(h),d.replaceWith(this._createReplacementDomElement(h,d)))}for(;e.firstChild;)e.firstChild.remove();e.append(s)}viewToDom(e,t={}){if(e.is("$text")){const i=this._processDataFromViewText(e);return this._domDocument.createTextNode(i)}else{const i=e;if(this.mapViewToDom(i))if(i.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(i);else return this.mapViewToDom(i);let s;if(i.is("documentFragment"))s=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(s,i);else{if(i.is("uiElement"))return i.name==="$comment"?s=this._domDocument.createComment(i.getCustomProperty("$rawContent")):s=i.render(this._domDocument,this),t.bind&&this.bindElements(s,i),s;this._shouldRenameElement(i.name)?(IO(i.name),s=this._createReplacementDomElement(i.name)):i.hasAttribute("xmlns")?s=this._domDocument.createElementNS(i.getAttribute("xmlns"),i.name):s=this._domDocument.createElement(i.name),i.is("rawElement")&&i.render(s,this),t.bind&&this.bindElements(s,i);for(const r of i.getAttributeKeys())this.setDomElementAttribute(s,r,i.getAttribute(r),i)}if(t.withChildren!==!1)for(const r of this.viewChildrenToDom(i,t))s instanceof HTMLTemplateElement?s.content.appendChild(r):s.appendChild(r);return s}}setDomElementAttribute(e,t,i,s){const r=this.shouldRenderAttribute(t,i,e.tagName.toLowerCase())||s&&s.shouldRenderUnsafeAttribute(t);if(r||lt("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:i}),!p6(t)){lt("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:i});return}e.hasAttribute(t)&&!r?e.removeAttribute(t):e.hasAttribute(Bp+t)&&r&&e.removeAttribute(Bp+t),e.setAttribute(r?t:Bp+t,i)}removeDomElementAttribute(e,t){t!=kO&&(e.removeAttribute(t),e.removeAttribute(Bp+t))}*viewChildrenToDom(e,t={}){const i=e.getFillerOffset&&e.getFillerOffset();let s=0;for(const r of e.getChildren()){i===s&&(yield this._getBlockFiller());const o=r.is("element")&&!!r.getCustomProperty("dataPipeline:transparentRendering")&&!qt(r.getAttributes());if(o&&this.renderingMode=="data")if(r.is("rawElement")){const a=this._domDocument.createElement(r.name);r.render(a,this),yield*[...a.childNodes]}else yield*this.viewChildrenToDom(r,t);else o&&lt("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:r}),yield this.viewToDom(r,t);s++}i===s&&(yield this._getBlockFiller())}viewRangeToDom(e){const t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),s=this._domDocument.createRange();return s.setStart(t.parent,t.offset),s.setEnd(i.parent,i.offset),s}viewPositionToDom(e){const t=e.parent;if(t.is("$text")){const i=this.findCorrespondingDomText(t);if(!i)return null;let s=e.offset;return Di(i)&&(s+=ks),i.data&&s>i.data.length&&(s=i.data.length),{parent:i,offset:s}}else{let i,s,r;if(e.offset===0){if(i=this.mapViewToDom(t),!i)return null;r=i.childNodes[0]}else{const a=e.nodeBefore;if(s=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!s)return null;i=s.parentNode,r=s.nextSibling}if(sn(r)&&Di(r))return{parent:r,offset:ks};const o=s?qu(s)+1:0;return{parent:i,offset:o}}}domToView(e,t={}){const i=[],s=this._domToView(e,t,i),r=s.next().value;return!r||(s.next(),this._processDomInlineNodes(null,i,t),this.blockFillerMode=="br"&&SO(r))||r.is("$text")&&r.data.length==0?null:r}*domChildrenToView(e,t={},i=[]){let s=[];e instanceof HTMLTemplateElement?s=[...e.content.childNodes]:s=[...e.childNodes];for(let r=0;r<s.length;r++){const o=s[r],a=this._domToView(o,t,i),c=a.next().value;c!==null&&(this._isBlockViewElement(c)&&this._processDomInlineNodes(e,i,t),this.blockFillerMode=="br"&&SO(c)||(yield c),a.next())}this._processDomInlineNodes(e,i,t)}domSelectionToView(e){if(Pme(e))return new vr([]);if(e.rangeCount===1){let s=e.getRangeAt(0).startContainer;sn(s)&&(s=s.parentNode);const r=this.fakeSelectionToView(s);if(r)return r}const t=this.isDomSelectionBackward(e),i=[];for(let s=0;s<e.rangeCount;s++){const r=e.getRangeAt(s),o=this.domRangeToView(r);o&&i.push(o)}return new vr(i,{backward:t})}domRangeToView(e){const t=this.domPositionToView(e.startContainer,e.startOffset),i=this.domPositionToView(e.endContainer,e.endOffset);return t&&i?new We(t,i):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,qu(e));const i=this.mapDomToView(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return ge._createBefore(i);if(sn(e)){if(Qu(e))return this.domPositionToView(e.parentNode,qu(e));const s=this.findCorrespondingViewText(e);let r=t;return s?(Di(e)&&(r-=ks,r=r<0?0:r),new ge(s,r)):null}else{if(t===0){const s=this.mapDomToView(e);if(s)return new ge(s,0)}else{const s=e.childNodes[t-1];if(sn(s)&&Qu(s)||s&&this.isBlockFiller(s))return this.domPositionToView(s.parentNode,qu(s));const r=sn(s)?this.findCorrespondingViewText(s):this.mapDomToView(s);if(r&&r.parent)return new ge(r.parent,r.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(Qu(e))return null;const t=this.getHostViewElement(e);if(t)return t;const i=e.previousSibling;if(i){if(!this.isElement(i))return null;const s=this.mapDomToView(i);if(s){const r=s.nextSibling;return r instanceof Hn?r:null}}else{const s=this.mapDomToView(e.parentNode);if(s){const r=s.getChild(0);return r instanceof Hn?r:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){const t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){const t=this.mapViewToDom(e);if(!t||t.ownerDocument.activeElement===t)return;const{scrollX:i,scrollY:s}=me.window,r=[];EO(t,o=>{const{scrollLeft:a,scrollTop:c}=o;r.push([a,c])}),t.focus({preventScroll:!0}),EO(t,o=>{const[a,c]=r.shift();o.scrollLeft=a,o.scrollTop=c}),me.window.scrollTo(i,s)}_clearDomSelection(){const e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;const t=e.ownerDocument.defaultView.getSelection(),i=this.domSelectionToView(t);i&&i.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(xme):TO(e,this.blockElements)?!0:e.isEqualNode(Eme)||Tme(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;const t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}const i=t.collapsed;return t.detach(),i}getHostViewElement(e){const t=u6(e);for(t.pop();t.length;){const i=t.pop(),s=this._domToViewMapping.get(i);if(s&&(s.is("uiElement")||s.is("rawElement")))return s}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(const e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return R6(this._domDocument);case"markedNbsp":return P6(this._domDocument);case"br":return O6(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(sn(e)&&Di(e)&&t<ks||this.isElement(e)&&Di(e.childNodes[t]))return!1;const i=this.mapDomToView(e);return!(i&&(i.is("uiElement")||i.is("rawElement")))}*_domToView(e,t,i){if(this.blockFillerMode!="br"&&TO(e,this.blockElements))return null;const s=this.getHostViewElement(e);if(s)return s;if(yh(e)&&t.skipComments)return null;if(sn(e)){if(Qu(e))return null;{const r=e.data;if(r==="")return null;const o=new Hn(this.document,r);return i.push(o),o}}else{let r=this.mapDomToView(e);if(r)return this._isInlineObjectElement(r)&&i.push(r),r;if(this.isDocumentFragment(e))r=new ic(this.document),t.bind&&this.bindDocumentFragments(e,r);else{r=this._createViewElement(e,t),t.bind&&this.bindElements(e,r);const a=e.attributes;if(a)for(let c=a.length,d=0;d<c;d++)r._setAttribute(a[d].name,a[d].value);if(this._isViewElementWithRawContent(r,t))return r._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(r)||i.push(r),r;if(yh(e))return r._setCustomProperty("$rawContent",e.data),r}yield r;const o=[];if(t.withChildren!==!1)for(const a of this.domChildrenToView(e,t,o))r._appendChild(a);if(this._isInlineObjectElement(r))i.push(r),this._processDomInlineNodes(null,o,t);else for(const a of o)i.push(a)}}_processDomInlineNodes(e,t,i){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let s=!1;for(let r=0;r<t.length;r++){const o=t[r];if(!o.is("$text")){s=!1;continue}let a,c=!1;if(this._isPreFormatted(o))a=CO(o.data);else{a=o.data.replace(/[ \n\t\r]{1,}/g," "),c=/[^\S\u00A0]/.test(a.charAt(a.length-1));const d=r>0?t[r-1]:null,h=r+1<t.length?t[r+1]:null,m=!d||d.is("element")&&d.name=="br"||s,p=h?!1:!Di(o.data);i.withChildren!==!1&&(m&&(a=a.replace(/^ /,"")),p&&(a=a.replace(/ $/,""))),a=CO(a),this.blockFillerMode!="br"&&o.parent&&(Rme(o.parent,a)?(a="",o.parent.parent&&(o.parent.parent._setCustomProperty("$hasBlockFiller",!0),o.parent._remove())):Ime(o.parent,a,this.blockElements)&&(a="",o.parent._setCustomProperty("$hasBlockFiller",!0))),a=a.replace(/ \u00A0/g,"  ");const w=h&&h.is("element")&&h.name!="br",A=h&&h.is("$text")&&h.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!h||w||A)&&(a=a.replace(/\u00A0$/," ")),(m||d&&d.is("element")&&d.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&o.parent?(o._remove(),t.splice(r,1),r--):(o._data=a,s=c)}t.length=0}_processDataFromViewText(e){let t=e.data;if(this._isPreFormatted(e))return t;if(t.charAt(0)==" "){const i=this._getTouchingInlineViewNode(e,!1);(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i)||!i)&&(t=""+t.substr(1))}if(t.charAt(t.length-1)==" "){const i=this._getTouchingInlineViewNode(e,!0),s=i&&i.is("$textProxy")&&i.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!i||s)&&(t=t.substr(0,t.length-1)+"")}return t.replace(/ {2}/g," ")}_nodeEndsWithSpace(e){if(this._isPreFormatted(e))return!1;const t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_isPreFormatted(e){if(Sme(e,this.preElements))return!0;for(const t of e.getAncestors({parentFirst:!0}))if(!(!t.is("element")||!t.hasStyle("white-space")||t.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(t.getStyle("white-space"));return!1}_getTouchingInlineViewNode(e,t){const i=new tc({startPosition:t?ge._createAfter(e):ge._createBefore(e),direction:t?"forward":"backward"});for(const{item:s}of i){if(s.is("$textProxy"))return s;if(s.is("element")&&s.getCustomProperty("dataPipeline:transparentRendering"))continue;if(s.is("element","br"))return null;if(this._isInlineObjectElement(s))return s;if(s.is("containerElement")||this._isBlockViewElement(s))return null}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,t){if(yh(e))return new oy(this.document,"$comment");const i=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new Sr(this.document,i)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){const t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){const i=this._domDocument.createElement("span");if(i.setAttribute(kO,e),t){for(;t.firstChild;)i.appendChild(t.firstChild);for(const s of t.getAttributeNames())i.setAttribute(s,t.getAttribute(s))}return i}}function Sme(n,e){return n.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function EO(n,e){let t=n;for(;t;)e(t),t=t.parentElement}function Tme(n,e){return n.isEqualNode(kme)&&D6(n,e)&&n.parentNode.childNodes.length===1}function D6(n,e){const t=n.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function Ime(n,e,t){return e==""&&n&&n.is("element")&&n.childCount==1&&t.includes(n.name)}function Rme(n,e){return e==""&&n&&n.is("element","span")&&n.childCount==1&&n.hasAttribute("data-cke-filler")}function SO(n){return n.is("element","br")&&n.hasAttribute("data-cke-filler")}function TO(n,e){return n.tagName==="BR"&&D6(n,e)&&n.parentNode.childNodes.length===1}function IO(n){n==="script"&&lt("domconverter-unsafe-script-element-detected"),n==="style"&&lt("domconverter-unsafe-style-element-detected")}function Pme(n){if(!Pe.isGecko||!n.rangeCount)return!1;const e=n.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch{return!0}return!1}class Dr extends Wi(){view;document;_isEnabled=!1;constructor(e){super(),this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class gc{view;document;domEvent;domTarget;constructor(e,t,i){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,QF(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class Mr extends Dr{useCapture=!1;usePassive=!1;observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(i=>{this.listenTo(e,i,(s,r)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(r.target)&&this.onDomEvent(r)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(e){this.stopListening(e)}fire(e,t,i){this.isEnabled&&this.document.fire(e,new gc(this.view,t,i))}}class Ome extends Mr{domEventType=["keydown","keyup"];onDomEvent(e){const t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return mc(this)}};this.fire(e.type,e,t)}}class Dme extends Dr{_fireSelectionChangeDoneDebounced;constructor(e){super(e),this._fireSelectionChangeDoneDebounced=Ts(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){const e=this.document;e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&i.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(i.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){const t=this.document.selection,i=new vr(t.getRanges(),{backward:t.isBackward,fake:!1});(e==tt.arrowleft||e==tt.arrowup)&&i.setTo(i.getFirstPosition()),(e==tt.arrowright||e==tt.arrowdown)&&i.setTo(i.getLastPosition());const s={oldSelection:t,newSelection:i,domSelection:null};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}let M6=class extends Dr{domConverter;_config;_domElements;_mutationObserver;constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(const t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(const e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;const t=this.domConverter,i=new Set,s=new Set;for(const o of e){const a=t.mapDomToView(o.target);a&&(a.is("uiElement")||a.is("rawElement")||o.type==="childList"&&!this._isBogusBrMutation(o)&&s.add(a))}for(const o of e){const a=t.mapDomToView(o.target);if(!(a&&(a.is("uiElement")||a.is("rawElement")))&&o.type==="characterData"){const c=t.findCorrespondingViewText(o.target);c&&!s.has(c.parent)?i.add(c):!c&&Di(o.target)&&s.add(t.mapDomToView(o.target.parentNode))}}const r=[];for(const o of i)r.push({type:"text",node:o});for(const o of s){const a=t.mapViewToDom(o),c=Array.from(o.getChildren()),d=Array.from(t.domChildrenToView(a,{withChildren:!1}));AC(c,d,Mme)||r.push({type:"children",node:o})}r.length&&this.document.fire("mutations",{mutations:r})}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}};function Mme(n,e){if(!Array.isArray(n))return n===e?!0:n.is("$text")&&e.is("$text")?n.data===e.data:!1}class _w extends Mr{_renderTimeoutId=null;_isFocusChanging=!1;domEventType=["focus","blur"];constructor(e){super(e),this.useCapture=!0;const t=this.document;t.on("focus",()=>this._handleFocus()),t.on("blur",(i,s)=>this._handleBlur(s)),t.on("beforeinput",()=>{t.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){const t=this.document.selection.editableElement;(t===null||t===e.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class Bme extends Dr{mutationObserver;focusObserver;selection;domConverter;_documents=new WeakSet;_fireSelectionChangeDoneDebounced;_clearInfiniteLoopInterval;_documentIsSelectingInactivityTimeoutDebounced;_loopbackCounter=0;_pendingSelectionChange=new Set;constructor(e){super(e),this.mutationObserver=e.getObserver(M6),this.focusObserver=e.getObserver(_w),this.selection=this.document.selection,this.domConverter=e.domConverter,this._fireSelectionChangeDoneDebounced=Ts(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=Ts(()=>this.document.isSelecting=!1,5e3),this.view.document.on("change:isFocused",(t,i,s)=>{if(s&&this._pendingSelectionChange.size){for(const r of Array.from(this._pendingSelectionChange))this._handleSelectionChange(r);this._pendingSelectionChange.clear()}})}observe(e){const t=e.ownerDocument,i=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},s=()=>{this.document.isSelecting&&(this._handleSelectionChange(t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",i,{priority:"highest"}),this.listenTo(e,"keydown",s,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",s,{priority:"highest",useCapture:!0}),!this._documents.has(t)&&(this.listenTo(t,"mouseup",s,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",()=>{this.document.isComposing&&!Pe.isAndroid||(this._handleSelectionChange(t),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(t)},{priority:"lowest"}),this._documents.add(t))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;const t=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(t.anchorNode))return;this.mutationObserver.flush();const i=this.domConverter.domSelectionToView(t);if(i.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!this.view.document.isFocused&&!this.view.document.isReadOnly){this._pendingSelectionChange.add(e);return}if(this._pendingSelectionChange.delete(e),!(this.selection.isEqual(i)&&this.domConverter.isDomSelectionCorrect(t))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(!Nme(i))this.view.forceRender();else if(this.selection.isSimilar(i))this.view.forceRender();else{const s={oldSelection:this.selection,newSelection:i,domSelection:t};this.document.fire("selectionChange",s),this._fireSelectionChangeDoneDebounced(s)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}function Nme(n){return Array.from(n.getRanges()).flatMap(e=>[e.start.root,e.end.root]).every(e=>e&&e.is("rootElement"))}class Vme extends Mr{domEventType=["compositionstart","compositionupdate","compositionend"];constructor(e){super(e);const t=this.document;t.on("compositionstart",()=>{t.isComposing=!0}),t.on("compositionend",()=>{t.isComposing=!1})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}}class B6{_files;_native;constructor(e,t={}){this._files=t.cacheFiles?RO(e):null,this._native=e}get files(){return this._files||(this._files=RO(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,i){this._native.setDragImage(e,t,i)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function RO(n){const e=Array.from(n.files||[]),t=Array.from(n.items||[]);return e.length?e:t.filter(i=>i.kind==="file").map(i=>i.getAsFile())}class Lme extends Mr{domEventType="beforeinput";onDomEvent(e){const t=e.getTargetRanges(),i=this.view,s=i.document;let r=null,o=null,a=[];if(e.dataTransfer&&(r=new B6(e.dataTransfer)),e.data!==null?o=e.data:r&&(o=r.getData("text/plain")),s.selection.isFake)a=Array.from(s.selection.getRanges()),e.preventDefault();else if(t.length)a=t.map(c=>{let d=i.domConverter.domPositionToView(c.startContainer,c.startOffset);const h=i.domConverter.domPositionToView(c.endContainer,c.endOffset);if(d&&Di(c.startContainer)&&c.startOffset<ks){e.preventDefault();let m=ks-c.startOffset;d=d.getLastMatchingPosition(p=>!!(p.item.is("attributeElement")||p.item.is("uiElement")||p.item.is("$textProxy")&&m--),{direction:"backward",singleCharacters:!0})}if(Fme(c.endContainer,c.endOffset)&&e.preventDefault(),d)return i.createRange(d,h);if(h)return i.createRange(h)}).filter(c=>!!c);else if(Pe.isAndroid){const c=e.target.ownerDocument.defaultView.getSelection();a=Array.from(i.domConverter.domSelectionToView(c).getRanges())}if(Pe.isAndroid&&e.inputType=="insertCompositionText"&&o&&o.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[i.createRange(a[0].end)]});return}if(["insertText","insertReplacementText"].includes(e.inputType)&&o&&o.includes(`
`)){const c=o.split(/\n{1,2}/g);let d=a;e.preventDefault();for(let h=0;h<c.length;h++){const m=c[h];m!=""&&(this.fire(e.type,e,{data:m,dataTransfer:r,targetRanges:d,inputType:e.inputType,isComposing:e.isComposing}),d=[s.selection.getFirstRange()]),h+1<c.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:d}),d=[s.selection.getFirstRange()])}return}this.fire(e.type,e,{data:o,dataTransfer:r,targetRanges:a,inputType:e.inputType,isComposing:e.isComposing})}}function Fme(n,e){for(;n.parentNode;){if(sn(n)){if(e!=n.data.length)return!1}else if(e!=n.childNodes.length)return!1;if(e=qu(n)+1,n=n.parentNode,e<n.childNodes.length&&Di(n.childNodes[e]))return!0}return!1}class zme extends Dr{constructor(e){super(e),this.document.on("keydown",(t,i)=>{if(this.isEnabled&&mhe(i.keyCode)){const s=new kc(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(s,i),s.stop.called&&t.stop()}})}observe(){}stopObserving(){}}class jme extends Dr{constructor(e){super(e);const t=this.document;t.on("keydown",(i,s)=>{if(!this.isEnabled||s.keyCode!=tt.tab||s.ctrlKey)return;const r=new kc(t,"tab",t.selection.getFirstRange());t.fire(r,s),r.stop.called&&i.stop()})}observe(){}stopObserving(){}}class Ume extends kt(){document;domConverter;domRoots=new Map;_renderer;_initialDomRootAttributes=new WeakMap;_observers=new Map;_writer;_ongoingChange=!1;_postFixersInProgress=!1;_renderingDisabled=!1;_hasChangedSinceTheLastRendering=!1;constructor(e){super(),this.document=new ry(e),this.domConverter=new ay(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new pme(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new DE(this.document),this.addObserver(M6),this.addObserver(_w),this.addObserver(Bme),this.addObserver(Ome),this.addObserver(Dme),this.addObserver(Vme),this.addObserver(zme),this.addObserver(Lme),this.addObserver(jme),mme(this),rme(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),Pe.isiOS&&this.listenTo(this.document,"blur",(t,i)=>{this.domConverter.mapDomToView(i.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(t,{mutations:i})=>{i.forEach(s=>this._renderer.markToSync(s.type,s.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,t="main"){const i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();const s={};for(const{name:o,value:a}of Array.from(e.attributes))s[o]=a,o==="class"?this._writer.addClass(a.split(" "),i):i.hasAttribute(o)||this._writer.setAttribute(o,a,i);this._initialDomRootAttributes.set(e,s);const r=()=>{this._writer.setAttribute("contenteditable",(!i.isReadOnly).toString(),i),i.isReadOnly?this._writer.addClass("ck-read-only",i):this._writer.removeClass("ck-read-only",i)};r(),this.domRoots.set(t,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",(o,a)=>this._renderer.markToSync("children",a)),i.on("change:attributes",(o,a)=>this._renderer.markToSync("attributes",a)),i.on("change:text",(o,a)=>this._renderer.markToSync("text",a)),i.on("change:isReadOnly",()=>this.change(r)),i.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const o of this._observers.values())o.observe(e,t)}detachDomRoot(e){const t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:s})=>t.removeAttribute(s));const i=this._initialDomRootAttributes.get(t);for(const s in i)t.setAttribute(s,i[s]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t);for(const s of this._observers.values())s.stopObserving(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(const[i,s]of this.domRoots)t.observe(s,i);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(const e of this._observers.values())e.disable()}enableObservers(){for(const e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:t,viewportOffset:i=20,ancestorOffset:s=20}={}){const r=this.document.selection.getFirstRange();if(!r)return;const o=zi({alignToTop:e,forceScroll:t,viewportOffset:i,ancestorOffset:s});typeof i=="number"&&(i={top:i,bottom:i,left:i,right:i});const a={target:this.domConverter.viewRangeToDom(r),viewportOffset:i,ancestorOffset:s,alignToTop:e,forceScroll:t};this.fire("scrollToTheSelection",a,o),v6(a)}focus(){if(!this.document.isFocused){const e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new D("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;const t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){D.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(_w).flush(),this.change(()=>{})}destroy(){for(const e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return ge._createAt(e,t)}createPositionAfter(e){return ge._createAfter(e)}createPositionBefore(e){return ge._createBefore(e)}createRange(e,t){return new We(e,t)}createRangeOn(e){return We._createOn(e)}createRangeIn(e){return We._createIn(e)}createSelection(...e){return new vr(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}class Al{is(){throw new Error("is() method is abstract")}}class wr extends Al{textNode;data;offsetInText;constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.offsetSize)throw new D("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new D("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}wr.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};class qo{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;_visitedParent;constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new D("model-tree-walker-no-start-position",null);const t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new D("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=le._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i,s,r;do s=this.position,r=this._visitedParent,{done:t,value:i}=this.next();while(!t&&e(i));t||(this._position=s,this._visitedParent=r)}jumpTo(e){this._boundaryStartParent&&e.isBefore(this.boundaries.start)?e=this.boundaries.start:this._boundaryEndParent&&e.isAfter(this.boundaries.end)&&(e=this.boundaries.end),this._position=e.clone(),this._visitedParent=e.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===i.maxOffset)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const s=Ah(t,i),r=s||N6(t,i,s);if(r&&r.is("model:element")){if(!this.shallow)t.path.push(0),this._visitedParent=r;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,Yl("elementStart",r,e,t,1)}if(r&&r.is("model:$text")){let o;if(this.singleCharacters)o=1;else{let d=r.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<d&&(d=this.boundaries.end.offset),o=d-t.offset}const a=t.offset-r.startOffset,c=new wr(r,a,o);return t.offset+=o,this._position=t,Yl("text",c,e,t,o)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():Yl("elementEnd",i,e,t)}_previous(){const e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const s=t.parent,r=Ah(t,s),o=r||V6(t,s,r);if(o&&o.is("model:element"))return t.offset--,this.shallow?(this._position=t,Yl("elementStart",o,e,t,1)):(t.path.push(o.maxOffset),this._position=t,this._visitedParent=o,this.ignoreElementEnd?this._previous():Yl("elementEnd",o,e,t));if(o&&o.is("model:$text")){let a;if(this.singleCharacters)a=1;else{let h=o.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>h&&(h=this.boundaries.start.offset),a=t.offset-h}const c=t.offset-o.startOffset,d=new wr(o,c-a,a);return t.offset-=a,this._position=t,Yl("text",d,e,t,a)}return t.path.pop(),this._position=t,this._visitedParent=i.parent,Yl("elementStart",i,e,t,1)}}function Yl(n,e,t,i,s){return{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:i,length:s}}}class le extends Al{root;path;stickiness;constructor(e,t,i="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new D("model-position-root-invalid",e);if(!Array.isArray(t)||t.length===0)throw new D("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChildAtOffset(this.path[t]),!e)throw new D("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new D("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Ah(this,this.parent)}get nodeAfter(){const e=this.parent;return N6(this,e,Ah(this,e))}get nodeBefore(){const e=this.parent;return V6(this,e,Ah(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChildAtOffset(this.path[t]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";const t=ri(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;const i=new qo(t);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){const t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];const t=ri(this.path,e.path),i=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,i)}getCommonAncestor(e){const t=this.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]==i[s]&&t[s];)s++;return s===0?null:t[s-1]}getShiftedBy(e){const t=this.clone(),i=t.offset+e;return t.offset=i<0?0:i,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;const t=Math.min(this.path.length,e.path.length);for(let i=0;i<t;i++){const s=this.path[i]-e.path[i];if(s<-1||s>1)return!1;if(s===1)return PO(e,this,i);if(s===-1)return PO(this,e,i)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?RC(this.path,t):RC(e.path,t)}hasSameParentAs(e){if(this.root!==e.root)return!1;const t=this.getParentPath(),i=e.getParentPath();return ri(t,i)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=le._createAt(this);break}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){const t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){const t=e.movedRange,i=t.containsPosition(this)||t.start.isEqual(this);let s;return i?(s=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(s=s._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?s=le._createAt(e.deletionPosition):s=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),s}_getTransformedByDeletion(e,t){const i=le._createAt(this);if(this.root!=e.root)return i;if(ri(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t}}else if(ri(e.getParentPath(),this.getParentPath())=="prefix"){const s=e.path.length-1;if(e.offset<=this.path[s]){if(e.offset+t>this.path[s])return null;i.path[s]-=t}}return i}_getTransformedByInsertion(e,t){const i=le._createAt(this);if(this.root!=e.root)return i;if(ri(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=t);else if(ri(e.getParentPath(),this.getParentPath())=="prefix"){const s=e.path.length-1;e.offset<=this.path[s]&&(i.path[s]+=t)}return i}_getTransformedByMove(e,t,i){if(t=t._getTransformedByDeletion(e,i),e.isEqual(t))return le._createAt(this);const s=this._getTransformedByDeletion(e,i);return s===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):s._getTransformedByInsertion(t,i)}_getCombined(e,t){const i=e.path.length-1,s=le._createAt(t);return s.stickiness=this.stickiness,s.offset=s.offset+this.path[i]-e.offset,s.path=[...s.path,...this.path.slice(i+1)],s}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,i="toNone"){if(e.is("model:position"))return new le(e.root,e.path,e.stickiness);{const s=e;if(t=="end")t=s.maxOffset;else{if(t=="before")return this._createBefore(s,i);if(t=="after")return this._createAfter(s,i);if(t!==0&&!t)throw new D("model-createpositionat-offset-required",[this,e])}if(!s.is("element")&&!s.is("documentFragment"))throw new D("model-position-parent-incorrect",[this,e]);const r=s.getPath();return r.push(t),new this(s.root,r,i)}}static _createAfter(e,t){if(!e.parent)throw new D("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new D("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){const i=new le(t.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!t.getRoot(e.root))throw new D("model-position-fromjson-no-root",t,{rootName:e.root});return new le(t.getRoot(e.root),e.path,e.stickiness)}}le.prototype.is=function(n){return n==="position"||n==="model:position"};function Ah(n,e){const t=e.getChildAtOffset(n.offset);return t&&t.is("$text")&&t.startOffset<n.offset?t:null}function N6(n,e,t){return t!==null?null:e.getChildAtOffset(n.offset)}function V6(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset)-1)}function PO(n,e,t){return!(t+1===n.path.length||!RC(e.path,t+1)||!Hme(n,t+1))}function RC(n,e){for(;e<n.length;){if(n[e]!==0)return!1;e++}return!0}function Hme(n,e){let t=n.parent,i=n.path.length-1,s=0;for(;i>=e;){if(n.path[i]+s!==t.maxOffset)return!1;s=1,i--,t=t.parent}return!0}class Q extends Al{start;end;constructor(e,t){super(),this.start=le._createAt(e),this.end=t?le._createAt(t):le._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new qo({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const e=this.start.getParentPath(),t=this.end.getParentPath();return ri(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);const i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),s=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&s}containsItem(e){const t=le._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){const t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Q(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Q(e.end,this.end))):t.push(new Q(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new Q(t,i)}return null}getJoined(e,t=!1){let i=this.isIntersecting(e);if(i||(this.start.isBefore(e.start)?i=t?this.end.isTouching(e.start):this.end.isEqual(e.start):i=t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;let s=this.start,r=this.end;return e.start.isBefore(s)&&(s=e.start),e.end.isAfter(r)&&(r=e.end),new Q(s,r)}getMinimalFlatRanges(){const e=[],t=this.start.getCommonPath(this.end).length,i=le._createAt(this.start);let s=i.parent;for(;i.path.length>t+1;){const r=s.maxOffset-i.offset;r!==0&&e.push(new Q(i,i.getShiftedBy(r))),i.path=i.path.slice(0,-1),i.offset++,s=s.parent}for(;i.path.length<=this.end.path.length;){const r=this.end.path[i.path.length-1],o=r-i.offset;o!==0&&e.push(new Q(i,i.getShiftedBy(o))),i.offset=r,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new qo(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;const t=new qo(e);for(const i of t)yield i.item}*getPositions(e={}){e.boundaries=this;const t=new qo(e);yield t.position;for(const i of t)yield i.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new Q(this.start,this.end)]}getTransformedByOperations(e){const t=[new Q(this.start,this.end)];for(const i of e)for(let s=0;s<t.length;s++){const r=t[s].getTransformedByOperation(i);t.splice(s,1,...r),s+=r.length-1}for(let i=0;i<t.length;i++){const s=t[i];for(let r=i+1;r<t.length;r++){const o=t[r];(s.containsRange(o)||o.containsRange(s)||s.isEqual(o))&&t.splice(r,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){const i=e.sourcePosition,s=e.howMany,r=e.targetPosition;return this._getTransformedByMove(i,r,s,t)}_getTransformedBySplitOperation(e){const t=this.start._getTransformedBySplitOperation(e);let i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new Q(t,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new Q(this.start);let t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(t=le._createAt(i),t.offset=0):(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition),new Q(t,i)):new Q(t,i)}_getTransformedByInsertion(e,t,i=!1){if(i&&this.containsPosition(e))return[new Q(this.start,e),new Q(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{const s=new Q(this.start,this.end);return s.start=s.start._getTransformedByInsertion(e,t),s.end=s.end._getTransformedByInsertion(e,t),[s]}}_getTransformedByMove(e,t,i,s=!1){if(this.isCollapsed){const m=this.start._getTransformedByMove(e,t,i);return[new Q(m)]}const r=Q._createFromPositionAndShift(e,i),o=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!s&&(r.containsPosition(this.start)||r.containsPosition(this.end))){const m=this.start._getTransformedByMove(e,t,i),p=this.end._getTransformedByMove(e,t,i);return[new Q(m,p)]}let a;const c=this.getDifference(r);let d=null;const h=this.getIntersection(r);if(c.length==1?d=new Q(c[0].start._getTransformedByDeletion(e,i),c[0].end._getTransformedByDeletion(e,i)):c.length==2&&(d=new Q(this.start,this.end._getTransformedByDeletion(e,i))),d?a=d._getTransformedByInsertion(o,i,h!==null||s):a=[],h){const m=new Q(h.start._getCombined(r.start,o),h.end._getCombined(r.start,o));a.length==2?a.splice(1,0,m):a.push(m)}return a}_getTransformedByDeletion(e,t){let i=this.start._getTransformedByDeletion(e,t),s=this.end._getTransformedByDeletion(e,t);return i==null&&s==null?null:(i==null&&(i=e),s==null&&(s=e),new Q(i,s))}static _createFromPositionAndShift(e,t){const i=e,s=e.getShiftedBy(t);return t>0?new this(i,s):new this(s,i)}static _createIn(e){return new this(le._createAt(e,0),le._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(le._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new D("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();const t=e[0];e.sort((r,o)=>r.start.isAfter(o.start)?1:-1);const i=e.indexOf(t),s=new this(t.start,t.end);for(let r=i-1;r>=0&&e[r].end.isEqual(s.start);r--)s.start=le._createAt(e[r].start);for(let r=i+1;r<e.length&&e[r].start.isEqual(s.end);r++)s.end=le._createAt(e[r].end);return s}static fromJSON(e,t){return new this(le.fromJSON(e.start,t),le.fromJSON(e.end,t))}}Q.prototype.is=function(n){return n==="range"||n==="model:range"};class L6 extends Ot(){_modelToViewMapping=new WeakMap;_viewToModelMapping=new WeakMap;_viewToModelLengthCallbacks=new Map;_markerNameToElements=new Map;_elementToMarkerNames=new Map;_deferredBindingRemovals=new Map;_unboundMarkerNames=new Set;_cache=new Wme;constructor(){super(),this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;const i=this._modelToViewMapping.get(t.modelPosition.parent);if(!i)throw new D("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(i,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;const i=this.findMappedViewAncestor(t.viewPosition),s=this._viewToModelMapping.get(i),r=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,i);t.modelPosition=le._createAt(s,r)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){const i=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(const s of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(s);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e)&&this._cache.stopTracking(e),this._modelToViewMapping.get(i)==e&&this._modelToViewMapping.delete(i))}unbindModelElement(e){const t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)&&this._cache.stopTracking(t)}bindElementToMarker(e,t){const i=this._markerNameToElements.get(t)||new Set;i.add(e);const s=this._elementToMarkerNames.get(e)||new Set;s.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,s)}unbindElementFromMarkerName(e,t){const i=this._markerNameToElements.get(t);i&&(i.delete(e),i.size==0&&this._markerNameToElements.delete(t));const s=this._elementToMarkerNames.get(e);s&&(s.delete(t),s.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){const e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(const[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new Q(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new We(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){const t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){const i={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition}markerNameToElements(e){const t=this._markerNameToElements.get(e);if(!t)return null;const i=new Set;for(const s of t)if(s.is("attributeElement"))for(const r of s.getElementsWithSameId())i.add(r);else i.add(s);return i}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,i){if(i!=e){const r=this._toModelOffset(e.parent,e.index,i),o=this._toModelOffset(e,t,e);return r+o}if(e.is("$text"))return t;let s=0;for(let r=0;r<t;r++)s+=this.getModelLength(e.getChild(r));return s}getModelLength(e){const t=[e];let i=0;for(;t.length>0;){const s=t.pop(),r=s.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(s.name);if(r)i+=r(s);else if(this._viewToModelMapping.has(s))i+=1;else if(s.is("$text"))i+=s.data.length;else{if(s.is("uiElement"))continue;for(const o of s.getChildren())t.push(o)}}return i}findPositionIn(e,t){if(t===0)return this._moveViewPositionToTextNode(new ge(e,0));if(this._viewToModelLengthCallbacks.size==0&&this._viewToModelMapping.has(e)){const s=this._cache.getClosest(e,t);return this._findPositionStartingFrom(s.viewPosition,s.modelOffset,t,e,!0)}else return this._findPositionStartingFrom(new ge(e,0),0,t,e,!1)}_findPositionStartingFrom(e,t,i,s,r){let o=e.parent,a=e.offset;if(o.is("$text"))return new ge(o,i-t);let c,d=t,h=0;for(;d<i;){if(c=o.getChild(a),!c){if(o==s)throw new D("mapping-model-offset-not-found",this,{modelOffset:i,viewContainer:s});a=o.parent.getChildIndex(o)+1,o=o.parent,r&&this._cache.save(o,a,s,d);continue}r?h=this._getModelLengthAndCache(c,s,d):h=this.getModelLength(c),d+=h,a++}let m=new ge(o,a);if(r)for(;m.isAtEnd&&m.parent!==s&&m.parent.parent;){const p=m.parent.parent,w=p.getChildIndex(m.parent)+1;this._cache.save(p,w,s,d),m=new ge(p,w)}return d==i?this._moveViewPositionToTextNode(m):this._findPositionStartingFrom(new ge(c,0),d-h,i,s,r)}_getModelLengthAndCache(e,t,i){let s=0;if(this._viewToModelMapping.has(e))s=1;else if(e.is("$text"))s=e.data.length;else if(!e.is("uiElement"))for(const r of e.getChildren())s+=this._getModelLengthAndCache(r,t,i+s);return this._cache.save(e.parent,e.index+1,t,i+s),s}_moveViewPositionToTextNode(e){const t=e.nodeBefore,i=e.nodeAfter;return t&&t.is("view:$text")?new ge(t,t.data.length):i&&i.is("view:$text")?new ge(i,0):e}}class Wme extends Ot(){_cachedMapping=new WeakMap;_nodeToCacheListIndex=new WeakMap;_invalidateOnChildrenChangeCallback=(e,t,i)=>{this._clearCacheInsideParent(t,i.index)};_invalidateOnTextChangeCallback=(e,t)=>{this._clearCacheAfter(t)};save(e,t,i,s){const r=this._cachedMapping.get(i),o=r.cacheMap.get(s);if(o){const h=e.getChild(t-1),m=o.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(o.viewPosition.nodeBefore):0;this._nodeToCacheListIndex.set(h,m);return}const c={viewPosition:new ge(e,t),modelOffset:s};r.maxModelOffset=s>r.maxModelOffset?s:r.maxModelOffset,r.cacheMap.set(s,c);let d=r.cacheList.length-1;for(;d>=0&&r.cacheList[d].modelOffset>s;)d--;if(r.cacheList.splice(d+1,0,c),t>0){const h=e.getChild(t-1);this._nodeToCacheListIndex.set(h,d+1)}}getClosest(e,t){const i=this._cachedMapping.get(e);let s;if(i)if(t>i.maxModelOffset)s=i.cacheList[i.cacheList.length-1];else{const r=i.cacheMap.get(t);r?s=r:s=this._findInCacheList(i.cacheList,t)}else s=this.startTracking(e);return{modelOffset:s.modelOffset,viewPosition:s.viewPosition.clone()}}startTracking(e){const i={viewPosition:new ge(e,0),modelOffset:0},s={maxModelOffset:0,cacheList:[i],cacheMap:new Map([[0,i]])};return this._cachedMapping.set(e,s),e.on("change:children",this._invalidateOnChildrenChangeCallback),e.on("change:text",this._invalidateOnTextChangeCallback),i}stopTracking(e){e.off("change:children",this._invalidateOnChildrenChangeCallback),e.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(e)}_clearCacheInsideParent(e,t){if(t==0)this._cachedMapping.has(e)?this._clearCacheAll(e):this._clearCacheInsideParent(e.parent,e.index);else{const i=e.getChild(t-1);this._clearCacheAfter(i)}}_clearCacheAll(e){const t=this._cachedMapping.get(e);t.maxModelOffset>0&&(t.maxModelOffset=0,t.cacheList.length=1,t.cacheMap.clear(),t.cacheMap.set(0,t.cacheList[0]))}_clearCacheAfter(e){const t=this._nodeToCacheListIndex.get(e);if(t===void 0){const s=e.parent;this._cachedMapping.has(s)||this._clearCacheInsideParent(s.parent,s.index);return}let i=e.parent;for(;!this._cachedMapping.has(i);)i=i.parent;this._clearCacheFromCacheIndex(i,t)}_clearCacheFromCacheIndex(e,t){t===0&&(t=1);const i=this._cachedMapping.get(e),s=i.cacheList[t-1];if(!s)return;i.maxModelOffset=s.modelOffset;const r=i.cacheList.splice(t);for(const o of r){i.cacheMap.delete(o.modelOffset);const a=o.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(a)}}_findInCacheList(e,t){let i=0,s=e.length-1,r=s-i>>1,o=e[r];for(;i<s;)o.modelOffset<t?i=r+1:s=r-1,r=i+(s-i>>1),o=e[r];return o.modelOffset<=t?o:e[r-1]}}class $me{_consumable=new Map;_textProxyRegistry=new Map;add(e,t){t=Np(t),e instanceof wr&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=Np(t),e instanceof wr&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=Np(t),e instanceof wr&&(e=this._getSymbolForTextProxy(e));const i=this._consumable.get(e);if(i===void 0)return null;const s=i.get(t);return s===void 0?null:s}revert(e,t){t=Np(t),e instanceof wr&&(e=this._getSymbolForTextProxy(e));const i=this.test(e,t);return i===!1?(this._consumable.get(e).set(t,!0),!0):i===!0?!1:null}verifyAllConsumed(e){const t=[];for(const[i,s]of this._consumable)for(const[r,o]of s){const a=r.split(":")[0];o&&e==a&&t.push({event:r,item:i.name||i.description})}if(t.length)throw new D("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null;const i=this._textProxyRegistry.get(e.startOffset);if(i){const s=i.get(e.endOffset);s&&(t=s.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){const t=e.startOffset,i=e.endOffset,s=e.parent,r=Symbol("$textProxy:"+e.data);let o,a;return o=this._textProxyRegistry.get(t),o||(o=new Map,this._textProxyRegistry.set(t,o)),a=o.get(i),a||(a=new Map,o.set(i,a)),a.set(s,r),r}}function Np(n){const e=n.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?n:e.length>1?e[0]+":"+e[1]:e[0]}class F6 extends Ot(){_conversionApi;_firedEventsMap;constructor(e){super(),this._conversionApi={dispatcher:this,...e},this._firedEventsMap=new WeakMap}convertChanges(e,t,i){const s=e.getRefreshedItems(),r=this._createConversionApi(i,s);for(const a of e.getMarkersToRemove())this._convertMarkerRemove(a.name,a.range,r);const o=this._reduceChanges(e.getChanges(),s);for(const a of o)a.type==="insert"?this._convertInsert(Q._createFromPositionAndShift(a.position,a.length),r):a.type==="reinsert"?this._convertReinsert(Q._createFromPositionAndShift(a.position,a.length),r):a.type==="remove"?this._convertRemove(a.position,a.length,a.name,r):this._convertAttribute(a.range,a.attributeKey,a.attributeOldValue,a.attributeNewValue,r);r.mapper.flushDeferredBindings();for(const a of r.mapper.flushUnboundMarkerNames()){const c=t.get(a).getRange();this._convertMarkerRemove(a,c,r),this._convertMarkerAdd(a,c,r)}for(const a of e.getMarkersToAdd())this._convertMarkerAdd(a.name,a.range,r);r.consumable.verifyAllConsumed("insert")}convert(e,t,i,s={}){const r=this._createConversionApi(i,void 0,s);this._convertInsert(e,r);for(const[o,a]of t)this._convertMarkerAdd(o,a,r);r.consumable.verifyAllConsumed("insert")}convertSelection(e,t,i){const s=this._createConversionApi(i);this.fire("cleanSelection",{selection:e},s);const r=e.getFirstPosition().root;if(!s.mapper.toViewElement(r))return;const o=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(s.consumable,e,o),this.fire("selection",{selection:e},s),!!e.isCollapsed){for(const a of o)if(s.consumable.test(e,"addMarker:"+a.name)){const c=a.getRange();if(!Gme(e.getFirstPosition(),a,s.mapper))continue;const d={item:e,markerName:a.name,markerRange:c};this.fire(`addMarker:${a.name}`,d,s)}for(const a of e.getAttributeKeys())if(s.consumable.test(e,"attribute:"+a)){const c={item:e,range:e.getFirstRange(),attributeKey:a,attributeOldValue:null,attributeNewValue:e.getAttribute(a)};this.fire(`attribute:${a}:$text`,c,s)}}}_convertInsert(e,t,i={}){i.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,e);for(const s of e.getWalker({shallow:!0}))this._testAndFire("insert",OO(s),t)}_convertRemove(e,t,i,s){this.fire(`remove:${i}`,{position:e,length:t},s)}_convertAttribute(e,t,i,s,r){this._addConsumablesForRange(r.consumable,e,`attribute:${t}`);for(const o of e){const a={item:o.item,range:Q._createFromPositionAndShift(o.previousPosition,o.length),attributeKey:t,attributeOldValue:i,attributeNewValue:s};this._testAndFire(`attribute:${t}`,a,r)}}_convertReinsert(e,t){const i=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,i);for(const s of i.map(OO))this.fire(`remove:${s.item.is("element")?s.item.name:"$text"}`,{position:s.range.start,length:s.item.offsetSize,reconversion:!0},t),this._testAndFire("insert",{...s,reconversion:!0},t)}_convertMarkerAdd(e,t,i){if(t.root.rootName=="$graveyard")return;const s=`addMarker:${e}`;if(i.consumable.add(t,s),this.fire(s,{markerName:e,markerRange:t},i),!!i.consumable.consume(t,s)){this._addConsumablesForRange(i.consumable,t,s);for(const r of t.getItems()){if(!i.consumable.test(r,s))continue;const o={item:r,range:Q._createOn(r),markerName:e,markerRange:t};this.fire(s,o,i)}}}_convertMarkerRemove(e,t,i){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},i)}_reduceChanges(e,t){const i={changes:e,refreshedItems:t};return this.fire("reduceChanges",i),i.changes}_addConsumablesForInsert(e,t){for(const i of t){const s=i.item;if(e.test(s,"insert")===null){e.add(s,"insert");for(const r of s.getAttributeKeys())e.add(s,"attribute:"+r)}}return e}_addConsumablesForRange(e,t,i){for(const s of t.getItems())e.add(s,i);return e}_addConsumablesForSelection(e,t,i){e.add(t,"selection");for(const s of i)e.add(t,"addMarker:"+s.name);for(const s of t.getAttributeKeys())e.add(t,"attribute:"+s);return e}_testAndFire(e,t,i){const s=Yme(e,t),r=t.item.is("$textProxy")?i.consumable._getSymbolForTextProxy(t.item):t.item,o=this._firedEventsMap.get(i),a=o.get(r);if(!a)o.set(r,new Set([s]));else if(!a.has(s))a.add(s);else return;this.fire(s,t,i)}_testAndFireAddAttributes(e,t){const i={item:e,range:Q._createOn(e)};for(const s of i.item.getAttributeKeys())i.attributeKey=s,i.attributeOldValue=null,i.attributeNewValue=i.item.getAttribute(s),this._testAndFire(`attribute:${s}`,i,t)}_createConversionApi(e,t=new Set,i={}){const s={...this._conversionApi,consumable:new $me,writer:e,options:i,convertItem:r=>this._convertInsert(Q._createOn(r),s),convertChildren:r=>this._convertInsert(Q._createIn(r),s,{doNotAddConsumables:!0}),convertAttributes:r=>this._testAndFireAddAttributes(r,s),canReuseView:r=>!t.has(s.mapper.toModelElement(r))};return this._firedEventsMap.set(s,new Map),s}}function Gme(n,e,t){const i=e.getRange(),s=Array.from(n.getAncestors());return s.shift(),s.reverse(),!s.some(o=>{if(i.containsItem(o))return!!t.toViewElement(o).getCustomProperty("addHighlight")})}function Yme(n,e){const t=e.item.is("element")?e.item.name:"$text";return`${n}:${t}`}function OO(n){return{item:n.item,range:Q._createFromPositionAndShift(n.previousPosition,n.length)}}class Ec extends Al{parent=null;_attrs;_index=null;_startOffset=null;constructor(e){super(),this._attrs=io(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){const e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const e=[];let t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){const t=[];let i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){const i=this.getAncestors(t),s=e.getAncestors(t);let r=0;for(;i[r]==s[r]&&i[r];)r++;return r===0?null:i[r-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;const t=this.getPath(),i=e.getPath(),s=ri(t,i);switch(s){case"prefix":return!0;case"extension":return!1;default:return t[s]<i[s]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,i)=>(t[i[0]]=i[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=io(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}}Ec.prototype.is=function(n){return n==="node"||n==="model:node"};class Cs extends Ot(Al){_lastRangeBackward=!1;_attrs=new Map;_ranges=[];constructor(...e){super(),e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){const e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(const t of this._ranges){let i=!1;for(const s of e._ranges)if(t.isEqual(s)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(const e of this._ranges)yield new Q(e.start,e.end)}getFirstRange(){let e=null;for(const t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?new Q(e.start,e.end):null}getLastRange(){let e=null;for(const t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?new Q(e.start,e.end):null}getFirstPosition(){const e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){const e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,i,s]=e;if(typeof i=="object"&&(s=i,i=void 0),t===null)this._setRanges([]);else if(t instanceof Cs)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof Q)this._setRanges([t],!!s&&!!s.backward);else if(t instanceof le)this._setRanges([new Q(t)]);else if(t instanceof Ec){const r=!!s&&!!s.backward;let o;if(i=="in")o=Q._createIn(t);else if(i=="on")o=Q._createOn(t);else if(i!==void 0)o=new Q(le._createAt(t,i));else throw new D("model-selection-setto-required-second-parameter",[this,t]);this._setRanges([o],r)}else if(Is(t))this._setRanges(t,s&&!!s.backward);else throw new D("model-selection-setto-not-selectable",[this,t])}_setRanges(e,t=!1){const i=Array.from(e),s=i.some(r=>{if(!(r instanceof Q))throw new D("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(o=>!o.isEqual(r))});i.length===this._ranges.length&&!s||(this._replaceAllRanges(i),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new D("model-selection-setfocus-no-ranges",[this,e]);const i=le._createAt(e,t);if(i.compareWith(this.focus)=="same")return;const s=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(s)=="before"?(this._pushRange(new Q(i,s)),this._lastRangeBackward=!0):(this._pushRange(new Q(s,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const e=new WeakSet;for(const t of this.getRanges()){const i=DO(t.start,e);qme(i,t)&&(yield i);const s=t.getWalker();for(const o of s){const a=o.item;o.type=="elementEnd"&&Kme(a,e,t)?yield a:o.type=="elementStart"&&a.is("model:element")&&a.root.document.model.schema.isBlock(a)&&s.jumpTo(le._createAt(a,"end"))}const r=DO(t.end,e);Qme(r,t)&&(yield r)}}containsEntireContent(e=this.anchor.root){const t=le._createAt(e,0),i=le._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}toJSON(){const e={ranges:Array.from(this.getRanges()).map(i=>i.toJSON())},t=Object.fromEntries(this.getAttributes());return Object.keys(t).length&&(e.attributes=t),this.isBackward&&(e.isBackward=!0),e}_pushRange(e){this._checkRange(e),this._ranges.push(new Q(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new D("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(const t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Cs.prototype.is=function(n){return n==="selection"||n==="model:selection"};function z6(n,e){return e.has(n)?!1:(e.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function Kme(n,e,t){return z6(n,e)&&ME(n,t)}function DO(n,e){const i=n.parent.root.document.model.schema,s=n.parent.getAncestors({parentFirst:!0,includeSelf:!0});let r=!1;const o=s.find(a=>r?!1:(r=i.isLimit(a),!r&&z6(a,e)));return s.forEach(a=>e.add(a)),o}function ME(n,e){const t=Zme(n);return t?!e.containsRange(Q._createOn(t),!0):!0}function qme(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.start.isTouching(le._createAt(n,n.maxOffset))?!1:ME(n,e):!1}function Qme(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.end.isTouching(le._createAt(n,0))?!1:ME(n,e):!1}function Zme(n){const e=n.root.document.model.schema;let t=n.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}class Bi extends Ot(Q){constructor(e,t){super(e,t),Jme.call(this)}detach(){this.stopListening()}toRange(){return new Q(this.start,this.end)}static fromRange(e){return new Bi(e.start,e.end)}}Bi.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};function Jme(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&Xme.call(this,t)},{priority:"low"})}function Xme(n){const e=this.getTransformedByOperation(n),t=Q._createFromRanges(e),i=!t.isEqual(this),s=ege(this,n);let r=null;if(i){t.root.rootName=="$graveyard"&&(n.type=="remove"?r=n.sourcePosition:r=n.deletionPosition);const o=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",o,{deletionPosition:r})}else s&&this.fire("change:content",this.toRange(),{deletionPosition:r})}function ege(n,e){switch(e.type){case"insert":return n.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return n.containsPosition(e.sourcePosition)||n.start.isEqual(e.sourcePosition)||n.containsPosition(e.targetPosition);case"split":return n.containsPosition(e.splitPosition)||n.containsPosition(e.insertionPosition)}return!1}class Wt extends Ec{_data;constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const e=super.toJSON();return e.data=this.data,e}_clone(){return new Wt(this.data,this.getAttributes())}static fromJSON(e){return new Wt(e.data,e.attributes)}}Wt.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};const Jh="selection:";class Tr extends Ot(Al){_selection;constructor(e){super(),this._selection=new tge(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}toJSON(){return this._selection.toJSON()}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Jh+e}static _isStoreAttributeKey(e){return e.startsWith(Jh)}}Tr.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};class tge extends Cs{markers=new Wn({idProperty:"name"});_model;_document;_attributePriority=new Map;_selectionRestorePosition=null;_hasChangedRange=!1;_overriddenGravityRegister=new Set;_observedMarkers=new Set;constructor(e){super(),this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,i)=>{const s=i[0];!s.isDocumentOperation||s.type=="marker"||s.type=="rename"||s.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,i,s,r)=>{this._updateMarker(i,r)}),this.listenTo(this._document,"change",(t,i)=>{nge(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){const i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){const t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){const e=li();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new D("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){const t=this._prepareRange(e);t&&this._ranges.push(t)}toJSON(){const e=super.toJSON();return this.markers.length&&(e.markers=this.markers.map(t=>t.toJSON())),e}_validateSelectionRanges(e){for(const t of e)if(!this._document._validateSelectionRange(t))throw new D("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;const t=Bi.fromRange(e);return t.on("change:range",(i,s,r)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=r.deletionPosition;const o=this._ranges.indexOf(t);this._ranges.splice(o,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;const e=[];let t=!1;for(const s of this._model.markers){const r=s.name.split(":",1)[0];if(!this._observedMarkers.has(r))continue;const o=s.getRange();for(const a of this.getRanges())o.containsRange(a,!a.isCollapsed)&&e.push(s)}const i=Array.from(this.markers);for(const s of e)this.markers.has(s)||(this.markers.add(s),t=!0);for(const s of Array.from(this.markers))e.includes(s)||(this.markers.remove(s),t=!0);t&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(e,t){const i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let s=!1;const r=Array.from(this.markers),o=this.markers.has(e);if(!t)o&&(this.markers.remove(e),s=!0);else{let a=!1;for(const c of this.getRanges())if(t.containsRange(c,!c.isCollapsed)){a=!0;break}a&&!o?(this.markers.add(e),s=!0):!a&&o&&(this.markers.remove(e),s=!0)}s&&this.fire("change:marker",{oldMarkers:r,directChange:!1})}_updateAttributes(e){const t=io(this._getSurroundingAttributes()),i=io(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(const[r,o]of this._attributePriority)o=="low"&&(this._attrs.delete(r),this._attributePriority.delete(r));this._setAttributesTo(t);const s=[];for(const[r,o]of this.getAttributes())(!i.has(r)||i.get(r)!==o)&&s.push(r);for(const[r]of i)this.hasAttribute(r)||s.push(r);s.length>0&&this.fire("change:attribute",{attributeKeys:s,directChange:!1})}_setAttribute(e,t,i=!0){const s=i?"normal":"low";return s=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===t?!1:(this._attrs.set(e,t),this._attributePriority.set(e,s),!0)}_removeAttribute(e,t=!0){const i=t?"normal":"low";return i=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,i),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){const t=new Set;for(const[i,s]of this.getAttributes())e.get(i)!==s&&this._removeAttribute(i,!1);for(const[i,s]of e)this._setAttribute(i,s,!1)&&t.add(i);return t}*getStoredAttributes(){const e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(const t of e.getAttributeKeys())t.startsWith(Jh)&&(yield[t.substr(Jh.length),e.getAttribute(t)])}_getSurroundingAttributes(){const e=this.getFirstPosition(),t=this._model.schema;if(e.root.rootName=="$graveyard")return null;let i=null;if(this.isCollapsed){const s=e.textNode?e.textNode:e.nodeBefore,r=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=qf(s,t)),i||(i=qf(r,t)),!this.isGravityOverridden&&!i){let o=s;for(;o&&!i;)o=o.previousSibling,i=qf(o,t)}if(!i){let o=r;for(;o&&!i;)o=o.nextSibling,i=qf(o,t)}i||(i=this.getStoredAttributes())}else{const s=this.getFirstRange();for(const r of s){if(r.item.is("element")&&t.isObject(r.item)){i=qf(r.item,t);break}if(r.type=="text"){i=r.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){const t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}}function qf(n,e){if(!n)return null;if(n instanceof wr||n instanceof Wt)return n.getAttributes();if(!e.isInline(n))return null;if(!e.isObject(n))return[];const t=[];for(const[i,s]of n.getAttributes())e.checkAttribute("$text",i)&&e.getAttributeProperties(i).copyFromObject!==!1&&t.push([i,s]);return t}function nge(n,e){const t=n.document.differ;for(const i of t.getChanges()){if(i.type!="insert")continue;const s=i.position.parent;i.length===s.maxOffset&&n.enqueueChange(e,o=>{const a=Array.from(s.getAttributeKeys()).filter(c=>c.startsWith(Jh));for(const c of a)o.removeAttribute(c,s)})}}class _h{_nodes=[];_offsetToNode=[];constructor(e){e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(e){return this._nodes[e]||null}getNodeAtOffset(e){return this._offsetToNode[e]||null}getNodeIndex(e){return e.index}getNodeStartOffset(e){return e.startOffset}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;const t=this._nodes[e];if(!t)throw new D("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){if(e==this._offsetToNode.length)return this._nodes.length;const t=this._offsetToNode[e];if(!t)throw new D("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.getNodeIndex(t)}_insertNodes(e,t){const i=[];for(const r of t){if(!(r instanceof Ec))throw new D("model-nodelist-insertnodes-not-node",this);i.push(r)}let s=this.indexToOffset(e);hO(this._nodes,i,e),hO(this._offsetToNode,ige(i),s);for(let r=e;r<this._nodes.length;r++)this._nodes[r]._index=r,this._nodes[r]._startOffset=s,s+=this._nodes[r].offsetSize}_removeNodes(e,t=1){if(t==0)return[];let i=this.indexToOffset(e);const s=this._nodes.splice(e,t),r=s[s.length-1],o=r.startOffset+r.offsetSize-i;this._offsetToNode.splice(i,o);for(const a of s)a._index=null,a._startOffset=null;for(let a=e;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=i,i+=this._nodes[a].offsetSize;return s}_removeNodesArray(e){if(e.length==0)return;for(const i of e)i._index=null,i._startOffset=null;this._nodes=this._nodes.filter(i=>i.index!==null),this._offsetToNode=this._offsetToNode.filter(i=>i.index!==null);let t=0;for(let i=0;i<this._nodes.length;i++)this._nodes[i]._index=i,this._nodes[i]._startOffset=t,t+=this._nodes[i].offsetSize}toJSON(){return this._nodes.map(e=>e.toJSON())}}function ige(n){const e=[];let t=0;for(const i of n)for(let s=0;s<i.offsetSize;s++)e[t++]=i;return e}class Vt extends Ec{name;_children=new _h;constructor(e,t,i){super(t),this.name=e,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(const i of e)t=t.getChildAtOffset(i);return t}findAncestor(e,t={}){let i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){const e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(const t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){const t=e?rge(this._children):void 0;return new Vt(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=sge(t);for(const s of i)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const s of i)s.parent=null;return i}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const t of e)t.parent=null}static fromJSON(e){let t;if(e.children){t=[];for(const i of e.children)i.name?t.push(Vt.fromJSON(i)):t.push(Wt.fromJSON(i))}return new Vt(e.name,e.attributes,t)}}Vt.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};function sge(n){if(typeof n=="string")return[new Wt(n)];Is(n)||(n=[n]);const e=[];for(const t of n)typeof t=="string"?e.push(new Wt(t)):t instanceof wr?e.push(new Wt(t.data,t.getAttributes())):e.push(t);return e}function rge(n){const e=[];for(const t of n)e.push(t._clone(!0));return e}class j6{_dispatchers;constructor(e){this._dispatchers=e}add(e){for(const t of this._dispatchers)e(t);return this}}class oge extends j6{elementToElement(e){return this.add(xge(e))}elementToStructure(e){return this.add(kge(e))}attributeToElement(e){return this.add(Ege(e))}attributeToAttribute(e){return this.add(Sge(e))}markerToElement(e){return this.add(Tge(e))}markerToHighlight(e){return this.add(Rge(e))}markerToData(e){return this.add(Ige(e))}}function U6(){return(n,e,t)=>{if(!t.consumable.consume(e.item,n.name))return;const i=t.writer,s=t.mapper.toViewPosition(e.range.start),r=i.createText(e.item.data);i.insert(s,r)}}function H6(){return(n,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function age(){return(n,e,t)=>{if(e.reconversion)return;const i=t.mapper.toViewPosition(e.position),s=e.position.getShiftedBy(e.length),r=t.mapper.toViewPosition(s,{isPhantom:!0}),o=t.writer.createRange(i,r);$6(o.getTrimmed(),t)}}function W6(n,e){const t=n.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function lge(){return(n,e,t)=>{const i=e.selection;if(i.isCollapsed||!t.consumable.consume(i,"selection"))return;const s=[];for(const r of i.getRanges())s.push(t.mapper.toViewRange(r));t.writer.setSelection(s,{backward:i.isBackward})}}function cge(){return(n,e,t)=>{const i=e.selection;if(!i.isCollapsed||!t.consumable.consume(i,"selection"))return;const s=t.writer,r=i.getFirstPosition(),o=t.mapper.toViewPosition(r),a=s.breakAttributes(o);s.setSelection(a)}}function uge(){return(n,e,t)=>{const i=t.writer,s=i.document.selection;for(const r of s.getRanges())r.isCollapsed&&r.end.parent.isAttached()&&t.writer.mergeAttributes(r.start);i.setSelection(null)}}function dge(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;const s=n(t.attributeOldValue,i,t),r=n(t.attributeNewValue,i,t);if(!s&&!r)return;i.consumable.consume(t.item,e.name);const o=i.writer,a=o.document.selection;if(t.item instanceof Cs||t.item instanceof Tr)o.wrap(a.getFirstRange(),r);else{let c=i.mapper.toViewRange(t.range);t.attributeOldValue!==null&&s&&(c=o.unwrap(c,s)),t.attributeNewValue!==null&&r&&o.wrap(c,r)}}}function fge(n,e=Vge){return(t,i,s)=>{if(!e(i.item,s.consumable,{preflight:!0}))return;const r=n(i.item,s,i);if(!r)return;e(i.item,s.consumable);const o=i.reconversion&&G6(i.item,s)||s.mapper.toViewPosition(i.range.start);s.mapper.bindElements(i.item,r),s.writer.insert(o,r),s.convertAttributes(i.item),Z6(r,i.item.getChildren(),s,{reconversion:i.reconversion})}}function hge(n,e){return(t,i,s)=>{if(!e(i.item,s.consumable,{preflight:!0}))return;const r=new Map;s.writer._registerSlotFactory(Dge(i.item,r,s));const o=n(i.item,s,i);if(s.writer._clearSlotFactory(),!o)return;Mge(i.item,r,s),e(i.item,s.consumable);const a=i.reconversion&&G6(i.item,s)||s.mapper.toViewPosition(i.range.start);s.mapper.bindElements(i.item,o),s.writer.insert(a,o),s.convertAttributes(i.item),Bge(o,r,s,{reconversion:i.reconversion})}}function mge(n){return(e,t,i)=>{t.isOpening=!0;const s=n(t,i);t.isOpening=!1;const r=n(t,i);if(!s||!r)return;const o=t.markerRange;if(o.isCollapsed&&!i.consumable.consume(o,e.name))return;for(const d of o)if(!i.consumable.consume(d.item,e.name))return;const a=i.mapper,c=i.writer;c.insert(a.toViewPosition(o.start),s),i.mapper.bindElementToMarker(s,t.markerName),o.isCollapsed||(c.insert(a.toViewPosition(o.end),r),i.mapper.bindElementToMarker(r,t.markerName)),e.stop()}}function $6(n,e){const t=e.writer.remove(n);for(const i of e.writer.createRangeIn(t).getItems())e.mapper.unbindViewElement(i,{defer:!0});return n.start}function G6(n,e){const t=e.mapper.toViewElement(n);return t&&$6(e.writer.createRangeOn(t),e)}function gge(){return(n,e,t)=>{const i=t.mapper.markerNameToElements(e.markerName);if(i){for(const s of i)t.mapper.unbindElementFromMarkerName(s,e.markerName),t.writer.clear(t.writer.createRangeOn(s),s);t.writer.clearClonedElementsGroup(e.markerName),n.stop()}}}function pge(n){return(e,t,i)=>{const s=n(t.markerName,i);if(!s)return;const r=t.markerRange;i.consumable.consume(r,e.name)&&(MO(r,!1,i,t,s),MO(r,!0,i,t,s),e.stop())}}function MO(n,e,t,i,s){const r=e?n.start:n.end,o=r.nodeAfter&&r.nodeAfter.is("element")?r.nodeAfter:null,a=r.nodeBefore&&r.nodeBefore.is("element")?r.nodeBefore:null;if(o||a){let d,h;e&&o||!e&&!a?(d=o,h=!0):(d=a,h=!1);const m=t.mapper.toViewElement(d);if(m){bge(m,e,h,t,i,s);return}}const c=t.mapper.toViewPosition(r);wge(c,e,t,i,s)}function bge(n,e,t,i,s,r){const o=`data-${r.group}-${e?"start":"end"}-${t?"before":"after"}`,a=n.hasAttribute(o)?n.getAttribute(o).split(","):[];a.unshift(r.name),i.writer.setAttribute(o,a.join(","),n),i.mapper.bindElementToMarker(n,s.markerName)}function wge(n,e,t,i,s){const r=`${s.group}-${e?"start":"end"}`,o=s.name?{name:s.name}:null,a=t.writer.createUIElement(r,o);t.writer.insert(n,a),t.mapper.bindElementToMarker(a,i.markerName)}function vge(n){return(e,t,i)=>{const s=n(t.markerName,i);if(!s)return;const r=i.mapper.markerNameToElements(t.markerName);if(!r)return;for(const a of r)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("containerElement")?(o(`data-${s.group}-start-before`,a),o(`data-${s.group}-start-after`,a),o(`data-${s.group}-end-before`,a),o(`data-${s.group}-end-after`,a)):i.writer.clear(i.writer.createRangeOn(a),a);i.writer.clearClonedElementsGroup(t.markerName),e.stop();function o(a,c){if(c.hasAttribute(a)){const d=new Set(c.getAttribute(a).split(","));d.delete(s.name),d.size==0?i.writer.removeAttribute(a,c):i.writer.setAttribute(a,Array.from(d).join(","),c)}}}}function yge(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;const s=n(t.attributeOldValue,i,t),r=n(t.attributeNewValue,i,t);if(!s&&!r)return;i.consumable.consume(t.item,e.name);const o=i.mapper.toViewElement(t.item),a=i.writer;if(!o)throw new D("conversion-attribute-to-attribute-on-text",i.dispatcher,t);if(t.attributeOldValue!==null&&s){let c=s.value;s.key=="style"&&(typeof s.value=="string"?c=new rd(a.document.stylesProcessor).setTo(s.value).getStylesEntries().map(([d])=>d):c=Object.keys(s.value)),a.removeAttribute(s.key,c,o)}if(t.attributeNewValue!==null&&r){let c=r.value;r.key=="style"&&typeof r.value=="string"&&(c=Object.fromEntries(new rd(a.document.stylesProcessor).setTo(r.value).getStylesEntries())),a.setAttribute(r.key,c,!1,o)}}}function Age(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof Cs||t.item instanceof Tr)&&!t.item.is("$textProxy"))return;const s=BE(n,t,i);if(!s||!i.consumable.consume(t.item,e.name))return;const r=i.writer,o=W6(r,s),a=r.document.selection;if(t.item instanceof Cs||t.item instanceof Tr)r.wrap(a.getFirstRange(),o);else{const c=i.mapper.toViewRange(t.range),d=r.wrap(c,o);for(const h of d.getItems())if(h.is("attributeElement")&&h.isSimilar(o)){i.mapper.bindElementToMarker(h,t.markerName);break}}}}function _ge(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof Vt))return;const s=BE(n,t,i);if(!s||!i.consumable.test(t.item,e.name))return;const r=i.mapper.toViewElement(t.item);if(r&&r.getCustomProperty("addHighlight")){i.consumable.consume(t.item,e.name);for(const a of Q._createIn(t.item))i.consumable.consume(a.item,e.name);r.getCustomProperty("addHighlight")(r,s,i.writer),i.mapper.bindElementToMarker(r,t.markerName)}}}function Cge(n){return(e,t,i)=>{if(t.markerRange.isCollapsed)return;const s=BE(n,t,i);if(!s)return;const r=W6(i.writer,s),o=i.mapper.markerNameToElements(t.markerName);if(o){for(const a of o)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(a),r):a.getCustomProperty("removeHighlight")(a,s.id,i.writer);i.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function xge(n){const e=Y6(n.model),t=Xh(n.view,"container");return e.attributes.length&&(e.children=!0),i=>{i.on(`insert:${e.name}`,fge(t,Q6(e)),{priority:n.converterPriority||"normal"}),(e.children||e.attributes.length)&&i.on("reduceChanges",q6(e),{priority:"low"})}}function kge(n){const e=Y6(n.model),t=Xh(n.view,"container");return e.children=!0,i=>{if(i._conversionApi.schema.checkChild(e.name,"$text"))throw new D("conversion-element-to-structure-disallowed-text",i,{elementName:e.name});i.on(`insert:${e.name}`,hge(t,Q6(e)),{priority:n.converterPriority||"normal"}),i.on("reduceChanges",q6(e),{priority:"low"})}}function Ege(n){n=zi(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const s of e.values)n.view[s]=Xh(n.view[s],"attribute");else n.view=Xh(n.view,"attribute");const i=K6(n);return s=>{s.on(t,dge(i),{priority:n.converterPriority||"normal"})}}function Sge(n){n=zi(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(const s of e.values)n.view[s]=BO(n.view[s]);else n.view=BO(n.view);const i=K6(n);return s=>{s.on(t,yge(i),{priority:n.converterPriority||"normal"})}}function Tge(n){const e=Xh(n.view,"ui");return t=>{t.on(`addMarker:${n.model}`,mge(e),{priority:n.converterPriority||"normal"}),t.on(`removeMarker:${n.model}`,gge(),{priority:n.converterPriority||"normal"})}}function Ige(n){n=zi(n);const e=n.model;let t=n.view;return t||(t=i=>({group:e,name:i.substr(n.model.length+1)})),i=>{i.on(`addMarker:${e}`,pge(t),{priority:n.converterPriority||"normal"}),i.on(`removeMarker:${e}`,vge(t),{priority:n.converterPriority||"normal"})}}function Rge(n){return e=>{e.on(`addMarker:${n.model}`,Age(n.view),{priority:n.converterPriority||"normal"}),e.on(`addMarker:${n.model}`,_ge(n.view),{priority:n.converterPriority||"normal"}),e.on(`removeMarker:${n.model}`,Cge(n.view),{priority:n.converterPriority||"normal"})}}function Y6(n){return typeof n=="string"&&(n={name:n}),{name:n.name,attributes:n.attributes?yt(n.attributes):[],children:!!n.children}}function Xh(n,e){return typeof n=="function"?n:(t,i)=>Pge(n,i,e)}function Pge(n,e,t){typeof n=="string"&&(n={name:n});let i;const s=e.writer,r=Object.assign({},n.attributes);if(t=="container")i=s.createContainerElement(n.name,r);else if(t=="attribute"){const o={priority:n.priority||od.DEFAULT_PRIORITY};i=s.createAttributeElement(n.name,r,o)}else i=s.createUIElement(n.name,r);if(n.styles){const o=Object.keys(n.styles);for(const a of o)s.setStyle(a,n.styles[a],i)}if(n.classes){const o=n.classes;if(typeof o=="string")s.addClass(o,i);else for(const a of o)s.addClass(a,i)}return i}function K6(n){return n.model.values?(e,t,i)=>{const s=n.view[e];return s?s(e,t,i):null}:n.view}function BO(n){return typeof n=="string"?e=>({key:n,value:e}):typeof n=="object"?n.value?()=>n:e=>({key:n.key,value:e}):n}function BE(n,e,t){const i=typeof n=="function"?n(e,t):{...n};return i?(i.priority||(i.priority=10),i.id||(i.id=e.markerName),i):null}function Oge(n){return(e,t)=>{if(!e.is("element",n.name))return!1;if(t.type=="attribute"){if(n.attributes.includes(t.attributeKey))return!0}else{if(n.children)return!0}return!1}}function q6(n){const e=Oge(n);return(t,i)=>{const s=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(const r of i.changes){const o=r.type=="attribute"?r.range.start.nodeAfter:r.position.parent;if(!o||!e(o,r)||r.type=="reinsert"){s.push(r);continue}if(r.type=="insert"&&r.action=="rename"&&i.refreshedItems.add(r.position.nodeAfter),!i.reconvertedElements.has(o)){i.reconvertedElements.add(o);const a=le._createBefore(o);let c=s.length;for(let d=s.length-1;d>=0;d--){const h=s[d],p=(h.type=="attribute"?h.range.start:h.position).compareWith(a);if(p=="before"||h.type=="remove"&&p=="same")break;c=d}s.splice(c,0,{type:"reinsert",name:o.name,position:a,length:1})}}i.changes=s}}function Q6(n){return(e,t,i={})=>{const s=["insert"];for(const r of n.attributes)e.hasAttribute(r)&&s.push(`attribute:${r}`);return s.every(r=>t.test(e,r))?(i.preflight||s.forEach(r=>t.consume(e,r)),!0):!1}}function Dge(n,e,t){return(i,s)=>{const r=i.createContainerElement("$slot");let o=null;if(s==="children")o=Array.from(n.getChildren());else if(typeof s=="function")o=Array.from(n.getChildren()).filter(a=>s(a));else throw new D("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:s});return e.set(r,o),r}}function Mge(n,e,t){const i=Array.from(e.values()).flat(),s=new Set(i);if(s.size!=i.length)throw new D("conversion-slot-filter-overlap",t.dispatcher,{element:n});if(s.size!=n.childCount)throw new D("conversion-slot-filter-incomplete",t.dispatcher,{element:n})}function Bge(n,e,t,i){t.mapper.on("modelToViewPosition",o,{priority:"highest"});let s=null,r=null;for([s,r]of e)Z6(n,r,t,i),t.writer.setCustomProperty("$structureSlotParent",!0,s.parent),t.writer.move(t.writer.createRangeIn(s),t.writer.createPositionBefore(s)),t.writer.remove(s);t.mapper.off("modelToViewPosition",o);function o(a,c){const d=c.modelPosition.nodeAfter,h=r.indexOf(d);h<0||(c.viewPosition=c.mapper.findPositionIn(s,h))}}function Z6(n,e,t,i){for(const s of e)Nge(n.root,s,t,i)||t.convertItem(s)}function Nge(n,e,t,i){const{writer:s,mapper:r}=t;if(!i.reconversion)return!1;const o=r.toViewElement(e);return!o||o.root==n||!t.canReuseView(o)?!1:(s.move(s.createRangeOn(o),r.toViewPosition(le._createBefore(e))),!0)}function Vge(n,e,{preflight:t}={}){return t?e.test(n,"insert"):e.consume(n,"insert")}function J6(n){const{schema:e,document:t}=n.model;for(const i of t.getRoots())if(i.isEmpty&&!e.checkChild(i,"$text")&&e.checkChild(i,"paragraph"))return n.insertElement("paragraph",i),!0;return!1}function X6(n,e,t){const i=t.createContext(n);return!(!t.checkChild(i,"paragraph")||!t.checkChild(i.push("paragraph"),e))}function e8(n,e){const t=e.createElement("paragraph");return e.insert(t,n),e.createPositionAt(t,0)}class Lge extends j6{elementToElement(e){return this.add(t8(e))}elementToAttribute(e){return this.add(jge(e))}attributeToAttribute(e){return this.add(Uge(e))}elementToMarker(e){return this.add(Hge(e))}dataToMarker(e){return this.add(Wge(e))}}function NO(){return(n,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){const{modelRange:i,modelCursor:s}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=i,e.modelCursor=s}}}function Fge(){return(n,e,{schema:t,consumable:i,writer:s})=>{let r=e.modelCursor;if(!i.test(e.viewItem))return;if(!t.checkChild(r,"$text")){if(!X6(r,"$text",t)||e.viewItem.data.trim().length==0)return;r=e8(r,s)}i.consume(e.viewItem);const o=s.createText(e.viewItem.data);s.insert(o,r),e.modelRange=s.createRange(r,r.getShiftedBy(o.offsetSize)),e.modelCursor=e.modelRange.end}}function zge(n,e){return(t,i)=>{const s=i.newSelection,r=[];for(const a of s.getRanges())r.push(e.toModelRange(a));const o=n.createSelection(r,{backward:s.isBackward});o.isEqual(n.document.selection)||n.change(a=>{a.setSelection(o)})}}function t8(n){n=zi(n);const e=PC(n),t=NE(n.view),i=t?`element:${t}`:"element";return s=>{s.on(i,e,{priority:n.converterPriority||"normal"})}}function jge(n){n=zi(n),n8(n);const e=i8(n,!1),t=NE(n.view),i=t?`element:${t}`:"element";return s=>{s.on(i,e,{priority:n.converterPriority||"low"})}}function Uge(n){n=zi(n);let e=null;(typeof n.view=="string"||n.view.key)&&(e=Yge(n)),n8(n,e);const t=i8(n,!0);return i=>{i.on("element",t,{priority:n.converterPriority||"low"})}}function Hge(n){const e=Qge(n.model);return t8({...n,model:e})}function Wge(n){n=zi(n),n.model||(n.model=s=>s?n.view+":"+s:n.view);const e={view:n.view,model:n.model},t=PC(VO(e,"start")),i=PC(VO(e,"end"));return s=>{s.on(`element:${n.view}-start`,t,{priority:n.converterPriority||"normal"}),s.on(`element:${n.view}-end`,i,{priority:n.converterPriority||"normal"});const r=rs.low,o=rs.highest,a=rs.get(n.converterPriority)/o;s.on("element",$ge(e),{priority:r+a})}}function $ge(n){return(e,t,i)=>{const s=`data-${n.view}`;if(!i.consumable.test(t.viewItem,{attributes:s+"-end-after"})&&!i.consumable.test(t.viewItem,{attributes:s+"-start-after"})&&!i.consumable.test(t.viewItem,{attributes:s+"-end-before"})&&!i.consumable.test(t.viewItem,{attributes:s+"-start-before"}))return;t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor)),i.consumable.consume(t.viewItem,{attributes:s+"-end-after"})&&r(t.modelRange.end,t.viewItem.getAttribute(s+"-end-after").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-start-after"})&&r(t.modelRange.end,t.viewItem.getAttribute(s+"-start-after").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-end-before"})&&r(t.modelRange.start,t.viewItem.getAttribute(s+"-end-before").split(",")),i.consumable.consume(t.viewItem,{attributes:s+"-start-before"})&&r(t.modelRange.start,t.viewItem.getAttribute(s+"-start-before").split(","));function r(o,a){for(const c of a){const d=n.model(c,i),h=i.writer.createElement("$marker",{"data-name":d});i.writer.insert(h,o),t.modelCursor.isEqual(o)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(o,1),t.modelRange=t.modelRange._getTransformedByInsertion(o,1)[0]}}}}function NE(n){return typeof n=="string"?n:typeof n=="object"&&typeof n.name=="string"?n.name:null}function PC(n){const e=new ji(n.view);return(t,i,s)=>{const r=e.match(i.viewItem);if(!r)return;const o=r.match;if(o.name=!0,!s.consumable.test(i.viewItem,o))return;const a=Gge(n.model,i.viewItem,s);a&&s.safeInsert(a,i.modelCursor)&&(s.consumable.consume(i.viewItem,o),s.convertChildren(i.viewItem,a),s.updateConversionResult(a,i))}}function Gge(n,e,t){return n instanceof Function?n(e,t):t.writer.createElement(n)}function Yge(n){typeof n.view=="string"&&(n.view={key:n.view});const e=n.view.key,t=typeof n.view.value>"u"?/[\s\S]*/:n.view.value;let i;return e=="class"||e=="style"?i={[e=="class"?"classes":"styles"]:t}:i={attributes:{[e]:t}},n.view.name&&(i.name=n.view.name),n.view=i,e}function n8(n,e=null){const t=e===null?!0:r=>r.getAttribute(e),i=typeof n.model!="object"?n.model:n.model.key,s=typeof n.model!="object"||typeof n.model.value>"u"?t:n.model.value;n.model={key:i,value:s}}function i8(n,e){const t=new ji(n.view);return(i,s,r)=>{if(!s.modelRange&&e)return;const o=t.match(s.viewItem);if(!o||(Kge(n.view,s.viewItem)?o.match.name=!0:delete o.match.name,!r.consumable.test(s.viewItem,o.match)))return;const a=n.model.key,c=typeof n.model.value=="function"?n.model.value(s.viewItem,r,s):n.model.value;if(c==null)return;s.modelRange||Object.assign(s,r.convertChildren(s.viewItem,s.modelCursor)),qge(s.modelRange,{key:a,value:c},e,r)&&(r.consumable.test(s.viewItem,{name:!0})&&(o.match.name=!0),r.consumable.consume(s.viewItem,o.match))}}function Kge(n,e){const t=typeof n=="function"?n(e):n;return typeof t=="object"&&!NE(t)?!1:!t.classes&&!t.attributes&&!t.styles}function qge(n,e,t,i){let s=!1;for(const r of Array.from(n.getItems({shallow:t})))i.schema.checkAttribute(r,e.key)&&(s=!0,!r.hasAttribute(e.key)&&i.writer.setAttribute(e.key,e.value,r));return s}function Qge(n){return(e,t)=>{const i=typeof n=="string"?n:n(e,t);return t.writer.createElement("$marker",{"data-name":i})}}function VO(n,e){const t=(i,s)=>{const r=i.getAttribute("name"),o=n.model(r,s);return s.writer.createElement("$marker",{"data-name":o})};return{view:`${n.view}-${e}`,model:t}}class Zge extends kt(){model;view;mapper;downcastDispatcher;constructor(e,t){super(),this.model=e,this.view=new Ume(t),this.mapper=new L6,this.downcastDispatcher=new F6({mapper:this.mapper,schema:e.schema});const i=this.model.document,s=i.selection,r=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(i,"change",()=>{this.view.change(o=>{this.downcastDispatcher.convertChanges(i.differ,r,o),this.downcastDispatcher.convertSelection(s,r,o)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",zge(this.model,this.mapper)),this.downcastDispatcher.on("insert:$text",U6(),{priority:"lowest"}),this.downcastDispatcher.on("insert",H6(),{priority:"lowest"}),this.downcastDispatcher.on("remove",age(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",uge()),this.downcastDispatcher.on("selection",lge(),{priority:"low"}),this.downcastDispatcher.on("selection",cge(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(o=>{if(o.rootName=="$graveyard")return null;const a=new T6(this.view.document,o.name);return a.rootName=o.rootName,this.mapper.bindElements(o,a),a})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){const t=typeof e=="string"?e:e.name,i=this.model.markers.get(t);if(!i)throw new D("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(i)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}}class Jge extends kt(){_sourceDefinitions={};_attributeProperties=Object.create(null);_customChildChecks=new Map;_customAttributeChecks=new Map;_genericCheckSymbol=Symbol("$generic");_compiledDefinitions;constructor(){super(),this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new ea(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new ea(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new D("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new D("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return typeof e=="string"?t=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?t="$text":t=e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){const t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){const t=this.getDefinition(e);return t?!!(t.isLimit||t.isObject):!1}isObject(e){const t=this.getDefinition(e);return t?!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent):!1}isInline(e){const t=this.getDefinition(e);return!!(t&&t.isInline)}isSelectable(e){const t=this.getDefinition(e);return t?!!(t.isSelectable||t.isObject):!1}isContent(e){const t=this.getDefinition(e);return t?!!(t.isContent||t.isObject):!1}checkChild(e,t){return t?this._checkContextMatch(e,t):!1}checkAttribute(e,t){const i=this.getDefinition(e.last);if(!i)return!1;const s=this._evaluateAttributeChecks(e,t);return s!==void 0?s:i.allowAttributes.includes(t)}checkMerge(e,t){if(e instanceof le){const i=e.nodeBefore,s=e.nodeAfter;if(!(i instanceof Vt))throw new D("schema-check-merge-no-element-before",this);if(!(s instanceof Vt))throw new D("schema-check-merge-no-element-after",this);return this.checkMerge(i,s)}if(this.isLimit(e)||this.isLimit(t))return!1;for(const i of t.getChildren())if(!this.checkChild(e,i))return!1;return!0}addChildCheck(e,t){const i=t!==void 0?t:this._genericCheckSymbol,s=this._customChildChecks.get(i)||[];s.push(e),this._customChildChecks.set(i,s)}addAttributeCheck(e,t){const i=t!==void 0?t:this._genericCheckSymbol,s=this._customAttributeChecks.get(i)||[];s.push(e),this._customAttributeChecks.set(i,s)}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||Object.create(null)}getLimitElement(e){let t;for(e instanceof le?t=e.parent:t=(e instanceof Q?[e]:Array.from(e.getRanges())).reduce((s,r)=>{const o=r.getCommonAncestor();return s?s.getCommonAncestor(o,{includeSelf:!0}):o},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){const s=[...e.getFirstPosition().getAncestors(),new Wt("",e.getAttributes())];return this.checkAttribute(s,t)}else{const i=e.getRanges();for(const s of i)for(const r of s)if(this.checkAttribute(r.item,t))return!0}return!1}*getValidRanges(e,t){e=mpe(e);for(const i of e)yield*this._getValidRangesForRange(i,t)}getNearestSelectionRange(e,t="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new Q(e);let i,s;const r=e.getAncestors().reverse().find(o=>this.isLimit(o))||e.root;(t=="both"||t=="backward")&&(i=new qo({boundaries:Q._createIn(r),startPosition:e,direction:"backward"})),(t=="both"||t=="forward")&&(s=new qo({boundaries:Q._createIn(r),startPosition:e}));for(const o of hpe(i,s)){const a=o.walker==i?"elementEnd":"elementStart",c=o.value;if(c.type==a&&this.isObject(c.item))return Q._createOn(c.item);if(this.checkChild(c.nextPosition,"$text"))return new Q(c.nextPosition)}return null}findAllowedParent(e,t){let i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent}return null}setAllowedAttributes(e,t,i){const s=i.model;for(const[r,o]of Object.entries(t))s.schema.checkAttribute(e,r)&&i.setAttribute(r,o,e)}removeDisallowedAttributes(e,t){for(const i of e)if(i.is("$text"))LO(this,i,t);else{const r=Q._createIn(i).getPositions();for(const o of r){const a=o.nodeBefore||o.parent;LO(this,a,t)}}}getAttributesWithProperty(e,t,i){const s={};for(const[r,o]of e.getAttributes()){const a=this.getAttributeProperties(r);a[t]!==void 0&&(i===void 0||i===a[t])&&(s[r]=o)}return s}createContext(e){return new ea(e)}_clearCache(){this._compiledDefinitions=null}_compile(){const e={},t=this._sourceDefinitions,i=Object.keys(t);for(const r of i)e[r]=Xge(t[r],r);const s=Object.values(e);for(const r of s)epe(e,r),tpe(e,r),npe(e,r),ipe(e,r);for(const r of s)spe(e,r);for(const r of s)rpe(e,r);for(const r of s)ope(e,r);for(const r of s)lpe(e,r);for(const r of s)cpe(e,r);this._compiledDefinitions=ape(e)}_checkContextMatch(e,t){const i=e.last;let s=this._evaluateChildChecks(e,t);if(s=s!==void 0?s:t.allowIn.includes(i.name),!s)return!1;const r=this.getDefinition(i),o=e.trimLast();return r?o.length==0?!0:this._checkContextMatch(o,r):!1}_evaluateChildChecks(e,t){const i=this._customChildChecks.get(this._genericCheckSymbol)||[],s=this._customChildChecks.get(t.name)||[];for(const r of[...i,...s]){const o=r(e,t);if(o!==void 0)return o}}_evaluateAttributeChecks(e,t){const i=this._customAttributeChecks.get(this._genericCheckSymbol)||[],s=this._customAttributeChecks.get(t)||[];for(const r of[...i,...s]){const o=r(e,t);if(o!==void 0)return o}}*_getValidRangesForRange(e,t){let i=e.start,s=e.start;for(const r of e.getItems({shallow:!0}))r.is("element")&&(yield*this._getValidRangesForRange(Q._createIn(r),t)),this.checkAttribute(r,t)||(i.isEqual(s)||(yield new Q(i,s)),i=le._createAfter(r)),s=le._createAfter(r);i.isEqual(s)||(yield new Q(i,s))}findOptimalInsertionRange(e,t){const i=e.getSelectedElement();if(i&&this.isObject(i)&&!this.isInline(i))return t=="before"||t=="after"?new Q(le._createAt(i,t)):Q._createOn(i);const s=qt(e.getSelectedBlocks());if(!s)return new Q(e.focus);if(s.isEmpty)return new Q(le._createAt(s,0));const r=le._createAfter(s);return e.focus.isTouching(r)?new Q(r):new Q(le._createBefore(s))}}class ea{_items;constructor(e){if(e instanceof ea)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(fpe)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){const t=new ea([e]);return t._items=[...this._items,...t._items],t}trimLast(){const e=new ea([]);return e._items=this._items.slice(0,-1),e}getItem(e){return this._items[e]}*getNames(){yield*this._items.map(e=>e.name)}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}}function Xge(n,e){const t={name:e,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return upe(n,t),jr(n,t,"allowIn"),jr(n,t,"allowChildren"),jr(n,t,"disallowIn"),jr(n,t,"disallowChildren"),jr(n,t,"allowContentOf"),jr(n,t,"allowWhere"),jr(n,t,"allowAttributes"),jr(n,t,"disallowAttributes"),jr(n,t,"allowAttributesOf"),jr(n,t,"inheritTypesFrom"),dpe(n,t),t}function epe(n,e){for(const t of e.allowIn){const i=n[t];i?i.allowChildren.add(e.name):e.allowIn.delete(t)}}function tpe(n,e){for(const t of e.allowChildren){const i=n[t];i?i.allowIn.add(e.name):e.allowChildren.delete(t)}}function npe(n,e){for(const t of e.disallowIn){const i=n[t];i?i.disallowChildren.add(e.name):e.disallowIn.delete(t)}}function ipe(n,e){for(const t of e.disallowChildren){const i=n[t];i?i.disallowIn.add(e.name):e.disallowChildren.delete(t)}}function spe(n,e){for(const t of e.disallowChildren)e.allowChildren.delete(t);for(const t of e.disallowIn)e.allowIn.delete(t);for(const t of e.disallowAttributes)e.allowAttributes.delete(t)}function rpe(n,e){for(const t of e.allowContentOf){const i=n[t];i&&(i.disallowChildren.forEach(s=>{e.allowChildren.has(s)||(e.disallowChildren.add(s),n[s].disallowIn.add(e.name))}),i.allowChildren.forEach(s=>{e.disallowChildren.has(s)||(e.allowChildren.add(s),n[s].allowIn.add(e.name))}))}}function ope(n,e){for(const t of e.allowWhere){const i=n[t];i&&(i.disallowIn.forEach(s=>{e.allowIn.has(s)||(e.disallowIn.add(s),n[s].disallowChildren.add(e.name))}),i.allowIn.forEach(s=>{e.disallowIn.has(s)||(e.allowIn.add(s),n[s].allowChildren.add(e.name))}))}}function ape(n){const e={};for(const t of Object.values(n))e[t.name]={name:t.name,isBlock:!!t.isBlock,isContent:!!t.isContent,isInline:!!t.isInline,isLimit:!!t.isLimit,isObject:!!t.isObject,isSelectable:!!t.isSelectable,allowIn:Array.from(t.allowIn).filter(i=>!!n[i]),allowChildren:Array.from(t.allowChildren).filter(i=>!!n[i]),allowAttributes:Array.from(t.allowAttributes)};return e}function lpe(n,e){for(const t of e.allowAttributesOf){const i=n[t];if(!i)return;i.allowAttributes.forEach(s=>{e.disallowAttributes.has(s)||e.allowAttributes.add(s)})}}function cpe(n,e){for(const t of e.inheritTypesFrom){const i=n[t];if(i){const s=Object.keys(i).filter(r=>r.startsWith("is"));for(const r of s)r in e||(e[r]=i[r])}}}function upe(n,e){for(const t of n){const i=Object.keys(t).filter(s=>s.startsWith("is"));for(const s of i)e[s]=!!t[s]}}function jr(n,e,t){for(const i of n){let s=i[t];typeof s=="string"&&(s=[s]),Array.isArray(s)&&s.forEach(r=>e[t].add(r))}}function dpe(n,e){for(const t of n){const i=t.inheritAllFrom;i&&(e.allowContentOf.add(i),e.allowWhere.add(i),e.allowAttributesOf.add(i),e.inheritTypesFrom.add(i))}}function fpe(n){return typeof n=="string"||n.is("documentFragment")?{name:typeof n=="string"?n:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:n.is("element")?n.name:"$text",*getAttributeKeys(){yield*n.getAttributeKeys()},getAttribute(e){return n.getAttribute(e)}}}function*hpe(n,e){let t=!1;for(;!t;){if(t=!0,n){const i=n.next();i.done||(t=!1,yield{walker:n,value:i.value})}if(e){const i=e.next();i.done||(t=!1,yield{walker:e,value:i.value})}}}function*mpe(n){for(const e of n)yield*e.getMinimalFlatRanges()}function LO(n,e,t){for(const i of e.getAttributeKeys())n.checkAttribute(e,i)||t.removeAttribute(i,e)}class gpe extends Ot(){conversionApi;_splitParts=new Map;_cursorParents=new Map;_modelCursor=null;_emptyElementsToKeep=new Set;constructor(e){super(),this.conversionApi={...e,consumable:null,writer:null,store:null,convertItem:(t,i)=>this._convertItem(t,i),convertChildren:(t,i)=>this._convertChildren(t,i),safeInsert:(t,i)=>this._safeInsert(t,i),updateConversionResult:(t,i)=>this._updateConversionResult(t,i),splitToAllowedParent:(t,i)=>this._splitToAllowedParent(t,i),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)}}convert(e,t,i=["$root"]){this.fire("viewCleanup",e),this._modelCursor=bpe(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=yw.createFrom(e),this.conversionApi.store={};const{modelRange:s}=this._convertItem(e,this._modelCursor),r=t.createDocumentFragment();if(s){this._removeEmptyElements();const o=this._modelCursor.parent,a=o._removeChildren(0,o.childCount);r._insertChild(0,a),r.markers=ppe(r,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,r}_convertItem(e,t){const i={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,i,this.conversionApi):e.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof Q))throw new D("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor}}_convertChildren(e,t){let i=t.is("position")?t:le._createAt(t,0);const s=new Q(i);for(const r of Array.from(e.getChildren())){const o=this._convertItem(r,i);o.modelRange instanceof Q&&(s.end=o.modelRange.end,i=o.modelCursor)}return{modelRange:s,modelCursor:i}}_safeInsert(e,t){const i=this._splitToAllowedParent(e,t);return i?(this.conversionApi.writer.insert(e,i.position),!0):!1}_updateConversionResult(e,t){const i=this._getSplitParts(e),s=this.conversionApi.writer;t.modelRange||(t.modelRange=s.createRange(s.createPositionBefore(e),s.createPositionAfter(i[i.length-1])));const r=this._cursorParents.get(e);r?t.modelCursor=s.createPositionAt(r,0):t.modelCursor=t.modelRange.end}_splitToAllowedParent(e,t){const{schema:i,writer:s}=this.conversionApi;let r=i.findAllowedParent(t,e);if(r){if(r===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(r)&&(r=null)}if(!r)return X6(t,e,i)?{position:e8(t,s)}:null;const o=this.conversionApi.writer.split(t,r),a=[];for(const d of o.range.getWalker())if(d.type=="elementEnd")a.push(d.item);else{const h=a.pop(),m=d.item;this._registerSplitPair(h,m)}const c=o.range.end.parent;return this._cursorParents.set(e,c),{position:o.position,cursorParent:c}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);const i=this._splitParts.get(e);this._splitParts.set(t,i),i.push(t)}_getSplitParts(e){let t;return this._splitParts.has(e)?t=this._splitParts.get(e):t=[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){const e=new Map;for(const t of this._splitParts.keys())if(t.isEmpty&&!this._emptyElementsToKeep.has(t)){const i=e.get(t.parent)||[];i.push(t),this._splitParts.delete(t),e.set(t.parent,i)}for(const[t,i]of e)t._removeChildrenArray(i);e.size&&this._removeEmptyElements()}}function ppe(n,e){const t=new Set,i=new Map,s=Q._createIn(n).getItems();for(const r of s)r.is("element","$marker")&&t.add(r);for(const r of t){const o=r.getAttribute("data-name"),a=e.createPositionBefore(r);i.has(o)?i.get(o).end=a.clone():i.set(o,new Q(a.clone())),e.remove(r)}return i}function bpe(n,e){let t;for(const i of new ea(n)){const s={};for(const o of i.getAttributeKeys())s[o]=i.getAttribute(o);const r=e.createElement(i.name,s);t&&e.insert(r,t),t=le._createAt(r,0)}return t}class wpe{getHtml(e){const i=me.document.implementation.createHTMLDocument("").createElement("div");return i.appendChild(e),i.innerHTML}}class s8{domParser;domConverter;htmlWriter;skipComments=!0;constructor(e){this.domParser=new DOMParser,this.domConverter=new ay(e,{renderingMode:"data"}),this.htmlWriter=new wpe}toData(e){const t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){const t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(e.trim().slice(0,1e4))||(e=`<body>${e}</body>`);const t=this.domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment(),s=t.body.childNodes;for(;s.length>0;)i.appendChild(s[0]);return i}}class vpe extends Ot(){model;mapper;downcastDispatcher;upcastDispatcher;viewDocument;stylesProcessor;htmlProcessor;processor;_viewWriter;constructor(e,t){super(),this.model=e,this.mapper=new L6,this.downcastDispatcher=new F6({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",U6(),{priority:"lowest"}),this.downcastDispatcher.on("insert",H6(),{priority:"lowest"}),this.upcastDispatcher=new gpe({schema:e.schema}),this.viewDocument=new ry(t),this.stylesProcessor=t,this.htmlProcessor=new s8(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new DE(this.viewDocument),this.upcastDispatcher.on("text",Fge(),{priority:"lowest"}),this.upcastDispatcher.on("element",NO(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",NO(),{priority:"lowest"}),kt().prototype.decorate.call(this,"init"),kt().prototype.decorate.call(this,"set"),kt().prototype.decorate.call(this,"get"),kt().prototype.decorate.call(this,"toView"),kt().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},J6)},{priority:"lowest"})}get(e={}){const{rootName:t="main",trim:i="empty"}=e;if(!this._checkIfRootsExists([t]))throw new D("datacontroller-get-non-existent-root",this);const s=this.model.document.getRoot(t);return s.isAttached()||lt("datacontroller-get-detached-root",this),i==="empty"&&!this.model.hasContent(s,{ignoreWhitespaces:!0})?"":this.stringify(s,e)}stringify(e,t={}){const i=this.toView(e,t);return this.processor.toData(i)}toView(e,t={}){const i=this.viewDocument,s=this._viewWriter;this.mapper.clearBindings();const r=Q._createIn(e),o=new ic(i);this.mapper.bindElements(e,o);const a=e.is("documentFragment")?e.markers:ype(e);return this.downcastDispatcher.convert(r,a,s,t),o}init(e){if(this.model.document.version)throw new D("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new D("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},i=>{for(const s of Object.keys(t)){const r=this.model.document.getRoot(s);i.insert(this.parse(t[s],r),r,0)}}),Promise.resolve()}set(e,t={}){let i={};if(typeof e=="string"?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new D("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},s=>{s.setSelection(null),s.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const r of Object.keys(i)){const o=this.model.document.getRoot(r);s.remove(s.createRangeIn(o)),s.insert(this.parse(i[r],o),o,0)}})}parse(e,t="$root"){const i=this.processor.toView(e);return this.toModel(i,t)}toModel(e,t="$root"){return this.model.change(i=>this.upcastDispatcher.convert(e,i,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(const t of e)if(!this.model.document.getRoot(t))return!1;return!0}}function ype(n){const e=[],t=n.root.document;if(!t)return new Map;const i=Q._createIn(n);for(const s of t.model.markers){const r=s.getRange(),o=r.isCollapsed,a=r.start.isEqual(i.start)||r.end.isEqual(i.end);if(o&&a)e.push([s.name,r]);else{const c=i.getIntersection(r);c&&e.push([s.name,c])}}return e.sort(([s,r],[o,a])=>{if(r.end.compareWith(a.start)!=="after")return 1;if(r.start.compareWith(a.end)!=="before")return-1;switch(r.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(r.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return o.localeCompare(s)}}}),new Map(e)}class Ape{_helpers=new Map;_downcast;_upcast;constructor(e,t){this._downcast=yt(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=yt(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){const i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new D("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i})}for(e){if(!this._helpers.has(e))throw new D("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(const{model:t,view:i}of B_(e))this.for("upcast").elementToElement({model:t,view:i,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(const{model:t,view:i}of B_(e))this.for("upcast").elementToAttribute({view:i,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(const{model:t,view:i}of B_(e))this.for("upcast").attributeToAttribute({view:i,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:i}){if(this._helpers.has(e))throw new D("conversion-group-exists",this);const s=i?new oge(t):new Lge(t);this._helpers.set(e,s)}}function*B_(n){if(n.model.values)for(const e of n.model.values){const t={key:n.model.key,value:e},i=n.view[e],s=n.upcastAlso?n.upcastAlso[e]:void 0;yield*FO(t,i,s)}else yield*FO(n.model,n.view,n.upcastAlso)}function*FO(n,e,t){if(yield{model:n,view:e},t)for(const i of yt(t))yield{model:n,view:i}}class Rs{baseVersion;isDocumentOperation;batch;constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}}function VE(n,e){const t=o8(e),i=t.reduce((o,a)=>o+a.offsetSize,0),s=n.parent;nm(n);const r=n.index;return s._insertChild(r,t),tm(s,r+t.length),tm(s,r),new Q(n,n.getShiftedBy(i))}function r8(n){if(!n.isFlat)throw new D("operation-utils-remove-range-not-flat",this);const e=n.start.parent;nm(n.start),nm(n.end);const t=e._removeChildren(n.start.index,n.end.index-n.start.index);return tm(e,n.start.index),t}function em(n,e){if(!n.isFlat)throw new D("operation-utils-move-range-not-flat",this);const t=r8(n);return e=e._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),VE(e,t)}function _pe(n,e,t){nm(n.start),nm(n.end);for(const i of n.getItems({shallow:!0})){const s=i.is("$textProxy")?i.textNode:i;t!==null?s._setAttribute(e,t):s._removeAttribute(e),tm(s.parent,s.index)}tm(n.end.parent,n.end.index)}function o8(n){const e=[];function t(i){if(typeof i=="string")e.push(new Wt(i));else if(i instanceof wr)e.push(new Wt(i.data,i.getAttributes()));else if(i instanceof Ec)e.push(i);else if(Is(i))for(const s of i)t(s)}t(n);for(let i=1;i<e.length;i++){const s=e[i],r=e[i-1];s instanceof Wt&&r instanceof Wt&&a8(s,r)&&(e.splice(i-1,2,new Wt(r.data+s.data,r.getAttributes())),i--)}return e}function tm(n,e){const t=n.getChild(e-1),i=n.getChild(e);if(t&&i&&t.is("$text")&&i.is("$text")&&a8(t,i)){const s=new Wt(t.data+i.data,t.getAttributes());n._removeChildren(e-1,2),n._insertChild(e-1,s)}}function nm(n){const e=n.textNode,t=n.parent;if(e){const i=n.offset-e.startOffset,s=e.index;t._removeChildren(s,1);const r=new Wt(e.data.substr(0,i),e.getAttributes()),o=new Wt(e.data.substr(i),e.getAttributes());t._insertChild(s,[r,o])}}function a8(n,e){const t=n.getAttributes(),i=e.getAttributes();for(const s of t){if(s[1]!==e.getAttribute(s[0]))return!1;i.next()}return i.next().done}class At extends Rs{sourcePosition;howMany;targetPosition;constructor(e,t,i,s){super(s),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName==this.sourcePosition.root.rootName?"move":this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[Q._createFromPositionAndShift(this.sourcePosition,this.howMany),Q._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new At(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new At(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,s=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new D("move-operation-nodes-do-not-exist",this);if(e===t&&i<s&&s<i+this.howMany)throw new D("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&ri(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const r=this.sourcePosition.path.length-1;if(this.targetPosition.path[r]>=i&&this.targetPosition.path[r]<i+this.howMany)throw new D("move-operation-node-into-itself",this)}}_execute(){em(Q._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){const i=le.fromJSON(e.sourcePosition,t),s=le.fromJSON(e.targetPosition,t);return new this(i,e.howMany,s,e.baseVersion)}}class ci extends Rs{position;nodes;shouldReceiveAttributes;constructor(e,t,i){super(i),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new _h(o8(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const e=new _h([...this.nodes].map(i=>i._clone(!0))),t=new ci(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){const e=this.position.root.document.graveyard,t=new le(e,[0]);return new At(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){const e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new D("insert-operation-position-invalid",this)}_execute(){const e=this.nodes;this.nodes=new _h([...e].map(t=>t._clone(!0))),VE(this.position,e)}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){const i=[];for(const r of e.nodes)r.name?i.push(Vt.fromJSON(r)):i.push(Wt.fromJSON(r));const s=new ci(le.fromJSON(e.position,t),i,e.baseVersion);return s.shouldReceiveAttributes=e.shouldReceiveAttributes,s}}class Lt extends Rs{splitPosition;howMany;insertionPosition;graveyardPosition;constructor(e,t,i,s,r){super(r),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=i,this.graveyardPosition=s?s.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const e=this.insertionPosition.path.slice();return e.push(0),new le(this.insertionPosition.root,e)}get movedRange(){const e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Q(this.splitPosition,e)}get affectedSelectable(){const e=[Q._createFromPositionAndShift(this.splitPosition,0),Q._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(Q._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new Lt(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.splitPosition.root.document.graveyard,t=new le(e,[0]);return new Cn(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){const e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new D("split-operation-position-invalid",this);if(e.parent){if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=e.maxOffset-this.splitPosition.offset)throw new D("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new D("split-operation-graveyard-position-invalid",this)}else throw new D("split-operation-split-in-root",this);this.howMany=this.splitPosition.parent.maxOffset-this.splitPosition.offset}_execute(){const e=this.splitPosition.parent;if(this.graveyardPosition)em(Q._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const i=e._clone();VE(this.insertionPosition,i)}const t=new Q(le._createAt(e,this.splitPosition.offset),le._createAt(e,e.maxOffset));em(t,this.moveTargetPosition)}toJSON(){const e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){const t=e.path.slice(0,-1);return t[t.length-1]++,new le(e.root,t,"toPrevious")}static fromJSON(e,t){const i=le.fromJSON(e.splitPosition,t),s=le.fromJSON(e.insertionPosition,t),r=e.graveyardPosition?le.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,s,r,e.baseVersion)}}class Cn extends Rs{sourcePosition;howMany;targetPosition;graveyardPosition;constructor(e,t,i,s,r){super(r),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=s.clone()}get type(){return"merge"}get deletionPosition(){return new le(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Q(this.sourcePosition,e)}get affectedSelectable(){const e=this.sourcePosition.parent;return[Q._createOn(e),Q._createFromPositionAndShift(this.targetPosition,0),Q._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Cn(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),i=new le(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new Lt(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){const e=this.sourcePosition.parent,t=this.targetPosition.parent;if(e.parent)if(t.parent){if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=e.maxOffset)throw new D("merge-operation-how-many-invalid",this)}else throw new D("merge-operation-target-position-invalid",this);else throw new D("merge-operation-source-position-invalid",this);this.howMany=this.sourcePosition.parent.maxOffset}_execute(){const e=this.sourcePosition.parent,t=Q._createIn(e);em(t,this.targetPosition),em(Q._createOn(e),this.graveyardPosition)}toJSON(){const e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){const i=le.fromJSON(e.sourcePosition,t),s=le.fromJSON(e.targetPosition,t),r=le.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,s,r,e.baseVersion)}}class Ni extends Rs{name;oldRange;newRange;affectsData;_markers;constructor(e,t,i,s,r,o){super(o),this.name=e,this.oldRange=t?t.clone():null,this.newRange=i?i.clone():null,this.affectsData=r,this._markers=s}get type(){return"marker"}get affectedSelectable(){const e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new Ni(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Ni(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new Ni(e.name,e.oldRange?Q.fromJSON(e.oldRange,t):null,e.newRange?Q.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}}class Pn extends Rs{range;key;oldValue;newValue;constructor(e,t,i,s,r){super(r),this.range=e.clone(),this.key=t,this.oldValue=i===void 0?null:i,this.newValue=s===void 0?null:s}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Pn(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Pn(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new D("attribute-operation-range-not-flat",this);for(const e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!yd(e.getAttribute(this.key),this.oldValue))throw new D("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new D("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){yd(this.oldValue,this.newValue)||_pe(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new Pn(Q.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}}class qn extends Rs{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new qn(this.baseVersion)}getReversed(){return new qn(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class as extends Rs{position;oldName;newName;constructor(e,t,i,s){super(s),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=i}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new as(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new as(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const e=this.position.nodeAfter;if(e instanceof Vt){if(this.oldName!==""&&e.name!==this.oldName)throw new D("rename-operation-wrong-name",this)}else throw new D("rename-operation-wrong-position",this);this.oldName=e.name}_execute(){const e=this.position.nodeAfter;e.name=this.newName}toJSON(){const e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new as(le.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}}class ta extends Rs{root;key;oldValue;newValue;constructor(e,t,i,s,r){super(r),this.root=e,this.key=t,this.oldValue=i===void 0?null:i,this.newValue=s===void 0?null:s}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new ta(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new ta(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new D("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new D("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new D("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new D("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new ta(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}}class Qr extends Rs{rootName;elementName;isAdd;_document;constructor(e,t,i,s,r){if(super(r),this.rootName=e,this.elementName=t,this.isAdd=i,this._document=s,!this._document.getRoot(this.rootName)){const o=this._document.createRoot(this.elementName,this.rootName);o._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new Qr(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new Qr(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,t){return new Qr(e.rootName,e.elementName,e.isAdd,t,e.baseVersion)}}const ir={};ir[Pn.className]=Pn;ir[ci.className]=ci;ir[Ni.className]=Ni;ir[At.className]=At;ir[qn.className]=qn;ir[Rs.className]=Rs;ir[as.className]=as;ir[ta.className]=ta;ir[Qr.className]=Qr;ir[Lt.className]=Lt;ir[Cn.className]=Cn;class Cpe{static fromJSON(e,t){return ir[e.__className].fromJSON(e,t)}}const OC=new Map;function pt(n,e,t){let i=OC.get(n);i||(i=new Map,OC.set(n,i)),i.set(e,t)}function xpe(n,e){const t=OC.get(n);return t&&t.has(e)?t.get(e):kpe}function kpe(n){return[n]}function zO(n,e,t={}){const i=xpe(n.constructor,e.constructor);try{return n=n.clone(),i(n,e,t)}catch(s){throw s}}function Epe(n,e,t){n=n.slice(),e=e.slice();const i=new Spe(t.document,t.useRelations,t.forceWeakRemove);i.setOriginalOperations(n),i.setOriginalOperations(e);const s=i.originalOperations;if(n.length==0||e.length==0)return{operationsA:n,operationsB:e,originalOperations:s};const r=new WeakMap;for(const c of n)r.set(c,0);const o={nextBaseVersionA:n[n.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:n.length,originalOperationsBCount:e.length};let a=0;for(;a<n.length;){const c=n[a],d=r.get(c);if(d==e.length){a++;continue}const h=e[d],m=zO(c,h,i.getContext(c,h,!0)),p=zO(h,c,i.getContext(h,c,!1));i.updateRelation(c,h),i.setOriginalOperations(m,c),i.setOriginalOperations(p,h);for(const w of m)r.set(w,d+p.length);n.splice(a,1,...m),e.splice(d,1,...p)}return UO(n),UO(e),jO(n,o.nextBaseVersionB),jO(e,o.nextBaseVersionA),{operationsA:n,operationsB:e,originalOperations:s}}class Spe{originalOperations;_history;_useRelations;_forceWeakRemove;_relations;constructor(e,t,i=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(e,t=null){const i=t?this.originalOperations.get(t):null;for(const s of e)this.originalOperations.set(s,i||s)}updateRelation(e,t){if(e instanceof At)t instanceof Cn?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)?this._setRelation(e,t,"moveTargetAfter"):e.howMany>1&&e.sourcePosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"firstToMoveMerged"):e.howMany>1&&e.sourcePosition.getShiftedBy(e.howMany-1).isEqual(t.deletionPosition)&&this._setRelation(e,t,"lastToMoveMerged"):t instanceof At&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof Lt){if(t instanceof Cn)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof At)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{const i=Q._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.splitPosition)){const s=i.end.offset-e.splitPosition.offset,r=e.splitPosition.offset-i.start.offset;this._setRelation(e,t,{howMany:s,offset:r})}}}else if(e instanceof Cn)t instanceof Cn?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof Lt?e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource"):t instanceof At&&t.howMany>0&&(e.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(e,t,"mergeSourceAffected"),e.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeTargetWasBefore"));else if(e instanceof Ni){const i=e.newRange;if(!i)return;if(t instanceof Cn){const s=i.start.isEqual(t.targetPosition),r=i.start.isEqual(t.deletionPosition),o=i.end.isEqual(t.deletionPosition),a=i.end.isEqual(t.sourcePosition);(s||r||o||a)&&this._setRelation(e,t,{wasInLeftElement:s,wasStartBeforeMergedElement:r,wasEndBeforeMergedElement:o,wasInRightElement:a})}}}getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){const t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){const i=this.originalOperations.get(t),s=this._history.getUndoneOperation(i);if(!s)return null;const r=this.originalOperations.get(e),o=this._relations.get(r);return o&&o.get(s)||null}_setRelation(e,t,i){const s=this.originalOperations.get(e),r=this.originalOperations.get(t);let o=this._relations.get(s);o||(o=new Map,this._relations.set(s,o)),o.set(r,i)}}function jO(n,e){for(const t of n)t.baseVersion=e++}function UO(n){const e=new Map;for(let t=0;t<n.length;t++){const i=n[t];i instanceof Ni&&(i.baseVersion!==-1?e.set(i.name,{op:i,ranges:i.newRange?[i.newRange]:[]}):(i.newRange&&e.get(i.name).ranges.push(i.newRange),n.splice(t,1),t--))}for(const{op:t,ranges:i}of e.values())i.length?t.newRange=Q._createFromRanges(i):t.newRange=null}pt(Pn,Pn,(n,e,t)=>{if(n.key===e.key&&n.range.start.hasSameParentAs(e.range.start)){const i=n.range.getDifference(e.range).map(r=>new Pn(r,n.key,n.oldValue,n.newValue,0)),s=n.range.getIntersection(e.range);return s&&t.aIsStrong&&i.push(new Pn(s,e.key,e.newValue,n.newValue,0)),i.length==0?[new qn(0)]:i}else return[n]});pt(Pn,ci,(n,e)=>{if(n.range.start.hasSameParentAs(e.position)&&n.range.containsPosition(e.position)){const i=n.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(s=>new Pn(s,n.key,n.oldValue,n.newValue,n.baseVersion));if(e.shouldReceiveAttributes){const s=l8(e,n.key,n.oldValue);s&&i.unshift(s)}return i}return n.range=n.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[n]});function l8(n,e,t){const s=n.nodes.getNode(0).getAttribute(e);if(s==t)return null;const r=new Q(n.position,n.position.getShiftedBy(n.howMany));return new Pn(r,e,s,t,0)}pt(Pn,Cn,(n,e)=>{const t=[];n.range.start.hasSameParentAs(e.deletionPosition)&&(n.range.containsPosition(e.deletionPosition)||n.range.start.isEqual(e.deletionPosition))&&t.push(Q._createFromPositionAndShift(e.graveyardPosition,1));const i=n.range._getTransformedByMergeOperation(e);return i.isCollapsed||t.push(i),t.map(s=>new Pn(s,n.key,n.oldValue,n.newValue,n.baseVersion))});pt(Pn,At,(n,e)=>Tpe(n.range,e).map(i=>new Pn(i,n.key,n.oldValue,n.newValue,n.baseVersion)));function Tpe(n,e){const t=Q._createFromPositionAndShift(e.sourcePosition,e.howMany);let i=null,s=[];t.containsRange(n,!0)?i=n:n.start.hasSameParentAs(t.start)?(s=n.getDifference(t),i=n.getIntersection(t)):s=[n];const r=[];for(let o of s){o=o._getTransformedByDeletion(e.sourcePosition,e.howMany);const a=e.getMovedRangeStart(),c=o.start.hasSameParentAs(a),d=o._getTransformedByInsertion(a,e.howMany,c);r.push(...d)}return i&&r.push(i._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),r}pt(Pn,Lt,(n,e)=>{if(n.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(e.splitPosition)&&n.range.containsPosition(e.splitPosition)){const t=n.clone();return t.range=new Q(e.moveTargetPosition.clone(),n.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),n.range.end=e.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,t]}return n.range=n.range._getTransformedBySplitOperation(e),[n]});pt(ci,Pn,(n,e)=>{const t=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(n.position)){const i=l8(n,e.key,e.newValue);i&&t.push(i)}return t});pt(ci,ci,(n,e,t)=>n.position.isEqual(e.position)&&t.aIsStrong?[n]:(n.position=n.position._getTransformedByInsertOperation(e),[n]));pt(ci,At,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));pt(ci,Lt,(n,e)=>(n.position=n.position._getTransformedBySplitOperation(e),[n]));pt(ci,Cn,(n,e)=>(n.position=n.position._getTransformedByMergeOperation(e),[n]));pt(Ni,ci,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(e)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(e)[0]),[n]));pt(Ni,Ni,(n,e,t)=>{if(n.name==e.name)if(t.aIsStrong)n.oldRange=e.newRange?e.newRange.clone():null;else return[new qn(0)];return[n]});pt(Ni,Cn,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(e)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(e)),[n]));pt(Ni,At,(n,e)=>{const t=[n];if(n.oldRange&&(n.oldRange=Q._createFromRanges(n.oldRange._getTransformedByMoveOperation(e))),n.newRange){const i=n.newRange._getTransformedByMoveOperation(e);n.newRange=i[0];for(let s=1;s<i.length;s++){const r=n.clone();r.oldRange=null,r.newRange=i[s],r.baseVersion=-1,t.push(r)}}return t});pt(Ni,Lt,(n,e,t)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(e)),n.newRange){if(t.abRelation){const i=n.newRange._getTransformedBySplitOperation(e);return n.newRange.start.isEqual(e.splitPosition)?t.abRelation.wasStartBeforeMergedElement?n.newRange.start=le._createAt(e.insertionPosition):t.abRelation.wasInLeftElement?n.newRange.start=le._createAt(n.newRange.start):n.newRange.start=le._createAt(e.moveTargetPosition):n.newRange.start=i.start,n.newRange.end.isEqual(e.splitPosition)?n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?n.newRange.end=le._createAt(e.insertionPosition):t.abRelation.wasInRightElement?n.newRange.end=le._createAt(e.moveTargetPosition):n.newRange.end=le._createAt(n.newRange.end):n.newRange.end=i.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(e)}return[n]});pt(Cn,ci,(n,e)=>(n.sourcePosition.hasSameParentAs(e.position)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(e),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e),[n]));pt(Cn,Cn,(n,e,t)=>{if(n.sourcePosition.isEqual(e.sourcePosition)&&n.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){const i=e.graveyardPosition.path.slice();return i.push(0),n.sourcePosition=new le(e.graveyardPosition.root,i),n.howMany=0,[n]}else return[new qn(0)];if(n.sourcePosition.isEqual(e.sourcePosition)&&!n.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){const i=n.targetPosition.root.rootName=="$graveyard",s=e.targetPosition.root.rootName=="$graveyard";if(s&&!i||!(i&&!s)&&t.aIsStrong){const c=e.targetPosition._getTransformedByMergeOperation(e),d=n.targetPosition._getTransformedByMergeOperation(e);return[new At(c,n.howMany,d,0)]}else return[new qn(0)]}return n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(e),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),(!n.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});pt(Cn,At,(n,e,t)=>{const i=Q._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&n.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.sourcePosition)?[new qn(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(n.sourcePosition)?n.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(n.sourcePosition)&&t.abRelation=="mergeSourceAffected"?n.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(n.targetPosition)?(n.targetPosition.stickiness="toNone",n.howMany-=e.howMany):e.targetPosition.isEqual(n.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(n.targetPosition.stickiness="toPrevious",n.howMany+=e.howMany):(n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition.hasSameParentAs(e.sourcePosition)&&(n.howMany-=e.howMany)),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(e),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(e),n.sourcePosition.stickiness="toPrevious",n.targetPosition.stickiness="toNext",n.graveyardPosition.isEqual(e.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)),[n])});pt(Cn,Lt,(n,e,t)=>{if(e.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),n.deletionPosition.isEqual(e.graveyardPosition)&&(n.howMany=e.howMany)),n.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&n.deletionPosition.isEqual(e.graveyardPosition)||t.abRelation=="mergeTargetNotMoved"))return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),[n];if(n.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n];if(t.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=e.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}return n.sourcePosition.hasSameParentAs(e.splitPosition)&&(n.howMany=e.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]});pt(At,ci,(n,e)=>{const i=Q._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(e,!1)[0];return n.sourcePosition=i.start,n.howMany=i.end.offset-i.start.offset,n.targetPosition.isEqual(e.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e)),[n]});pt(At,At,(n,e,t)=>{const i=Q._createFromPositionAndShift(n.sourcePosition,n.howMany),s=Q._createFromPositionAndShift(e.sourcePosition,e.howMany);let r=t.aIsStrong,o=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?o=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(o=!1);let a;if(n.targetPosition.isEqual(e.targetPosition)&&o?a=n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):a=n.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),HO(n,e)&&HO(e,n))return[e.getReversed()];if(i.containsPosition(e.targetPosition)&&i.containsRange(s,!0))return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Zu([i],a);if(s.containsPosition(n.targetPosition)&&s.containsRange(i,!0))return i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),Zu([i],a);const h=ri(n.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(h=="prefix"||h=="extension")return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Zu([i],a);n.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?r=!0:n.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(r=!1);const m=[],p=i.getDifference(s);for(const A of p){A.start=A.start._getTransformedByDeletion(e.sourcePosition,e.howMany),A.end=A.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const C=ri(A.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",k=A._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,C);m.push(...k)}const w=i.getIntersection(s);return w!==null&&r&&(w.start=w.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),w.end=w.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),m.length===0?m.push(w):m.length==1?s.start.isBefore(i.start)||s.start.isEqual(i.start)?m.unshift(w):m.push(w):m.splice(1,0,w)),m.length===0?[new qn(n.baseVersion)]:Zu(m,a)});pt(At,Lt,(n,e,t)=>{let i=n.targetPosition.clone();if((!n.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(i=n.targetPosition._getTransformedBySplitOperation(e)),n.sourcePosition.isEqual(e.insertionPosition)&&t.abRelation=="firstToMoveMerged")return n.howMany++,n.targetPosition=i,[n];const s=Q._createFromPositionAndShift(n.sourcePosition,n.howMany);if(s.end.isEqual(e.insertionPosition))return(!e.graveyardPosition||t.abRelation=="lastToMoveMerged")&&n.howMany++,n.targetPosition=i,[n];if(s.start.hasSameParentAs(e.splitPosition)&&s.containsPosition(e.splitPosition)){let a=new Q(e.splitPosition,s.end);a=a._getTransformedBySplitOperation(e);const c=[new Q(s.start,e.splitPosition),a];return Zu(c,i)}n.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(i=e.moveTargetPosition),n.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(i=n.targetPosition);const o=[s._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const a=s.start.isEqual(e.graveyardPosition)||s.containsPosition(e.graveyardPosition);n.howMany>1&&a&&!t.aWasUndone&&o.push(Q._createFromPositionAndShift(e.insertionPosition,1))}return Zu(o,i)});pt(At,Cn,(n,e,t)=>{const i=Q._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.deletionPosition.hasSameParentAs(n.sourcePosition)&&i.containsPosition(e.sourcePosition)){if(n.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){const o=[];let a=e.graveyardPosition.clone(),c=e.targetPosition._getTransformedByMergeOperation(e);const d=n.targetPosition.getTransformedByOperation(e);n.howMany>1&&(o.push(new At(n.sourcePosition,n.howMany-1,d,0)),a=a._getTransformedByMove(n.sourcePosition,d,n.howMany-1),c=c._getTransformedByMove(n.sourcePosition,d,n.howMany-1));const h=e.deletionPosition._getCombined(n.sourcePosition,d),m=new At(a,1,h,0),p=m.getMovedRangeStart().path.slice();p.push(0);const w=new le(m.targetPosition.root,p);c=c._getTransformedByMove(a,h,1);const A=new At(c,e.howMany,w,0);return o.push(m),o.push(A),o}}else if(n.howMany==1)return t.bWasUndone?(n.sourcePosition=e.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]):[new qn(0)]}const r=Q._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(e);return n.sourcePosition=r.start,n.howMany=r.end.offset-r.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]});pt(as,ci,(n,e)=>(n.position=n.position._getTransformedByInsertOperation(e),[n]));pt(as,Cn,(n,e)=>n.position.isEqual(e.deletionPosition)?(n.position=e.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(e),[n]));pt(as,At,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));pt(as,as,(n,e,t)=>{if(n.position.isEqual(e.position))if(t.aIsStrong)n.oldName=e.newName;else return[new qn(0)];return[n]});pt(as,Lt,(n,e)=>{const t=n.position.path,i=e.splitPosition.getParentPath();if(ri(t,i)=="same"&&!e.graveyardPosition){const s=new as(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,s]}return n.position=n.position._getTransformedBySplitOperation(e),[n]});pt(ta,ta,(n,e,t)=>{if(n.root===e.root&&n.key===e.key)if(t.aIsStrong)n.oldValue=e.newValue;else return[new qn(0)];return[n]});pt(Qr,Qr,(n,e)=>n.rootName===e.rootName&&n.isAdd===e.isAdd?[new qn(0)]:[n]);pt(Lt,ci,(n,e)=>(n.splitPosition.hasSameParentAs(e.position)&&n.splitPosition.offset<e.position.offset&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(e),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(e),[n]));pt(Lt,Cn,(n,e,t)=>{if(!n.graveyardPosition&&!t.bWasUndone&&n.splitPosition.hasSameParentAs(e.sourcePosition)){const i=e.graveyardPosition.path.slice();i.push(0);const s=new le(e.graveyardPosition.root,i),r=Lt.getInsertionPosition(new le(e.graveyardPosition.root,i)),o=new Lt(s,0,r,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=Lt.getInsertionPosition(n.splitPosition),n.graveyardPosition=o.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[o,n]}return n.splitPosition.hasSameParentAs(e.deletionPosition)&&!n.splitPosition.isAfter(e.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=Lt.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});pt(Lt,At,(n,e,t)=>{const i=Q._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.graveyardPosition){const r=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);if(!t.bWasUndone&&r){const o=n.splitPosition._getTransformedByMoveOperation(e),a=n.graveyardPosition._getTransformedByMoveOperation(e),c=a.path.slice();c.push(0);const d=new le(a.root,c);return[new At(o,n.howMany,d,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)}const s=n.splitPosition.isEqual(e.targetPosition);if(s&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return n.howMany+=e.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),n.insertionPosition=Lt.getInsertionPosition(n.splitPosition),[n];if(s&&t.abRelation&&t.abRelation.howMany){const{howMany:r,offset:o}=t.abRelation;return n.howMany+=r,n.splitPosition=n.splitPosition.getShiftedBy(o),[n]}if(n.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.splitPosition)){const r=e.howMany-(n.splitPosition.offset-e.sourcePosition.offset);return n.howMany-=r,n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany),n.splitPosition=e.sourcePosition.clone(),n.insertionPosition=Lt.getInsertionPosition(n.splitPosition),[n]}return e.sourcePosition.isEqual(e.targetPosition)||(n.splitPosition.hasSameParentAs(e.sourcePosition)&&n.splitPosition.offset<=e.sourcePosition.offset&&(n.howMany-=e.howMany),n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(e),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(e):n.insertionPosition=Lt.getInsertionPosition(n.splitPosition),[n]});pt(Lt,Lt,(n,e,t)=>{if(n.splitPosition.isEqual(e.splitPosition)){if(!n.graveyardPosition&&!e.graveyardPosition)return[new qn(0)];if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition))return[new qn(0)];if(t.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e),[n]}if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition)){const i=n.splitPosition.root.rootName=="$graveyard",s=e.splitPosition.root.rootName=="$graveyard";if(s&&!i||!(i&&!s)&&t.aIsStrong){const c=[];return e.howMany&&c.push(new At(e.moveTargetPosition,e.howMany,e.splitPosition,0)),n.howMany&&c.push(new At(n.splitPosition,n.howMany,n.moveTargetPosition,0)),c}else return[new qn(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e)),n.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return n.howMany++,[n];if(e.splitPosition.isEqual(n.insertionPosition)&&t.baRelation=="splitBefore"){const i=e.insertionPosition.path.slice();i.push(0);const s=new le(e.insertionPosition.root,i),r=new At(n.insertionPosition,1,s,0);return[n,r]}return n.splitPosition.hasSameParentAs(e.splitPosition)&&n.splitPosition.offset<e.splitPosition.offset&&(n.howMany-=e.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(e),n.insertionPosition=Lt.getInsertionPosition(n.splitPosition),[n]});function HO(n,e){return n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function Zu(n,e){const t=[];for(let i=0;i<n.length;i++){const s=n[i],r=new At(s.start,s.end.offset-s.start.offset,e,0);t.push(r);for(let o=i+1;o<n.length;o++)n[o]=n[o]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];e=e._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return t}class Xt extends Ot(le){constructor(e,t,i="toNone"){if(super(e,t,i),!this.root.is("rootElement"))throw new D("model-liveposition-root-not-rootelement",e);Ipe.call(this)}detach(){this.stopListening()}toPosition(){return new le(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}}Xt.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};function Ipe(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{const t=e[0];t.isDocumentOperation&&Rpe.call(this,t)},{priority:"low"})}function Rpe(n){const e=this.getTransformedByOperation(n);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}class Tu{operations;isUndoable;isLocal;isUndo;isTyping;constructor(e={}){typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},lt("batch-constructor-deprecated-string-type"));const{isUndoable:t=!0,isLocal:i=!0,isUndo:s=!1,isTyping:r=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=i,this.isUndo=s,this.isTyping=r}get baseVersion(){for(const e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.isDocumentOperation&&(e.batch=this,this.operations.push(e)),e}}class Cw{static _statesPriority=[void 0,"refresh","rename","move"];_markerCollection;_changesInElement=new Map;_elementsSnapshots=new Map;_elementChildrenSnapshots=new Map;_elementState=new Map;_changedMarkers=new Map;_changedRoots=new Map;_changeCount=0;_cachedChanges=null;_cachedChangesWithGraveyard=null;_refreshedItems=new Set;constructor(e){this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){const t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const i of t.range.getItems({shallow:!0}))this._isInInsertedElement(i.parent)||this._markAttribute(i);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;const i=this._isInInsertedElement(t.sourcePosition.parent),s=this._isInInsertedElement(t.targetPosition.parent);i||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),s||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);const r=Q._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const o of r.getItems({shallow:!0}))this._setElementState(o,"move");break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);const i=Q._createFromPositionAndShift(t.position,1);for(const s of this._markerCollection.getMarkersIntersectingRange(i)){const r=s.getData();this.bufferMarkerChange(s.name,r,r)}this._setElementState(t.position.nodeAfter,"rename");break}case"split":{const i=t.splitPosition.parent;if(!this._isInInsertedElement(i)){this._markRemove(i,t.splitPosition.offset,t.howMany);const s=Q._createFromPositionAndShift(t.splitPosition,t.howMany);for(const r of s.getItems({shallow:!0}))this._setElementState(r,"move")}this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&(this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1),this._setElementState(t.graveyardPosition.nodeAfter,"move"));break}case"merge":{const i=t.sourcePosition.parent;this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1);const s=t.graveyardPosition.parent;this._markInsert(s,t.graveyardPosition.offset,1),this._setElementState(i,"move");const r=t.targetPosition.parent;if(!this._isInInsertedElement(r)){this._markInsert(r,t.targetPosition.offset,i.maxOffset);const o=Q._createFromPositionAndShift(t.sourcePosition,t.howMany);for(const a of o.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{const i=t.affectedSelectable;if(!i._isLoaded||i.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;const i=t.root.rootName;this._bufferRootAttributeChange(i,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,i){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),i.range&&i.range.root.is("rootElement")&&!i.range.root._isLoaded&&(i.range=null);let s=this._changedMarkers.get(e);s?s.newMarkerData=i:(s={newMarkerData:i,oldMarkerData:t},this._changedMarkers.set(e,s)),s.oldMarkerData.range==null&&i.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){const e=[];for(const[t,i]of this._changedMarkers)i.oldMarkerData.range!=null&&e.push({name:t,range:i.oldMarkerData.range});return e}getMarkersToAdd(){const e=[];for(const[t,i]of this._changedMarkers)i.newMarkerData.range!=null&&e.push({name:t,range:i.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){const i=e.range&&!t.range,s=!e.range&&t.range,r=e.range&&t.range&&!e.range.isEqual(t.range);if(i||s||r)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(const i of this._changesInElement.keys()){const s=this._changesInElement.get(i).sort((h,m)=>h.offset===m.offset?h.type!=m.type?h.type=="remove"?-1:1:0:h.offset<m.offset?-1:1),r=this._elementChildrenSnapshots.get(i),o=$O(i.getChildren()),a=Ppe(r.length,s);let c=0,d=0;for(const h of a)if(h==="i"){const m=this._getDiffActionForNode(o[c].node,"insert"),p=this._elementsSnapshots.get(o[c].node),w=this._getInsertDiff(i,c,m,o[c],p);t.push(w),c++}else if(h==="r"){const m=this._getDiffActionForNode(r[d].node,"remove"),p=this._getRemoveDiff(i,c,m,r[d]);t.push(p),d++}else if(h==="a"){const m=r[d].attributes,p=o[c].attributes;let w;if(o[c].name=="$text")w=new Q(le._createAt(i,c),le._createAt(i,c+1));else{const C=i.offsetToIndex(c);w=new Q(le._createAt(i,c),le._createAt(i.getChild(C),0))}const A=this._getAttributesDiff(w,m,p);t.push(...A),c++,d++}else c++,d++}t.sort((i,s)=>i.position.root!=s.position.root?i.position.root.rootName<s.position.root.rootName?-1:1:i.position.isEqual(s.position)?i.changeCount-s.changeCount:i.position.isBefore(s.position)?-1:1);for(let i=1,s=0;i<t.length;i++){const r=t[s],o=t[i],a=r.type=="remove"&&o.type=="remove"&&r.name=="$text"&&o.name=="$text"&&r.position.isEqual(o.position),c=r.type=="insert"&&o.type=="insert"&&r.name=="$text"&&o.name=="$text"&&r.position.parent==o.position.parent&&r.position.offset+r.length==o.position.offset,d=r.type=="attribute"&&o.type=="attribute"&&r.position.parent==o.position.parent&&r.range.isFlat&&o.range.isFlat&&r.position.offset+r.length==o.position.offset&&r.attributeKey==o.attributeKey&&r.attributeOldValue==o.attributeOldValue&&r.attributeNewValue==o.attributeNewValue;a||c||d?(r.length++,d&&(r.range.end=r.range.end.getShiftedBy(1)),t[i]=null):s=i}t=t.filter(i=>i);for(const i of t)delete i.changeCount,i.type=="attribute"&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(Ope),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{const t={...e};return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e),this._setElementState(e,"refresh");const t=Q._createOn(e);for(const i of this._markerCollection.getMarkersIntersectingRange(t)){const s=i.getData();this.bufferMarkerChange(i.name,s,s)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(const t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(const t of this._markerCollection)if(t.getRange().root==e){const i=t.getData();this.bufferMarkerChange(t.name,{...i,range:null},i)}}}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});return}const i=this._changedRoots.get(e);i.state!==void 0?(delete i.state,i.attributes===void 0&&this._changedRoots.delete(e)):i.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,i,s){const r=this._changedRoots.get(e)||{name:e},o=r.attributes||{};if(o[t]){const a=o[t];s===a.oldValue?delete o[t]:a.newValue=s}else o[t]={oldValue:i,newValue:s};Object.entries(o).length===0?(delete r.attributes,r.state===void 0&&this._changedRoots.delete(e)):(r.attributes=o,this._changedRoots.set(e,r))}_markInsert(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const s={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,s)}_markRemove(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const s={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,s),this._removeAllNestedChanges(e,t,i)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;const t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshots(e);const i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(let s=0;s<i.length;s++)i[s].howMany<1&&(i.splice(s,1),s--)}_setElementState(e,t){if(!e.is("element"))return;const i=Cw._statesPriority.indexOf(this._elementState.get(e));Cw._statesPriority.indexOf(t)>i&&this._elementState.set(e,t)}_getDiffActionForNode(e,t){if(!e.is("element")||!this._elementsSnapshots.has(e))return t;const i=this._elementState.get(e);return!i||i=="move"?t:i}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshots(e){if(this._elementChildrenSnapshots.has(e))return;const t=$O(e.getChildren());this._elementChildrenSnapshots.set(e,t);for(const i of t)this._elementsSnapshots.set(i.node,i)}_handleChange(e,t){e.nodesToHandle=e.howMany;for(const i of t){const s=e.offset+e.howMany,r=i.offset+i.howMany;if(e.type=="insert"&&(i.type=="insert"&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<r&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),i.type=="remove"&&e.offset<i.offset&&(i.offset+=e.howMany),i.type=="attribute")){if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<r){const o=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:s,howMany:o-i.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(i.type=="insert"){if(s<=i.offset)i.offset-=e.howMany;else if(s<=r)if(e.offset<i.offset){const o=s-i.offset;i.offset=e.offset,i.howMany-=o,e.nodesToHandle-=o}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<r){const o=r-e.offset;i.howMany-=o,e.nodesToHandle-=o}}if(i.type=="remove"&&(s<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),i.type=="attribute"){if(s<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){const o=s-i.offset;i.offset=e.offset,i.howMany-=o}else if(e.offset<r)if(s<=r){const o=i.howMany;i.howMany=e.offset-i.offset;const a=o-i.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else i.howMany-=r-e.offset}}if(e.type=="attribute"){if(i.type=="insert")if(e.offset<i.offset&&s>i.offset){if(s>r){const o={type:"attribute",offset:r,howMany:s-r,count:this._changeCount++};this._handleChange(o,t),t.push(o)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<r&&(s>r?(e.nodesToHandle=s-r,e.offset=r):e.nodesToHandle=0);if(i.type=="remove"&&e.offset<i.offset&&s>i.offset){const o={type:"attribute",offset:i.offset,howMany:s-i.offset,count:this._changeCount++};this._handleChange(o,t),t.push(o),e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}i.type=="attribute"&&(e.offset>=i.offset&&s<=r?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&s>=r&&(i.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,i,s,r){const o={type:"insert",position:le._createAt(e,t),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++,action:i};return i!="insert"&&r&&(o.before={name:r.name,attributes:new Map(r.attributes)}),o}_getRemoveDiff(e,t,i,s){return{type:"remove",action:i,position:le._createAt(e,t),name:s.name,attributes:new Map(s.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,i){const s=[];i=new Map(i);for(const[r,o]of t){const a=i.has(r)?i.get(r):null;a!==o&&s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:r,attributeOldValue:o,attributeNewValue:a,changeCount:this._changeCount++}),i.delete(r)}for(const[r,o]of i)s.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:r,attributeOldValue:null,attributeNewValue:o,changeCount:this._changeCount++});return s}_isInInsertedElement(e){const t=e.parent;if(!t)return!1;const i=this._changesInElement.get(t),s=e.startOffset;if(i){for(const r of i)if(r.type=="insert"&&s>=r.offset&&s<r.offset+r.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,i){const s=new Q(le._createAt(e,t),le._createAt(e,t+i));for(const r of s.getItems({shallow:!0}))r.is("element")&&(this._changesInElement.delete(r),this._removeAllNestedChanges(r,0,r.maxOffset))}}function WO(n){return{node:n,name:n.is("$text")?"$text":n.name,attributes:new Map(n.getAttributes())}}function $O(n){const e=[];for(const t of n)if(t.is("$text"))for(let i=0;i<t.data.length;++i)e.push(WO(t));else e.push(WO(t));return e}function Ppe(n,e){const t=[];let i=0,s=0;for(const r of e){if(r.offset>i){for(let o=0;o<r.offset-i;o++)t.push("e");s+=r.offset-i}if(r.type=="insert"){for(let o=0;o<r.howMany;o++)t.push("i");i=r.offset+r.howMany}else if(r.type=="remove"){for(let o=0;o<r.howMany;o++)t.push("r");i=r.offset,s+=r.howMany}else{if(r.howMany>1500)for(let o=0;o<r.howMany;o++)t.push("a");else t.push(..."a".repeat(r.howMany).split(""));i=r.offset+r.howMany,s+=r.howMany}}if(s<n)for(let r=0;r<n-s-i;r++)t.push("e");return t}function Ope(n){const e="position"in n&&n.position.root.rootName=="$graveyard",t="range"in n&&n.range.root.rootName=="$graveyard";return!e&&!t}class Dpe{_operations=[];_undoPairs=new Map;_undoneOperations=new Set;_baseVersionToOperationIndex=new Map;_version=0;_gaps=new Map;get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new D("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];const i=this._operations[0];e===void 0&&(e=i.baseVersion);let s=t-1;for(const[a,c]of this._gaps)e>a&&e<c&&(e=c),s>a&&s<c&&(s=a-1);if(s<i.baseVersion||e>this.lastOperation.baseVersion)return[];let r=this._baseVersionToOperationIndex.get(e);r===void 0&&(r=0);let o=this._baseVersionToOperationIndex.get(s);return o===void 0&&(o=this._operations.length-1),this._operations.slice(r,o+1)}getOperation(e){const t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class xw extends Vt{rootName;_document;_isAttached=!0;_isLoaded=!0;constructor(e,t,i="main"){super(t),this._document=e,this.rootName=i}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}xw.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};const GO="$graveyard";class Mpe extends Ot(){model;history;selection;roots;differ;isReadOnly;_postFixers;_hasSelectionChangedFromTheLastChangeBlock;constructor(e){super(),this.model=e,this.history=new Dpe,this.selection=new Tr(this),this.roots=new Wn({idProperty:"rootName"}),this.differ=new Cw(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",GO),this.listenTo(e,"applyOperation",(t,i)=>{const s=i[0];s.isDocumentOperation&&this.differ.bufferOperation(s)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,i)=>{const s=i[0];s.isDocumentOperation&&this.history.addOperation(s)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,i,s,r,o)=>{const a={...i.getData(),range:r};this.differ.bufferMarkerChange(i.name,o,a),s===null&&i.on("change",(c,d)=>{const h=i.getData();this.differ.bufferMarkerChange(i.name,{...h,range:d},h)})}),this.registerPostFixer(t=>{let i=!1;for(const s of this.roots)!s.isAttached()&&!s.isEmpty&&(t.remove(t.createRangeIn(s)),i=!0);for(const s of this.model.markers)s.getRange().root.isAttached()||(t.removeMarker(s),i=!0);return i})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(GO)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new D("model-document-createroot-name-exists",this,{name:t});const i=new xw(this,e,t);return this.roots.add(i),i}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(t=>t.rootName)}getRoots(e=!1){return this.roots.filter(t=>t!=this.graveyard&&(e||t.isAttached())&&t._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){const e=lfe(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){const e=this._getDefaultRoot(),t=this.model,i=t.schema,s=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(s)||t.createRange(s)}_validateSelectionRange(e){return e.start.isValid()&&e.end.isValid()&&YO(e.start)&&YO(e.end)}_callPostFixers(e){let t=!1;do for(const i of this._postFixers)if(this.selection.refresh(),t=i(e),t)break;while(t)}}function YO(n){const e=n.textNode;if(e){const t=e.data,i=n.offset-e.startOffset;return!SE(t,i)&&!TE(t,i)}return!0}class Bpe extends Ot(){_markers=new Map;[Symbol.iterator](){return this._markers.values()}has(e){const t=e instanceof Uu?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,i=!1,s=!1){const r=e instanceof Uu?e.name:e;if(r.includes(","))throw new D("markercollection-incorrect-marker-name",this);const o=this._markers.get(r);if(o){const d=o.getData(),h=o.getRange();let m=!1;return h.isEqual(t)||(o._attachLiveRange(Bi.fromRange(t)),m=!0),i!=o.managedUsingOperations&&(o._managedUsingOperations=i,m=!0),typeof s=="boolean"&&s!=o.affectsData&&(o._affectsData=s,m=!0),m&&this.fire(`update:${r}`,o,h,t,d),o}const a=Bi.fromRange(t),c=new Uu(r,a,i,s);return this._markers.set(r,c),this.fire(`update:${r}`,c,null,t,{...c.getData(),range:null}),c}_remove(e){const t=e instanceof Uu?e.name:e,i=this._markers.get(t);return i?(this._markers.delete(t),this.fire(`update:${t}`,i,i.getRange(),null,i.getData()),this._destroyMarker(i),!0):!1}_refresh(e){const t=e instanceof Uu?e.name:e,i=this._markers.get(t);if(!i)throw new D("markercollection-refresh-marker-not-exists",this);const s=i.getRange();this.fire(`update:${t}`,i,s,s,i.getData())}*getMarkersAtPosition(e){for(const t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(const t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(const e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(const t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}}class Uu extends Ot(Al){name;_managedUsingOperations;_affectsData;_liveRange;constructor(e,t,i,s){super(),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=s}get managedUsingOperations(){if(!this._liveRange)throw new D("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new D("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new D("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new D("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new D("marker-destroyed",this);return this._liveRange.toRange()}toJSON(){return{name:this.name,range:this._liveRange?.toJSON(),usingOperations:this._managedUsingOperations,affectsData:this._affectsData}}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Uu.prototype.is=function(n){return n==="marker"||n==="model:marker"};class Npe extends Rs{sourcePosition;howMany;constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new D("detach-operation-on-document-node",this)}_execute(){r8(Q._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class Hr extends Al{markers=new Map;_children=new _h;constructor(e){super(),e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(const i of e)t=t.getChildAtOffset(i);return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){const e=[];for(const t of this._children)e.push(t.toJSON());return e}static fromJSON(e){const t=[];for(const i of e)i.name?t.push(Vt.fromJSON(i)):t.push(Wt.fromJSON(i));return new Hr(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){const i=Vpe(t);for(const s of i)s.parent!==null&&s._remove(),s.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){const i=this._children._removeNodes(e,t);for(const s of i)s.parent=null;return i}_removeChildrenArray(e){this._children._removeNodesArray(e);for(const t of e)t.parent=null}}Hr.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};function Vpe(n){return typeof n=="string"?[new Wt(n)]:(Is(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new Wt(e):e instanceof wr?new Wt(e.data,e.getAttributes()):e))}class Lpe{model;batch;constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new Wt(e,t)}createElement(e,t){return new Vt(e,t)}createDocumentFragment(){return new Hr}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,i=0){if(this._assertWriterUsedCorrectly(),e instanceof Wt&&e.data=="")return;const s=le._createAt(t,i);if(e.parent)if(QO(e.root,s.root)){this.move(Q._createOn(e),s);return}else{if(e.root.document)throw new D("model-writer-insert-forbidden-move",this);this.remove(e)}const r=s.root.document?s.root.document.version:null,o=e instanceof Hr?e._removeChildren(0,e.childCount):e,a=new ci(s,o,r);if(e instanceof Wt&&(a.shouldReceiveAttributes=!0),this.batch.addOperation(a),this.model.applyOperation(a),e instanceof Hr)for(const[c,d]of e.markers){const h=le._createAt(d.root,0),p={range:new Q(d.start._getCombined(h,s),d.end._getCombined(h,s)),usingOperation:!0,affectsData:!0};this.model.markers.has(c)?this.updateMarker(c,p):this.addMarker(c,p)}}insertText(e,t,i,s){t instanceof Hr||t instanceof Vt||t instanceof le?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,s)}insertElement(e,t,i,s){t instanceof Hr||t instanceof Vt||t instanceof le?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,s)}append(e,t){this.insert(e,t,"end")}appendText(e,t,i){t instanceof Hr||t instanceof Vt?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end")}appendElement(e,t,i){t instanceof Hr||t instanceof Vt?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end")}setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof Q){const s=i.getMinimalFlatRanges();for(const r of s)KO(this,e,t,r)}else qO(this,e,t,i)}setAttributes(e,t){for(const[i,s]of io(e))this.setAttribute(i,s,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof Q){const i=t.getMinimalFlatRanges();for(const s of i)KO(this,e,null,s)}else qO(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();const t=i=>{for(const s of i.getAttributeKeys())this.removeAttribute(s,i)};if(!(e instanceof Q))t(e);else for(const i of e.getItems())t(i)}move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof Q))throw new D("writer-move-invalid-range",this);if(!e.isFlat)throw new D("writer-move-range-not-flat",this);const s=le._createAt(t,i);if(s.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!QO(e.root,s.root))throw new D("writer-move-different-document",this);const r=e.root.document?e.root.document.version:null,o=new At(e.start,e.end.offset-e.start.offset,s,r);this.batch.addOperation(o),this.model.applyOperation(o)}remove(e){this._assertWriterUsedCorrectly();const i=(e instanceof Q?e:Q._createOn(e)).getMinimalFlatRanges().reverse();for(const s of i)this._addOperationForAffectedMarkers("move",s),Fpe(s.start,s.end.offset-s.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();const t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof Vt))throw new D("writer-merge-no-element-before",this);if(!(i instanceof Vt))throw new D("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){const t=e.nodeBefore,i=e.nodeAfter;this.move(Q._createIn(i),le._createAt(t,"end")),this.remove(i)}_merge(e){const t=le._createAt(e.nodeBefore,"end"),i=le._createAt(e.nodeAfter,0),s=e.root.document.graveyard,r=new le(s,[0]),o=e.root.document.version,a=new Cn(i,e.nodeAfter.maxOffset,t,r,o);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof Vt))throw new D("writer-rename-not-element-instance",this);const i=e.root.document?e.root.document.version:null,s=new as(le._createBefore(e),e.name,t,i);this.batch.addOperation(s),this.model.applyOperation(s)}split(e,t){this._assertWriterUsedCorrectly();let i=e.parent;if(!i.parent)throw new D("writer-split-element-no-parent",this);if(t||(t=i.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new D("writer-split-invalid-limit-element",this);let s,r;do{const o=i.root.document?i.root.document.version:null,a=i.maxOffset-e.offset,c=Lt.getInsertionPosition(e),d=new Lt(e,a,c,null,o);this.batch.addOperation(d),this.model.applyOperation(d),!s&&!r&&(s=i,r=e.parent.nextSibling),e=this.createPositionAfter(e.parent),i=e.parent}while(i!==t);return{position:e,range:new Q(le._createAt(s,"end"),le._createAt(r,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new D("writer-wrap-range-not-flat",this);const i=t instanceof Vt?t:new Vt(t);if(i.childCount>0)throw new D("writer-wrap-element-not-empty",this);if(i.parent!==null)throw new D("writer-wrap-element-attached",this);this.insert(i,e.start);const s=new Q(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(s,le._createAt(i,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new D("writer-unwrap-element-no-parent",this);this.move(Q._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new D("writer-addmarker-no-usingoperation",this);const i=t.usingOperation,s=t.range,r=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new D("writer-addmarker-marker-exists",this);if(!s)throw new D("writer-addmarker-no-range",this);return i?(Qf(this,e,null,s,r),this.model.markers.get(e)):this.model.markers._set(e,s,i,r)}updateMarker(e,t){this._assertWriterUsedCorrectly();const i=typeof e=="string"?e:e.name,s=this.model.markers.get(i);if(!s)throw new D("writer-updatemarker-marker-not-exists",this);if(!t){lt("writer-updatemarker-reconvert-using-editingcontroller",{markerName:i}),this.model.markers._refresh(s);return}const r=typeof t.usingOperation=="boolean",o=typeof t.affectsData=="boolean",a=o?t.affectsData:s.affectsData;if(!r&&!t.range&&!o)throw new D("writer-updatemarker-wrong-options",this);const c=s.getRange(),d=t.range?t.range:c;if(r&&t.usingOperation!==s.managedUsingOperations){t.usingOperation?Qf(this,i,null,d,a):(Qf(this,i,c,null,a),this.model.markers._set(i,d,void 0,a));return}s.managedUsingOperations?Qf(this,i,c,d,a):this.model.markers._set(i,d,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new D("writer-removemarker-no-marker",this);const i=this.model.markers.get(t);if(!i.managedUsingOperations){this.model.markers._remove(t);return}const s=i.getRange();Qf(this,t,s,null,i.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();const i=this.model.document.getRoot(e);if(i&&i.isAttached())throw new D("writer-addroot-root-exists",this);const s=this.model.document,r=new Qr(e,t,!0,s,s.version);return this.batch.addOperation(r),this.model.applyOperation(r),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();const t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new D("writer-detachroot-no-root",this);for(const r of this.model.markers)r.getRange().root===t&&this.removeMarker(r);for(const r of t.getAttributeKeys())this.removeAttribute(r,t);this.remove(this.createRangeIn(t));const i=this.model.document,s=new Qr(t.rootName,t.name,!1,i,i.version);this.batch.addOperation(s),this.model.applyOperation(s)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(const[i,s]of io(e))this._setSelectionAttribute(i,s)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(const t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){const i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){const s=Tr._getStoreAttributeKey(e);this.setAttribute(s,t,i.anchor.parent)}i._setAttribute(e,t)}_removeSelectionAttribute(e){const t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){const i=Tr._getStoreAttributeKey(e);this.removeAttribute(i,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new D("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(const i of this.model.markers){if(!i.managedUsingOperations)continue;const s=i.getRange();let r=!1;if(e==="move"){const o=t;r=o.containsPosition(s.start)||o.start.isEqual(s.start)||o.containsPosition(s.end)||o.end.isEqual(s.end)}else{const o=t,a=o.nodeBefore,c=o.nodeAfter,d=s.start.parent==a&&s.start.isAtEnd,h=s.end.parent==c&&s.end.offset==0,m=s.end.nodeAfter==c,p=s.start.nodeAfter==c;r=d||h||m||p}r&&this.updateMarker(i.name,{range:s})}}}function KO(n,e,t,i){const s=n.model,r=s.document;let o=i.start,a,c,d;for(const m of i.getWalker({shallow:!0}))d=m.item.getAttribute(e),a&&c!=d&&(c!=t&&h(),o=a),a=m.nextPosition,c=d;a instanceof le&&a!=o&&c!=t&&h();function h(){const m=new Q(o,a),p=m.root.document?r.version:null,w=new Pn(m,e,c,t,p);n.batch.addOperation(w),s.applyOperation(w)}}function qO(n,e,t,i){const s=n.model,r=s.document,o=i.getAttribute(e);let a,c;if(o!=t){if(i.root===i){const h=i.document?r.version:null;c=new ta(i,e,o,t,h)}else{a=new Q(le._createBefore(i),n.createPositionAfter(i));const h=a.root.document?r.version:null;c=new Pn(a,e,o,t,h)}n.batch.addOperation(c),s.applyOperation(c)}}function Qf(n,e,t,i,s){const r=n.model,o=r.document,a=new Ni(e,t,i,r.markers,!!s,o.version);n.batch.addOperation(a),r.applyOperation(a)}function Fpe(n,e,t,i){let s;if(n.root.document){const r=i.document,o=new le(r.graveyard,[0]);s=new At(n,e,o,r.version)}else s=new Npe(n,e);t.addOperation(s),i.applyOperation(s)}function QO(n,e){return n===e||n instanceof xw&&e instanceof xw}function zpe(n){n.document.registerPostFixer(e=>jpe(e,n))}function jpe(n,e){const t=e.document.selection,i=e.schema,s=[];let r=!1;for(const o of t.getRanges()){const a=LE(o,i);a&&!a.isEqual(o)?(s.push(a),r=!0):s.push(o)}return r&&n.setSelection($pe(s),{backward:t.isBackward}),!1}function LE(n,e){return n.isCollapsed?Upe(n,e):Hpe(n,e)}function Upe(n,e){const t=n.start,i=e.getNearestSelectionRange(t);if(!i){const r=t.getAncestors().reverse().find(o=>e.isObject(o));return r?Q._createOn(r):null}if(!i.isCollapsed)return i;const s=i.start;return t.isEqual(s)?null:new Q(s)}function Hpe(n,e){const{start:t,end:i}=n,s=e.checkChild(t,"$text"),r=e.checkChild(i,"$text"),o=e.getLimitElement(t),a=e.getLimitElement(i);if(o===a){if(s&&r)return null;if(Wpe(t,i,e)){const m=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),w=i.nodeBefore&&e.isSelectable(i.nodeBefore)?null:e.getNearestSelectionRange(i,"backward"),A=m?m.start:t,C=w?w.end:i;return new Q(A,C)}}const c=o&&!o.is("rootElement"),d=a&&!a.is("rootElement");if(c||d){const h=t.nodeAfter&&i.nodeBefore&&t.nodeAfter.parent===i.nodeBefore.parent,m=c&&(!h||!JO(t.nodeAfter,e)),p=d&&(!h||!JO(i.nodeBefore,e));let w=t,A=i;return m&&(w=le._createBefore(ZO(o,e))),p&&(A=le._createAfter(ZO(a,e))),new Q(w,A)}return null}function ZO(n,e){let t=n,i=t;for(;e.isLimit(i)&&i.parent;)t=i,i=i.parent;return t}function Wpe(n,e,t){const i=n.nodeAfter&&!t.isLimit(n.nodeAfter)||t.checkChild(n,"$text"),s=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return i||s}function $pe(n){const e=[...n],t=new Set;let i=1;for(;i<e.length;){const r=e[i],o=e.slice(0,i);for(const[a,c]of o.entries())if(!t.has(a)){if(r.isEqual(c))t.add(a);else if(r.isIntersecting(c)){t.add(a),t.add(i);const d=r.getJoined(c);e.push(d)}}i++}return e.filter((r,o)=>!t.has(o))}function JO(n,e){return n&&e.isSelectable(n)}function Gpe(n,e,t={}){if(e.isCollapsed)return;const i=e.getFirstRange();if(i.root.rootName=="$graveyard")return;const s=n.schema;n.change(r=>{if(!t.doNotResetEntireContent&&tbe(s,e)){ebe(r,e);return}const o={};if(!t.doNotAutoparagraph){const d=e.getSelectedElement();d&&Object.assign(o,s.getAttributesWithProperty(d,"copyOnReplace",!0))}let a,c;t.doNotFixSelection?(a=Xt.fromPosition(i.start,"toPrevious"),c=Xt.fromPosition(i.end,"toNext")):[a,c]=Ype(i),a.isTouching(c)||r.remove(r.createRange(a,c)),t.leaveUnmerged||(qpe(r,a,c),s.removeDisallowedAttributes(a.parent.getChildren(),r)),f8(r,e,a),!t.doNotAutoparagraph&&Jpe(s,a)&&d8(r,a,e,o),a.detach(),c.detach()})}function Ype(n){const e=n.root.document.model,t=n.start;let i=n.end;if(e.hasContent(n,{ignoreMarkers:!0})){const s=Kpe(i);if(s&&i.isTouching(e.createPositionAt(s,0))){const r=e.createSelection(n);e.modifySelection(r,{direction:"backward"});const o=r.getLastPosition(),a=e.createRange(o,i);e.hasContent(a,{ignoreMarkers:!0})||(i=o)}}return[Xt.fromPosition(t,"toPrevious"),Xt.fromPosition(i,"toNext")]}function Kpe(n){const e=n.parent,t=e.root.document.model.schema,i=e.getAncestors({parentFirst:!0,includeSelf:!0});for(const s of i){if(t.isLimit(s))return null;if(t.isBlock(s))return s}}function qpe(n,e,t){const i=n.model;if(!FE(n.model.schema,e,t))return;const[s,r]=Zpe(e,t);!s||!r||(!i.hasContent(s,{ignoreMarkers:!0})&&i.hasContent(r,{ignoreMarkers:!0})?u8(n,e,t,s.parent):c8(n,e,t,s.parent))}function c8(n,e,t,i){const s=e.parent,r=t.parent;if(!(s==i||r==i)){for(e=n.createPositionAfter(s),t=n.createPositionBefore(r),t.isEqual(e)||n.insert(r,e),n.merge(e);t.parent.isEmpty;){const o=t.parent;t=n.createPositionBefore(o),n.remove(o)}FE(n.model.schema,e,t)&&c8(n,e,t,i)}}function u8(n,e,t,i){const s=e.parent,r=t.parent;if(!(s==i||r==i)){for(e=n.createPositionAfter(s),t=n.createPositionBefore(r),t.isEqual(e)||n.insert(s,t);e.parent.isEmpty;){const o=e.parent;e=n.createPositionBefore(o),n.remove(o)}t=n.createPositionBefore(r),Qpe(n,t),FE(n.model.schema,e,t)&&u8(n,e,t,i)}}function Qpe(n,e){const t=e.nodeBefore,i=e.nodeAfter;t.name!=i.name&&n.rename(t,i.name),n.clearAttributes(t),n.setAttributes(Object.fromEntries(i.getAttributes()),t),n.merge(e)}function FE(n,e,t){const i=e.parent,s=t.parent;return i==s||n.isLimit(i)||n.isLimit(s)?!1:Xpe(e,t,n)}function Zpe(n,e){const t=n.getAncestors(),i=e.getAncestors();let s=0;for(;t[s]&&t[s]==i[s];)s++;return[t[s],i[s]]}function Jpe(n,e){const t=n.checkChild(e,"$text"),i=n.checkChild(e,"paragraph");return!t&&i}function Xpe(n,e,t){const i=new Q(n,e);for(const s of i.getWalker())if(t.isLimit(s.item))return!1;return!0}function d8(n,e,t,i={}){const s=n.createElement("paragraph");n.model.schema.setAllowedAttributes(s,i,n),n.insert(s,e),f8(n,t,n.createPositionAt(s,0))}function ebe(n,e){const t=n.model.schema.getLimitElement(e);n.remove(n.createRangeIn(t)),d8(n,n.createPositionAt(t,0),e)}function tbe(n,e){const t=n.getLimitElement(e);if(!e.containsEntireContent(t))return!1;const i=e.getFirstRange();return i.start.parent==i.end.parent?!1:n.checkChild(t,"paragraph")}function f8(n,e,t){e instanceof Tr?n.setSelection(t):e.setTo(t)}function nbe(n,e){return n.change(t=>{const i=t.createDocumentFragment(),s=e.getFirstRange();if(!s||s.isCollapsed)return i;const r=s.start.root,o=s.start.getCommonPath(s.end),a=r.getNodeByPath(o);let c;s.start.parent==s.end.parent?c=s:c=t.createRange(t.createPositionAt(a,s.start.path[o.length]),t.createPositionAt(a,s.end.path[o.length]+1));const d=c.end.offset-c.start.offset;for(const h of c.getItems({shallow:!0}))h.is("$textProxy")?t.appendText(h.data,h.getAttributes(),i):t.append(t.cloneElement(h,!0),i);if(c!=s){const h=s._getTransformedByMove(c.start,t.createPositionAt(i,0),d)[0],m=t.createRange(t.createPositionAt(i,0),h.start),p=t.createRange(h.end,t.createPositionAt(i,"end"));XO(p,t),XO(m,t)}return i})}function XO(n,e){const t=[];Array.from(n.getItems({direction:"backward"})).map(i=>e.createRangeOn(i)).filter(i=>(i.start.isAfter(n.start)||i.start.isEqual(n.start))&&(i.end.isBefore(n.end)||i.end.isEqual(n.end))).forEach(i=>{t.push(i.start.parent),e.remove(i)}),t.forEach(i=>{let s=i;for(;s.parent&&s.isEmpty;){const r=e.createRangeOn(s);s=s.parent,e.remove(r)}})}function ibe(n,e,t){return n.change(i=>{const s=t||n.document.selection;s.isCollapsed||n.deleteContent(s,{doNotAutoparagraph:!0});const r=new sbe(n,i,s.anchor),o=[];let a;if(e.is("documentFragment")){if(e.markers.size){const h=[];for(const[m,p]of e.markers){const{start:w,end:A}=p,C=w.isEqual(A);h.push({position:w,name:m,isCollapsed:C},{position:A,name:m,isCollapsed:C})}h.sort(({position:m},{position:p})=>m.isBefore(p)?1:-1);for(const{position:m,name:p,isCollapsed:w}of h){let A=null,C=null;const k=m.parent===e&&m.isAtStart,E=m.parent===e&&m.isAtEnd;!k&&!E?(A=i.createElement("$marker"),i.insert(A,m)):w&&(C=k?"start":"end"),o.push({name:p,element:A,collapsed:C})}}a=e.getChildren()}else a=[e];r.handleNodes(a);let c=r.getSelectionRange();if(e.is("documentFragment")&&o.length){const h=c?Bi.fromRange(c):null,m={};for(let p=o.length-1;p>=0;p--){const{name:w,element:A,collapsed:C}=o[p],k=!m[w];if(k&&(m[w]=[]),A){const E=i.createPositionAt(A,"before");m[w].push(E),i.remove(A)}else{const E=r.getAffectedRange();if(!E){C&&m[w].push(r.position);continue}C?m[w].push(E[C]):m[w].push(k?E.start:E.end)}}for(const[p,[w,A]]of Object.entries(m))w&&A&&w.root===A.root&&w.root.document&&!i.model.markers.has(p)&&i.addMarker(p,{usingOperation:!0,affectsData:!0,range:new Q(w,A)});h&&(c=h.toRange(),h.detach())}c&&(s instanceof Tr?i.setSelection(c):s.setTo(c));const d=r.getAffectedRange()||n.createRange(s.anchor);return r.destroy(),d})}class sbe{model;writer;position;canMergeWith;schema;_documentFragment;_documentFragmentPosition;_firstNode=null;_lastNode=null;_lastAutoParagraph=null;_filterAttributesAndChildrenOf=[];_affectedStart=null;_affectedEnd=null;_nodeToSelect=null;constructor(e,t,i){this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(const t of Array.from(e))t.offsetSize>0&&this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesAndChildrenOf,this.writer),this.model._config?.get("experimentalFlags.modelInsertContentDeepSchemaVerification")&&this._removeDisallowedChildren(this._filterAttributesAndChildrenOf),this._filterAttributesAndChildrenOf=[]}_removeDisallowedChildren(e){const t=Array.from(e);for(const i of t){if(!i.is("element"))continue;const s=[],r=[],o=this.writer.createRangeIn(i).getWalker({ignoreElementEnd:!0});for(const{item:a}of o){const c=a.parent;this.schema.checkChild(c,a)||(a.is("element")&&!this.schema.isObject(a)?(r.push(a),t.push(c)):s.push(a),o.jumpTo(this.writer.createPositionAfter(a)))}for(const a of r)this.writer.unwrap(a);for(const a of s)this.writer.remove(a)}}_updateLastNodeFromAutoParagraph(e){const t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){this._lastNode=e;if(this.position.parent!=e||!this.position.isAtEnd)throw new D("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?Q._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new Q(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(!this._checkAndSplitToAllowedPosition(e)){this.schema.isObject(e)||this._handleDisallowedNode(e);return}e=this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const e=Xt.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleDisallowedNode(e){e.is("element")&&this.handleNodes(e.getChildren())}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new D("insertcontent-wrong-position",this,{node:e,position:this.position});return this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),e.parent||(e=this._documentFragmentPosition.nodeBefore),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesAndChildrenOf.push(e),e}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Xt.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Xt.fromPosition(e,"toNext"))}_mergeOnLeft(){const e=this._firstNode;if(!(e instanceof Vt)||!this._canMergeLeft(e))return;const t=Xt._createBefore(e);t.stickiness="toNext";const i=Xt.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Xt._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Xt._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesAndChildrenOf.push(this.position.parent),t.detach()}_mergeOnRight(){const e=this._lastNode;if(!(e instanceof Vt)||!this._canMergeRight(e))return;const t=Xt._createAfter(e);t.stickiness="toNext";if(!this.position.isEqual(t))throw new D("insertcontent-invalid-insertion-position",this);this.position=le._createAt(t.nodeBefore,"end");const i=Xt.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=Xt._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Xt._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesAndChildrenOf.push(this.position.parent),t.detach()}_canMergeLeft(e){const t=e.previousSibling;return t instanceof Vt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){const t=e.nextSibling;return t instanceof Vt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_insertAutoParagraph(){this._insertPartialFragment();const e=this.writer.createElement("paragraph");this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0)}_checkAndSplitToAllowedPosition(e){const t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){const i=this.position.parent;this.position=this.writer.createPositionBefore(i),i.isEmpty&&i.parent===t&&this.writer.remove(i)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,e)||this._insertAutoParagraph(),!0}_getAllowedIn(e,t){const i=this.schema.createContext(e);return this.schema.checkChild(i,t)||this.schema.checkChild(i,"paragraph")&&this.schema.checkChild(i.push("paragraph"),t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}}function rbe(n,e,t,i={}){if(!n.schema.isObject(e))throw new D("insertobject-element-not-an-object",n,{object:e});const s=t||n.document.selection;let r=s;i.findOptimalPosition&&n.schema.isBlock(e)&&(r=n.createSelection(n.schema.findOptimalInsertionRange(s,i.findOptimalPosition)));const o=qt(s.getSelectedBlocks()),a={};return o&&Object.assign(a,n.schema.getAttributesWithProperty(o,"copyOnReplace",!0)),n.change(c=>{r.isCollapsed||n.deleteContent(r,{doNotAutoparagraph:!0});let d=e;const h=r.anchor.parent,m=n.schema.createContext(h);!n.schema.checkChild(m,e)&&n.schema.checkChild(m,"paragraph")&&n.schema.checkChild(m.push("paragraph"),e)&&(d=c.createElement("paragraph"),c.insert(e,d)),n.schema.setAllowedAttributes(d,a,c);const p=n.insertContent(d,r);return p.isCollapsed||i.setSelection&&obe(c,e,i.setSelection,a),p})}function obe(n,e,t,i){const s=n.model;if(t=="on"){n.setSelection(e,"on");return}if(t!="after")throw new D("insertobject-invalid-place-parameter-value",s);let r=e.nextSibling;if(s.schema.isInline(e)){n.setSelection(e,"after");return}!(r&&s.schema.checkChild(r,"$text"))&&s.schema.checkChild(e.parent,"paragraph")&&(r=n.createElement("paragraph"),s.schema.setAllowedAttributes(r,i,n),s.insertContent(r,n.createPositionAfter(e))),r&&n.setSelection(r,0)}const abe=' ,.?!:;"-()';function lbe(n,e,t={}){const i=n.schema,s=t.direction!="backward",r=t.unit?t.unit:"character",o=!!t.treatEmojiAsSingleUnit,a=e.focus,c=new qo({boundaries:fbe(a,s),singleCharacters:!0,direction:s?"forward":"backward"}),d={walker:c,schema:i,isForward:s,unit:r,treatEmojiAsSingleUnit:o};let h;for(;h=c.next();){if(h.done)return;const m=cbe(d,h.value);if(m){e instanceof Tr?n.change(p=>{p.setSelectionFocus(m)}):e.setFocus(m);return}}}function cbe(n,e){const{isForward:t,walker:i,unit:s,schema:r,treatEmojiAsSingleUnit:o}=n,{type:a,item:c,nextPosition:d}=e;if(a=="text")return n.unit==="word"?dbe(i,t):ube(i,s,o);if(a==(t?"elementStart":"elementEnd")){if(r.isSelectable(c))return le._createAt(c,t?"after":"before");if(r.checkChild(d,"$text"))return d}else{if(r.isLimit(c)){i.skip(()=>!0);return}if(r.checkChild(d,"$text"))return d}}function ube(n,e,t){const i=n.position.textNode;if(i){const s=i.data;let r=n.position.offset-i.startOffset;for(;SE(s,r)||e=="character"&&TE(s,r)||t&&x6(s,r);)n.next(),r=n.position.offset-i.startOffset}return n.position}function dbe(n,e){let t=n.position.textNode;for(t||(t=e?n.position.nodeAfter:n.position.nodeBefore);t&&t.is("$text");){const i=n.position.offset-t.startOffset;if(mbe(t,i,e))t=e?n.position.nodeAfter:n.position.nodeBefore;else{if(hbe(t.data,i,e))break;n.next()}}return n.position}function fbe(n,e){const t=n.root,i=le._createAt(t,e?"end":0);return e?new Q(n,i):new Q(i,n)}function hbe(n,e,t){const i=e+(t?0:-1);return abe.includes(n.charAt(i))}function mbe(n,e,t){return e===(t?n.offsetSize:0)}class gbe extends kt(){markers;document;schema;_config;_pendingChanges;_currentWriter;constructor(e){super(),this.markers=new Bpe,this.document=new Mpe(this),this.schema=new Jge,this._config=e,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(t=>this.decorate(t)),this.on("applyOperation",(t,i)=>{i[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),zpe(this),this.document.registerPostFixer(J6),this.on("insertContent",(t,[i,s])=>{t.return=ibe(this,i,s)}),this.on("insertObject",(t,[i,s,r])=>{t.return=rbe(this,i,s,r)}),this.on("canEditAt",t=>{const i=!this.document.isReadOnly;t.return=i,i||t.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Tu,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){D.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new Tu):e instanceof Tu||(e=new Tu(e)):e=new Tu,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(i){D.rethrowUnexpectedError(i,this)}}applyOperation(e){e._execute()}insertContent(e,t,i,...s){const r=N_(t,i);return this.fire("insertContent",[e,r,i,...s])}insertObject(e,t,i,s,...r){const o=N_(t,i);return this.fire("insertObject",[e,o,s,s,...r])}deleteContent(e,t){Gpe(this,e,t)}modifySelection(e,t){lbe(this,e,t)}getSelectedContent(e){return nbe(this,e)}hasContent(e,t={}){const i=e instanceof Q?e:Q._createIn(e);if(i.isCollapsed)return!1;const{ignoreWhitespaces:s=!1,ignoreMarkers:r=!1}=t;if(!r){for(const o of this.markers.getMarkersIntersectingRange(i))if(o.affectsData)return!0}for(const o of i.getItems())if(this.schema.isContent(o))if(o.is("$textProxy"))if(s){if(o.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){const t=N_(e);return this.fire("canEditAt",[t])}createPositionFromPath(e,t,i){return new le(e,t,i)}createPositionAt(e,t){return le._createAt(e,t)}createPositionAfter(e){return le._createAfter(e)}createPositionBefore(e){return le._createBefore(e)}createRange(e,t){return new Q(e,t)}createRangeIn(e){return Q._createIn(e)}createRangeOn(e){return Q._createOn(e)}createSelection(...e){return new Cs(...e)}createBatch(e){return new Tu(e)}createOperationFromJSON(e){return Cpe.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const t=this._pendingChanges[0].batch;this._currentWriter=new Lpe(this,t);const i=this._pendingChanges[0].callback(this._currentWriter);e.push(i),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}}function N_(n,e){if(n)return n instanceof Cs||n instanceof Tr?n:n instanceof Ec?e||e===0?new Cs(n,e):n.is("rootElement")?new Cs(n,"in"):new Cs(n,"on"):new Cs(n)}class pbe extends Mr{domEventType="click";onDomEvent(e){this.fire(e.type,e)}}class zE extends Mr{domEventType=["mousedown","mouseup","mouseover","mouseout"];onDomEvent(e){this.fire(e.type,e)}}class bbe extends Mr{domEventType=["touchstart","touchend","touchmove"];onDomEvent(e){this.fire(e.type,e)}}class h8 extends Mr{domEventType=["pointerdown","pointerup","pointermove"];onDomEvent(e){this.fire(e.type,e)}}class sr{document;constructor(e){this.document=e}createDocumentFragment(e){return new ic(this.document,e)}createElement(e,t,i){return new Sr(this.document,e,t,i)}createText(e){return new Hn(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,i){return i._insertChild(e,t)}removeChildren(e,t,i){return i._removeChildren(e,t)}remove(e){const t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){const i=e.parent;if(i){const s=i.getChildIndex(e);return this.removeChildren(s,1,i),this.insertChild(s,t,i),!0}return!1}unwrapElement(e){const t=e.parent;if(t){const i=t.getChildIndex(e);this.remove(e),this.insertChild(i,e.getChildren(),t)}}rename(e,t){const i=new Sr(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,i)?i:null}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){pr(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return ge._createAt(e,t)}createPositionAfter(e){return ge._createAfter(e)}createPositionBefore(e){return ge._createBefore(e)}createRange(e,t){return new We(e,t)}createRangeOn(e){return We._createOn(e)}createRangeIn(e){return We._createIn(e)}createSelection(...e){return new vr(...e)}}const wbe=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,vbe=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,ybe=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Abe=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,_be=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,Cbe=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,xbe=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function m8(n){return n.startsWith("#")?wbe.test(n):n.startsWith("rgb")?vbe.test(n)||ybe.test(n):n.startsWith("hsl")?Abe.test(n)||_be.test(n):xbe.has(n.toLowerCase())}const kbe=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function Ebe(n){return kbe.includes(n)}const Sbe=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function jE(n){return Sbe.test(n)}const Tbe=/^[+-]?[0-9]*([.][0-9]+)?%$/;function Ibe(n){return Tbe.test(n)}const Rbe=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function Pbe(n){return Rbe.includes(n)}const Obe=["center","top","bottom","left","right"];function Dbe(n){return Obe.includes(n)}const Mbe=["fixed","scroll","local"];function Bbe(n){return Mbe.includes(n)}const Nbe=/^url\(/;function Vbe(n){return Nbe.test(n)}function Ch(n=""){if(n==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const e=UE(n),t=e[0],i=e[2]||t,s=e[1]||t,r=e[3]||s;return{top:t,bottom:i,right:s,left:r}}function xh(n){return e=>{const{top:t,right:i,bottom:s,left:r}=e,o=[];return[t,i,r,s].every(a=>!!a)?o.push([n,Lbe(e)]):(t&&o.push([n+"-top",t]),i&&o.push([n+"-right",i]),s&&o.push([n+"-bottom",s]),r&&o.push([n+"-left",r])),o}}function Lbe({top:n,right:e,bottom:t,left:i}){const s=[];return i!==e?s.push(n,e,t,i):t!==n?s.push(n,e,t):e!==n?s.push(n,e):s.push(n),s.join(" ")}function g8(n){return e=>({path:n,value:Ch(e)})}function UE(n){const e=n.trim().slice(0,1500).matchAll(Cbe);return Array.from(e).map(t=>t[0])}function p8(n){n.setNormalizer("background",Fbe()),n.setNormalizer("background-color",zbe()),n.setReducer("background",jbe()),n.setStyleRelation("background",["background-color"])}function Fbe(){return n=>{const e={},t=UE(n);for(const i of t)Pbe(i)?(e.repeat=e.repeat||[],e.repeat.push(i)):Dbe(i)?(e.position=e.position||[],e.position.push(i)):Bbe(i)?e.attachment=i:m8(i)?e.color=i:Vbe(i)&&(e.image=i);return{path:"background",value:e}}}function zbe(){return n=>({path:"background.color",value:n})}function jbe(){return n=>{const e=[];return e.push(["background-color",n.color]),e}}function b8(n){n.setNormalizer("border",Ube()),n.setNormalizer("border-top",Vp("top")),n.setNormalizer("border-right",Vp("right")),n.setNormalizer("border-bottom",Vp("bottom")),n.setNormalizer("border-left",Vp("left")),n.setNormalizer("border-color",V_("color")),n.setNormalizer("border-width",V_("width")),n.setNormalizer("border-style",V_("style")),n.setNormalizer("border-top-color",Ws("color","top")),n.setNormalizer("border-top-style",Ws("style","top")),n.setNormalizer("border-top-width",Ws("width","top")),n.setNormalizer("border-right-color",Ws("color","right")),n.setNormalizer("border-right-style",Ws("style","right")),n.setNormalizer("border-right-width",Ws("width","right")),n.setNormalizer("border-bottom-color",Ws("color","bottom")),n.setNormalizer("border-bottom-style",Ws("style","bottom")),n.setNormalizer("border-bottom-width",Ws("width","bottom")),n.setNormalizer("border-left-color",Ws("color","left")),n.setNormalizer("border-left-style",Ws("style","left")),n.setNormalizer("border-left-width",Ws("width","left")),n.setExtractor("border-top",Lp("top")),n.setExtractor("border-right",Lp("right")),n.setExtractor("border-bottom",Lp("bottom")),n.setExtractor("border-left",Lp("left")),n.setExtractor("border-top-color","border.color.top"),n.setExtractor("border-right-color","border.color.right"),n.setExtractor("border-bottom-color","border.color.bottom"),n.setExtractor("border-left-color","border.color.left"),n.setExtractor("border-top-width","border.width.top"),n.setExtractor("border-right-width","border.width.right"),n.setExtractor("border-bottom-width","border.width.bottom"),n.setExtractor("border-left-width","border.width.left"),n.setExtractor("border-top-style","border.style.top"),n.setExtractor("border-right-style","border.style.right"),n.setExtractor("border-bottom-style","border.style.bottom"),n.setExtractor("border-left-style","border.style.left"),n.setReducer("border-color",xh("border-color")),n.setReducer("border-style",xh("border-style")),n.setReducer("border-width",xh("border-width")),n.setReducer("border-top",Fp("top")),n.setReducer("border-right",Fp("right")),n.setReducer("border-bottom",Fp("bottom")),n.setReducer("border-left",Fp("left")),n.setReducer("border",Wbe()),n.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),n.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),n.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),n.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),n.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),n.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),n.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),n.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function Ube(){return n=>{const{color:e,style:t,width:i}=w8(n);return{path:"border",value:{color:Ch(e),style:Ch(t),width:Ch(i)}}}}function Vp(n){return e=>{const{color:t,style:i,width:s}=w8(e),r={};return t!==void 0&&(r.color={[n]:t}),i!==void 0&&(r.style={[n]:i}),s!==void 0&&(r.width={[n]:s}),{path:"border",value:r}}}function V_(n){return e=>({path:"border",value:Hbe(e,n)})}function Hbe(n,e){return{[e]:Ch(n)}}function Ws(n,e){return t=>({path:"border",value:{[n]:{[e]:t}}})}function Lp(n){return(e,t)=>{if(t.border)return ch(t.border,n)}}function ch(n,e){const t={};return n.width&&n.width[e]&&(t.width=n.width[e]),n.style&&n.style[e]&&(t.style=n.style[e]),n.color&&n.color[e]&&(t.color=n.color[e]),t}function w8(n){const e={},t=UE(n);for(const i of t)jE(i)||/thin|medium|thick/.test(i)?e.width=i:Ebe(i)?e.style=i:e.color=i;return e}function Wbe(){return e=>{const t=ch(e,"top"),i=ch(e,"right"),s=ch(e,"bottom"),r=ch(e,"left"),o=[t,i,s,r],a={width:n(o,"width"),style:n(o,"style"),color:n(o,"color")},c=Hu(a,"all");return c.length?c:[...Object.entries(a).reduce((h,[m,p])=>(p&&(h.push([`border-${m}`,p]),o.forEach(w=>delete w[m])),h),[]),...Hu(t,"top"),...Hu(i,"right"),...Hu(s,"bottom"),...Hu(r,"left")]};function n(e,t){return e.map(i=>i[t]).reduce((i,s)=>i==s?i:null)}}function Fp(n){return e=>Hu(e,n)}function Hu(n,e){const t=[];if(n&&n.width&&t.push("width"),n&&n.style&&t.push("style"),n&&n.color&&t.push("color"),t.length==3){const i=t.map(s=>n[s]).join(" ");return[e=="all"?["border",i]:[`border-${e}`,i]]}return e=="all"?[]:t.map(i=>[`border-${e}-${i}`,n[i]])}function v8(n){n.setNormalizer("margin",g8("margin")),n.setNormalizer("margin-top",e=>({path:"margin.top",value:e})),n.setNormalizer("margin-right",e=>({path:"margin.right",value:e})),n.setNormalizer("margin-bottom",e=>({path:"margin.bottom",value:e})),n.setNormalizer("margin-left",e=>({path:"margin.left",value:e})),n.setReducer("margin",xh("margin")),n.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function $be(n){n.setNormalizer("padding",g8("padding")),n.setNormalizer("padding-top",e=>({path:"padding.top",value:e})),n.setNormalizer("padding-right",e=>({path:"padding.right",value:e})),n.setNormalizer("padding-bottom",e=>({path:"padding.bottom",value:e})),n.setNormalizer("padding-left",e=>({path:"padding.left",value:e})),n.setReducer("padding",xh("padding")),n.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}class y8{crashes=[];state="initializing";_crashNumberLimit;_now=Date.now;_minimumNonErrorTimePeriod;_boundErrorHandler;_listeners;constructor(e){if(this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{const i="error"in t?t.error:t.reason;i instanceof Error&&this._handleError(i,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(i=>i!==t)}_fire(e,...t){const i=this._listeners[e]||[];for(const s of i)s.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});const i=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:i}),i?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const e=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}function DC(n,e=new Set){const t=[n],i=new Set;let s=0;for(;t.length>s;){const r=t[s++];if(!(i.has(r)||!Gbe(r)||e.has(r)))if(i.add(r),Symbol.iterator in r)try{for(const o of r)t.push(o)}catch{}else for(const o in r)o!=="defaultValue"&&t.push(r[o])}return i}function Gbe(n){const e=Object.prototype.toString.call(n),t=typeof n;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||n===void 0||n===null||n._watchdogExcluded||n instanceof EventTarget||n instanceof Event)}function A8(n,e,t=new Set){if(n===e&&Ybe(n))return!0;const i=DC(n,t),s=DC(e,t);for(const r of i)if(s.has(r))return!0;return!1}function Ybe(n){return typeof n=="object"&&n!==null}class _8 extends y8{_editor=null;_lifecyclePromise=null;_throttledSave;_data;_lastDocumentVersion;_elementOrData;_initUsingData=!0;_editables={};_config;_excludedProps;constructor(e,t={}){super(t),this._throttledSave=hc(this._save.bind(this),typeof t.saveInterval=="number"?t.saveInterval:5e3),e&&(this._creator=(i,s)=>e.create(i,s)),this._destructor=i=>i.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{const e={},t=[],i=this._config.rootsAttributes||{},s={};for(const[o,a]of Object.entries(this._data.roots))a.isLoaded?(e[o]="",s[o]=i[o]||{}):t.push(o);const r={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:t,rootsAttributes:s,_watchdogInitialData:this._data};return delete r.initialData,r.extraPlugins.push(Kbe),this._initUsingData?this.create(e,r,r.context):ca(this._elementOrData)?this.create(this._elementOrData,r,r.context):this.create(this._editables,r,r.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,t=this._config,i){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(t)||{},this._config.context=i,this._creator(e,this._config))).then(s=>{this._editor=s,s.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=s.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){const e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){const e=this._editor,t=e.model.document.roots.filter(a=>a.isAttached()&&a.rootName!="$graveyard"),{plugins:i}=e,s=i.has("CommentsRepository")&&i.get("CommentsRepository"),r=i.has("TrackChanges")&&i.get("TrackChanges"),o={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};t.forEach(a=>{o.roots[a.rootName]={content:JSON.stringify(Array.from(a.getChildren())),attributes:JSON.stringify(Array.from(a.getAttributes())),isLoaded:a._isLoaded}});for(const a of e.model.markers)a._affectsData&&(o.markers[a.name]={rangeJSON:a.getRange().toJSON(),usingOperation:a._managedUsingOperations,affectsData:a._affectsData});return s&&(o.commentThreads=JSON.stringify(s.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),r&&(o.suggestions=JSON.stringify(r.getSuggestions({toJSON:!0,skipNotAttached:!0}))),o}_getEditables(){const e={};for(const t of this.editor.model.document.getRootNames()){const i=this.editor.ui.getEditableElement(t);i&&(e[t]=i)}return e}_isErrorComingFromThisItem(e){return A8(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return Jv(e,(t,i)=>{if(ca(t)||i==="context")return t})}}class Kbe{editor;_data;constructor(e){this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){const i=e.createElement(t.name,t.attributes);if(t.children)for(const s of t.children)i._appendChild(this._createNode(e,s));return i}else return e.createText(t.data,t.attributes)}_restoreEditorData(e){const t=this.editor;Object.entries(this._data.roots).forEach(([i,{content:s,attributes:r}])=>{const o=JSON.parse(s),a=JSON.parse(r),c=t.model.document.getRoot(i);for(const[d,h]of a)e.setAttribute(d,h,c);for(const d of o){const h=this._createNode(e,d);e.insert(h,c,"end")}}),Object.entries(this._data.markers).forEach(([i,s])=>{const{document:r}=t.model,{rangeJSON:{start:o,end:a},...c}=s,d=r.getRoot(o.root),h=e.createPositionFromPath(d,o.path,o.stickiness),m=e.createPositionFromPath(d,a.path,a.stickiness),p=e.createRange(h,m);e.addMarker(i,{range:p,...c})})}_restoreCollaborationData(){const e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);if(this.editor.plugins.has("CommentsRepository")){const i=this.editor.plugins.get("CommentsRepository");for(const s of i.getCommentThreads())i._removeCommentThread({threadId:s.id});e.forEach(s=>{const r=this.editor.config.get("collaboration.channelId");this.editor.plugins.get("CommentsRepository").addCommentThread({channelId:r,...s})})}if(this.editor.plugins.has("TrackChangesEditing")){const i=this.editor.plugins.get("TrackChangesEditing");for(const s of i.getSuggestions())i._removeSuggestion(s);t.forEach(s=>{i.addSuggestionData(s)})}}}const kh=Symbol("MainQueueId");class qbe extends y8{_watchdogs=new Map;_watchdogConfig;_context=null;_contextProps=new Set;_actionQueues=new Qbe;_contextConfig;_item;constructor(e,t={}){super(t),this._watchdogConfig=t,this._creator=i=>e.create(i),this._destructor=i=>i.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(kh,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){const t=eD(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let s;if(this._watchdogs.has(i.id))throw new Error(`Item with the given id is already added: '${i.id}'.`);if(i.type==="editor")return s=new _8(null,this._watchdogConfig),s.setCreator(i.creator),s._setExcludedProperties(this._contextProps),i.destructor&&s.setDestructor(i.destructor),this._watchdogs.set(i.id,s),s.on("error",(r,{error:o,causesRestart:a})=>{this._fire("itemError",{itemId:i.id,error:o}),a&&this._actionQueues.enqueue(i.id,()=>new Promise(c=>{const d=()=>{s.off("restart",d),this._fire("itemRestart",{itemId:i.id}),c()};s.on("restart",d)}))}),s.create(i.sourceElementOrData,i.config,this._context);throw new Error(`Not supported item type: '${i.type}'.`)})))}remove(e){const t=eD(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i,()=>{const s=this._getWatchdog(i);return this._watchdogs.delete(i),s.destroy()})))}destroy(){return this._actionQueues.enqueue(kh,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(kh,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=DC(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){const t=this._watchdogs.get(e);if(!t)throw new Error(`Item with the given id was not registered: ${e}.`);return t}_isErrorComingFromThisItem(e){for(const t of this._watchdogs.values())if(t._isErrorComingFromThisItem(e))return!1;return A8(this._context,e.context)}}class Qbe{_onEmptyCallbacks=[];_queues=new Map;_activeActions=0;onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){const i=e===kh;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());const r=(i?Promise.all(this._queues.values()):Promise.all([this._queues.get(kh),this._queues.get(e)])).then(t),o=r.catch(()=>{});return this._queues.set(e,o),r.finally(()=>{this._activeActions--,this._queues.get(e)===o&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}}function eD(n){return Array.isArray(n)?n:[n]}class z extends kt(){editor;_disableStack=new Set;constructor(e){super(),this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",tD,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",tD),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function tD(n){n.return=!1,n.stop()}class je extends kt(){editor;_isEnabledBasedOnSelection;_affectsData;_disableStack;static get _throwErrorWhenUsedAsAPlugin(){return!0}constructor(e){super(),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",t=>{if(!this.affectsData)return;const i=e.model.document.selection,r=!(i.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(i);(e.isReadOnly||this._isEnabledBasedOnSelection&&!r)&&(t.return=!1,t.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",nD,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",nD),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function nD(n){n.return=!1,n.stop()}class iD extends je{_childCommandsDefinitions=[];refresh(){}execute(...e){const t=this._getFirstEnabledCommand();return!!t&&t.execute(e)}registerChildCommand(e,t={}){t6(this._childCommandsDefinitions,{command:e,priority:t.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:t})=>t.isEnabled);return e&&e.command}}class Zbe{_commands;constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const i=this.get(e);if(!i)throw new D("commandcollection-command-not-found",this,{commandName:e});return i.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}class C8 extends Ot(){_context;_plugins=new Map;_availablePlugins;_contextPlugins;constructor(e,t=[],i=[]){super(),this._context=e,this._availablePlugins=new Map;for(const s of t)s.pluginName&&this._availablePlugins.set(s.pluginName,s);this._contextPlugins=new Map;for(const[s,r]of i)this._contextPlugins.set(s,r),this._contextPlugins.set(r,s),s.pluginName&&this._availablePlugins.set(s.pluginName,s)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const t=this._plugins.get(e);if(!t){let i=e;throw typeof e=="function"&&(i=e.pluginName||e.name),new D("plugincollection-plugin-not-loaded",this._context,{plugin:i})}return t}has(e){return this._plugins.has(e)}async init(e,t=[],i=[]){const s=this,r=this._context;w(e),C(e);const o=e.filter(P=>!m(P,t)),a=[...A(o)];U(a,i);const c=R(a);return await O(c,"init"),await O(c,"afterInit"),c;function d(P){return typeof P=="function"}function h(P){return d(P)&&!!P.isContextPlugin}function m(P,V){return V.some(H=>H===P||p(P)===H||p(H)===P)}function p(P){return d(P)?P.pluginName||P.name:P}function w(P,V=new Set){P.forEach(H=>{d(H)&&(V.has(H)||(V.add(H),H.pluginName&&!s._availablePlugins.has(H.pluginName)&&s._availablePlugins.set(H.pluginName,H),H.requires&&w(H.requires,V)))})}function A(P,V=new Set){return P.map(H=>d(H)?H:s._availablePlugins.get(H)).reduce((H,ie)=>V.has(ie)?H:(V.add(ie),ie.requires&&(C(ie.requires,ie),A(ie.requires,V).forEach(ke=>H.add(ke))),H.add(ie)),new Set)}function C(P,V=null){P.map(H=>d(H)?H:s._availablePlugins.get(H)||H).forEach(H=>{k(H),E(H,V),S(H,V),I(H,V)})}function k(P){if(typeof P=="function"&&P._throwErrorWhenUsedAsAPlugin)throw new D("plugincollection-plugin-invalid-constructor",r,{name:P.name})}function E(P,V){if(!d(P))throw V?new D("plugincollection-soft-required",r,{missingPlugin:P,requiredBy:p(V)}):new D("plugincollection-plugin-not-found",r,{plugin:P})}function S(P,V){if(h(V)&&!h(P))throw new D("plugincollection-context-required",r,{plugin:p(P),requiredBy:p(V)})}function I(P,V){if(V&&m(P,t))throw new D("plugincollection-required",r,{plugin:p(P),requiredBy:p(V)})}function R(P){return P.map(V=>{let H=s._contextPlugins.get(V);return H=H||new V(r),s._add(V,H),H})}function O(P,V){return P.reduce((H,ie)=>!ie[V]||s._contextPlugins.has(ie)?H:H.then(ie[V].bind(ie)),Promise.resolve())}function U(P,V){for(const H of V){if(typeof H!="function")throw new D("plugincollection-replace-plugin-invalid-type",null,{pluginItem:H});const ie=H.pluginName;if(!ie)throw new D("plugincollection-replace-plugin-missing-name",null,{pluginItem:H});if(H.requires&&H.requires.length)throw new D("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:ie});const ke=s._availablePlugins.get(ie);if(!ke)throw new D("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:ie});const de=P.indexOf(ke);if(de===-1){if(s._contextPlugins.has(ke))return;throw new D("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:ie})}if(ke.requires&&ke.requires.length)throw new D("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:ie});P.splice(de,1,H),s._availablePlugins.set(ie,H)}}}destroy(){const e=[];for(const[,t]of this)typeof t.destroy=="function"&&!this._contextPlugins.has(t)&&e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);const i=e.pluginName;if(i){if(this._plugins.has(i))throw new D("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t)}}}class sD{config;plugins;locale;t;editors;static defaultConfig;static builtinPlugins;_contextOwner=null;constructor(e){const{translations:t,...i}=e||{};this.config=new l6(i,this.constructor.defaultConfig);const s=this.constructor.builtinPlugins;this.config.define("plugins",s),this.plugins=new C8(this,s);const r=this.config.get("language")||{};this.locale=new xhe({uiLanguage:typeof r=="string"?r:r.ui,contentLanguage:this.config.get("language.content"),translations:t}),this.t=this.locale.t,this.editors=new Wn}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const i of e.concat(t)){if(typeof i!="function")throw new D("context-initplugins-constructor-only",null,{Plugin:i});if(i.isContextPlugin!==!0)throw new D("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new D("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{const i=new this(e);t(i.initPlugins().then(()=>i))})}static get _throwErrorWhenUsedAsAPlugin(){return!0}}class ly extends kt(){context;constructor(e){super(),this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class Jbe extends Ht{editor;constructor(e){super(),this.editor=e}set(e,t,i={}){if(typeof t=="string"){const s=t;t=(r,o)=>{this.editor.execute(s),o()}}super.set(e,t,i)}}const L_="contentEditing",rD="common";class Xbe{keystrokeInfos=new Map;_editor;constructor(e){this._editor=e;const t=e.config.get("menuBar.isVisible"),i=e.locale.t;this.addKeystrokeInfoCategory({id:L_,label:i("Content editing keystrokes"),description:i("These keyboard shortcuts allow for quick access to content editing features.")});const s=[{label:i("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:i("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:i("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:i("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:i("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:i("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&s.push({label:i("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:i("User interface and content navigation keystrokes"),description:i("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:s}]})}addKeystrokeInfoCategory({id:e,label:t,description:i,groups:s}){this.keystrokeInfos.set(e,{id:e,label:t,description:i,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:rD}),s&&s.forEach(r=>{this.addKeystrokeInfoGroup({categoryId:e,...r})})}addKeystrokeInfoGroup({categoryId:e=L_,id:t,label:i,keystrokes:s}){const r=this.keystrokeInfos.get(e);if(!r)throw new D("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});r.groups.set(t,{id:t,label:i,keystrokes:s||[]})}addKeystrokeInfos({categoryId:e=L_,groupId:t=rD,keystrokes:i}){if(!this.keystrokeInfos.has(e))throw new D("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:i});const s=this.keystrokeInfos.get(e);if(!s.groups.has(t))throw new D("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:i});s.groups.get(t).keystrokes.push(...i)}}function ewe(n){return{sessionId:rwe(),pageSessionId:owe(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:twe(n),plugins:nwe(n.plugins),distribution:iwe(),env:swe(),integration:Object.create(null),menuBar:{isVisible:!!n.config.get("menuBar.isVisible")},language:{ui:n.locale.uiLanguage,content:n.locale.contentLanguage},toolbar:{main:F_(n.config.get("toolbar")),block:F_(n.config.get("blockToolbar")),balloon:F_(n.config.get("balloonToolbar"))}}}function twe(n){return Object.getPrototypeOf(n).constructor.editorName}function nwe(n){return Array.from(n).filter(([e])=>!!e.pluginName).map(([e])=>{const{pluginName:t,isContextPlugin:i,isOfficialPlugin:s,isPremiumPlugin:r}=e;return{isContext:!!i,isOfficial:!!s,isPremium:!!r,name:t}})}function F_(n){if(!n)return;const e=Array.isArray(n)?{items:n}:n,t=r(e.items||[]);return{isMultiline:t.includes("-"),shouldNotGroupWhenFull:!!e.shouldNotGroupWhenFull,items:s(t)};function s(o){return o.filter(a=>a!=="|"&&a!=="-")}function r(o){return o.flatMap(a=>typeof a=="string"?[a]:r(a.items))}}function iwe(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function swe(){let n="unknown",e="unknown";return Pe.isMac?n="mac":Pe.isWindows?n="windows":Pe.isiOS?n="ios":Pe.isAndroid&&(n="android"),Pe.isGecko?e="gecko":Pe.isBlink?e="blink":Pe.isSafari&&(e="safari"),{os:n,browser:e}}function rwe(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",li()),localStorage.getItem("__ckeditor-session-id")}function owe(){return me.window.CKEDITOR_PAGE_SESSION_ID=me.window.CKEDITOR_PAGE_SESSION_ID||li(),me.window.CKEDITOR_PAGE_SESSION_ID}let awe=class extends kt(){static get editorName(){return"Editor"}accessibility;commands;config;conversion;data;editing;locale;model;plugins;keystrokes;t;static defaultConfig;static builtinPlugins;_context;_readOnlyLocks;static get _throwErrorWhenUsedAsAPlugin(){return!0}constructor(e={}){if(super(),typeof e!="object"||Array.isArray(e))throw new D("editor-config-invalid-type");if("sanitizeHtml"in e)throw new D("editor-config-sanitizehtml-not-supported");const t=this.constructor,{translations:i,...s}=t.defaultConfig||{},{translations:r=i,...o}=e,a=e.language||s.language;this._context=e.context||new sD({language:a,translations:r}),this._context._addEditor(this,!e.context);const c=Array.from(t.builtinPlugins||[]);this.config=new l6(o,s),this.config.define("plugins",c),this.config.define(this._context._getEditorConfig()),h(this.config),this.plugins=new C8(this,c,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new Zbe,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new gbe(this.config),this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const d=new qhe;this.data=new vpe(this.model,d),this.editing=new Zge(this.model,d),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Ape([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new Jbe(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new Xbe(this),m(this);function h(p){let w=p.get("licenseKey");if(!w&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(w=window.CKEDITOR_GLOBAL_LICENSE_KEY,p.set("licenseKey",w)),!w)throw new D("license-key-missing")}function m(p){const w=p.config.get("licenseKey"),A=window[Symbol.for("cke distribution")]||"sh";function C(P,V){p.enableReadOnlyMode(Symbol("invalidLicense")),p._showLicenseError(P,V)}function k(P){return["exp","jti","vc"].every(H=>H in P)}function E(P){return Object.getOwnPropertyNames(P).sort().filter(ie=>ie!="vc"&&P[ie]!=null).map(ie=>P[ie])}function S(P){const{hostname:V}=new URL(window.location.href);if(P.includes(V))return!0;const H=V.split(".");return P.filter(ie=>ie.includes("*")).map(ie=>ie.split(".")).filter(ie=>ie.length<=H.length).map(ie=>Array(H.length-ie.length).fill(ie[0]==="*"?"*":"").concat(ie)).some(ie=>H.every((ke,de)=>ie[de]===ke||ie[de]==="*"))}function I(P){const V=P[0].toUpperCase()+P.slice(1),H=P==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${V} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(` You are using ${H} ${P} license of CKEditor 5${P==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(w=="GPL"){A=="cloud"&&C("distributionChannel");return}const R=mO(w);if(!R){C("invalid");return}if(!k(R)){C("invalid");return}if(R.distributionChannel&&!yt(R.distributionChannel).includes(A)){C("distributionChannel");return}if(Ihe(E(R))!=R.vc.toLowerCase()){C("invalid");return}if(new Date(R.exp*1e3)<Ffe){C("expired");return}const U=R.licensedHosts;if(U&&U.length>0&&!S(U)){C("domainLimit");return}if(["evaluation","trial"].includes(R.licenseType)&&R.exp*1e3<Date.now()){C("expired");return}if(["development","evaluation","trial"].includes(R.licenseType)){const{licenseType:P}=R;window.CKEDITOR_WARNING_SUPPRESSIONS=window.CKEDITOR_WARNING_SUPPRESSIONS||{},window.CKEDITOR_WARNING_SUPPRESSIONS[P]||(I(P),window.CKEDITOR_WARNING_SUPPRESSIONS[P]=!0)}if(["evaluation","trial"].includes(R.licenseType)){const P=R.licenseType,V=setTimeout(()=>{C(`${P}Limit`)},6e5);p.on("destroy",()=>{clearTimeout(V)})}R.usageEndpoint&&p.once("ready",()=>{const P={requestId:li(),requestTime:Math.round(Date.now()/1e3),license:w,editor:lwe(p)};p._sendUsageRequest(R.usageEndpoint,P).then(V=>{const{status:H,message:ie}=V;ie&&console.warn(ie),H!="ok"&&C("usageLimit")},()=>{Nfe("license-key-validation-endpoint-not-reachable",{url:R.usageEndpoint})})},{priority:"high"})}}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new D("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new D("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new D("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,t=e.get("plugins"),i=e.get("removePlugins")||[],s=e.get("extraPlugins")||[],r=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(s),i,r).then(a=>(o(this),a));function o(a){const c=a.config.get("licenseKey");if(c==="GPL")return;const d=mO(c);if(!d)return;const h=[...a.plugins].map(([m])=>m).find(m=>!m.pluginName||!m.licenseFeatureCode?!1:zhe(d,m.licenseFeatureCode));h&&(a.enableReadOnlyMode(Symbol("invalidLicense")),a._showLicenseError("pluginNotAllowed",h.pluginName))}}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(t=>this.once("ready",t))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...t){try{return this.commands.execute(e,...t)}catch(i){D.rethrowUnexpectedError(i,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}static Context=sD;static EditorWatchdog=_8;static ContextWatchdog=qbe;_showLicenseError(e,t){setTimeout(()=>{if(e=="invalid")throw new D("invalid-license-key");if(e=="expired")throw new D("license-key-expired");if(e=="domainLimit")throw new D("license-key-domain-limit");if(e=="pluginNotAllowed"){const i=t.replace(/(Editing|UI)$/,""),s=this.plugins.has(i);throw new D("license-key-plugin-not-allowed",null,{pluginName:s?i:t})}if(e=="featureNotAllowed")throw new D("license-key-feature-not-allowed",null,{featureName:t});if(e=="evaluationLimit")throw new D("license-key-evaluation-limit");if(e=="trialLimit")throw new D("license-key-trial-limit");if(e=="developmentLimit")throw new D("license-key-development-limit");if(e=="usageLimit")throw new D("license-key-usage-limit");if(e=="distributionChannel")throw new D("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(e,t){const i=new Headers({"Content-Type":"application/json"}),s=await fetch(new URL(e),{method:"POST",headers:i,body:JSON.stringify(t)});if(!s.ok)throw new Error(`HTTP Response: ${s.status}`);return s.json()}};function lwe(n){const e=ewe(n);function t(i,s){if(ol(e,i)!==void 0)throw new D("editor-usage-data-path-already-set",{path:i});YF(e,i,s)}return n.fire("collectUsageData",{setUsageData:t}),e}function cwe(n){if(!pw(n.updateSourceElement))throw new D("attachtoform-missing-elementapi-interface",n);const e=n.sourceElement;if(uwe(e)&&e.form){let t;const i=e.form,s=()=>n.updateSourceElement();pw(i.submit)&&(t=i.submit,i.submit=()=>{s(),t.apply(i)}),i.addEventListener("submit",s),n.on("destroy",()=>{i.removeEventListener("submit",s),t&&(i.submit=t)})}}function uwe(n){return!!n&&n.tagName.toLowerCase()==="textarea"}function dwe(n){class e extends n{sourceElement;updateSourceElement(i){if(!this.sourceElement)throw new D("editor-missing-sourceelement",this);const s=this.config.get("updateSourceElementOnDestroy"),r=this.sourceElement instanceof HTMLTextAreaElement;if(!s&&!r){rO(this.sourceElement,"");return}const o=typeof i=="string"?i:this.data.get();rO(this.sourceElement,o)}}return e}class Ad extends ly{_actions;static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new Wn({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new D("pendingactions-add-invalid-message",this);const t=new(kt());return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}class fwe extends kt(){total;_reader;_data;constructor(){super();const e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){const t=this._reader;return this.total=e.size,new Promise((i,s)=>{t.onload=()=>{const r=t.result;this._data=r,i(r)},t.onerror=()=>{s("error")},t.onabort=()=>{s("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}}class el extends z{loaders=new Wn;_loadersMap=new Map;_pendingAction=null;static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[Ad]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,t)=>t?e/t*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return lt("filerepository-no-upload-adapter"),null;const t=new oD(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then(i=>{this._loadersMap.set(i,t)}).catch(()=>{}),t.on("change:uploaded",()=>{let i=0;for(const s of this.loaders)i+=s.uploaded;this.uploaded=i}),t.on("change:uploadTotal",()=>{let i=0;for(const s of this.loaders)s.uploadTotal&&(i+=s.uploadTotal);this.uploadTotal=i}),t}destroyLoader(e){const t=e instanceof oD?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach((i,s)=>{i===t&&this._loadersMap.delete(s)})}_updatePendingAction(){const e=this.editor.plugins.get(Ad);if(this.loaders.length){if(!this._pendingAction){const t=this.editor.t,i=s=>`${t("Upload in progress")} ${parseInt(s)}%.`;this._pendingAction=e.add(i(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",i)}}else e.remove(this._pendingAction),this._pendingAction=null}}class oD extends kt(){id;_filePromiseWrapper;_adapter;_reader;constructor(e,t){super(),this.id=li(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new fwe,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(i,s)=>s?i/s*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new D("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new D("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){const e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){const t={};return t.promise=new Promise((i,s)=>{t.rejecter=s,t.isFulfilled=!1,e.then(r=>{t.isFulfilled=!0,i(r)}).catch(r=>{t.isFulfilled=!0,s(r)})}),t}}class hwe extends z{static get requires(){return[el]}static get pluginName(){return"SimpleUploadAdapter"}static get licenseFeatureCode(){return"SUA"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const e=this.editor.config.get("simpleUpload");if(e){if(!e.uploadUrl){lt("simple-upload-adapter-missing-uploadurl");return}this.editor.plugins.get(el).createUploadAdapter=t=>new mwe(t,e)}}}class mwe{loader;options;xhr;constructor(e,t){this.loader=e,this.options=t}upload(){return this.loader.file.then(e=>new Promise((t,i)=>{this._initRequest(),this._initListeners(t,i,e),this._sendRequest(e)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const e=this.xhr=new XMLHttpRequest;e.open("POST",this.options.uploadUrl,!0),e.responseType="json"}_initListeners(e,t,i){const s=this.xhr,r=this.loader,o=`Couldn't upload file: ${i.name}.`;s.addEventListener("error",()=>t(o)),s.addEventListener("abort",()=>t()),s.addEventListener("load",()=>{const a=s.response;if(!a||a.error)return t(a&&a.error&&a.error.message?a.error.message:o);const c=a.url?{default:a.url}:a.urls;e({...a,urls:c})});s.upload&&s.upload.addEventListener("progress",a=>{a.lengthComputable&&(r.uploadTotal=a.total,r.uploaded=a.loaded)})}_sendRequest(e){let t=this.options.headers||{};typeof t=="function"&&(t=t(e));const i=this.options.withCredentials||!1;for(const r of Object.keys(t))this.xhr.setRequestHeader(r,t[r]);this.xhr.withCredentials=i;const s=new FormData;s.append("upload",e),this.xhr.send(s)}}var aD='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103z"/><path d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17m0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10" clip-rule="evenodd"/></svg>',gwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.75.75 0 0 1-.511.187.75.75 0 0 1-.511-.187M4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5z"/></svg>',pwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75m0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75"/></svg>',bwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75"/></svg>',x8='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75"/></svg>',wwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.75 11.875a.75.75 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.75.75 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.75.75 0 0 1-.508.184.75.75 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75"/></svg>',vwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75m0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75m0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75m0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75"/></svg>',ywe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.75.75 0 0 1 .511-.187.75.75 0 0 1 .511.187M15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5z"/></svg>',k8='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.187 17H5.773q-.956 0-1.364-.415-.41-.416-.409-1.323V4.738q0-.926.419-1.332.418-.405 1.354-.406h4.68q1.035 0 1.793.124.76.124 1.36.478.512.296.906.75a3.26 3.26 0 0 1 .808 2.162q0 2.102-2.167 3.075 2.846.879 2.847 3.421a3.76 3.76 0 0 1-2.296 3.504 6 6 0 0 1-1.517.377q-.857.11-2 .11zm-.217-6.217H7v4.087h3.069q2.965 0 2.965-2.072 0-1.061-.768-1.537-.768-.478-2.296-.478M7 5.13v3.619h2.606q1.093 0 1.69-.2a1.6 1.6 0 0 0 .91-.765q.247-.4.247-.897 0-1.06-.778-1.409-.778-.348-2.375-.348z"/></svg>',HE='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75m-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75m6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75m-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75"/></svg>',Vm='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414z"/></svg>',E8='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2"/><path fill-opacity=".6" d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492z"/></svg>',Lm='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.972 16.615a1 1 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a1 1 0 0 1-.745.292"/></svg>',Awe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 9 9 0 0 1-.372.008m-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414M9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415m4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415"/></svg>',_we='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0" class="ck-icon__fill"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>',Cwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7zM0 7h1v2H0zm15 0h1v2h-1zm-8 8h2v1H7z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',xwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m-7 6.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0m7 0a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',cy='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136z"/></svg>',kwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',lD='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m12.87 13.786 1.532-1.286 3.857 4.596a1 1 0 1 1-1.532 1.286z"/><path d="M16.004 8.5a6.5 6.5 0 0 1-9.216 5.905c-1.154-.53-.863-1.415-.663-1.615.194-.194.564-.592 1.635-.141a4.5 4.5 0 0 0 5.89-5.904l-.104-.227 1.332-1.331c.045-.046.196-.041.224.007a6.47 6.47 0 0 1 .902 3.306m-3.4-5.715c.562.305.742 1.106.354 1.494s-.995.414-1.476.178a4.5 4.5 0 0 0-6.086 5.882l.114.236-1.348 1.349c-.038.037-.17.022-.198-.023a6.5 6.5 0 0 1 5.54-9.9 6.5 6.5 0 0 1 3.1.784"/><path d="M4.001 11.93.948 8.877a.2.2 0 0 1 .141-.341h6.106a.2.2 0 0 1 .141.341L4.283 11.93a.2.2 0 0 1-.282 0m11.083-6.789 3.053 3.053a.2.2 0 0 1-.14.342H11.89a.2.2 0 0 1-.14-.342l3.052-3.053a.2.2 0 0 1 .282 0"/></svg>',Ewe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965zM2 10H1v5h1v-2h2v2h1v-5H4v2H2zm7 0H6v1h1v4h1v-4h1zm8 0h-1v5h3v-1h-2zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5M10 7v1H4V7zm3-2v1H4V5zm-3-2v1H4V3z"/></svg>',Swe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1zM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1zm-5.655 6a2.13 2.13 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7"/></svg>',Twe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a3 3 0 0 1-.414-.287 3 3 0 0 1-1.055-2.03 3 3 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.13 2.13 0 0 0-1.875-.978"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.8.8 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.8.8 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79"/></svg>',Iwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.4 5.4 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023q.675.195 1.307.573l.058.033q.068.042.135.086V2.1c0-.63-.547-1.1-1.2-1.1zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.1 2.1 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.65.65 0 0 0-.096.492.66.66 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.74 1.74 0 0 1 2.478-.463 1.87 1.87 0 0 1 .476 2.55.64.64 0 0 0-.071.5.65.65 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.23 3.23 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.63.63 0 0 0 .092-.475.64.64 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.74 1.74 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.65.65 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.61.61 0 0 0-.845.17"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236z"/></svg>',Rwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822zM14 5V2l3.3 3zm-3.692 12.5q.093.157.213.303L11.52 19H8v-.876a2.24 2.24 0 0 0 1.82-.624zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',cD='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75M2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5M1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',Pwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m9.586 14.633.021.004q-.054.502.393.962.123.125.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15q.711-.106 1.005-.334.235-.182.404-.597l2.416-9.55a1.05 1.05 0 0 0-.281-.823 1.1 1.1 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195q-.564.084-.823.296-.323.263-.623.79z"/></svg>',S8='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.8.8 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.7.7 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294zm5.494-5.335a.8.8 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.8.8 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955m-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184"/></svg>',Owe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4m0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4m0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4"/></svg>',Dwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M5.714 15.11q.935 0 1.46-.66.632-.799.632-2.627 0-1.832-.629-2.624-.527-.668-1.463-.668t-1.459.66q-.633.8-.633 2.619 0 1.854.576 2.577.577.723 1.516.723m0-1.024a.6.6 0 0 1-.398-.14q-.173-.141-.287-.565-.115-.424-.115-1.558c0-1.134.043-1.294.128-1.613q.096-.37.272-.512a.62.62 0 0 1 .4-.143.6.6 0 0 1 .398.143q.173.143.288.567t.114 1.558c0 1.134-.043 1.292-.128 1.608q-.096.37-.272.512a.62.62 0 0 1-.4.143m6.078.914V8.531H10.79q-.21.59-.778 1.03-.567.442-1.05.6v1.121a4.3 4.3 0 0 0 1.595-.936V15zm3.344 0v-1.235h-1.235V15zm-9.422 9.11q.935 0 1.46-.66.632-.799.632-2.627 0-1.833-.629-2.624-.527-.668-1.463-.668t-1.459.66q-.633.8-.633 2.619 0 1.854.576 2.577.577.723 1.516.723m0-1.024a.6.6 0 0 1-.398-.14q-.173-.142-.287-.565-.115-.424-.115-1.558c0-1.134.043-1.294.128-1.613q.096-.37.272-.512a.62.62 0 0 1 .4-.143.6.6 0 0 1 .398.143q.173.142.288.567t.114 1.558c0 1.134-.043 1.292-.128 1.608q-.096.37-.272.512a.62.62 0 0 1-.4.143m7.088.914v-1.147H10.35q.097-.167.253-.343.155-.175.74-.712t.81-.821q.338-.431.493-.824.156-.394.156-.829 0-.765-.544-1.279-.546-.514-1.499-.514-.87 0-1.45.444t-.69 1.463l1.23.124q.036-.54.264-.774t.615-.233q.391 0 .613.222t.222.635q0 .374-.255.756-.189.277-1.024 1.055-1.037.962-1.388 1.544-.352.583-.422 1.233zm2.334 0v-1.235h-1.235V24zM5.714 34.11q.935 0 1.46-.66.632-.799.632-2.627 0-1.832-.629-2.624-.527-.668-1.463-.668t-1.459.66q-.633.8-.633 2.619 0 1.854.576 2.577.577.723 1.516.723m0-1.024a.6.6 0 0 1-.398-.14q-.173-.142-.287-.565-.115-.424-.115-1.558c0-1.134.043-1.294.128-1.613q.096-.37.272-.512a.62.62 0 0 1 .4-.143.6.6 0 0 1 .398.143q.173.142.288.567t.114 1.558c0 1.134-.043 1.292-.128 1.608q-.096.37-.272.512a.62.62 0 0 1-.4.143m4.992 1.024q.924 0 1.543-.598.62-.597.62-1.446 0-.585-.332-.997a1.5 1.5 0 0 0-.886-.532q.927-.505.927-1.353 0-.598-.452-1.073-.55-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.6 1.6 0 0 0-.667.55q-.24.349-.359.933l1.139.194q.048-.422.272-.642t.54-.22q.321 0 .515.194c.194.194.193.302.193.518q0 .383-.264.613-.263.231-.764.218l-.136 1.006q.33-.092.566-.092.36 0 .611.272.25.273.25.739 0 .492-.26.782a.83.83 0 0 1-.644.29.84.84 0 0 1-.607-.242q-.25-.241-.308-.698l-1.195.145q.093.813.668 1.316t1.45.503m4.43-.11v-1.235h-1.235V34z"/></svg>',Mwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M10.29 15V8.531H9.286q-.21.59-.778 1.03-.567.442-1.05.6v1.121a4.3 4.3 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15zM11.3 24v-1.147H8.848q.096-.167.252-.343.156-.175.74-.712.585-.536.81-.821.338-.431.494-.824.156-.394.156-.829 0-.765-.545-1.279t-1.499-.514q-.87 0-1.45.444t-.69 1.463l1.23.124q.036-.54.264-.774.23-.233.616-.233.39 0 .613.222t.222.635q0 .374-.255.756-.19.277-1.024 1.055-1.038.962-1.389 1.544T6.971 24zm2.333 0v-1.235h-1.235V24zM9.204 34.11q.922 0 1.542-.598.62-.597.62-1.446 0-.585-.332-.997a1.5 1.5 0 0 0-.886-.532q.928-.505.928-1.353 0-.598-.453-1.073-.549-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.6 1.6 0 0 0-.668.55q-.24.349-.358.933l1.138.194q.048-.422.272-.642t.54-.22q.322 0 .515.194c.193.194.193.302.193.518q0 .383-.263.613-.263.231-.765.218l-.136 1.006q.33-.092.567-.092.36 0 .61.272.251.273.251.739 0 .492-.261.782a.83.83 0 0 1-.644.29.84.84 0 0 1-.607-.242q-.251-.241-.307-.698l-1.196.145q.093.813.668 1.316t1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',Bwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6"/></svg>',Nwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M9.62 14.105q.408 0 .768-.153c.36-.153.466-.257.677-.462q.013.036.044.145.07.242.119.365h1.221a2.7 2.7 0 0 1-.222-.626q-.06-.293-.059-.908l.013-1.441q0-.804-.165-1.105-.165-.302-.569-.497-.405-.195-1.23-.195-.91 0-1.371.325-.462.325-.65 1.002l1.12.202q.114-.326.299-.455.184-.13.514-.13.488 0 .663.152.176.151.176.508v.123q-.333.14-1.2.303-.641.123-.982.288t-.53.474a1.33 1.33 0 0 0-.188.706q0 .598.415.988.416.391 1.136.391zm.368-.87a.68.68 0 0 1-.492-.189.6.6 0 0 1-.193-.448q0-.263.241-.435.159-.105.673-.215a7 7 0 0 0 .751-.19v.247q0 .443-.048.602a.77.77 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14zM10.2 25.105q.813 0 1.382-.646.57-.645.57-1.84 0-1.156-.559-1.774a1.82 1.82 0 0 0-1.41-.617q-.783 0-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592q.39.2.79.2zm-.299-.975q-.531 0-.852-.492-.23-.348-.229-1.073 0-.703.295-1.048a.93.93 0 0 1 .738-.345q.453 0 .743.354t.29 1.154q0 .751-.288 1.1t-.697.35m4.478.87v-1.235h-1.234V25zm-4.017 9.105q.9 0 1.437-.426.536-.426.725-1.261l-1.213-.207q-.092.489-.316.688a.83.83 0 0 1-.576.2.92.92 0 0 1-.75-.343q-.278-.343-.278-1.173 0-.747.274-1.066.275-.318.736-.318.348 0 .565.184t.28.55l1.216-.22q-.22-.751-.722-1.119-.504-.366-1.356-.366-1.042 0-1.653.643-.61.645-.61 1.8 0 1.143.608 1.788.609.646 1.633.646M14.633 34v-1.235h-1.235V34z"/></svg>',Vwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M11.88 8.7V7.558h-1.234V8.7zm0 5.3V9.333h-1.234V14zm2.5 0v-1.235h-1.234V14zm-4.75 4.7v-1.142H8.395V18.7zm0 5.3v-4.667H8.395V24zm2.5-5.3v-1.142h-1.234V18.7zm0 5.3v-4.667h-1.234V24zm2.501 0v-1.235h-1.235V24zM7.38 28.7v-1.142H6.145V28.7zm0 5.3v-4.667H6.145V34zm2.5-5.3v-1.142H8.646V28.7zm0 5.3v-4.667H8.646V34zm2.5-5.3v-1.142h-1.234V28.7zm0 5.3v-4.667h-1.234V34zm2.501 0v-1.235h-1.235V34z"/></svg>',Lwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M14 27v6H8v-6zm0-9v6H8v-6zm0-9v6H8V9z"/></svg>',Fwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15zM9.352 25q1.244-.009 1.569-.044.518-.057.872-.305.354-.249.558-.664t.205-.855q0-.558-.317-.97-.315-.414-.905-.585a1.5 1.5 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83q0-.419-.197-.754a1.65 1.65 0 0 0-.495-.539 1.7 1.7 0 0 0-.672-.266q-.375-.063-1.14-.063H7.158V25zm.142-3.88H8.46v-1.49h.747q.918 0 1.112.022.325.04.49.226.165.188.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 12 12 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05q.888 0 1.154.092.266.093.406.295a.84.84 0 0 1 .14.492q0 .342-.181.547a.8.8 0 0 1-.473.257q-.189.04-.892.04M14.88 25v-1.235h-1.234V25zm-5.018 9.11q1.037 0 1.711-.512t.965-1.567l-1.261-.4q-.163.708-.536 1.037-.375.33-.892.33-.704 0-1.143-.519-.44-.518-.44-1.74 0-1.15.447-1.665.445-.514 1.162-.514.52 0 .881.29.362.29.477.79l1.288-.307q-.22-.774-.66-1.187-.738-.698-1.92-.698-1.353 0-2.184.89-.83.89-.83 2.498 0 1.521.825 2.397.826.877 2.11.877M14.88 34v-1.235h-1.234V34z"/></svg>',zwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44"><path fill-opacity=".163" d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1z"/><path d="M11.916 15V8.558h-1.301V15zm2.465 0v-1.235h-1.235V15zM9.665 25v-6.442h-1.3V25zm2.5 0v-6.442h-1.3V25zm2.466 0v-1.235h-1.235V25zm-7.216 9v-6.442h-1.3V34zm2.5 0v-6.442h-1.3V34zm2.501 0v-6.442h-1.3V34zm2.465 0v-1.235h-1.235V34z"/></svg>',jwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 42"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098s-4.538-.083-4.538-1.678 2.032-3.43 4.538-4.098c.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556L49 17zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.99 1.99 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17m29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155zM20.6 21.375v1.616h1.616v-1.616zm0 3.231v1.616h1.616v-1.616zm0 3.231v1.616h1.616v-1.616zm0 3.231v1.616h1.616v-1.616zm0 3.231v1.616h1.616v-1.616zm0 3.231v1.616h1.616V37.53zm24.233-16.155v1.616h1.615v-1.616zm0 3.231v1.616h1.615v-1.616zm0 3.231v1.616h1.615v-1.616zm0 3.231v1.616h1.615v-1.616zm0 3.231v1.616h1.615v-1.616zm0 3.231v1.616h1.615V37.53zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35z"/></svg>',Uwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 20"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-14.24 1h13.008v12H4.467zm-2.208 1h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-16.448 2h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-16.448 2h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-16.448 2h1.003v1H2.288zm16.448 0h1.003v1h-1.003zm-16.448 2h1.003l-.029 1h-.974zm16.448 0h1.003v1h-1.003zm-16.448 2h.974v1h-.974zm16.448 0h1.003v1h-1.003z"/><path d="M8.374 6.648a.4.4 0 0 1 .395-.4.4.4 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35z"/></svg>',T8='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382z"/></svg>',WE='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75M3.5 3v5H2V3.7H1v-1h2.5zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001q-.073.607-.333.988-.263.381-1.244 1.312H4.3v1h-4zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75"/></svg>',kw='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2z" opacity=".5"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H6.5V12h6.997z"/></svg>',Hwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2z" opacity=".5"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1m-1.505.5H3.504V12h12.991z"/></svg>',$E='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z" opacity=".5"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H3.5V12h6.997z"/></svg>',Ew='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z" opacity=".5"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H9.5V12h6.997z"/></svg>',I8='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z" opacity=".5"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H3.5V12h6.997z"/></svg>',R8='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2z" opacity=".5"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H3.5V12h6.997z"/></svg>',P8='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3h16v1.5H2zm0 12h16v1.5H2z" opacity=".5"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1m-1.506.5H9.5V12h6.997z"/></svg>',Wwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95zm.55 3.5v-2h2v2zm0 9.3v2h2v-2zm15-11.3v2h2v-2zM8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046zm11.421-9.101a.6.6 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.6.6 0 0 1 .206-.138.6.6 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243"/></svg>',$we='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zM1 15.5v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm-19-2v1H0v-1zm19 0v1h-1v-1zm0-2v1h-1v-1zm-19 0v1H0v-1zM14.5 2v1h-1V2zm2 0v1h-1V2zm2 0v1h-1V2zm-8 0v1h-1V2zm-2 0v1h-1V2zm-2 0v1h-1V2zm-2 0v1h-1V2zm8 0v1h-1V2zm-10 0v1h-1V2z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2m0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.49.49 0 0 1-.476-.5V4c0-.276.213-.5.476-.5z"/></svg>',Gwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 16.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zM1 15v1H0v-1zm19 0v1h-1v-1zM1 13v1H0v-1zm19 0v1h-1v-1zM1 11v1H0v-1zm19 0v1h-1v-1zM1 9v1H0V9zm19 0v1h-1V9zM1 7v1H0V7zm19 0v1h-1V7zM1 5v1H0V5zm19 0v1h-1V5zm0-2v1h-1V3zM1 3v1H0V3zm13.5-1.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm-8 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm8 0v1h-1v-1zm-10 0v1h-1v-1z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2M13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7z"/></svg>',Ywe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 16.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zM1 15v1H0v-1zm19 0v1h-1v-1zM1 13v1H0v-1zm19 0v1h-1v-1zM1 11v1H0v-1zm19 0v1h-1v-1zM1 9v1H0V9zm19 0v1h-1V9zM1 7v1H0V7zm19 0v1h-1V7zM1 5v1H0V5zm19 0v1h-1V5zm0-2v1h-1V3zM1 3v1H0V3zm13.5-1.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm-8 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm8 0v1h-1v-1zm-10 0v1h-1v-1z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2M10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9z"/></svg>',Kwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 16.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zM1 15v1H0v-1zm19 0v1h-1v-1zM1 13v1H0v-1zm19 0v1h-1v-1zM1 11v1H0v-1zm19 0v1h-1v-1zM1 9v1H0V9zm19 0v1h-1V9zM1 7v1H0V7zm19 0v1h-1V7zM1 5v1H0V5zm19 0v1h-1V5zm0-2v1h-1V3zM1 3v1H0V3zm13.5-1.5v1h-1v-1zm2 0v1h-1v-1zm2 0v1h-1v-1zm-8 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm-2 0v1h-1v-1zm8 0v1h-1v-1zm-10 0v1h-1v-1z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2M7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11z"/></svg>',uD='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75m5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75M2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5m1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',qwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"/><path d="M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"/><path d="M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"/></svg>',Qwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5M5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1"/></svg>',MC='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m7.3 17.37-.061.088a1.52 1.52 0 0 1-.934.535l-4.178.663-.806-4.153a1.5 1.5 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346zM6.07 16.512l-3.276-2.295.53 2.73zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328M8 18.5 9.375 17H19v1.5z"/></svg>',Zwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4"/></svg>',Jwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1"/></svg>',ll='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',Xwe=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`,eve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003z"/></svg>',dD='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.75.75 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.8.8 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032z"/></svg>',tve='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',nve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75m18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75m-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2z"/></svg>',ive=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.734 6.375H1.75a.75.75 0 0 1 0-1.5h1.984a2.626 2.626 0 0 1 5.032 0h9.48a.75.75 0 0 1 0 1.5h-9.48a2.626 2.626 0 0 1-5.032 0Zm1.141-.75a1.375 1.375 0 1 1 2.75 0 1.375 1.375 0 0 1-2.75 0ZM16.263 14.625h1.983a.75.75 0 0 1 0 1.5h-1.983a2.626 2.626 0 0 1-5.033 0H1.75a.75.75 0 0 1 0-1.5h9.48a2.626 2.626 0 0 1 5.033 0Zm-1.142.75a1.375 1.375 0 1 1-2.75 0 1.375 1.375 0 0 1 2.75 0Z"/></svg>
`,sve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m6.395 9.196 2.545-.007V6.498a.6.6 0 0 1 .598-.598h.299a.6.6 0 0 1 .598.598v6.877a.6.6 0 0 1-.598.598h-.299a.6.6 0 0 1-.598-.598v-2.691l-2.545.007v2.691a.6.6 0 0 1-.598.598h-.299a.6.6 0 0 1-.598-.598V6.505a.6.6 0 0 1 .598-.598h.299a.6.6 0 0 1 .598.598zm8.699 4.221V6.462a.56.56 0 0 0-.562-.562h-.782a1 1 0 0 0-.39.08l-1.017.43a.56.56 0 0 0-.343.517v.197c0 .4.406.67.775.519l.819-.337v6.111c0 .31.251.562.561.562h.377c.31 0 .562-.251.562-.562M0 15.417v1.5h1.5v-1.5zm18.5 0v1.5H20v-1.5zm0-3.084v1.5H20v-1.5zm0-3.083v1.5H20v-1.5zm0-3.083v1.5H20v-1.5zM0 18.5v.5a1 1 0 0 0 1 1h.5v-1.5zm3.083 0V20h1.5v-1.5zm3.084 0V20h1.5v-1.5zm3.083 0V20h1.5v-1.5zm3.083 0V20h1.5v-1.5zm3.084 0V20h1.5v-1.5zm3.083 0V20h.5a1 1 0 0 0 1-1v-.5z"/><path d="M0 1a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v3.583h-1.5V1.5h-17v12.333H0z" clip-rule="evenodd"/></svg>',rve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m12.5 0 5 4.5v15.003h-16V0zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0"/></svg>',ove='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.27 7.27 0 0 1 2.703 3.454 7.13 7.13 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.87.87 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.6 5.6 0 0 0 2.492-2.371 5.46 5.46 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.7 5.7 0 0 0 10 4.206 5.7 5.7 0 0 0 6.419 5.46 5.53 5.53 0 0 0 4.46 8.663a5.46 5.46 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.88.88 0 0 1-.614-.25.85.85 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.13 7.13 0 0 1 .199-4.352 7.27 7.27 0 0 1 2.703-3.455A7.5 7.5 0 0 1 10 2.5"/></svg>',ave='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5zM2 12h5V8H2zm10-4H8v4h4zM2 2v5h5V2zm0 16h5v-5H2zM13 7h5V2h-5zM8 2v5h4V2z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43zM13 6a1 1 0 0 1 1 1v3.172a2 2 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.98 1.98 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm-1 2H8v4h4z"/></svg>',lve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1M2 2v16h16V2z" opacity=".6"/><path d="M18 7v1H2V7zm0 5v1H2v-1z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1m-2 1H8v4h4zm0 6H8v4h4zm0 6H8v4h4z"/></svg>',cve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1M2 2v16h16V2z" opacity=".6"/><path d="M7 2h1v16H7zm5 0h1v7h-1zm6 5v1H2V7zM8 12v1H2v-1z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1m1 2v9h10V9z"/></svg>',uve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2zm4 6H8v4h4z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2 2 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2z"/></svg>',dve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1M2 2v16h16V2z" opacity=".6"/><path d="M7 2h1v16H7zm5 0h1v16h-1z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1m1 2v4h4V8zm6 0v4h4V8zm6 0v4h4V8z"/></svg>',fD='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3 5.5v3h4v-3zm0 4v3h4v-3zm0 4v3h4v-3zm5 3h4v-3H8zm5 0h4v-3h-4zm4-4v-3h-4v3zm0-4v-3h-4v3zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5zm-6.5-4v-3H8v3zm0-4v-3H8v3z"/></svg>',fve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1zm10.453 2.61a1.89 1.89 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.9 1.9 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598M7.463 8.163a.6.6 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.63.63 0 0 0-.417-.185m6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.62.62 0 0 0-.42-.165M.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.91.91 0 0 0-.912-.912zM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516zm4.947 0h1.801v4.3h2.7v1.4h-4.5zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9zm-8.517 1.457-.614 2.059h1.262z"/></svg>',hve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.816 11.5 7.038 4.785 4.261 11.5zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254z"/></svg>',GE='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',mve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m2.315 14.705 2.224-2.24a.69.69 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.7.7 0 0 1-.112.089.65.65 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75M2.329 5.745l2.21-2.226a.69.69 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.7.7 0 0 1-.496.196.64.64 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75"/></svg>',gve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8s3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4"/></svg>',hD='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.75.75 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.8.8 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032z"/></svg>',pve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.8.8 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.7.7 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294zm5.494-5.335a.8.8 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.8.8 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955m-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184m4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06z"/></svg>';const BC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const n in BC)Object.freeze(BC[n]);const mD=Object.freeze(BC);var gD={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function pD(n){var e,t=[],i=1,s;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),mD[n])t=mD[n].slice(),s="rgb";else if(n==="transparent")i=0,s="rgb",t=[0,0,0];else if(n[0]==="#"){var r=n.slice(1),o=r.length,a=o<=4;i=1,a?(t=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],o===4&&(i=parseInt(r[3]+r[3],16)/255)):(t=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],o===8&&(i=parseInt(r[6]+r[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var c=e[1];s=c.replace(/a$/,"");var d=s==="cmyk"?4:s==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=t.shift()),t=t.map(function(h,m){if(h[h.length-1]==="%")return h=parseFloat(h)/100,m===3?h:s==="rgb"?h*255:s[0]==="h"||s[0]==="l"&&!m?h*100:s==="lab"?h*125:s==="lch"?m<2?h*150:h*360:s[0]==="o"&&!m?h:s==="oklab"?h*.4:s==="oklch"?m<2?h*.4:h*360:h;if(s[m]==="h"||m===2&&s[s.length-1]==="h"){if(gD[h]!==void 0)return gD[h];if(h.endsWith("deg"))return parseFloat(h);if(h.endsWith("turn"))return parseFloat(h)*360;if(h.endsWith("grad"))return parseFloat(h)*360/400;if(h.endsWith("rad"))return parseFloat(h)*180/Math.PI}return h==="none"?0:parseFloat(h)}),i=t.length>d?t.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),s=n.match(/([a-z])/ig)?.join("")?.toLowerCase()||"rgb");return{space:s,values:t,alpha:i}}const NC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};for(const n in NC)Object.freeze(NC[n]);const im=Object.freeze(NC),O8={};for(const n of Object.keys(im))O8[im[n]]=n;const xe={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},na=(6/29)**3;function ad(n){const e=n>.0031308?1.055*n**.4166666666666667-.055:n*12.92;return Math.min(Math.max(0,e),1)}function ld(n){return n>.04045?((n+.055)/1.055)**2.4:n/12.92}for(const n of Object.keys(xe)){if(!("channels"in xe[n]))throw new Error("missing channels property: "+n);if(!("labels"in xe[n]))throw new Error("missing channel labels property: "+n);if(xe[n].labels.length!==xe[n].channels)throw new Error("channel and label counts mismatch: "+n);const{channels:e,labels:t}=xe[n];delete xe[n].channels,delete xe[n].labels,Object.defineProperty(xe[n],"channels",{value:e}),Object.defineProperty(xe[n],"labels",{value:t})}xe.rgb.hsl=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,s=Math.min(e,t,i),r=Math.max(e,t,i),o=r-s;let a,c;switch(r){case s:{a=0;break}case e:{a=(t-i)/o;break}case t:{a=2+(i-e)/o;break}case i:{a=4+(e-t)/o;break}}a=Math.min(a*60,360),a<0&&(a+=360);const d=(s+r)/2;return r===s?c=0:d<=.5?c=o/(r+s):c=o/(2-r-s),[a,c*100,d*100]};xe.rgb.hsv=function(n){let e,t,i,s,r;const o=n[0]/255,a=n[1]/255,c=n[2]/255,d=Math.max(o,a,c),h=d-Math.min(o,a,c),m=function(p){return(d-p)/6/h+1/2};if(h===0)s=0,r=0;else{switch(r=h/d,e=m(o),t=m(a),i=m(c),d){case o:{s=i-t;break}case a:{s=1/3+e-i;break}case c:{s=2/3+t-e;break}}s<0?s+=1:s>1&&(s-=1)}return[s*360,r*100,d*100]};xe.rgb.hwb=function(n){const e=n[0],t=n[1];let i=n[2];const s=xe.rgb.hsl(n)[0],r=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[s,r*100,i*100]};xe.rgb.oklab=function(n){const e=ld(n[0]/255),t=ld(n[1]/255),i=ld(n[2]/255),s=Math.cbrt(.4122214708*e+.5363325363*t+.0514459929*i),r=Math.cbrt(.2119034982*e+.6806995451*t+.1073969566*i),o=Math.cbrt(.0883024619*e+.2817188376*t+.6299787005*i),a=.2104542553*s+.793617785*r-.0040720468*o,c=1.9779984951*s-2.428592205*r+.4505937099*o,d=.0259040371*s+.7827717662*r-.808675766*o;return[a*100,c*100,d*100]};xe.rgb.cmyk=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,s=Math.min(1-e,1-t,1-i),r=(1-e-s)/(1-s)||0,o=(1-t-s)/(1-s)||0,a=(1-i-s)/(1-s)||0;return[r*100,o*100,a*100,s*100]};function bve(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}xe.rgb.keyword=function(n){const e=O8[n];if(e)return e;let t=Number.POSITIVE_INFINITY,i;for(const s of Object.keys(im)){const r=im[s],o=bve(n,r);o<t&&(t=o,i=s)}return i};xe.keyword.rgb=function(n){return im[n]};xe.rgb.xyz=function(n){const e=ld(n[0]/255),t=ld(n[1]/255),i=ld(n[2]/255),s=e*.4124564+t*.3575761+i*.1804375,r=e*.2126729+t*.7151522+i*.072175,o=e*.0193339+t*.119192+i*.9503041;return[s*100,r*100,o*100]};xe.rgb.lab=function(n){const e=xe.rgb.xyz(n);let t=e[0],i=e[1],s=e[2];t/=95.047,i/=100,s/=108.883,t=t>na?t**(1/3):7.787*t+16/116,i=i>na?i**(1/3):7.787*i+16/116,s=s>na?s**(1/3):7.787*s+16/116;const r=116*i-16,o=500*(t-i),a=200*(i-s);return[r,o,a]};xe.hsl.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;let s,r;if(t===0)return r=i*255,[r,r,r];const o=i<.5?i*(1+t):i+t-i*t,a=2*i-o,c=[0,0,0];for(let d=0;d<3;d++)s=e+1/3*-(d-1),s<0&&s++,s>1&&s--,6*s<1?r=a+(o-a)*6*s:2*s<1?r=o:3*s<2?r=a+(o-a)*(2/3-s)*6:r=a,c[d]=r*255;return c};xe.hsl.hsv=function(n){const e=n[0];let t=n[1]/100,i=n[2]/100,s=t;const r=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,s*=r<=1?r:2-r;const o=(i+t)/2,a=i===0?2*s/(r+s):2*t/(i+t);return[e,a*100,o*100]};xe.hsv.rgb=function(n){const e=n[0]/60,t=n[1]/100;let i=n[2]/100;const s=Math.floor(e)%6,r=e-Math.floor(e),o=255*i*(1-t),a=255*i*(1-t*r),c=255*i*(1-t*(1-r));switch(i*=255,s){case 0:return[i,c,o];case 1:return[a,i,o];case 2:return[o,i,c];case 3:return[o,a,i];case 4:return[c,o,i];case 5:return[i,o,a]}};xe.hsv.hsl=function(n){const e=n[0],t=n[1]/100,i=n[2]/100,s=Math.max(i,.01);let r,o;o=(2-t)*i;const a=(2-t)*s;return r=t*s,r/=a<=1?a:2-a,r=r||0,o/=2,[e,r*100,o*100]};xe.hwb.rgb=function(n){const e=n[0]/360;let t=n[1]/100,i=n[2]/100;const s=t+i;let r;s>1&&(t/=s,i/=s);const o=Math.floor(6*e),a=1-i;r=6*e-o,(o&1)!==0&&(r=1-r);const c=t+r*(a-t);let d,h,m;switch(o){default:case 6:case 0:{d=a,h=c,m=t;break}case 1:{d=c,h=a,m=t;break}case 2:{d=t,h=a,m=c;break}case 3:{d=t,h=c,m=a;break}case 4:{d=c,h=t,m=a;break}case 5:{d=a,h=t,m=c;break}}return[d*255,h*255,m*255]};xe.cmyk.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,s=n[3]/100,r=1-Math.min(1,e*(1-s)+s),o=1-Math.min(1,t*(1-s)+s),a=1-Math.min(1,i*(1-s)+s);return[r*255,o*255,a*255]};xe.xyz.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100;let s,r,o;return s=e*3.2404542+t*-1.5371385+i*-.4985314,r=e*-.969266+t*1.8760108+i*.041556,o=e*.0556434+t*-.2040259+i*1.0572252,s=ad(s),r=ad(r),o=ad(o),[s*255,r*255,o*255]};xe.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>na?e**(1/3):7.787*e+16/116,t=t>na?t**(1/3):7.787*t+16/116,i=i>na?i**(1/3):7.787*i+16/116;const s=116*t-16,r=500*(e-t),o=200*(t-i);return[s,r,o]};xe.xyz.oklab=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,s=Math.cbrt(.8189330101*e+.3618667424*t-.1288597137*i),r=Math.cbrt(.0329845436*e+.9293118715*t+.0361456387*i),o=Math.cbrt(.0482003018*e+.2643662691*t+.633851707*i),a=.2104542553*s+.793617785*r-.0040720468*o,c=1.9779984951*s-2.428592205*r+.4505937099*o,d=.0259040371*s+.7827717662*r-.808675766*o;return[a*100,c*100,d*100]};xe.oklab.oklch=function(n){return xe.lab.lch(n)};xe.oklab.xyz=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,s=(.999999998*e+.396337792*t+.215803758*i)**3,r=(1.000000008*e-.105561342*t-.063854175*i)**3,o=(1.000000055*e-.089484182*t-1.291485538*i)**3,a=1.227013851*s-.55779998*r+.281256149*o,c=-.040580178*s+1.11225687*r-.071676679*o,d=-.076381285*s-.421481978*r+1.58616322*o;return[a*100,c*100,d*100]};xe.oklab.rgb=function(n){const e=n[0]/100,t=n[1]/100,i=n[2]/100,s=(e+.3963377774*t+.2158037573*i)**3,r=(e-.1055613458*t-.0638541728*i)**3,o=(e-.0894841775*t-1.291485548*i)**3,a=ad(4.0767416621*s-3.3077115913*r+.2309699292*o),c=ad(-1.2684380046*s+2.6097574011*r-.3413193965*o),d=ad(-.0041960863*s-.7034186147*r+1.707614701*o);return[a*255,c*255,d*255]};xe.oklch.oklab=function(n){return xe.lch.lab(n)};xe.lab.xyz=function(n){const e=n[0],t=n[1],i=n[2];let s,r,o;r=(e+16)/116,s=t/500+r,o=r-i/200;const a=r**3,c=s**3,d=o**3;return r=a>na?a:(r-16/116)/7.787,s=c>na?c:(s-16/116)/7.787,o=d>na?d:(o-16/116)/7.787,s*=95.047,r*=100,o*=108.883,[s,r,o]};xe.lab.lch=function(n){const e=n[0],t=n[1],i=n[2];let s;s=Math.atan2(i,t)*360/2/Math.PI,s<0&&(s+=360);const o=Math.sqrt(t*t+i*i);return[e,o,s]};xe.lch.lab=function(n){const e=n[0],t=n[1],s=n[2]/360*2*Math.PI,r=t*Math.cos(s),o=t*Math.sin(s);return[e,r,o]};xe.rgb.ansi16=function(n,e=null){const[t,i,s]=n;let r=e===null?xe.rgb.hsv(n)[2]:e;if(r=Math.round(r/50),r===0)return 30;let o=30+(Math.round(s/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return r===2&&(o+=60),o};xe.hsv.ansi16=function(n){return xe.rgb.ansi16(xe.hsv.rgb(n),n[2])};xe.rgb.ansi256=function(n){const e=n[0],t=n[1],i=n[2];return e>>4===t>>4&&t>>4===i>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};xe.ansi16.rgb=function(n){n=n[0];let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(Math.trunc(n>50)+1)*.5,i=(e&1)*t*255,s=(e>>1&1)*t*255,r=(e>>2&1)*t*255;return[i,s,r]};xe.ansi256.rgb=function(n){if(n=n[0],n>=232){const r=(n-232)*10+8;return[r,r,r]}n-=16;let e;const t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,s=e%6/5*255;return[t,i,s]};xe.rgb.hex=function(n){const t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".slice(t.length)+t};xe.hex.rgb=function(n){const e=n.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=[...t].map(a=>a+a).join(""));const i=Number.parseInt(t,16),s=i>>16&255,r=i>>8&255,o=i&255;return[s,r,o]};xe.rgb.hcg=function(n){const e=n[0]/255,t=n[1]/255,i=n[2]/255,s=Math.max(Math.max(e,t),i),r=Math.min(Math.min(e,t),i),o=s-r;let a;const c=o<1?r/(1-o):0;return o<=0?a=0:s===e?a=(t-i)/o%6:s===t?a=2+(i-e)/o:a=4+(e-t)/o,a/=6,a%=1,[a*360,o*100,c*100]};xe.hsl.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t);let s=0;return i<1&&(s=(t-.5*i)/(1-i)),[n[0],i*100,s*100]};xe.hsv.hcg=function(n){const e=n[1]/100,t=n[2]/100,i=e*t;let s=0;return i<1&&(s=(t-i)/(1-i)),[n[0],i*100,s*100]};xe.hcg.rgb=function(n){const e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];const s=[0,0,0],r=e%1*6,o=r%1,a=1-o;let c=0;switch(Math.floor(r)){case 0:{s[0]=1,s[1]=o,s[2]=0;break}case 1:{s[0]=a,s[1]=1,s[2]=0;break}case 2:{s[0]=0,s[1]=1,s[2]=o;break}case 3:{s[0]=0,s[1]=a,s[2]=1;break}case 4:{s[0]=o,s[1]=0,s[2]=1;break}default:s[0]=1,s[1]=0,s[2]=a}return c=(1-t)*i,[(t*s[0]+c)*255,(t*s[1]+c)*255,(t*s[2]+c)*255]};xe.hcg.hsv=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);let s=0;return i>0&&(s=e/i),[n[0],s*100,i*100]};xe.hcg.hsl=function(n){const e=n[1]/100,i=n[2]/100*(1-e)+.5*e;let s=0;return i>0&&i<.5?s=e/(2*i):i>=.5&&i<1&&(s=e/(2*(1-i))),[n[0],s*100,i*100]};xe.hcg.hwb=function(n){const e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};xe.hwb.hcg=function(n){const e=n[1]/100,i=1-n[2]/100,s=i-e;let r=0;return s<1&&(r=(i-s)/(1-s)),[n[0],s*100,r*100]};xe.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};xe.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};xe.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};xe.gray.hsl=function(n){return[0,0,n[0]]};xe.gray.hsv=xe.gray.hsl;xe.gray.hwb=function(n){return[0,100,n[0]]};xe.gray.cmyk=function(n){return[0,0,0,n[0]]};xe.gray.lab=function(n){return[n[0],0,0]};xe.gray.hex=function(n){const e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(i.length)+i};xe.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]};function wve(){const n={},e=Object.keys(xe);for(let{length:t}=e,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function vve(n){const e=wve(),t=[n];for(e[n].distance=0;t.length>0;){const i=t.pop(),s=Object.keys(xe[i]);for(let{length:r}=s,o=0;o<r;o++){const a=s[o],c=e[a];c.distance===-1&&(c.distance=e[i].distance+1,c.parent=i,t.unshift(a))}}return e}function yve(n,e){return function(t){return e(n(t))}}function Ave(n,e){const t=[e[n].parent,n];let i=xe[e[n].parent][n],s=e[n].parent;for(;e[s].parent;)t.unshift(e[s].parent),i=yve(xe[e[s].parent][s],i),s=e[s].parent;return i.conversion=t,i}function _ve(n){const e=vve(n),t={},i=Object.keys(e);for(let{length:s}=i,r=0;r<s;r++){const o=i[r];e[o].parent!==null&&(t[o]=Ave(o,e))}return t}const Zl={},Cve=Object.keys(xe);function xve(n){const e=function(...t){const i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function kve(n){const e=function(...t){const i=t[0];if(i==null)return i;i.length>1&&(t=i);const s=n(t);if(typeof s=="object")for(let{length:r}=s,o=0;o<r;o++)s[o]=Math.round(s[o]);return s};return"conversion"in n&&(e.conversion=n.conversion),e}for(const n of Cve){Zl[n]={},Object.defineProperty(Zl[n],"channels",{value:xe[n].channels}),Object.defineProperty(Zl[n],"labels",{value:xe[n].labels});const e=_ve(n),t=Object.keys(e);for(const i of t){const s=e[i];Zl[n][i]=kve(s),Zl[n][i].raw=xve(s)}}const sm=(n,e=0,t=1)=>n>t?t:n<e?e:n,wi=(n,e=0,t=Math.pow(10,e))=>Math.round(t*n)/t,Eve=n=>Pve(VC(n)),VC=n=>(n[0]==="#"&&(n=n.substring(1)),n.length<6?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?wi(parseInt(n[3]+n[3],16)/255,2):1}:{r:parseInt(n.substring(0,2),16),g:parseInt(n.substring(2,4),16),b:parseInt(n.substring(4,6),16),a:n.length===8?wi(parseInt(n.substring(6,8),16)/255,2):1}),Sve=n=>Rve(Ive(n)),Tve=({h:n,s:e,v:t,a:i})=>{const s=(200-e)*t/100;return{h:wi(n),s:wi(s>0&&s<200?e*t/100/(s<=100?s:200-s)*100:0),l:wi(s/2),a:wi(i,2)}},LC=n=>{const{h:e,s:t,l:i}=Tve(n);return`hsl(${e}, ${t}%, ${i}%)`},Ive=({h:n,s:e,v:t,a:i})=>{n=n/360*6,e=e/100,t=t/100;const s=Math.floor(n),r=t*(1-e),o=t*(1-(n-s)*e),a=t*(1-(1-n+s)*e),c=s%6;return{r:wi([t,o,r,r,a,t][c]*255),g:wi([a,t,t,o,r,r][c]*255),b:wi([r,r,a,t,t,o][c]*255),a:wi(i,2)}},zp=n=>{const e=n.toString(16);return e.length<2?"0"+e:e},Rve=({r:n,g:e,b:t,a:i})=>{const s=i<1?zp(wi(i*255)):"";return"#"+zp(n)+zp(e)+zp(t)+s},Pve=({r:n,g:e,b:t,a:i})=>{const s=Math.max(n,e,t),r=s-Math.min(n,e,t),o=r?s===n?(e-t)/r:s===e?2+(t-n)/r:4+(n-e)/r:0;return{h:wi(60*(o<0?o+6:o)),s:wi(s?r/s*100:0),v:wi(s/255*100),a:i}},D8=(n,e)=>{if(n===e)return!0;for(const t in n)if(n[t]!==e[t])return!1;return!0},Ove=(n,e)=>n.toLowerCase()===e.toLowerCase()?!0:D8(VC(n),VC(e)),bD={},M8=n=>{let e=bD[n];return e||(e=document.createElement("template"),e.innerHTML=n,bD[n]=e),e},YE=(n,e,t)=>{n.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))};let cd=!1;const FC=n=>"touches"in n,Dve=n=>cd&&!FC(n)?!1:(cd||(cd=FC(n)),!0),wD=(n,e)=>{const t=FC(e)?e.touches[0]:e,i=n.el.getBoundingClientRect();YE(n.el,"move",n.getMove({x:sm((t.pageX-(i.left+window.pageXOffset))/i.width),y:sm((t.pageY-(i.top+window.pageYOffset))/i.height)}))},Mve=(n,e)=>{const t=e.keyCode;t>40||n.xy&&t<37||t<33||(e.preventDefault(),YE(n.el,"move",n.getMove({x:t===39?.01:t===37?-.01:t===34?.05:t===33?-.05:t===35?1:t===36?-1:0,y:t===40?.01:t===38?-.01:0},!0)))};class B8{constructor(e,t,i,s){const r=M8(`<div role="slider" tabindex="0" part="${t}" ${i}><div part="${t}-pointer"></div></div>`);e.appendChild(r.content.cloneNode(!0));const o=e.querySelector(`[part=${t}]`);o.addEventListener("mousedown",this),o.addEventListener("touchstart",this),o.addEventListener("keydown",this),this.el=o,this.xy=s,this.nodes=[o.firstChild,o]}set dragging(e){const t=e?document.addEventListener:document.removeEventListener;t(cd?"touchmove":"mousemove",this),t(cd?"touchend":"mouseup",this)}handleEvent(e){switch(e.type){case"mousedown":case"touchstart":if(e.preventDefault(),!Dve(e)||!cd&&e.button!=0)return;this.el.focus(),wD(this,e),this.dragging=!0;break;case"mousemove":case"touchmove":e.preventDefault(),wD(this,e);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":Mve(this,e);break}}style(e){e.forEach((t,i)=>{for(const s in t)this.nodes[i].style.setProperty(s,t[s])})}}class Bve extends B8{constructor(e){super(e,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:e}){this.h=e,this.style([{left:`${e/360*100}%`,color:LC({h:e,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${wi(e)}`)}getMove(e,t){return{h:t?sm(this.h+e.x*360,0,360):360*e.x}}}class Nve extends B8{constructor(e){super(e,"saturation",'aria-label="Color"',!0)}update(e){this.hsva=e,this.style([{top:`${100-e.v}%`,left:`${e.s}%`,color:LC(e)},{"background-color":LC({h:e.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${wi(e.s)}%, Brightness ${wi(e.v)}%`)}getMove(e,t){return{s:t?sm(this.hsva.s+e.x*100,0,100):e.x*100,v:t?sm(this.hsva.v-e.y*100,0,100):Math.round(100-e.y*100)}}}const Vve=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',Lve="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",Fve="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",jp=Symbol("same"),z_=Symbol("color"),vD=Symbol("hsva"),j_=Symbol("update"),yD=Symbol("parts"),AD=Symbol("css"),_D=Symbol("sliders");class zve extends HTMLElement{static get observedAttributes(){return["color"]}get[AD](){return[Vve,Lve,Fve]}get[_D](){return[Nve,Bve]}get color(){return this[z_]}set color(e){if(!this[jp](e)){const t=this.colorModel.toHsva(e);this[j_](t),this[z_]=e}}constructor(){super();const e=M8(`<style>${this[AD].join("")}</style>`),t=this.attachShadow({mode:"open"});t.appendChild(e.content.cloneNode(!0)),t.addEventListener("move",this),this[yD]=this[_D].map(i=>new i(t))}connectedCallback(){if(this.hasOwnProperty("color")){const e=this.color;delete this.color,this.color=e}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(e,t,i){const s=this.colorModel.fromAttr(i);this[jp](s)||(this.color=s)}handleEvent(e){const t=this[vD],i={...t,...e.detail};this[j_](i);let s;!D8(i,t)&&!this[jp](s=this.colorModel.fromHsva(i))&&(this[z_]=s,YE(this,"color-changed",{value:s}))}[jp](e){return this.color&&this.colorModel.equal(e,this.color)}[j_](e){this[vD]=e,this[yD].forEach(t=>t.update(e))}}const jve={defaultColor:"#000",toHsva:Eve,fromHsva:({h:n,s:e,v:t})=>Sve({h:n,s:e,v:t,a:1}),equal:Ove,fromAttr:n=>n};class Uve extends zve{get colorModel(){return jve}}class ei extends Wn{_parentElement;constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",(t,i,s)=>{this._renderViewIntoCollectionParent(i,s)}),this.on("remove",(t,i)=>{i.element&&this._parentElement&&i.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(const t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!Hve(e))throw new D("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(const i of this)for(const s of e)i.delegate(s).to(t);this.on("add",(i,s)=>{for(const r of e)s.delegate(r).to(t)}),this.on("remove",(i,s)=>{for(const r of e)s.stopDelegating(r,t)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}remove(e){return super.remove(e)}}function Hve(n){return n.every(e=>typeof e=="string")}const Wve="http://www.w3.org/1999/xhtml";class Vi extends Ot(){ns;tag;text;attributes;children;eventListeners;_isRendered;_revertData;constructor(e){super(),Object.assign(this,xD(CD(e))),this._isRendered=!1,this._revertData=null}render(){const e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=SD(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new D("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(t){if(t.children)for(const i of t.children)Sw(i)?yield i:KE(i)&&(yield*e(i))}yield*e(this)}static bind(e,t){return{to(i,s){return new $ve({eventNameOrFunction:i,attribute:i,observable:e,emitter:t,callback:s})},if(i,s,r){return new N8({observable:e,emitter:t,attribute:i,valueIfTrue:s,callback:r})}}}static extend(e,t){if(e._isRendered)throw new D("template-extend-render",[this,e]);z8(e,xD(CD(t)))}_renderNode(e){let t;if(e.node?t=this.tag&&this.text:t=this.tag?this.text:!this.text,t)throw new D("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||Wve,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),_b(this.text)?this._bindToObservable({schema:this.text,updater:Yve(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){if(!this.attributes)return;const t=e.node,i=e.revertData;for(const s in this.attributes){const r=t.getAttribute(s),o=this.attributes[s];i&&(i.attributes[s]=r);const a=ED(o)?o[0].ns:null;if(_b(o)){const c=ED(o)?o[0].value:o;i&&TD(s)&&c.unshift(r),this._bindToObservable({schema:c,updater:Kve(t,s,a),data:e})}else if(s=="style"&&typeof o[0]!="string")this._renderStyleAttribute(o[0],e);else{i&&r&&TD(s)&&o.unshift(r);const c=o.map(d=>d&&(d.value||d)).reduce((d,h)=>d.concat(h),[]).reduce(F8,"");_d(c)||t.setAttributeNS(a,s,c)}}}_renderStyleAttribute(e,t){const i=t.node;for(const s in e){const r=e[s];_b(r)?this._bindToObservable({schema:[r],updater:qve(i,s),data:t}):zC(s)?i.style.setProperty(s,r):i.style[s]=r}}_renderElementChildren(e){const t=e.node,i=e.intoFragment?document.createDocumentFragment():t,s=e.isApplying;let r=0;for(const o of this.children)if(qE(o)){if(!s){o.setParent(t);for(const a of o)i.appendChild(a.element)}}else if(Sw(o))s||(o.isRendered||o.render(),i.appendChild(o.element));else if(al(o))i.appendChild(o);else if(s){const a=e.revertData,c=SD();a.children.push(c),o._renderNode({intoFragment:!1,node:i.childNodes[r++],isApplying:!0,revertData:c})}else i.appendChild(o.render());e.intoFragment&&t.appendChild(i)}_setUpListeners(e){if(this.eventListeners)for(const t in this.eventListeners){const i=this.eventListeners[t].map(s=>{const[r,o]=t.split("@");return s.activateDomEventListener(r,o,e)});e.revertData&&e.revertData.bindings.push(i)}}_bindToObservable({schema:e,updater:t,data:i}){const s=i.revertData;V8(e,t,i);const r=e.filter(o=>!_d(o)).filter(o=>o.observable).map(o=>o.activateAttributeListener(e,t,i));s&&s.bindings.push(r)}_revertTemplateFromNode(e,t){for(const s of t.bindings)for(const r of s)r();if(t.text){e.textContent=t.text;return}const i=e;for(const s in t.attributes){const r=t.attributes[s];r===null?i.removeAttribute(s):i.setAttribute(s,r)}for(let s=0;s<t.children.length;++s)this._revertTemplateFromNode(i.childNodes[s],t.children[s])}}class Fm{attribute;observable;emitter;callback;constructor(e){this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){const t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,i){const s=()=>V8(e,t,i);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,s),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,s)}}}class $ve extends Fm{eventNameOrFunction;constructor(e){super(e),this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,t,i){const s=(r,o)=>{(!t||o.target.matches(t))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(o):this.observable.fire(this.eventNameOrFunction,o))};return this.emitter.listenTo(i.node,e,s),()=>{this.emitter.stopListening(i.node,e,s)}}}class N8 extends Fm{valueIfTrue;constructor(e){super(e),this.valueIfTrue=e.valueIfTrue}getValue(e){const t=super.getValue(e);return _d(t)?!1:this.valueIfTrue||!0}}function _b(n){return n?(n.value&&(n=n.value),Array.isArray(n)?n.some(_b):n instanceof Fm):!1}function zC(n){return/^--[a-zA-Z_-][\w-]*$/.test(n)}function Gve(n,e){return n.map(t=>t instanceof Fm?t.getValue(e):t)}function V8(n,e,{node:t}){const i=Gve(n,t);let s;n.length==1&&n[0]instanceof N8?s=i[0]:s=i.reduce(F8,""),_d(s)?e.remove():e.set(s)}function Yve(n){return{set(e){n.textContent=e},remove(){n.textContent=""}}}function Kve(n,e,t){return{set(i){n.setAttributeNS(t,e,i)},remove(){n.removeAttributeNS(t,e)}}}function qve(n,e){return{set(t){zC(e)?n.style.setProperty(e,t):n.style[e]=t},remove(){zC(e)?n.style.removeProperty(e):n.style[e]=null}}}function CD(n){return Jv(n,t=>{if(t&&(t instanceof Fm||KE(t)||Sw(t)||qE(t)))return t})}function xD(n){if(typeof n=="string"?n=Jve(n):n.text&&Xve(n),n.on&&(n.eventListeners=Zve(n.on),delete n.on),!n.text){n.attributes&&Qve(n.attributes);const e=[];if(n.children)if(qE(n.children))e.push(n.children);else for(const t of n.children)KE(t)||Sw(t)||al(t)?e.push(t):e.push(new Vi(t));n.children=e}return n}function Qve(n){for(const e in n)n[e].value&&(n[e].value=yt(n[e].value)),L8(n,e)}function Zve(n){for(const e in n)L8(n,e);return n}function Jve(n){return{text:[n]}}function Xve(n){n.text=yt(n.text)}function L8(n,e){n[e]=yt(n[e])}function F8(n,e){return _d(e)?n:_d(n)?e:`${n} ${e}`}function kD(n,e){for(const t in e)n[t]?n[t].push(...e[t]):n[t]=e[t]}function z8(n,e){if(e.attributes&&(n.attributes||(n.attributes={}),kD(n.attributes,e.attributes)),e.eventListeners&&(n.eventListeners||(n.eventListeners={}),kD(n.eventListeners,e.eventListeners)),e.text&&n.text.push(...e.text),e.children&&e.children.length){if(n.children.length!=e.children.length)throw new D("ui-template-extend-children-mismatch",n);let t=0;for(const i of e.children)z8(n.children[t++],i)}}function _d(n){return!n&&n!==0}function Sw(n){return n instanceof we}function KE(n){return n instanceof Vi}function qE(n){return n instanceof ei}function ED(n){return Fi(n[0])&&n[0].ns}function SD(){return{children:[],bindings:[],attributes:{}}}function TD(n){return n=="class"||n=="style"}class we extends Wi(kt()){element;isRendered;locale;t;template;_viewCollections;_unboundChildren;_bindTemplate;constructor(e){super(),this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new Wn,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(t,i)=>{i.locale=e,i.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Vi.bind(this,this)}createCollection(e){const t=new ei(e);return this._viewCollections.add(t),t}registerChild(e){Is(e)||(e=[e]);for(const t of e)this._unboundChildren.add(t)}deregisterChild(e){Is(e)||(e=[e]);for(const t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new Vi(e)}extendTemplate(e){Vi.extend(this.template,e)}render(){if(this.isRendered)throw new D("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}}const ID={POLITE:"polite",ASSERTIVE:"assertive"};class eye{editor;view;constructor(e){this.editor=e,e.once("ready",()=>{for(const t of Object.values(ID))this.announce("",t)})}announce(e,t=ID.POLITE){const i=this.editor;if(!i.ui.view)return;this.view||(this.view=new tye(i.locale),i.ui.view.body.add(this.view));const{politeness:s,isUnsafeHTML:r}=typeof t=="string"?{politeness:t}:t;let o=this.view.regionViews.find(a=>a.politeness===s);o||(o=new nye(i,s),this.view.regionViews.add(o)),o.announce({announcement:e,isUnsafeHTML:r})}}class tye extends we{regionViews;constructor(e){super(e),this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class nye extends we{politeness;_domConverter;_pruneAnnouncementsInterval;constructor(e,t){super(e.locale),this.setTemplate({tag:"div",attributes:{"aria-live":t,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=t,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:t}){if(!e.trim().length)return;const i=document.createElement("li");t?this._domConverter.setContentOf(i,e):i.innerText=e,this._listElement.appendChild(i)}get _listElement(){return this.element.querySelector("ul")}}function _l({emitter:n,activator:e,callback:t,contextElements:i,listenerOptions:s}){n.listenTo(document,"mousedown",(r,o)=>{if(!e())return;const a=typeof o.composedPath=="function"?o.composedPath():[],c=typeof i=="function"?i():i;for(const d of c)if(d.contains(o.target)||a.includes(d))return;t()},s)}function Cd(n){class e extends n{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...i){super(...i),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.template&&this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return e}function iye(n){class e extends n{_onDragBound=this._onDrag.bind(this);_onDragEndBound=this._onDragEnd.bind(this);_lastDraggingCoordinates={x:0,y:0};constructor(...i){super(...i),this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(me.document,"mouseup",this._onDragEndBound),this.listenTo(me.document,"touchend",this._onDragEndBound),this.listenTo(me.document,"mousemove",this._onDragBound),this.listenTo(me.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(me.document,"mouseup",this._onDragEndBound),this.stopListening(me.document,"touchend",this._onDragEndBound),this.stopListening(me.document,"mousemove",this._onDragBound),this.stopListening(me.document,"touchmove",this._onDragBound)}_onDragStart(i,s){if(!this._isHandleElementPressed(s))return;this._attachDragListeners();let r=0,o=0;s instanceof MouseEvent?(r=s.clientX,o=s.clientY):(r=s.touches[0].clientX,o=s.touches[0].clientY),this._lastDraggingCoordinates={x:r,y:o},this.isDragging=!0}_onDrag(i,s){if(!this.isDragging){this._detachDragListeners();return}let r=0,o=0;s instanceof MouseEvent?(r=s.clientX,o=s.clientY):(r=s.touches[0].clientX,o=s.touches[0].clientY),s.preventDefault(),this.fire("drag",{deltaX:Math.round(r-this._lastDraggingCoordinates.x),deltaY:Math.round(o-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:r,y:o}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(i){return this.dragHandleElement?this.dragHandleElement===i.target||i.target instanceof HTMLElement&&this.dragHandleElement.contains(i.target):!1}}return e}function va({view:n}){n.listenTo(n.element,"submit",(e,t)=>{t.preventDefault(),n.fire("submit")},{useCapture:!0})}function uy({keystrokeHandler:n,focusTracker:e,gridItems:t,numberOfColumns:i,uiLanguageDirection:s}){const r=typeof i=="number"?()=>i:i;n.set("arrowright",o((d,h)=>s==="rtl"?c(d,h.length):a(d,h.length))),n.set("arrowleft",o((d,h)=>s==="rtl"?a(d,h.length):c(d,h.length))),n.set("arrowup",o((d,h)=>{let m=d-r();return m<0&&(m=d+r()*Math.floor(h.length/r()),m>h.length-1&&(m-=r())),m})),n.set("arrowdown",o((d,h)=>{let m=d+r();return m>h.length-1&&(m=d%r()),m}));function o(d){return h=>{const m=t.find(A=>A.element===e.focusedElement),p=t.getIndex(m),w=d(p,t);t.get(w).focus(),h.stopPropagation(),h.preventDefault()}}function a(d,h){return d===h-1?0:d+1}function c(d,h){return d===0?h-1:d-1}}class Ys extends we{id;constructor(e){super(e),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${li()}`;const t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}}class sye extends we{constructor(e,t){super(e);const i=e.t,s=new Ys;s.text=i("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":s.id,role:"document",tabindex:-1},children:[si(document,"p",{},i("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),s]})}focus(){this.element.focus()}_createCategories(e){return e.map(t=>{const i=[si(document,"h3",{},t.label),...Array.from(t.groups.values()).map(s=>this._createGroup(s)).flat()];return t.description&&i.splice(1,0,si(document,"p",{},t.description)),si(document,"section",{},i)})}_createGroup(e){const t=e.keystrokes.sort((s,r)=>s.label.localeCompare(r.label)).map(s=>this._createGroupRow(s)).flat(),i=[si(document,"dl",{},t)];return e.label&&i.unshift(si(document,"h4",{},e.label)),i}_createGroupRow(e){const t=this.locale.t,i=si(document,"dt"),s=si(document,"dd"),r=oye(e.keystroke),o=[];for(const a of r)o.push(a.map(rye).join(""));return i.innerHTML=e.label,s.innerHTML=o.join(", ")+(e.mayRequireFn&&Pe.isMac?` ${t("(may require <kbd>Fn</kbd>)")}`:""),[i,s]}}function rye(n){return ww(n).split("+").map(e=>`<kbd>${e}</kbd>`).join("+")}function oye(n){return typeof n=="string"?[[n]]:typeof n[0]=="string"?[n]:n}class Br extends we{static presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];constructor(){super();const e=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",e.if("isVisible","ck-hidden",t=>!t),"ck-reset_all-excluded",e.if("isColorInherited","ck-icon_inherit-color")],viewBox:e.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const t=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg");if(!t)throw new D("ui-iconview-invalid-svg",this);const i=t.getAttribute("viewBox");i&&(this.viewBox=i);for(const{name:s,value:r}of Array.from(t.attributes))Br.presentationalAttributeNames.includes(s)&&this.element.setAttribute(s,r);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(e=>{e.style.fill=this.fillColor})}}class j8 extends we{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}}class Se extends we{children;labelView;iconView;keystrokeView;_focusDelayed=null;constructor(e,t=new j8){super(e);const i=this.bindTemplate,s=li();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${s}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(t),this.iconView=new Br,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.iconView.bind("content").to(this,"icon"),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const r={tag:"button",attributes:{class:["ck","ck-button",i.to("class"),i.if("isEnabled","ck-disabled",o=>!o),i.if("isVisible","ck-hidden",o=>!o),i.to("isOn",o=>o?"ck-on":"ck-off"),i.if("withText","ck-button_with-text"),i.if("withKeystroke","ck-button_with-keystroke")],role:i.to("role"),type:i.to("type",o=>o||"button"),tabindex:i.to("tabindex"),"aria-checked":i.to("_ariaChecked"),"aria-pressed":i.to("_ariaPressed"),"aria-label":i.to("ariaLabel"),"aria-labelledby":i.to("ariaLabelledBy"),"aria-disabled":i.if("isEnabled",!0,o=>!o),"data-cke-tooltip-text":i.to("_tooltipString"),"data-cke-tooltip-position":i.to("tooltipPosition")},children:this.children,on:{click:i.to(o=>{this.isEnabled?this.fire("execute"):o.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(o,a,c)=>!a||RD(c)?!1:String(!!o)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(o,a,c)=>!a||!RD(c)?!1:String(!!o)),Pe.isSafari&&(this._focusDelayed||(this._focusDelayed=kE(()=>this.focus(),0)),r.on.mousedown=i.to(()=>{this._focusDelayed()}),r.on.mouseup=i.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(r)}render(){super.render(),this.icon&&this.children.add(this.iconView),this.on("change:icon",(e,t,i,s)=>{i&&!s?this.children.add(this.iconView,0):!i&&s&&this.children.remove(this.iconView)}),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){const e=new we;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>ww(t))}]}),e}_getTooltipString(e,t,i){return e?typeof e=="string"?e:(i&&(i=ww(i)),e instanceof Function?e(t,i):`${t}${i?` (${i})`:""}`):""}}function RD(n){switch(n){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class ya extends we{children;iconView;constructor(e,t={}){super(e);const i=this.bindTemplate;this.set("label",t.label||""),this.set("class",t.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",i.to("class")]},children:this.children}),t.icon&&(this.iconView=new Br,this.iconView.content=t.icon,this.children.add(this.iconView));const s=new we(e);s.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:i.to("label")}]}),this.children.add(s)}}class ui extends Ot(){focusables;focusTracker;keystrokeHandler;actions;constructor(e){if(super(),this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(const t in e.actions){let i=e.actions[t];typeof i=="string"&&(i=[i]);for(const s of i)e.keystrokeHandler.set(s,(r,o)=>{this[t](),o()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(U_)||null}get last(){return this.focusables.filter(U_).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((t,i)=>{const s=t.element===this.focusTracker.focusedElement;return s&&(e=i),s}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){const e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){const t=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",i=>{const s=t();this.focusNext(),s!==t()&&i.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",i=>{const s=t();this.focusPrevious(),s!==t()&&i.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,t){e&&this.focusTracker.focusedElement!==e.element&&e.focus(t)}_getDomFocusableItem(e){const t=this.focusables.length;if(!t)return null;const i=this.current;if(i===null)return this[e===1?"first":"last"];let s=this.focusables.get(i),r=(i+t+e)%t;do{const o=this.focusables.get(r);if(U_(o)){s=o;break}r=(r+t+e)%t}while(r!==i);return s}}function U_(n){return zm(n)&&no(n.element)}function zm(n){return"focus"in n&&typeof n.focus=="function"}function aye(n){return zm(n)&&"focusCycler"in n&&n.focusCycler instanceof ui}class lye extends we{children;keystrokes;focusCycler;_focusTracker;_focusables;constructor(e){super(e),this.children=this.createCollection(),this.keystrokes=new Ht,this._focusTracker=new St,this._focusables=new ei,this.focusCycler=new ui({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(const t of e){const i=new Se(this.locale);let s;i.on("execute",()=>t.onExecute()),t.onCreate&&t.onCreate(i);for(s in t)s!="onExecute"&&s!="onCreate"&&i.set(s,t[s]);this.children.add(i)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}}class cye extends we{children;constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const vs={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},PD=wa("px");class rm extends iye(we){parts;headerView;closeButtonView;actionsView;static defaultOffset=15;contentView;keystrokes;focusTracker;wasMoved=!1;_getCurrentDomRoot;_getViewportOffset;_focusables;_focusCycler;constructor(e,{getCurrentDomRoot:t,getViewportOffset:i,keystrokeHandlerOptions:s}){super(e);const r=this.bindTemplate,o=e.t;this.set("className",""),this.set("ariaLabel",o("Editor dialog")),this.set("isModal",!1),this.set("position",vs.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=t,this._getViewportOffset=i,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new Ht,this.focusTracker=new St,this._focusables=new ei,this._focusCycler=new ui({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:s}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",r.if("isModal","ck-dialog-overlay__transparent",a=>!a),r.if("_isVisible","ck-hidden",a=>!a)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",r.if("isModal","ck-dialog_modal"),r.to("className")],role:"dialog","aria-label":r.to("ariaLabel"),style:{top:r.to("_top",a=>PD(a)),left:r.to("_left",a=>PD(a)),visibility:r.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(e,t)=>{e.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),t())}),this.on("drag",(e,{deltaX:t,deltaY:i})=>{this.wasMoved=!0,this.moveBy(t,i)}),this.listenTo(me.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(me.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(e,t,i)=>{i&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:e,title:t,hasCloseButton:i=!0,content:s,actionButtons:r}){t&&(this.headerView=new ya(this.locale,{icon:e}),i&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=t,this.ariaLabel=t,this.parts.add(this.headerView,0)),s&&(s instanceof we&&(s=[s]),this.contentView=new cye(this.locale),this.contentView.children.addMany(s),this.parts.add(this.contentView)),r&&(this.actionsView=new lye(this.locale),this.actionsView.setButtons(r),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(e,t){const i=this._getViewportRect(),s=this._getDialogRect();e+s.width>i.right&&(e=i.right-s.width),e<i.left&&(e=i.left),t<i.top&&(t=i.top),this._moveTo(e,t)}_moveTo(e,t){this._left=e,this._top=t}moveBy(e,t){this.moveTo(this._left+e,this._top+t)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const e=this._getViewportRect();let t=this.position,i;this._getCurrentDomRoot()?i=this._getVisibleDomRootRect(e):t=vs.SCREEN_CENTER;const s=rm.defaultOffset,r=this._getDialogRect();if(this.position!=null){if(typeof this.position=="function"){const o=this.position(r,i);if(o==null){this._moveOffScreen();return}this._moveTo(o.left,o.top);return}switch(t){case vs.EDITOR_TOP_SIDE:{if(i){const o=this.locale.contentLanguageDirection==="ltr"?i.right-r.width-s:i.left+s;this.moveTo(o,i.top+s)}else this._moveOffScreen();break}case vs.EDITOR_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-r.width/2),Math.round(i.top+i.height/2-r.height/2)):this._moveOffScreen();break}case vs.SCREEN_CENTER:{this.moveTo(Math.round((e.width-r.width)/2),Math.round((e.height-r.height)/2));break}case vs.EDITOR_TOP_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-r.width/2),i.top+s):this._moveOffScreen();break}case vs.EDITOR_BOTTOM_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-r.width/2),i.bottom-r.height-s):this._moveOffScreen();break}case vs.EDITOR_ABOVE_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-r.width/2),i.top-r.height-s):this._moveOffScreen();break}case vs.EDITOR_BELOW_CENTER:{i?this.moveTo(Math.round(i.left+i.width/2-r.width/2),i.bottom+s):this._moveOffScreen();break}}}}_getVisibleDomRootRect(e){let t=new Le(this._getCurrentDomRoot()).getVisible();if(t){if(t=e.getIntersection(t),!t)return null}else return null;return t}_getDialogRect(){return new Le(this.element.firstElementChild)}_getViewportRect(){const e=new Le(me.window);return this.isModal?e:b6(this._getViewportOffset())}_updateFocusCyclableItems(){const e=[];if(this.contentView)for(const t of this.contentView.children)zm(t)&&e.push(t);this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element),aye(t)&&this._focusCycler.chain(t.focusCycler)})}_createCloseButton(){const e=new Se(this.locale),t=this.locale.t;return e.set({label:t("Close"),tooltip:!0,icon:Vm}),e.on("execute",()=>this.fire("close",{source:"closeButton"})),e}}class ns extends z{view;static _visibleDialogPlugin;_onHide;static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}constructor(e){super(e);const t=e.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),e.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:t("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}destroy(){super.destroy(),ns._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(e,t)=>{this._show(t)}),this.on("show",(e,t)=>{t.onShow&&t.onShow(this)},{priority:"low"}),this.on("hide",()=>{ns._visibleDialogPlugin&&ns._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const e=this.editor;e.keystrokes.set("Ctrl+F6",(t,i)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?e.editing.view.focus():this.view.focus(),i())})}_initMultiRootIntegration(){const e=this.editor.model;e.document.on("change:data",()=>{if(!this.view)return;const t=e.document.differ.getChangedRoots();for(const i of t)i.state&&this.view.updatePosition()})}show(e){this.hide(),this.fire(`show:${e.id}`,e)}_show({id:e,icon:t,title:i,hasCloseButton:s=!0,content:r,actionButtons:o,className:a,isModal:c,position:d,onHide:h,keystrokeHandlerOptions:m}){const p=this.editor;this.view=new rm(p.locale,{getCurrentDomRoot:()=>p.editing.view.getDomRoot(p.model.document.selection.anchor.root.rootName),getViewportOffset:()=>p.ui.viewportOffset,keystrokeHandlerOptions:m});const w=this.view;w.on("close",()=>{this.hide()}),p.ui.view.body.add(w),p.keystrokes.listenTo(w.element),d||(d=c?vs.SCREEN_CENTER:vs.EDITOR_CENTER),c&&this._lockBodyScroll(),w.set({position:d,_isVisible:!0,className:a,isModal:c}),w.setupParts({icon:t,title:i,hasCloseButton:s,content:r,actionButtons:o}),this.id=e,h&&(this._onHide=h),this.isOpen=!0,ns._visibleDialogPlugin=this}hide(){ns._visibleDialogPlugin&&ns._visibleDialogPlugin.fire(`hide:${ns._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const e=this.editor,t=this.view;t.isModal&&this._unlockBodyScroll(),t.contentView&&t.contentView.reset(),e.ui.view.body.remove(t),e.ui.focusTracker.remove(t.element),e.keystrokes.stopListening(t.element),t.destroy(),e.editing.view.focus(),this.id=null,this.isOpen=!1,ns._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}}class Ud extends Se{_checkIconHolderView=new uye;constructor(e,t=new j8){super(e,t),this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",i.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(s,r)=>s||r)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,t,i)=>{const{children:s,_checkIconHolderView:r}=this;i?s.add(r,0):s.remove(r)})}}class uye extends we{children;_checkIconView=this._createCheckIconView();constructor(){super();const e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",t=>t?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,t,i)=>{const{children:s,_checkIconView:r}=this;i&&!s.has(r)?s.add(r):!i&&s.has(r)&&s.remove(r)})}_createCheckIconView(){const e=new Br;return e.content=Lm,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}}class xn extends Ud{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class dye extends z{contentView=null;static get requires(){return[ns]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{const i=this._createButton(Se);return i.set({tooltip:!0,withText:!1,label:t("Accessibility help")}),i}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const i=this._createButton(xn);return i.label=t("Accessibility"),i}),e.keystrokes.set("Alt+0",(i,s)=>{this._toggleDialog(),s()}),this._setupRootLabels()}_createButton(e){const t=this.editor,i=t.plugins.get("Dialog"),s=t.locale,r=new e(s);return r.set({keystroke:"Alt+0",icon:aD,isToggleable:!0}),r.on("execute",()=>this._toggleDialog()),r.bind("isOn").to(i,"id",o=>o==="accessibilityHelp"),r}_setupRootLabels(){const e=this.editor,t=e.editing.view,i=e.t;e.ui.on("ready",()=>{t.change(r=>{for(const o of t.document.roots)s(r,o)}),e.on("addRoot",(r,o)=>{const a=e.editing.view.document.getRoot(o.rootName);t.change(c=>s(c,a))},{priority:"low"})});function s(r,o){const c=[o.getAttribute("aria-label"),i("Press %0 for help.",[ww("Alt+0")])].filter(d=>d).join(". ");r.setAttribute("aria-label",c,o)}}_toggleDialog(){const e=this.editor,t=e.plugins.get("Dialog"),i=e.locale.t;this.contentView||(this.contentView=new sye(e.locale,e.accessibility.keystrokeInfos)),t.id==="accessibilityHelp"?t.hide():t.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:i("Accessibility help"),icon:aD,hasCloseButton:!0,content:this.contentView})}}class dr extends ei{locale;_bodyCollectionContainer;static _bodyWrapper;constructor(e,t=[]){super(t),this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Vi({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),(!dr._bodyWrapper||!dr._bodyWrapper.isConnected)&&(dr._bodyWrapper=si(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(dr._bodyWrapper)),dr._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),dr._bodyWrapper&&!dr._bodyWrapper.childElementCount&&(dr._bodyWrapper.remove(),delete dr._bodyWrapper)}}const OD=wa("px"),fye={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}};class rn extends we{content;_pinWhenIsVisibleCallback;_resizeObserver;constructor(e){super(e);const t=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",t.to("position",i=>`ck-balloon-panel_${i}`),t.if("isVisible","ck-balloon-panel_visible"),t.if("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",OD),left:t.to("left",OD)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(e){const t=Cb(e.target);if(t&&!no(t))return!1;this.show();const i=rn.defaultPositions,s=Object.assign({},{element:this.element,positions:[i.southArrowNorth,i.southArrowNorthMiddleWest,i.southArrowNorthMiddleEast,i.southArrowNorthWest,i.southArrowNorthEast,i.northArrowSouth,i.northArrowSouthMiddleWest,i.northArrowSouthMiddleEast,i.northArrowSouthWest,i.northArrowSouthEast,i.viewportStickyNorth],limiter:me.document.body,fitInViewport:!0},e),r=rn._getOptimalPosition(s)||fye,o=parseInt(r.left),a=parseInt(r.top),c=r.name,d=r.config||{},{withArrow:h=!0}=d;return this.top=a,this.left=o,this.position=c,this.withArrow=h,!0}pin(e){this.unpin(),this._startPinning(e)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(e):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(e){if(!this.attachTo(e))return!1;let t=Cb(e.target);const i=e.limiter?Cb(e.limiter):me.document.body;if(this.listenTo(me.document,"scroll",(s,r)=>{const o=r.target,a=t&&o.contains(t),c=i&&o.contains(i);(a||c||!t||!i)&&this.attachTo(e)},{useCapture:!0}),this.listenTo(me.window,"resize",()=>{this.attachTo(e)}),!this._resizeObserver&&(t&&sn(t)&&(t=t.parentElement),t)){const s=()=>{no(t)||this.unpin()};this._resizeObserver=new Nm(t,s)}return!0}_stopPinning(){this.stopListening(me.document,"scroll"),this.stopListening(me.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(e={}){const{sideOffset:t=rn.arrowSideOffset,heightOffset:i=rn.arrowHeightOffset,stickyVerticalOffset:s=rn.stickyVerticalOffset,config:r}=e;return{northWestArrowSouthWest:(c,d)=>({top:o(c,d),left:c.left-t,name:"arrow_sw",...r&&{config:r}}),northWestArrowSouthMiddleWest:(c,d)=>({top:o(c,d),left:c.left-d.width*.25-t,name:"arrow_smw",...r&&{config:r}}),northWestArrowSouth:(c,d)=>({top:o(c,d),left:c.left-d.width/2,name:"arrow_s",...r&&{config:r}}),northWestArrowSouthMiddleEast:(c,d)=>({top:o(c,d),left:c.left-d.width*.75+t,name:"arrow_sme",...r&&{config:r}}),northWestArrowSouthEast:(c,d)=>({top:o(c,d),left:c.left-d.width+t,name:"arrow_se",...r&&{config:r}}),northArrowSouthWest:(c,d)=>({top:o(c,d),left:c.left+c.width/2-t,name:"arrow_sw",...r&&{config:r}}),northArrowSouthMiddleWest:(c,d)=>({top:o(c,d),left:c.left+c.width/2-d.width*.25-t,name:"arrow_smw",...r&&{config:r}}),northArrowSouth:(c,d)=>({top:o(c,d),left:c.left+c.width/2-d.width/2,name:"arrow_s",...r&&{config:r}}),northArrowSouthMiddleEast:(c,d)=>({top:o(c,d),left:c.left+c.width/2-d.width*.75+t,name:"arrow_sme",...r&&{config:r}}),northArrowSouthEast:(c,d)=>({top:o(c,d),left:c.left+c.width/2-d.width+t,name:"arrow_se",...r&&{config:r}}),northEastArrowSouthWest:(c,d)=>({top:o(c,d),left:c.right-t,name:"arrow_sw",...r&&{config:r}}),northEastArrowSouthMiddleWest:(c,d)=>({top:o(c,d),left:c.right-d.width*.25-t,name:"arrow_smw",...r&&{config:r}}),northEastArrowSouth:(c,d)=>({top:o(c,d),left:c.right-d.width/2,name:"arrow_s",...r&&{config:r}}),northEastArrowSouthMiddleEast:(c,d)=>({top:o(c,d),left:c.right-d.width*.75+t,name:"arrow_sme",...r&&{config:r}}),northEastArrowSouthEast:(c,d)=>({top:o(c,d),left:c.right-d.width+t,name:"arrow_se",...r&&{config:r}}),southWestArrowNorthWest:c=>({top:a(c),left:c.left-t,name:"arrow_nw",...r&&{config:r}}),southWestArrowNorthMiddleWest:(c,d)=>({top:a(c),left:c.left-d.width*.25-t,name:"arrow_nmw",...r&&{config:r}}),southWestArrowNorth:(c,d)=>({top:a(c),left:c.left-d.width/2,name:"arrow_n",...r&&{config:r}}),southWestArrowNorthMiddleEast:(c,d)=>({top:a(c),left:c.left-d.width*.75+t,name:"arrow_nme",...r&&{config:r}}),southWestArrowNorthEast:(c,d)=>({top:a(c),left:c.left-d.width+t,name:"arrow_ne",...r&&{config:r}}),southArrowNorthWest:c=>({top:a(c),left:c.left+c.width/2-t,name:"arrow_nw",...r&&{config:r}}),southArrowNorthMiddleWest:(c,d)=>({top:a(c),left:c.left+c.width/2-d.width*.25-t,name:"arrow_nmw",...r&&{config:r}}),southArrowNorth:(c,d)=>({top:a(c),left:c.left+c.width/2-d.width/2,name:"arrow_n",...r&&{config:r}}),southArrowNorthMiddleEast:(c,d)=>({top:a(c),left:c.left+c.width/2-d.width*.75+t,name:"arrow_nme",...r&&{config:r}}),southArrowNorthEast:(c,d)=>({top:a(c),left:c.left+c.width/2-d.width+t,name:"arrow_ne",...r&&{config:r}}),southEastArrowNorthWest:c=>({top:a(c),left:c.right-t,name:"arrow_nw",...r&&{config:r}}),southEastArrowNorthMiddleWest:(c,d)=>({top:a(c),left:c.right-d.width*.25-t,name:"arrow_nmw",...r&&{config:r}}),southEastArrowNorth:(c,d)=>({top:a(c),left:c.right-d.width/2,name:"arrow_n",...r&&{config:r}}),southEastArrowNorthMiddleEast:(c,d)=>({top:a(c),left:c.right-d.width*.75+t,name:"arrow_nme",...r&&{config:r}}),southEastArrowNorthEast:(c,d)=>({top:a(c),left:c.right-d.width+t,name:"arrow_ne",...r&&{config:r}}),westArrowEast:(c,d)=>({top:c.top+c.height/2-d.height/2,left:c.left-d.width-i,name:"arrow_e",...r&&{config:r}}),eastArrowWest:(c,d)=>({top:c.top+c.height/2-d.height/2,left:c.right+i,name:"arrow_w",...r&&{config:r}}),viewportStickyNorth:(c,d,h)=>{const m=new Le(me.document.body).getIntersection(h.getVisible());if(!m)return null;const p=m.getVisible();return!c.getIntersection(p)||!(p.top-c.top-s<d.height&&p.bottom-c.bottom<d.height)?null:{top:p.top+s,left:c.left+c.width/2-d.width/2,name:"arrowless",config:{withArrow:!1,...r}}}};function o(c,d){return c.top-d.height-i}function a(c){return c.bottom+i}}static arrowSideOffset=25;static arrowHeightOffset=10;static stickyVerticalOffset=20;static _getOptimalPosition=CE;static defaultPositions=rn.generatePositions()}function Cb(n){return ca(n)?n:ey(n)?n.commonAncestorContainer:typeof n=="function"?Cb(n()):null}const hye=50,mye=350;class U8 extends Wi(){editor;_balloonView=null;_showBalloonThrottled=hc(()=>this._showBalloon(),50,{leading:!0});_lastFocusedEditableElement=null;_balloonClass;constructor(e,t={}){super(),this.editor=e,this._balloonClass=t.balloonClass,e.on("ready",()=>this._handleEditorReady())}destroy(){const e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const e=this.editor;this._isEnabled()&&e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(t,i,s)=>{this._updateLastFocusedEditableElement(),s?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(t,i,s)=>{this._updateLastFocusedEditableElement(),s&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:this.editor.locale.contentLanguageDirection==="ltr"?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const e=this._getBalloonAttachOptions();e&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const e=this.editor,t=new rn,i=this._createBadgeContent();return t.content.add(i),this._balloonClass&&(t.class=this._balloonClass),e.ui.view.body.add(t),t}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const e=this._getNormalizedConfig(),t=e.side==="right"?gye(this._lastFocusedEditableElement,e):pye(this._lastFocusedEditableElement,e);return{target:this._lastFocusedEditableElement,positions:[t]}}_updateLastFocusedEditableElement(){const e=this.editor,t=e.ui.focusTracker.isFocused,i=e.ui.focusTracker.focusedElement;if(!t||!i){this._lastFocusedEditableElement=null;return}const s=Array.from(e.ui.getEditableElementsNames()).map(r=>e.ui.getEditableElement(r));s.includes(i)?this._lastFocusedEditableElement=i:this._lastFocusedEditableElement=s[0]}}function gye(n,e){return H8(n,e,(t,i)=>t.left+t.width-i.width-e.horizontalOffset)}function pye(n,e){return H8(n,e,t=>t.left+e.horizontalOffset)}function H8(n,e,t){return(i,s)=>{const r=new Le(n);if(r.width<mye||r.height<hye)return null;let o;e.position==="inside"?o=r.bottom-s.height:o=r.bottom-s.height/2,o-=e.verticalOffset;const a=t(r,s),d=i.clone().moveTo(a,o).getIntersection(s.clone().moveTo(a,o)).getVisible();return!d||d.getArea()<s.getArea()?null:{top:o,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}const bye="Powered by";class wye extends U8{constructor(e){super(e,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const e=this.editor;if(e.config.get("ui.poweredBy.forceVisible"))return!0;const i=e.config.get("licenseKey");if(i=="GPL")return!0;const s=EE(i.split(".")[1]);return s?!s.whiteLabel:!0}_createBadgeContent(){return new vye(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const e=super._getNormalizedConfig(),t=this.editor.config.get("ui.poweredBy")||{},i=t.position||e.position,s=i==="inside"?5:e.verticalOffset;return{position:i,side:t.side||e.side,label:t.label===void 0?bye:t.label,verticalOffset:t.verticalOffset!==void 0?t.verticalOffset:s,horizontalOffset:t.horizontalOffset!==void 0?t.horizontalOffset:e.horizontalOffset,forceVisible:!!t.forceVisible}}}class vye extends we{constructor(e,t){super(e);const i=new Br,s=this.bindTemplate;i.set({content:Xwe,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],i],on:{dragstart:s.to(r=>r.preventDefault())}}]})}}class pc extends Se{toggleSwitchView;constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const e=new we;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}}class DD extends W8(Se){}class yye extends W8(Ud){}function W8(n){class e extends n{_fileInputView;constructor(...i){super(...i),this._fileInputView=new Aye(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return e}class Aye extends we{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element?.files?.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}class QE extends we{buttonView;children;constructor(e,t){super(e);const i=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),t&&this.children.addMany(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",i.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:i.if("isCollapsed","hidden"),"aria-labelledby":i.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const e=new Se(this.locale),t=e.bindTemplate;return e.set({withText:!0,icon:cy}),e.extendTemplate({attributes:{"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",i=>!i),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}}function Tw(n,e){const t=n.t,i={Black:t("Black"),"Dim grey":t("Dim grey"),Grey:t("Grey"),"Light grey":t("Light grey"),White:t("White"),Red:t("Red"),Orange:t("Orange"),Yellow:t("Yellow"),"Light green":t("Light green"),Green:t("Green"),Aquamarine:t("Aquamarine"),Turquoise:t("Turquoise"),"Light blue":t("Light blue"),Blue:t("Blue"),Purple:t("Purple")};return e.map(s=>{const r=i[s.label];return r&&r!=s.label&&(s.label=r),s})}function Iw(n){return n.map(_ye).filter(e=>!!e)}function _ye(n){return typeof n=="string"?{model:n,label:n,hasBorder:!1,view:{name:"span",styles:{color:n}}}:{model:n.color,label:n.label||n.color,hasBorder:n.hasBorder===void 0?!1:n.hasBorder,view:{name:"span",styles:{color:`${n.color}`}}}}class $8 extends Se{constructor(e){super(e);const t=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=_we,this.extendTemplate({attributes:{style:{backgroundColor:t.to("color",i=>Pe.isMediaForcedColors?null:i)},class:["ck","ck-color-grid__tile",t.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class MD extends we{columns;items;focusTracker;keystrokes;constructor(e,t){super(e);const i=t&&t.colorDefinitions?t.colorDefinitions:[];this.columns=t?.columns||5;const s={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new St,this.keystrokes=new Ht,this.items.on("add",(r,o)=>{o.isOn=o.color===this.selectedColor}),i.forEach(r=>{const o=new $8;o.set({color:r.color,label:r.label,tooltip:!0,hasBorder:r.options.hasBorder}),o.on("execute",()=>{this.fire("execute",{value:r.color,hasBorder:r.options.hasBorder,label:r.label})}),this.items.add(o)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:s}}),this.on("change:selectedColor",(r,o,a)=>{for(const c of this.items)c.isOn=c.color===a})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const e of this.items)this.focusTracker.add(e.element);this.items.on("add",(e,t)=>{this.focusTracker.add(t.element)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t.element)}),this.keystrokes.listenTo(this.element),uy({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale?.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}function G8(n,e){if(!n)return"";const t=Y8(n);if(!t)return"";if(t.space===e)return n;if(!Eye(t))return"";const s=Zl[t.space][e];if(!s)return"";const r=s(t.space==="hex"?t.hexValue:t.values);return kye(r,e)}function Cye(n){if(!n)return"";const e=Y8(n);return e?e.space==="hex"?e.hexValue:G8(n,"hex"):"#000"}function xye(n,e){customElements.get(n)===void 0&&customElements.define(n,e)}function kye(n,e){switch(e){case"hex":return`#${n}`;case"rgb":return`rgb(${n[0]}, ${n[1]}, ${n[2]})`;case"hsl":return`hsl(${n[0]}, ${n[1]}%, ${n[2]}%)`;case"hwb":return`hwb(${n[0]}, ${n[1]}, ${n[2]})`;case"lab":return`lab(${n[0]}% ${n[1]} ${n[2]})`;case"lch":return`lch(${n[0]}% ${n[1]} ${n[2]})`;default:return""}}function Y8(n){if(n.startsWith("#")){const t=pD(n);return{space:"hex",values:t.values,hexValue:n,alpha:t.alpha}}const e=pD(n);return e.space?e:null}function Eye(n){return Object.keys(Zl).includes(n.space)}class un extends we{fieldView;labelView;statusView;fieldWrapperChildren;constructor(e,t){super(e);const i=`ck-labeled-field-view-${li()}`,s=`ck-labeled-field-view-status-${li()}`;this.fieldView=t(this,i,s),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(i),this.statusView=this._createStatusView(s),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(o,a)=>o||a);const r=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",r.to("class"),r.if("isEnabled","ck-disabled",o=>!o),r.if("isEmpty","ck-labeled-field-view_empty"),r.if("isFocused","ck-labeled-field-view_focused"),r.if("placeholder","ck-labeled-field-view_placeholder"),r.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){const t=new Ys(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){const t=new we(this.locale),i=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",i.if("errorText","ck-labeled-field-view__status_error"),i.if("_statusText","ck-hidden",s=>!s)],id:e,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]}),t}focus(e){this.fieldView.focus(e)}}class Sye extends we{focusTracker;constructor(e){super(e),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new St,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),tabindex:t.to("tabIndex"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById"),"aria-label":t.to("ariaLabel")},on:{input:t.to((...i)=>{this.fire("input",...i),this._updateIsEmpty()}),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,i)=>{this._setDomElementValue(i),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=Tye(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}}function Tye(n){return!n.value}class K8 extends Sye{constructor(e){super(e),this.set("inputMode","text");const t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}}class q8 extends K8{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class Iye extends K8{constructor(e,{min:t,max:i,step:s}={}){super(e);const r=this.bindTemplate;this.set("min",t),this.set("max",i),this.set("step",s),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:r.to("min"),max:r.to("max"),step:r.to("step")}})}}class Rye extends we{children;constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",i=>`ck-dropdown__panel_${i}`),t.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{const s=i.target;s instanceof Element&&s.tagName.toLocaleLowerCase()==="input"||i.preventDefault()})}})}focus(){if(this.children.length){const e=this.children.first;typeof e.focus=="function"?e.focus():lt("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}}class om extends we{buttonView;panelView;focusTracker;keystrokes;listView;toolbarView;menuView;constructor(e,t,i){super(e);const s=this.bindTemplate;this.buttonView=t,this.panelView=i,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Ht,this.focusTracker=new St,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",s.to("class"),s.if("isEnabled","ck-disabled",r=>!r)],id:s.to("id"),"aria-describedby":s.to("ariaDescribedById")},children:[t,i]}),t.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":s.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(t,i,s)=>{if(s)if(this.panelPosition==="auto"){const r=om._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const e=(t,i)=>{this.isOpen&&(this.isOpen=!1,i())};this.keystrokes.set("arrowdown",(t,i)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,i())}),this.keystrokes.set("arrowright",(t,i)=>{this.isOpen&&i()}),this.keystrokes.set("arrowleft",e),this.keystrokes.set("esc",e)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:e,north:t,southEast:i,southWest:s,northEast:r,northWest:o,southMiddleEast:a,southMiddleWest:c,northMiddleEast:d,northMiddleWest:h}=om.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[i,s,a,c,e,r,o,d,h,t]:[s,i,c,a,e,o,r,h,d,t]}get _defaultPanelPositionName(){return this.locale.uiLanguageDirection==="rtl"?"sw":"se"}static defaultPanelPositions={south:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/2,name:"s"}),southEast:e=>({top:e.bottom,left:e.left,name:"se"}),southWest:(e,t)=>({top:e.bottom,left:e.left-t.width+e.width,name:"sw"}),southMiddleEast:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)/4,name:"sme"}),southMiddleWest:(e,t)=>({top:e.bottom,left:e.left-(t.width-e.width)*3/4,name:"smw"}),north:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/2,name:"n"}),northEast:(e,t)=>({top:e.top-t.height,left:e.left,name:"ne"}),northWest:(e,t)=>({top:e.top-t.height,left:e.left-t.width+e.width,name:"nw"}),northMiddleEast:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)/4,name:"nme"}),northMiddleWest:(e,t)=>({top:e.top-t.height,left:e.left-(t.width-e.width)*3/4,name:"nmw"})};static _getOptimalPosition=CE}class Q8 extends Se{arrowView;constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Br;return e.content=cy,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}}class Ir extends we{children;constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",t.if("isVisible","ck-hidden",i=>!i)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class dy extends we{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class xb extends we{labelView;items;children;constructor(e,t=new Ys){super(e);const i=this.bindTemplate,s=new Hd(e);this.set({label:"",isVisible:!0}),this.labelView=t,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,s]),s.set({role:"group",ariaLabelledBy:t.id}),s.focusTracker.destroy(),s.keystrokes.destroy(),this.items=s.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",i.if("isVisible","ck-hidden",r=>!r)]},children:this.children})}focus(){if(this.items){const e=this.items.find(t=>!(t instanceof dy));e&&e.focus()}}}class Hd extends we{focusables;items;focusTracker;keystrokes;_focusCycler;_listItemGroupToChangeListeners=new WeakMap;constructor(e){super(e);const t=this.bindTemplate;this.focusables=new ei,this.items=this.createCollection(),this.focusTracker=new St,this.keystrokes=new Ht,this._focusCycler=new ui({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:t.to("role"),"aria-label":t.to("ariaLabel"),"aria-labelledby":t.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const e of this.items)e instanceof xb?this._registerFocusableItemsGroup(e):e instanceof Ir&&this._registerFocusableListItem(e);this.items.on("change",(e,t)=>{for(const i of t.removed)i instanceof xb?this._deregisterFocusableItemsGroup(i):i instanceof Ir&&this._deregisterFocusableListItem(i);for(const i of Array.from(t.added).reverse())i instanceof xb?this._registerFocusableItemsGroup(i,t.index):this._registerFocusableListItem(i,t.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,t){this.focusTracker.add(e.element),this.focusables.add(e,t)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(t,i)=>{for(const s of i.removed)this._deregisterFocusableListItem(s);for(const s of Array.from(i.added).reverse())this._registerFocusableListItem(s,this.items.getIndex(e)+i.index)}}_registerFocusableItemsGroup(e,t){Array.from(e.items).forEach((s,r)=>{const o=typeof t<"u"?t+r:void 0;this._registerFocusableListItem(s,o)});const i=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,i),e.items.on("change",i)}_deregisterFocusableItemsGroup(e){for(const t of e.items)this._deregisterFocusableListItem(t);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}}class Z8 extends we{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class Pye extends we{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}function Oye(n){return n.bindTemplate.to(e=>{e.target===n.element&&e.preventDefault()})}function fy(n){if(Array.isArray(n))return{items:n,removeItems:[]};const e={items:[],removeItems:[]};return n?{...e,...n}:e}const jC={alignLeft:x8,bold:k8,importExport:Rwe,paragraph:Qwe,plus:Jwe,text:hve,threeVerticalDots:GE,pilcrow:Zwe,dragIndicator:xwe};class da extends we{options;items;focusTracker;keystrokes;itemsView;children;focusables;_focusCycler;_behavior;constructor(e,t){super(e);const i=this.bindTemplate,s=this.t;this.options=t||{},this.set("ariaLabel",s("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.set("isGrouping",!!this.options.shouldGroupWhenFull),this.items=this.createCollection(),this.focusTracker=new St,this.keystrokes=new Ht,this.set("class",void 0),this.set("isCompact",!1),this.set("isVertical",!1),this.itemsView=new Dye(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const r=e.uiLanguageDirection==="rtl";this._focusCycler=new ui({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[r?"arrowright":"arrowleft","arrowup"],focusNext:[r?"arrowleft":"arrowright","arrowdown"]}});const o=["ck","ck-toolbar",i.to("class"),i.if("isCompact","ck-toolbar_compact"),i.if("isGrouping","ck-toolbar_grouping"),i.if("isVertical","ck-toolbar_vertical")];this.options.shouldGroupWhenFull&&this.options.isFloating&&o.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:o,role:i.to("role"),"aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:Oye(this)}}),this._behavior=this.options.shouldGroupWhenFull?new ND(this):new BD(this)}render(){super.render(),this.focusTracker.add(this.element);for(const e of this.items)this.focusTracker.add(e);this.items.on("add",(e,t)=>{this.focusTracker.add(t)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t,i){this.items.addMany(this._buildItemsFromConfig(e,t,i))}switchBehavior(e){this._behavior.type!==e&&(this._behavior.destroy(),this.itemsView.children.clear(),this.focusables.clear(),e==="dynamic"?(this._behavior=new ND(this),this._behavior.render(this),this._behavior.refreshItems()):(this._behavior=new BD(this),this._behavior.render(this)))}_buildItemsFromConfig(e,t,i){const s=fy(e),r=i||s.removeItems;return this._cleanItemsConfiguration(s.items,t,r).map(a=>Fi(a)?this._createNestedToolbarDropdown(a,t,r):a==="|"?new Z8:a==="-"?new Pye:t.create(a)).filter(a=>!!a)}_cleanItemsConfiguration(e,t,i){const s=e.filter((r,o,a)=>r==="|"?!0:i.indexOf(r)!==-1?!1:r==="-"?this.options.shouldGroupWhenFull?(lt("toolbarview-line-break-ignored-when-grouping-items",a),!1):!0:!Fi(r)&&!t.has(r)?(lt("toolbarview-item-unavailable",{item:r}),!1):!0);return this._cleanSeparatorsAndLineBreaks(s)}_cleanSeparatorsAndLineBreaks(e){const t=o=>o!=="-"&&o!=="|",i=e.length,s=e.findIndex(t);if(s===-1)return[];const r=i-e.slice().reverse().findIndex(t);return e.slice(s,r).filter((o,a,c)=>t(o)?!0:!(a>0&&c[a-1]===o))}_createNestedToolbarDropdown(e,t,i){let{label:s,icon:r,items:o,tooltip:a=!0,withText:c=!1}=e;if(o=this._cleanItemsConfiguration(o,t,i),!o.length)return null;const d=this.locale,h=ls(d);return s||lt("toolbarview-nested-toolbar-dropdown-missing-label",e),h.class="ck-toolbar__nested-toolbar-dropdown",h.buttonView.set({label:s,tooltip:a,withText:!!c}),r!==!1?h.buttonView.icon=jC[r]||r||GE:h.buttonView.withText=!0,ZE(h,()=>h.toolbarView._buildItemsFromConfig(o,t,i)),h}}class Dye extends we{children;constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class BD{type="static";constructor(e){e.isGrouping=!1,e.itemsView.children.bindTo(e.items).using(t=>t),e.focusables.bindTo(e.items).using(t=>zm(t)?t:null)}render(){}destroy(){}}class ND{type="dynamic";view;viewChildren;viewFocusables;viewItemsView;viewFocusTracker;viewLocale;ungroupedItems;groupedItems;groupedItemsDropdown;resizeObserver=null;cachedPadding=null;shouldUpdateGroupingOnNextResize=!1;viewElement;constructor(e){this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.view.isGrouping=!0,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(t,i)=>{const s=i.index,r=Array.from(i.added);for(const o of i.removed)s>=this.ungroupedItems.length?this.groupedItems.remove(o):this.ungroupedItems.remove(o);for(let o=s;o<s+r.length;o++){const a=r[o-s];o>this.ungroupedItems.length?this.groupedItems.add(a,o-this.ungroupedItems.length):this.ungroupedItems.add(a,o)}this._updateGrouping()})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.viewChildren.length>1&&(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last)),this.resizeObserver.destroy()}refreshItems(){const e=this.view;if(e.items.length){for(let t=0;t<e.items.length;t++){const i=[...e.items][t];this.ungroupedItems.add(i,t)}this._updateGrouping()}}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!no(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const e=this.groupedItems.length;let t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const e=this.viewElement,t=this.viewLocale.uiLanguageDirection,i=new Le(e.lastChild),s=new Le(e);if(!this.cachedPadding){const r=me.window.getComputedStyle(e),o=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(r[o])}return t==="ltr"?i.right>s.right-this.cachedPadding:i.left<s.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new Nm(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Z8),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const e=this.viewLocale,t=e.t,i=ls(e);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",ZE(i,this.groupedItems),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:GE}),i}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{zm(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class jm extends we{children;actionView;arrowView;keystrokes;focusTracker;constructor(e,t){super(e);const i=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(t),this.arrowView=this._createArrowView(),this.keystrokes=new Ht,this.focusTracker=new St,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",i.to("class"),i.if("isVisible","ck-hidden",s=>!s),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){const t=e||new Se;return e||t.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),t.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),t.delegate("execute").to(this),t}_createArrowView(){const e=new Se,t=e.bindTemplate;return e.icon=cy,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":t.to("isOn"),"aria-haspopup":!0,"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}}function ls(n,e=Q8){const t=typeof e=="function"?new e(n):e,i=new Rye(n),s=new om(n,t,i);return t.bind("isEnabled").to(s),t instanceof jm?t.arrowView.bind("isOn").to(s,"isOpen"):t.bind("isOn").to(s,"isOpen"),Mye(s),s}function ZE(n,e,t={}){n.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),n.isOpen?VD(n,e,t):n.once("change:isOpen",()=>VD(n,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&JE(n,()=>n.toolbarView.items.find(i=>i.isOn))}function VD(n,e,t){const i=n.locale,s=i.t,r=n.toolbarView=new da(i),o=typeof e=="function"?e():e;r.ariaLabel=t.ariaLabel||s("Dropdown toolbar"),t.maxWidth&&(r.maxWidth=t.maxWidth),t.class&&(r.class=t.class),t.isCompact&&(r.isCompact=t.isCompact),t.isVertical&&(r.isVertical=!0),o instanceof ei?r.items.bindTo(o).using(a=>a):r.items.addMany(o),n.panelView.children.add(r),n.focusTracker.add(r),r.items.delegate("execute").to(n)}function Sc(n,e,t={}){n.isOpen?LD(n,e,t):n.once("change:isOpen",()=>LD(n,e,t),{priority:"highest"}),JE(n,()=>n.listView.items.find(i=>i instanceof Ir?i.children.first.isOn:!1))}function LD(n,e,t){const i=n.locale,s=n.listView=new Hd(i),r=typeof e=="function"?e():e;s.ariaLabel=t.ariaLabel,s.role=t.role,X8(n,s.items,r,i),n.panelView.children.add(s),s.items.delegate("execute").to(n)}function JE(n,e){n.on("change:isOpen",()=>{if(!n.isOpen)return;const t=e();t&&(typeof t.focus=="function"?t.focus():lt("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:rs.low-10})}function Mye(n){Bye(n),Nye(n),Vye(n),Lye(n),Fye(n),zye(n)}function Bye(n){_l({emitter:n,activator:()=>n.isRendered&&n.isOpen,callback:()=>{n.isOpen=!1},contextElements:()=>[n.element,...J8(n.focusTracker).filter(e=>!n.element.contains(e))]})}function J8(n){return[...n.elements,...n.externalViews.flatMap(e=>J8(e.focusTracker))]}function Nye(n){n.on("execute",e=>{e.source instanceof pc||(n.isOpen=!1)})}function Vye(n){n.focusTracker.on("change:isFocused",(e,t,i)=>{i||!n.isOpen||(n.isOpen=!1)})}function Lye(n){n.keystrokes.set("arrowdown",(e,t)=>{n.isOpen&&(n.panelView.focus(),t())}),n.keystrokes.set("arrowup",(e,t)=>{n.isOpen&&(n.panelView.focusLast(),t())})}function Fye(n){n.on("change:isOpen",(e,t,i)=>{if(i)return;n.focusTracker.elements.some(r=>r.contains(me.document.activeElement))&&n.buttonView.focus()})}function zye(n){n.on("change:isOpen",(e,t,i)=>{i&&n.panelView.focus()},{priority:"low"})}function X8(n,e,t,i){jye(e),e.bindTo(t).using(s=>{if(s.type==="separator")return new dy(i);if(s.type==="group"){const r=new xb(i);return r.set({label:s.label}),X8(n,r.items,s.items,i),r.items.delegate("execute").to(n),r}else if(s.type==="button"||s.type==="switchbutton"){const r=s.model.role==="menuitemcheckbox"||s.model.role==="menuitemradio",o=new Ir(i);let a;return s.type==="button"?(a=new Ud(i,s.labelView),a.set({isToggleable:r})):a=new pc(i),a.bind(...Object.keys(s.model)).to(s.model),a.delegate("execute").to(o),o.children.add(a),o}return null})}function jye(n){let e=0;const t=r=>!(r instanceof Ir)||!(r.children.first instanceof Ud)?null:r.children.first,i=r=>{const o=t(r);return!o||!o.isToggleable?null:o},s=r=>{for(const o of n){const a=t(o);a&&(a.hasCheckSpace=r)}};n.on("change",(r,o)=>{const a=e>0;for(const d of o.removed)i(d)&&e--;for(const d of o.added){const h=t(d);h&&(h.isToggleable&&e++,h.hasCheckSpace=e>0)}const c=e>0;a!==c&&s(c)})}const os=(n,e,t)=>{const i=new q8(n.locale);return i.set({id:e,ariaDescribedById:t}),i.bind("isReadOnly").to(n,"isEnabled",s=>!s),i.bind("hasError").to(n,"errorText",s=>!!s),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i},e7=(n,e,t)=>{const i=new Iye(n.locale);return i.set({id:e,ariaDescribedById:t,inputMode:"numeric"}),i.bind("isReadOnly").to(n,"isEnabled",s=>!s),i.bind("hasError").to(n,"errorText",s=>!!s),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i},XE=(n,e,t)=>{const i=ls(n.locale);return i.set({id:e,ariaDescribedById:t}),i.bind("isEnabled").to(n),i},Uye=150;class Hye extends we{hexInputRow;_debounceColorPickerEvent;_config;constructor(e,t={}){super(e),this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const i=this.createCollection();t.hideInput||i.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:i}),this._config=t,this._debounceColorPickerEvent=Ts(s=>{this.set("color",s),this.fire("colorSelected",{color:this.color})},Uye,{leading:!0}),this.on("set:color",(s,r,o)=>{s.return=G8(o,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=H_(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),H_(this.color)!=H_(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),xye("hex-color-picker",Uve),this.picker=me.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const e=document.createElement("style");e.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(e)}this.picker.addEventListener("color-changed",e=>{const t=e.detail.value;this._debounceColorPickerEvent(t)})}focus(){!this._config.hideInput&&(Pe.isGecko||Pe.isiOS||Pe.isSafari||Pe.isBlink)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const i=[...this.picker.shadowRoot.children].filter(s=>s.getAttribute("role")==="slider").map(s=>new Wye(s));this.slidersView=this.createCollection(),i.forEach(s=>{this.slidersView.add(s)})}_createInputRow(){const e=this._createColorInput();return new Gye(this.locale,e)}_createColorInput(){const e=new un(this.locale,os),{t}=this.locale;return e.set({label:t("HEX"),class:"color-picker-hex-input"}),e.fieldView.bind("value").to(this,"_hexColor",i=>e.isFocused?e.fieldView.value:i.startsWith("#")?i.substring(1):i),e.fieldView.on("input",()=>{const i=e.fieldView.element.value;if(i){const s=t7(i);s&&this._debounceColorPickerEvent(s)}}),e}isValid(){const{t:e}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=e('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function H_(n){let e=Cye(n);return e||(e="#000"),e.length===4&&(e="#"+[e[1],e[1],e[2],e[2],e[3],e[3]].join("")),e.toLowerCase()}class Wye extends we{constructor(e){super(),this.element=e}focus(){this.element.focus()}}class $ye extends we{constructor(e){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class Gye extends we{children;inputView;constructor(e,t){super(e),this.inputView=t,this.children=this.createCollection([new $ye,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return t7(this.inputView.fieldView.element.value)}}function t7(n){if(!n)return null;const e=n.trim().replace(/^#/,"");return![3,4,6,8].includes(e.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(e)?null:`#${e}`}class Yye extends kt(Wn){constructor(e){super(e),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(e,t){return this.find(i=>i.color===e.color)?this:super.add(e,t)}hasColor(e){return!!this.find(t=>t.color===e)}}class Kye extends we{items;colorDefinitions;focusTracker;columns;documentColors;documentColorsCount;staticColorsGrid;documentColorsGrid;colorPickerButtonView;removeColorButtonView;_focusables;_documentColorsLabel;_removeButtonLabel;_colorPickerLabel;constructor(e,{colors:t,columns:i,removeButtonLabel:s,documentColorsLabel:r,documentColorsCount:o,colorPickerLabel:a,focusTracker:c,focusables:d}){super(e);const h=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=c,this.items=this.createCollection(),this.colorDefinitions=t,this.columns=i,this.documentColors=new Yye,this.documentColorsCount=o,this._focusables=d,this._removeButtonLabel=s,this._colorPickerLabel=a,this._documentColorsLabel=r,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",h.if("isVisible","ck-hidden",m=>!m)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(e,t){const i=e.document,s=this.documentColorsCount;this.documentColors.clear();for(const r of i.getRoots()){const o=e.createRangeIn(r);for(const a of o.getItems())if(a.is("$textProxy")&&a.hasAttribute(t)&&(this._addColorToDocumentColors(a.getAttribute(t)),this.documentColors.length>=s))return}}updateSelectedColors(){const e=this.documentColorsGrid,t=this.staticColorsGrid,i=this.selectedColor;t.selectedColor=i,e&&(e.selectedColor=i)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const e=Vi.bind(this.documentColors,this.documentColors),t=new we(this.locale);t.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",e.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(t),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new Se,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:Awe,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const e=new Se;return e.set({withText:!0,icon:kwe,label:this._removeButtonLabel}),e.class="ck-color-selector__remove-color",e.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),e.render(),e}_createStaticColorsGrid(){const e=new MD(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return e.on("execute",(t,i)=>{this.fire("execute",{value:i.value,source:"staticColorsGrid"})}),e}_createDocumentColorsGrid(){const e=Vi.bind(this.documentColors,this.documentColors),t=new MD(this.locale,{columns:this.columns});return t.extendTemplate({attributes:{class:e.if("isEmpty","ck-hidden")}}),t.items.bindTo(this.documentColors).using(i=>{const s=new $8;return s.set({color:i.color,hasBorder:i.options?.hasBorder}),i.label&&s.set({label:i.label,tooltip:!0}),s.on("execute",()=>{this.fire("execute",{value:i.color,source:"documentColorsGrid"})}),s}),this.documentColors.on("change:isEmpty",(i,s,r)=>{r&&(t.selectedColor=null)}),t}_addColorToDocumentColors(e){const t=this.colorDefinitions.find(i=>i.color===e);t?this.documentColors.add(Object.assign({},t)):this.documentColors.add({color:e,label:e,options:{hasBorder:!1}})}}class qye extends we{items;colorPickerView;saveButtonView;cancelButtonView;actionBarView;focusTracker;keystrokes;_focusables;_colorPickerViewConfig;constructor(e,{focusTracker:t,focusables:i,keystrokes:s,colorPickerViewConfig:r}){super(e),this.items=this.createCollection(),this.focusTracker=t,this.keystrokes=s,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=i,this._colorPickerViewConfig=r;const o=this.bindTemplate,{saveButtonView:a,cancelButtonView:c}=this._createActionButtons();this.saveButtonView=a,this.cancelButtonView=c,this.actionBarView=this._createActionBarView({saveButtonView:a,cancelButtonView:c}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",o.if("isVisible","ck-hidden",d=>!d)]},children:this.items})}render(){super.render();const e=new Hye(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=e,this.colorPickerView.render(),this.selectedColor&&(e.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(t,i,s)=>{e.color=s}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",e=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),e.stopPropagation(),e.preventDefault())})}_stopPropagationOnArrowsKeys(){const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}_addColorPickersElementsToFocusTracker(){for(const t of this.colorPickerView.slidersView)this.focusTracker.add(t.element),this._focusables.add(t);const e=this.colorPickerView.hexInputRow.children.get(1);e.element&&(this.focusTracker.add(e.element),this._focusables.add(e)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:e,cancelButtonView:t}){const i=new we,s=this.createCollection();return s.add(e),s.add(t),i.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:s}),i}_createActionButtons(){const e=this.locale,t=e.t,i=new Se(e),s=new Se(e);return i.set({icon:Lm,class:"ck-button-save",type:"button",withText:!1,label:t("Accept")}),s.set({icon:Vm,class:"ck-button-cancel",type:"button",withText:!1,label:t("Cancel")}),i.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),s.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:i,cancelButtonView:s}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(e,t)=>{this.fire("execute",{value:t.color,source:"colorPicker"}),this.set("selectedColor",t.color)})}}class Qye extends we{focusTracker;keystrokes;items;colorGridsFragmentView;colorPickerFragmentView;_focusCycler;_focusables;_colorPickerViewConfig;constructor(e,{colors:t,columns:i,removeButtonLabel:s,documentColorsLabel:r,documentColorsCount:o,colorPickerLabel:a,colorPickerViewConfig:c}){super(e),this.items=this.createCollection(),this.focusTracker=new St,this.keystrokes=new Ht,this._focusables=new ei,this._colorPickerViewConfig=c,this._focusCycler=new ui({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new Kye(e,{colors:t,columns:i,removeButtonLabel:s,documentColorsLabel:r,documentColorsCount:o,colorPickerLabel:a,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new qye(e,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:c}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(d,h,m)=>{this.colorGridsFragmentView.set("selectedColor",m),this.colorPickerFragmentView.set("selectedColor",m)}),this.colorGridsFragmentView.on("change:selectedColor",(d,h,m)=>{this.set("selectedColor",m)}),this.colorPickerFragmentView.on("change:selectedColor",(d,h,m)=>{this.set("selectedColor",m)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(e,t){this.colorGridsFragmentView.updateDocumentColors(e,t)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class Zye{editor;_components=new Map;constructor(e){this.editor=e}*names(){for(const e of this._components.values())yield e.originalName}add(e,t){this._components.set(W_(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new D("componentfactory-item-missing",this,{name:e});return this._components.get(W_(e)).callback(this.editor.locale)}has(e){return this._components.has(W_(e))}}function W_(n){return String(n).toLowerCase()}const FD="ck-tooltip";class Ri extends Wi(){tooltipTextView;balloonPanelView;static defaultBalloonPositions=rn.generatePositions({heightOffset:5,sideOffset:13});_currentElementWithTooltip=null;_currentTooltipPosition=null;_mutationObserver=null;_pinTooltipDebounced;_unpinTooltipDebounced;_watchdogExcluded;static _editors=new Set;static _instance=null;constructor(e){if(super(),Ri._editors.add(e),Ri._instance)return Ri._instance;Ri._instance=this,this.tooltipTextView=new we(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new rn(e.locale),this.balloonPanelView.class=FD,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=Jye(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=Ts(this._pinTooltip,600),this._unpinTooltipDebounced=Ts(this._unpinTooltip,400),this.listenTo(me.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(me.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(me.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(me.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(me.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(me.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){const t=e.ui.view&&e.ui.view.body;Ri._editors.delete(e),this.stopListening(e.ui),t&&t.has(this.balloonPanelView)&&t.remove(this.balloonPanelView),Ri._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Ri._instance=null)}static getPositioningFunctions(e){const t=Ri.defaultBalloonPositions;return{s:[t.southArrowNorth,t.southArrowNorthEast,t.southArrowNorthWest],n:[t.northArrowSouth],e:[t.eastArrowWest],w:[t.westArrowEast],sw:[t.southArrowNorthEast],se:[t.southArrowNorthWest]}[e]}_onKeyDown(e,t){t.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),t.stopPropagation())}_onEnterOrFocus(e,{target:t}){const i=$_(t);if(!i){e.name==="focus"&&this._unpinTooltip();return}if(i===this._currentElementWithTooltip){this._unpinTooltipDebounced.cancel();return}this._unpinTooltip(),e.name==="focus"&&!i.matches(":hover")||i.matches("[data-cke-tooltip-instant]")?this._pinTooltip(i,G_(i)):this._pinTooltipDebounced(i,G_(i))}_onLeaveOrBlur(e,{target:t,relatedTarget:i}){if(e.name==="mouseleave"){if(!ca(t))return;const s=this.balloonPanelView.element,r=s&&(s===i||s.contains(i)),o=!r&&t===s;if(r){this._unpinTooltipDebounced.cancel();return}if(!o&&this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;const a=$_(t),c=$_(i);(o||a&&a!==c)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||a&&a.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(e,{target:t}){this._currentElementWithTooltip&&(t.contains(this.balloonPanelView.element)&&t.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:t,position:i,cssClass:s}){this._unpinTooltip();const r=qt(Ri._editors.values()).ui.view.body;r.has(this.balloonPanelView)||r.add(this.balloonPanelView),this.tooltipTextView.text=t,this.balloonPanelView.class=[FD,s].filter(o=>o).join(" "),this.balloonPanelView.pin({target:e,positions:Ri.getPositioningFunctions(i)}),this._mutationObserver.attach(e);for(const o of Ri._editors)this.listenTo(o.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=i}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const e of Ri._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const e=G_(this._currentElementWithTooltip);if(!no(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Ri.getPositioningFunctions(e.position)})}}function $_(n){return ca(n)?n.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function G_(n){return{text:n.dataset.ckeTooltipText,position:n.dataset.ckeTooltipPosition||"s",cssClass:n.dataset.ckeTooltipClass||""}}function Jye(n){const e=new MutationObserver(()=>{n()});return{attach(t){e.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}class Xye extends U8{licenseTypeMessage={evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"};constructor(e){super(e,{balloonClass:"ck-evaluation-badge-balloon"})}_isEnabled(){const t=this.editor.config.get("licenseKey"),i=zD(t);return!!(i&&this.licenseTypeMessage[i])}_createBadgeContent(){const e=this.editor.config.get("licenseKey"),t=zD(e);return new e0e(this.editor.locale,this.licenseTypeMessage[t])}_getNormalizedConfig(){const e=super._getNormalizedConfig(),t=this.editor.config.get("ui.poweredBy")||{},i=t.position||e.position,s=t.side||e.side;return{position:i,side:s==="left"?"right":"left",verticalOffset:e.verticalOffset,horizontalOffset:e.horizontalOffset}}}class e0e extends we{constructor(e,t){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[t]}]})}}function zD(n){if(n=="GPL")return"GPL";const e=EE(n.split(".")[1]);return e?e.licenseType||"production":null}class Um extends Ir{constructor(e,t){super(e);const i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:i.to("mouseenter")}}),this.delegate("mouseenter").to(t)}}const Up=5,Iu={toggleMenusAndFocusItemsOnHover(n){n.on("menu:mouseenter",e=>{if(!(!n.isFocusBorderEnabled&&!n.isOpen)){if(n.isOpen)for(const t of n.menus){const i=e.path[0],s=i instanceof Um&&i.children.first===t;t.isOpen=(e.path.includes(t)||s)&&t.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(n){const e=n.locale.uiLanguageDirection==="rtl";n.on("menu:arrowright",i=>{t(i.source,e?-1:1)}),n.on("menu:arrowleft",i=>{t(i.source,e?1:-1)});function t(i,s){const r=n.children.getIndex(i),o=i.isOpen,a=n.children.length,c=n.children.get((r+a+s)%a);i.isOpen=!1,o&&(c.isOpen=!0),c.buttonView.focus()}},closeMenusWhenTheBarCloses(n){n.on("change:isOpen",()=>{n.isOpen||n.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(n){n.on("menu:change:isOpen",(e,t,i)=>{i&&n.menus.filter(s=>e.source.parentMenuView===s.parentMenuView&&e.source!==s&&s.isOpen).forEach(s=>{s.isOpen=!1})})},closeOnClickOutside(n){_l({emitter:n,activator:()=>n.isOpen,callback:()=>n.close(),contextElements:()=>n.children.map(e=>e.element)})},enableFocusHighlightOnInteraction(n){let e=!1;n.on("change:isOpen",(t,i,s)=>{s||(e||(n.isFocusBorderEnabled=!1),e=!1)}),n.listenTo(n.element,"keydown",()=>{e=!0},{useCapture:!0}),n.listenTo(n.element,"keyup",()=>{e=!1},{useCapture:!0}),n.listenTo(n.element,"focus",()=>{e&&(n.isFocusBorderEnabled=!0)},{useCapture:!0})}},Ka={openAndFocusPanelOnArrowDownKey(n){n.keystrokes.set("arrowdown",(e,t)=>{n.isEnabled&&n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen||(n.isOpen=!0),n.panelView.focus(),t())})},openOnArrowRightKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";n.keystrokes.set(e,(t,i)=>{n.focusTracker.focusedElement!==n.buttonView.element||!n.isEnabled||(n.isOpen||(n.isOpen=!0),n.panelView.focus(),i())})},openOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!0})},toggleOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!n.isOpen})},openAndFocusOnEnterKeyPress(n){n.keystrokes.set("enter",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen=!0,n.panelView.focus(),t())})},closeOnArrowLeftKey(n){const e=n.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";n.keystrokes.set(e,(t,i)=>{n.isOpen&&(n.isOpen=!1,n.focus(),i())})},closeOnEscKey(n){n.keystrokes.set("esc",(e,t)=>{n.isOpen&&(n.isOpen=!1,n.focus(),t())})},closeOnParentClose(n){n.parentMenuView.on("change:isOpen",(e,t,i)=>{!i&&e.source===n.parentMenuView&&(n.isOpen=!1)})}},t0e={southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),eastSouth:n=>({top:n.top,left:n.right-Up,name:"es"}),eastNorth:(n,e)=>({top:n.top-e.height,left:n.right-Up,name:"en"}),westSouth:(n,e)=>({top:n.top,left:n.left-e.width+Up,name:"ws"}),westNorth:(n,e)=>({top:n.top-e.height,left:n.left-e.width+Up,name:"wn"})},n0e=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"fullscreen",items:["menuBar:fullscreen"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable","menuBar:insertTableLayout"]},{groupId:"insertInline",items:["menuBar:link","menuBar:insertFootnote","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException:inline","menuBar:restrictedEditingException:block"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:lineHeight","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands","menuBar:toggleAi","menuBar:aiQuickActions"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function i0e(n){let e;return!("items"in n)||!n.items?e={items:zi(n0e),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...n}:e={items:n.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...n},e}function s0e({normalizedConfig:n,locale:e,componentFactory:t,extraItems:i}){const s=zi(n);return jD(n,s,i),r0e(n,s),jD(n,s,s.addItems),o0e(n,s,t),n7(n,s),a0e(s,e),s}function r0e(n,e){const t=e.removeItems,i=[];e.items=e.items.filter(({menuId:s})=>t.includes(s)?(i.push(s),!1):!0),Wd(e.items,s=>{s.groups=s.groups.filter(({groupId:r})=>t.includes(r)?(i.push(r),!1):!0);for(const r of s.groups)r.items=r.items.filter(o=>{const a=i7(o);return t.includes(a)?(i.push(a),!1):!0})});for(const s of t)i.includes(s)||lt("menu-bar-item-could-not-be-removed",{menuBarConfig:n,itemName:s})}function jD(n,e,t){const i=[];if(t.length!=0){for(const s of t){const r=u0e(s.position),o=d0e(s.position);if(l0e(s))if(!o)r==="start"?(e.items.unshift(s.menu),i.push(s)):r==="end"&&(e.items.push(s.menu),i.push(s));else{const a=e.items.findIndex(c=>c.menuId===o);a!=-1?r==="before"?(e.items.splice(a,0,s.menu),i.push(s)):r==="after"&&(e.items.splice(a+1,0,s.menu),i.push(s)):UD(e,s.menu,o,r)&&i.push(s)}else c0e(s)?Wd(e.items,a=>{if(a.menuId===o)r==="start"?(a.groups.unshift(s.group),i.push(s)):r==="end"&&(a.groups.push(s.group),i.push(s));else{const c=a.groups.findIndex(d=>d.groupId===o);c!==-1&&(r==="before"?(a.groups.splice(c,0,s.group),i.push(s)):r==="after"&&(a.groups.splice(c+1,0,s.group),i.push(s)))}}):UD(e,s.item,o,r)&&i.push(s)}for(const s of t)i.includes(s)||lt("menu-bar-item-could-not-be-added",{menuBarConfig:n,addedItemConfig:s})}}function UD(n,e,t,i){let s=!1;return Wd(n.items,r=>{for(const{groupId:o,items:a}of r.groups){if(s)return;if(o===t)i==="start"?(a.unshift(e),s=!0):i==="end"&&(a.push(e),s=!0);else{const c=a.findIndex(d=>i7(d)===t);c!==-1&&(i==="before"?(a.splice(c,0,e),s=!0):i==="after"&&(a.splice(c+1,0,e),s=!0))}}}),s}function o0e(n,e,t){Wd(e.items,i=>{for(const s of i.groups)s.items=s.items.filter(r=>{const o=typeof r=="string"&&!t.has(r);return o&&!e.isUsingDefaultConfig&&lt("menu-bar-item-unavailable",{menuBarConfig:n,parentMenuConfig:zi(i),componentName:r}),!o})})}function n7(n,e){const t=e.isUsingDefaultConfig;let i=!1;if(e.items=e.items.filter(s=>s.groups.length?!0:(Y_(n,s,t),!1)),!e.items.length){Y_(n,n,t);return}Wd(e.items,s=>{s.groups=s.groups.filter(r=>r.items.length?!0:(i=!0,!1));for(const r of s.groups)r.items=r.items.filter(o=>s7(o)&&!o.groups.length?(Y_(n,o,t),i=!0,!1):!0)}),i&&n7(n,e)}function Y_(n,e,t){t||lt("menu-bar-menu-empty",{menuBarConfig:n,emptyMenuConfig:e})}function a0e(n,e){const t=e.t,i={File:t({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:t({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:t({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:t({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:t({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:t({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:t({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:t({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:t({string:"Font",id:"MENU_BAR_MENU_FONT"})};Wd(n.items,s=>{s.label in i&&(s.label=i[s.label])})}function Wd(n,e){if(Array.isArray(n))for(const i of n)t(i);function t(i){e(i);for(const s of i.groups)for(const r of s.items)s7(r)&&t(r)}}function l0e(n){return typeof n=="object"&&"menu"in n}function c0e(n){return typeof n=="object"&&"group"in n}function u0e(n){return n.startsWith("start")?"start":n.startsWith("end")?"end":n.startsWith("after")?"after":"before"}function d0e(n){const e=n.match(/^[^:]+:(.+)/);return e?e[1]:null}function i7(n){return typeof n=="string"?n:n.menuId}function s7(n){return typeof n=="object"&&"menuId"in n}class f0e extends kt(){editor;componentFactory;focusTracker;tooltipManager;poweredBy;evaluationBadge;ariaLiveAnnouncer;isReady=!1;_editableElementsMap=new Map;_focusableToolbarDefinitions=[];_extraMenuBarElements=[];_lastFocusedForeignElement=null;_domEmitter;constructor(e){super();const t=e.editing.view;this.editor=e,this.componentFactory=new Zye(e),this.focusTracker=new St,this.tooltipManager=new Ri(e),this.poweredBy=new wye(e),this.evaluationBadge=new Xye(e),this.ariaLiveAnnouncer=new eye(e),this._initViewportOffset(this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(t.document,"layoutChanged",this.update.bind(this)),this.listenTo(t,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking(),this._initVisualViewportSupport()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[],this._domEmitter&&this._domEmitter.stopListening()}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor),this.focusTracker.add(t);const i=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(t)};this.isReady?i():this.once("ready",i)}removeEditableElement(e){const t=this._editableElementsMap.get(e);t&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(t),this.focusTracker.remove(t),t.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,t={}){e.isRendered?(this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:t})}extendMenuBar(e){this._extraMenuBarElements.push(e)}initMenuBar(e){const t=e.element;this.focusTracker.add(t),this.editor.keystrokes.listenTo(t);const i=i0e(this.editor.config.get("menuBar")||{});e.fillFromConfig(i,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(s,r)=>{t.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),r())}),this.editor.keystrokes.set("Alt+F9",(s,r)=>{t.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),r())})}_readViewportOffsetFromConfig(){const e=this.editor,t=e.config.get("ui.viewportOffset");if(t)return t;const i=e.config.get("toolbar.viewportTopOffset");return i?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:i}):{top:0}}_initFocusTracking(){const e=this.editor;let t;e.keystrokes.set("Alt+F10",(i,s)=>{this._saveLastFocusedForeignElement();const r=this._getCurrentFocusedToolbarDefinition();(!r||!t)&&(t=this._getFocusableCandidateToolbarDefinitions());for(let o=0;o<t.length;o++){const a=t.shift();if(t.push(a),a!==r&&this._focusFocusableCandidateToolbar(a)){r&&r.options.afterBlur&&r.options.afterBlur();break}}s()}),e.keystrokes.set("Esc",(i,s)=>{const r=this._getCurrentFocusedToolbarDefinition();r&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),r.options.afterBlur&&r.options.afterBlur(),s())})}_saveLastFocusedForeignElement(){const e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){const e=[];for(const t of this._focusableToolbarDefinitions){const{toolbarView:i,options:s}=t;(no(i.element)||s.beforeFocus)&&e.push(t)}return e.sort((t,i)=>HD(t)-HD(i)),e}_getCurrentFocusedToolbarDefinition(){for(const e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){const{toolbarView:t,options:{beforeFocus:i}}=e;return i&&i(),no(t.element)?(t.focus(),!0):!1}_handleScrollToTheSelection(e,t){const i={top:0,bottom:0,left:0,right:0,...this.viewportOffset};t.viewportOffset.top+=i.top,t.viewportOffset.bottom+=i.bottom,t.viewportOffset.left+=i.left,t.viewportOffset.right+=i.right}_bindBodyCollectionWithFocusTracker(){const e=this.view.body;for(const t of e)this.focusTracker.add(t.element);e.on("add",(t,i)=>{this.focusTracker.add(i.element)}),e.on("remove",(t,i)=>{this.focusTracker.remove(i.element)})}_initViewportOffset(e){this.on("set:viewportOffset",(t,i,s)=>{const r=this._getVisualViewportTopOffset(s);s.visualTop!==r&&(t.return={...s,visualTop:r})}),this.set("viewportOffset",e)}_initVisualViewportSupport(){if(!me.window.visualViewport)return;const e=()=>{const t=this._getVisualViewportTopOffset(this.viewportOffset);this.viewportOffset.visualTop!==t&&(this.viewportOffset={...this.viewportOffset,visualTop:t})};this._domEmitter=new(Wi()),this._domEmitter.listenTo(me.window.visualViewport,"scroll",e),this._domEmitter.listenTo(me.window.visualViewport,"resize",e)}_getVisualViewportTopOffset(e){const t=yb().top,i=e.top||0;return t>i?0:i-t}}function HD(n){const{toolbarView:e,options:t}=n;let i=10;return no(e.element)&&i--,t.isContextual&&(i-=2),i}class h0e extends we{body;menuBarView;toolbar;constructor(e){super(e),this.body=new dr(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class m0e extends h0e{top;main;_voiceLabelView;constructor(e){super(e),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const e=this.t,t=new Ys;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}}class g0e extends we{name=null;_editingView;_editableElement;_hasExternalElement;constructor(e,t,i){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=i,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const e=this._editingView;e.isRenderingInProgress?i(this):t(this);function t(s){e.change(r=>{const o=e.document.getRoot(s.name);r.addClass(s.isFocused?"ck-focused":"ck-blurred",o),r.removeClass(s.isFocused?"ck-blurred":"ck-focused",o)})}function i(s){e.once("change:isRenderingInProgress",(r,o,a)=>{a?i(s):t(s)})}}}class p0e extends g0e{_options;constructor(e,t,i,s={}){super(e,t,i),this._options=s,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const e=this._editingView;e.change(t=>{const i=e.document.getRoot(this.name);t.setAttribute("aria-label",this.getEditableAriaLabel(),i)})}getEditableAriaLabel(){const e=this.locale.t,t=this._options.label,i=this._editableElement,s=this.name;if(typeof t=="string")return t;if(typeof t=="object")return t[s];if(typeof t=="function")return t(this);if(i){const r=i.getAttribute("aria-label");if(r)return r}return e("Rich Text Editor. Editing area: %0",s)}}class bi extends we{children;constructor(e,t={}){super(e);const i=this.bindTemplate;this.set("class",["ck","ck-form__row",...yt(t.class||[])]),this.children=this.createCollection(),t.children&&t.children.forEach(s=>this.children.add(s)),this.set("_role",null),this.set("_ariaLabelledBy",null),t.labelView&&this.set({_role:"group",_ariaLabelledBy:t.labelView.id}),this.setTemplate({tag:"div",attributes:{class:i.to("class",s=>s.join(" ")),role:i.to("_role"),"aria-labelledby":i.to("_ariaLabelledBy")},children:this.children})}}class WD extends ly{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(e,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){const t=e.namespace?`show:${e.type}:${e.namespace}`:`show:${e.type}`;this.fire(t,{message:e.message,type:e.type,title:e.title||""})}}class cl extends kt(){constructor(e,t){super(),t&&QF(this,t),e&&this.set(e)}}const Hp=wa("px");class Rr extends z{positionLimiter;visibleStack;_viewToStack=new Map;_idToStack=new Map;_view=null;_rotatorView=null;_fakePanelsView=null;static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}constructor(e){super(e),this.positionLimiter=()=>{const t=this.editor.editing.view,s=t.document.selection.editableElement;return s?t.domConverter.mapViewToDom(s.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new D("contextualballoon-add-view-exist",[this,e]);const t=e.stackId||"main";if(!this._idToStack.has(t)){this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(t);return}const i=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),i.set(e.view,e),this._viewToStack.set(e.view,i),i===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new D("contextualballoon-remove-view-not-exist",[this,e]);const t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(t.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),t.size===1?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:{...this.editor.ui.viewportOffset,top:this.editor.ui.viewportOffset.visualTop}})),e}showStack(e){this.visibleStack=e;const t=this._idToStack.get(e);if(!t)throw new D("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}_createPanelView(){this._view=new rn(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(i=>i[1]===e)[0]}_showNextStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){const e=Array.from(this._idToStack.values());let t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){const e=new b0e(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(i,s)=>!s&&i>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(i,s)=>{if(s<2)return"";const r=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[r,s])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){const e=new w0e(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,i)=>!i&&t>=2?Math.min(t-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:i=!0,singleViewMode:s=!1}){this.view.class=t,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),s&&(this._singleViewMode=!0)}}class b0e extends we{focusTracker;buttonPrevView;buttonNextView;content;constructor(e){super(e);const t=e.t,i=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new St,this.buttonPrevView=this._createButtonView(t("Previous"),ll),this.buttonNextView=this._createButtonView(t("Next"),T8),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",i.to("isNavigationVisible",s=>s?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){const i=new Se(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i}}class w0e extends we{content;_balloonPanelView;constructor(e,t){super(e);const i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",i.to("numberOfPanels",s=>s?"":"ck-hidden")],style:{top:i.to("top",Hp),left:i.to("left",Hp),width:i.to("width",Hp),height:i.to("height",Hp)}},children:this.content}),this.on("change:numberOfPanels",(s,r,o,a)=>{o>a?this._addPanels(o-a):this._removePanels(a-o),this.updatePosition()})}_addPanels(e){for(;e--;){const t=new we;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){const t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:e,left:t}=this._balloonPanelView,{width:i,height:s}=new Le(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:i,height:s})}}}const Ru=wa("px");class v0e extends we{content;contentPanelElement;_contentPanelPlaceholder;constructor(e){super(e);const t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Vi({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",i=>i?"block":"none"),height:t.to("isSticky",i=>i?Ru(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Vi({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",i=>i?Ru(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to("_stickyTopOffset",i=>i&&Ru(i)),bottom:t.to("_stickyBottomOffset",i=>i&&Ru(i)),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(me.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()}),me.window.visualViewport&&(this.listenTo(me.window.visualViewport,"scroll",()=>{this.checkIfShouldBeSticky()}),this.listenTo(me.window.visualViewport,"resize",()=>{this.checkIfShouldBeSticky()}))}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const e=new Le(this.limiterElement);let t=e.getVisible();if(t){const r=new Le(me.window);r.top+=this.viewportTopOffset,r.height-=this.viewportTopOffset,t=t.getIntersection(r)}const{left:i,top:s}=yb();if(e.moveBy(i,s),t&&t.moveBy(i,s),t&&e.top<t.top)if(this._contentPanelRect.height+this.limiterBottomOffset>t.height){const r=Math.max(e.bottom-t.bottom,0)+this.limiterBottomOffset;this._contentPanelRect.height+r+1<e.height?this._stickToBottomOfLimiter(r):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(t.top):this._unstick();else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=Ru(-me.window.scrollX+yb().left)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=Ru(-me.window.scrollX+yb().left)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Le(this.contentPanelElement)}}const y0e=wa("px");class A0e extends z{toolbarView;focusTracker;_balloonConfig;_resizeObserver=null;_balloon;_fireSelectionChangeDebounced;static get pluginName(){return"BalloonToolbar"}static get isOfficialPlugin(){return!0}static get requires(){return[Rr]}constructor(e){super(e),this._balloonConfig=fy(e.config.get("balloonToolbar")),this.toolbarView=this._createToolbarView(),this.focusTracker=new St,this._trackFocusableEditableElements(),this.focusTracker.add(this.toolbarView),e.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this.show(!0),afterBlur:()=>this.hide(),isContextual:!0}),this._balloon=e.plugins.get(Rr),this._fireSelectionChangeDebounced=Ts(()=>this.fire("_selectionChangeDebounced"),200),this.decorate("show")}init(){const e=this.editor,t=e.model.document.selection;this.listenTo(this.focusTracker,"change:isFocused",(i,s,r)=>{const o=this._balloon.visibleView===this.toolbarView;!r&&o?this.hide():r&&this.show()}),this.listenTo(t,"change:range",(i,s)=>{(s.directChange||t.isCollapsed)&&this.hide(),this._fireSelectionChangeDebounced()}),this.listenTo(this,"_selectionChangeDebounced",()=>{this.editor.editing.view.document.isFocused&&this.show()}),this._balloonConfig.shouldNotGroupWhenFull||this.listenTo(e,"ready",()=>{const i=e.ui.view.editable.element;this._resizeObserver=new Nm(i,s=>{this.toolbarView.maxWidth=y0e(s.contentRect.width*.9)})}),this.listenTo(this.toolbarView,"groupedItemsUpdate",()=>{this._updatePosition()}),e.ui.once("ready",()=>{this.toolbarView.fillFromConfig(this._balloonConfig,this.editor.ui.componentFactory)})}_createToolbarView(){const e=this.editor.locale.t,t=!this._balloonConfig.shouldNotGroupWhenFull,i=new da(this.editor.locale,{shouldGroupWhenFull:t,isFloating:!0});return i.ariaLabel=e("Editor contextual toolbar"),i.render(),i}show(e=!1){const t=this.editor,i=t.model.document.selection,s=t.model.schema;this._balloon.hasView(this.toolbarView)||i.isCollapsed&&!e||_0e(i,s)||Array.from(this.toolbarView.items).every(r=>r.isEnabled!==void 0&&!r.isEnabled)||(this.listenTo(this.editor.ui,"update",()=>{this._updatePosition()}),this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"}))}hide(){this._balloon.hasView(this.toolbarView)&&(this.stopListening(this.editor.ui,"update"),this._balloon.remove(this.toolbarView))}_trackFocusableEditableElements(){const{editor:e,focusTracker:t}=this,{editing:i}=e;i.view.addObserver(class extends Dr{observe(r){t.add(r)}stopObserving(r){t.remove(r)}})}_getBalloonPositionData(){const t=this.editor.editing.view,i=t.document,s=i.selection,r=i.selection.isBackward;return{target:()=>{const o=r?s.getFirstRange():s.getLastRange(),a=Le.getDomRangeRects(t.domConverter.viewRangeToDom(o));return r?a[0]:(a.length>1&&a[a.length-1].width===0&&a.pop(),a[a.length-1])},positions:this._getBalloonPositions(r)}}_updatePosition(){this._balloon.updatePosition(this._getBalloonPositionData())}destroy(){super.destroy(),this.stopListening(),this._fireSelectionChangeDebounced.cancel(),this.toolbarView.destroy(),this.focusTracker.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_getBalloonPositions(e){const i=Pe.isSafari&&Pe.isiOS?rn.generatePositions({heightOffset:Math.max(rn.arrowHeightOffset,Math.round(20/me.window.visualViewport.scale))}):rn.defaultPositions;return e?[i.northWestArrowSouth,i.northWestArrowSouthWest,i.northWestArrowSouthEast,i.northWestArrowSouthMiddleEast,i.northWestArrowSouthMiddleWest,i.southWestArrowNorth,i.southWestArrowNorthWest,i.southWestArrowNorthEast,i.southWestArrowNorthMiddleWest,i.southWestArrowNorthMiddleEast]:[i.southEastArrowNorth,i.southEastArrowNorthEast,i.southEastArrowNorthWest,i.southEastArrowNorthMiddleEast,i.southEastArrowNorthMiddleWest,i.northEastArrowSouth,i.northEastArrowSouthEast,i.northEastArrowSouthWest,i.northEastArrowSouthMiddleEast,i.northEastArrowSouthMiddleWest]}}function _0e(n,e){return n.rangeCount===1?!1:[...n.getRanges()].every(t=>{const i=t.getContainedElement();return i&&e.isSelectable(i)})}const $D=wa("px");class C0e extends Se{constructor(e){super(e);const t=this.bindTemplate;this.isVisible=!1,this.isToggleable=!0,this.set("top",0),this.set("left",0),this.extendTemplate({attributes:{class:"ck-block-toolbar-button",style:{top:t.to("top",i=>$D(i)),left:t.to("left",i=>$D(i))}}})}}const Zf=wa("px");class x0e extends z{toolbarView;panelView;buttonView;_resizeObserver=null;_blockToolbarConfig;static get pluginName(){return"BlockToolbar"}static get isOfficialPlugin(){return!0}constructor(e){super(e),this._blockToolbarConfig=fy(this.editor.config.get("blockToolbar")),this.toolbarView=this._createToolbarView(),this.panelView=this._createPanelView(),this.buttonView=this._createButtonView(),_l({emitter:this.panelView,contextElements:[this.panelView.element,this.buttonView.element],activator:()=>this.panelView.isVisible,callback:()=>this._hidePanel()})}init(){const e=this.editor,t=e.t,i=t("Click to edit block"),s=t("Drag to move"),r=t("Edit block"),o=e.plugins.has("DragDropBlockToolbar"),a=o?`${i}
${s}`:r;this.buttonView.label=a,o&&(this.buttonView.element.dataset.ckeTooltipClass="ck-tooltip_multi-line"),this.listenTo(e.model.document.selection,"change:range",(c,d)=>{d.directChange&&this._hidePanel()}),this.listenTo(e.ui,"update",()=>this._updateButton()),this.listenTo(e,"change:isReadOnly",()=>this._updateButton(),{priority:"low"}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>this._updateButton()),this.listenTo(this.buttonView,"change:isVisible",(c,d,h)=>{h?this.buttonView.listenTo(window,"resize",()=>this._updateButton()):(this.buttonView.stopListening(window,"resize"),this._hidePanel())}),this._repositionButtonOnScroll(),e.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this._showPanel(),afterBlur:()=>this._hidePanel()}),e.ui.once("ready",()=>{this.toolbarView.fillFromConfig(this._blockToolbarConfig,this.editor.ui.componentFactory);for(const c of this.toolbarView.items)c.on("execute",()=>this._hidePanel(!0),{priority:"high"})})}destroy(){super.destroy(),this.panelView.destroy(),this.buttonView.destroy(),this.toolbarView.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_createToolbarView(){const e=this.editor.locale.t,t=!this._blockToolbarConfig.shouldNotGroupWhenFull,i=new da(this.editor.locale,{shouldGroupWhenFull:t,isFloating:!0});return i.ariaLabel=e("Editor block content toolbar"),i}_createPanelView(){const e=this.editor,t=new rn(e.locale);return t.content.add(this.toolbarView),t.class="ck-toolbar-container",e.ui.view.body.add(t),this.toolbarView.keystrokes.set("Esc",(i,s)=>{this._hidePanel(!0),s()}),t}_createButtonView(){const e=this.editor,t=e.t,i=new C0e(e.locale),s=this._blockToolbarConfig.icon,r=jC[s]||s||jC.dragIndicator;return i.set({label:t("Edit block"),icon:r,withText:!1}),i.bind("isOn").to(this.panelView,"isVisible"),i.bind("tooltip").to(this.panelView,"isVisible",o=>!o),this.listenTo(i,"execute",()=>{this.panelView.isVisible?this._hidePanel(!0):this._showPanel()}),this.listenTo(i,"change:isEnabled",(o,a,c)=>{!c&&this.panelView.isVisible&&this._hidePanel(!1)}),e.ui.view.body.add(i),i}_updateButton(){const e=this.editor,t=e.model,i=e.editing.view;if(!e.ui.focusTracker.isFocused){this._hideButton();return}if(!e.model.canEditAt(e.model.document.selection)){this._hideButton();return}const s=Array.from(t.document.selection.getSelectedBlocks())[0];if(!s||Array.from(this.toolbarView.items).every(o=>!o.isEnabled)){this._hideButton();return}const r=i.domConverter.mapViewToDom(e.editing.mapper.toViewElement(s));this.buttonView.isVisible=!0,this._setupToolbarResize(),this._attachButtonToElement(r),this.panelView.isVisible&&this._showPanel()}_hideButton(){this.buttonView.isVisible=!1}_showPanel(){if(!this.buttonView.isVisible)return;const e=this.panelView.isVisible;this.panelView.show();const t=this._getSelectedEditableElement();this.toolbarView.maxWidth=this._getToolbarMaxWidth(t),this.panelView.pin({target:this.buttonView.element,limiter:t}),e||this.toolbarView.items.get(0).focus()}_getSelectedEditableElement(){const e=this.editor.model.document.selection.getFirstRange().root.rootName;return this.editor.ui.getEditableElement(e)}_hidePanel(e){this.panelView.isVisible=!1,e&&this.editor.editing.view.focus()}_repositionButtonOnScroll(){const{buttonView:e}=this;let t=!1;const i=(s,r)=>{if(t)return;const o=this._getSelectedEditableElement();r.target!==me.document&&!u6(o).includes(r.target)||(t=!0,me.window.requestAnimationFrame(()=>{this._updateButton(),t=!1}))};e.on("change:isVisible",(s,r,o)=>{o?e.listenTo(me.document,"scroll",i,{useCapture:!0,usePassive:!0}):e.stopListening(me.document,"scroll",i)})}_attachButtonToElement(e){const t=this.buttonView.element,i=this._getSelectedEditableElement(),s=window.getComputedStyle(e),r=new Le(i),o=parseInt(s.paddingTop,10),a=parseInt(s.lineHeight,10)||parseInt(s.fontSize,10)*1.2,c=new Le(t),d=new Le(e);let h;this.editor.locale.uiLanguageDirection==="ltr"?h=r.left-c.width:h=r.right;const m=d.top+o+(a-c.height)/2;c.moveTo(h,m);const p=c.toAbsoluteRect();this.buttonView.top=p.top,this.buttonView.left=p.left,this._clipButtonToViewport(this.buttonView,i)}_clipButtonToViewport(e,t){const i=new Le(e.element),s=new Le(t).getVisible(),r=(...a)=>{e.element.style.clipPath=a.length?`polygon(${a.join(",")})`:""},o=a=>{e.isEnabled=!a,e.element.style.pointerEvents=a?"none":""};if(s&&s.bottom<i.bottom){const a=Math.min(i.height,i.bottom-s.bottom);o(a>=i.height),r("0 0","100% 0",`100% calc(100% - ${Zf(a)})`,`0 calc(100% - ${Zf(a)}`)}else if(s&&s.top>i.top){const a=Math.min(i.height,s.top-i.top);o(a>=i.height),r(`0 ${Zf(a)}`,`100% ${Zf(a)}`,"100% 100%","0 100%")}else o(!1),r()}_setupToolbarResize(){const e=this._getSelectedEditableElement();this._blockToolbarConfig.shouldNotGroupWhenFull||(this._resizeObserver&&this._resizeObserver.element!==e&&(this._resizeObserver.destroy(),this._resizeObserver=null),this._resizeObserver||(this._resizeObserver=new Nm(e,()=>{this.toolbarView.maxWidth=this._getToolbarMaxWidth(e)})))}_getToolbarMaxWidth(e){const t=new Le(e),i=new Le(this.buttonView.element),r=this.editor.locale.uiLanguageDirection==="rtl"?i.left-t.right+i.width:t.left-i.left;return Zf(t.width+r)}}class k0e extends Ud{arrowView;constructor(e){super(e);const t=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",i=>String(i)),"data-cke-tooltip-disabled":t.to("isOn")},on:{mouseenter:t.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Br;return e.content=cy,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}}class E0e extends we{children;constructor(e){super(e);const t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",t.to("position",i=>`ck-menu-bar__menu__panel_position_${i}`),t.if("isVisible","ck-hidden",i=>!i)],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}}class Zr extends we{buttonView;panelView;focusTracker;keystrokes;constructor(e){super(e);const t=this.bindTemplate;this.buttonView=new k0e(e),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new E0e(e),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Ht,this.focusTracker=new St,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",t.to("class"),t.if("isEnabled","ck-disabled",i=>!i),t.if("parentMenuView","ck-menu-bar__menu_top-level",i=>!i)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),Ka.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(Ka.openOnButtonClick(this),Ka.openOnArrowRightKey(this),Ka.closeOnArrowLeftKey(this),Ka.openAndFocusOnEnterKeyPress(this),Ka.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),Ka.openAndFocusPanelOnArrowDownKey(this),Ka.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(e,t)=>{this.fire("arrowright"),t()}),this.keystrokes.set("arrowleft",(e,t)=>{this.fire("arrowleft"),t()})}_repositionPanelOnOpen(){this.on("change:isOpen",(e,t,i)=>{if(!i)return;const s=Zr._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=s?s.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:e,southWest:t,northEast:i,northWest:s,westSouth:r,eastSouth:o,westNorth:a,eastNorth:c}=t0e;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[o,c,r,a]:[e,t,i,s]:this.parentMenuView?[r,a,o,c]:[t,e,s,i]}get _defaultMenuPositionName(){return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}static _getOptimalPosition=CE}class am extends Hd{constructor(e){super(e),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const e=Array.from(this.items).some(t=>{const i=GD(t);return i&&i.isToggleable});this.items.forEach(t=>{const i=GD(t);i&&(i.hasCheckSpace=e)})}}function GD(n){return n instanceof Ir?n.children.map(e=>S0e(e)?e.buttonView:e).find(e=>e instanceof Ud):null}function S0e(n){return typeof n=="object"&&"buttonView"in n&&n.buttonView instanceof Se}class r7 extends yye{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const YD=["mouseenter","arrowleft","arrowright","change:isOpen"];class T0e extends we{children;menus=[];constructor(e){super(e);const t=e.t,i=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",i.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":t("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,t,i=[]){const s=this.locale,o=s0e({normalizedConfig:e,locale:s,componentFactory:t,extraItems:i}).items.map(a=>this._createMenu({componentFactory:t,menuDefinition:a}));this.children.addMany(o)}render(){super.render(),Iu.toggleMenusAndFocusItemsOnHover(this),Iu.closeMenusWhenTheBarCloses(this),Iu.closeMenuWhenAnotherOnTheSameLevelOpens(this),Iu.focusCycleMenusOnArrows(this),Iu.closeOnClickOutside(this),Iu.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const e of this.children)e.isOpen=!1}disable(){for(const e of this.children)e.isEnabled=!1}enable(){for(const e of this.children)e.isEnabled=!0}registerMenu(e,t=null){t?(e.delegate(...YD).to(t),e.parentMenuView=t):e.delegate(...YD).to(this,i=>"menu:"+i),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:t,parentMenuView:i}){const s=this.locale,r=new Zr(s);return this.registerMenu(r,i),r.buttonView.set({label:t.label}),r.once("change:isOpen",()=>{const o=new am(s);o.ariaLabel=t.label,r.panelView.children.add(o),o.items.addMany(this._createMenuItems({menuDefinition:t,parentMenuView:r,componentFactory:e}))}),r}_createMenuItems({menuDefinition:e,parentMenuView:t,componentFactory:i}){const s=this.locale,r=[];for(const o of e.groups){for(const a of o.items){const c=new Um(s,t);if(Fi(a))c.children.add(this._createMenu({componentFactory:i,menuDefinition:a,parentMenuView:t}));else{const d=this._createMenuItemContentFromFactory({componentName:a,componentFactory:i,parentMenuView:t});if(!d)continue;c.children.add(d)}r.push(c)}o!==e.groups[e.groups.length-1]&&r.push(new dy(s))}return r}_createMenuItemContentFromFactory({componentName:e,parentMenuView:t,componentFactory:i}){const s=i.create(e);return s instanceof Zr||s instanceof xn||s instanceof r7?(this._registerMenuTree(s,t),s.on("execute",()=>{this.close()}),s):(lt("menu-bar-component-unsupported",{componentName:e,componentView:s}),null)}_registerMenuTree(e,t){if(!(e instanceof Zr)){e.delegate("mouseenter").to(t);return}this.registerMenu(e,t);const i=e.panelView.children.filter(r=>r instanceof am)[0];if(!i){e.delegate("mouseenter").to(t);return}const s=i.items.filter(r=>r instanceof Ir);for(const r of s)this._registerMenuTree(r.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(t,i,s)=>{clearTimeout(e),s?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(r=>r.isOpen)},0)})}}class o7{model;limit;_isLocked;_size;_batch=null;_changeCallback;_selectionChangeCallback;constructor(e,t=20){this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(i,s)=>{s.isLocal&&s.isUndoable&&s!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}}class I0e extends je{_buffer;constructor(e,t){super(e),this._buffer=new o7(e.model,t),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){const t=this.editor.model,i=t.document,s=e.text||"",r=s.length;let o=i.selection;if(e.selection?o=e.selection:e.range&&(o=t.createSelection(e.range)),!t.canEditAt(o))return;const a=e.resultRange;t.enqueueChange(this._buffer.batch,c=>{this._buffer.lock();const d=Array.from(i.selection.getAttributes());t.deleteContent(o),s&&t.insertContent(c.createText(s,d),o),a?c.setSelection(a):o.is("documentSelection")||c.setSelection(o),this._buffer.unlock(),this._buffer.input(r)})}}const a7=["insertText","insertReplacementText"],R0e=[...a7,"insertCompositionText"];class P0e extends Dr{focusObserver;constructor(e){super(e),this.focusObserver=e.getObserver(_w);const t=Pe.isAndroid?R0e:a7,i=e.document;i.on("beforeinput",(s,r)=>{if(!this.isEnabled)return;const{data:o,targetRanges:a,inputType:c,domEvent:d,isComposing:h}=r;if(!t.includes(c))return;this.focusObserver.flush();const m=new ua(i,"insertText");i.fire(m,new gc(e,d,{text:o,selection:e.createSelection(a),isComposing:h})),m.stop.called&&s.stop()}),Pe.isAndroid||i.on("compositionend",(s,{data:r,domEvent:o})=>{this.isEnabled&&r&&i.fire("insertText",new gc(e,o,{text:r,isComposing:!0}))},{priority:"low"})}observe(){}stopObserving(){}}class l7 extends z{_typingQueue;static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model,i=e.editing.view,s=e.editing.mapper,r=t.document.selection;this._typingQueue=new O0e(e),i.addObserver(P0e);const o=new I0e(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",o),e.commands.add("input",o),this.listenTo(i.document,"beforeinput",()=>{this._typingQueue.flush("next beforeinput")},{priority:"high"}),this.listenTo(i.document,"insertText",(a,c)=>{const{text:d,selection:h}=c;if(i.document.selection.isFake&&h&&i.document.selection.isSimilar(h)&&c.preventDefault(),h&&Array.from(h.getRanges()).some(A=>!A.isCollapsed)&&c.preventDefault(),!o.isEnabled){c.preventDefault();return}let m;h&&(m=Array.from(h.getRanges()).filter(A=>A.root.is("rootElement")).map(A=>s.toModelRange(A)).map(A=>LE(A,t.schema)||A)),(!m||!m.length)&&(m=Array.from(r.getRanges()));let p=d;if(Pe.isAndroid){const A=Array.from(m[0].getItems()).reduce((C,k)=>C+(k.is("$textProxy")?k.data:""),"");if(A&&(A.length<=p.length?p.startsWith(A)&&(p=p.substring(A.length),m[0].start=m[0].start.getShiftedBy(A.length)):A.startsWith(p)&&(m[0].start=m[0].start.getShiftedBy(p.length),p="")),p.length==0&&m[0].isCollapsed)return}const w={text:p,selection:t.createSelection(m)};this._typingQueue.push(w,!!c.isComposing),c.domEvent.defaultPrevented&&this._typingQueue.flush("beforeinput default prevented")}),Pe.isAndroid?this.listenTo(i.document,"keydown",(a,c)=>{r.isCollapsed||c.keyCode!=229||!i.document.isComposing||KD(t,o)}):this.listenTo(i.document,"compositionstart",()=>{r.isCollapsed||KD(t,o)},{priority:"high"}),this.listenTo(i.document,"mutations",(a,{mutations:c})=>{if(this._typingQueue.hasAffectedElements())for(const{node:d}of c){const h=M0e(d,s),m=s.toModelElement(h);if(this._typingQueue.isElementAffected(m)){this._typingQueue.flush("mutations");return}}}),this.listenTo(i.document,"compositionend",()=>{this._typingQueue.flush("before composition end")},{priority:"high"}),this.listenTo(i.document,"compositionend",()=>{this._typingQueue.flush("after composition end");const a=[];if(this._typingQueue.hasAffectedElements())for(const c of this._typingQueue.flushAffectedElements()){const d=s.toViewElement(c);d&&a.push({type:"children",node:d})}(a.length||!Pe.isAndroid)&&i.document.fire("mutations",{mutations:a})},{priority:"lowest"})}destroy(){super.destroy(),this._typingQueue.destroy()}}class O0e{editor;flushDebounced=Ts(()=>this.flush("timeout"),50);_queue=[];_isComposing=!1;_affectedElements=new Set;constructor(e){this.editor=e}destroy(){for(this.flushDebounced.cancel(),this._affectedElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(e,t){const i={text:e.text};if(e.selection){i.selectionRanges=[];for(const s of e.selection.getRanges())i.selectionRanges.push(Bi.fromRange(s)),this._affectedElements.add(s.start.parent)}this._queue.push(i),this._isComposing||=t,this.flushDebounced()}shift(){const e=this._queue.shift(),t={text:e.text};if(e.selectionRanges){const i=e.selectionRanges.map(s=>D0e(s)).filter(s=>!!s);i.length&&(t.selection=this.editor.model.createSelection(i))}return t}flush(e){const t=this.editor,i=t.model,s=t.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const o=t.commands.get("insertText").buffer;i.enqueueChange(o.batch,()=>{for(o.lock();this._queue.length;){const a=this.shift();t.execute("insertText",a)}o.unlock(),this._isComposing||this._affectedElements.clear(),this._isComposing=!1}),s.scrollToTheSelection()}isElementAffected(e){return this._affectedElements.has(e)}hasAffectedElements(){return this._affectedElements.size>0}flushAffectedElements(){const e=Array.from(this._affectedElements);return this._affectedElements.clear(),e}}function KD(n,e){if(!e.isEnabled)return;const t=e.buffer;t.lock(),n.enqueueChange(t.batch,()=>{n.deleteContent(n.document.selection)}),t.unlock()}function D0e(n){const e=n.toRange();return n.detach(),e.root.rootName=="$graveyard"?null:e}function M0e(n,e){let t=n.is("$text")?n.parent:n;for(;!e.toModelElement(t);)t=t.parent;return t}class qD extends je{direction;_buffer;constructor(e,t){super(e),this.direction=t,this._buffer=new o7(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){const t=this.editor.model,i=t.document;t.enqueueChange(this._buffer.batch,s=>{this._buffer.lock();const r=s.createSelection(e.selection||i.selection);if(!t.canEditAt(r))return;const o=e.sequence||1,a=r.isCollapsed;if(r.isCollapsed&&t.modifySelection(r,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(o)){this._replaceEntireContentWithParagraph(s);return}if(this._shouldReplaceFirstBlockWithParagraph(r,o)){this.editor.execute("paragraph",{selection:r});return}if(r.isCollapsed)return;let c=0;r.getFirstRange().getMinimalFlatRanges().forEach(d=>{c+=xC(d.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(r,{doNotResetEntireContent:a,direction:this.direction}),this._buffer.input(c),s.setSelection(r),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;const t=this.editor.model,s=t.document.selection,r=t.schema.getLimitElement(s);if(!(s.isCollapsed&&s.containsEntireContent(r))||!t.schema.checkChild(r,"paragraph"))return!1;const a=r.getChild(0);return!(a&&a.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){const t=this.editor.model,s=t.document.selection,r=t.schema.getLimitElement(s),o=e.createElement("paragraph");e.remove(e.createRangeIn(r)),e.insert(o,r),e.setSelection(o,0)}_shouldReplaceFirstBlockWithParagraph(e,t){const i=this.editor.model;if(t>1||this.direction!="backward"||!e.isCollapsed)return!1;const s=e.getFirstPosition(),r=i.schema.getLimitElement(s),o=r.getChild(0);return!(s.parent!=o||!e.containsEntireContent(o)||!i.schema.checkChild(r,"paragraph")||o.name=="paragraph")}}const B0e="character",QD="word",N0e="codePoint",Za="selection",Wu="backward",uh="forward",c7={deleteContent:{unit:Za,direction:Wu},deleteContentBackward:{unit:N0e,direction:Wu},deleteWordBackward:{unit:QD,direction:Wu},deleteHardLineBackward:{unit:Za,direction:Wu},deleteSoftLineBackward:{unit:Za,direction:Wu},deleteContentForward:{unit:B0e,direction:uh},deleteWordForward:{unit:QD,direction:uh},deleteHardLineForward:{unit:Za,direction:uh},deleteSoftLineForward:{unit:Za,direction:uh}};class V0e extends Dr{constructor(e){super(e);const t=e.document;let i=0;t.on("keydown",()=>{i++}),t.on("keyup",()=>{i=0}),t.on("beforeinput",(s,r)=>{if(!this.isEnabled)return;const{targetRanges:o,domEvent:a,inputType:c}=r,d=c7[c];if(!d)return;const h={direction:d.direction,unit:d.unit,sequence:i};h.unit==Za&&(h.selectionToRemove=e.createSelection(o[0])),c==="deleteContentBackward"&&(Pe.isAndroid&&(h.sequence=1),F0e(o)&&(h.unit=Za,h.selectionToRemove=e.createSelection(o)));const m=new kc(t,"delete",o[0]);t.fire(m,new gc(e,a,h)),m.stop.called&&s.stop()}),Pe.isBlink&&L0e(this)}observe(){}stopObserving(){}}function L0e(n){const e=n.view,t=e.document;let i=null,s=!1;t.on("keydown",(a,{keyCode:c})=>{i=c,s=!1}),t.on("keyup",(a,{keyCode:c,domEvent:d})=>{const h=t.selection,m=n.isEnabled&&c==i&&r(c)&&!h.isCollapsed&&!s;if(i=null,m){const p=h.getFirstRange(),w=new kc(t,"delete",p),A={unit:Za,direction:o(c),selectionToRemove:h};t.fire(w,new gc(e,d,A))}}),t.on("beforeinput",(a,{inputType:c})=>{const d=c7[c];r(i)&&d&&d.direction==o(i)&&(s=!0)},{priority:"high"}),t.on("beforeinput",(a,{inputType:c,data:d})=>{i==tt.delete&&c=="insertText"&&d==""&&a.stop()},{priority:"high"});function r(a){return a==tt.backspace||a==tt.delete}function o(a){return a==tt.backspace?Wu:uh}}function F0e(n){if(n.length!=1||n[0].isCollapsed)return!1;const e=n[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let t=0;for(const{nextPosition:i,item:s}of e){if(i.parent.is("$text")){const r=i.parent.data,o=i.offset;if(SE(r,o)||TE(r,o)||x6(r,o))continue;t++}else(s.is("containerElement")||s.is("emptyElement"))&&t++;if(t>1)return!0}return!1}class so extends z{_undoOnBackspace;static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view,i=t.document,s=e.model.document;t.addObserver(V0e),this._undoOnBackspace=!1;const r=new qD(e,"forward");e.commands.add("deleteForward",r),e.commands.add("forwardDelete",r),e.commands.add("delete",new qD(e,"backward")),this.listenTo(i,"delete",(o,a)=>{i.isComposing||a.preventDefault();const{direction:c,sequence:d,selectionToRemove:h,unit:m}=a,p=c==="forward"?"deleteForward":"delete",w={sequence:d};if(m=="selection"){const A=Array.from(h.getRanges()).map(C=>e.editing.mapper.toModelRange(C)).map(C=>LE(C,e.model.schema)||C);w.selection=e.model.createSelection(A)}else w.unit=m;e.execute(p,w),t.scrollToTheSelection()},{priority:"low"}),this.listenTo(i,"keydown",(o,a)=>{if(i.isComposing||a.keyCode!=tt.backspace||!s.selection.isCollapsed)return;const c=e.model.schema.getLimitElement(s.selection),d=e.model.createPositionAt(c,0);if(d.isTouching(s.selection.getFirstPosition())){a.preventDefault();const h=e.model.schema.getNearestSelectionRange(d,"forward");if(!h)return;const m=t.createSelection(e.editing.mapper.toViewRange(h)),p=m.getFirstRange(),w=new kc(document,"delete",p),A={unit:"selection",direction:"backward",selectionToRemove:m};i.fire(w,new gc(t,a.domEvent,A))}}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(i,"delete",(o,a)=>{this._undoOnBackspace&&a.direction=="backward"&&a.sequence==1&&a.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),a.preventDefault(),o.stop())},{context:"$capture"}),this.listenTo(s,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class u7 extends z{static get requires(){return[l7,so]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}function d7(n,e){let t=n.start;return{text:Array.from(n.getWalker({ignoreElementEnd:!1})).reduce((s,{item:r})=>r.is("$text")||r.is("$textProxy")?s+r.data:(t=e.createPositionAfter(r),""),""),range:e.createRange(t,n.end)}}class f7 extends kt(){model;testCallback;_hasMatch;constructor(e,t){super(),this.model=e,this.testCallback=t,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const t=this.model.document;this.listenTo(t.selection,"change:range",(i,{directChange:s})=>{if(s){if(!t.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(t,"change:data",(i,s)=>{s.isUndo||!s.isLocal||this._evaluateTextBeforeSelection("data",{batch:s})})}_evaluateTextBeforeSelection(e,t={}){const i=this.model,r=i.document.selection,o=i.createRange(i.createPositionAt(r.focus.parent,0),r.focus),{text:a,range:c}=d7(o,i),d=this.testCallback(a);if(!d&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!d,d){const h=Object.assign(t,{text:a,range:c});typeof d=="object"&&Object.assign(h,d),this.fire(`matched:${e}`,h)}}}class ZD extends z{attributes;_overrideUid;_isNextGravityRestorationSkipped=!1;static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}constructor(e){super(e),this.attributes=new Set,this._overrideUid=null}init(){const e=this.editor,t=e.model,i=e.editing.view,s=e.locale,r=t.document.selection;this.listenTo(i.document,"arrowKey",(o,a)=>{if(!r.isCollapsed||a.shiftKey||a.altKey||a.ctrlKey)return;const c=a.keyCode==tt.arrowright,d=a.keyCode==tt.arrowleft;if(!c&&!d)return;const h=s.contentLanguageDirection;let m=!1;h==="ltr"&&c||h==="rtl"&&d?m=this._handleForwardMovement(a):m=this._handleBackwardMovement(a),m===!0&&o.stop()},{context:"$text",priority:"highest"}),this.listenTo(r,"change:range",(o,a)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!a.directChange&&$s(r.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){const t=this.attributes,i=this.editor.model,s=i.document.selection,r=s.getFirstPosition();return this._isGravityOverridden||r.isAtStart&&Fo(s,t)?!1:$s(r,t)?(e&&Xf(e),Fo(s,t)&&$s(r,t,!0)?Jf(i,t):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){const t=this.attributes,i=this.editor.model,s=i.document.selection,r=s.getFirstPosition();return this._isGravityOverridden?(e&&Xf(e),this._restoreGravity(),$s(r,t,!0)?Jf(i,t):Wp(i,t,r),!0):r.isAtStart?Fo(s,t)?(e&&Xf(e),Wp(i,t,r),!0):!1:!Fo(s,t)&&$s(r,t,!0)?(e&&Xf(e),Wp(i,t,r),!0):JD(r,t)?r.isAtEnd&&!Fo(s,t)&&$s(r,t)?(e&&Xf(e),Wp(i,t,r),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const e=this.editor,t=e.model,i=t.document.selection,s=e.editing.view.document;e.editing.view.addObserver(zE),e.editing.view.addObserver(bbe);let r=!1,o=!1;this.listenTo(s,"touchstart",()=>{o=!1,r=!0}),this.listenTo(s,"mousedown",()=>{o=!0}),this.listenTo(s,"selectionChange",()=>{const a=this.attributes;if(!o&&!r||(o=!1,r=!1,!i.isCollapsed)||!Fo(i,a))return;const c=i.getFirstPosition();$s(c,a)&&(c.isAtStart||$s(c,a,!0)?Jf(t,a):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const t=this.editor.model,i=t.document.selection,s=this.attributes;this.listenTo(t,"insertContent",()=>{const r=i.getFirstPosition();Fo(i,s)&&$s(r,s)&&Jf(t,s)},{priority:"low"})}_handleDeleteContentAfterNode(){const e=this.editor,t=e.model,i=t.document.selection,s=e.editing.view;let r=!1,o=!1;this.listenTo(s.document,"delete",(a,c)=>{r=c.direction==="backward"},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{if(!r)return;const a=i.getFirstPosition();o=Fo(i,this.attributes)&&!JD(a,this.attributes)},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{r&&(r=!1,!o&&e.model.enqueueChange(()=>{const a=i.getFirstPosition();Fo(i,this.attributes)&&$s(a,this.attributes)&&(a.isAtStart||$s(a,this.attributes,!0)?Jf(t,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function Fo(n,e){for(const t of e)if(n.hasAttribute(t))return!0;return!1}function Wp(n,e,t){const i=t.nodeBefore;n.change(s=>{if(i){const r=[],o=n.schema.isObject(i)&&n.schema.isInline(i);for(const[a,c]of i.getAttributes())n.schema.checkAttribute("$text",a)&&(!o||n.schema.getAttributeProperties(a).copyFromObject!==!1)&&r.push([a,c]);s.setSelectionAttribute(r)}else s.removeSelectionAttribute(e)})}function Jf(n,e){n.change(t=>{t.removeSelectionAttribute(e)})}function Xf(n){n.preventDefault()}function JD(n,e){const t=n.getShiftedBy(-1);return $s(t,e)}function $s(n,e,t=!1){const{nodeBefore:i,nodeAfter:s}=n;for(const r of e){const o=i?i.getAttribute(r):void 0,a=s?s.getAttribute(r):void 0;if(!(t&&(o===void 0||a===void 0))&&a!==o)return!0}return!1}const XD={copyright:{from:"(c)",to:""},registeredTrademark:{from:"(r)",to:""},trademark:{from:"(tm)",to:""},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"",null]},lessThanOrEqual:{from:"<=",to:""},greaterThanOrEqual:{from:">=",to:""},notEqual:{from:"!=",to:""},arrowLeft:{from:"<-",to:""},arrowRight:{from:"->",to:""},horizontalEllipsis:{from:"...",to:""},enDash:{from:/(^| )(--)( )$/,to:[null,"",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"",null]},quotesPrimary:{from:Pu('"'),to:[null,"",null,""]},quotesSecondary:{from:Pu("'"),to:[null,"",null,""]},quotesPrimaryEnGb:{from:Pu("'"),to:[null,"",null,""]},quotesSecondaryEnGb:{from:Pu('"'),to:[null,"",null,""]},quotesPrimaryPl:{from:Pu('"'),to:[null,"",null,""]},quotesSecondaryPl:{from:Pu("'"),to:[null,"",null,""]}},eM={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},z0e=["symbols","mathematical","typography","quotes"];class j0e extends z{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("typing",{transformations:{include:z0e}})}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{const i=t.anchor,s=!!i&&i.parent.is("element","codeBlock"),r=t.hasAttribute("code");this.isEnabled=!(s||r)}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const e=this.editor,t=e.model,i=e.plugins.get("Delete"),s=$0e(e.config.get("typing.transformations")),r=a=>{for(const c of s)if(c.from.test(a))return{normalizedTransformation:c}},o=new f7(e.model,r);o.on("matched:data",(a,c)=>{if(!c.batch.isTyping)return;const{from:d,to:h}=c.normalizedTransformation,m=d.exec(c.text),p=h(m.slice(1)),w=c.range;let A=m.index;t.enqueueChange(C=>{for(let k=1;k<m.length;k++){const E=m[k],S=p[k-1];if(S==null){A+=E.length;continue}const I=w.start.getShiftedBy(A),R=t.createRange(I,I.getShiftedBy(E.length)),O=W0e(I);t.insertContent(C.createText(S,O),R),A+=S.length}t.enqueueChange(()=>{i.requestUndoOnBackspace()})})}),o.bind("isEnabled").to(this)}}function U0e(n){return typeof n=="string"?new RegExp(`(${JF(n)})$`):n}function H0e(n){return typeof n=="string"?()=>[n]:n instanceof Array?()=>n:n}function W0e(n){return(n.textNode?n.textNode:n.nodeAfter).getAttributes()}function Pu(n){return new RegExp(`(^|\\s)(${n})([^${n}]*)(${n})$`)}function $0e(n){const e=n.extra||[],t=n.remove||[],i=r=>!t.includes(r),s=n.include.concat(e).filter(i);return G0e(s).filter(i).map(r=>typeof r=="string"&&XD[r]?XD[r]:r).filter(r=>typeof r=="object").map(r=>({from:U0e(r.from),to:H0e(r.to)}))}function G0e(n){const e=new Set;for(const t of n)if(typeof t=="string"&&eM[t])for(const i of eM[t])e.add(i);else e.add(t);return Array.from(e)}function hy(n,e,t,i){return i.createRange(tM(n,e,t,!0,i),tM(n,e,t,!1,i))}function tM(n,e,t,i,s){let r=n.textNode||(i?n.nodeBefore:n.nodeAfter),o=null;for(;r&&r.getAttribute(e)==t;)o=r,r=i?r.previousSibling:r.nextSibling;return o?s.createPositionAt(o,i?"before":"after"):n}function Y0e(n,e,t,i){const s=n.editing.view,r=new Set;s.document.registerPostFixer(o=>{const a=n.model.document.selection;let c=!1;if(a.hasAttribute(e)){const d=hy(a.getFirstPosition(),e,a.getAttribute(e),n.model),h=n.editing.mapper.toViewRange(d);for(const m of h.getItems())m.is("element",t)&&!m.hasClass(i)&&(o.addClass(i,m),r.add(m),c=!0)}return c}),n.conversion.for("editingDowncast").add(o=>{o.on("insert",a,{priority:"highest"}),o.on("remove",a,{priority:"highest"}),o.on("attribute",a,{priority:"highest"}),o.on("selection",a,{priority:"highest"});function a(){s.change(c=>{for(const d of r.values())c.removeClass(i,d),r.delete(d)})}})}function qa(n,e,t,i){let s,r=null;typeof i=="function"?s=i:(r=n.commands.get(i),s=()=>{n.execute(i)}),n.model.document.on("change:data",(o,a)=>{if(r&&!r.isEnabled||!e.isEnabled)return;const c=qt(n.model.document.selection.getRanges());if(!c.isCollapsed||a.isUndo||!a.isLocal)return;const d=Array.from(n.model.document.differ.getChanges()),h=d[0];if(d.length!=1||h.type!=="insert"||h.name!="$text"||h.length!=1)return;const m=h.position.parent;if(m.is("element","codeBlock")||m.is("element","listItem")&&typeof i!="function"&&!["numberedList","bulletedList","todoList"].includes(i)||r&&r.value===!0)return;const p=m.getChild(0),w=n.model.createRangeOn(p);if(!w.containsRange(c)&&!c.end.isEqual(w.end))return;const A=t.exec(p.data.substr(0,c.end.offset));A&&n.model.enqueueChange(C=>{const k=n.model.document.selection,E=C.createPositionAt(m,0),S=C.createPositionAt(m,A[0].length),I=new Bi(E,S);if(s({match:A})!==!1){const O=Array.from(k.getAttributes());C.remove(I);const U=k.getFirstRange(),P=C.createRangeIn(m);m.isEmpty&&!P.isEqual(U)&&!P.containsRange(U,!0)&&C.remove(m),K0e(C,k,O)}I.detach(),n.model.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})})})}function K0e(n,e,t){const i=n.model.schema,s=e.getFirstPosition();let r=new ea(s);i.checkChild(r,"$text")&&(r=r.push("$text"));for(const[o,a]of t)i.checkAttribute(r,o)&&n.setSelectionAttribute(o,a)}function Ou(n,e,t,i){let s,r;t instanceof RegExp?s=t:r=t,r=r||(o=>{let a;const c=[],d=[];for(;(a=s.exec(o))!==null&&!(a&&a.length<4);){let{index:h,"1":m,"2":p,"3":w}=a;const A=m+p+w;h+=a[0].length-A.length;const C=[h,h+m.length],k=[h+m.length+p.length,h+m.length+p.length+w.length];c.push(C),c.push(k),d.push([h+m.length,h+m.length+p.length])}return{remove:c,format:d}}),n.model.document.on("change:data",(o,a)=>{if(a.isUndo||!a.isLocal||!e.isEnabled)return;const c=n.model,d=c.document.selection;if(!d.isCollapsed)return;const h=Array.from(c.document.differ.getChanges()),m=h[0];if(h.length!=1||m.type!=="insert"||m.name!="$text"||m.length!=1)return;const p=d.focus,w=p.parent,{text:A,range:C}=q0e(c.createRange(c.createPositionAt(w,0),p),c),k=r(A),E=nM(C.start,k.format,c),S=nM(C.start,k.remove,c);E.length&&S.length&&c.enqueueChange(I=>{if(i(I,E)!==!1){for(const O of S.reverse())I.remove(O);c.enqueueChange(()=>{n.plugins.get("Delete").requestUndoOnBackspace()})}})})}function nM(n,e,t){return e.filter(i=>i[0]!==void 0&&i[1]!==void 0).map(i=>t.createRange(n.getShiftedBy(i[0]),n.getShiftedBy(i[1])))}function q0e(n,e){let t=n.start;return{text:Array.from(n.getItems()).reduce((s,r)=>!(r.is("$text")||r.is("$textProxy"))||r.getAttribute("code")?(t=e.createPositionAfter(r),""):s+r.data,""),range:e.createRange(t,n.end)}}class Q0e extends z{static get requires(){return[so]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const e=this.editor,t=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const e=this.editor.commands;e.get("bulletedList")&&qa(this.editor,this,/^[*-]\s$/,"bulletedList"),e.get("numberedList")&&qa(this.editor,this,/^1[.|)]\s$/,"numberedList"),e.get("todoList")&&qa(this.editor,this,/^\[\s?\]\s$/,"todoList"),e.get("checkTodoList")&&qa(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const e=this.editor.commands;if(e.get("bold")){const t=$p(this.editor,"bold");Ou(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,t),Ou(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,t)}if(e.get("italic")){const t=$p(this.editor,"italic");Ou(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,t),Ou(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,t)}if(e.get("code")){const t=$p(this.editor,"code");Ou(this.editor,this,/(`)([^`]+)(`)$/g,t)}if(e.get("strikethrough")){const t=$p(this.editor,"strikethrough");Ou(this.editor,this,/(~~)([^~]+)(~~)$/g,t)}}_addHeadingAutoformats(){const e=this.editor.commands.get("heading");e&&e.modelElements.filter(t=>t.match(/^heading[1-6]$/)).forEach(t=>{const i=t[7],s=new RegExp(`^(#{${i}})\\s$`);qa(this.editor,this,s,()=>{if(!e.isEnabled||e.value===t)return!1;this.editor.execute("heading",{value:t})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&qa(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const e=this.editor,t=e.model.document.selection;e.commands.get("codeBlock")&&qa(e,this,/^```$/,()=>{if(t.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&qa(this.editor,this,/^---$/,"horizontalLine")}}function $p(n,e){return(t,i)=>{if(!n.commands.get(e).isEnabled)return!1;const r=n.model.schema.getValidRanges(i,e);for(const o of r)t.setAttribute(e,!0,o);t.removeSelectionAttribute(e)}}class Z0e extends z{adapter;_debouncedSave;_lastDocumentVersion;_savePromise;_domEmitter;_config;_pendingActions;_makeImmediateSave;_action=null;static get pluginName(){return"Autosave"}static get isOfficialPlugin(){return!0}static get requires(){return[Ad]}constructor(e){super(e);const t=e.config.get("autosave")||{},i=t.waitingTime||1e3;this.set("state","synchronized"),this._debouncedSave=Ts(this._save.bind(this),i),this._lastDocumentVersion=e.model.document.version,this._savePromise=null,this._domEmitter=new(Wi()),this._config=t,this._pendingActions=e.plugins.get(Ad),this._makeImmediateSave=!1}init(){const e=this.editor,t=e.model.document;this.listenTo(e,"ready",()=>{this.listenTo(t,"change:data",(i,s)=>{this._saveCallbacks.length&&s.isLocal&&(this.state==="synchronized"&&(this.state="waiting",this._setPendingAction()),this.state==="waiting"&&this._debouncedSave())})}),this.listenTo(e,"destroy",()=>this._flush(),{priority:"highest"});this._domEmitter.listenTo(window,"beforeunload",(i,s)=>{this._pendingActions.hasAny&&(s.returnValue=this._pendingActions.first.message)})}destroy(){this._domEmitter.stopListening(),super.destroy()}save(){return this._debouncedSave.cancel(),this._save()}_flush(){this._debouncedSave.flush()}_save(){return this._savePromise?(this._makeImmediateSave=this.editor.model.document.version>this._lastDocumentVersion,this._savePromise):(this._setPendingAction(),this.state="saving",this._lastDocumentVersion=this.editor.model.document.version,this._savePromise=Promise.resolve().then(()=>Promise.all(this._saveCallbacks.map(e=>e(this.editor)))).finally(()=>{this._savePromise=null}).then(()=>{if(this._makeImmediateSave)return this._makeImmediateSave=!1,this._save();this.editor.model.document.version>this._lastDocumentVersion?(this.state="waiting",this._debouncedSave()):(this.state="synchronized",this._pendingActions.remove(this._action),this._action=null)}).catch(e=>{throw this.state="error",this.state="saving",this._debouncedSave(),e}),this._savePromise)}_setPendingAction(){const e=this.editor.t;this._action||(this._action=this._pendingActions.add(e("Saving changes")))}get _saveCallbacks(){const e=[];return this.adapter&&this.adapter.save&&e.push(this.adapter.save),this._config.save&&e.push(this._config.save),e}}class eS extends je{attributeKey;constructor(e,t){super(e),this.attributeKey=t}refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){const t=this.editor.model,s=t.document.selection,r=e.forceValue===void 0?!this.value:e.forceValue;t.change(o=>{if(s.isCollapsed)r?o.setSelectionAttribute(this.attributeKey,!0):o.removeSelectionAttribute(this.attributeKey);else{const a=t.schema.getValidRanges(s.getRanges(),this.attributeKey);for(const c of a)r?o.setAttribute(this.attributeKey,r,c):o.removeAttribute(this.attributeKey,c)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);for(const s of i.getRanges())for(const r of s.getItems())if(t.checkAttribute(r,this.attributeKey))return r.hasAttribute(this.attributeKey);return!1}}const Du="bold";class J0e extends z{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Du}),e.model.schema.setAttributeProperties(Du,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Du,view:"strong",upcastAlso:["b",i=>{const s=i.getStyle("font-weight");return s&&(s=="bold"||Number(s)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(Du,new eS(e,Du)),e.keystrokes.set("CTRL+B",Du),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Bold text"),keystroke:"CTRL+B"}]})}}function tS({editor:n,commandName:e,plugin:t,icon:i,label:s,keystroke:r}){return o=>{const a=n.commands.get(e),c=new o(n.locale);return c.set({label:s,icon:i,keystroke:r,isToggleable:!0}),c.bind("isEnabled").to(a,"isEnabled"),c.bind("isOn").to(a,"value"),c instanceof xn?c.set({role:"menuitemcheckbox"}):c.set({tooltip:!0}),t.listenTo(c,"execute",()=>{n.execute(e),n.editing.view.focus()}),c}}const K_="bold";class X0e extends z{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=tS({editor:e,commandName:K_,plugin:this,icon:k8,label:t("Bold"),keystroke:"CTRL+B"});e.ui.componentFactory.add(K_,()=>i(Se)),e.ui.componentFactory.add("menuBar:"+K_,()=>i(xn))}}class eAe extends z{static get requires(){return[J0e,X0e]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const Mu="italic";class tAe extends z{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Mu}),e.model.schema.setAttributeProperties(Mu,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Mu,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(Mu,new eS(e,Mu)),e.keystrokes.set("CTRL+I",Mu),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Italic text"),keystroke:"CTRL+I"}]})}}const q_="italic";class nAe extends z{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=tS({editor:e,commandName:q_,plugin:this,icon:Pwe,keystroke:"CTRL+I",label:t("Italic")});e.ui.componentFactory.add(q_,()=>i(Se)),e.ui.componentFactory.add("menuBar:"+q_,()=>i(xn))}}class iAe extends z{static get requires(){return[tAe,nAe]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const eh="underline";class sAe extends z{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:eh}),e.model.schema.setAttributeProperties(eh,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:eh,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(eh,new eS(e,eh)),e.keystrokes.set("CTRL+U","underline"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Underline text"),keystroke:"CTRL+U"}]})}}const Q_="underline";class rAe extends z{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=tS({editor:e,commandName:Q_,plugin:this,icon:gve,label:t("Underline"),keystroke:"CTRL+U"});e.ui.componentFactory.add(Q_,()=>i(Se)),e.ui.componentFactory.add("menuBar:"+Q_,()=>i(xn))}}class oAe extends z{static get requires(){return[sAe,rAe]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}function*h7(n,e){for(const t of e)t&&n.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}class aAe extends je{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){const t=this.editor.model,i=t.document.selection,s=t.schema,r=i.isCollapsed,o=i.getFirstRange(),a=o.start.parent,c=o.end.parent;if(s.isLimit(a)||s.isLimit(c))return!r&&a==c&&t.deleteContent(i),!1;if(r){const d=h7(e.model.schema,i.getAttributes());return iM(e,o.start),e.setSelectionAttribute(d),!0}else{const d=!(o.start.isAtStart&&o.end.isAtEnd),h=a==c;if(t.deleteContent(i,{leaveUnmerged:d}),d){if(h)return iM(e,i.focus),!0;e.setSelection(c,0)}}return!1}}function iM(n,e){n.split(e),n.setSelection(e.parent.nextSibling,0)}const lAe={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class m7 extends Dr{constructor(e){super(e);const t=this.document;let i=!1;t.on("keydown",(s,r)=>{i=r.shiftKey}),t.on("beforeinput",(s,r)=>{if(!this.isEnabled)return;let o=r.inputType;Pe.isSafari&&i&&o=="insertParagraph"&&(o="insertLineBreak");const a=r.domEvent,c=lAe[o];if(!c)return;const d=new kc(t,"enter",r.targetRanges[0]);t.fire(d,new gc(e,a,{isSoft:c.isSoft})),d.stop.called&&s.stop()})}observe(){}stopObserving(){}}class Hm extends z{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view,i=t.document,s=this.editor.t;t.addObserver(m7),e.commands.add("enter",new aAe(e)),this.listenTo(i,"enter",(r,o)=>{i.isComposing||o.preventDefault(),!o.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class cAe extends je{execute(){const e=this.editor.model,t=e.document;e.change(i=>{dAe(e,i,t.selection),this.fire("afterExecute",{writer:i})})}refresh(){const e=this.editor.model,t=e.document;this.isEnabled=uAe(e.schema,t.selection)}}function uAe(n,e){if(e.rangeCount>1)return!1;const t=e.anchor;if(!t||!n.checkChild(t,"softBreak"))return!1;const i=e.getFirstRange(),s=i.start.parent,r=i.end.parent;return!((UC(s,n)||UC(r,n))&&s!==r)}function dAe(n,e,t){const i=t.isCollapsed,s=t.getFirstRange(),r=s.start.parent,o=s.end.parent,a=r==o;if(i){const c=h7(n.schema,t.getAttributes());sM(n,e,s.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(c)}else{const c=!(s.start.isAtStart&&s.end.isAtEnd);n.deleteContent(t,{leaveUnmerged:c}),a?sM(n,e,t.focus):c&&e.setSelection(o,0)}}function sM(n,e,t){const i=e.createElement("softBreak");n.insertContent(i,t),e.setSelection(i,"after")}function UC(n,e){return n.is("rootElement")?!1:e.isLimit(n)||UC(n.parent,e)}class fAe extends z{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model.schema,i=e.conversion,s=e.editing.view,r=s.document,o=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),i.for("upcast").elementToElement({model:"softBreak",view:"br"}),i.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:c})=>c.createEmptyElement("br")}),s.addObserver(m7),e.commands.add("shiftEnter",new cAe(e)),this.listenTo(r,"enter",(a,c)=>{r.isComposing||c.preventDefault(),c.isSoft&&(e.execute("shiftEnter"),s.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:o("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}class hAe extends je{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.schema,s=t.document.selection,r=Array.from(s.getSelectedBlocks()),o=e.forceValue===void 0?!this.value:e.forceValue;t.change(a=>{if(!o)this._removeQuote(a,r.filter(Gp));else{const c=r.filter(d=>Gp(d)||oM(i,d));this._applyQuote(a,c)}})}_getValue(){const e=this.editor.model.document.selection,t=qt(e.getSelectedBlocks());return!!(t&&Gp(t))}_checkEnabled(){if(this.value)return!0;const e=this.editor.model.document.selection,t=this.editor.model.schema,i=qt(e.getSelectedBlocks());return i?oM(t,i):!1}_removeQuote(e,t){rM(e,t).reverse().forEach(i=>{if(i.start.isAtStart&&i.end.isAtEnd){e.unwrap(i.start.parent);return}if(i.start.isAtStart){const r=e.createPositionBefore(i.start.parent);e.move(i,r);return}i.end.isAtEnd||e.split(i.end);const s=e.createPositionAfter(i.end.parent);e.move(i,s)})}_applyQuote(e,t){const i=[];rM(e,t).reverse().forEach(s=>{let r=Gp(s.start);r||(r=e.createElement("blockQuote"),e.wrap(s,r)),i.push(r)}),i.reverse().reduce((s,r)=>s.nextSibling==r?(e.merge(e.createPositionAfter(s)),s):r)}}function Gp(n){return n.parent.name=="blockQuote"?n.parent:null}function rM(n,e){let t,i=0;const s=[];for(;i<e.length;){const r=e[i],o=e[i+1];t||(t=n.createPositionBefore(r)),(!o||r.nextSibling!=o)&&(s.push(n.createRange(t,n.createPositionAfter(r))),t=null),i++}return s}function oM(n,e){const t=n.checkChild(e.parent,"blockQuote"),i=n.checkChild(["$root","blockQuote"],e);return t&&i}class mAe extends z{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Hm,so]}init(){const e=this.editor,t=e.model.schema;e.commands.add("blockQuote",new hAe(e)),t.register("blockQuote",{inheritAllFrom:"$container"}),e.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),e.model.document.registerPostFixer(o=>{const a=e.model.document.differ.getChanges();for(const c of a)if(c.type=="insert"){const d=c.position.nodeAfter;if(!d)continue;if(d.is("element","blockQuote")&&d.isEmpty)return o.remove(d),!0;if(d.is("element","blockQuote")&&!t.checkChild(c.position,d))return o.unwrap(d),!0;if(d.is("element")){const h=o.createRangeIn(d);for(const m of h.getItems())if(m.is("element","blockQuote")&&!t.checkChild(o.createPositionBefore(m),m))return o.unwrap(m),!0}}else if(c.type=="remove"){const d=c.position.parent;if(d.is("element","blockQuote")&&d.isEmpty)return o.remove(d),!0}return!1});const i=this.editor.editing.view.document,s=e.model.document.selection,r=e.commands.get("blockQuote");this.listenTo(i,"enter",(o,a)=>{if(!s.isCollapsed||!r.value)return;s.getLastPosition().parent.isEmpty&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),o.stop())},{context:"blockquote"}),this.listenTo(i,"delete",(o,a)=>{if(a.direction!="backward"||!s.isCollapsed||!r.value)return;const c=s.getLastPosition().parent;c.isEmpty&&!c.previousSibling&&(e.execute("blockQuote"),e.editing.view.scrollToTheSelection(),a.preventDefault(),o.stop())},{context:"blockquote"})}}class gAe extends z{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("blockQuote",()=>{const t=this._createButton(Se);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:blockQuote",()=>{const t=this._createButton(xn);return t.set({role:"menuitemcheckbox"}),t})}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("blockQuote"),r=new e(t.locale),o=i.t;return r.set({label:o("Block quote"),icon:eve,isToggleable:!0}),r.bind("isEnabled").to(s,"isEnabled"),r.bind("isOn").to(s,"value"),this.listenTo(r,"execute",()=>{t.execute("blockQuote"),t.editing.view.focus()}),r}}class pAe extends z{static get requires(){return[mAe,gAe]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}class bAe extends Ot(){_stack=[];add(e,t){const i=this._stack,s=i[0];this._insertDescriptor(e);const r=i[0];s!==r&&!Z_(s,r)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:r,writer:t})}remove(e,t){const i=this._stack,s=i[0];this._removeDescriptor(e);const r=i[0];s!==r&&!Z_(s,r)&&this.fire("change:top",{oldDescriptor:s,newDescriptor:r,writer:t})}_insertDescriptor(e){const t=this._stack,i=t.findIndex(r=>r.id===e.id);if(Z_(e,t[i]))return;i>-1&&t.splice(i,1);let s=0;for(;t[s]&&wAe(t[s],e);)s++;t.splice(s,0,e)}_removeDescriptor(e){const t=this._stack,i=t.findIndex(s=>s.id===e);i>-1&&t.splice(i,1)}}function Z_(n,e){return n&&e&&n.priority==e.priority&&Rw(n.classes)==Rw(e.classes)}function wAe(n,e){return n.priority>e.priority?!0:n.priority<e.priority?!1:Rw(n.classes)>Rw(e.classes)}function Rw(n){return Array.isArray(n)?n.sort().join(","):n}const vAe="ck-widget",aM="ck-widget_selected";function tn(n){return n.is("element")?!!n.getCustomProperty("widget"):!1}function Tc(n,e,t={}){if(!n.is("containerElement"))throw new D("widget-to-widget-wrong-element-type",null,{element:n});return e.setAttribute("contenteditable","false",n),e.addClass(vAe,n),e.setCustomProperty("widget",!0,n),n.getFillerOffset=xAe,e.setCustomProperty("widgetLabel",[],n),t.label&&_Ae(n,t.label),t.hasSelectionHandle&&kAe(n,e),g7(n,e),n}function yAe(n,e,t){if(e.classes&&t.addClass(yt(e.classes),n),e.attributes)for(const i in e.attributes)t.setAttribute(i,e.attributes[i],n)}function AAe(n,e,t){if(e.classes&&t.removeClass(yt(e.classes),n),e.attributes)for(const i in e.attributes)t.removeAttribute(i,n)}function g7(n,e,t=yAe,i=AAe){const s=new bAe;s.on("change:top",(a,c)=>{c.oldDescriptor&&i(n,c.oldDescriptor,c.writer),c.newDescriptor&&t(n,c.newDescriptor,c.writer)});const r=(a,c,d)=>s.add(c,d),o=(a,c,d)=>s.remove(c,d);e.setCustomProperty("addHighlight",r,n),e.setCustomProperty("removeHighlight",o,n)}function _Ae(n,e){n.getCustomProperty("widgetLabel").push(e)}function CAe(n){return n.getCustomProperty("widgetLabel").reduce((t,i)=>typeof i=="function"?t?t+". "+i():i():t?t+". "+i:i,"")}function nS(n,e,t={}){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],n),t.withAriaRole!==!1&&e.setAttribute("role","textbox",n),n.isReadOnly||e.setAttribute("tabindex","-1",n),t.label&&e.setAttribute("aria-label",t.label,n),e.setAttribute("contenteditable",n.isReadOnly?"false":"true",n),n.on("change:isReadOnly",(i,s,r)=>{e.setAttribute("contenteditable",r?"false":"true",n),r?e.removeAttribute("tabindex",n):e.setAttribute("tabindex","-1",n)}),n.on("change:isFocused",(i,s,r)=>{r?e.addClass("ck-editor__nested-editable_focused",n):e.removeClass("ck-editor__nested-editable_focused",n)}),g7(n,e),n}function my(n,e){const t=n.getSelectedElement();if(t){const i=Uo(n);if(i)return e.createRange(e.createPositionAt(t,i))}return e.schema.findOptimalInsertionRange(n)}function xAe(){return null}function kAe(n,e){const t=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(i){const s=this.toDomElement(i),r=new Br;return r.set("content",Cwe),r.render(),s.appendChild(r.element),s});e.insert(e.createPositionAt(n,0),t),e.addClass(["ck-widget_with-selection-handle"],n)}function iS(n){const e=a=>{const{width:c,paddingLeft:d,paddingRight:h}=a.ownerDocument.defaultView.getComputedStyle(a);return parseFloat(c)-(parseFloat(d)||0)-(parseFloat(h)||0)},t=n.parentElement;if(!t)return 0;let i=e(t);const s=5;let r=0,o=t;for(;isNaN(i);){if(o=o.parentElement,++r>s)return 0;i=e(o)}return i}function EAe(n,e=new Le(n)){const t=iS(n);return t?e.width/t*100:0}const zo="widget-type-around";function Kl(n,e,t){return!!n&&tn(n)&&!t.isInline(e)}function SAe(n){return n.closest(".ck-widget__type-around__button")}function TAe(n){return n.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function IAe(n,e){const t=n.closest(".ck-widget");return e.mapDomToView(t)}function Uo(n){return n.getAttribute(zo)}const p7=["before","after"],RAe=new DOMParser().parseFromString(tve,"image/svg+xml").firstChild,lM="ck-widget__type-around_disabled";class PAe extends z{_currentFakeCaretModelElement=null;static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[Hm,so]}init(){const e=this.editor,t=e.editing.view;this.on("change:isEnabled",(i,s,r)=>{t.change(o=>{for(const a of t.document.roots)r?o.removeClass(lM,a):o.addClass(lM,a)}),r||e.model.change(o=>{o.removeSelectionAttribute(zo)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,t){const i=this.editor,s=i.editing.view,r=i.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);i.execute("insertParagraph",{position:i.model.createPositionAt(e,t),attributes:r}),s.focus(),s.scrollToTheSelection()}_listenToIfEnabled(e,t,i,s){this.listenTo(e,t,(...r)=>{this.isEnabled&&i(...r)},s)}_insertParagraphAccordingToFakeCaretPosition(){const i=this.editor.model.document.selection,s=Uo(i);if(!s)return!1;const r=i.getSelectedElement();return this._insertParagraph(r,s),!0}_enableTypeAroundUIInjection(){const e=this.editor,t=e.model.schema,i=e.locale.t,s={before:i("Insert paragraph before block"),after:i("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(r,o,a)=>{const c=a.mapper.toViewElement(o.item);c&&Kl(c,o.item,t)&&(OAe(a.writer,s,c),c.getCustomProperty("widgetLabel").push(()=>this.isEnabled?i("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const e=this.editor,t=e.model,i=t.document.selection,s=t.schema,r=e.editing.view;this._listenToIfEnabled(r.document,"arrowKey",(a,c)=>{this._handleArrowKeyPress(a,c)},{context:[tn,"$text"],priority:"high"}),this._listenToIfEnabled(i,"change:range",(a,c)=>{c.directChange&&e.model.change(d=>{d.removeSelectionAttribute(zo)})}),this._listenToIfEnabled(t.document,"change:data",()=>{const a=i.getSelectedElement();if(a){const c=e.editing.mapper.toViewElement(a);if(Kl(c,a,s))return}e.model.change(c=>{c.removeSelectionAttribute(zo)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(a,c,d)=>{const h=d.writer;if(this._currentFakeCaretModelElement){const A=d.mapper.toViewElement(this._currentFakeCaretModelElement);A&&(h.removeClass(p7.map(o),A),this._currentFakeCaretModelElement=null)}const m=c.selection.getSelectedElement();if(!m)return;const p=d.mapper.toViewElement(m);if(!Kl(p,m,s))return;const w=Uo(c.selection);w&&(h.addClass(o(w),p),this._currentFakeCaretModelElement=m)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(a,c,d)=>{d||e.model.change(h=>{h.removeSelectionAttribute(zo)})});function o(a){return`ck-widget_type-around_show-fake-caret_${a}`}}_handleArrowKeyPress(e,t){const i=this.editor,s=i.model,r=s.document.selection,o=s.schema,a=i.editing.view;if(t.shiftKey)return;const c=t.keyCode,d=phe(c,i.locale.contentLanguageDirection),h=a.document.selection.getSelectedElement(),m=i.editing.mapper.toModelElement(h);let p;Kl(h,m,o)?p=this._handleArrowKeyPressOnSelectedWidget(d):r.isCollapsed?p=this._handleArrowKeyPressWhenSelectionNextToAWidget(d):t.shiftKey||(p=this._handleArrowKeyPressWhenNonCollapsedSelection(d)),p&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){const i=this.editor.model,s=i.document.selection,r=Uo(s);return i.change(o=>{if(r){if(!(r===(e?"after":"before")))return o.removeSelectionAttribute(zo),!0}else return o.setSelectionAttribute(zo,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){const t=this.editor,i=t.model,s=i.schema,r=t.plugins.get("Widget"),o=r._getObjectElementNextToSelection(e),a=t.editing.mapper.toViewElement(o);return Kl(a,o,s)?(i.change(c=>{r._setSelectionOverElement(o),c.setSelectionAttribute(zo,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){const t=this.editor,i=t.model,s=i.schema,r=t.editing.mapper,o=i.document.selection,a=e?o.getLastPosition().nodeBefore:o.getFirstPosition().nodeAfter,c=r.toViewElement(a);return Kl(c,a,s)?(i.change(d=>{d.setSelection(a,"on"),d.setSelectionAttribute(zo,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",(i,s)=>{const r=SAe(s.domTarget);if(!r)return;const o=TAe(r),a=IAe(r,t.domConverter),c=e.editing.mapper.toModelElement(a);this._insertParagraph(c,o),s.preventDefault(),i.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const e=this.editor,t=e.model.document.selection,i=e.editing.view;this._listenToIfEnabled(i.document,"enter",(s,r)=>{if(s.eventPhase!="atTarget")return;const o=t.getSelectedElement(),a=e.editing.mapper.toViewElement(o),c=e.model.schema;let d;this._insertParagraphAccordingToFakeCaretPosition()?d=!0:Kl(a,o,c)&&(this._insertParagraph(o,r.isSoft?"before":"after"),d=!0),d&&(r.preventDefault(),s.stop())},{context:tn})}_enableInsertingParagraphsOnTypingKeystroke(){const t=this.editor.editing.view.document;this._listenToIfEnabled(t,"insertText",(i,s)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(s.selection=t.selection)},{priority:"high"}),Pe.isAndroid?this._listenToIfEnabled(t,"keydown",(i,s)=>{s.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(t,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"highest"})}_enableDeleteIntegration(){const e=this.editor,t=e.editing.view,i=e.model,s=i.schema;this._listenToIfEnabled(t.document,"delete",(r,o)=>{if(r.eventPhase!="atTarget")return;const a=Uo(i.document.selection);if(!a)return;const c=o.direction,d=i.document.selection.getSelectedElement(),h=a==="before",m=c=="forward";if(h===m)e.execute("delete",{selection:i.createSelection(d,"on")});else{const w=s.getNearestSelectionRange(i.createPositionAt(d,a),c);if(w)if(!w.isCollapsed)i.change(A=>{A.setSelection(w),e.execute(m?"deleteForward":"delete")});else{const A=i.createSelection(w.start);if(i.modifySelection(A,{direction:c}),!A.focus.isEqual(w.start))i.change(C=>{C.setSelection(w),e.execute(m?"deleteForward":"delete")});else{const C=BAe(s,w.start.parent);i.deleteContent(i.createSelection(C,"on"),{doNotAutoparagraph:!0})}}}o.preventDefault(),r.stop()},{context:tn})}_enableInsertContentIntegration(){const e=this.editor,t=this.editor.model,i=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",(s,[r,o])=>{if(o&&!o.is("documentSelection"))return;const a=Uo(i);if(a)return s.stop(),t.change(c=>{const d=i.getSelectedElement(),h=t.createPositionAt(d,a),m=c.createSelection(h),p=t.insertContent(r,m);return c.setSelection(m),p})},{priority:"high"})}_enableInsertObjectIntegration(){const e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(s,r)=>{const[,o,a={}]=r;if(o&&!o.is("documentSelection"))return;const c=Uo(i);c&&(a.findOptimalPosition=c,r[3]=a)},{priority:"high"})}_enableDeleteContentIntegration(){const e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(s,[r])=>{if(r&&!r.is("documentSelection"))return;Uo(i)&&s.stop()},{priority:"high"})}}function OAe(n,e,t){const i=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(s){const r=this.toDomElement(s);return DAe(r,e),MAe(r),r});n.insert(n.createPositionAt(t,"end"),i)}function DAe(n,e){for(const t of p7){const i=new Vi({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:e[t],"aria-hidden":"true"},children:[n.ownerDocument.importNode(RAe,!0)]});n.appendChild(i.render())}}function MAe(n){const e=new Vi({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});n.appendChild(e.render())}function BAe(n,e){let t=e;for(const i of e.getAncestors({parentFirst:!0})){if(i.childCount>1||n.isLimit(i))break;t=i}return t}function NAe(n){const e=n.model;return(t,i)=>{const s=i.keyCode==tt.arrowup,r=i.keyCode==tt.arrowdown,o=i.shiftKey,a=e.document.selection;if(!s&&!r)return;const c=r,d=VAe(n,a,c);if(d){if(d.isCollapsed){if(a.isCollapsed)return;if(o)return}(d.isCollapsed||LAe(n,d,c))&&(e.change(h=>{const m=c?d.end:d.start;if(o){const p=e.createSelection(a.anchor);p.setFocus(m),h.setSelection(p)}else h.setSelection(m)}),t.stop(),i.preventDefault(),i.stopPropagation())}}}function VAe(n,e,t){const i=n.model;if(t){const s=e.focus,r=cM(i,s,"forward");if(!r)return;const o=i.createRange(s,r),a=uM(i.schema,o,"backward");if(a)return i.createRange(s,a)}else{const s=e.focus,r=cM(i,s,"backward");if(!r)return;const o=i.createRange(r,s),a=uM(i.schema,o,"forward");if(a)return i.createRange(a,s)}}function cM(n,e,t){const i=n.schema,s=n.createRangeIn(e.root),r=t=="forward"?"elementStart":"elementEnd";for(const{previousPosition:o,item:a,type:c}of s.getWalker({startPosition:e,direction:t})){if(i.isLimit(a)&&!i.isInline(a))return o;if(c==r&&i.isBlock(a))return null}return null}function uM(n,e,t){const i=t=="backward"?e.end:e.start;if(n.checkChild(i,"$text"))return i;for(const{nextPosition:s}of e.getWalker({direction:t}))if(n.checkChild(s,"$text"))return s}function LAe(n,e,t){const i=n.model,s=n.view.domConverter;if(t){const d=i.createSelection(e.start);i.modifySelection(d),!d.focus.isAtEnd&&!e.start.isEqual(d.focus)&&(e=i.createRange(d.focus,e.end))}const r=n.mapper.toViewRange(e),o=s.viewRangeToDom(r),a=Le.getDomRangeRects(o);let c;for(const d of a){if(c===void 0){c=Math.round(d.bottom);continue}if(Math.round(d.top)>=c)return!1;c=Math.max(c,Math.round(d.bottom))}return!0}class Cl extends z{_previouslySelected=new Set;static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[PAe,so]}init(){const e=this.editor,t=e.editing.view,i=t.document,s=e.t;this.editor.editing.downcastDispatcher.on("selection",(r,o,a)=>{const c=a.writer,d=o.selection;if(d.isCollapsed)return;const h=d.getSelectedElement();if(!h)return;const m=e.editing.mapper.toViewElement(h);tn(m)&&a.consumable.consume(d,"selection")&&c.setSelection(c.createRangeOn(m),{fake:!0,label:CAe(m)})}),this.editor.editing.downcastDispatcher.on("selection",(r,o,a)=>{this._clearPreviouslySelectedWidgets(a.writer);const c=a.writer,d=c.document.selection;let h=null;for(const m of d.getRanges())for(const p of m){const w=p.item;tn(w)&&!HAe(w,h)&&(c.addClass(aM,w),this._previouslySelected.add(w),h=w)}},{priority:"low"}),t.addObserver(zE),t.addObserver(h8),this.listenTo(i,"mousedown",(...r)=>this._onMousedown(...r)),this.listenTo(i,"pointerdown",(...r)=>this._onPointerdown(...r)),this.listenTo(i,"arrowKey",(...r)=>{this._handleSelectionChangeOnArrowKeyPress(...r)},{context:[tn,"$text"]}),this.listenTo(i,"arrowKey",(...r)=>{this._preventDefaultOnArrowKeyPress(...r)},{context:"$root"}),this.listenTo(i,"arrowKey",NAe(this.editor.editing),{context:"$text"}),this.listenTo(i,"delete",(r,o)=>{this._handleDelete(o.direction=="forward")&&(o.preventDefault(),r.stop())},{context:"$root"}),this.listenTo(i,"tab",(r,o)=>{this._selectNextEditable(o.shiftKey?"backward":"forward")&&(t.scrollToTheSelection(),o.preventDefault(),r.stop())},{context:r=>tn(r)||r.is("editableElement"),priority:"low"}),this.listenTo(i,"keydown",(r,o)=>{o.keystroke==tt.esc&&this._selectAncestorWidget()&&(o.preventDefault(),r.stop())},{context:r=>r.is("editableElement"),priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:s("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:s("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:s("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:s("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:s("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:s("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,t){const i=t.target;i&&t.domEvent.detail>=3&&this._selectBlockContent(i)&&t.preventDefault()}_onPointerdown(e,t){if(!t.domEvent.isPrimary)return;const i=this.editor,s=i.editing.view,r=s.document;let o=t.target;if(!o)return;if(!tn(o)){const c=jAe(o);if(!c)return;if(tn(c))o=c;else{const d=UAe(s,t);if(d&&tn(d))o=d;else return}}(Pe.isAndroid||Pe.isiOS)&&t.preventDefault(),r.isFocused||s.focus();const a=i.editing.mapper.toModelElement(o);this._setSelectionOverElement(a)}_selectBlockContent(e){const t=this.editor,i=t.model,s=t.editing.mapper,r=i.schema,o=s.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),a=WAe(s.toModelElement(o),i.schema);return a?(i.change(c=>{const d=r.isLimit(a)?null:$Ae(c.createPositionAfter(a),r),h=c.createPositionAt(a,0),m=d?c.createPositionAt(d,0):c.createPositionAt(a,"end");c.setSelection(c.createRange(h,m))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,t){const i=t.keyCode,s=this.editor.model,r=s.schema,o=s.document.selection,a=o.getSelectedElement(),c=ny(i,this.editor.locale.contentLanguageDirection),d=c=="down"||c=="right",h=c=="up"||c=="down";if(!t.shiftKey&&!o.isCollapsed){if(FAe(o,r)){const E=d?o.getLastPosition():o.getFirstPosition(),S=r.getNearestSelectionRange(E,d?"forward":"backward");S&&(s.change(I=>{I.setSelection(S)}),t.preventDefault(),e.stop())}return}const m=zAe(s,d),p=s.createSelection(m);if(s.modifySelection(p,{direction:d?"forward":"backward"}),p.isEqual(m))return;p.focus.isTouching(m.focus)&&s.modifySelection(p,{direction:d?"forward":"backward"});const w=d?m.focus.nodeBefore:m.focus.nodeAfter,A=p.focus.nodeBefore,C=p.focus.nodeAfter,k=d?A:C;if(t.shiftKey)(a&&r.isObject(a)||k&&r.isObject(k)||w&&r.isObject(w))&&(s.change(E=>{E.setSelection(p)}),t.preventDefault(),e.stop());else if(k&&r.isObject(k)){if(r.isInline(k)&&h)return;s.change(E=>{E.setSelection(k,"on")}),t.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,t){const i=this.editor.model,s=i.schema,r=i.document.selection.getSelectedElement();r&&s.isObject(r)&&(t.preventDefault(),e.stop())}_handleDelete(e){const i=this.editor.model.document.selection;if(!this.editor.model.canEditAt(i)||!i.isCollapsed)return;const s=this._getObjectElementNextToSelection(e);if(s)return this.editor.model.change(r=>{let o=i.anchor.parent;for(;o.isEmpty;){const a=o;o=a.parent,r.remove(a)}this._setSelectionOverElement(s)}),!0}_setSelectionOverElement(e){this.editor.model.change(t=>{t.setSelection(t.createRangeOn(e))})}_getObjectElementNextToSelection(e){const t=this.editor.model,i=t.schema,s=t.document.selection,r=t.createSelection(s);if(t.modifySelection(r,{direction:e?"forward":"backward"}),r.isEqual(s))return null;const o=e?r.focus.nodeBefore:r.focus.nodeAfter;return o&&i.isObject(o)?o:null}_clearPreviouslySelectedWidgets(e){for(const t of this._previouslySelected)e.removeClass(aM,t);this._previouslySelected.clear()}_selectNextEditable(e){const t=this.editor.editing,i=t.view,s=this.editor.model,r=i.document.selection,o=s.document.selection;let a;if(o.rangeCount>1){const d=o.isBackward?o.getFirstRange():o.getLastRange();a=t.mapper.toViewPosition(e=="forward"?d.end:d.start)}else a=e=="forward"?r.getFirstPosition():r.getLastPosition();const c=this._findNextFocusRange(a,e);return c?(s.change(d=>{d.setSelection(c)}),!0):!1}_findNextFocusRange(e,t){const i=this.editor.editing,s=i.view,r=this.editor.model,o=s.document.selection,a=o.editableElement,c=a.getPath();let d=o.getSelectedElement();d&&!tn(d)&&(d=null);const h=t=="forward"?s.createRange(e,s.createPositionAt(e.root,"end")):s.createRange(s.createPositionAt(e.root,0),e);for(const{nextPosition:m}of h.getWalker({direction:t})){const p=m.parent;if(tn(p)&&p!=d){const w=i.mapper.toModelElement(p);if(!r.schema.isBlock(w))continue;if(ri(c,p.getPath())!="extension")return r.createRangeOn(w)}else if(p.is("editableElement")){if(p==a&&!d)continue;const w=i.mapper.toModelPosition(m),A=r.schema.getNearestSelectionRange(w,t);if(!A)continue;return p==a&&d?A:ri(c,p.getPath())!="extension"?r.createRangeIn(r.schema.getLimitElement(A)):A}}return null}_selectAncestorWidget(){const e=this.editor,t=e.editing.mapper,s=e.editing.view.document.selection.getFirstPosition().parent,o=(s.is("$text")?s.parent:s).findAncestor(tn);if(!o)return!1;const a=t.toModelElement(o);return a?(e.model.change(c=>{c.setSelection(a,"on")}),!0):!1}}function FAe(n,e){const t=n.getFirstPosition(),i=n.getLastPosition(),s=t.nodeAfter,r=i.nodeBefore;return!!s&&e.isObject(s)||!!r&&e.isObject(r)}function zAe(n,e){const t=n.document.selection,i=t.getSelectedElement(),s=Uo(t);return i&&s=="before"?n.createSelection(i,"before"):i&&s=="after"?n.createSelection(i,"after"):n.createSelection(t.getRanges(),{backward:i&&n.schema.isObject(i)?!e:t.isBackward})}function jAe(n){let e=n;for(;e;){if(e.is("editableElement")||tn(e))return e;e=e.parent}return null}function UAe(n,e){const t=f6(e.domEvent);let i=null;if(t?i=n.domConverter.domRangeToView(t):i=n.createRange(n.createPositionAt(e.target,0)),!i)return null;const s=i.start;if(!s.parent)return null;let r=s.parent;return s.parent.is("editableElement")&&(s.isAtEnd&&s.nodeBefore?r=s.nodeBefore:s.isAtStart&&s.nodeAfter&&(r=s.nodeAfter)),r.is("$text")?r.parent:r}function HAe(n,e){return e?Array.from(n.getAncestors()).includes(e):!1}function WAe(n,e){for(const t of n.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(t,"$text"))return t;if(e.isLimit(t)&&!e.isObject(t))break}return null}function $Ae(n,e){const t=new qo({startPosition:n});for(const{item:i}of t){if(e.isLimit(i)||!i.is("element"))return null;if(e.checkChild(i,"$text"))return i}return null}class Pw extends z{_toolbarDefinitions=new Map;_balloon;static get requires(){return[Rr]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(e.plugins.has("BalloonToolbar")){const t=e.plugins.get("BalloonToolbar");this.listenTo(t,"show",i=>{GAe(e.editing.view.document.selection)&&i.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:t,items:i,getRelatedElement:s,balloonClassName:r="ck-toolbar-container",positions:o}){if(!i.length){lt("widget-toolbar-no-items",{toolbarId:e});return}const a=this.editor,c=a.t,d=new da(a.locale);if(d.ariaLabel=t||c("Widget toolbar"),this._toolbarDefinitions.has(e))throw new D("widget-toolbar-duplicated",this,{toolbarId:e});const h={view:d,getRelatedElement:s,balloonClassName:r,itemsConfig:i,positions:o,initialized:!1};a.ui.addToolbar(d,{isContextual:!0,beforeFocus:()=>{const m=s(a.editing.view.document.selection);m&&this._showToolbar(h,m)},afterBlur:()=>{this._hideToolbar(h)}}),this._toolbarDefinitions.set(e,h)}_updateToolbarsVisibility(){let e=0,t=null,i=null;for(const s of this._toolbarDefinitions.values()){const r=s.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!r)this._isToolbarInBalloon(s)&&this._hideToolbar(s);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(s)&&this._hideToolbar(s);else{const o=r.getAncestors().length;o>e&&(e=o,t=r,i=s)}}i&&this._showToolbar(i,t)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,t){this._isToolbarVisible(e)?dM(this.editor,t,e.positions):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:b7(this.editor,t,e.positions),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const i of this._toolbarDefinitions.values())if(this._isToolbarVisible(i)){const s=i.getRelatedElement(this.editor.editing.view.document.selection);dM(this.editor,s,e.positions)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}}function dM(n,e,t){const i=n.plugins.get("ContextualBalloon"),s=b7(n,e,t);i.updatePosition(s)}function b7(n,e,t){const i=n.editing.view,s=rn.defaultPositions;return{target:i.domConverter.mapViewToDom(e),positions:t||[s.northArrowSouth,s.northArrowSouthWest,s.northArrowSouthEast,s.southArrowNorth,s.southArrowNorthWest,s.southArrowNorthEast,s.viewportStickyNorth]}}function GAe(n){const e=n.getSelectedElement();return!!(e&&tn(e))}class YAe extends kt(){_referenceCoordinates;_options;_originalWidth;_originalHeight;_originalWidthPercents;_aspectRatio;constructor(e){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,t,i){const s=new Le(t);this.activeHandlePosition=QAe(e),this._referenceCoordinates=KAe(t,ZAe(this.activeHandlePosition)),this._originalWidth=s.width,this._originalHeight=s.height,this._aspectRatio=s.width/s.height;const r=i.style.width;r&&r.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(r):this._originalWidthPercents=EAe(i,s)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}}function KAe(n,e){const t=new Le(n),i=e.split("-"),s={x:i[1]=="right"?t.right:t.left,y:i[0]=="bottom"?t.bottom:t.top};return s.x+=n.ownerDocument.defaultView.scrollX,s.y+=n.ownerDocument.defaultView.scrollY,s}function qAe(n){return`ck-widget__resizer__handle-${n}`}function QAe(n){const e=["top-left","top-right","bottom-right","bottom-left"];for(const t of e)if(n.classList.contains(qAe(t)))return t}function ZAe(n){const e=n.split("-"),t={top:"bottom",bottom:"top",left:"right",right:"left"};return`${t[e[0]]}-${t[e[1]]}`}class JAe extends we{constructor(){super();const e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:e.if("_isVisible","none",t=>!t)}},children:[{text:e.to("_label")}]})}_bindToState(e,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",(i,s)=>i!==null&&s!==null),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",(i,s,r)=>e.unit==="px"?`${i}${s}`:`${r}%`),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",(i,s,r)=>s<50||r<50?"above-center":i)}_dismiss(){this.unbind(),this._isVisible=!1}}class fM extends kt(){_state;_sizeView;_options;_viewResizerWrapper=null;_initialViewWidth;constructor(e){super(),this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(t,i)=>t&&i),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",t=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),t.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(t=>{t.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(t=>{t.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const e=this,t=this._options.viewElement;this._options.editor.editing.view.change(s=>{const r=s.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(o){const a=this.toDomElement(o);return e._appendHandles(a),e._appendSizeUI(a),a});s.insert(s.createPositionAt(t,"end"),r),s.addClass("ck-widget_with-resizer",t),this._viewResizerWrapper=r,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new YAe(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){const t=this._proposeNewSize(e);this._options.editor.editing.view.change(d=>{const h=this._options.unit||"%",m=(h==="%"?t.widthPercents:t.width)+h;d.setStyle("width",m,this._options.viewElement)});const s=this._getHandleHost(),r=new Le(s),o=Math.round(r.width),a=Math.round(r.height),c=new Le(s);t.width=Math.round(c.width),t.height=Math.round(c.height),this.redraw(r),this.state.update({...t,handleHostWidth:o,handleHostHeight:a})}commit(){const e=this._options.unit||"%",t=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(t)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){const t=this._domResizerWrapper;if(!t_e(t))return;const i=t.parentElement,s=this._getHandleHost(),r=this._viewResizerWrapper,o=[r.getStyle("width"),r.getStyle("height"),r.getStyle("left"),r.getStyle("top")];let a;if(i.isSameNode(s)){const c=e||new Le(s);a=[c.width+"px",c.height+"px",void 0,void 0]}else a=[s.offsetWidth+"px",s.offsetHeight+"px",s.offsetLeft+"px",s.offsetTop+"px"];ri(o,a)!=="same"&&this._options.editor.editing.view.change(c=>{c.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},r)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(t=>{t.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){const t=this.state,i=e_e(e),s=this._options.isCentered?this._options.isCentered(this):!0,r={x:t._referenceCoordinates.x-(i.x+t.originalWidth),y:i.y-t.originalHeight-t._referenceCoordinates.y};s&&t.activeHandlePosition.endsWith("-right")&&(r.x=i.x-(t._referenceCoordinates.x+t.originalWidth)),s&&(r.x*=2);let o=Math.abs(t.originalWidth+r.x),a=Math.abs(t.originalHeight+r.y);return(o/t.aspectRatio>a?"width":"height")=="width"?a=o/t.aspectRatio:o=a*t.aspectRatio,{width:Math.round(o),height:Math.round(a),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*o*100)/100,100)}}_getResizeHost(){const e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){const e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){const t=["top-left","top-right","bottom-right","bottom-left"];for(const i of t)e.appendChild(new Vi({tag:"div",attributes:{class:`ck-widget__resizer__handle ${XAe(i)}`}}).render())}_appendSizeUI(e){this._sizeView=new JAe,this._sizeView.render(),e.appendChild(this._sizeView.element)}}function XAe(n){return`ck-widget__resizer__handle-${n}`}function e_e(n){return{x:n.pageX,y:n.pageY}}function t_e(n){return n&&n.ownerDocument&&n.ownerDocument.contains(n)}class J_ extends z{_resizers=new Map;_observer;_redrawSelectedResizerThrottled;static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.editing,t=me.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(zE),this._observer=new(Wi()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=hc(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[s,r]of this._resizers)s.isAttached()||(this._resizers.delete(s),r.destroy())},{priority:"lowest"}),this._observer.listenTo(me.window,"resize",this._redrawSelectedResizerThrottled);const i=this.editor.editing.view.document.selection;i.on("change",()=>{const s=i.getSelectedElement(),r=this.getResizerByViewElement(s)||null;r?this.select(r):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){const t=new fM(e),i=this.editor.plugins;if(t.attach(),i.has("WidgetToolbarRepository")){const o=i.get("WidgetToolbarRepository");t.on("begin",()=>{o.forceDisabled("resize")},{priority:"lowest"}),t.on("cancel",()=>{o.clearForceDisabled("resize")},{priority:"highest"}),t.on("commit",()=>{o.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,t);const r=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(r)==t&&this.select(t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(const t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){const i=t.domTarget;fM.isResizeHandle(i)&&(this._activeResizer=this._getResizerByHandle(i)||null,this._activeResizer&&(this._activeResizer.begin(i),e.stop(),t.preventDefault()))}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}class lm extends Mr{domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];constructor(e){super(e);const t=this.document;this.listenTo(t,"paste",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",i("dragging"),{priority:"low"});function i(s){return(r,o)=>{o.preventDefault();const a=o.dropRange?[o.dropRange]:null,c=new ua(t,s);t.fire(c,{dataTransfer:o.dataTransfer,method:r.name,targetRanges:a,target:o.target,domEvent:o.domEvent}),c.stop.called&&o.stopPropagation()}}}onDomEvent(e){const t="clipboardData"in e?e.clipboardData:e.dataTransfer,i=e.type=="drop"||e.type=="paste",s={dataTransfer:new B6(t,{cacheFiles:i})};if(e.type=="drop"||e.type=="dragover"){const r=f6(e);s.dropRange=r&&this.view.domConverter.domRangeToView(r)}this.fire(e.type,e,s)}}function n_e(n){return n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(n.includes("</p><p>")||n.includes("<br>"))&&(n=`<p>${n}</p>`),n}function i_e(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}const hM=["figcaption","li"],mM=["ol","ul"];function w7(n,e){if(e.is("$text")||e.is("$textProxy"))return e.data;if(e.is("element","img")&&e.hasAttribute("alt"))return e.getAttribute("alt");if(e.is("element","br"))return`
`;let t="",i=null;for(const s of e.getChildren())t+=s_e(s,i)+w7(n,s),i=s;if(e.is("rawElement")){const r=document.implementation.createHTMLDocument("").createElement("div");e.render(r,n),t+=v7(r)}return t}function v7(n){let e="";if(n.nodeType===Node.TEXT_NODE)return n.textContent;if(n.tagName==="BR")return`
`;for(const t of n.childNodes)e+=v7(t);return e}function s_e(n,e){return e?n.is("element","li")&&!n.isEmpty&&n.getChild(0).is("containerElement")||mM.includes(n.name)&&mM.includes(e.name)?`

`:!n.is("containerElement")&&!e.is("containerElement")?"":hM.includes(n.name)||hM.includes(e.name)?`
`:n.is("element")&&n.getCustomProperty("dataPipeline:transparentRendering")||e.is("element")&&e.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class Eh extends z{_markersToCopy=new Map;static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(e,t){this._markersToCopy.set(e,t)}_copySelectedFragmentWithMarkers(e,t,i=s=>s.model.getSelectedContent(s.model.document.selection)){return this.editor.model.change(s=>{const r=s.model.document.selection;s.setSelection(t);const o=this._insertFakeMarkersIntoSelection(s,s.model.document.selection,e),a=i(s),c=this._removeFakeMarkersInsideElement(s,a);for(const[d,h]of Object.entries(o)){c[d]||=s.createRangeIn(a);for(const m of h)s.remove(m)}a.markers.clear();for(const[d,h]of Object.entries(c))a.markers.set(d,h);return s.setSelection(r),a})}_pasteMarkersIntoTransformedElement(e,t){const i=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(s=>{const r=this._insertFakeMarkersElements(s,i),o=t(s),a=this._removeFakeMarkersInsideElement(s,o);for(const c of Object.values(r).flat())s.remove(c);for(const[c,d]of Object.entries(a))s.model.markers.has(c)||s.addMarker(c,{usingOperation:!0,affectsData:!0,range:d});return o})}_pasteFragmentWithMarkers(e){const t=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(const i of t)e.markers.set(i.name,i.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,t,i={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const s=this._markersToCopy.get(e);this._markersToCopy.set(e,i),t(),s?this._markersToCopy.set(e,s):this._markersToCopy.delete(e)}_isMarkerCopyable(e,t){const i=this._getMarkerClipboardConfig(e);if(!i)return!1;if(!t)return!0;const{allowedActions:s}=i;return s==="all"||s.includes(t)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){const[t]=e.split(":");return this._markersToCopy.get(t)||null}_insertFakeMarkersIntoSelection(e,t,i){const s=this._getCopyableMarkersFromSelection(e,t,i);return this._insertFakeMarkersElements(e,s)}_getCopyableMarkersFromSelection(e,t,i){const s=Array.from(t.getRanges()),r=new Set(s.flatMap(a=>Array.from(e.model.markers.getMarkersIntersectingRange(a)))),o=a=>{if(!this._isMarkerCopyable(a.name,i))return!1;const{copyPartiallySelected:d}=this._getMarkerClipboardConfig(a.name);if(!d){const h=a.getRange();return s.some(m=>m.containsRange(h,!0))}return!0};return Array.from(r).filter(o).map(a=>({name:i==="dragstart"?this._getUniqueMarkerName(a.name):a.name,range:a.getRange()}))}_getPasteMarkersFromRangeMap(e,t=null){const{model:i}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([r,o])=>{if(!this._hasMarkerConfiguration(r))return[{name:r,range:o}];if(this._isMarkerCopyable(r,t)){const a=this._getMarkerClipboardConfig(r),c=i.markers.has(r)&&i.markers.get(r).getRange().root.rootName==="$graveyard";return(a.duplicateOnPaste||c)&&(r=this._getUniqueMarkerName(r)),[{name:r,range:o}]}return[]})}_insertFakeMarkersElements(e,t){const i={},s=t.flatMap(r=>{const{start:o,end:a}=r.range;return[{position:o,marker:r,type:"start"},{position:a,marker:r,type:"end"}]}).sort(({position:r},{position:o})=>r.isBefore(o)?1:-1);for(const{position:r,marker:o,type:a}of s){const c=e.createElement("$marker",{"data-name":o.name,"data-type":a});i[o.name]||(i[o.name]=[]),i[o.name].push(c),e.insert(c,r)}return i}_removeFakeMarkersInsideElement(e,t){const s=this._getAllFakeMarkersFromElement(e,t).reduce((r,o)=>{const a=o.markerElement&&e.createPositionBefore(o.markerElement);let c=r[o.name],d=!1;return c?.start&&c?.end&&(this._getMarkerClipboardConfig(o.name).duplicateOnPaste?r[this._getUniqueMarkerName(o.name)]=r[o.name]:d=!0,c=null),d||(r[o.name]={...c,[o.type]:a}),o.markerElement&&e.remove(o.markerElement),r},{});return mfe(s,r=>new Q(r.start||e.createPositionFromPath(t,[0]),r.end||e.createPositionAt(t,"end")))}_getAllFakeMarkersFromElement(e,t){const i=Array.from(e.createRangeIn(t)).flatMap(({item:o})=>{if(!o.is("element","$marker"))return[];const a=o.getAttribute("data-name"),c=o.getAttribute("data-type");return[{markerElement:o,name:a,type:c}]}),s=[],r=[];for(const o of i)o.type==="end"&&(i.some(c=>c.name===o.name&&c.type==="start")||s.push({markerElement:null,name:o.name,type:"start"})),o.type==="start"&&(i.some(c=>c.name===o.name&&c.type==="end")||r.unshift({markerElement:null,name:o.name,type:"end"}));return[...s,...i,...r]}_getUniqueMarkerName(e){const t=e.split(":"),i=li().substring(1,6);return t.length===3?`${t.slice(0,2).join(":")}:${i}`:`${t.join(":")}:${i}`}}class Ps extends z{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[Eh]}init(){this.editor.editing.view.addObserver(lm),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,t,i){const s=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:i==="cut"},()=>{const r=s._copySelectedFragmentWithMarkers(i,t);this.fire("outputTransformation",{dataTransfer:e,content:r,method:i})})}_setupPasteDrop(){const e=this.editor,t=e.model,i=e.editing.view,s=i.document,r=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(s,"clipboardInput",(o,a)=>{a.method=="paste"&&!e.model.canEditAt(e.model.document.selection)&&o.stop()},{priority:"highest"}),this.listenTo(s,"clipboardInput",(o,a)=>{const c=a.dataTransfer;let d;if(a.content)d=a.content;else{let p="";c.getData("text/html")?p=i_e(c.getData("text/html")):c.getData("text/plain")&&(p=n_e(c.getData("text/plain"))),d=this.editor.data.htmlProcessor.toView(p)}const h=new ua(this,"inputTransformation"),m=c.getData("application/ckeditor5-editor-id")||null;this.fire(h,{content:d,dataTransfer:c,sourceEditorId:m,targetRanges:a.targetRanges,method:a.method}),h.stop.called&&o.stop(),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(o,a)=>{if(a.content.isEmpty)return;const d=this.editor.data.toModel(a.content,"$clipboardHolder");d.childCount!=0&&(o.stop(),t.change(()=>{this.fire("contentInsertion",{content:d,method:a.method,sourceEditorId:a.sourceEditorId,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(o,a)=>{a.resultRange=r._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){const e=this.editor,t=e.model.document,s=e.editing.view.document,r=(o,a)=>{const c=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(c,t.selection,o.name)};this.listenTo(s,"copy",r,{priority:"low"}),this.listenTo(s,"cut",(o,a)=>{e.model.canEditAt(e.model.document.selection)?r(o,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(o,a)=>{const c=e.data.toView(a.content,{isClipboardPipeline:!0});s.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:c,method:a.method})},{priority:"low"}),this.listenTo(s,"clipboardOutput",(o,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",w7(e.data.htmlProcessor.domConverter,a.content)),a.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),a.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}}const X_=wa("px");class r_e extends we{constructor(){super();const e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",t=>!t)],style:{left:e.to("left",t=>X_(t)),top:e.to("top",t=>X_(t)),width:e.to("width",t=>X_(t))}}})}}class Yp extends z{removeDropMarkerDelayed=kE(()=>this.removeDropMarker(),40);_updateDropMarkerThrottled=hc(e=>this._updateDropMarker(e),40);_reconvertMarkerThrottled=hc(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0);_dropTargetLineView=new r_e;_domEmitter=new(Wi());_scrollables=new Map;static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,t,i,s,r,o){this.removeDropMarkerDelayed.cancel();const a=gM(this.editor,e,t,i,s,r,o);return a?o&&o.containsRange(a)?(this.removeDropMarker(),null):a&&!this.editor.model.canEditAt(a)?(this.removeDropMarker(),null):(this._updateDropMarkerThrottled(a),a):null}getFinalDropRange(e,t,i,s,r,o){const a=gM(this.editor,e,t,i,s,r,o);return this.removeDropMarker(),a}removeDropMarker(){const e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(t=>{t.removeMarker("drop-target")})}_setupDropMarker(){const e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:i})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(i);t.markerRange.isCollapsed?this._updateDropTargetLine(t.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){const t=this.editor,i=t.model.markers;t.model.change(s=>{i.has("drop-target")?i.get("drop-target").getRange().isEqual(e)||s.updateMarker("drop-target",{range:e}):s.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){const i=this.toDomElement(t);return i.append("",t.createElement("span"),""),i})}_updateDropTargetLine(e){const t=this.editor.editing,i=e.start.nodeBefore,s=e.start.nodeAfter,r=e.start.parent,o=i?t.mapper.toViewElement(i):null,a=o?t.view.domConverter.mapViewToDom(o):null,c=s?t.mapper.toViewElement(s):null,d=c?t.view.domConverter.mapViewToDom(c):null,h=t.mapper.toViewElement(r);if(!h)return;const m=t.view.domConverter.mapViewToDom(h),p=this._getScrollableRect(h),{scrollX:w,scrollY:A}=me.window,C=a?new Le(a):null,k=d?new Le(d):null,E=new Le(m).excludeScrollbarsAndBorders(),S=C?C.bottom:E.top,I=k?k.top:E.bottom,R=me.window.getComputedStyle(m),O=S<=I?(S+I)/2:I;if(p.top<O&&O<p.bottom){const U=E.left+parseFloat(R.paddingLeft),P=E.right-parseFloat(R.paddingRight),V=Math.max(U+w,p.left),H=Math.min(P+w,p.right);this._dropTargetLineView.set({isVisible:!0,left:V,top:O+A,width:H-V})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){const t=e.root.rootName;let i;if(this._scrollables.has(t))i=this._scrollables.get(t).domElement;else{const s=this.editor.editing.view.domConverter.mapViewToDom(e);i=a_e(s),this._domEmitter.listenTo(i,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const r=new Nm(i,this._reconvertMarkerThrottled);this._scrollables.set(t,{domElement:i,resizeObserver:r})}return new Le(i).excludeScrollbarsAndBorders()}}function gM(n,e,t,i,s,r,o){const a=n.model,c=n.editing.mapper;let h=pM(n,e);for(;h;){if(!r){if(a.schema.checkChild(h,"$text")){if(t){const m=t[0].start,p=c.toModelPosition(m);if(!o||Array.from(o.getItems({shallow:!0})).some(A=>a.schema.checkChild(p,A))){if(a.schema.checkChild(p,"$text"))return a.createRange(p);if(m)return Kp(n,pM(n,m.parent),i,s)}}}else if(a.schema.isInline(h))return Kp(n,h,i,s)}if(a.schema.isBlock(h))return Kp(n,h,i,s);if(a.schema.checkChild(h,"$block")){const m=Array.from(h.getChildren()).filter(A=>A.is("element")&&!o_e(n,A));let p=0,w=m.length;if(w==0)return a.createRange(a.createPositionAt(h,"end"));for(;p<w-1;){const A=Math.floor((p+w)/2);y7(n,m[A],i,s)=="before"?w=A:p=A}return Kp(n,m[p],i,s)}h=h.parent}return null}function o_e(n,e){const t=n.editing.mapper,i=n.editing.view.domConverter,s=t.toViewElement(e);if(!s)return!0;const r=i.mapViewToDom(s);return me.window.getComputedStyle(r).float!="none"}function Kp(n,e,t,i){const s=n.model;return s.createRange(s.createPositionAt(e,y7(n,e,t,i)))}function y7(n,e,t,i){const s=n.editing.mapper,r=n.editing.view.domConverter,o=s.toViewElement(e),a=r.mapViewToDom(o),c=new Le(a);return n.model.schema.isInline(e)?t<(c.left+c.right)/2?"before":"after":i<(c.top+c.bottom)/2?"before":"after"}function pM(n,e){const t=n.editing.mapper,i=n.editing.view,s=t.toModelElement(e);if(s)return s;const r=i.createPositionBefore(e),o=t.findMappedViewAncestor(r);return t.toModelElement(o)}function a_e(n){let e=n;do{e=e.parentElement;const t=me.window.getComputedStyle(e).overflowY;if(t=="auto"||t=="scroll")break}while(e.tagName!="BODY");return e}class l_e extends z{_isBlockDragging=!1;_domEmitter=new(Wi());static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(this.listenTo(e,"change:isReadOnly",(t,i,s)=>{s?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),Pe.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){const i=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(i,"dragstart",(s,r)=>this._handleBlockDragStart(r)),this._domEmitter.listenTo(me.document,"dragover",(s,r)=>this._handleBlockDragging(r)),this._domEmitter.listenTo(me.document,"drop",(s,r)=>this._handleBlockDragging(r)),this._domEmitter.listenTo(me.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&i.setAttribute("draggable","true"),this.on("change:isEnabled",(s,r,o)=>{i.setAttribute("draggable",o?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;const t=this.editor.model,i=t.document.selection,s=this.editor.editing.view,r=Array.from(i.getSelectedBlocks()),o=t.createRange(t.createPositionBefore(r[0]),t.createPositionAfter(r[r.length-1]));t.change(a=>a.setSelection(o)),this._isBlockDragging=!0,s.focus(),s.getObserver(lm).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;const t=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),i=e.clientY,s=document.elementFromPoint(t,i),r=this.editor.editing.view;!s||!s.closest(".ck-editor__editable")||r.getObserver(lm).onDomEvent({...e,type:e.type,dataTransfer:e.dataTransfer,target:s,clientX:t,clientY:i,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class c_e extends z{_draggedRange;_draggingUid;_draggableElement;_clearDraggableAttributesDelayed=kE(()=>this._clearDraggableAttributes(),40);_blockMode=!1;_domEmitter=new(Wi());_previewContainer;static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[Ps,Cl,Yp,l_e]}init(){const e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,t.addObserver(lm),t.addObserver(h8),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(i,s,r)=>{r?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(i,s,r)=>{r||this._finalizeDragging(!1)}),Pe.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const e=this.editor,t=e.model,i=e.editing.view,s=i.document,r=e.plugins.get(Yp);this.listenTo(s,"dragstart",(o,a)=>{if(a.target?.is("editableElement")){a.preventDefault();return}if(this._prepareDraggedRange(a.target),!this._draggedRange){a.preventDefault();return}this._draggingUid=li();const c=this.isEnabled&&e.model.canEditAt(this._draggedRange);a.dataTransfer.effectAllowed=c?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const d=t.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(a.dataTransfer,d,"dragstart");const{dataTransfer:m,domTarget:p,domEvent:w}=a,{clientX:A}=w;this._updatePreview({dataTransfer:m,domTarget:p,clientX:A}),a.stopPropagation(),c||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(s,"dragend",(o,a)=>{this._finalizeDragging(!a.dataTransfer.isCanceled&&a.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(me.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(s,"dragenter",()=>{this.isEnabled&&i.focus()}),this.listenTo(s,"dragleave",()=>{r.removeDropMarkerDelayed()}),this.listenTo(s,"dragging",(o,a)=>{if(!this.isEnabled){a.dataTransfer.dropEffect="none";return}const{clientX:c,clientY:d}=a.domEvent;if(!r.updateDropMarker(a.target,a.targetRanges,c,d,this._blockMode,this._draggedRange)){a.dataTransfer.dropEffect="none";return}this._draggedRange||(a.dataTransfer.dropEffect="copy"),Pe.isGecko||(a.dataTransfer.effectAllowed=="copy"?a.dataTransfer.dropEffect="copy":["all","copyMove"].includes(a.dataTransfer.effectAllowed)&&(a.dataTransfer.dropEffect="move")),o.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const e=this.editor,i=e.editing.view.document,s=e.plugins.get(Yp);this.listenTo(i,"clipboardInput",(r,o)=>{if(o.method!="drop")return;const{clientX:a,clientY:c}=o.domEvent,d=s.getFinalDropRange(o.target,o.targetRanges,a,c,this._blockMode,this._draggedRange);if(!d){this._finalizeDragging(!1),r.stop();return}if(this._draggedRange&&this._draggingUid!=o.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),bM(o.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(d,!0)){this._finalizeDragging(!1),r.stop();return}o.targetRanges=[e.editing.mapper.toViewRange(d)]},{priority:"high"})}_setupContentInsertionIntegration(){const e=this.editor.plugins.get(Ps);e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;const s=i.targetRanges.map(r=>this.editor.editing.mapper.toModelRange(r));this.editor.model.change(r=>r.setSelection(s))},{priority:"high"}),e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;const s=bM(i.dataTransfer)=="move",r=!i.resultRange||!i.resultRange.isCollapsed;this._finalizeDragging(r&&s)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const e=this.editor,t=e.editing.view,i=t.document;this.listenTo(i,"pointerdown",(s,r)=>{if(Pe.isAndroid||!r)return;this._clearDraggableAttributesDelayed.cancel();let o=wM(r.target);if(Pe.isBlink&&!e.isReadOnly&&!o&&!i.selection.isCollapsed){const a=i.selection.getSelectedElement();(!a||!tn(a))&&(o=i.selection.editableElement)}o&&(t.change(a=>{a.setAttribute("draggable","true",o)}),this._draggableElement=e.editing.mapper.toModelElement(o))}),this.listenTo(i,"pointerup",()=>{Pe.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const e=this.editor.editing;e.view.change(t=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){const t=this.editor,i=t.model;t.plugins.get(Yp).removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&i.change(r=>{const o=i.createSelection(this._draggedRange);i.deleteContent(o,{doNotAutoparagraph:!0});const a=o.getFirstPosition().parent;a.isEmpty&&!i.schema.checkChild(a,"$text")&&i.schema.checkChild(a,"paragraph")&&r.insertElement("paragraph",a,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){const t=this.editor,i=t.model,s=i.document.selection,r=e?wM(e):null;if(r){const d=t.editing.mapper.toModelElement(r);this._draggedRange=Bi.fromRange(i.createRangeOn(d)),this._blockMode=i.schema.isBlock(d),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(s.isCollapsed&&!s.getFirstPosition().parent.isEmpty)return;const o=Array.from(s.getSelectedBlocks()),a=s.getFirstRange();if(o.length==0){this._draggedRange=Bi.fromRange(a);return}const c=A7(i,o);if(o.length>1)this._draggedRange=Bi.fromRange(c),this._blockMode=!0;else if(o.length==1){const d=a.start.isTouching(c.start)&&a.end.isTouching(c.end);this._draggedRange=Bi.fromRange(d?c:a),this._blockMode=d}i.change(d=>d.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:t,clientX:i}){const s=this.editor.editing.view,r=s.document.selection.editableElement,o=s.domConverter.mapViewToDom(r),a=me.window.getComputedStyle(o);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=si(me.document,"div",{style:"position: fixed; left: -999999px;"}),me.document.body.appendChild(this._previewContainer));const c=si(me.document,"div");c.className="ck ck-content ck-clipboard-preview";const d=new Le(o),h=parseFloat(a.paddingLeft),m=parseFloat(a.paddingRight),p=parseFloat(a.width)-h-m;if(o.contains(t))if(Pe.isiOS)c.style.maxWidth=`${p}px`,c.style.padding="10px",c.style.minWidth="200px",c.style.minHeight="20px",c.style.boxSizing="border-box",c.style.backgroundColor="var(--ck-color-base-background)";else return;else if(Pe.isiOS)c.style.width=`${p}px`,c.style.backgroundColor="var(--ck-color-base-background)";else{const w=d.left-i+h;c.style.width=`${p+w}px`,c.style.paddingLeft=`${w}px`}s.domConverter.setContentOf(c,e.getData("text/html")),e.setDragImage(c,0,0),this._previewContainer.appendChild(c)}}function bM(n){return Pe.isGecko?n.dropEffect:["all","copyMove"].includes(n.effectAllowed)?"move":"copy"}function wM(n){if(n.is("editableElement"))return null;if(n.hasClass("ck-widget__selection-handle"))return n.findAncestor(tn);if(tn(n))return n;const e=n.findAncestor(t=>tn(t)||t.is("editableElement"));return tn(e)?e:null}function A7(n,e){const t=e[0],i=e[e.length-1],s=t.getCommonAncestor(i),r=n.createPositionBefore(t),o=n.createPositionAfter(i);if(s&&s.is("element")&&!n.schema.isLimit(s)){const a=n.createRangeOn(s),c=r.isTouching(a.start),d=o.isTouching(a.end);if(c&&d)return A7(n,[s])}return n.createRange(r,o)}class u_e extends z{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[Ps]}init(){const e=this.editor,t=e.model,i=e.editing.view,s=t.document.selection;i.addObserver(lm),e.plugins.get(Ps).on("contentInsertion",(r,o)=>{d_e(o.content,t)&&t.change(a=>{const c=Array.from(s.getAttributes()).filter(([h])=>t.schema.getAttributeProperties(h).isFormatting);s.isCollapsed||t.deleteContent(s,{doNotAutoparagraph:!0}),c.push(...s.getAttributes());const d=a.createRangeIn(o.content);for(const h of d.getItems())for(const m of c)t.schema.checkAttribute(h,m[0])&&a.setAttribute(m[0],m[1],h)})})}}function d_e(n,e){let t=e.createRangeIn(n);if(n.childCount==1){const i=n.getChild(0);i.is("element")&&e.schema.isBlock(i)&&!e.schema.isObject(i)&&!e.schema.isLimit(i)&&(t=e.createRangeIn(i))}for(const i of t.getItems())if(!e.schema.isInline(i)||Array.from(i.getAttributeKeys()).find(r=>e.schema.getAttributeProperties(r).isFormatting))return!1;return!0}class sS extends z{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Eh,Ps,c_e,u_e]}init(){const e=this.editor,t=this.editor.t;e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}const f_e={autoRefresh:!0},vM=36e5,h_e=5e3;class rS extends kt(){_refresh;_options;_tokenRefreshTimeout;_isDestroyed=!1;constructor(e,t={}){if(super(),!e)throw new D("token-missing-token-url",this);t.initValue&&this._validateTokenValue(t.initValue),this.set("value",t.initValue),typeof e=="function"?this._refresh=e:this._refresh=()=>m_e(e),this._options={...f_e,...t}}init(){return new Promise((e,t)=>{if(!this.value){this.refreshToken().then(e).catch(t);return}this._options.autoRefresh&&this._registerRefreshTokenTimeout(),e(this)})}refreshToken(){const e=this._options.autoRefresh;return this._refresh().then(t=>(this._validateTokenValue(t),this.set("value",t),e&&this._registerRefreshTokenTimeout(),this)).catch(t=>{throw lt("token-refresh-failed",{autoRefresh:e}),e&&this._registerRefreshTokenTimeout(h_e),t})}destroy(){this._isDestroyed=!0,clearTimeout(this._tokenRefreshTimeout)}_validateTokenValue(e){const t=typeof e=="string",i=!/^".*"$/.test(e),s=t&&e.split(".").length===3;if(!(i&&s))throw new D("token-not-in-jwt-format",this)}_registerRefreshTokenTimeout(e){if(clearTimeout(this._tokenRefreshTimeout),this._isDestroyed)return;const t=e||this._getTokenRefreshTimeoutTime();this._tokenRefreshTimeout=setTimeout(()=>{this.refreshToken()},t)}_getTokenRefreshTimeoutTime(){try{const[,e]=this.value.split("."),{exp:t}=JSON.parse(atob(e));return t?(t>2147483647&&console.warn("Token expiration time exceeds 32-bit integer range. This might cause unpredictable token refresh timing. Token expiration time should always be provided in seconds.",{tokenExpireTime:t}),Math.floor((t*1e3-Date.now())/2)):vM}catch{return vM}}static create(e,t={}){return new rS(e,t).init()}}function m_e(n){return new Promise((e,t)=>{const i=new XMLHttpRequest;i.open("GET",n),i.addEventListener("load",()=>{const s=i.status,r=i.response;return s<200||s>299?t(new D("token-cannot-download-new-token",null)):e(r)}),i.addEventListener("error",()=>t(new Error("Network Error"))),i.addEventListener("abort",()=>t(new Error("Abort"))),i.send()})}const HC=/^data:(\S*?);base64,/;class g_e extends Ot(){file;xhr;_token;_apiAddress;constructor(e,t,i){if(super(),!e)throw new D("fileuploader-missing-file",null);if(!t)throw new D("fileuploader-missing-token",null);if(!i)throw new D("fileuploader-missing-api-address",null);this.file=b_e(e)?p_e(e):e,this._token=t,this._apiAddress=i}onProgress(e){return this.on("progress",(t,i)=>e(i)),this}onError(e){return this.once("error",(t,i)=>e(i)),this}abort(){this.xhr.abort()}send(){return this._prepareRequest(),this._attachXHRListeners(),this._sendRequest()}_prepareRequest(){const e=new XMLHttpRequest;e.open("POST",this._apiAddress),e.setRequestHeader("Authorization",this._token.value),e.responseType="json",this.xhr=e}_attachXHRListeners(){const e=this.xhr,t=i=>()=>this.fire("error",i);e.addEventListener("error",t("Network Error")),e.addEventListener("abort",t("Abort"));e.upload&&e.upload.addEventListener("progress",i=>{i.lengthComputable&&this.fire("progress",{total:i.total,uploaded:i.loaded})}),e.addEventListener("load",()=>{const i=e.status,s=e.response;if(i<200||i>299)return this.fire("error",s.message||s.error)})}_sendRequest(){const e=new FormData,t=this.xhr;return e.append("file",this.file),new Promise((i,s)=>{t.addEventListener("load",()=>{const r=t.status,o=t.response;return r<200||r>299?o.message?s(new D("fileuploader-uploading-data-failed",this,{message:o.message})):s(o.error):i(o)}),t.addEventListener("error",()=>s(new Error("Network Error"))),t.addEventListener("abort",()=>s(new Error("Abort"))),t.send(e)})}}function p_e(n,e=512){try{const t=n.match(HC)[1],i=atob(n.replace(HC,"")),s=[];for(let r=0;r<i.length;r+=e){const o=i.slice(r,r+e),a=new Array(o.length);for(let c=0;c<o.length;c++)a[c]=o.charCodeAt(c);s.push(new Uint8Array(a))}return new Blob(s,{type:t})}catch{throw new D("fileuploader-decoding-image-data-error",null)}}function b_e(n){return typeof n!="string"?!1:!!n.match(HC)?.length}class w_e{_token;_apiAddress;constructor(e,t){if(!e)throw new D("uploadgateway-missing-token",null);if(!t)throw new D("uploadgateway-missing-api-address",null);this._token=e,this._apiAddress=t}upload(e){return new g_e(e,this._token,this._apiAddress)}}class v_e extends ly{static get pluginName(){return"CloudServicesCore"}static get isOfficialPlugin(){return!0}createToken(e,t){return new rS(e,t)}createUploadGateway(e,t){return new w_e(e,t)}}class y_e extends ly{tokenUrl;uploadUrl;webSocketUrl;bundleVersion;autoRefresh=!0;token=null;_tokens=new Map;static get pluginName(){return"CloudServices"}static get isOfficialPlugin(){return!0}static get requires(){return[v_e]}async init(){const t=this.context.config.get("cloudServices")||{};for(const[r,o]of Object.entries(t))this[r]=o;if(!this.tokenUrl){this.token=null;return}const s=this.context.plugins.get("CloudServicesCore").createToken(this.tokenUrl,{autoRefresh:this.autoRefresh});try{this.token=await s.init(),this._tokens.set(this.tokenUrl,this.token)}catch(r){throw s.destroy(),r}}async registerTokenUrl(e){if(this._tokens.has(e))return this.getTokenFor(e);const i=await this.context.plugins.get("CloudServicesCore").createToken(e,{autoRefresh:this.autoRefresh}).init();return this._tokens.set(e,i),i}getTokenFor(e){const t=this._tokens.get(e);if(!t)throw new D("cloudservices-token-not-registered",this);return t}destroy(){super.destroy();for(const e of this._tokens.values())e.destroy()}}class A_e extends f0e{view;_toolbarConfig;_elementReplacer;constructor(e,t){super(e),this.view=t,this._toolbarConfig=fy(e.config.get("toolbar")),this._elementReplacer=new a6,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){const t=this.editor,i=this.view,s=t.editing.view,r=i.editable,o=s.document.getRoot();r.name=o.rootName,i.render();const a=r.element;this.setEditableElement(r.name,a),i.editable.bind("isFocused").to(this.focusTracker),s.attachDomRoot(a),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),i.menuBarView&&this.initMenuBar(i.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.getDomRoot(e.editable.name)&&t.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){const e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({visualTop:t})=>t||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){const e=this.editor,t=e.editing.view,i=t.document.getRoot(),s=e.sourceElement;let r;const o=e.config.get("placeholder");o&&(r=typeof o=="string"?o:o[this.view.editable.name]),!r&&s&&s.tagName.toLowerCase()==="textarea"&&(r=s.getAttribute("placeholder")),r&&(i.placeholder=r),iy({view:t,element:i,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:e}=this.view,t=this.editor.plugins.get("ContextualBalloon");t.on("getPositionOptions",s=>{const r=s.return;if(!r||!e.isSticky||!e.element)return;const o=new Le(e.element).height,a=typeof r.target=="function"?r.target():r.target,c=typeof r.limiter=="function"?r.limiter():r.limiter;if(a&&c&&new Le(a).height>=new Le(c).height-o)return;const d={...r.viewportOffsetConfig},h=(d.top||0)+o;s.return={...r,viewportOffsetConfig:{...d,top:h}}},{priority:"low"});const i=()=>{t.visibleView&&t.updatePosition()};this.listenTo(e,"change:isSticky",i),this.listenTo(this.editor.ui,"change:viewportOffset",i)}_handleScrollToTheSelectionWithStickyPanel(e,t,i){const s=this.view.stickyPanel;if(s.isSticky){const r=new Le(s.element).height;t.viewportOffset.top+=r}else{const r=()=>{this.editor.editing.view.scrollToTheSelection(i)};this.listenTo(s,"change:isSticky",r),setTimeout(()=>{this.stopListening(s,"change:isSticky",r)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const e=this.view.stickyPanel,t=this.editor.plugins.get("Dialog");t.on("show",()=>{const i=t.view;i.on("moveTo",(s,r)=>{if(!e.isSticky||i.wasMoved||i.isModal)return;const o=new Le(e.contentPanelElement);r[1]<o.bottom+rm.defaultOffset&&(r[1]=o.bottom+rm.defaultOffset)},{priority:"high"})},{priority:"low"})}}class __e extends m0e{stickyPanel;toolbar;editable;constructor(e,t,i={}){super(e),this.stickyPanel=new v0e(e),this.toolbar=new da(e,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull}),i.useMenuBar&&(this.menuBarView=new T0e(e)),this.editable=new p0e(e,t,void 0,{label:i.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class C_e extends dwe(awe){static get editorName(){return"ClassicEditor"}ui;constructor(e,t={}){if(!kb(e)&&t.initialData!==void 0)throw new D("editor-create-initial-data",null);super(t),this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",x_e(e)),kb(e)&&(this.sourceElement=e),this.model.document.createRoot();const i=!this.config.get("toolbar.shouldNotGroupWhenFull"),s=this.config.get("menuBar"),r=new __e(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:i,useMenuBar:s.isVisible,label:this.config.get("label")});this.ui=new A_e(this,r),cwe(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise(i=>{const s=new this(e,t);i(s.initPlugins().then(()=>s.ui.init(kb(e)?e:null)).then(()=>s.data.init(s.config.get("initialData"))).then(()=>s.fire("ready")).then(()=>s))})}}function x_e(n){return kb(n)?she(n):n}function kb(n){return ca(n)}class k_e extends je{constructor(e){super(e),this.affectsData=!1}execute(){const e=this.editor.model,t=e.document.selection;let i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!yM(e.schema,i))do if(i=i.parent,!i)return;while(!yM(e.schema,i));e.change(s=>{s.setSelection(i,"in")})}}function yM(n,e){return n.isLimit(e)&&(n.checkChild(e,"$text")||n.checkChild(e,"paragraph"))}const E_e=ty("Ctrl+A");class S_e extends z{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,s=e.editing.view.document;e.commands.add("selectAll",new k_e(e)),this.listenTo(s,"keydown",(r,o)=>{mc(o)===E_e&&(e.execute("selectAll"),o.preventDefault())}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}}class T_e extends z{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("selectAll",()=>{const t=this._createButton(Se);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(xn))}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("selectAll"),r=new e(t.locale),o=i.t;return r.set({label:o("Select all"),icon:nve,keystroke:"Ctrl+A"}),r.bind("isEnabled").to(s,"isEnabled"),this.listenTo(r,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),r}}class I_e extends z{static get requires(){return[S_e,T_e]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}class _7 extends je{_stack=[];_createdBatches=new WeakSet;constructor(e){super(e),this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(t,i)=>{i[1]={...i[1]};const s=i[1];s.batchType||(s.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(t,i)=>{i[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){const t=this.editor.model.document.selection,i={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:i}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,i){const s=this.editor.model,r=s.document,o=[],a=e.map(d=>d.getTransformedByOperations(i)),c=a.flat();for(const d of a){const h=d.filter(m=>m.root!=r.graveyard).filter(m=>!P_e(m,c));h.length&&(R_e(h),o.push(h[0]))}o.length&&s.change(d=>{d.setSelection(o,{backward:t})})}_undo(e,t){const i=this.editor.model,s=i.document;this._createdBatches.add(t);const r=e.operations.slice().filter(o=>o.isDocumentOperation);r.reverse();for(const o of r){const a=o.baseVersion+1,c=Array.from(s.history.getOperations(a)),h=Epe([o.getReversed()],c,{useRelations:!0,document:this.editor.model.document,forceWeakRemove:!0}).operationsA;for(let m of h){const p=m.affectedSelectable;p&&!i.canEditAt(p)&&(m=new qn(m.baseVersion)),t.addOperation(m),i.applyOperation(m),s.history.setOperationAsUndone(o,m)}}}}function R_e(n){n.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<n.length;e++){const i=n[e-1].getJoined(n[e],!0);i&&(e--,n.splice(e,2,i))}}function P_e(n,e){return e.some(t=>t!==n&&t.containsRange(n,!0))}class O_e extends _7{execute(e=null){const t=e?this._stack.findIndex(r=>r.batch==e):this._stack.length-1,i=this._stack.splice(t,1)[0],s=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(s,()=>{this._undo(i.batch,s);const r=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,r)}),this.fire("revert",i.batch,s),this.refresh()}}class D_e extends _7{execute(){const e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{const s=e.batch.operations[e.batch.operations.length-1].baseVersion+1,r=this.editor.model.document.history.getOperations(s);this._restoreSelection(e.selection.ranges,e.selection.isBackward,r),this._undo(e.batch,t)}),this.fire("revert",e.batch,t),this.refresh()}}class M_e extends z{_undoCommand;_redoCommand;_batchRegistry=new WeakSet;static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;this._undoCommand=new O_e(e),this._redoCommand=new D_e(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(i,s)=>{const r=s[0];if(!r.isDocumentOperation)return;const o=r.batch,a=this._redoCommand.createdBatches.has(o),c=this._undoCommand.createdBatches.has(o);this._batchRegistry.has(o)||(this._batchRegistry.add(o),o.isUndoable&&(a?this._undoCommand.addBatch(o):c||(this._undoCommand.addBatch(o),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(i,s,r)=>{this._redoCommand.addBatch(r)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Undo"),keystroke:"CTRL+Z"},{label:t("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class B_e extends z{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale,i=e.t,s=t.uiLanguageDirection=="ltr"?hD:dD,r=t.uiLanguageDirection=="ltr"?dD:hD;this._addButtonsToFactory("undo",i("Undo"),"CTRL+Z",s),this._addButtonsToFactory("redo",i("Redo"),"CTRL+Y",r)}_addButtonsToFactory(e,t,i,s){const r=this.editor;r.ui.componentFactory.add(e,()=>{const o=this._createButton(Se,e,t,i,s);return o.set({tooltip:!0}),o}),r.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(xn,e,t,i,s))}_createButton(e,t,i,s,r){const o=this.editor,a=o.locale,c=o.commands.get(t),d=new e(a);return d.set({label:i,icon:r,keystroke:s}),d.bind("isEnabled").to(c,"isEnabled"),this.listenTo(d,"execute",()=>{o.execute(t),o.editing.view.focus()}),d}}class oS extends z{static get requires(){return[M_e,B_e]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}class N_e extends z{static get requires(){return[dye,sS,Hm,I_e,fAe,u7,oS]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}class V_e extends we{children;_findInputView;_replaceInputView;_findButtonView;_findPrevButtonView;_findNextButtonView;_advancedOptionsCollapsibleView;_matchCaseSwitchView;_wholeWordsOnlySwitchView;_replaceButtonView;_replaceAllButtonView;_inputsDivView;_actionButtonsDivView;_focusTracker;_keystrokes;_focusables;focusCycler;constructor(e){super(e);const t=e.t;this.children=this.createCollection(),this.set("matchCount",0),this.set("highlightOffset",0),this.set("isDirty",!1),this.set("_areCommandsEnabled",{}),this.set("_resultsCounterText",""),this.set("_matchCase",!1),this.set("_wholeWordsOnly",!1),this.bind("_searchResultsFound").to(this,"matchCount",this,"isDirty",(i,s)=>i>0&&!s),this._findInputView=this._createInputField(t("Find in text")),this._findPrevButtonView=this._createButton({label:t("Previous result"),class:"ck-button-prev",icon:ll,keystroke:"Shift+F3",tooltip:!0}),this._findNextButtonView=this._createButton({label:t("Next result"),class:"ck-button-next",icon:ll,keystroke:"F3",tooltip:!0}),this._replaceInputView=this._createInputField(t("Replace with"),"ck-labeled-field-replace"),this._inputsDivView=this._createInputsDiv(),this._matchCaseSwitchView=this._createMatchCaseSwitch(),this._wholeWordsOnlySwitchView=this._createWholeWordsOnlySwitch(),this._advancedOptionsCollapsibleView=this._createAdvancedOptionsCollapsible(),this._replaceAllButtonView=this._createButton({label:t("Replace all"),class:"ck-button-replaceall",withText:!0}),this._replaceButtonView=this._createButton({label:t("Replace"),class:"ck-button-replace",withText:!0}),this._findButtonView=this._createButton({label:t("Find"),class:"ck-button-find ck-button-action",withText:!0}),this._actionButtonsDivView=this._createActionButtonsDiv(),this._focusTracker=new St,this._keystrokes=new Ht,this._focusables=new ei,this.focusCycler=new ui({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this._keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.addMany([this._inputsDivView,this._advancedOptionsCollapsibleView,this._actionButtonsDivView]),this.setTemplate({tag:"form",attributes:{class:["ck","ck-find-and-replace-form"],tabindex:"-1"},children:this.children})}render(){super.render(),va({view:this}),this._initFocusCycling(),this._initKeystrokeHandling()}destroy(){super.destroy(),this._focusTracker.destroy(),this._keystrokes.destroy()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}reset(){this._findInputView.errorText=null,this.isDirty=!0}get _textToFind(){return this._findInputView.fieldView.element.value}get _textToReplace(){return this._replaceInputView.fieldView.element.value}_createInputsDiv(){const e=this.locale,t=e.t,i=new we(e);return this._findInputView.fieldView.on("input",()=>{this.isDirty=!0}),this._findPrevButtonView.delegate("execute").to(this,"findPrevious"),this._findNextButtonView.delegate("execute").to(this,"findNext"),this._findPrevButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findPrevious:s})=>s),this._findNextButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findNext:s})=>s),this._injectFindResultsCounter(),this._replaceInputView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:s},r)=>s&&r),this._replaceInputView.bind("infoText").to(this._replaceInputView,"isEnabled",this._replaceInputView,"isFocused",(s,r)=>s||!r?"":t("Tip: Find some text first in order to replace it.")),i.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__inputs"]},children:[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView]}),i}_onFindButtonExecute(){if(!this._textToFind){const e=this.t;this._findInputView.errorText=e("Text to find must not be empty.");return}this.isDirty=!1,this.fire("findNext",{searchText:this._textToFind,matchCase:this._matchCase,wholeWords:this._wholeWordsOnly})}_injectFindResultsCounter(){const e=this.locale,t=e.t,i=this.bindTemplate,s=new we(this.locale);this.bind("_resultsCounterText").to(this,"highlightOffset",this,"matchCount",(o,a)=>t("%0 of %1",[o,a])),s.setTemplate({tag:"span",attributes:{class:["ck","ck-results-counter",i.if("isDirty","ck-hidden")]},children:[{text:i.to("_resultsCounterText")}]});const r=()=>{const o=this._findInputView.fieldView.element;if(!o||!no(o))return;const a=new Le(s.element).width,c=e.uiLanguageDirection==="ltr"?"paddingRight":"paddingLeft";a?o.style[c]=`calc( 2 * var(--ck-spacing-standard) + ${a}px )`:o.style[c]=""};this.on("change:_resultsCounterText",r,{priority:"low"}),this.on("change:isDirty",r,{priority:"low"}),this._findInputView.template.children[0].children.push(s)}_createAdvancedOptionsCollapsible(){const e=this.locale.t,t=new QE(this.locale,[this._matchCaseSwitchView,this._wholeWordsOnlySwitchView]);return t.set({label:e("Advanced options"),isCollapsed:!0}),t}_createActionButtonsDiv(){const e=new we(this.locale);return this._replaceButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:t},i)=>t&&i),this._replaceAllButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replaceAll:t},i)=>t&&i),this._replaceButtonView.on("execute",()=>{this.fire("replace",{searchText:this._textToFind,replaceText:this._textToReplace})}),this._replaceAllButtonView.on("execute",()=>{this.fire("replaceAll",{searchText:this._textToFind,replaceText:this._textToReplace}),this.focus()}),this._findButtonView.on("execute",this._onFindButtonExecute.bind(this)),e.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__actions"]},children:[this._replaceAllButtonView,this._replaceButtonView,this._findButtonView]}),e}_createMatchCaseSwitch(){const e=this.locale.t,t=new pc(this.locale);return t.set({label:e("Match case"),withText:!0}),t.bind("isOn").to(this,"_matchCase"),t.on("execute",()=>{this._matchCase=!this._matchCase,this.isDirty=!0}),t}_createWholeWordsOnlySwitch(){const e=this.locale.t,t=new pc(this.locale);return t.set({label:e("Whole words only"),withText:!0}),t.bind("isOn").to(this,"_wholeWordsOnly"),t.on("execute",()=>{this._wholeWordsOnly=!this._wholeWordsOnly,this.isDirty=!0}),t}_initFocusCycling(){[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView,this._advancedOptionsCollapsibleView.buttonView,this._matchCaseSwitchView,this._wholeWordsOnlySwitchView,this._replaceAllButtonView,this._replaceButtonView,this._findButtonView].forEach(t=>{this._focusables.add(t),this._focusTracker.add(t.element)})}_initKeystrokeHandling(){const e=i=>i.stopPropagation(),t=i=>{i.stopPropagation(),i.preventDefault()};this._keystrokes.listenTo(this.element),this._keystrokes.set("f3",i=>{t(i),this._findNextButtonView.fire("execute")}),this._keystrokes.set("shift+f3",i=>{t(i),this._findPrevButtonView.fire("execute")}),this._keystrokes.set("enter",i=>{const s=i.target;s===this._findInputView.fieldView.element?(this._areCommandsEnabled.findNext?this._findNextButtonView.fire("execute"):this._findButtonView.fire("execute"),t(i)):s===this._replaceInputView.fieldView.element&&!this.isDirty&&(this._replaceButtonView.fire("execute"),t(i))}),this._keystrokes.set("shift+enter",i=>{i.target===this._findInputView.fieldView.element&&(this._areCommandsEnabled.findPrevious?this._findPrevButtonView.fire("execute"):this._findButtonView.fire("execute"),t(i))}),this._keystrokes.set("arrowright",e),this._keystrokes.set("arrowleft",e),this._keystrokes.set("arrowup",e),this._keystrokes.set("arrowdown",e)}_createButton(e){const t=new Se(this.locale);return t.set(e),t}_createInputField(e,t){const i=new un(this.locale,os);return i.label=e,i.class=t,i}}class L_e extends z{static get requires(){return[ns]}static get pluginName(){return"FindAndReplaceUI"}static get isOfficialPlugin(){return!0}formView;constructor(e){super(e),e.config.define("findAndReplace.uiType","dialog"),this.formView=null}init(){const e=this.editor,t=e.config.get("findAndReplace.uiType")==="dropdown",i=e.commands.get("find"),s=this.editor.t;e.ui.componentFactory.add("findAndReplace",()=>{let r;return t?(r=this._createDropdown(),r.bind("isEnabled").to(i)):r=this._createDialogButtonForToolbar(),e.keystrokes.set("Ctrl+F",(o,a)=>{if(i.isEnabled){if(r instanceof om){const c=r.buttonView;c.isOn||c.fire("execute")}else r.isOn?e.plugins.get("Dialog").view.focus():r.fire("execute");a()}}),r}),t||e.ui.componentFactory.add("menuBar:findAndReplace",()=>this._createDialogButtonForMenuBar()),e.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Find in the document"),keystroke:"CTRL+F"}]})}_createDropdown(){const e=this.editor,t=e.locale.t,i=ls(e.locale);return i.once("change:isOpen",()=>{this.formView=this._createFormView(),this.formView.children.add(new ya(e.locale,{label:t("Find and replace")}),0),i.panelView.children.add(this.formView)}),i.on("change:isOpen",(s,r,o)=>{o?this._setupFormView():this.fire("searchReseted")},{priority:"low"}),i.buttonView.set({icon:lD,label:t("Find and replace"),keystroke:"CTRL+F",tooltip:!0}),i}_createDialogButtonForToolbar(){const e=this.editor,t=this._createButton(Se),i=e.plugins.get("Dialog");return t.set({tooltip:!0}),t.bind("isOn").to(i,"id",s=>s==="findAndReplace"),t.on("execute",()=>{t.isOn?i.hide():this._showDialog()}),t}_createDialogButtonForMenuBar(){const e=this._createButton(xn),t=this.editor.plugins.get("Dialog"),i=this.editor.plugins.get("Dialog");return e.set({role:"menuitemcheckbox",isToggleable:!0}),e.bind("isOn").to(i,"id",s=>s==="findAndReplace"),e.on("execute",()=>{if(t.id==="findAndReplace"){t.hide();return}this._showDialog()}),e}_createButton(e){const t=this.editor,i=t.commands.get("find"),s=new e(t.locale),r=t.locale.t;return s.bind("isEnabled").to(i),s.set({icon:lD,label:r("Find and replace"),keystroke:"CTRL+F"}),s}_showDialog(){const e=this.editor,t=e.plugins.get("Dialog"),i=e.locale.t;this.formView||(this.formView=this._createFormView()),t.show({id:"findAndReplace",title:i("Find and replace"),content:this.formView,position:vs.EDITOR_TOP_SIDE,onShow:()=>{this._setupFormView()},onHide:()=>{this.fire("searchReseted")}})}_createFormView(){const e=this.editor,t=new(Cd(V_e))(e.locale),i=e.commands,r=this.editor.plugins.get("FindAndReplaceEditing").state;t.bind("highlightOffset").to(r,"highlightedOffset"),t.listenTo(r.results,"change",()=>{t.matchCount=r.results.length});const o=i.get("findNext"),a=i.get("findPrevious"),c=i.get("replace"),d=i.get("replaceAll");return t.bind("_areCommandsEnabled").to(o,"isEnabled",a,"isEnabled",c,"isEnabled",d,"isEnabled",(h,m,p,w)=>({findNext:h,findPrevious:m,replace:p,replaceAll:w})),t.delegate("findNext","findPrevious","replace","replaceAll").to(this),t.on("change:isDirty",(h,m,p)=>{p&&this.fire("searchReseted")}),t}_setupFormView(){this.formView.disableCssTransitions(),this.formView.reset(),this.formView._findInputView.fieldView.select(),this.formView.enableCssTransitions()}}class F_e extends je{_state;constructor(e,t){super(e),this.isEnabled=!0,this.affectsData=!1,this._state=t}execute(e,{matchCase:t,wholeWords:i}={}){const{editor:s}=this,{model:r}=s,o=s.plugins.get("FindAndReplaceUtils");let a,c="";typeof e=="string"?a=(...m)=>({results:o.findByTextCallback(e,{matchCase:t,wholeWords:i})(...m),searchText:e}):a=e;const d=a;a=(...m)=>{const p=d(...m);return p&&"searchText"in p&&(c=p.searchText),p};const h=r.document.getRootNames().reduce((m,p)=>o.updateFindResultFromRange(r.createRangeIn(r.document.getRoot(p)),r,a,m),null);return this._state.clear(r),this._state.results.addMany(h),this._state.highlightedResult=h.get(0),this._state.searchText=c,a&&(this._state.lastSearchCallback=a),this._state.matchCase=!!t,this._state.matchWholeWords=!!i,{results:h,findCallback:a}}}class z_e extends kt(){constructor(e){super(),this.set("results",new Wn),this.set("highlightedResult",null),this.set("highlightedOffset",0),this.set("searchText",""),this.set("replaceText",""),this.set("lastSearchCallback",null),this.set("matchCase",!1),this.set("matchWholeWords",!1),this.results.on("change",(t,{removed:i,index:s})=>{if(Array.from(i).length){let r=!1;if(e.change(o=>{for(const a of i)this.highlightedResult===a&&(r=!0),e.markers.has(a.marker.name)&&o.removeMarker(a.marker)}),r){const o=s>=this.results.length?0:s;this.highlightedResult=this.results.get(o)}}}),this.on("change:highlightedResult",()=>{this.refreshHighlightOffset(e)})}clear(e){this.searchText="",e.change(t=>{if(this.highlightedResult){const i=this.highlightedResult.marker.name.split(":")[1],s=e.markers.get(`findResultHighlighted:${i}`);s&&t.removeMarker(s)}[...this.results].forEach(({marker:i})=>{t.removeMarker(i)})}),this.results.clear()}refreshHighlightOffset(e){const{highlightedResult:t,results:i}=this;t?this.highlightedOffset=C7(e,[...i]).indexOf(t)+1:this.highlightedOffset=0}}function C7(n,e){const t={before:-1,same:0,after:1,different:1};return n.document.getRootNames().flatMap(i=>e.filter(s=>s.marker.getStart().root.rootName===i).sort((s,r)=>t[s.marker.getStart().compareWith(r.marker.getStart())]))}class x7 extends je{_state;constructor(e,t){super(e),this.isEnabled=!0,this._state=t,this._isEnabledBasedOnSelection=!1}_replace(e,t){const{model:i}=this.editor,s=t.marker.getRange();i.canEditAt(s)&&i.change(r=>{if(s.root.rootName==="$graveyard"){this._state.results.remove(t);return}let o={};for(const a of s.getItems())if(a.is("$text")||a.is("$textProxy")){o=a.getAttributes();break}i.insertContent(r.createText(e,o),s),this._state.results.has(t)&&this._state.results.remove(t)})}}class j_e extends x7{execute(e,t){const i=Math.max(this._state.highlightedOffset-1,0);if(this._replace(e,t),this._state.results.length){const s=C7(this.editor.model,[...this._state.results]);this._state.highlightedResult=s[i%s.length]}}}class U_e extends x7{execute(e,t){const{editor:i}=this,{model:s}=i,r=i.plugins.get("FindAndReplaceUtils"),o=t instanceof Wn?t:s.document.getRootNames().reduce((a,c)=>r.updateFindResultFromRange(s.createRangeIn(s.document.getRoot(c)),s,r.findByTextCallback(t,this._state),a),null);o.length&&s.change(()=>{[...o].forEach(a=>{this._replace(e,a)})})}}class k7 extends je{_state;constructor(e,t){super(e),this.affectsData=!1,this._state=t,this.isEnabled=!1,this.listenTo(this._state.results,"change",()=>{this.isEnabled=this._state.results.length>1})}refresh(){this.isEnabled=this._state.results.length>1}execute(){const e=this._state.results,t=e.getIndex(this._state.highlightedResult),i=t+1>=e.length?0:t+1;this._state.highlightedResult=this._state.results.get(i)}}class H_e extends k7{execute(){const t=this._state.results.getIndex(this._state.highlightedResult),i=t-1<0?this._state.results.length-1:t-1;this._state.highlightedResult=this._state.results.get(i)}}class W_e extends z{static get pluginName(){return"FindAndReplaceUtils"}static get isOfficialPlugin(){return!0}updateFindResultFromRange(e,t,i,s){const r=s||new Wn,o=a=>r.find(c=>{const{marker:d}=c,h=d.getRange(),m=a.getRange();return h.isEqual(m)});return t.change(a=>{[...e].forEach(({type:c,item:d})=>{if(c==="elementStart"&&t.schema.checkChild(d,"$text")){let h=i({item:d,text:this.rangeToText(t.createRangeIn(d))});if(!h)return;"results"in h&&(h=h.results),h.forEach(m=>{const p=`findResult:${li()}`,w=a.addMarker(p,{usingOperation:!1,affectsData:!1,range:a.createRange(a.createPositionAt(d,m.start),a.createPositionAt(d,m.end))}),A=$_e(r,w);o(w)||r.add({id:p,label:m.label,marker:w},A)})}})}),r}rangeToText(e){return Array.from(e.getItems({shallow:!0})).reduce((t,i)=>i.is("$text")||i.is("$textProxy")?t+i.data:`${t}
`,"")}findByTextCallback(e,t){let i="gu";t.matchCase||(i+="i");let s=`(${JF(e)})`;if(t.wholeWords){const a="[^a-zA-Z--]";new RegExp("^"+a).test(e)||(s=`(^|${a}|_)${s}`),new RegExp(a+"$").test(e)||(s=`${s}(?=_|${a}|$)`)}const r=new RegExp(s,i);function o({text:a}){return[...a.matchAll(r)].map(G_e)}return o}}function $_e(n,e){const t=n.find(({marker:i})=>e.getStart().isBefore(i.getStart()));return t?n.getIndex(t):n.length}function G_e(n){const e=n.length-1;let t=n.index;return n.length===3&&(t+=n[1].length),{label:n[e],start:t,end:t+n[e].length}}const Y_e="ck-find-result_selected";class K_e extends z{static get requires(){return[W_e]}static get pluginName(){return"FindAndReplaceEditing"}static get licenseFeatureCode(){return"FAR"}static get isPremiumPlugin(){return!0}static get isOfficialPlugin(){return!0}state;init(){this.state=new z_e(this.editor.model),this.set("_isSearchActive",!1),this._defineConverters(),this._defineCommands(),this.listenTo(this.state,"change:highlightedResult",(i,s,r,o)=>{const{model:a}=this.editor;a.change(c=>{if(o){const d=o.marker.name.split(":")[1],h=a.markers.get(`findResultHighlighted:${d}`);h&&c.removeMarker(h)}if(r){const d=r.marker.name.split(":")[1];c.addMarker(`findResultHighlighted:${d}`,{usingOperation:!1,affectsData:!1,range:r.marker.getRange()})}})});const t=Ts(((i,s,r)=>{if(r){const o=this.editor.editing.view.domConverter,a=this.editor.editing.mapper.toViewRange(r.marker.getRange());v6({target:o.viewRangeToDom(a),viewportOffset:40})}}).bind(this),32);this.listenTo(this.state,"change:highlightedResult",t,{priority:"low"}),this.listenTo(this.editor,"destroy",t.cancel),this.on("change:_isSearchActive",(i,s,r)=>{r?this.listenTo(this.editor.model.document,"change:data",this._onDocumentChange):this.stopListening(this.editor.model.document,"change:data",this._onDocumentChange)})}find(e,t){return this._isSearchActive=!0,this.editor.execute("find",e,t),this.state.results}stop(){this.state.clear(this.editor.model),this._isSearchActive=!1}_defineCommands(){this.editor.commands.add("find",new F_e(this.editor,this.state)),this.editor.commands.add("findNext",new k7(this.editor,this.state)),this.editor.commands.add("findPrevious",new H_e(this.editor,this.state)),this.editor.commands.add("replace",new j_e(this.editor,this.state)),this.editor.commands.add("replaceAll",new U_e(this.editor,this.state))}_defineConverters(){const{editor:e}=this;e.conversion.for("editingDowncast").markerToHighlight({model:"findResult",view:({markerName:t})=>{const[,i]=t.split(":");return{name:"span",classes:["ck-find-result"],attributes:{"data-find-result":i}}}}),e.conversion.for("editingDowncast").markerToHighlight({model:"findResultHighlighted",view:({markerName:t})=>{const[,i]=t.split(":");return{name:"span",classes:[Y_e],attributes:{"data-find-result":i}}}})}_onDocumentChange=()=>{const e=new Set,t=new Set,i=this.editor.model,{results:s}=this.state,r=i.document.differ.getChanges(),o=i.document.differ.getChangedMarkers();r.forEach(d=>{d.position&&(d.name==="$text"||d.position.nodeAfter&&i.schema.isInline(d.position.nodeAfter)?(e.add(d.position.parent),[...i.markers.getMarkersAtPosition(d.position)].forEach(h=>{t.add(h.name)})):d.type==="insert"&&d.position.nodeAfter&&e.add(d.position.nodeAfter))}),o.forEach(({name:d,data:{newRange:h}})=>{h&&h.start.root.rootName==="$graveyard"&&t.add(d)}),e.forEach(d=>{[...i.markers.getMarkersIntersectingRange(i.createRangeIn(d))].forEach(m=>t.add(m.name))}),t.forEach(d=>{s.has(d)&&(s.get(d)===this.state.highlightedResult&&(this.state.highlightedResult=null),s.remove(d))});const a=[],c=this.editor.plugins.get("FindAndReplaceUtils");e.forEach(d=>{const h=c.updateFindResultFromRange(i.createRangeOn(d),i,this.state.lastSearchCallback,s);a.push(...h)}),o.forEach(d=>{if(d.data.newRange){const h=c.updateFindResultFromRange(d.data.newRange,i,this.state.lastSearchCallback,s);a.push(...h)}}),!this.state.highlightedResult&&a.length?this.state.highlightedResult=a[0]:this.state.refreshHighlightOffset(i)}}class q_e extends z{static get requires(){return[K_e,L_e]}static get pluginName(){return"FindAndReplace"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.plugins.get("FindAndReplaceUI"),t=this.editor.plugins.get("FindAndReplaceEditing"),i=t.state;e.on("findNext",(s,r)=>{r?(i.searchText=r.searchText,t.find(r.searchText,r)):this.editor.execute("findNext")}),e.on("findPrevious",(s,r)=>{r&&i.searchText!==r.searchText?t.find(r.searchText):this.editor.execute("findPrevious")}),e.on("replace",(s,r)=>{i.searchText!==r.searchText&&t.find(r.searchText);const o=i.highlightedResult;o&&this.editor.execute("replace",r.replaceText,o)}),e.on("replaceAll",(s,r)=>{i.searchText!==r.searchText&&t.find(r.searchText),this.editor.execute("replaceAll",r.replaceText,i.results)}),e.on("searchReseted",()=>{i.clear(this.editor.model),t.stop()})}}function AM(n){return n.map(e=>Q_e(e)).filter(e=>e!==void 0)}const _M={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function Q_e(n){if(typeof n=="number"&&(n=String(n)),typeof n=="object"&&X_e(n))return WC(n);const e=J_e(n);if(e)return WC(e);if(n==="default")return{model:void 0,title:"Default"};if(!e1e(n))return Z_e(n)}function Z_e(n){return typeof n=="string"&&(n={title:n,model:`${parseFloat(n)}px`}),n.view={name:"span",styles:{"font-size":n.model}},WC(n)}function WC(n){return n.view&&typeof n.view!="string"&&!n.view.priority&&(n.view.priority=7),n}function J_e(n){return typeof n=="string"?_M[n]:_M[n.model]}function X_e(n){return n.title&&n.model&&n.view}function e1e(n){let e;if(typeof n=="object")if(n.model)e=parseFloat(n.model);else throw new D("font-size-invalid-definition",null,n);else e=parseFloat(n);return isNaN(e)}class t1e extends je{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){const e=this.editor.model,t=e.document,i=qt(t.selection.getSelectedBlocks());this.value=!!i&&i.is("element","paragraph"),this.isEnabled=!!i&&CM(i,e.schema)}execute(e={}){const t=this.editor.model,i=t.document,s=e.selection||i.selection;t.canEditAt(s)&&t.change(r=>{const o=s.getSelectedBlocks();for(const a of o)!a.is("element","paragraph")&&CM(a,t.schema)&&r.rename(a,"paragraph")})}}function CM(n,e){return e.checkChild(n.parent,"paragraph")&&!e.isObject(n)}class n1e extends je{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){const t=this.editor.model,i=e.attributes;let s=e.position;return t.canEditAt(s)?t.change(r=>{if(s=this._findPositionToInsertParagraph(s,r),!s)return null;const o=r.createElement("paragraph");return i&&t.schema.setAllowedAttributes(o,i,r),t.insertContent(o,s),r.setSelection(o,"in"),r.createPositionAt(o,0)}):null}_findPositionToInsertParagraph(e,t){const i=this.editor.model;if(i.schema.checkChild(e,"paragraph"))return e;const s=i.schema.findAllowedParent(e,"paragraph");if(!s)return null;const r=e.parent,o=i.schema.checkChild(r,"$text");return r.isEmpty||o&&e.isAtEnd?i.createPositionAfter(r):!r.isEmpty&&o&&e.isAtStart?i.createPositionBefore(r):t.split(e,s).position}}class gy extends z{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model;e.commands.add("paragraph",new t1e(e)),e.commands.add("insertParagraph",new n1e(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(i,{writer:s})=>!gy.paragraphLikeElements.has(i.name)||i.isEmpty?null:s.createElement("paragraph"),view:/.+/,converterPriority:"low"})}static paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"])}class i1e extends je{modelElements;constructor(e,t){super(e),this.modelElements=t}refresh(){const e=qt(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>xM(e,t,this.editor.model.schema))}execute(e){const t=this.editor.model,i=t.document,s=e.value;t.change(r=>{const o=Array.from(i.selection.getSelectedBlocks()).filter(a=>xM(a,s,t.schema));for(const a of o)a.is("element",s)||r.rename(a,s)})}}function xM(n,e,t){return t.checkChild(n.parent,e)&&!t.isObject(n)}const kM="paragraph";class s1e extends z{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[gy]}init(){const e=this.editor,t=e.config.get("heading.options"),i=[];for(const s of t)s.model!=="paragraph"&&(e.model.schema.register(s.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(s),i.push(s.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new i1e(e,i))}afterInit(){const e=this.editor,t=e.commands.get("enter"),i=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(s,r)=>{const o=e.model.document.selection.getFirstPosition().parent;i.some(c=>o.is("element",c.model))&&!o.is("element",kM)&&o.childCount===0&&r.writer.rename(o,kM)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:rs.low+1})}}function r1e(n){const e=n.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return n.config.get("heading.options").map(i=>{const s=t[i.title];return s&&s!=i.title&&(i.title=s),i})}class o1e extends z{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,i=r1e(e),s=t("Choose heading"),r=t("Heading");e.ui.componentFactory.add("heading",o=>{const a={},c=new Wn,d=e.commands.get("heading"),h=e.commands.get("paragraph"),m=[d];for(const w of i){const A={type:"button",model:new cl({label:w.title,class:w.class,role:"menuitemradio",withText:!0})};w.model==="paragraph"?(A.model.bind("isOn").to(h,"value"),A.model.set("commandName","paragraph"),m.push(h)):(A.model.bind("isOn").to(d,"value",C=>C===w.model),A.model.set({commandName:"heading",commandValue:w.model})),c.add(A),a[w.model]=w.title}const p=ls(o);return Sc(p,c,{ariaLabel:r,role:"menu"}),p.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),p.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),p.bind("isEnabled").toMany(m,"isEnabled",(...w)=>w.some(A=>A)),p.buttonView.bind("label").to(d,"value",h,"value",(w,A)=>{const C=A?"paragraph":w;return typeof C=="boolean"||!a[C]?s:a[C]}),p.buttonView.bind("ariaLabel").to(d,"value",h,"value",(w,A)=>{const C=A?"paragraph":w;return typeof C=="boolean"||!a[C]?r:`${a[C]}, ${r}`}),this.listenTo(p,"execute",w=>{const{commandName:A,commandValue:C}=w.source;e.execute(A,C?{value:C}:void 0),e.editing.view.focus()}),p}),e.ui.componentFactory.add("menuBar:heading",o=>{const a=new Zr(o),c=e.commands.get("heading"),d=e.commands.get("paragraph"),h=[c],m=new am(o);a.set({class:"ck-heading-dropdown"}),m.set({ariaLabel:t("Heading"),role:"menu"}),a.buttonView.set({label:t("Heading")}),a.panelView.children.add(m);for(const p of i){const w=new Um(o,a),A=new xn(o);w.children.add(A),m.items.add(w),A.set({isToggleable:!0,label:p.title,role:"menuitemradio",class:p.class}),A.delegate("execute").to(a),A.on("execute",()=>{const C=p.model==="paragraph"?"paragraph":"heading";e.execute(C,{value:p.model}),e.editing.view.focus()}),p.model==="paragraph"?(A.bind("isOn").to(d,"value"),h.push(d)):A.bind("isOn").to(c,"value",C=>C===p.model)}return a.bind("isEnabled").toMany(h,"isEnabled",(...p)=>p.some(w=>w)),a})}}class a1e extends z{static get requires(){return[s1e,o1e]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}const EM=new Set(["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"]);class l1e extends z{_bodyPlaceholder=new Map;static get pluginName(){return"Title"}static get isOfficialPlugin(){return!0}static get requires(){return["Paragraph"]}init(){const e=this.editor,t=e.model;t.schema.register("title",{isBlock:!0,allowIn:"$root"}),t.schema.register("title-content",{isBlock:!0,allowIn:"title",allowAttributes:["alignment"]}),t.schema.extend("$text",{allowIn:"title-content"}),t.schema.addAttributeCheck(i=>{if(i.endsWith("title-content $text"))return!1}),e.editing.mapper.on("modelToViewPosition",SM(e.editing.view)),e.data.mapper.on("modelToViewPosition",SM(e.editing.view)),e.conversion.for("downcast").elementToElement({model:"title-content",view:"h1"}),e.conversion.for("downcast").add(i=>i.on("insert:title",(s,r,o)=>{o.consumable.consume(r.item,s.name)})),e.data.upcastDispatcher.on("element:h1",e1,{priority:"high"}),e.data.upcastDispatcher.on("element:h2",e1,{priority:"high"}),e.data.upcastDispatcher.on("element:h3",e1,{priority:"high"}),t.document.registerPostFixer(i=>this._fixTitleContent(i)),t.document.registerPostFixer(i=>this._fixTitleElement(i)),t.document.registerPostFixer(i=>this._fixBodyElement(i)),t.document.registerPostFixer(i=>this._fixExtraParagraph(i)),this._attachPlaceholders(),this._attachTabPressHandling()}getTitle(e={}){const t=e.rootName?e.rootName:void 0,s=this._getTitleElement(t).getChild(0);return this.editor.data.stringify(s,e)}getBody(e={}){const t=this.editor,i=t.data,s=t.model,r=e.rootName?e.rootName:void 0,o=t.model.document.getRoot(r),a=t.editing.view,c=new DE(a.document),d=s.createRangeIn(o),h=c.createDocumentFragment(),m=s.createPositionAfter(o.getChild(0)),p=s.createRange(m,s.createPositionAt(o,"end")),w=new Map;for(const A of s.markers){const C=p.getIntersection(A.getRange());C&&w.set(A.name,C)}return i.mapper.clearBindings(),i.mapper.bindElements(o,h),i.downcastDispatcher.convert(d,w,c,e),c.remove(c.createRangeOn(h.getChild(0))),t.data.processor.toData(h)}_getTitleElement(e){const t=this.editor.model.document.getRoot(e);for(const i of t.getChildren())if(TM(i))return i}_fixTitleContent(e){let t=!1;for(const i of this.editor.model.document.getRootNames()){const s=this._getTitleElement(i);if(!s||s.maxOffset===1)continue;const r=Array.from(s.getChildren());r.shift();for(const o of r)e.move(e.createRangeOn(o),s,"after"),e.rename(o,"paragraph");t=!0}return t}_fixTitleElement(e){let t=!1;const i=this.editor.model;for(const s of this.editor.model.document.getRoots()){const r=Array.from(s.getChildren()).filter(TM),o=r[0],a=s.getChild(0);if(a.is("element","title")){r.length>1&&(IM(r,e,i),t=!0);continue}if(!o&&!EM.has(a.name)){const c=e.createElement("title");e.insert(c,s),e.insertElement("title-content",c),t=!0;continue}EM.has(a.name)?c1e(a,e,i):e.move(e.createRangeOn(o),s,0),IM(r,e,i),t=!0}return t}_fixBodyElement(e){let t=!1;for(const i of this.editor.model.document.getRootNames()){const s=this.editor.model.document.getRoot(i);if(s.childCount<2){const r=e.createElement("paragraph");e.insert(r,s,1),this._bodyPlaceholder.set(i,r),t=!0}}return t}_fixExtraParagraph(e){let t=!1;for(const i of this.editor.model.document.getRootNames()){const s=this.editor.model.document.getRoot(i),r=this._bodyPlaceholder.get(i);d1e(r,s)&&(this._bodyPlaceholder.delete(i),e.remove(r),t=!0)}return t}_attachPlaceholders(){const e=this.editor,t=e.t,i=e.editing.view,s=e.sourceElement,r=e.config.get("title.placeholder")||t("Type your title"),o=e.config.get("placeholder")||s&&s.tagName.toLowerCase()==="textarea"&&s.getAttribute("placeholder")||t("Type or paste your content here.");e.editing.downcastDispatcher.on("insert:title-content",(c,d,h)=>{const m=h.mapper.toViewElement(d.item);m.placeholder=r,iy({view:i,element:m,keepOnFocus:!0})});const a=new Map;i.document.registerPostFixer(c=>{let d=!1;for(const h of i.document.roots){if(h.isEmpty)continue;const m=h.getChild(1),p=a.get(h.rootName);m!==p&&(p&&(vw(c,p),c.removeAttribute("data-placeholder",p)),c.setAttribute("data-placeholder",o,m),a.set(h.rootName,m),d=!0),E6(m,!0)&&h.childCount===2&&m.name==="p"?d=k6(c,m)?!0:d:d=vw(c,m)?!0:d}return d})}_attachTabPressHandling(){const e=this.editor,t=e.model;e.keystrokes.set("TAB",(i,s)=>{t.change(r=>{const o=t.document.selection,a=Array.from(o.getSelectedBlocks());if(a.length===1&&a[0].is("element","title-content")){const d=o.getFirstPosition().root.getChild(1);r.setSelection(d,0),s()}})}),e.keystrokes.set("SHIFT + TAB",(i,s)=>{t.change(r=>{const o=t.document.selection;if(!o.isCollapsed)return;const a=qt(o.getSelectedBlocks()),c=o.getFirstPosition(),d=e.model.document.getRoot(c.root.rootName),h=d.getChild(0),m=d.getChild(1);a===m&&c.isAtStart&&(r.setSelection(h.getChild(0),0),s())})})}}function e1(n,e,t){const i=e.modelCursor,s=e.viewItem;if(!i.isAtStart||!i.parent.is("element","$root")||!t.consumable.consume(s,{name:!0}))return;const r=t.writer,o=r.createElement("title"),a=r.createElement("title-content");r.append(a,o),r.insert(o,i),t.convertChildren(s,a),t.updateConversionResult(o,e)}function SM(n){return(e,t)=>{const i=t.modelPosition.parent;if(!i.is("element","title"))return;const s=i.parent,r=t.mapper.toViewElement(s);t.viewPosition=n.createPositionAt(r,0),e.stop()}}function TM(n){return n.is("element","title")}function c1e(n,e,t){const i=e.createElement("title");e.insert(i,n,"before"),e.insert(n,i,0),e.rename(n,"title-content"),t.schema.removeDisallowedAttributes([n],e)}function IM(n,e,t){let i=!1;for(const s of n)s.index!==0&&(u1e(s,e,t),i=!0);return i}function u1e(n,e,t){const i=n.getChild(0);if(i.isEmpty){e.remove(n);return}e.move(e.createRangeOn(i),n,"before"),e.rename(i,"paragraph"),e.remove(n),t.schema.removeDisallowedAttributes([i],e)}function d1e(n,e){return!(!n||!n.is("element","paragraph")||n.childCount||e.childCount<=2||e.getChild(e.childCount-1)!==n)}class f1e extends je{refresh(){const e=this.editor.model,t=e.schema,i=e.document.selection,s=RM(i);this.isEnabled=h1e(i,t,e),this.value=s?s.getAttribute("value")||"":null}execute(e){const t=this.editor.model,i=t.document.selection;t.change(s=>{let r;this.value!==null?r=RM(i):(r=s.createElement("rawHtml"),t.insertObject(r,null,null,{setSelection:"on"})),s.setAttribute("value",e,r)})}}function h1e(n,e,t){const i=m1e(n,t);return e.checkChild(i,"rawHtml")}function m1e(n,e){const i=my(n,e).start.parent;return i.isEmpty&&!i.is("rootElement")?i.parent:i}function RM(n){const e=n.getSelectedElement();return e&&e.is("element","rawHtml")?e:null}class g1e extends z{_widgetButtonViewReferences=new Set;static get pluginName(){return"HtmlEmbedEditing"}static get licenseFeatureCode(){return"HE"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}constructor(e){super(e),e.config.define("htmlEmbed",{showPreviews:!1,sanitizeHtml:t=>(lt("html-embed-provide-sanitize-function"),{html:t,hasChanged:!1})})}init(){const e=this.editor;e.model.schema.register("rawHtml",{inheritAllFrom:"$blockObject",allowAttributes:["value"]}),e.commands.add("htmlEmbed",new f1e(e)),this._setupConversion()}_setupConversion(){const e=this.editor,t=e.t,i=e.editing.view,s=this._widgetButtonViewReferences,r=e.config.get("htmlEmbed");this.editor.editing.view.on("render",()=>{for(const h of s){if(h.element&&h.element.isConnected)return;h.destroy(),s.delete(h)}},{priority:"lowest"}),e.data.registerRawContentMatcher({name:"div",classes:"raw-html-embed"}),e.conversion.for("upcast").elementToElement({view:{name:"div",classes:"raw-html-embed"},model:(h,{writer:m})=>m.createElement("rawHtml",{value:h.getCustomProperty("$rawContent")})}),e.conversion.for("dataDowncast").elementToElement({model:"rawHtml",view:(h,{writer:m})=>m.createRawElement("div",{class:"raw-html-embed"},function(p){p.innerHTML=h.getAttribute("value")||""})}),e.conversion.for("editingDowncast").elementToStructure({model:{name:"rawHtml",attributes:["value"]},view:(h,{writer:m})=>{let p,w,A;const C=m.createRawElement("div",{class:"raw-html-embed__content-wrapper"},function(S){p=S,o({editor:e,domElement:S,state:w,props:A}),p.addEventListener("mousedown",()=>{if(w.isEditable){const I=e.model;I.document.selection.getSelectedElement()!==h&&I.change(O=>O.setSelection(h,"on"))}},!0)}),k={makeEditable(){w=Object.assign({},w,{isEditable:!0}),o({domElement:p,editor:e,state:w,props:A}),i.change(S=>{S.setAttribute("data-cke-ignore-events","true",C)}),p.querySelector("textarea").focus()},save(S){S!==w.getRawHtmlValue()?(e.execute("htmlEmbed",S),e.editing.view.focus()):this.cancel()},cancel(){w=Object.assign({},w,{isEditable:!1}),o({domElement:p,editor:e,state:w,props:A}),e.editing.view.focus(),i.change(S=>{S.removeAttribute("data-cke-ignore-events",C)})}};w={showPreviews:r.showPreviews,isEditable:!1,getRawHtmlValue:()=>h.getAttribute("value")||""},A={sanitizeHtml:r.sanitizeHtml,textareaPlaceholder:t("Paste raw HTML here..."),onEditClick(){k.makeEditable()},onSaveClick(S){k.save(S)},onCancelClick(){k.cancel()}};const E=m.createContainerElement("div",{class:"raw-html-embed","data-html-embed-label":t("HTML snippet"),dir:e.locale.uiLanguageDirection},C);return m.setCustomProperty("rawHtmlApi",k,E),m.setCustomProperty("rawHtml",!0,E),Tc(E,m,{label:t("HTML snippet"),hasSelectionHandle:!0})}});function o({editor:h,domElement:m,state:p,props:w}){m.textContent="";const A=m.ownerDocument;let C;if(p.isEditable){const E={isDisabled:!1,placeholder:w.textareaPlaceholder};C=c({domDocument:A,state:p,props:E}),m.append(C)}else if(p.showPreviews){const E={sanitizeHtml:w.sanitizeHtml};m.append(d({domDocument:A,state:p,props:E,editor:h}))}else{const E={isDisabled:!0,placeholder:w.textareaPlaceholder};m.append(c({domDocument:A,state:p,props:E}))}const k={onEditClick:w.onEditClick,onSaveClick:()=>{w.onSaveClick(C.value)},onCancelClick:w.onCancelClick};m.prepend(a({editor:h,domDocument:A,state:p,props:k}))}function a({editor:h,domDocument:m,state:p,props:w}){const A=si(m,"div",{class:"raw-html-embed__buttons-wrapper"});if(p.isEditable){const C=t1(h,"save",w.onSaveClick),k=t1(h,"cancel",w.onCancelClick);A.append(C.element,k.element),s.add(C).add(k)}else{const C=t1(h,"edit",w.onEditClick);A.append(C.element),s.add(C)}return A}function c({domDocument:h,state:m,props:p}){const w=si(h,"textarea",{placeholder:p.placeholder,class:"ck ck-reset ck-input ck-input-text raw-html-embed__source"});return w.disabled=p.isDisabled,w.value=m.getRawHtmlValue(),w}function d({editor:h,domDocument:m,state:p,props:w}){const A=w.sanitizeHtml(p.getRawHtmlValue()),C=p.getRawHtmlValue().length>0?t("No preview available"):t("Empty snippet content"),k=si(m,"div",{class:"ck ck-reset_all raw-html-embed__preview-placeholder"},C),E=si(m,"div",{class:"raw-html-embed__preview-content",dir:h.locale.contentLanguageDirection}),I=m.createRange().createContextualFragment(A.html);return E.appendChild(I),si(m,"div",{class:"raw-html-embed__preview"},[k,E])}}}function t1(n,e,t){const{t:i}=n.locale,s=new Se(n.locale),r=n.commands.get("htmlEmbed");return s.set({class:`raw-html-embed__${e}-button`,icon:MC,tooltip:!0,tooltipPosition:n.locale.uiLanguageDirection==="rtl"?"e":"w"}),s.render(),e==="edit"?(s.set({icon:MC,label:i("Edit source")}),s.bind("isEnabled").to(r)):e==="save"?(s.set({icon:Lm,label:i("Save changes")}),s.bind("isEnabled").to(r)):s.set({icon:Vm,label:i("Cancel")}),s.on("execute",t),s}class p1e extends z{static get pluginName(){return"HtmlEmbedUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=e.locale.t;e.ui.componentFactory.add("htmlEmbed",()=>{const s=this._createButton(Se);return s.set({tooltip:!0,label:i("Insert HTML")}),s}),e.ui.componentFactory.add("menuBar:htmlEmbed",()=>{const s=this._createButton(xn);return s.set({label:i("HTML snippet")}),s})}_createButton(e){const t=this.editor,i=t.commands.get("htmlEmbed"),s=new e(t.locale);return s.set({icon:Ewe}),s.bind("isEnabled").to(i,"isEnabled"),this.listenTo(s,"execute",()=>{t.execute("htmlEmbed"),t.editing.view.focus(),t.editing.view.document.selection.getSelectedElement().getCustomProperty("rawHtmlApi").makeEditable()}),s}}class b1e extends z{static get requires(){return[g1e,p1e,Cl]}static get pluginName(){return"HtmlEmbed"}static get isOfficialPlugin(){return!0}}function Jr(n,e,t,i){e&&w1e(n,e,i),t&&Xr(n,t,i)}function Xr(n,e,t){if(e.attributes)for(const[i,s]of Object.entries(e.attributes))n.setAttribute(i,s,t);e.styles&&n.setStyle(e.styles,t),e.classes&&n.addClass(e.classes,t)}function w1e(n,e,t){if(e.attributes)for(const[i]of Object.entries(e.attributes))n.removeAttribute(i,t);if(e.styles)for(const i of Object.keys(e.styles))n.removeStyle(i,t);e.classes&&n.removeClass(e.classes,t)}function v1e(n,e){const t=zi(n);let i="attributes";for(i in e)i=="classes"?t[i]=Array.from(new Set([...n[i]||[],...e[i]])):t[i]={...n[i],...e[i]};return t}function Bu(n,e,t,i,s){const r=e.getAttribute(t),o={};for(const a of["attributes","styles","classes"]){if(a!=i){r&&r[a]&&(o[a]=r[a]);continue}if(i=="classes"){const d=new Set(r&&r.classes||[]);s(d),d.size&&(o[a]=Array.from(d));continue}const c=new Map(Object.entries(r&&r[a]||{}));s(c),c.size&&(o[a]=Object.fromEntries(c))}Object.keys(o).length?e.is("documentSelection")?n.setSelectionAttribute(t,o):n.setAttribute(t,o,e):r&&(e.is("documentSelection")?n.removeSelectionAttribute(t):n.removeAttribute(t,e))}function y1e(n,e,t){for(const i of e.getItems({shallow:!0})){const s=i.getAttribute(n);s&&s.attributes&&Object.keys(s.attributes).length?Object.keys(s).length>1&&t.setAttribute(n,{attributes:s.attributes},i):t.removeAttribute(n,i)}}function A1e(n){return yfe(n).replace(/ /g,"")}function Qs(n){return`html${A1e(n)}Attributes`}function aS({model:n}){return(e,t)=>t.writer.createElement(n,{htmlContent:e.getCustomProperty("$rawContent")})}function _1e(n,{view:e,isInline:t}){const i=n.t;return(s,{writer:r})=>{const o=i("HTML object"),a=py(e,s,r),c=s.getAttribute(Qs(e));r.addClass("html-object-embed__content",a),c&&Xr(r,c,a);const d=r.createContainerElement(t?"span":"div",{class:"html-object-embed","data-html-object-embed-label":o},a);return Tc(d,r,{label:o})}}function py(n,e,t){return t.createRawElement(n,null,(i,s)=>{s.setContentOf(i,e.getAttribute("htmlContent"))})}function C1e({view:n,model:e,allowEmpty:t},i){return r=>{r.on(`element:${n}`,(o,a,c)=>{let d=i.processViewAttributes(a.viewItem,c);if(!(!d&&!c.consumable.test(a.viewItem,{name:!0}))){if(d=d||{},c.consumable.consume(a.viewItem,{name:!0}),a.modelRange||(a=Object.assign(a,c.convertChildren(a.viewItem,a.modelCursor))),t&&a.modelRange.isCollapsed&&Object.keys(d).length){const h=c.writer.createElement("htmlEmptyElement");if(!c.safeInsert(h,a.modelCursor))return;const m=c.getSplitParts(h);a.modelRange=c.writer.createRange(a.modelRange.start,c.writer.createPositionAfter(m[m.length-1])),c.updateConversionResult(h,a),s(h,d,c);return}for(const h of a.modelRange.getItems())s(h,d,c)}},{priority:"low"})};function s(r,o,a){if(a.schema.checkAttribute(r,e)){const c=r.getAttribute(e),d=v1e(o,c||{});a.writer.setAttribute(e,d,r)}}}function PM({model:n,view:e},t){return(i,{writer:s,consumable:r})=>{if(!i.hasAttribute(n))return null;const o=s.createContainerElement(e),a=i.getAttribute(n);return r.consume(i,`attribute:${n}`),Xr(s,a,o),o.getFillerOffset=()=>null,t?Tc(o,s):o}}function x1e({priority:n,view:e}){return(t,i)=>{if(!t)return;const{writer:s}=i,r=s.createAttributeElement(e,null,{priority:n});return Xr(s,t,r),r}}function xd({view:n},e){return t=>{t.on(`element:${n}`,(i,s,r)=>{if(!s.modelRange||s.modelRange.isCollapsed)return;const o=e.processViewAttributes(s.viewItem,r);o&&r.writer.setAttribute(Qs(s.viewItem.name),o,s.modelRange)},{priority:"low"})}}function cm({view:n,model:e}){return t=>{t.on(`attribute:${Qs(n)}:${e}`,(i,s,r)=>{if(!r.consumable.consume(s.item,i.name))return;const{attributeOldValue:o,attributeNewValue:a}=s,c=r.writer,d=r.mapper.toViewElement(s.item);Jr(c,o,a,d)})}}const OM={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"horizontalLine",view:"hr"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6","$text"],allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowIn:["$root","$container"],allowChildren:["paragraph","htmlP","htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlHr",view:"hr",isEmpty:!0,modelSchema:{inheritAllFrom:"$blockObject"}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref",attributeProperties:{isFormatting:!0}},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]};class kd extends z{_definitions=[];static get pluginName(){return"DataSchema"}static get isOfficialPlugin(){return!0}init(){for(const e of OM.block)this.registerBlockElement(e);for(const e of OM.inline)this.registerInlineElement(e)}registerBlockElement(e){this._definitions.push({...e,isBlock:!0})}registerInlineElement(e){this._definitions.push({...e,isInline:!0})}extendBlockElement(e){this._extendDefinition({...e,isBlock:!0})}extendInlineElement(e){this._extendDefinition({...e,isInline:!0})}getDefinitionsForView(e,t=!1){const i=new Set;for(const s of this._getMatchingViewDefinitions(e)){if(t)for(const r of this._getReferences(s.model))i.add(r);i.add(s)}return i}getDefinitionsForModel(e){return this._definitions.filter(t=>t.model==e)}_getMatchingViewDefinitions(e){return this._definitions.filter(t=>t.view&&k1e(e,t.view))}*_getReferences(e){const t=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],i=this._definitions.filter(s=>s.model==e);for(const{modelSchema:s}of i)if(s)for(const r of t)for(const o of yt(s[r]||[])){const a=this._definitions.filter(c=>c.model==o);for(const c of a)o!==e&&(yield*this._getReferences(c.model),yield c)}}_extendDefinition(e){const t=Array.from(this._definitions.entries()).filter(([,i])=>i.model==e.model);if(t.length==0){this._definitions.push(e);return}for(const[i,s]of t)this._definitions[i]=ZF({},s,e,(r,o)=>Array.isArray(r)?r.concat(o):void 0)}}function k1e(n,e){return typeof n=="string"?n===e:n instanceof RegExp?n.test(e):!1}class bn extends z{_dataSchema;_allowedAttributes;_disallowedAttributes;_allowedElements;_disallowedElements;_dataInitialized;_coupledAttributes;constructor(e){super(e),this._dataSchema=e.plugins.get("DataSchema"),this._allowedAttributes=new ji,this._disallowedAttributes=new ji,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get isOfficialPlugin(){return!0}static get requires(){return[kd,Cl]}loadAllowedConfig(e){for(const t of e){const i=t.name||/[\s\S]+/,s=MM(t);this.allowElement(i),s.forEach(r=>this.allowAttributes(r))}}loadDisallowedConfig(e){for(const t of e){const i=t.name||/[\s\S]+/,s=MM(t);s.length==0?this.disallowElement(i):s.forEach(r=>this.disallowAttributes(r))}}loadAllowedEmptyElementsConfig(e){for(const t of e)this.allowEmptyElement(t)}allowElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!0))this._addAllowedElement(t),this._coupledAttributes=null}disallowElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!1))this._disallowedElements.add(t.view)}allowEmptyElement(e){for(const t of this._dataSchema.getDefinitionsForView(e,!0))t.isInline&&this._dataSchema.extendInlineElement({...t,allowEmpty:!0})}allowAttributes(e){this._allowedAttributes.add(e)}disallowAttributes(e){this._disallowedAttributes.add(e)}processViewAttributes(e,t){const{consumable:i}=t;return DM(e,this._disallowedAttributes,i),E1e(e,DM(e,this._allowedAttributes,i))}_addAllowedElement(e){if(!this._allowedElements.has(e)){if(this._allowedElements.add(e),"appliesToBlock"in e&&typeof e.appliesToBlock=="string")for(const t of this._dataSchema.getDefinitionsForModel(e.appliesToBlock))t.isBlock&&this._addAllowedElement(t);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(e)},{priority:rs.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(const e of this._allowedElements)this._fireRegisterEvent(e)},{priority:rs.highest+1})}_registerElementHandlers(){this.on("register",(e,t)=>{const i=this.editor.model.schema;if(t.isObject&&!i.isRegistered(t.model))this._registerObjectElement(t);else if(t.isBlock)this._registerBlockElement(t);else if(t.isInline)this._registerInlineElement(t);else throw new D("data-filter-invalid-definition",null,t);e.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){const e=this.editor.model,t=e.document.selection;e.document.registerPostFixer(i=>{const s=e.document.differ.getChanges();let r=!1;const o=this._getCoupledAttributesMap();for(const a of s){if(a.type!="attribute"||a.attributeNewValue!==null)continue;const c=o.get(a.attributeKey);if(c)for(const{item:d}of a.range.getWalker())for(const h of c)d.hasAttribute(h)&&(i.removeAttribute(h,d),r=!0)}return r}),this.listenTo(t,"change:attribute",(i,{attributeKeys:s})=>{const r=new Set,o=this._getCoupledAttributesMap();for(const a of s){if(t.hasAttribute(a))continue;const c=o.get(a);if(c)for(const d of c)t.hasAttribute(d)&&r.add(d)}r.size!=0&&e.change(a=>{for(const c of r)a.removeSelectionAttribute(c)})})}_registerAssociatedHtmlAttributesPostFixer(){const e=this.editor.model;e.document.registerPostFixer(t=>{const i=e.document.differ.getChanges();let s=!1;for(const r of i)if(!(r.type!=="insert"||r.name==="$text"))for(const o of r.attributes.keys())!o.startsWith("html")||!o.endsWith("Attributes")||e.schema.checkAttribute(r.name,o)||(t.removeAttribute(o,r.position.nodeAfter),s=!0);return s})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(const e of this._allowedElements)if(e.coupledAttribute&&e.model){const t=this._coupledAttributes.get(e.coupledAttribute);t?t.push(e.model):this._coupledAttributes.set(e.coupledAttribute,[e.model])}return this._coupledAttributes}_fireRegisterEvent(e){e.view&&this._disallowedElements.has(e.view)||this.fire(e.view?`register:${e.view}`:"register",e)}_registerObjectElement(e){const t=this.editor,i=t.model.schema,s=t.conversion,{view:r,model:o}=e;i.register(o,e.modelSchema);r&&(i.extend(e.model,{allowAttributes:[Qs(r),"htmlContent"]}),t.data.registerRawContentMatcher({name:r}),s.for("upcast").elementToElement({view:r,model:aS(e),converterPriority:rs.low+2}),s.for("upcast").add(xd(e,this)),s.for("editingDowncast").elementToStructure({model:{name:o,attributes:[Qs(r)]},view:_1e(t,e)}),s.for("dataDowncast").elementToElement({model:o,view:(a,{writer:c})=>py(r,a,c)}),s.for("dataDowncast").add(cm(e)))}_registerBlockElement(e){const t=this.editor,i=t.model.schema,s=t.conversion,{view:r,model:o}=e;if(!i.isRegistered(e.model)){if(!e.modelSchema||(i.register(e.model,e.modelSchema),!r))return;s.for("upcast").elementToElement({model:o,view:r,converterPriority:rs.low+2}),s.for("downcast").elementToElement({model:o,view:(a,{writer:c})=>e.isEmpty?c.createEmptyElement(r):c.createContainerElement(r)})}r&&(i.extend(e.model,{allowAttributes:Qs(r)}),s.for("upcast").add(xd(e,this)),s.for("downcast").add(cm(e)))}_registerInlineElement(e){const t=this.editor,i=t.model.schema,s=t.conversion,r=e.model;if(!e.appliesToBlock&&(i.extend("$text",{allowAttributes:r}),e.attributeProperties&&i.setAttributeProperties(r,e.attributeProperties),s.for("upcast").add(C1e(e,this)),s.for("downcast").attributeToElement({model:r,view:x1e(e)}),!!e.allowEmpty)){if(i.setAttributeProperties(r,{copyFromObject:!1}),!i.isRegistered("htmlEmptyElement")){i.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"});const o=a=>Array.from(a.getAttributeKeys()).some(c=>c.startsWith("html"));t.model.document.registerPostFixer(a=>{const c=t.model.document.differ.getChanges(),d=new Set;for(const h of c)if(h.type!=="remove"){if(h.type==="attribute"&&h.attributeNewValue===null)for(const{item:m}of h.range)m.is("element","htmlEmptyElement")&&!o(m)&&d.add(m);if(h.type==="insert"&&h.position.nodeAfter){const m=h.position.nodeAfter;for(const{item:p}of a.createRangeOn(m))p.is("element","htmlEmptyElement")&&!o(p)&&d.add(p)}}for(const h of d)a.remove(h);return d.size>0})}t.data.htmlProcessor.domConverter.registerInlineObjectMatcher(o=>o.name==e.view&&o.isEmpty&&Array.from(o.getAttributeKeys()).length?{name:!0}:null),s.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:PM(e,!0)}),s.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:PM(e)})}}}function DM(n,e,t){const i=e.matchAll(n)||[],s=n.document.stylesProcessor;return i.reduce((r,{match:o})=>{for(const[a,c]of o.attributes||[])if(a=="style"){const d=c,h=s.getRelatedStyles(d).filter(m=>m.split("-").length>d.split("-").length).sort((m,p)=>p.split("-").length-m.split("-").length);for(const m of h)t.consume(n,{styles:[m]})&&r.styles.push(m);t.consume(n,{styles:[d]})&&r.styles.push(d)}else if(a=="class"){const d=c;t.consume(n,{classes:[d]})&&r.classes.push(d)}else t.consume(n,{attributes:[a]})&&r.attributes.push(a);return r},{attributes:[],classes:[],styles:[]})}function E1e(n,{attributes:e,classes:t,styles:i}){return!e.length&&!t.length&&!i.length?null:{...e.length&&{attributes:S1e(n,e)},...i.length&&{styles:T1e(n,i)},...t.length&&{classes:t}}}function S1e(n,e){const t={};for(const i of e){const s=n.getAttribute(i);s!==void 0&&p6(i)&&(t[i]=s)}return t}function T1e(n,e){const t=new rd(n.document.stylesProcessor);for(const i of e){const s=n.getStyle(i);s!==void 0&&t.set(i,s)}return Object.fromEntries(t.getStylesEntries())}function n1(n,e){const{name:t}=n,i=n[e];return pr(i)?Object.entries(i).map(([s,r])=>({name:t,[e]:{[s]:r}})):Array.isArray(i)?i.map(s=>({name:t,[e]:[s]})):[n]}function MM(n){const{name:e,attributes:t,classes:i,styles:s}=n,r=[];return t&&r.push(...n1({name:e,attributes:t},"attributes")),i&&r.push(...n1({name:e,classes:i},"classes")),s&&r.push(...n1({name:e,styles:s},"styles")),r}class I1e extends z{static get requires(){return[bn]}static get pluginName(){return"CodeBlockElementSupport"}static get isOfficialPlugin(){return!0}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;const e=this.editor.plugins.get(bn);e.on("register:pre",(t,i)=>{if(i.model!=="codeBlock")return;const s=this.editor,r=s.model.schema,o=s.conversion;r.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),o.for("upcast").add(R1e(e)),o.for("downcast").add(P1e()),t.stop()})}}function R1e(n){return e=>{e.on("element:code",(t,i,s)=>{const r=i.viewItem,o=r.parent;if(!o||!o.is("element","pre"))return;a(o,"htmlPreAttributes"),a(r,"htmlContentAttributes");function a(c,d){const h=n.processViewAttributes(c,s);h&&s.writer.setAttribute(d,h,i.modelRange)}},{priority:"low"})}}function P1e(){return n=>{n.on("attribute:htmlPreAttributes:codeBlock",(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;const{attributeOldValue:s,attributeNewValue:r}=t,a=i.mapper.toViewElement(t.item).parent;Jr(i.writer,s,r,a)}),n.on("attribute:htmlContentAttributes:codeBlock",(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;const{attributeOldValue:s,attributeNewValue:r}=t,o=i.mapper.toViewElement(t.item);Jr(i.writer,s,r,o)})}}class O1e extends z{static get requires(){return[bn]}static get pluginName(){return"DualContentModelElementSupport"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(bn).on("register",(t,i)=>{const s=i,r=this.editor,o=r.model.schema,a=r.conversion;if(!s.paragraphLikeModel||o.isRegistered(s.model)||o.isRegistered(s.paragraphLikeModel))return;const c={model:s.paragraphLikeModel,view:s.view};o.register(s.model,s.modelSchema),o.register(c.model,{inheritAllFrom:"$block"}),a.for("upcast").elementToElement({view:s.view,model:(d,{writer:h})=>this._hasBlockContent(d)?h.createElement(s.model):h.createElement(c.model),converterPriority:rs.low+.5}),a.for("downcast").elementToElement({view:s.view,model:s.model}),this._addAttributeConversion(s),a.for("downcast").elementToElement({view:c.view,model:c.model}),this._addAttributeConversion(c),t.stop()})}_hasBlockContent(e){const t=this.editor.editing.view,i=t.domConverter.blockElements;for(const s of t.createRangeIn(e).getItems())if(s.is("element")&&i.includes(s.name))return!0;return!1}_addAttributeConversion(e){const t=this.editor,i=t.conversion,s=t.plugins.get(bn);t.model.schema.extend(e.model,{allowAttributes:Qs(e.view)}),i.for("upcast").add(xd(e,s)),i.for("downcast").add(cm(e))}}class D1e extends z{static get requires(){return[kd,Hm]}static get pluginName(){return"HeadingElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("HeadingEditing"))return;const t=e.config.get("heading.options");this.registerHeadingElements(e,t)}registerHeadingElements(e,t){const i=e.plugins.get(kd),s=[];for(const r of t)"model"in r&&"view"in r&&(i.registerBlockElement({view:r.view,model:r.model}),s.push(r.model));i.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:s}}),i.extendBlockElement({model:"htmlSummary",modelSchema:{allowChildren:s}})}}function um(n,e,t){const i=n.createRangeOn(e);for(const{item:s}of i.getWalker())if(s.is("element",t))return s}class M1e extends z{static get requires(){return[bn]}static get pluginName(){return"ImageElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("ImageInlineEditing")&&!e.plugins.has("ImageBlockEditing"))return;const t=e.model.schema,i=e.conversion,s=e.plugins.get(bn);s.on("register:figure",()=>{i.for("upcast").add(V1e(s))}),s.on("register:img",(r,o)=>{o.model!=="imageBlock"&&o.model!=="imageInline"||(t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),i.for("upcast").add(B1e(s)),i.for("downcast").add(L1e()),e.plugins.has("LinkImage")&&i.for("upcast").add(N1e(s,e)),r.stop())})}}function B1e(n){return e=>{e.on("element:img",(t,i,s)=>{if(!i.modelRange)return;const r=i.viewItem,o=n.processViewAttributes(r,s);o&&s.writer.setAttribute("htmlImgAttributes",o,i.modelRange)},{priority:"low"})}}function N1e(n,e){const t=e.plugins.get("ImageUtils");return i=>{i.on("element:a",(s,r,o)=>{const a=r.viewItem;if(!t.findViewImgElement(a))return;const d=r.modelCursor.parent;if(!d.is("element","imageBlock"))return;const h=n.processViewAttributes(a,o);h&&o.writer.setAttribute("htmlLinkAttributes",h,d)},{priority:"low"})}}function V1e(n){return e=>{e.on("element:figure",(t,i,s)=>{const r=i.viewItem;if(!i.modelRange||!r.hasClass("image"))return;const o=n.processViewAttributes(r,s);o&&s.writer.setAttribute("htmlFigureAttributes",o,i.modelRange)},{priority:"low"})}}function L1e(){return n=>{e("htmlImgAttributes"),t("img","htmlImgAttributes"),t("figure","htmlFigureAttributes"),t("a","htmlLinkAttributes");function e(i){n.on(`attribute:${i}:imageInline`,(s,r,o)=>{if(!o.consumable.consume(r.item,s.name))return;const{attributeOldValue:a,attributeNewValue:c}=r,d=o.mapper.toViewElement(r.item);Jr(o.writer,a,c,d)},{priority:"low"})}function t(i,s){n.on(`attribute:${s}:imageBlock`,(r,o,a)=>{if(!a.consumable.test(o.item,r.name))return;const{attributeOldValue:c,attributeNewValue:d}=o,h=a.mapper.toViewElement(o.item),m=um(a.writer,h,i);m&&(Jr(a.writer,c,d,m),a.consumable.consume(o.item,r.name))},{priority:"low"}),i==="a"&&n.on("attribute:linkHref:imageBlock",(r,o,a)=>{if(!a.consumable.consume(o.item,"attribute:htmlLinkAttributes:imageBlock"))return;const c=a.mapper.toViewElement(o.item),d=um(a.writer,c,"a");Xr(a.writer,o.item.getAttribute("htmlLinkAttributes"),d)},{priority:"low"})}}}class F1e extends z{static get requires(){return[bn]}static get pluginName(){return"MediaEmbedElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("MediaEmbed")||e.config.get("mediaEmbed.previewsInData"))return;const t=e.model.schema,i=e.conversion,s=this.editor.plugins.get(bn),r=this.editor.plugins.get(kd),o=e.config.get("mediaEmbed.elementName");r.registerBlockElement({model:"media",view:o}),s.on("register:figure",()=>{i.for("upcast").add(j1e(s))}),s.on(`register:${o}`,(a,c)=>{c.model==="media"&&(t.extend("media",{allowAttributes:[Qs(o),"htmlFigureAttributes"]}),i.for("upcast").add(z1e(s,o)),i.for("dataDowncast").add(U1e(o)),a.stop())})}}function z1e(n,e){const t=(i,s,r)=>{const o=s.viewItem;a(o,Qs(e));function a(c,d){const h=n.processViewAttributes(c,r);h&&r.writer.setAttribute(d,h,s.modelRange)}};return i=>{i.on(`element:${e}`,t,{priority:"low"})}}function j1e(n){return e=>{e.on("element:figure",(t,i,s)=>{const r=i.viewItem;if(!i.modelRange||!r.hasClass("media"))return;const o=n.processViewAttributes(r,s);o&&s.writer.setAttribute("htmlFigureAttributes",o,i.modelRange)},{priority:"low"})}}function U1e(n){return e=>{t(n,Qs(n)),t("figure","htmlFigureAttributes");function t(i,s){e.on(`attribute:${s}:media`,(r,o,a)=>{if(!a.consumable.consume(o.item,r.name))return;const{attributeOldValue:c,attributeNewValue:d}=o,h=a.mapper.toViewElement(o.item),m=um(a.writer,h,i);Jr(a.writer,c,d,m)})}}}class H1e extends z{static get requires(){return[bn]}static get pluginName(){return"ScriptElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.plugins.get(bn);e.on("register:script",(t,i)=>{const s=this.editor,r=s.model.schema,o=s.conversion;r.register("htmlScript",i.modelSchema),r.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),s.data.registerRawContentMatcher({name:"script"}),o.for("upcast").elementToElement({view:"script",model:aS(i)}),o.for("upcast").add(xd(i,e)),o.for("downcast").elementToElement({model:"htmlScript",view:(a,{writer:c})=>py("script",a,c)}),o.for("downcast").add(cm(i)),t.stop()})}}const W1e=["width","max-width","min-width","height","min-height","max-height"];class $1e extends z{static get requires(){return[bn]}static get pluginName(){return"TableElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("TableEditing"))return;const t=e.model.schema,i=e.conversion,s=e.plugins.get(bn),r=e.plugins.get("TableUtils");s.on("register:figure",()=>{i.for("upcast").add(K1e(s))}),s.on("register:table",(o,a)=>{a.model==="table"&&(t.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),i.for("upcast").add(Y1e(s)),i.for("downcast").add(q1e()),e.model.document.registerPostFixer(G1e(e.model,r)),o.stop())})}}function G1e(n,e){return t=>{const i=n.document.differ.getChanges();let s=!1;for(const r of i){if(r.type!="attribute"||r.attributeKey!="headingRows")continue;const o=r.range.start.nodeAfter,a=o.getAttribute("htmlTheadAttributes"),c=o.getAttribute("htmlTbodyAttributes");a&&!r.attributeNewValue?(t.removeAttribute("htmlTheadAttributes",o),s=!0):c&&r.attributeNewValue==e.getRows(o)&&(t.removeAttribute("htmlTbodyAttributes",o),s=!0)}return s}}function Y1e(n){return e=>{e.on("element:table",(t,i,s)=>{if(!i.modelRange)return;const r=i.viewItem;s.consumable.consume(r,{classes:"table"}),o(r,"htmlTableAttributes");for(const a of r.getChildren())a.is("element","thead")&&o(a,"htmlTheadAttributes"),a.is("element","tbody")&&o(a,"htmlTbodyAttributes");function o(a,c){const d=n.processViewAttributes(a,s);d&&s.writer.setAttribute(c,d,i.modelRange)}},{priority:"low"})}}function K1e(n){return e=>{e.on("element:figure",(t,i,s)=>{const r=i.viewItem;if(!i.modelRange||!r.hasClass("table"))return;const o=n.processViewAttributes(r,s);o&&s.writer.setAttribute("htmlFigureAttributes",o,i.modelRange)},{priority:"low"})}}function q1e(){return n=>{e("table","htmlTableAttributes"),e("figure","htmlFigureAttributes"),e("thead","htmlTheadAttributes"),e("tbody","htmlTbodyAttributes");function e(t,i){n.on(`attribute:${i}:table`,(s,r,o)=>{if(!o.consumable.test(r.item,s.name))return;const a=o.mapper.toViewElement(r.item),c=um(o.writer,a,t);if(c)if(o.consumable.consume(r.item,s.name),i==="htmlTableAttributes"&&a!==c){const d=BM(r.attributeOldValue),h=BM(r.attributeNewValue);Jr(o.writer,d.tableAttributes,h.tableAttributes,c),Jr(o.writer,d.figureAttributes,h.figureAttributes,a)}else Jr(o.writer,r.attributeOldValue,r.attributeNewValue,c)})}}}function BM(n){const e={},t={...n};if(!n||!("styles"in n))return{figureAttributes:e,tableAttributes:t};t.styles={};for(const[i,s]of Object.entries(n.styles))W1e.includes(i)?e.styles={...e.styles,[i]:s}:t.styles={...t.styles,[i]:s};return{figureAttributes:e,tableAttributes:t}}class Q1e extends z{static get requires(){return[bn]}static get pluginName(){return"StyleElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.plugins.get(bn);e.on("register:style",(t,i)=>{const s=this.editor,r=s.model.schema,o=s.conversion;r.register("htmlStyle",i.modelSchema),r.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),s.data.registerRawContentMatcher({name:"style"}),o.for("upcast").elementToElement({view:"style",model:aS(i)}),o.for("upcast").add(xd(i,e)),o.for("downcast").elementToElement({model:"htmlStyle",view:(a,{writer:c})=>py("style",a,c)}),o.for("downcast").add(cm(i)),t.stop()})}}class Z1e extends z{static get requires(){return[bn]}static get pluginName(){return"ListElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("ListEditing"))return;const t=e.model.schema,i=e.conversion,s=e.plugins.get(bn),r=e.plugins.get("ListEditing"),o=e.plugins.get("ListUtils"),a=["ul","ol","li"];r.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:Xr}),r.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:Xr}),r.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:Xr}),s.on("register",(c,d)=>{if(!a.includes(d.view)||(c.stop(),t.checkAttribute("$block","htmlLiAttributes")))return;const h=a.map(m=>Qs(m));t.extend("$listItem",{allowAttributes:h}),i.for("upcast").add(m=>{m.on("element:ul",i1("htmlUlAttributes",s),{priority:"low"}),m.on("element:ol",i1("htmlOlAttributes",s),{priority:"low"}),m.on("element:li",i1("htmlLiAttributes",s),{priority:"low"})})}),r.on("postFixer",(c,{listNodes:d,writer:h})=>{for(const{node:m,previousNodeInList:p}of d)if(p){if(p.getAttribute("listType")==m.getAttribute("listType")){const w=NM(p.getAttribute("listType")),A=p.getAttribute(w);!yd(m.getAttribute(w),A)&&h.model.schema.checkAttribute(m,w)&&(h.setAttribute(w,A,m),c.return=!0)}if(p.getAttribute("listItemId")==m.getAttribute("listItemId")){const w=p.getAttribute("htmlLiAttributes");!yd(m.getAttribute("htmlLiAttributes"),w)&&h.model.schema.checkAttribute(m,"htmlLiAttributes")&&(h.setAttribute("htmlLiAttributes",w,m),c.return=!0)}}}),r.on("postFixer",(c,{listNodes:d,writer:h})=>{for(const{node:m}of d){const p=m.getAttribute("listType");!o.isNumberedListType(p)&&m.getAttribute("htmlOlAttributes")&&(h.removeAttribute("htmlOlAttributes",m),c.return=!0),o.isNumberedListType(p)&&m.getAttribute("htmlUlAttributes")&&(h.removeAttribute("htmlUlAttributes",m),c.return=!0)}})}afterInit(){const e=this.editor;if(!e.commands.get("indentList"))return;const t=e.commands.get("indentList");this.listenTo(t,"afterExecute",(i,s)=>{e.model.change(r=>{for(const o of s){const a=NM(o.getAttribute("listType"));e.model.schema.checkAttribute(o,a)&&r.setAttribute(a,{},o)}})})}}function i1(n,e){return(t,i,s)=>{const r=i.viewItem;i.modelRange||Object.assign(i,s.convertChildren(i.viewItem,i.modelCursor));const o=e.processViewAttributes(r,s);for(const a of i.modelRange.getItems({shallow:!0}))a.hasAttribute("listItemId")&&(a.hasAttribute("htmlUlAttributes")||a.hasAttribute("htmlOlAttributes")||s.writer.model.schema.checkAttribute(a,n)&&s.writer.setAttribute(n,o||{},a))}}function NM(n){return n==="numbered"||n=="customNumbered"?"htmlOlAttributes":"htmlUlAttributes"}class J1e extends z{static get requires(){return[bn]}static get pluginName(){return"HorizontalLineElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("HorizontalLineEditing"))return;const t=e.model.schema,i=e.conversion,s=e.plugins.get(bn);s.on("register:hr",(r,o)=>{o.model==="horizontalLine"&&(t.extend("horizontalLine",{allowAttributes:["htmlHrAttributes"]}),i.for("upcast").add(xd(o,s)),i.for("downcast").add(X1e()),r.stop())})}}function X1e(){return n=>{n.on("attribute:htmlHrAttributes:horizontalLine",(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;const{attributeOldValue:s,attributeNewValue:r}=t,o=i.mapper.toViewElement(t.item),a=um(i.writer,o,"hr");a&&(Jr(i.writer,s,r,a),i.consumable.consume(t.item,e.name))},{priority:"low"})}}class eCe extends z{static get requires(){return[bn,kd]}static get pluginName(){return"CustomElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.plugins.get(bn),t=this.editor.plugins.get(kd);e.on("register:$customElement",(i,s)=>{i.stop();const r=this.editor,o=r.model.schema,a=r.conversion,c=r.editing.view.domConverter.unsafeElements,d=r.data.htmlProcessor.domConverter.preElements;o.register(s.model,s.modelSchema),o.extend(s.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),r.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),a.for("upcast").elementToElement({view:/.*/,model:(h,m)=>{if(h.name=="$comment")return null;if(!tCe(h.name)||t.getDefinitionsForView(h.name).size)return null;c.includes(h.name)||c.push(h.name),d.includes(h.name)||d.push(h.name);const p=m.writer.createElement(s.model,{htmlElementName:h.name}),w=e.processViewAttributes(h,m);w&&m.writer.setAttribute("htmlCustomElementAttributes",w,p);let A;if(h.is("element","template")&&h.getCustomProperty("$rawContent"))A=h.getCustomProperty("$rawContent");else{const k=new sr(h.document).createDocumentFragment(h),E=r.data.htmlProcessor.domConverter.viewToDom(k),S=E.firstChild;for(;S.firstChild;)E.appendChild(S.firstChild);S.remove(),A=r.data.htmlProcessor.htmlWriter.getHtml(E)}m.writer.setAttribute("htmlContent",A,p);for(const{item:C}of r.editing.view.createRangeIn(h))m.consumable.consume(C,{name:!0});return p},converterPriority:"low"}),a.for("editingDowncast").elementToElement({model:{name:s.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(h,{writer:m})=>{const p=h.getAttribute("htmlElementName"),w=m.createRawElement(p);return h.hasAttribute("htmlCustomElementAttributes")&&Xr(m,h.getAttribute("htmlCustomElementAttributes"),w),w}}),a.for("dataDowncast").elementToElement({model:{name:s.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(h,{writer:m})=>{const p=h.getAttribute("htmlElementName"),w=h.getAttribute("htmlContent"),A=m.createRawElement(p,null,(C,k)=>{k.setContentOf(C,w)});return h.hasAttribute("htmlCustomElementAttributes")&&Xr(m,h.getAttribute("htmlCustomElementAttributes"),A),A}})})}}function tCe(n){try{document.createElement(n)}catch{return!1}return!0}class nCe extends z{static get pluginName(){return"GeneralHtmlSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[bn,I1e,O1e,D1e,M1e,F1e,H1e,$1e,Q1e,Z1e,J1e,eCe]}init(){const e=this.editor,t=e.plugins.get(bn);t.loadAllowedEmptyElementsConfig(e.config.get("htmlSupport.allowEmpty")||[]),t.loadAllowedConfig(e.config.get("htmlSupport.allow")||[]),t.loadDisallowedConfig(e.config.get("htmlSupport.disallow")||[])}afterInit(){this.editor.commands.get("removeFormat")?.registerCustomAttribute(t=>t.startsWith("html")&&t.endsWith("Attributes"),y1e)}getGhsAttributeNameForElement(e){const t=this.editor.plugins.get("DataSchema"),i=Array.from(t.getDefinitionsForView(e,!1)),s=i.find(r=>r.isInline&&!i[0].isObject);return s?s.model:Qs(e)}addModelHtmlClass(e,t,i){const s=this.editor.model,r=this.getGhsAttributeNameForElement(e);s.change(o=>{for(const a of Nu(s,i,r))Bu(o,a,r,"classes",c=>{for(const d of yt(t))c.add(d)})})}removeModelHtmlClass(e,t,i){const s=this.editor.model,r=this.getGhsAttributeNameForElement(e);s.change(o=>{for(const a of Nu(s,i,r))Bu(o,a,r,"classes",c=>{for(const d of yt(t))c.delete(d)})})}setModelHtmlAttributes(e,t,i){const s=this.editor.model,r=this.getGhsAttributeNameForElement(e);s.change(o=>{for(const a of Nu(s,i,r))Bu(o,a,r,"attributes",c=>{for(const[d,h]of Object.entries(t))c.set(d,h)})})}removeModelHtmlAttributes(e,t,i){const s=this.editor.model,r=this.getGhsAttributeNameForElement(e);s.change(o=>{for(const a of Nu(s,i,r))Bu(o,a,r,"attributes",c=>{for(const d of yt(t))c.delete(d)})})}setModelHtmlStyles(e,t,i){const s=this.editor.model,r=this.getGhsAttributeNameForElement(e);s.change(o=>{for(const a of Nu(s,i,r))Bu(o,a,r,"styles",c=>{for(const[d,h]of Object.entries(t))c.set(d,h)})})}removeModelHtmlStyles(e,t,i){const s=this.editor.model,r=this.getGhsAttributeNameForElement(e);s.change(o=>{for(const a of Nu(s,i,r))Bu(o,a,r,"styles",c=>{for(const d of yt(t))c.delete(d)})})}}function*Nu(n,e,t){if(e)if(!(Symbol.iterator in e)&&e.is("documentSelection")&&e.isCollapsed)n.schema.checkAttributeInSelection(e,t)&&(yield e);else for(const i of iCe(n,e,t))yield*i.getItems({shallow:!0})}function iCe(n,e,t){return!(Symbol.iterator in e)&&(e.is("node")||e.is("$text")||e.is("$textProxy"))?n.schema.checkAttribute(e,t)?[n.createRangeOn(e)]:[]:n.schema.getValidRanges(n.createSelection(e).getRanges(),t)}class sCe extends z{static get pluginName(){return"HtmlComment"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=new Map;e.data.processor.skipComments=!1,e.model.schema.addAttributeCheck((i,s)=>{if(i.endsWith("$root")&&s.startsWith("$comment"))return!0}),e.conversion.for("upcast").elementToMarker({view:"$comment",model:i=>{const r=`$comment:${li()}`,o=i.getCustomProperty("$rawContent");return t.set(r,o),r}}),e.conversion.for("dataDowncast").markerToElement({model:"$comment",view:(i,{writer:s})=>{let r;for(const d of this.editor.model.document.getRootNames())if(r=this.editor.model.document.getRoot(d),r.hasAttribute(i.markerName))break;const o=i.markerName,a=r.getAttribute(o),c=s.createUIElement("$comment");return s.setCustomProperty("$rawContent",a,c),c}}),e.model.document.registerPostFixer(i=>{let s=!1;const r=e.model.document.differ.getChangedMarkers().filter(o=>o.name.startsWith("$comment:"));for(const o of r){const{oldRange:a,newRange:c}=o.data;if(!(a&&c&&a.root==c.root)){if(a){const d=a.root;d.hasAttribute(o.name)&&(i.removeAttribute(o.name,d),s=!0)}if(c){const d=c.root;d.rootName=="$graveyard"?(i.removeMarker(o.name),s=!0):d.hasAttribute(o.name)||(i.setAttribute(o.name,t.get(o.name)||"",d),s=!0)}}}return s}),e.data.on("set",()=>{for(const i of e.model.markers.getMarkersGroup("$comment"))this.removeHtmlComment(i.name)},{priority:"high"}),e.model.on("deleteContent",(i,[s])=>{for(const r of s.getRanges()){const o=e.model.schema.getLimitElement(r),a=e.model.createPositionAt(o,0),c=e.model.createPositionAt(o,"end");let d;a.isTouching(r.start)&&c.isTouching(r.end)?d=this.getHtmlCommentsInRange(e.model.createRange(a,c)):d=this.getHtmlCommentsInRange(r,{skipBoundaries:!0});for(const h of d)this.removeHtmlComment(h)}},{priority:"high"})}createHtmlComment(e,t){const i=li(),r=this.editor.model,o=r.document.getRoot(e.root.rootName),a=`$comment:${i}`;return r.change(c=>{const d=c.createRange(e);return c.addMarker(a,{usingOperation:!0,affectsData:!0,range:d}),c.setAttribute(a,t,o),a})}removeHtmlComment(e){const t=this.editor,i=t.model.markers.get(e);return i?(t.model.change(s=>{s.removeMarker(i)}),!0):!1}getHtmlCommentData(e){const i=this.editor.model.markers.get(e);if(!i)return null;let s="";for(const r of this.editor.model.document.getRoots())if(r.hasAttribute(e)){s=r.getAttribute(e);break}return{content:s,position:i.getStart()}}getHtmlCommentsInRange(e,{skipBoundaries:t=!1}={}){const i=!t;return Array.from(this.editor.model.markers.getMarkersGroup("$comment")).filter(r=>s(r,e)).map(r=>r.name);function s(r,o){const a=r.getRange().start;return(a.isAfter(o.start)||i&&a.isEqual(o.start))&&(a.isBefore(o.end)||i&&a.isEqual(o.end))}}}class rCe extends s8{toView(e){if(!/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(e.trim().slice(0,1e4)))return super.toView(e);let t="",i="";e=e.trim().replace(/<\?xml\s[^?]*\?>/i,c=>(i=c,"")),e=e.trim().replace(/^<!DOCTYPE\s[^>]*?>/i,c=>(t=c,""));const s=this._toDom(e),r=this.domConverter.domToView(s,{skipComments:this.skipComments}),o=new sr(r.document);o.setCustomProperty("$fullPageDocument",s.ownerDocument.documentElement.outerHTML,r);const a=Array.from(s.ownerDocument.querySelectorAll("head style"));return o.setCustomProperty("$fullPageHeadStyles",a,r),t&&o.setCustomProperty("$fullPageDocType",t,r),i&&o.setCustomProperty("$fullPageXmlDeclaration",i,r),r}toData(e){let t=super.toData(e);const i=e.getCustomProperty("$fullPageDocument"),s=e.getCustomProperty("$fullPageDocType"),r=e.getCustomProperty("$fullPageXmlDeclaration");return i&&(t=i.replace(/<\/body\s*>/,t+"$&"),s&&(t=s+`
`+t),r&&(t=r+`
`+t)),t}}class oCe extends z{static get pluginName(){return"FullPage"}static get licenseFeatureCode(){return"FPH"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}constructor(e){super(e),e.config.define("htmlSupport.fullPage",{allowRenderStylesFromHead:!1,sanitizeCss:t=>(lt("css-full-page-provide-sanitize-function"),{css:t,hasChanged:!1})}),e.data.processor=new rCe(e.data.viewDocument)}init(){const e=this.editor,t=["$fullPageDocument","$fullPageDocType","$fullPageXmlDeclaration","$fullPageHeadStyles"];e.model.schema.extend("$root",{allowAttributes:t}),e.data.on("toModel",(i,[s])=>{const r=e.model.document.getRoot();e.model.change(o=>{for(const a of t){const c=s.getCustomProperty(a);c&&o.setAttribute(a,c,r)}}),VM(e)&&this._renderStylesFromHead(r)},{priority:"low"}),e.data.on("toView",(i,[s])=>{if(!s.is("rootElement"))return;const r=s,o=i.return;if(!r.hasAttribute("$fullPageDocument"))return;const a=new sr(o.document);for(const c of t){const d=r.getAttribute(c);d&&a.setCustomProperty(c,d,o)}},{priority:"low"}),e.data.on("set",()=>{const i=e.model.document.getRoot();e.model.change(s=>{for(const r of t)i.hasAttribute(r)&&s.removeAttribute(r,i)})},{priority:"high"}),e.data.on("get",(i,s)=>{s[0]||(s[0]={}),s[0].trim=!1},{priority:"high"})}destroy(){super.destroy(),VM(this.editor)&&this._removeStyleElementsFromDom()}_removeStyleElementsFromDom(){const e=Array.from(me.document.querySelectorAll(`[data-full-page-style-id="${this.editor.id}"]`));for(const t of e)t.remove()}_renderStyleElementsInDom(e){const t=this.editor,i=e.getAttribute("$fullPageHeadStyles");if(!i)return;const s=t.config.get("htmlSupport.fullPage.sanitizeCss");for(const r of i){r.setAttribute("data-full-page-style-id",t.id);const o=s(r.innerText);o.hasChanged&&(r.innerText=o.css),me.document.head.append(r)}}_renderStylesFromHead(e){this._removeStyleElementsFromDom(),this._renderStyleElementsInDom(e)}}function VM(n){return n.config.get("htmlSupport.fullPage.allowRenderStylesFromHead")}var s1={},r1={},o1={},LM;function aCe(){return LM||(LM=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){if(!t||typeof t!="object")return!1;const i=Object.getPrototypeOf(t);return i===null||i===Object.prototype||Object.getPrototypeOf(i)===null?Object.prototype.toString.call(t)==="[object Object]":!1}n.isPlainObject=e})(o1)),o1}var a1={},FM;function lCe(){return FM||(FM=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return Object.getOwnPropertySymbols(t).filter(i=>Object.prototype.propertyIsEnumerable.call(t,i))}n.getSymbols=e})(a1)),a1}var l1={},zM;function cCe(){return zM||(zM=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}n.getTag=e})(l1)),l1}var c1={},jM;function uCe(){return jM||(jM=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",t="[object String]",i="[object Number]",s="[object Boolean]",r="[object Arguments]",o="[object Symbol]",a="[object Date]",c="[object Map]",d="[object Set]",h="[object Array]",m="[object Function]",p="[object ArrayBuffer]",w="[object Object]",A="[object Error]",C="[object DataView]",k="[object Uint8Array]",E="[object Uint8ClampedArray]",S="[object Uint16Array]",I="[object Uint32Array]",R="[object BigUint64Array]",O="[object Int8Array]",U="[object Int16Array]",P="[object Int32Array]",V="[object BigInt64Array]",H="[object Float32Array]",ie="[object Float64Array]";n.argumentsTag=r,n.arrayBufferTag=p,n.arrayTag=h,n.bigInt64ArrayTag=V,n.bigUint64ArrayTag=R,n.booleanTag=s,n.dataViewTag=C,n.dateTag=a,n.errorTag=A,n.float32ArrayTag=H,n.float64ArrayTag=ie,n.functionTag=m,n.int16ArrayTag=U,n.int32ArrayTag=P,n.int8ArrayTag=O,n.mapTag=c,n.numberTag=i,n.objectTag=w,n.regexpTag=e,n.setTag=d,n.stringTag=t,n.symbolTag=o,n.uint16ArrayTag=S,n.uint32ArrayTag=I,n.uint8ArrayTag=k,n.uint8ClampedArrayTag=E})(c1)),c1}var u1={},UM;function dCe(){return UM||(UM=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(t,i){return t===i||Number.isNaN(t)&&Number.isNaN(i)}n.eq=e})(u1)),u1}var HM;function fCe(){return HM||(HM=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=aCe(),t=lCe(),i=cCe(),s=uCe(),r=dCe();function o(d,h,m){return a(d,h,void 0,void 0,void 0,void 0,m)}function a(d,h,m,p,w,A,C){const k=C(d,h,m,p,w,A);if(k!==void 0)return k;if(typeof d==typeof h)switch(typeof d){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return d===h;case"number":return d===h||Object.is(d,h);case"function":return d===h;case"object":return c(d,h,A,C)}return c(d,h,A,C)}function c(d,h,m,p){if(Object.is(d,h))return!0;let w=i.getTag(d),A=i.getTag(h);if(w===s.argumentsTag&&(w=s.objectTag),A===s.argumentsTag&&(A=s.objectTag),w!==A)return!1;switch(w){case s.stringTag:return d.toString()===h.toString();case s.numberTag:{const E=d.valueOf(),S=h.valueOf();return r.eq(E,S)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(d.valueOf(),h.valueOf());case s.regexpTag:return d.source===h.source&&d.flags===h.flags;case s.functionTag:return d===h}m=m??new Map;const C=m.get(d),k=m.get(h);if(C!=null&&k!=null)return C===h;m.set(d,h),m.set(h,d);try{switch(w){case s.mapTag:{if(d.size!==h.size)return!1;for(const[E,S]of d.entries())if(!h.has(E)||!a(S,h.get(E),E,d,h,m,p))return!1;return!0}case s.setTag:{if(d.size!==h.size)return!1;const E=Array.from(d.values()),S=Array.from(h.values());for(let I=0;I<E.length;I++){const R=E[I],O=S.findIndex(U=>a(R,U,void 0,d,h,m,p));if(O===-1)return!1;S.splice(O,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(d)!==Buffer.isBuffer(h)||d.length!==h.length)return!1;for(let E=0;E<d.length;E++)if(!a(d[E],h[E],E,d,h,m,p))return!1;return!0}case s.arrayBufferTag:return d.byteLength!==h.byteLength?!1:c(new Uint8Array(d),new Uint8Array(h),m,p);case s.dataViewTag:return d.byteLength!==h.byteLength||d.byteOffset!==h.byteOffset?!1:c(new Uint8Array(d),new Uint8Array(h),m,p);case s.errorTag:return d.name===h.name&&d.message===h.message;case s.objectTag:{if(!(c(d.constructor,h.constructor,m,p)||e.isPlainObject(d)&&e.isPlainObject(h)))return!1;const S=[...Object.keys(d),...t.getSymbols(d)],I=[...Object.keys(h),...t.getSymbols(h)];if(S.length!==I.length)return!1;for(let R=0;R<S.length;R++){const O=S[R],U=d[O];if(!Object.hasOwn(h,O))return!1;const P=h[O];if(!a(U,P,O,d,h,m,p))return!1}return!0}default:return!1}}finally{m.delete(d),m.delete(h)}}n.isEqualWith=o})(r1)),r1}var d1={},WM;function hCe(){return WM||(WM=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});function e(){}n.noop=e})(d1)),d1}var $M;function mCe(){return $M||($M=1,(function(n){Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});const e=fCe(),t=hCe();function i(s,r){return e.isEqualWith(s,r,t.noop)}n.isEqual=i})(s1)),s1}var f1,GM;function gCe(){return GM||(GM=1,f1=mCe().isEqual),f1}var pCe=gCe();const bCe=bc(pCe);function wCe(n){return n.createContainerElement("span",{class:"image-inline"},n.createEmptyElement("img"))}function YM(n){return n.createContainerElement("figure",{class:"image"},[n.createEmptyElement("img"),n.createSlot("children")])}function E7(n,e){const t=n.plugins.get("ImageUtils"),i=n.plugins.has("ImageInlineEditing")&&n.plugins.has("ImageBlockEditing");return r=>t.isInlineImageView(r)?i&&(r.getStyle("display")=="block"||r.findAncestor(t.isBlockImageView)?"imageBlock":"imageInline")!==e?null:s(r):null;function s(r){const o={name:!0};return r.hasAttribute("src")&&(o.attributes=["src"]),o}}function lS(n,e){const t=qt(e.getSelectedBlocks());return!t||n.isObject(t)||t.isEmpty&&t.name!="listItem"?"imageBlock":"imageInline"}function Ow(n){return n&&n.endsWith("px")?parseInt(n):null}function Dw(n){const e=Ow(n.getStyle("width")),t=Ow(n.getStyle("height"));return!!(e&&t)}const vCe=/^(image|image-inline)$/;class Ai extends z{_domEmitter=new(Wi());static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},t=null,i=null,s={}){const r=this.editor,o=r.model,a=o.document.selection,c=S7(r,t||a,i);e={...Object.fromEntries(a.getAttributes()),...e};for(const d in e)o.schema.checkAttribute(c,d)||delete e[d];return o.change(d=>{const{setImageSizes:h=!0}=s,m=d.createElement(c,e);return o.insertObject(m,t,null,{setSelection:"on",findOptimalPosition:!t&&c!="imageInline"?"auto":void 0}),m.parent?(h&&this.setImageNaturalSizeAttributes(m),m):null})}setImageNaturalSizeAttributes(e){const t=e.getAttribute("src");t&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(i=>{const s=new me.window.Image;this._domEmitter.listenTo(s,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(i.batch,r=>{r.setAttribute("width",s.naturalWidth,e),r.setAttribute("height",s.naturalHeight,e)}),this._domEmitter.stopListening(s,"load")}),s.src=t}))}getClosestSelectedImageWidget(e){const t=e.getFirstPosition();if(!t)return null;const i=e.getSelectedElement();if(i&&this.isImageWidget(i))return i;let s=t.parent;for(;s;){if(s.is("element")&&this.isImageWidget(s))return s;s=s.parent}return null}getClosestSelectedImageElement(e){const t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:vCe})}isImageAllowed(){const t=this.editor.model.document.selection;return yCe(this.editor,t)&&ACe(t)}toImageWidget(e,t,i){return t.setCustomProperty("image",!0,e),Tc(e,t,{label:()=>{const o=this.findViewImgElement(e).getAttribute("alt");return o?`${o} ${i}`:i}})}isImageWidget(e){return!!e.getCustomProperty("image")&&tn(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;const t=this.editor.editing.view;for(const{item:i}of t.createRangeIn(e))if(this.isInlineImageView(i))return i}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function yCe(n,e){if(S7(n,e,null)=="imageBlock"){const i=_Ce(e,n.model);if(n.model.schema.checkChild(i,"imageBlock"))return!0}else if(n.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}function ACe(n){return[...n.focus.getAncestors()].every(e=>!e.is("element","imageBlock"))}function _Ce(n,e){const i=my(n,e).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}function S7(n,e,t){const i=n.model.schema,s=n.config.get("image.insert.type");return n.plugins.has("ImageBlockEditing")?n.plugins.has("ImageInlineEditing")?t||(s==="inline"?"imageInline":s!=="auto"?"imageBlock":e.is("selection")?lS(i,e):i.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const CCe=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class xCe extends z{static get requires(){return[sS,Ai,oS,so]}static get pluginName(){return"AutoImage"}static get isOfficialPlugin(){return!0}_timeoutId;_positionToInsert;constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,t=e.model.document,i=e.plugins.get("ClipboardPipeline");this.listenTo(i,"inputTransformation",()=>{const s=t.selection.getFirstRange(),r=Xt.fromPosition(s.start);r.stickiness="toPrevious";const o=Xt.fromPosition(s.end);o.stickiness="toNext",t.once("change:data",()=>{this._embedImageBetweenPositions(r,o),r.detach(),o.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(me.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(e,t){const i=this.editor,s=new Bi(e,t),r=s.getWalker({ignoreElementEnd:!0}),o=Object.fromEntries(i.model.document.selection.getAttributes()),a=this.editor.plugins.get("ImageUtils");let c="";for(const d of r)d.item.is("$textProxy")&&(c+=d.item.data);if(c=c.trim(),!c.match(CCe)){s.detach();return}this._positionToInsert=Xt.fromPosition(e),this._timeoutId=setTimeout(()=>{if(!i.commands.get("insertImage").isEnabled){s.detach();return}i.model.change(m=>{this._timeoutId=null,m.remove(s),s.detach();let p;this._positionToInsert.root.rootName!=="$graveyard"&&(p=this._positionToInsert.toPosition()),a.insertImage({...o,src:c},p),this._positionToInsert.detach(),this._positionToInsert=null}),i.plugins.get("Delete").requestUndoOnBackspace()},100)}}class kCe extends je{refresh(){const i=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!i,this.isEnabled&&i.hasAttribute("alt")?this.value=i.getAttribute("alt"):this.value=!1}execute(e){const t=this.editor,i=t.plugins.get("ImageUtils"),s=t.model,r=i.getClosestSelectedImageElement(s.document.selection);s.change(o=>{o.setAttribute("alt",e.newValue,r)})}}class ECe extends z{static get requires(){return[Ai]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new kCe(this.editor))}}class SCe extends we{focusTracker;keystrokes;labeledInput;backButtonView;saveButtonView;children;_focusables;_focusCycler;constructor(e){super(e),this.focusTracker=new St,this.keystrokes=new Ht,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new bi(e,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new ei,this.keystrokes.set("Esc",(t,i)=>{this.fire("cancel"),i()}),this._focusCycler=new ui({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),va({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const e=this.locale.t,t=new Se(this.locale);return t.set({class:"ck-button-back",label:e("Back"),icon:ll,tooltip:!0}),t.delegate("execute").to(this,"cancel"),t}_createSaveButton(){const e=this.locale.t,t=new Se(this.locale);return t.set({label:e("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),t}_createHeaderView(){const e=this.locale.t,t=new ya(this.locale,{label:e("Text Alternative")});return t.children.add(this.backButtonView,0),t}_createLabeledInputView(){const e=this.locale.t,t=new un(this.locale,os);return t.label=e("Text alternative"),t.class="ck-labeled-field-view_full-width",t}}function TCe(n){const e=n.plugins.get("ContextualBalloon");if(n.plugins.get("ImageUtils").getClosestSelectedImageWidget(n.editing.view.document.selection)){const i=cS(n);e.updatePosition(i)}}function cS(n){const e=n.editing.view,t=rn.defaultPositions,i=n.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(i.getClosestSelectedImageWidget(e.document.selection)),positions:[t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast,t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.viewportStickyNorth]}}class ICe extends z{_balloon;_form;static get requires(){return[Rr]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",i=>{const s=e.commands.get("imageTextAlternative"),r=new Se(i);return r.set({label:t("Change image text alternative"),icon:fve,tooltip:!0}),r.bind("isEnabled").to(s,"isEnabled"),r.bind("isOn").to(s,"value",o=>!!o),this.listenTo(r,"execute",()=>{this._showForm()}),r})}_createForm(){const e=this.editor,i=e.editing.view.document,s=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Cd(SCe))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this.listenTo(e.ui,"update",()=>{s.getClosestSelectedImageWidget(i.selection)?this._isVisible&&TCe(e):this._hideForm(!0)}),_l({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const e=this.editor,t=e.commands.get("imageTextAlternative"),i=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:cS(e)}),i.fieldView.value=i.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class uS extends z{static get requires(){return[ECe,ICe]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function RCe(n){const e=(t,i,s)=>{if(!s.consumable.test(i.viewItem,{name:!0,classes:"image"}))return;const r=n.findViewImgElement(i.viewItem);if(!r||!s.consumable.test(r,{name:!0}))return;s.consumable.consume(i.viewItem,{name:!0,classes:"image"});const o=s.convertItem(r,i.modelCursor),a=qt(o.modelRange.getItems());if(!a){s.consumable.revert(i.viewItem,{name:!0,classes:"image"});return}s.convertChildren(i.viewItem,a),s.updateConversionResult(a,i)};return t=>{t.on("element:figure",e)}}function T7(n,e){const t=(i,s,r)=>{if(!r.consumable.consume(s.item,i.name))return;const o=r.writer,a=r.mapper.toViewElement(s.item),c=n.findViewImgElement(a);s.attributeNewValue===null?(o.removeAttribute("srcset",c),o.removeAttribute("sizes",c)):s.attributeNewValue&&(o.setAttribute("srcset",s.attributeNewValue,c),o.setAttribute("sizes","100vw",c))};return i=>{i.on(`attribute:srcset:${e}`,t)}}function Mw(n,e,t){const i=(s,r,o)=>{if(!o.consumable.consume(r.item,s.name))return;const a=o.writer,c=o.mapper.toViewElement(r.item),d=n.findViewImgElement(c);a.setAttribute(r.attributeKey,r.attributeNewValue||"",d)};return s=>{s.on(`attribute:${t}:${e}`,i)}}class dS extends Dr{observe(e){this.listenTo(e,"load",(t,i)=>{const s=i.target;this.checkShouldIgnoreEventFromTarget(s)||s.tagName=="IMG"&&this._fireEvents(i)},{useCapture:!0})}stopObserving(e){this.stopListening(e)}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}}class PCe extends je{constructor(e){super(e);const t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||t==="block"&&lt("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||t==="inline"&&lt("image-inline-plugin-required")}refresh(){const e=this.editor.plugins.get("ImageUtils");this.isEnabled=e.isImageAllowed()}execute(e){const t=yt(e.source),i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(i.getAttributes());t.forEach((o,a)=>{const c=i.getSelectedElement();if(typeof o=="string"&&(o={src:o}),a&&c&&s.isImage(c)){const d=this.editor.model.createPositionAfter(c);s.insertImage({...o,...r},d,e.imageType)}else e.breakBlock?s.insertImage({...o,...r},i.getFirstPosition(),e.imageType):s.insertImage({...o,...r},null,e.imageType)})}}class OCe extends je{constructor(e){super(e),this.decorate("cleanupImage")}refresh(){const t=this.editor.plugins.get("ImageUtils"),i=this.editor.model.document.selection.getSelectedElement();this.isEnabled=t.isImage(i),this.value=this.isEnabled?i.getAttribute("src"):null}execute(e){const t=this.editor.model.document.selection.getSelectedElement(),i=this.editor.plugins.get("ImageUtils");this.editor.model.change(s=>{s.setAttribute("src",e.source,t),this.cleanupImage(s,t),i.setImageNaturalSizeAttributes(t)})}cleanupImage(e,t){e.removeAttribute("srcset",t),e.removeAttribute("sizes",t),e.removeAttribute("sources",t),e.removeAttribute("width",t),e.removeAttribute("height",t),e.removeAttribute("alt",t)}}class I7 extends z{static get requires(){return[Ai]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.conversion;e.editing.view.addObserver(dS),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const i=new PCe(e),s=new OCe(e);e.commands.add("insertImage",i),e.commands.add("replaceImageSource",s),e.commands.add("imageInsert",i)}}class R7 extends z{static get requires(){return[Ai]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(e){const t=this.editor,i=t.plugins.get("ImageUtils"),s=e==="imageBlock"?"figure":"img";t.conversion.for("upcast").attributeToAttribute({view:{name:s,styles:{width:/.+/}},model:{key:"width",value:o=>Dw(o)?Ow(o.getStyle("width")):null}}).attributeToAttribute({view:{name:s,key:"width"},model:"width"}).attributeToAttribute({view:{name:s,styles:{height:/.+/}},model:{key:"height",value:o=>Dw(o)?Ow(o.getStyle("height")):null}}).attributeToAttribute({view:{name:s,key:"height"},model:"height"}),t.conversion.for("editingDowncast").add(o=>{r(o,"width","width",!0,!0),r(o,"height","height",!0,!0)}),t.conversion.for("dataDowncast").add(o=>{r(o,"width","width",!1),r(o,"height","height",!1)}),t.conversion.for("upcast").add(o=>{o.on("element:img",(a,c,d)=>{const h=c.viewItem.getAttribute("width"),m=c.viewItem.getAttribute("height");h&&m&&d.consumable.consume(c.viewItem,{styles:["aspect-ratio"]})})});function r(o,a,c,d,h=!1){o.on(`attribute:${a}:${e}`,(m,p,w)=>{if(!w.consumable.consume(p.item,m.name))return;const A=w.writer,C=w.mapper.toViewElement(p.item),k=i.findViewImgElement(C);p.attributeNewValue!==null?A.setAttribute(c,p.attributeNewValue,k):A.removeAttribute(c,k);const E=p.item.getAttribute("width"),S=p.item.getAttribute("height"),I=E&&S;if(I&&h&&A.setAttribute("loading","lazy",k),p.item.hasAttribute("sources"))return;const R=p.item.hasAttribute("resizedWidth");e==="imageInline"&&!R&&!d||I&&A.setStyle("aspect-ratio",`${E}/${S}`,k)})}}}class P7 extends je{_modelElementName;constructor(e,t){super(e),this._modelElementName=t}refresh(){const t=this.editor.plugins.get("ImageUtils"),i=t.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=t.isInlineImage(i):this.isEnabled=t.isBlockImage(i)}execute(e={}){const t=this.editor,i=this.editor.model,s=t.plugins.get("ImageUtils"),r=s.getClosestSelectedImageElement(i.document.selection),o=Object.fromEntries(r.getAttributes());return!o.src&&!o.uploadId?null:i.change(a=>{const{setImageSizes:c=!0}=e,d=Array.from(i.markers).filter(p=>p.getRange().containsItem(r)),h=s.insertImage(o,i.createSelection(r,"on"),this._modelElementName,{setImageSizes:c});if(!h)return null;const m=a.createRangeOn(h);for(const p of d){const w=p.getRange(),A=w.root.rootName!="$graveyard"?w.getJoined(m,!0):m;a.updateMarker(p,{range:A})}return{oldElement:r,newElement:h}})}}class O7 extends z{static get requires(){return[Ai]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const e=this.editor.model.schema;e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["placeholder"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const e=this.editor,t=e.conversion,i=e.plugins.get("ImageUtils");t.for("editingDowncast").add(s=>{s.on("attribute:placeholder",(r,o,a)=>{if(!a.consumable.test(o.item,r.name)||!o.item.is("element","imageBlock")&&!o.item.is("element","imageInline"))return;a.consumable.consume(o.item,r.name);const c=a.writer,d=a.mapper.toViewElement(o.item),h=i.findViewImgElement(d);o.attributeNewValue?(c.addClass("image_placeholder",h),c.setStyle("background-image",`url(${o.attributeNewValue})`,h),c.setCustomProperty("editingPipeline:doNotReuseOnce",!0,h)):(c.removeClass("image_placeholder",h),c.removeStyle("background-image",h))})})}_setupLoadListener(){const e=this.editor,t=e.model,i=e.editing,s=i.view,r=e.plugins.get("ImageUtils");s.addObserver(dS),this.listenTo(s.document,"imageLoaded",(o,a)=>{const c=s.domConverter.mapDomToView(a.target);if(!c)return;const d=r.getImageWidgetFromImageView(c);if(!d)return;const h=i.mapper.toModelElement(d);!h||!h.hasAttribute("placeholder")||t.enqueueChange({isUndoable:!1},m=>{m.removeAttribute("placeholder",h)})})}}class D7 extends z{static get requires(){return[I7,R7,Ai,O7,Ps]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new P7(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,i=e.conversion,s=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToStructure({model:"imageBlock",view:(r,{writer:o})=>YM(o)}),i.for("editingDowncast").elementToStructure({model:"imageBlock",view:(r,{writer:o})=>s.toImageWidget(YM(o),o,t("image widget"))}),i.for("downcast").add(Mw(s,"imageBlock","src")).add(Mw(s,"imageBlock","alt")).add(T7(s,"imageBlock")),i.for("upcast").elementToElement({view:E7(e,"imageBlock"),model:(r,{writer:o})=>o.createElement("imageBlock",r.hasAttribute("src")?{src:r.getAttribute("src")}:void 0)}).add(RCe(s))}_setupClipboardIntegration(){const e=this.editor,t=e.model,i=e.editing.view,s=e.plugins.get("ImageUtils"),r=e.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",(o,a)=>{const c=Array.from(a.content.getChildren());let d;if(!c.every(s.isInlineImageView))return;a.targetRanges?d=e.editing.mapper.toModelRange(a.targetRanges[0]):d=t.document.selection.getFirstRange();const h=t.createSelection(d);if(lS(t.schema,h)==="imageBlock"){const m=new sr(i.document),p=c.map(w=>m.createElement("figure",{class:"image"},w));a.content=m.createDocumentFragment(p)}}),this.listenTo(r,"contentInsertion",(o,a)=>{a.method==="paste"&&t.change(c=>{const d=c.createRangeIn(a.content);for(const h of d.getItems())h.is("element","imageBlock")&&s.setImageNaturalSizeAttributes(h)})})}}class DCe extends we{focusTracker;keystrokes;_focusables;_focusCycler;children;constructor(e,t=[]){super(e),this.focusTracker=new St,this.keystrokes=new Ht,this._focusables=new ei,this.children=this.createCollection(),this._focusCycler=new ui({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const i of t)this.children.add(i),this._focusables.add(i),i instanceof QE&&this._focusables.addMany(i.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),va({view:this});for(const t of this._focusables)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element);const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class Wm extends z{static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[Ai]}dropdownView;_integrations=new Map;constructor(e){super(e),e.config.define("image.insert.integrations",["upload","assetManager","url"])}init(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=i.isImage(t.getSelectedElement())});const s=o=>this._createToolbarComponent(o),r=o=>this._createMenuBarComponent(o);e.ui.componentFactory.add("insertImage",s),e.ui.componentFactory.add("imageInsert",s),e.ui.componentFactory.add("menuBar:insertImage",r)}registerIntegration({name:e,observable:t,buttonViewCreator:i,formViewCreator:s,menuBarButtonViewCreator:r,requiresForm:o=!1,override:a=!1}){this._integrations.has(e)&&!a&&lt("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:t,buttonViewCreator:i,menuBarButtonViewCreator:r,formViewCreator:s,requiresForm:o})}_createToolbarComponent(e){const t=this.editor,i=e.t,s=this._prepareIntegrations();if(!s.length)return null;let r;const o=s[0];if(s.length==1){if(!o.requiresForm)return o.buttonViewCreator(!0);r=o.buttonViewCreator(!0)}else{const d=o.buttonViewCreator(!1);r=new jm(e,d),r.tooltip=!0,r.bind("label").to(this,"isImageSelected",h=>i(h?"Replace image":"Insert image"))}const a=this.dropdownView=ls(e,r),c=s.map(({observable:d})=>typeof d=="function"?d():d);return a.bind("isEnabled").toMany(c,"isEnabled",(...d)=>d.some(h=>h)),a.once("change:isOpen",()=>{const d=s.flatMap(({formViewCreator:m})=>m(s.length==1)),h=new DCe(t.locale,d);a.panelView.children.add(h)}),a}_createMenuBarComponent(e){const t=e.t,i=this._prepareIntegrations();if(!i.length)return null;const s=i.flatMap(({menuBarButtonViewCreator:a})=>a(i.length==1)),r=new Zr(e),o=new am(e);r.panelView.children.add(o),r.buttonView.set({icon:Swe,label:t("Image")});for(const a of s){const c=new Um(e,r);c.children.add(a),o.items.add(c),a.delegate("execute").to(r)}return r}_prepareIntegrations(){const t=this.editor.config.get("image.insert.integrations"),i=[];if(!t.length)return lt("image-insert-integrations-not-specified"),i;for(const s of t){if(!this._integrations.has(s)){["upload","assetManager","url"].includes(s)||lt("image-insert-unknown-integration",{item:s});continue}i.push(this._integrations.get(s))}return i.length||lt("image-insert-integrations-not-registered"),i}}class MCe extends z{static get requires(){return[D7,Cl,uS,Wm]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class BCe extends z{static get requires(){return[I7,R7,Ai,O7,Ps]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new P7(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const e=this.editor,t=e.t,i=e.conversion,s=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToElement({model:"imageInline",view:(r,{writer:o})=>o.createEmptyElement("img")}),i.for("editingDowncast").elementToStructure({model:"imageInline",view:(r,{writer:o})=>s.toImageWidget(wCe(o),o,t("image widget"))}),i.for("downcast").add(Mw(s,"imageInline","src")).add(Mw(s,"imageInline","alt")).add(T7(s,"imageInline")),i.for("upcast").elementToElement({view:E7(e,"imageInline"),model:(r,{writer:o})=>o.createElement("imageInline",r.hasAttribute("src")?{src:r.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const e=this.editor,t=e.model,i=e.editing.view,s=e.plugins.get("ImageUtils"),r=e.plugins.get("ClipboardPipeline");this.listenTo(r,"inputTransformation",(o,a)=>{const c=Array.from(a.content.getChildren());let d;if(!c.every(s.isBlockImageView))return;a.targetRanges?d=e.editing.mapper.toModelRange(a.targetRanges[0]):d=t.document.selection.getFirstRange();const h=t.createSelection(d);if(lS(t.schema,h)==="imageInline"){const m=new sr(i.document),p=c.map(w=>w.childCount===1?(Array.from(w.getAttributes()).forEach(A=>m.setAttribute(...A,s.findViewImgElement(w))),w.getChild(0)):w);a.content=m.createDocumentFragment(p)}}),this.listenTo(r,"contentInsertion",(o,a)=>{a.method==="paste"&&t.change(c=>{const d=c.createRangeIn(a.content);for(const h of d.getItems())h.is("element","imageInline")&&s.setImageNaturalSizeAttributes(h)})})}}class NCe extends z{static get requires(){return[BCe,Cl,uS,Wm]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class M7 extends z{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[Ai]}getCaptionFromImageModelElement(e){for(const t of e.getChildren())if(t&&t.is("element","caption"))return t;return null}getCaptionFromModelSelection(e){const t=this.editor.plugins.get("ImageUtils"),i=e.getFirstPosition().findAncestor("caption");return i&&t.isBlockImage(i.parent)?i:null}matchImageCaptionViewElement(e){const t=this.editor.plugins.get("ImageUtils");return e.name=="figcaption"&&t.isBlockImageView(e.parent)?{name:!0}:null}}class VCe extends je{refresh(){const e=this.editor,t=e.plugins.get("ImageCaptionUtils"),i=e.plugins.get("ImageUtils");if(!e.plugins.has(D7)){this.isEnabled=!1,this.value=!1;return}const s=e.model.document.selection,r=s.getSelectedElement();if(!r){const o=t.getCaptionFromModelSelection(s);this.isEnabled=!!o,this.value=!!o;return}this.isEnabled=i.isImage(r),this.isEnabled?this.value=!!t.getCaptionFromImageModelElement(r):this.value=!1}execute(e={}){const{focusCaptionOnShow:t}=e;this.editor.model.change(i=>{this.value?this._hideImageCaption(i):this._showImageCaption(i,t)})}_showImageCaption(e,t){const s=this.editor.model.document.selection,r=this.editor.plugins.get("ImageCaptionEditing"),o=this.editor.plugins.get("ImageUtils");let a=s.getSelectedElement();const c=r._getSavedCaption(a);o.isInlineImage(a)&&(this.editor.execute("imageTypeBlock"),a=s.getSelectedElement());const d=c||e.createElement("caption");e.append(d,a),t&&e.setSelection(d,"in")}_hideImageCaption(e){const t=this.editor,i=t.model.document.selection,s=t.plugins.get("ImageCaptionEditing"),r=t.plugins.get("ImageCaptionUtils");let o=i.getSelectedElement(),a;o?a=r.getCaptionFromImageModelElement(o):(a=r.getCaptionFromModelSelection(i),o=a.parent),s._saveCaption(o,a),e.setSelection(o,"on"),e.remove(a)}}class LCe extends z{static get requires(){return[Ai,M7]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}_savedCaptionsMap;constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new VCe(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils"),r=e.t;e.conversion.for("upcast").elementToElement({view:o=>s.matchImageCaptionViewElement(o),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>i.isBlockImage(o.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>{if(!i.isBlockImage(o.parent))return null;const c=a.createEditableElement("figcaption");a.setCustomProperty("imageCaption",!0,c),c.placeholder=r("Enter image caption"),iy({view:t,element:c,keepOnFocus:!0});const d=o.parent.getAttribute("alt"),h=d?r("Caption for image: %0",[d]):r("Caption for the image");return nS(c,a,{label:h})}})}_setupImageTypeCommandsIntegration(){const e=this.editor,t=e.plugins.get("ImageUtils"),i=e.plugins.get("ImageCaptionUtils"),s=e.commands.get("imageTypeInline"),r=e.commands.get("imageTypeBlock"),o=a=>{if(!a.return)return;const{oldElement:c,newElement:d}=a.return;if(!c)return;if(t.isBlockImage(c)){const m=i.getCaptionFromImageModelElement(c);if(m){this._saveCaption(d,m);return}}const h=this._getSavedCaption(c);h&&this._saveCaption(d,h)};s&&this.listenTo(s,"execute",o,{priority:"low"}),r&&this.listenTo(r,"execute",o,{priority:"low"})}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?Vt.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}_registerCaptionReconversion(){const e=this.editor,t=e.model,i=e.plugins.get("ImageUtils"),s=e.plugins.get("ImageCaptionUtils");t.document.on("change:data",()=>{const r=t.document.differ.getChanges();for(const o of r){if(o.attributeKey!=="alt")continue;const a=o.range.start.nodeAfter;if(i.isBlockImage(a)){const c=s.getCaptionFromImageModelElement(a);if(!c)return;e.editing.reconvertItem(c)}}})}}class FCe extends z{static get requires(){return[M7]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageCaptionUtils"),s=e.t;e.ui.componentFactory.add("toggleImageCaption",r=>{const o=e.commands.get("toggleImageCaption"),a=new Se(r);return a.set({icon:E8,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(o,"value","isEnabled"),a.bind("label").to(o,"value",c=>s(c?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{e.execute("toggleImageCaption",{focusCaptionOnShow:!0});const c=i.getCaptionFromModelSelection(e.model.document.selection);if(c){const d=e.editing.mapper.toViewElement(c);t.scrollToTheSelection(),t.change(h=>{h.addClass("image__caption_highlighted",d)})}e.editing.view.focus()}),a})}}class zCe extends z{static get requires(){return[LCe,FCe]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function B7(n){const e=n.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function jCe(n){return new Promise((e,t)=>{const i=n.getAttribute("src");fetch(i).then(s=>s.blob()).then(s=>{const r=N7(s,i),a=`image.${r.replace("image/","")}`,c=new File([s],a,{type:r});e(c)}).catch(s=>s&&s.name==="TypeError"?HCe(i).then(e).catch(t):t(s))})}function UCe(n,e){return!n.isInlineImageView(e)||!e.getAttribute("src")?!1:!!e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!e.getAttribute("src").match(/^blob:/g)}function N7(n,e){return n.type?n.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function HCe(n){return WCe(n).then(e=>{const t=N7(e,n),s=`image.${t.replace("image/","")}`;return new File([e],s,{type:t})})}function WCe(n){return new Promise((e,t)=>{const i=me.document.createElement("img");i.addEventListener("load",()=>{const s=me.document.createElement("canvas");s.width=i.width,s.height=i.height,s.getContext("2d").drawImage(i,0,0),s.toBlob(o=>o?e(o):t())}),i.addEventListener("error",()=>t()),i.src=n})}class $Ce extends z{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),e.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),e.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),e.plugins.has("ImageInsertUI")&&e.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>e.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("uploadImage"),r=t.config.get("image.upload.types"),o=B7(r),a=new e(t.locale),c=i.t;return a.set({acceptedType:r.map(d=>`image/${d}`).join(","),allowMultipleFiles:!0,label:c("Upload from computer"),icon:Twe}),a.bind("isEnabled").to(s),a.on("done",(d,h)=>{const m=Array.from(h).filter(p=>o.test(p.type));m.length&&(t.execute("uploadImage",{file:m}),t.editing.view.focus())}),a}_createToolbarButton(){const e=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),i=this.editor.commands.get("uploadImage"),s=this._createButton(DD);return s.tooltip=!0,s.bind("label").to(t,"isImageSelected",i,"isAccessAllowed",(r,o)=>e(o?r?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),s}_createDropdownButton(){const e=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),i=this._createButton(DD);return i.withText=!0,i.bind("label").to(t,"isImageSelected",s=>e(s?"Replace from computer":"Upload from computer")),i.on("execute",()=>{t.dropdownView.isOpen=!1}),i}_createMenuBarButton(e){const t=this.editor.locale.t,i=this._createButton(r7);switch(i.withText=!0,e){case"standalone":i.label=t("Image from computer");break;case"insertOnly":i.label=t("Image");break;case"insertNested":i.label=t("From computer");break}return i}}class GCe extends z{static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}placeholder;constructor(e){super(e),this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){const e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}uploadStatusChange=(e,t,i)=>{const s=this.editor,r=t.item,o=r.getAttribute("uploadId");if(!i.consumable.consume(t.item,e.name))return;const a=s.plugins.get("ImageUtils"),c=s.plugins.get(el),d=o?t.attributeNewValue:null,h=this.placeholder,m=s.editing.mapper.toViewElement(r),p=i.writer;if(d=="reading"){KM(m,p),qM(a,h,m,p);return}if(d=="uploading"){const w=c.loaders.get(o);KM(m,p),w?(QM(m,p),KCe(m,p,w,s.editing.view),XCe(a,m,p,w)):qM(a,h,m,p);return}d=="complete"&&c.loaders.get(o)&&QCe(m,p,s.editing.view),qCe(m,p),QM(m,p),YCe(m,p)}}function KM(n,e){n.hasClass("ck-appear")||e.addClass("ck-appear",n)}function YCe(n,e){e.removeClass("ck-appear",n)}function qM(n,e,t,i){t.hasClass("ck-image-upload-placeholder")||i.addClass("ck-image-upload-placeholder",t);const s=n.findViewImgElement(t);s.getAttribute("src")!==e&&i.setAttribute("src",e,s),V7(t,"placeholder")||i.insert(i.createPositionAfter(s),JCe(i))}function QM(n,e){n.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",n),L7(n,e,"placeholder")}function KCe(n,e,t,i){const s=ZCe(e);e.insert(e.createPositionAt(n,"end"),s),t.on("change:uploadedPercent",(r,o,a)=>{i.change(c=>{c.setStyle("width",a+"%",s)})})}function qCe(n,e){L7(n,e,"progressBar")}function QCe(n,e,t){const i=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(n,"end"),i),setTimeout(()=>{t.change(s=>s.remove(s.createRangeOn(i)))},3e3)}function ZCe(n){const e=n.createUIElement("div",{class:"ck-progress-bar"});return n.setCustomProperty("progressBar",!0,e),e}function JCe(n){const e=n.createUIElement("div",{class:"ck-upload-placeholder-loader"});return n.setCustomProperty("placeholder",!0,e),e}function V7(n,e){for(const t of n.getChildren())if(t.getCustomProperty(e))return t}function L7(n,e,t){const i=V7(n,t);i&&e.remove(e.createRangeOn(i))}function XCe(n,e,t,i){if(i.data){const s=n.findViewImgElement(e);t.setAttribute("src",i.data,s)}}class exe extends je{constructor(e){super(e),this.set("isAccessAllowed",!0)}refresh(){const e=this.editor,t=e.plugins.get("ImageUtils"),i=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(i)}execute(e){const t=yt(e.file),i=this.editor.model.document.selection,s=this.editor.plugins.get("ImageUtils"),r=Object.fromEntries(i.getAttributes());t.forEach((o,a)=>{const c=i.getSelectedElement();if(a&&c&&s.isImage(c)){const d=this.editor.model.createPositionAfter(c);this._uploadImage(o,r,d)}else this._uploadImage(o,r)})}_uploadImage(e,t,i){const s=this.editor,o=s.plugins.get(el).createLoader(e),a=s.plugins.get("ImageUtils");o&&a.insertImage({...t,uploadId:o.id},i)}}class txe extends z{static get requires(){return[el,WD,Ps,Ai]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}_uploadImageElements;_uploadedImages=new Map;constructor(e){super(e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){const e=this.editor,t=e.model.document,i=e.conversion,s=e.plugins.get(el),r=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline"),a=B7(e.config.get("image.upload.types")),c=new exe(e);e.commands.add("uploadImage",c),e.commands.add("imageUpload",c),i.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(d=>d.on("element:img",(h,m,p)=>{if(!p.consumable.test(m.viewItem,{attributes:["data-ck-upload-id"]}))return;const w=m.viewItem.getAttribute("data-ck-upload-id");if(!w)return;const[A]=Array.from(m.modelRange.getItems({shallow:!0})),C=s.loaders.get(w);A&&(p.writer.setAttribute("uploadId",w,A),p.consumable.consume(m.viewItem,{attributes:["data-ck-upload-id"]}),C&&C.data&&p.writer.setAttribute("uploadStatus",C.status,A))},{priority:"low"})),this.listenTo(e.editing.view.document,"clipboardInput",(d,h)=>{if(nxe(h.dataTransfer))return;const m=Array.from(h.dataTransfer.files).filter(w=>w?a.test(w.type):!1);if(!m.length)return;if(d.stop(),e.model.change(w=>{h.targetRanges&&w.setSelection(h.targetRanges.map(A=>e.editing.mapper.toModelRange(A))),e.execute("uploadImage",{file:m})}),!e.commands.get("uploadImage").isAccessAllowed){const w=e.plugins.get("Notification"),A=e.locale.t;w.showWarning(A("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(o,"inputTransformation",(d,h)=>{const m=Array.from(e.editing.view.createRangeIn(h.content)).map(w=>w.item).filter(w=>UCe(r,w)&&!w.getAttribute("uploadProcessed")).map(w=>({promise:jCe(w),imageElement:w}));if(!m.length)return;const p=new sr(e.editing.view.document);for(const w of m){p.setAttribute("uploadProcessed",!0,w.imageElement);const A=s.createLoader(w.promise);A&&(p.setAttribute("src","",w.imageElement),p.setAttribute("uploadId",A.id,w.imageElement))}}),e.editing.view.document.on("dragover",(d,h)=>{h.preventDefault()}),t.on("change",()=>{const d=t.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),h=new Set;for(const m of d)if(m.type=="insert"&&m.name!="$text"){const p=m.position.nodeAfter,w=m.position.root.rootName=="$graveyard";for(const A of ixe(e,p)){const C=A.getAttribute("uploadId"),k=A.getAttribute("uploadStatus");if(!C||k=="complete")continue;const E=s.loaders.get(C);if(!E){!w&&this._uploadedImages.has(C)&&e.model.enqueueChange({isUndoable:!1},S=>{S.setAttribute("uploadStatus","complete",A),this.fire("uploadComplete",{data:this._uploadedImages.get(C),imageElement:A})});continue}w?h.has(C)||Array.from(this._uploadImageElements.get(C)).every(I=>I.root.rootName=="$graveyard")&&E.abort():(h.add(C),this._uploadImageElements.has(C)?this._uploadImageElements.get(C).add(A):this._uploadImageElements.set(C,new Set([A])),E.status=="idle"&&this._readAndUpload(E))}}}),this.on("uploadComplete",(d,{imageElement:h,data:m})=>{const p=m.urls?m.urls:m;this.editor.model.change(w=>{w.setAttribute("src",p.default,h),this._parseAndSetSrcsetAttributeOnImage(p,h,w),r.setImageNaturalSizeAttributes(h)})},{priority:"low"})}afterInit(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(e){const t=this.editor,i=t.model,s=t.locale.t,r=t.plugins.get(el),o=t.plugins.get(WD),a=t.plugins.get("ImageUtils"),c=this._uploadImageElements;return i.enqueueChange({isUndoable:!1},h=>{const m=c.get(e.id);for(const p of m)h.setAttribute("uploadStatus","reading",p)}),e.read().then(()=>{const h=e.upload();t.ui&&t.ui.ariaLiveAnnouncer.announce(s("Uploading image"));for(const m of c.get(e.id)){if(Pe.isSafari){const p=t.editing.mapper.toViewElement(m),w=a.findViewImgElement(p);t.editing.view.once("render",()=>{if(!w.parent)return;const A=t.editing.view.domConverter.mapViewToDom(w.parent);if(!A)return;const C=A.style.display;A.style.display="none",A._ckHack=A.offsetHeight,A.style.display=C})}i.enqueueChange({isUndoable:!1},p=>{p.setAttribute("uploadStatus","uploading",m)})}return h}).then(h=>{i.enqueueChange({isUndoable:!1},m=>{for(const p of c.get(e.id))m.setAttribute("uploadStatus","complete",p),this.fire("uploadComplete",{data:h,imageElement:p});t.ui&&t.ui.ariaLiveAnnouncer.announce(s("Image upload complete")),this._uploadedImages.set(e.id,h)}),d()}).catch(h=>{if(t.ui&&t.ui.ariaLiveAnnouncer.announce(s("Error during image upload")),e.status!=="error"&&e.status!=="aborted")throw h;e.status=="error"&&h&&o.showWarning(h,{title:s("Upload failed"),namespace:"upload"}),i.enqueueChange({isUndoable:!1},m=>{for(const p of c.get(e.id))p.root.rootName!=="$graveyard"&&m.remove(p)}),d()});function d(){i.enqueueChange({isUndoable:!1},h=>{for(const m of c.get(e.id))h.removeAttribute("uploadId",m),h.removeAttribute("uploadStatus",m);c.delete(e.id)}),r.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,t,i){let s=0;const r=Object.keys(e).filter(o=>{const a=parseInt(o,10);if(!isNaN(a))return s=Math.max(s,a),!0}).map(o=>`${e[o]} ${o}w`).join(", ");if(r!=""){const o={srcset:r};!t.hasAttribute("width")&&!t.hasAttribute("height")&&(o.width=s),i.setAttributes(o,t)}}_registerConverters(e){const{conversion:t,plugins:i}=this.editor,s=i.get(el),r=i.get(Ai);t.for("dataDowncast").add(o=>{o.on(`attribute:uploadId:${e}`,(a,c,d)=>{if(!d.consumable.test(c.item,a.name))return;const h=s.loaders.get(c.attributeNewValue);if(!h||!h.data)return null;const m=d.mapper.toViewElement(c.item),p=r.findViewImgElement(m);p&&(d.consumable.consume(c.item,a.name),d.writer.setAttribute("data-ck-upload-id",h.id,p))})})}}function nxe(n){return Array.from(n.types).includes("text/html")&&n.getData("text/html")!==""}function ixe(n,e){const t=n.plugins.get("ImageUtils");return Array.from(n.model.createRangeOn(e)).filter(i=>t.isImage(i.item)).map(i=>i.item)}class F7 extends z{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[txe,$Ce,GCe]}}class sxe extends we{urlInputView;keystrokes;constructor(e){super(e),this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new Ht,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),va({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const e=this.locale,t=e.t,i=new un(e,os);return i.bind("label").to(this,"isImageSelected",s=>t(s?"Update image URL":"Insert image via URL")),i.bind("isEnabled").to(this),i.fieldView.inputMode="url",i.fieldView.placeholder="https://example.com/image.png",i.fieldView.bind("value").to(this,"imageURLInputValue",s=>s||""),i.fieldView.on("input",()=>{this.imageURLInputValue=i.fieldView.element.value.trim()}),i}focus(){this.urlInputView.focus()}}class rxe extends z{_imageInsertUI;_formView;static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[Wm,ns]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:e=>this._createMenuBarButton(e?"insertOnly":"insertNested")})}_createInsertUrlButton(e){const t=new e(this.editor.locale);return t.icon=Iwe,t.on("execute",()=>{this._showModal()}),t}_createToolbarButton(){const e=this.editor.locale.t,t=this._createInsertUrlButton(Se);return t.tooltip=!0,t.bind("label").to(this._imageInsertUI,"isImageSelected",i=>e(i?"Update image URL":"Insert image via URL")),t}_createDropdownButton(){const e=this.editor.locale.t,t=this._createInsertUrlButton(Se);return t.withText=!0,t.bind("label").to(this._imageInsertUI,"isImageSelected",i=>e(i?"Update image URL":"Insert via URL")),t}_createMenuBarButton(e){const t=this.editor.locale.t,i=this._createInsertUrlButton(xn);switch(i.withText=!0,e){case"standalone":i.label=t("Image via URL");break;case"insertOnly":i.label=t("Image");break;case"insertNested":i.label=t("Via URL");break}return i}_createInsertUrlView(){const e=this.editor,t=e.locale,i=e.commands.get("replaceImageSource"),s=e.commands.get("insertImage"),r=new sxe(t);return r.bind("isImageSelected").to(this._imageInsertUI),r.bind("isEnabled").toMany([s,i],"isEnabled",(...o)=>o.some(a=>a)),r}_showModal(){const e=this.editor,i=e.locale.t,s=e.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const r=e.commands.get("replaceImageSource");this._formView.imageURLInputValue=r.value||"",s.show({id:"insertImageViaUrl",title:i("Image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:i("Cancel"),withText:!0,onExecute:()=>s.hide()},{label:this._imageInsertUI.isImageSelected?i("Save"):i("Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class z7 extends z{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[rxe,Wm]}}class oxe extends z{static get pluginName(){return"ImageInsert"}static get isOfficialPlugin(){return!0}static get requires(){return[F7,z7,Wm]}}class axe extends je{refresh(){const e=this.editor,i=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!i,!i||!i.hasAttribute("resizedWidth")?this.value=null:this.value={width:i.getAttribute("resizedWidth"),height:null}}execute(e){const t=this.editor,i=t.model,s=t.plugins.get("ImageUtils"),r=s.getClosestSelectedImageElement(i.document.selection);this.value={width:e.width,height:null},r&&i.change(o=>{o.setAttribute("resizedWidth",e.width,r),o.removeAttribute("resizedHeight",r),s.setImageNaturalSizeAttributes(r)})}}class j7 extends z{static get requires(){return[Ai]}static get pluginName(){return"ImageResizeEditing"}static get licenseFeatureCode(){return"IR"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}constructor(e){super(e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const e=this.editor,t=new axe(e);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}afterInit(){this._registerSchema()}_registerSchema(){const e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(e.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),e.setAttributeProperties("resizedWidth",{isFormatting:!0}),e.setAttributeProperties("resizedHeight",{isFormatting:!0})),this.editor.plugins.has("ImageInlineEditing")&&(e.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]}),e.setAttributeProperties("resizedWidth",{isFormatting:!0}),e.setAttributeProperties("resizedHeight",{isFormatting:!0}))}_registerConverters(e){const t=this.editor,i=t.plugins.get("ImageUtils");t.conversion.for("downcast").add(s=>s.on(`attribute:resizedWidth:${e}`,(r,o,a)=>{if(!a.consumable.consume(o.item,r.name))return;const c=a.writer,d=a.mapper.toViewElement(o.item);o.attributeNewValue!==null?(c.setStyle("width",o.attributeNewValue,d),c.addClass("image_resized",d)):(c.removeStyle("width",d),c.removeClass("image_resized",d))})),t.conversion.for("dataDowncast").attributeToAttribute({model:{name:e,key:"resizedHeight"},view:s=>({key:"style",value:{height:s}})}),t.conversion.for("editingDowncast").add(s=>s.on(`attribute:resizedHeight:${e}`,(r,o,a)=>{if(!a.consumable.consume(o.item,r.name))return;const c=a.writer,d=a.mapper.toViewElement(o.item),h=e==="imageInline"?i.findViewImgElement(d):d;o.attributeNewValue!==null?c.setStyle("height",o.attributeNewValue,h):c.removeStyle("height",h)})),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:s=>Dw(s)?null:s.getStyle("width")}}),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:s=>Dw(s)?null:s.getStyle("height")}}),t.conversion.for("upcast").add(s=>{s.on(`element:${e==="imageBlock"?"figure":"img"}`,(r,o,a)=>{a.consumable.consume(o.viewItem,{classes:["image_resized"]})})})}}const h1={small:Kwe,medium:Ywe,large:Gwe,custom:Wwe,original:$we};class lxe extends z{static get requires(){return[j7]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}_resizeUnit;constructor(e){super(e),this._resizeUnit=e.config.get("image.resizeUnit")}init(){const e=this.editor,t=e.config.get("image.resizeOptions"),i=e.commands.get("resizeImage");this.bind("isEnabled").to(i);for(const s of t)this._registerImageResizeButton(s);this._registerImageResizeDropdown(t)}_registerImageResizeButton(e){const t=this.editor,{name:i,value:s,icon:r}=e;t.ui.componentFactory.add(i,o=>{const a=new Se(o),c=t.commands.get("resizeImage"),d=this._getOptionLabelValue(e,!0);if(!h1[r])throw new D("imageresizebuttons-missing-icon",t,e);if(a.set({label:d,icon:h1[r],tooltip:d,isToggleable:!0}),a.bind("isEnabled").to(this),t.plugins.has("ImageCustomResizeUI")&&th(e)){const h=t.plugins.get("ImageCustomResizeUI");this.listenTo(a,"execute",()=>{h._showForm(this._resizeUnit)})}else{const h=s?s+this._resizeUnit:null;a.bind("isOn").to(c,"value",c,"isEnabled",$C(h)),this.listenTo(a,"execute",()=>{t.execute("resizeImage",{width:h})})}return a})}_registerImageResizeDropdown(e){const t=this.editor,i=t.t,s=e.find(o=>!o.value),r=o=>{const a=t.commands.get("resizeImage"),c=ls(o,Q8),d=c.buttonView,h=i("Resize image");return d.set({tooltip:h,commandValue:s.value,icon:h1.medium,isToggleable:!0,label:this._getOptionLabelValue(s),withText:!0,class:"ck-resize-image-button",ariaLabel:h,ariaLabelledBy:void 0}),d.bind("label").to(a,"value",m=>m&&m.width?m.width:this._getOptionLabelValue(s)),c.bind("isEnabled").to(this),Sc(c,()=>this._getResizeDropdownListItemDefinitions(e,a),{ariaLabel:i("Image resize list"),role:"menu"}),this.listenTo(c,"execute",m=>{"onClick"in m.source?m.source.onClick():(t.execute(m.source.commandName,{width:m.source.commandValue}),t.editing.view.focus())}),c};t.ui.componentFactory.add("resizeImage",r),t.ui.componentFactory.add("imageResize",r)}_getOptionLabelValue(e,t=!1){const i=this.editor.t;return e.label?e.label:t?th(e)?i("Custom image size"):e.value?i("Resize image to %0",e.value+this._resizeUnit):i("Resize image to the original size"):th(e)?i("Custom"):e.value?e.value+this._resizeUnit:i("Original")}_getResizeDropdownListItemDefinitions(e,t){const{editor:i}=this,s=new Wn,r=e.map(o=>th(o)?{...o,valueWithUnits:"custom"}:o.value?{...o,valueWithUnits:`${o.value}${this._resizeUnit}`}:{...o,valueWithUnits:null});for(const o of r){let a=null;if(i.plugins.has("ImageCustomResizeUI")&&th(o)){const c=i.plugins.get("ImageCustomResizeUI");a={type:"button",model:new cl({label:this._getOptionLabelValue(o),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{c._showForm(this._resizeUnit)}})};const d=Object.values(r).map(h=>h.valueWithUnits);a.model.bind("isOn").to(t,"value",t,"isEnabled",cxe(d))}else a={type:"button",model:new cl({commandName:"resizeImage",commandValue:o.valueWithUnits,label:this._getOptionLabelValue(o),role:"menuitemradio",withText:!0,icon:null})},a.model.bind("isOn").to(t,"value",t,"isEnabled",$C(o.valueWithUnits));a.model.bind("isEnabled").to(t,"isEnabled"),s.add(a)}return s}}function th(n){return n.value==="custom"}function $C(n){return(e,t)=>{const i=e;return i===void 0||!t?!1:n===null&&i===n?!0:i!==null&&i.width===n}}function cxe(n){return(e,t)=>!n.some(i=>$C(i)(e,t))}const uxe="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",m1="image_resized";class dxe extends z{static get requires(){return[J_,Ai]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){const e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils");t.addObserver(dS),this.listenTo(t.document,"imageLoaded",(s,r)=>{if(!r.target.matches(uxe))return;const o=e.editing.view.domConverter,a=o.domToView(r.target),c=i.getImageWidgetFromImageView(a);let d=this.editor.plugins.get(J_).getResizerByViewElement(c);if(d){d.redraw();return}const h=e.editing.mapper,m=h.toModelElement(c);d=e.plugins.get(J_).attachTo({unit:e.config.get("image.resizeUnit"),modelElement:m,viewElement:c,editor:e,getHandleHost(p){return p.querySelector("img")},getResizeHost(){return o.mapViewToDom(h.toViewElement(m))},isCentered(){return m.getAttribute("imageStyle")=="alignCenter"},onCommit(p){t.change(w=>{w.removeClass(m1,c)}),e.execute("resizeImage",{width:p})}}),d.on("updateSize",()=>{c.hasClass(m1)||t.change(w=>{w.addClass(m1,c)});const p=m.name==="imageInline"?a:c;p.getStyle("height")&&t.change(w=>{w.removeStyle("height",p)})}),d.bind("isEnabled").to(this)})}}function U7(n){if(!n)return null;const[,e,t]=n.trim().match(/([.,\d]+)(%|px)$/)||[],i=Number.parseFloat(e);return Number.isNaN(i)?null:{value:i,unit:t}}function H7(n,e,t){return t==="px"?{value:e.value,unit:"px"}:{value:e.value/n*100,unit:"%"}}function W7(n){const{editing:e}=n,i=n.plugins.get("ImageUtils").getClosestSelectedImageElement(n.model.document.selection);if(!i)return null;const s=e.mapper.toViewElement(i),r=e.view.domConverter.mapViewToDom(s);return{model:i,view:s,dom:r}}function fxe(n,e){const t=W7(n);if(!t)return null;const i=U7(t.model.getAttribute("resizedWidth")||null);if(!i)return null;if(i.unit===e)return i;const s=iS(t.dom),r={value:new Le(t.dom).width};return H7(s,r,e)}class hxe extends we{focusTracker;keystrokes;unit;backButtonView;saveButtonView;labeledInput;children;_focusables;_focusCycler;_validators;constructor(e,t,i){super(e),this.focusTracker=new St,this.keystrokes=new Ht,this.unit=t,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.labeledInput=this._createLabeledInputView(),this.children=this.createCollection([this._createHeaderView()]),this.children.add(new bi(e,{children:[this.labeledInput,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding"]})),this._focusables=new ei,this._validators=i,this.keystrokes.set("Esc",(s,r)=>{this.fire("cancel"),r()}),this._focusCycler=new ui({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),va({view:this}),[this.backButtonView,this.labeledInput,this.saveButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createBackButton(){const e=this.locale.t,t=new Se(this.locale);return t.set({class:"ck-button-back",label:e("Back"),icon:ll,tooltip:!0}),t.delegate("execute").to(this,"cancel"),t}_createSaveButton(){const e=this.locale.t,t=new Se(this.locale);return t.set({label:e("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),t}_createHeaderView(){const e=this.locale.t,t=new ya(this.locale,{label:e("Image Resize")});return t.children.add(this.backButtonView,0),t}_createLabeledInputView(){const e=this.locale.t,t=new un(this.locale,e7);return t.label=e("Resize image (in %0)",this.unit),t.class="ck-labeled-field-view_full-width",t.fieldView.set({step:.1}),t}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.labeledInput.errorText=t,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:e}=this.labeledInput.fieldView;return e?e.value:null}get parsedSize(){const{rawSize:e}=this;if(e===null)return null;const t=Number.parseFloat(e);return Number.isNaN(t)?null:t}get sizeWithUnits(){const{parsedSize:e,unit:t}=this;return e===null?null:`${e}${t}`}}function mxe(n,e){const t=W7(n);if(!t)return null;const i=iS(t.dom),s=U7(window.getComputedStyle(t.dom).minWidth)||{value:1},r=Math.max(.1,H7(i,s,e).value);return{unit:e,lower:r,upper:e==="px"?i:100}}class gxe extends z{_balloon;_form;static get requires(){return[Rr]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(e){const t=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Cd(hxe))(t.locale,e,pxe(t)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(t.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{t.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),_l({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(e){if(this._isVisible)return;this._form||this._createForm(e);const t=this.editor,i=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:cS(t)});const s=fxe(t,e),r=s?s.value.toFixed(1):"",o=mxe(t,e);i.fieldView.value=i.fieldView.element.value=r,o&&Object.assign(i.fieldView,{min:o.lower.toFixed(1),max:Math.ceil(o.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function pxe(n){const e=n.t;return[t=>{if(t.rawSize.trim()==="")return e("The value must not be empty.");if(t.parsedSize===null)return e("The value should be a plain number.")}]}class bxe extends z{static get requires(){return[j7,dxe,gxe,lxe]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class wxe extends je{_defaultStyles;_styles;constructor(e,t){super(e),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(t.map(i=>{if(i.isDefault)for(const s of i.modelElements)this._defaultStyles[s]=i.name;return[i.name,i]}))}refresh(){const i=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!i,this.isEnabled?i.hasAttribute("imageStyle")?this.value=i.getAttribute("imageStyle"):this.value=this._defaultStyles[i.name]:this.value=!1}execute(e={}){const t=this.editor,i=t.model,s=t.plugins.get("ImageUtils");i.change(r=>{const o=e.value,{setImageSizes:a=!0}=e;let c=s.getClosestSelectedImageElement(i.document.selection);o&&this.shouldConvertImageType(o,c)&&(this.editor.execute(s.isBlockImage(c)?"imageTypeInline":"imageTypeBlock",{setImageSizes:a}),c=s.getClosestSelectedImageElement(i.document.selection)),!o||this._styles.get(o).isDefault?r.removeAttribute("imageStyle",c):r.setAttribute("imageStyle",o,c),a&&s.setImageNaturalSizeAttributes(c)})}shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name)}}const Eb={get inline(){return{name:"inline",title:"In line",icon:I8,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:$E,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:R8,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:kw,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:Ew,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:P8,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:kw,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:Ew,modelElements:["imageBlock"],className:"image-style-side"}}},vxe={full:Hwe,left:R8,right:P8,center:kw,inlineLeft:$E,inlineRight:Ew,inline:I8},yxe=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function Axe(n){return(n.configuredStyles.options||[]).map(i=>xxe(i)).filter(i=>kxe(i,n))}function _xe(n,e){return n&&e?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:n?{options:["block","side"]}:e?{options:["inline","alignLeft","alignRight"]}:{}}function Cxe(n){return n.has("ImageBlockEditing")&&n.has("ImageInlineEditing")?[...yxe]:[]}function xxe(n){return typeof n=="string"?Eb[n]?n={...Eb[n]}:n={name:n}:n=Exe(Eb[n.name],n),typeof n.icon=="string"&&(n.icon=vxe[n.icon]||n.icon),n}function kxe(n,{isBlockPluginLoaded:e,isInlinePluginLoaded:t}){const{modelElements:i,name:s}=n;if(!i||!i.length||!s)return $7({style:n}),!1;{const r=[e?"imageBlock":null,t?"imageInline":null];if(!i.some(o=>r.includes(o)))return lt("image-style-missing-dependency",{style:n,missingPlugins:i.map(o=>o==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function Exe(n,e){const t={...e};for(const i in n)Object.prototype.hasOwnProperty.call(e,i)||(t[i]=n[i]);return t}function $7(n){lt("image-style-configuration-definition-invalid",n)}const Bw={normalizeStyles:Axe,getDefaultStylesConfiguration:_xe,getDefaultDropdownDefinitions:Cxe,warnInvalidStyle:$7};function Sxe(n){return(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;const s=GC(t.attributeNewValue,n),r=GC(t.attributeOldValue,n),o=i.mapper.toViewElement(t.item),a=i.writer;r&&a.removeClass(r.className,o),s&&a.addClass(s.className,o)}}function Txe(n){const e={imageInline:n.filter(t=>!t.isDefault&&t.modelElements.includes("imageInline")),imageBlock:n.filter(t=>!t.isDefault&&t.modelElements.includes("imageBlock"))};return(t,i,s)=>{if(!i.modelRange)return;const r=i.viewItem,o=qt(i.modelRange.getItems());if(o&&s.schema.checkAttribute(o,"imageStyle")){for(const a of e[o.name])s.consumable.consume(r,{classes:a.className})&&s.writer.setAttribute("imageStyle",a.name,o);Ixe(s,r,o,n)}}}function Ixe(n,e,t,i){if(!n.consumable.test(e,{styles:["float"]}))return;let s=null;const r=t.is("element","imageBlock")?"Block":"";switch(e.getStyle("float")){case"left":s=`align${r}Left`;break;case"right":s=`align${r}Right`;break}if(!s)return;const o=GC(s,i);if(!o)return;const a=Eb[o.name];bCe(o,a)&&(n.writer.setAttribute("imageStyle",s,t),n.consumable.consume(e,{styles:["float"]}))}function GC(n,e){for(const t of e)if(t.name===n)return t}class G7 extends z{static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Ai]}normalizedStyles;init(){const e=this.editor,t=e.plugins.has("ImageBlockEditing"),i=e.plugins.has("ImageInlineEditing");e.config.define("image.styles",Bw.getDefaultStylesConfiguration(t,i)),this.normalizedStyles=Bw.normalizeStyles({configuredStyles:e.config.get("image.styles"),isBlockPluginLoaded:t,isInlinePluginLoaded:i}),this._setupConversion(t,i),this._setupPostFixer(),e.commands.add("imageStyle",new wxe(e,this.normalizedStyles))}_setupConversion(e,t){const i=this.editor,s=i.model.schema,r=Sxe(this.normalizedStyles),o=Txe(this.normalizedStyles);i.editing.downcastDispatcher.on("attribute:imageStyle",r),i.data.downcastDispatcher.on("attribute:imageStyle",r),e&&(s.extend("imageBlock",{allowAttributes:"imageStyle"}),s.setAttributeProperties("imageStyle",{isFormatting:!0}),i.data.upcastDispatcher.on("element:figure",o,{priority:"low"})),t&&(s.extend("imageInline",{allowAttributes:"imageStyle"}),s.setAttributeProperties("imageStyle",{isFormatting:!0}),i.data.upcastDispatcher.on("element:img",o,{priority:"low"}))}_setupPostFixer(){const e=this.editor,t=e.model.document,i=e.plugins.get(Ai),s=new Map(this.normalizedStyles.map(r=>[r.name,r]));t.registerPostFixer(r=>{let o=!1;for(const a of t.differ.getChanges())if(a.type=="insert"||a.type=="attribute"&&a.attributeKey=="imageStyle"){let c=a.type=="insert"?a.position.nodeAfter:a.range.start.nodeAfter;if(c&&c.is("element","paragraph")&&c.childCount>0&&(c=c.getChild(0)),!i.isImage(c))continue;const d=c.getAttribute("imageStyle");if(!d)continue;const h=s.get(d);(!h||!h.modelElements.includes(c.name))&&(r.removeAttribute("imageStyle",c),o=!0)}return o})}}class Rxe extends z{static get requires(){return[G7]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}init(){const e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],i=e.get("ImageStyleEditing"),s=ZM(i.normalizedStyles,this.localizedDefaultStylesTitles);for(const o of s)this._createButton(o);const r=ZM([...t.filter(Fi),...Bw.getDefaultDropdownDefinitions(e)],this.localizedDefaultStylesTitles);for(const o of r)this._createDropdown(o,s)}_createDropdown(e,t){const i=this.editor.ui.componentFactory;i.add(e.name,s=>{let r;const{defaultItem:o,items:a,title:c}=e,d=a.filter(w=>t.find(({name:A})=>JM(A)===w)).map(w=>{const A=i.create(w);return w===o&&(r=A),A});a.length!==d.length&&Bw.warnInvalidStyle({dropdown:e});const h=ls(s,jm),m=h.buttonView,p=m.arrowView;return ZE(h,d,{enableActiveItemFocusOnDropdownOpen:!0}),m.set({label:XM(c,r.label),class:null,tooltip:!0}),p.unbind("label"),p.set({label:c}),m.bind("icon").toMany(d,"isOn",(...w)=>{const A=w.findIndex(Wf);return A<0?r.icon:d[A].icon}),m.bind("label").toMany(d,"isOn",(...w)=>{const A=w.findIndex(Wf);return XM(c,A<0?r.label:d[A].label)}),m.bind("isOn").toMany(d,"isOn",(...w)=>w.some(Wf)),m.bind("class").toMany(d,"isOn",(...w)=>w.some(Wf)?"ck-splitbutton_flatten":void 0),m.on("execute",()=>{d.some(({isOn:w})=>w)?h.isOpen=!h.isOpen:r.fire("execute")}),h.bind("isEnabled").toMany(d,"isEnabled",(...w)=>w.some(Wf)),this.listenTo(h,"execute",()=>{this.editor.editing.view.focus()}),h})}_createButton(e){const t=e.name;this.editor.ui.componentFactory.add(JM(t),i=>{const s=this.editor.commands.get("imageStyle"),r=new Se(i);return r.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),r.bind("isEnabled").to(s,"isEnabled"),r.bind("isOn").to(s,"value",o=>o===t),r.on("execute",this._executeCommand.bind(this,t)),r})}_executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}}function ZM(n,e){for(const t of n)e[t.title]&&(t.title=e[t.title]);return n}function JM(n){return`imageStyle:${n}`}function XM(n,e){return(n?n+": ":"")+e}class Pxe extends z{static get requires(){return[G7,Rxe]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class Oxe extends z{static get requires(){return[Pw,Ai]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(Pw),s=e.plugins.get("ImageUtils");i.register("image",{ariaLabel:t("Image toolbar"),items:Dxe(e.config.get("image.toolbar")||[]),getRelatedElement:r=>s.getClosestSelectedImageWidget(r)})}}function Dxe(n){return n.map(e=>Fi(e)?e.name:e)}class Mxe extends z{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.commands.add("indent",new iD(e)),e.commands.add("outdent",new iD(e))}}class Bxe extends z{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale,i=e.t,s=t.uiLanguageDirection=="ltr"?cD:uD,r=t.uiLanguageDirection=="ltr"?uD:cD;this._defineButton("indent",i("Increase indent"),s),this._defineButton("outdent",i("Decrease indent"),r)}_defineButton(e,t,i){const s=this.editor;s.ui.componentFactory.add(e,()=>{const r=this._createButton(Se,e,t,i);return r.set({tooltip:!0}),r}),s.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(xn,e,t,i))}_createButton(e,t,i,s){const r=this.editor,o=r.commands.get(t),a=new e(r.locale);return a.set({label:i,icon:s}),a.bind("isEnabled").to(o,"isEnabled"),this.listenTo(a,"execute",()=>{r.execute(t),r.editing.view.focus()}),a}}class Nxe extends z{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[Mxe,Bxe]}}class qp extends je{_indentBehavior;constructor(e,t){super(e),this._indentBehavior=t}refresh(){const t=this.editor.model,i=qt(t.document.selection.getSelectedBlocks());if(!i||!this._isIndentationChangeAllowed(i)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(i.getAttribute("blockIndent"))}execute(){const e=this.editor.model,t=this._getBlocksToChange();e.change(i=>{for(const s of t){const r=s.getAttribute("blockIndent"),o=this._indentBehavior.getNextIndent(r);o?i.setAttribute("blockIndent",o,s):i.removeAttribute("blockIndent",s)}})}_getBlocksToChange(){const t=this.editor.model.document.selection;return Array.from(t.getSelectedBlocks()).filter(s=>this._isIndentationChangeAllowed(s))}_isIndentationChangeAllowed(e){const t=this.editor;return t.model.schema.checkAttribute(e,"blockIndent")?!t.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!t.plugins.get("ListUtils").isListItemBlock(e):!1}}class e4{isForward;offset;unit;constructor(e){this.isForward=e.direction==="forward",this.offset=e.offset,this.unit=e.unit}checkEnabled(e){const t=parseFloat(e||"0");return this.isForward||t>0}getNextIndent(e){const t=parseFloat(e||"0");if(!(!e||e.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const s=this.isForward?this.offset:-this.offset,r=t+s;return r>0?r+this.unit:void 0}}class t4{isForward;classes;constructor(e){this.isForward=e.direction==="forward",this.classes=e.classes}checkEnabled(e){const t=this.classes.indexOf(e);return this.isForward?t<this.classes.length-1:t>=0}getNextIndent(e){const t=this.classes.indexOf(e),i=this.isForward?1:-1;return this.classes[t+i]}}const Vxe=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class Lxe extends z{constructor(e){super(e),e.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.config.get("indentBlock");t.classes&&t.classes.length?(this._setupConversionUsingClasses(t.classes),e.commands.add("indentBlock",new qp(e,new t4({direction:"forward",classes:t.classes}))),e.commands.add("outdentBlock",new qp(e,new t4({direction:"backward",classes:t.classes})))):(e.data.addStyleProcessorRules(v8),this._setupConversionUsingOffset(),e.commands.add("indentBlock",new qp(e,new e4({direction:"forward",offset:t.offset,unit:t.unit}))),e.commands.add("outdentBlock",new qp(e,new e4({direction:"backward",offset:t.offset,unit:t.unit}))))}afterInit(){const e=this.editor,t=e.model.schema,i=e.commands.get("indent"),s=e.commands.get("outdent"),r=e.config.get("heading.options");(r&&r.map(c=>c.model)||Vxe).forEach(c=>{t.isRegistered(c)&&t.extend(c,{allowAttributes:"blockIndent"})}),t.setAttributeProperties("blockIndent",{isFormatting:!0}),i.registerChildCommand(e.commands.get("indentBlock")),s.registerChildCommand(e.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const e=this.editor.conversion,i=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";e.for("upcast").attributeToAttribute({view:{styles:{[i]:/[\s\S]+/}},model:{key:"blockIndent",value:s=>{if(!s.is("element","li"))return s.getStyle(i)}}}),e.for("downcast").attributeToAttribute({model:"blockIndent",view:s=>({key:"style",value:{[i]:s}})})}_setupConversionUsingClasses(e){const t={model:{key:"blockIndent",values:[]},view:{}};for(const i of e)t.model.values.push(i),t.view[i]={key:"class",value:[i]};this.editor.conversion.attributeToAttribute(t)}}function fS(n,e){return e=e||EC(n),`${n}:${e}`}function Fxe(n){const[e,t]=n.split(":");return{languageCode:e,textDirection:t}}class zxe extends je{refresh(){const e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"language")}execute({languageCode:e,textDirection:t}={}){const i=this.editor.model,r=i.document.selection,o=e?fS(e,t):!1;i.change(a=>{if(r.isCollapsed)o?a.setSelectionAttribute("language",o):a.removeSelectionAttribute("language");else{const c=i.schema.getValidRanges(r.getRanges(),"language");for(const d of c)o?a.setAttribute("language",o,d):a.removeAttribute("language",d)}})}_getValueFromFirstAllowedNode(){const e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.getAttribute("language")||!1;for(const s of i.getRanges())for(const r of s.getItems())if(t.checkAttribute(r,"language"))return r.getAttribute("language")||!1;return!1}}class jxe extends z{static get pluginName(){return"TextPartLanguageEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("language",{textPartLanguage:[{title:"Arabic",languageCode:"ar"},{title:"French",languageCode:"fr"},{title:"Spanish",languageCode:"es"}]})}init(){const e=this.editor;e.model.schema.extend("$text",{allowAttributes:"language"}),e.model.schema.setAttributeProperties("language",{copyOnEnter:!0}),this._defineConverters(),e.commands.add("textPartLanguage",new zxe(e))}_defineConverters(){const e=this.editor.conversion;e.for("upcast").elementToAttribute({model:{key:"language",value:t=>{const i=t.getAttribute("lang"),s=t.getAttribute("dir");return fS(i,s)}},view:{name:"span",attributes:{lang:/[\s\S]+/}}}),e.for("downcast").attributeToElement({model:"language",view:(t,{writer:i},s)=>{if(!t||!s.item.is("$textProxy")&&!s.item.is("documentSelection"))return;const{languageCode:r,textDirection:o}=Fxe(t);return i.createAttributeElement("span",{lang:r,dir:o})}})}}class Uxe extends z{static get pluginName(){return"TextPartLanguageUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t,i=t("Choose language"),s=t("Language");e.ui.componentFactory.add("textPartLanguage",r=>{const{definitions:o,titles:a}=this._getItemMetadata(),c=e.commands.get("textPartLanguage"),d=ls(r);return Sc(d,o,{ariaLabel:s,role:"menu"}),d.buttonView.set({ariaLabel:s,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:s}),d.extendTemplate({attributes:{class:["ck-text-fragment-language-dropdown"]}}),d.bind("isEnabled").to(c,"isEnabled"),d.buttonView.bind("label").to(c,"value",h=>h&&a[h]||i),d.buttonView.bind("ariaLabel").to(c,"value",h=>{const m=h&&a[h];return m?`${m}, ${s}`:s}),this.listenTo(d,"execute",h=>{c.execute({languageCode:h.source.languageCode,textDirection:h.source.textDirection}),e.editing.view.focus()}),d}),e.ui.componentFactory.add("menuBar:textPartLanguage",r=>{const{definitions:o}=this._getItemMetadata(),a=e.commands.get("textPartLanguage"),c=new Zr(r);c.buttonView.set({label:s});const d=new am(r);d.set({ariaLabel:t("Language"),role:"menu"});for(const h of o){if(h.type!="button"){d.items.add(new dy(r));continue}const m=new Um(r,c),p=new xn(r);p.set({role:"menuitemradio",isToggleable:!0}),p.bind(...Object.keys(h.model)).to(h.model),p.delegate("execute").to(c),m.children.add(p),d.items.add(m)}return c.bind("isEnabled").to(a,"isEnabled"),c.panelView.children.add(d),c.on("execute",h=>{a.execute({languageCode:h.source.languageCode,textDirection:h.source.textDirection}),e.editing.view.focus()}),c})}_getItemMetadata(){const e=this.editor,t=new Wn,i={},s=e.commands.get("textPartLanguage"),r=e.config.get("language.textPartLanguage"),o=e.locale.t,a=o("Remove language");t.add({type:"button",model:new cl({label:a,languageCode:!1,withText:!0})}),t.add({type:"separator"});for(const c of r){const d={type:"button",model:new cl({label:c.title,languageCode:c.languageCode,role:"menuitemradio",textDirection:c.textDirection,withText:!0})},h=fS(c.languageCode,c.textDirection);d.model.bind("isOn").to(s,"value",m=>m===h),t.add(d),i[h]=c.title}return{definitions:t,titles:i}}}class Hxe extends z{static get requires(){return[jxe,Uxe]}static get pluginName(){return"TextPartLanguage"}static get isOfficialPlugin(){return!0}}class Wxe{_definitions=new Set;get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,i,s)=>{if(!s.consumable.test(i.item,"attribute:linkHref")||!(i.item.is("selection")||s.schema.isInline(i.item)))return;const r=s.writer,o=r.document.selection;for(const a of this._definitions){const c=r.createAttributeElement("a",a.attributes,{priority:5});a.classes&&r.addClass(a.classes,c);for(const d in a.styles)r.setStyle(d,a.styles[d],c);r.setCustomProperty("link",!0,c),a.callback(i.attributeNewValue)?i.item.is("selection")?r.wrap(o.getFirstRange(),c):r.wrap(s.mapper.toViewRange(i.range),c):r.unwrap(s.mapper.toViewRange(i.range),c)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,i,{writer:s,mapper:r})=>{const o=r.toViewElement(i.item),a=Array.from(o.getChildren()).find(c=>c.is("element","a"));if(a)for(const c of this._definitions){const d=io(c.attributes);if(c.callback(i.attributeNewValue)){for(const[h,m]of d)h==="class"?s.addClass(m,a):s.setAttribute(h,m,a);c.classes&&s.addClass(c.classes,a);for(const h in c.styles)s.setStyle(h,c.styles[h],a)}else{for(const[h,m]of d)h==="class"?s.removeClass(m,a):s.removeAttribute(h,a);c.classes&&s.removeClass(c.classes,a);for(const h in c.styles)s.removeStyle(h,a)}}})}}}const $xe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Gxe="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",Yxe=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,Kxe=/^((\w+:(\/{2,})?)|(\W))/i,qxe=["https?","ftps?","mailto"],dh="Ctrl+K";function Qxe(n){return n.is("attributeElement")&&!!n.getCustomProperty("link")}function n4(n,{writer:e}){const t=e.createAttributeElement("a",{href:n},{priority:5});return e.setCustomProperty("link",!0,t),t}function Y7(n,e=qxe){const t=String(n),i=e.join("|"),s=new RegExp(`${Gxe.replace("<protocols>",i)}`,"i");return Zxe(t,s)?t:"#"}function Zxe(n,e){return!!n.replace($xe,"").match(e)}function Jxe(n,e){const t={"Open in a new tab":n("Open in a new tab"),Downloadable:n("Downloadable")};return e.forEach(i=>("label"in i&&t[i.label]&&(i.label=t[i.label]),i)),e}function Xxe(n){const e=[];if(n)for(const[t,i]of Object.entries(n)){const s=Object.assign({},i,{id:`link${_fe(t)}`});e.push(s)}return e}function YC(n,e){return n?e.checkAttribute(n.name,"linkHref"):!1}function eke(n){return Yxe.test(n)}function hS(n,e){const t=eke(n)?"mailto:":e,i=!!t&&!K7(n);return n&&i?t+n:n}function K7(n){return Kxe.test(n)}function tke(n){window.open(n,"_blank","noopener")}function KC(n){let e="";for(const t of n.getItems()){if(!t.is("$text")&&!t.is("$textProxy"))return;e+=t.data}return e}class nke extends je{manualDecorators=new Wn;automaticDecorators=new Wxe;restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement()||qt(t.getSelectedBlocks());YC(i,e.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(i,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const s of this.manualDecorators)s.value=this._getDecoratorStateFromModel(s.id)}execute(e,t={},i){const s=this.editor.model,r=s.document.selection,o=[],a=[];for(const c in t)t[c]?o.push(c):a.push(c);s.change(c=>{const d=p=>{c.setAttribute("linkHref",e,p),o.forEach(w=>c.setAttribute(w,!0,p)),a.forEach(w=>c.removeAttribute(w,p))},h=(p,w)=>{const A=KC(p);if(!A)return p;let C=i;if(C||(C=w&&w==A?e:A),C!=A){const k=c.createDocumentFragment();for(const R of p.getItems()){const O=R;c.append(c.createText(O.data,O.getAttributes()),k)}const E=c.createRangeIn(k),S=ike(A,C);let I=0;for(const{offset:R,actual:O,expected:U}of S){const P=R+I,V=c.createRange(E.start.getShiftedBy(P),E.start.getShiftedBy(P+O.length)),ie=ske(V,E).getAttributes(),ke=Array.from(ie).filter(([ve])=>s.schema.getAttributeProperties(ve).isFormatting),de=c.createText(U,ke);d(de),c.remove(V),c.insert(de,V.start),I+=U.length}return s.insertContent(k,p),c.createRange(p.start,p.start.getShiftedBy(C.length))}},m=p=>{const{plugins:w}=this.editor;if(c.setSelection(p.end),w.has("TwoStepCaretMovement"))w.get("TwoStepCaretMovement")._handleForwardMovement();else for(const A of["linkHref",...o,...a])c.removeSelectionAttribute(A)};if(r.isCollapsed){const p=r.getFirstPosition();if(r.hasAttribute("linkHref")){const w=r.getAttribute("linkHref"),A=hy(p,"linkHref",w,s),C=h(A,w);d(C||A),C&&m(C)}else if(e!==""){const w=io(r.getAttributes());w.set("linkHref",e),o.forEach(C=>{w.set(C,!0)});const A=s.insertContent(c.createText(i||e,w),p);m(A)}}else{const p=Array.from(r.getRanges()),w=s.schema.getValidRanges(p,"linkHref"),A=[];for(const E of r.getSelectedBlocks())s.schema.checkAttribute(E,"linkHref")&&A.push(c.createRangeOn(E));const C=A.slice();for(const E of w)this._isRangeToUpdate(E,A)&&C.push(E);const k=p.map(E=>({start:Xt.fromPosition(E.start,"toPrevious"),end:Xt.fromPosition(E.end,"toNext")}));for(let E of C){const S=(E.start.textNode||E.start.nodeAfter).getAttribute("linkHref");E=h(E,S)||E,d(E)}c.setSelection(k.map(E=>{const S=E.start.toPosition(),I=E.end.toPosition();return E.start.detach(),E.end.detach(),s.createRange(S,I)}))}})}_getDecoratorStateFromModel(e){const t=this.editor.model,i=t.document.selection,s=i.getSelectedElement();return YC(s,t.schema)?s.getAttribute(e):i.getAttribute(e)}_isRangeToUpdate(e,t){for(const i of t)if(i.containsRange(e))return!1;return!0}}function ike(n,e){const t=sd(n,e),i={equal:0,insert:0,delete:0},s=[];let r="",o="";for(const a of[...t,null])a=="insert"?o+=e[i.equal+i.insert]:a=="delete"?r+=n[i.equal+i.delete]:(r.length||o.length)&&(s.push({offset:i.equal,actual:r,expected:o}),r="",o=""),a&&i[a]++;return s}function ske(n,e){if(!n.isCollapsed)return qt(n.getItems());const t=n.start;return t.textNode?t.textNode:!t.nodeBefore||t.isEqual(e.start)?t.nodeAfter:t.nodeBefore}class rke extends je{refresh(){const e=this.editor.model,t=e.document.selection,i=t.getSelectedElement();YC(i,e.schema)?this.isEnabled=e.schema.checkAttribute(i,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,t=this.editor.model,i=t.document.selection,s=e.commands.get("link");t.change(r=>{const o=i.isCollapsed?[hy(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),t)]:t.schema.getValidRanges(i.getRanges(),"linkHref");for(const a of o)if(r.removeAttribute("linkHref",a),s)for(const c of s.manualDecorators)r.removeAttribute(c.id,a)})}}class oke extends kt(){id;defaultValue;label;attributes;classes;styles;constructor({id:e,label:t,attributes:i,classes:s,styles:r,defaultValue:o}){super(),this.id=e,this.set("value",void 0),this.defaultValue=o,this.label=t,this.attributes=i,this.classes=s,this.styles=r}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const ake="ck-link_selected",i4="automatic",lke="manual",cke=/^(https?:)?\/\//;class Ed extends z{_linkOpeners=[];static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ZD,l7,Ps]}constructor(e){super(e),e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1,toolbar:["linkPreview","|","editLink","linkProperties","unlink"]})}init(){const e=this.editor,t=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:n4}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(r,o)=>n4(Y7(r,t),o)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:r=>r.getAttribute("href")}}),e.commands.add("link",new nke(e)),e.commands.add("unlink",new rke(e));const i=Jxe(e.t,Xxe(e.config.get("link.decorators")));this._enableAutomaticDecorators(i.filter(r=>r.mode===i4)),this._enableManualDecorators(i.filter(r=>r.mode===lke)),e.plugins.get(ZD).registerAttribute("linkHref"),Y0e(e,"linkHref","a",ake),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_registerLinkOpener(e){this._linkOpeners.push(e)}_enableAutomaticDecorators(e){const t=this.editor,s=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&s.add({id:"linkIsExternal",mode:i4,callback:r=>!!r&&cke.test(r),attributes:{target:"_blank",rel:"noopener noreferrer"}}),s.add(e),s.length&&t.conversion.for("downcast").add(s.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const t=this.editor,s=t.commands.get("link").manualDecorators;e.forEach(r=>{t.model.schema.extend("$text",{allowAttributes:r.id});const o=new oke(r);s.add(o),t.conversion.for("downcast").attributeToElement({model:o.id,view:(a,{writer:c,schema:d},{item:h})=>{if((h.is("selection")||d.isInline(h))&&a){const m=c.createAttributeElement("a",o.attributes,{priority:5});o.classes&&c.addClass(o.classes,m);for(const p in o.styles)c.setStyle(p,o.styles[p],m);return c.setCustomProperty("link",!0,m),m}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",...o._createPattern()},model:{key:o.id}})})}_enableLinkOpen(){const e=this.editor,i=e.editing.view.document,s=r=>{this._linkOpeners.some(o=>o(r))||tke(r)};this.listenTo(i,"click",(r,o)=>{if(!(Pe.isMac?o.domEvent.metaKey:o.domEvent.ctrlKey))return;let c=o.domTarget;if(c.tagName.toLowerCase()!="a"&&(c=c.closest("a")),!c)return;const d=c.getAttribute("href");d&&(r.stop(),o.preventDefault(),s(d))},{context:"$capture"}),this.listenTo(i,"keydown",(r,o)=>{const c=e.commands.get("link").value;c&&o.keyCode===tt.enter&&o.altKey&&(r.stop(),s(c))})}_enableSelectionAttributesFixer(){const t=this.editor.model,i=t.document.selection;this.listenTo(i,"change:attribute",(s,{attributeKeys:r})=>{!r.includes("linkHref")||i.hasAttribute("linkHref")||t.change(o=>{uke(o,dke(t.schema))})})}_enableClipboardIntegration(){const e=this.editor,t=e.model,i=this.editor.config.get("link.defaultProtocol");i&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(s,r)=>{t.change(o=>{const a=o.createRangeIn(r.content);for(const c of a.getItems())if(c.hasAttribute("linkHref")){const d=hS(c.getAttribute("linkHref"),i);o.setAttribute("linkHref",d,c)}})})}}function uke(n,e){n.removeSelectionAttribute("linkHref");for(const t of e)n.removeSelectionAttribute(t)}function dke(n){return n.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}class fke extends Se{constructor(e){super(e);const t=this.bindTemplate;this.set({href:void 0,withText:!0}),this.extendTemplate({attributes:{class:["ck-link-toolbar__preview"],href:t.to("href"),target:"_blank",rel:"noopener noreferrer"},on:{click:t.to(i=>{if(this.href){const s=()=>i.preventDefault();this.fire("navigate",this.href,s)}})}}),this.template.tag="a"}}class hke extends we{focusTracker=new St;keystrokes=new Ht;backButtonView;saveButtonView;displayedTextInputView;urlInputView;children;providersListChildren;_validators;_focusables=new ei;_focusCycler;constructor(e,t){super(e),this._validators=t,this.backButtonView=this._createBackButton(),this.saveButtonView=this._createSaveButton(),this.displayedTextInputView=this._createDisplayedTextInput(),this.urlInputView=this._createUrlInput(),this.providersListChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView()]),this._createFormChildren(),this.listenTo(this.providersListChildren,"add",()=>{this.stopListening(this.providersListChildren,"add"),this.children.add(this._createProvidersListView())}),this._focusCycler=new ui({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-link-form","ck-responsive-form"],tabindex:"-1"},children:this.children})}render(){super.render(),va({view:this}),[this.urlInputView,this.saveButtonView,...this.providersListChildren,this.backButtonView,this.displayedTextInputView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createBackButton(){const e=this.locale.t,t=new Se(this.locale);return t.set({class:"ck-button-back",label:e("Back"),icon:ll,tooltip:!0}),t.delegate("execute").to(this,"cancel"),t}_createSaveButton(){const e=this.locale.t,t=new Se(this.locale);return t.set({label:e("Insert"),tooltip:!1,withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),t}_createHeaderView(){const e=this.locale.t,t=new ya(this.locale,{label:e("Link")});return t.children.add(this.backButtonView,0),t}_createProvidersListView(){const e=new Hd(this.locale);return e.extendTemplate({attributes:{class:["ck-link-form__providers-list"]}}),e.items.bindTo(this.providersListChildren).using(t=>{const i=new Ir(this.locale);return i.children.add(t),i}),e}_createDisplayedTextInput(){const e=this.locale.t,t=new un(this.locale,os);return t.label=e("Displayed text"),t.class="ck-labeled-field-view_full-width",t}_createUrlInput(){const e=this.locale.t,t=new un(this.locale,os);return t.fieldView.inputMode="url",t.label=e("Link URL"),t.class="ck-labeled-field-view_full-width",t}_createFormChildren(){this.children.add(new bi(this.locale,{children:[this.displayedTextInputView],class:["ck-form__row_large-top-padding"]})),this.children.add(new bi(this.locale,{children:[this.urlInputView,this.saveButtonView],class:["ck-form__row_with-submit","ck-form__row_large-top-padding","ck-form__row_large-bottom-padding"]}))}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}class mke extends we{focusTracker=new St;keystrokes=new Ht;backButtonView;listView;listChildren;emptyListInformation;children;_focusables=new ei;_focusCycler;constructor(e){super(e),this.listChildren=this.createCollection(),this.backButtonView=this._createBackButton(),this.listView=this._createListView(),this.emptyListInformation=this._createEmptyLinksListItemView(),this.children=this.createCollection([this._createHeaderView(),this.emptyListInformation]),this.set("title",""),this.set("emptyListPlaceholder",""),this.set("hasItems",!1),this.listenTo(this.listChildren,"change",()=>{this.hasItems=this.listChildren.length>0}),this.on("change:hasItems",(t,i,s)=>{s?(this.children.remove(this.emptyListInformation),this.children.add(this.listView)):(this.children.remove(this.listView),this.children.add(this.emptyListInformation))}),this.keystrokes.set("Esc",(t,i)=>{this.fire("cancel"),i()}),this._focusCycler=new ui({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-providers"],tabindex:"-1"},children:this.children})}render(){super.render(),[this.listView,this.backButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createListView(){const e=new Hd(this.locale);return e.extendTemplate({attributes:{class:["ck-link-providers__list"]}}),e.items.bindTo(this.listChildren).using(t=>{const i=new Ir(this.locale);return i.children.add(t),i}),e}_createBackButton(){const e=this.locale.t,t=new Se(this.locale);return t.set({class:"ck-button-back",label:e("Back"),icon:ll,tooltip:!0}),t.delegate("execute").to(this,"cancel"),t}_createHeaderView(){const e=new ya(this.locale);return e.bind("label").to(this,"title"),e.children.add(this.backButtonView,0),e}_createEmptyLinksListItemView(){const e=new we(this.locale);return e.setTemplate({tag:"p",attributes:{class:["ck","ck-link__empty-list-info"]},children:[{text:this.bindTemplate.to("emptyListPlaceholder")}]}),e}}class gke extends we{focusTracker=new St;keystrokes=new Ht;backButtonView;children;listChildren;_focusables=new ei;_focusCycler;constructor(e){super(e),this.backButtonView=this._createBackButton(),this.listChildren=this.createCollection(),this.children=this.createCollection([this._createHeaderView(),this._createListView()]),this._focusCycler=new ui({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-properties"],tabindex:"-1"},children:this.children}),this.keystrokes.set("Esc",(t,i)=>{this.fire("back"),i()})}render(){super.render(),[...this.listChildren,this.backButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBackButton(){const e=this.locale.t,t=new Se(this.locale);return t.set({class:"ck-button-back",label:e("Back"),icon:ll,tooltip:!0}),t.delegate("execute").to(this,"back"),t}_createHeaderView(){const e=this.locale.t,t=new ya(this.locale,{label:e("Link properties")});return t.children.add(this.backButtonView,0),t}_createListView(){const e=new Hd(this.locale);return e.extendTemplate({attributes:{class:["ck-link__list"]}}),e.items.bindTo(this.listChildren).using(t=>{const i=new Ir(this.locale);return i.children.add(t),i}),e}}class pke extends Se{arrowView;constructor(e){super(e),this.set({withText:!0}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-link__button"]}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const e=new Br;return e.content=T8,e}}const Ur="link-ui";class q7 extends z{toolbarView=null;formView=null;linkProviderItemsView=null;propertiesView=null;_balloon;_linksProviders=new Wn;static get requires(){return[Rr,Ed]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;this.set("selectedLinkableText",void 0),e.editing.view.addObserver(pbe),this._balloon=e.plugins.get(Rr),this._registerComponents(),this._registerEditingOpeners(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:Ur,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Ur,view:(i,{writer:s})=>{if(!i.markerRange.isCollapsed)return null;const r=s.createUIElement("span");return s.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],r),r}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Create link"),keystroke:dh},{label:t("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.propertiesView&&this.propertiesView.destroy(),this.formView&&this.formView.destroy(),this.toolbarView&&this.toolbarView.destroy(),this.linkProviderItemsView&&this.linkProviderItemsView.destroy()}registerLinksListProvider(e){const t=this._linksProviders.filter(i=>(i.order||0)<=(e.order||0)).length;this._linksProviders.add(e,t)}_createViews(){const e=this.editor.commands.get("link");this.toolbarView=this._createToolbarView(),this.formView=this._createFormView(),e.manualDecorators.length&&(this.propertiesView=this._createPropertiesView()),this._enableUserBalloonInteractions()}_createToolbarView(){const e=this.editor,t=new da(e.locale),i=e.commands.get("link");t.class="ck-link-toolbar";let s=e.config.get("link.toolbar");return i.manualDecorators.length||(s=s.filter(r=>r!=="linkProperties")),t.fillFromConfig(s,e.ui.componentFactory),t.keystrokes.set("Esc",(r,o)=>{this._hideUI(),o()}),t.keystrokes.set(dh,(r,o)=>{this._addFormView(),o()}),e.ui.addToolbar(t,{isContextual:!0,beforeFocus:()=>{this._getSelectedLinkElement()&&!this._isToolbarVisible&&this._showUI(!0)},afterBlur:()=>{this._hideUI(!1)}}),t}_createFormView(){const e=this.editor,t=e.locale.t,i=e.commands.get("link"),s=e.config.get("link.defaultProtocol"),r=new(Cd(hke))(e.locale,bke(e));return r.displayedTextInputView.bind("isEnabled").to(this,"selectedLinkableText",o=>o!==void 0),r.urlInputView.bind("isEnabled").to(i,"isEnabled"),r.saveButtonView.bind("isEnabled").to(i,"isEnabled"),r.saveButtonView.bind("label").to(i,"value",o=>t(o?"Update":"Insert")),this.listenTo(r,"submit",()=>{if(r.isValid()){const o=r.urlInputView.fieldView.element.value,a=hS(o,s),c=r.displayedTextInputView.fieldView.element.value;e.execute("link",a,this._getDecoratorSwitchesState(),c!==this.selectedLinkableText?c:void 0),this._closeFormView()}}),this.listenTo(r.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(r,"cancel",()=>{this._closeFormView()}),r.keystrokes.set("Esc",(o,a)=>{this._closeFormView(),a()}),r.providersListChildren.bindTo(this._linksProviders).using(o=>this._createLinksListProviderButton(o)),r}_createLinkProviderListView(e){return e.getListItems().map(({href:t,label:i,icon:s})=>{const r=new Se;return r.set({label:i,icon:s,tooltip:!1,withText:!0}),r.on("execute",()=>{this.formView.resetFormStatus(),this.formView.urlInputView.fieldView.value=t,this.editor.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),r})}_createLinkProviderItemsView(e){const t=this.editor,i=t.locale.t,s=new mke(t.locale),{emptyListPlaceholder:r,label:o}=e;return s.emptyListPlaceholder=r||i("No links available"),s.title=o,this.listenTo(s,"cancel",()=>{t.editing.view.focus(),this._removeLinksProviderView(),this.formView.focus()}),s}_createPropertiesView(){const e=this.editor,t=this.editor.commands.get("link"),i=new(Cd(gke))(e.locale);return this.listenTo(i,"back",()=>{e.editing.view.focus(),this._removePropertiesView()}),i.listChildren.bindTo(t.manualDecorators).using(s=>{const r=new pc(e.locale);return r.set({label:s.label,withText:!0}),r.bind("isOn").toMany([s,t],"value",(o,a)=>a===void 0&&o===void 0?!!s.defaultValue:!!o),r.on("execute",()=>{s.set("value",!r.isOn),e.execute("link",t.value,this._getDecoratorSwitchesState())}),r}),i}_getDecoratorSwitchesState(){const e=this.editor.commands.get("link");return Array.from(e.manualDecorators).reduce((t,i)=>{const s=e.value===void 0&&i.value===void 0?i.defaultValue:i.value;return{...t,[i.id]:!!s}},{})}_registerEditingOpeners(){this.editor.plugins.get(Ed)._registerLinkOpener(t=>{const i=this._getLinkProviderLinkByHref(t);if(!i)return!1;const{item:s,provider:r}=i;return r.navigate?r.navigate(s):!1})}_registerComponents(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const t=this._createButton(Se);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:link",()=>{const t=this._createButton(xn);return t.set({role:"menuitemcheckbox"}),t}),e.ui.componentFactory.add("linkPreview",t=>{const i=new fke(t),s=e.config.get("link.allowedProtocols"),r=e.commands.get("link"),o=t.t;i.bind("isEnabled").to(r,"value",c=>!!c),i.bind("href").to(r,"value",c=>c&&Y7(c,s));const a=c=>{if(!c){i.label=void 0,i.icon=void 0,i.tooltip=o("Open link in new tab");return}const d=this._getLinkProviderLinkByHref(c);if(d){const{label:h,tooltip:m,icon:p}=d.item;i.label=h,i.tooltip=m||!1,i.icon=p}else i.label=c,i.icon=void 0,i.tooltip=o("Open link in new tab")};return a(r.value),this.listenTo(r,"change:value",(c,d,h)=>{a(h)}),this.listenTo(i,"navigate",(c,d,h)=>{const m=this._getLinkProviderLinkByHref(d);if(!m)return;const{provider:p,item:w}=m,{navigate:A}=p;A&&A(w)&&(c.stop(),h())}),i}),e.ui.componentFactory.add("unlink",t=>{const i=e.commands.get("unlink"),s=new Se(t),r=t.t;return s.set({label:r("Unlink"),icon:pve,tooltip:!0}),s.bind("isEnabled").to(i),this.listenTo(s,"execute",()=>{e.execute("unlink"),this._hideUI()}),s}),e.ui.componentFactory.add("editLink",t=>{const i=e.commands.get("link"),s=new Se(t),r=t.t;return s.set({label:r("Edit link"),icon:MC,tooltip:!0}),s.bind("isEnabled").to(i),this.listenTo(s,"execute",()=>{this._addFormView()}),s}),e.ui.componentFactory.add("linkProperties",t=>{const i=e.commands.get("link"),s=new Se(t),r=t.t;return s.set({label:r("Link properties"),icon:ive,tooltip:!0}),s.bind("isEnabled").to(i,"isEnabled",i,"value",i,"manualDecorators",(o,a,c)=>o&&!!a&&c.length>0),this.listenTo(s,"execute",()=>{this._addPropertiesView()}),s})}_createLinksListProviderButton(e){const t=this.editor.locale,i=new pke(t);return i.set({label:e.label}),this.listenTo(i,"execute",()=>{this._showLinksProviderView(e)}),i}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("link"),r=new e(t.locale),o=i.t;return r.set({label:o("Link"),icon:S8,keystroke:dh,isToggleable:!0}),r.bind("isEnabled").to(s,"isEnabled"),r.bind("isOn").to(s,"value",a=>!!a),this.listenTo(r,"execute",()=>{t.editing.view.scrollToTheSelection(),this._showUI(!0),this._getSelectedLinkElement()&&this._addFormView()}),r}_enableBalloonActivators(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(dh,(i,s)=>{s(),e.commands.get("link").isEnabled&&(e.editing.view.scrollToTheSelection(),this._showUI(!0))})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._isToolbarVisible&&!this.toolbarView.focusTracker.isFocused&&(this.toolbarView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),_l({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>{this._hideUI(!1)}})}_addToolbarView(){this.toolbarView||this._createViews(),!this._isToolbarInPanel&&this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const e=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this.formView.backButtonView.isVisible=e.isEnabled&&!!e.value,this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.selectedLinkableText=this._getSelectedLinkableText(),this.formView.displayedTextInputView.fieldView.value=this.selectedLinkableText||"",this.formView.urlInputView.fieldView.value=e.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_addPropertiesView(){this.propertiesView||this._createViews(),!this._arePropertiesInPanel&&(this.propertiesView.disableCssTransitions(),this._balloon.add({view:this.propertiesView,position:this._getBalloonPositionData()}),this.propertiesView.enableCssTransitions(),this.propertiesView.focus())}_showLinksProviderView(e){this.linkProviderItemsView&&this._removeLinksProviderView(),this.linkProviderItemsView=this._createLinkProviderItemsView(e),this._addLinkProviderItemsView(e)}_addLinkProviderItemsView(e){this.linkProviderItemsView.listChildren.clear(),this.linkProviderItemsView.listChildren.addMany(this._createLinkProviderListView(e)),this._balloon.add({view:this.linkProviderItemsView,position:this._getBalloonPositionData()}),this.linkProviderItemsView.focus()}_closeFormView(){const e=this.editor.commands.get("link");this.selectedLinkableText=void 0,e.value!==void 0?this._removeFormView():this._hideUI()}_removePropertiesView(){this._arePropertiesInPanel&&this._balloon.remove(this.propertiesView)}_removeLinksProviderView(){this._isLinksListInPanel&&this._balloon.remove(this.linkProviderItemsView)}_removeFormView(e=!0){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.displayedTextInputView.fieldView.reset(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),e&&this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._isToolbarVisible?this._addFormView():this._addToolbarView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addToolbarView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(e=!0){const t=this.editor;this._isUIInPanel&&(this.stopListening(t.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e&&t.editing.view.focus(),this._removeLinksProviderView(),this._removePropertiesView(),this._removeFormView(e),this._isToolbarInPanel&&this._balloon.remove(this.toolbarView),this._hideFakeVisualSelection())}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let i=this._getSelectedLinkElement(),s=o();const r=()=>{const a=this._getSelectedLinkElement(),c=o();i&&!a||!i&&c!==s?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),i=a,s=c};function o(){return t.selection.focus.getAncestors().reverse().find(a=>a.is("element"))}this.listenTo(e.ui,"update",r),this.listenTo(this._balloon,"change:visibleView",r)}get _arePropertiesInPanel(){return!!this.propertiesView&&this._balloon.hasView(this.propertiesView)}get _isLinksListInPanel(){return!!this.linkProviderItemsView&&this._balloon.hasView(this.linkProviderItemsView)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _isToolbarInPanel(){return!!this.toolbarView&&this._balloon.hasView(this.toolbarView)}get _isPropertiesVisible(){return!!this.propertiesView&&this._balloon.visibleView===this.propertiesView}get _isFormVisible(){return!!this.formView&&this._balloon.visibleView==this.formView}get _isToolbarVisible(){return!!this.toolbarView&&this._balloon.visibleView===this.toolbarView}get _isUIInPanel(){return this._arePropertiesInPanel||this._isLinksListInPanel||this._isFormInPanel||this._isToolbarInPanel}get _isUIVisible(){return this._isPropertiesVisible||this._isLinksListInPanel||this._isFormVisible||this._isToolbarVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=e.document;if(this.editor.model.markers.has(Ur)){const s=this.editor.editing.mapper.markerNameToElements(Ur);if(s){const r=Array.from(s),o=e.createRange(e.createPositionBefore(r[0]),e.createPositionAfter(r[r.length-1]));return{target:e.domConverter.viewRangeToDom(o)}}}return{target:()=>{const s=this._getSelectedLinkElement();return s?e.domConverter.mapViewToDom(s):e.domConverter.viewRangeToDom(t.selection.getFirstRange())}}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection,i=t.getSelectedElement();if(t.isCollapsed||i&&tn(i))return g1(t.getFirstPosition());{const s=t.getFirstRange().getTrimmed(),r=g1(s.start),o=g1(s.end);return!r||r!=o?null:e.createRangeIn(r).getTrimmed().isEqual(s)?r:null}}_getSelectedLinkableText(){const e=this.editor.model,t=this.editor.editing,i=this._getSelectedLinkElement();if(!i)return KC(e.document.selection.getFirstRange());const s=t.view.createRangeOn(i),r=t.mapper.toModelRange(s);return KC(r)}_getLinkProviderLinkByHref(e){if(!e)return null;for(const t of this._linksProviders){const i=t.getItem?t.getItem(e):t.getListItems().find(s=>s.href===e);if(i)return{provider:t,item:i}}return null}_showFakeVisualSelection(){const e=this.editor.model;e.change(t=>{const i=e.document.selection.getFirstRange();if(e.markers.has(Ur))t.updateMarker(Ur,{range:i});else if(i.start.isAtEnd){const s=i.start.getLastMatchingPosition(({item:r})=>!e.schema.isContent(r),{boundaries:i});t.addMarker(Ur,{usingOperation:!1,affectsData:!1,range:t.createRange(s,i.end)})}else t.addMarker(Ur,{usingOperation:!1,affectsData:!1,range:i})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(Ur)&&e.change(t=>{t.removeMarker(Ur)})}}function g1(n){return n.getAncestors().find(e=>Qxe(e))||null}function bke(n){const e=n.t,t=n.config.get("link.allowCreatingEmptyLinks");return[i=>{if(!t&&!i.url.length)return e("Link URL must not be empty.")}]}const wke=4,Q7=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63}))|localhost)(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),vke=2;class yke extends z{static get requires(){return[so,Ed]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(e,t){return t.textNode&&t.textNode.hasAttribute("linkHref")?hy(t,"linkHref",t.textNode.getAttribute("linkHref"),e):null}_selectEntireLinks(e,t){const s=this.editor.model,r=s.document.selection,o=r.getFirstPosition(),a=r.getLastPosition();let c=t.getJoined(this._expandLinkRange(s,o)||t);c&&(c=c.getJoined(this._expandLinkRange(s,a)||t)),c&&(c.start.isBefore(o)||c.end.isAfter(a))&&e.setSelection(c)}_enablePasteLinking(){const e=this.editor,t=e.model,i=t.document.selection,s=e.plugins.get("ClipboardPipeline"),r=e.commands.get("link");s.on("inputTransformation",(o,a)=>{if(!this.isEnabled||!r.isEnabled||i.isCollapsed||a.method!=="paste"||i.rangeCount>1)return;const c=i.getFirstRange(),d=a.dataTransfer.getData("text/plain");if(!d)return;const h=d.match(Q7);h&&h[2]===d&&(t.change(m=>{this._selectEntireLinks(m,c),r.execute(d)}),o.stop())},{priority:"high"})}_enableTypingHandling(){const e=this.editor,t=new f7(e.model,i=>{let s=i;if(!Ake(s))return;s=s.slice(0,-1),"!.:,;?".includes(s[s.length-1])&&(s=s.slice(0,-1));const r=s4(s);if(r)return{url:r,removedTrailingCharacters:i.length-s.length}});t.on("matched:data",(i,s)=>{const{batch:r,range:o,url:a,removedTrailingCharacters:c}=s;if(!r.isTyping)return;const d=o.end.getShiftedBy(-c),h=d.getShiftedBy(-a.length),m=e.model.createRange(h,d);this._applyAutoLink(a,m)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("enter");i&&i.on("execute",()=>{const s=t.document.selection.getFirstPosition();let r;s.parent.previousSibling?.is("element")?r=t.createRangeIn(s.parent.previousSibling):r=t.createRange(t.createPositionAt(s.parent,0),s),this._checkAndApplyAutoLinkOnRange(r)})}_enableShiftEnterHandling(){const e=this.editor,t=e.model,i=e.commands.get("shiftEnter");i&&i.on("execute",()=>{const s=t.document.selection.getFirstPosition(),r=t.createRange(t.createPositionAt(s.parent,0),s.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(r)})}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:i,range:s}=d7(e,t),r=s4(i);if(r){const o=t.createRange(s.end.getShiftedBy(-r.length),s.end);this._applyAutoLink(r,o)}}_applyAutoLink(e,t){const i=this.editor.model,s=this.editor.config.get("link.defaultProtocol"),r=hS(e,s);!this.isEnabled||!_ke(t,i)||!K7(r)||Cke(t)||this._persistAutoLink(r,t)}_persistAutoLink(e,t){const i=this.editor.model,s=this.editor.plugins.get("Delete");i.enqueueChange(r=>{r.setAttribute("linkHref",e,t),i.enqueueChange(()=>{s.requestUndoOnBackspace()})})}}function Ake(n){return n.length>wke&&n[n.length-1]===" "&&n[n.length-2]!==" "}function s4(n){const e=Q7.exec(n);return e?e[vke]:null}function _ke(n,e){return e.schema.checkAttributeInSelection(e.createSelection(n),"linkHref")}function Cke(n){const e=n.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}class xke extends z{static get requires(){return[Ed,q7,yke]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}class kke extends z{static get requires(){return["ImageEditing","ImageUtils",Ed]}static get pluginName(){return"LinkImageEditing"}static get isOfficialPlugin(){return!0}afterInit(){const e=this.editor,t=e.model.schema;e.plugins.has("ImageBlockEditing")&&t.extend("imageBlock",{allowAttributes:["linkHref"]}),e.conversion.for("upcast").add(Eke(e)),e.conversion.for("downcast").add(Ske(e)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const e=this.editor,i=e.commands.get("link").automaticDecorators;i.length&&e.conversion.for("downcast").add(i.getDispatcherForLinkedImage())}_enableManualDecorators(){const e=this.editor,t=e.commands.get("link");for(const i of t.manualDecorators)e.plugins.has("ImageBlockEditing")&&e.model.schema.extend("imageBlock",{allowAttributes:i.id}),e.plugins.has("ImageInlineEditing")&&e.model.schema.extend("imageInline",{allowAttributes:i.id}),e.conversion.for("downcast").add(Tke(i)),e.conversion.for("upcast").add(Ike(e,i))}}function Eke(n){const e=n.plugins.has("ImageInlineEditing"),t=n.plugins.get("ImageUtils");return i=>{i.on("element:a",(s,r,o)=>{const a=r.viewItem,c=t.findViewImgElement(a);if(!c)return;const d=c.findAncestor(w=>t.isBlockImageView(w));if(e&&!d)return;const h={attributes:["href"]};if(!o.consumable.test(a,h))return;const m=a.getAttribute("href"),p=r.modelCursor.parent;p.is("element","imageBlock")&&(o.writer.setAttribute("linkHref",m,p),o.consumable.consume(a,h))},{priority:"high"})}}function Ske(n){const e=n.plugins.get("ImageUtils");return t=>{t.on("attribute:linkHref:imageBlock",(i,s,r)=>{if(!r.consumable.consume(s.item,i.name))return;const o=r.mapper.toViewElement(s.item),a=r.writer,c=Array.from(o.getChildren()).find(m=>m.is("element","a")),d=e.findViewImgElement(o),h=d.parent.is("element","picture")?d.parent:d;if(c)s.attributeNewValue?a.setAttribute("href",s.attributeNewValue,c):(a.move(a.createRangeOn(h),a.createPositionAt(o,0)),a.remove(c));else{const m=a.createContainerElement("a",{href:s.attributeNewValue});a.insert(a.createPositionAt(o,0),m),a.move(a.createRangeOn(h),a.createPositionAt(m,0))}},{priority:"high"})}}function Tke(n){return e=>{e.on(`attribute:${n.id}:imageBlock`,(t,i,s)=>{const r=s.mapper.toViewElement(i.item),o=Array.from(r.getChildren()).find(a=>a.is("element","a"));if(o){if(i.attributeOldValue){for(const a in n.attributes)s.writer.removeAttribute(a,o);n.classes&&s.writer.removeClass(n.classes,o);for(const a in n.styles)s.writer.removeStyle(a,o)}if(i.attributeNewValue){for(const[a,c]of io(n.attributes))s.writer.setAttribute(a,c,o);n.classes&&s.writer.addClass(n.classes,o);for(const a in n.styles)s.writer.setStyle(a,n.styles[a],o)}}})}}function Ike(n,e){const t=n.plugins.has("ImageInlineEditing"),i=n.plugins.get("ImageUtils");return s=>{s.on("element:a",(r,o,a)=>{const c=o.viewItem,d=i.findViewImgElement(c);if(!d)return;const h=d.findAncestor(A=>i.isBlockImageView(A));if(t&&!h)return;const p=new ji(e._createPattern()).match(c);if(!p||!a.consumable.test(c,p.match))return;const w=o.modelCursor.parent;w?.is("element","imageBlock")&&(a.writer.setAttribute(e.id,!0,w),a.consumable.consume(c,p.match))},{priority:"high"})}}class Rke extends z{static get requires(){return[Ed,q7,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",(i,s)=>{this._isSelectedLinkedImage(e.model.document.selection)&&(s.preventDefault(),i.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("linkImage",i=>{const s=new Se(i),r=e.plugins.get("LinkUI"),o=e.commands.get("link");return s.set({isEnabled:!0,label:t("Link image"),icon:S8,keystroke:dh,tooltip:!0,isToggleable:!0}),s.bind("isEnabled").to(o,"isEnabled"),s.bind("isOn").to(o,"value",a=>!!a),this.listenTo(s,"execute",()=>{this._isSelectedLinkedImage(e.model.document.selection)?r._addToolbarView():r._showUI(!0)}),s})}_isSelectedLinkedImage(e){const t=e.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(t)&&t.hasAttribute("linkHref")}}class Pke extends z{static get requires(){return[kke,Rke]}static get pluginName(){return"LinkImage"}static get isOfficialPlugin(){return!0}}class Zs{_startElement;_referenceIndent;_isForward;_includeSelf;_sameAttributes;_sameIndent;_lowerIndent;_higherIndent;constructor(e,t){this._startElement=e,this._referenceIndent=e.getAttribute("listIndent"),this._isForward=t.direction=="forward",this._includeSelf=!!t.includeSelf,this._sameAttributes=yt(t.sameAttributes||[]),this._sameIndent=!!t.sameIndent,this._lowerIndent=!!t.lowerIndent,this._higherIndent=!!t.higherIndent}static first(e,t){const s=new this(e,t)[Symbol.iterator]();return qt(s)}*[Symbol.iterator](){const e=[];for(const{node:t}of new $m(this._getStartNode(),this._isForward?"forward":"backward")){const i=t.getAttribute("listIndent");if(i<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=i}else if(i>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){e.push(t);continue}}else{if(!this._sameIndent){if(this._higherIndent){e.length&&(yield*e,e.length=0);break}continue}if(this._sameAttributes.some(s=>t.getAttribute(s)!==this._startElement.getAttribute(s)))break}e.length&&(yield*e,e.length=0),yield t}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}class $m{_node;_isForward;_previousNodesByIndent=[];_previous=null;_previousNodeIndent=null;constructor(e,t="forward"){this._node=e,this._isForward=t==="forward"}[Symbol.iterator](){return this}next(){if(!mt(this._node))return{done:!0,value:void 0};const e=this._node.getAttribute("listIndent");let t=null;if(this._previous){const s=this._previousNodeIndent;e>s?this._previousNodesByIndent[s]=this._previous:e<s?(t=this._previousNodesByIndent[e]||null,this._previousNodesByIndent.length=e):t=this._previous}const i={node:this._node,previous:this._previous,previousNodeInList:t};return this._previous=this._node,this._previousNodeIndent=e,this._node=this._isForward?this._node.nextSibling:this._node.previousSibling,{value:i,done:!1}}}class Oke{_listHead;constructor(e){this._listHead=e}[Symbol.iterator](){return new $m(this._listHead)}}class Sd{static next(){return li()}}function mt(n){return!!n&&n.is("element")&&n.hasAttribute("listItemId")}function fa(n,e={}){return[...ul(n,{...e,direction:"backward"}),...ul(n,{...e,direction:"forward"})]}function ul(n,e={}){const t=e.direction=="forward",i=Array.from(new Zs(n,{...e,includeSelf:t,sameIndent:!0,sameAttributes:"listItemId"}));return t?i:i.reverse()}function Dke(n){return Array.from(new Zs(n,{direction:"forward",higherIndent:!0}))}function Z7(n,e){const t=new Zs(n,{sameIndent:!0,sameAttributes:"listType",...e}),i=new Zs(n,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...e});return[...Array.from(t).reverse(),...i]}function ro(n){return!Zs.first(n,{sameIndent:!0,sameAttributes:"listItemId"})}function r4(n){return!Zs.first(n,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function Gm(n,e={}){n=yt(n);const t=e.withNested!==!1,i=new Set;for(const s of n)for(const r of fa(s,{higherIndent:t}))i.add(r);return Ic(i)}function by(n){n=yt(n);const e=new Set;for(const t of n)for(const i of Z7(t))e.add(i);return Ic(e)}function mS(n,e){const t=ul(n,{direction:"forward"}),i=Sd.next();for(const s of t)e.setAttribute("listItemId",i,s);return t}function qC(n,e,t){const i={};for(const[r,o]of e.getAttributes())r.startsWith("list")&&(i[r]=o);const s=ul(n,{direction:"forward"});for(const r of s)t.setAttributes(i,r);return s}function QC(n,e,{expand:t,indentBy:i=1}={}){n=yt(n);const s=t?Gm(n):n;for(const r of s){const o=r.getAttribute("listIndent")+i;o<0?wy(r,e):e.setAttribute("listIndent",o,r)}return s}function Mke(n,e){n=yt(n);const t=Gm(n),i=new Set,s=Math.min(...t.map(o=>o.getAttribute("listIndent"))),r=new Map;for(const o of t)r.set(o,Zs.first(o,{lowerIndent:!0}));for(const o of t){if(i.has(o))continue;i.add(o);const a=o.getAttribute("listIndent")-1;if(a<0){wy(o,e);continue}if(o.getAttribute("listIndent")==s){const c=Nke(o,r.get(o),e);for(const d of c)i.add(d);if(c.length)continue}e.setAttribute("listIndent",a,o)}return Ic(i)}function wy(n,e){n=yt(n);for(const t of n)t.is("element","listItem")&&e.rename(t,"paragraph");for(const t of n)for(const i of t.getAttributeKeys())i.startsWith("list")&&e.removeAttribute(i,t);return n}function dm(n){if(!n.length)return!1;const e=n[0].getAttribute("listItemId");return e?!n.some(t=>t.getAttribute("listItemId")!=e):!1}function Bke(n,e){const t=[];let i=Number.POSITIVE_INFINITY;for(const{node:s}of new $m(n.nextSibling)){const r=s.getAttribute("listIndent");if(r==0)break;r<i&&(i=r);const o=r-i;e.setAttribute("listIndent",o,s),t.push(s)}return t}function Ic(n){return Array.from(n).filter(e=>e.root.rootName!=="$graveyard").sort((e,t)=>e.index-t.index)}function fm(n){const e=n.document.selection.getSelectedElement();return e&&n.schema.isObject(e)&&n.schema.isBlock(e)?e:null}function p1(n,e){return e.checkChild(n.parent,"listItem")&&e.checkChild(n,"$text")&&!e.isObject(n)}function Nw(n){return n=="numbered"||n=="customNumbered"}function Nke(n,e,t){return ul(e,{direction:"forward"}).pop().index>n.index?qC(n,e,t):[]}class o4 extends je{_direction;constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){const e=this.editor.model,t=a4(e.document.selection);e.change(i=>{const s=[];dm(t)&&!ro(t[0])?(this._direction=="forward"&&s.push(...QC(t,i)),s.push(...mS(t[0],i))):this._direction=="forward"?s.push(...QC(t,i,{expand:!0})):s.push(...Mke(t,i));for(const r of s){if(!r.hasAttribute("listType"))continue;const o=Zs.first(r,{sameIndent:!0});o&&i.setAttribute("listType",o.getAttribute("listType"),r)}this._fireAfterExecute(s)})}_fireAfterExecute(e){this.fire("afterExecute",Ic(new Set(e)))}_checkEnabled(){let e=a4(this.editor.model.document.selection),t=e[0];if(!t)return!1;if(this._direction=="backward"||dm(e)&&!ro(e[0]))return!0;e=Gm(e),t=e[0];const i=Zs.first(t,{sameIndent:!0});return i?i.getAttribute("listType")==t.getAttribute("listType"):!1}}function a4(n){const e=Array.from(n.getSelectedBlocks()),t=e.findIndex(i=>!mt(i));return t!=-1&&(e.length=t),e}class fh extends je{type;_listWalkerOptions;constructor(e,t,i={}){super(e),this.type=t,this._listWalkerOptions=i.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.document,s=fm(t),r=Array.from(i.selection.getSelectedBlocks()).filter(a=>t.schema.checkAttribute(a,"listType")||p1(a,t.schema)),o=e.forceValue!==void 0?!e.forceValue:this.value;t.change(a=>{if(o){const c=r[r.length-1],d=ul(c,{direction:"forward"}),h=[];d.length>1&&h.push(...mS(d[1],a)),h.push(...wy(r,a)),h.push(...Bke(c,a)),this._fireAfterExecute(h)}else if((s||i.selection.isCollapsed)&&mt(r[0])){const c=Z7(s||r[0],this._listWalkerOptions);for(const d of c)a.setAttributes({...e.additionalAttributes,listType:this.type},d);this._fireAfterExecute(c)}else{const c=[];for(const d of r)if(!d.hasAttribute("listType"))!d.is("element","listItem")&&p1(d,t.schema)&&a.rename(d,"listItem"),a.setAttributes({...e.additionalAttributes,listIndent:0,listItemId:Sd.next(),listType:this.type},d),c.push(d);else for(const h of Gm(d,{withNested:!1}))h.getAttribute("listType")!=this.type&&(a.setAttributes({...e.additionalAttributes,listType:this.type},h),c.push(h));this._fireAfterExecute(c)}})}_fireAfterExecute(e){this.fire("afterExecute",Ic(new Set(e)))}_getValue(){const e=this.editor.model.document.selection,t=Array.from(e.getSelectedBlocks());if(!t.length)return!1;for(const i of t)if(i.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const e=this.editor.model,t=e.schema,i=e.document.selection,s=Array.from(i.getSelectedBlocks());if(!s.length)return!1;if(this.value)return!0;for(const r of s)if(t.checkAttribute(r,"listType")||p1(r,t))return!0;return!1}}class l4 extends je{_direction;constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){const t=this.editor.model,i=t.document.selection,s=[];t.change(r=>{const{firstElement:o,lastElement:a}=this._getMergeSubjectElements(i,e),c=o.getAttribute("listIndent")||0,d=a.getAttribute("listIndent"),h=a.getAttribute("listItemId");if(c!=d){const m=Dke(a);s.push(...QC([a,...m],r,{indentBy:c-d,expand:c<d}))}if(e){let m=i;i.isCollapsed&&(m=r.createSelection(r.createRange(r.createPositionAt(o,"end"),r.createPositionAt(a,0)))),t.deleteContent(m,{doNotResetEntireContent:i.isCollapsed});const p=m.getLastPosition().parent,w=p.nextSibling;s.push(p),w&&w!==a&&w.getAttribute("listItemId")==h&&s.push(...qC(w,p,r))}else s.push(...qC(a,o,r));this._fireAfterExecute(s)})}_fireAfterExecute(e){this.fire("afterExecute",Ic(new Set(e)))}_checkEnabled(){const e=this.editor.model,t=e.document.selection,i=fm(e);if(t.isCollapsed||i){const s=i||t.getFirstPosition().parent;if(!mt(s))return!1;const r=this._direction=="backward"?s.previousSibling:s.nextSibling;if(!r||dm([s,r]))return!1}else{const s=t.getLastPosition(),r=t.getFirstPosition();if(s.parent===r.parent||!mt(s.parent))return!1}return!0}_getMergeSubjectElements(e,t){const i=this.editor.model,s=fm(i);let r,o;if(e.isCollapsed||s){const a=s||e.getFirstPosition().parent,c=ro(a);this._direction=="backward"?(o=a,c&&!t?r=Zs.first(a,{sameIndent:!0,lowerIndent:!0}):r=a.previousSibling):(r=a,o=a.nextSibling)}else r=e.getFirstPosition().parent,o=e.getLastPosition().parent;return{firstElement:r,lastElement:o}}}class c4 extends je{_direction;constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(t=>{const i=mS(this._getStartBlock(),t);this._fireAfterExecute(i)})}_fireAfterExecute(e){this.fire("afterExecute",Ic(new Set(e)))}_checkEnabled(){const e=this.editor.model.document.selection,t=this._getStartBlock();return e.isCollapsed&&mt(t)&&!ro(t)}_getStartBlock(){const t=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?t:t.nextSibling}}class Vke extends z{static get pluginName(){return"ListItemBoldIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[Ui]}init(){const e=this.editor,t=e.plugins.get("ListFormatting"),i=e.plugins.get(Ui);!e.plugins.has("BoldEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.registerFormatAttribute("bold","listItemBold"),i.registerDowncastStrategy({scope:"item",attributeName:"listItemBold",setAttributeOnDowncast(s,r,o,a){r&&(s.addClass("ck-list-marker-bold",o),Pe.isSafari&&!(a&&a.dataPipeline)&&s.setStyle("--ck-content-list-marker-dummy-bold","0",o))}}))}afterInit(){const e=this.editor,t=e.model;!e.plugins.has("BoldEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.schema.extend("$listItem",{allowAttributes:"listItemBold"}),t.schema.setAttributeProperties("listItemBold",{isFormatting:!0}),t.schema.addAttributeCheck(i=>{if(!i.last.getAttribute("listItemId"))return!1},"listItemBold"),e.conversion.for("upcast").attributeToAttribute({model:"listItemBold",view:{name:"li",classes:"ck-list-marker-bold"}}))}}class Lke extends z{static get pluginName(){return"ListItemItalicIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[Ui]}init(){const e=this.editor,t=e.plugins.get("ListFormatting"),i=e.plugins.get(Ui);!e.plugins.has("ItalicEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.registerFormatAttribute("italic","listItemItalic"),i.registerDowncastStrategy({scope:"item",attributeName:"listItemItalic",setAttributeOnDowncast(s,r,o,a){r&&(s.addClass("ck-list-marker-italic",o),Pe.isSafari&&!(a&&a.dataPipeline)&&s.setStyle("--ck-content-list-marker-dummy-italic","0",o))}}))}afterInit(){const e=this.editor,t=e.model;!e.plugins.has("ItalicEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.schema.extend("$listItem",{allowAttributes:"listItemItalic"}),t.schema.setAttributeProperties("listItemItalic",{isFormatting:!0}),t.schema.addAttributeCheck(i=>{if(!i.last.getAttribute("listItemId"))return!1},"listItemItalic"),e.conversion.for("upcast").attributeToAttribute({model:"listItemItalic",view:{name:"li",classes:"ck-list-marker-italic"}}))}}class Fke extends z{static get pluginName(){return"ListItemFontSizeIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[Ui]}init(){const e=this.editor,t=e.plugins.get("ListFormatting"),i=e.plugins.get(Ui);if(!e.plugins.has("FontSizeEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting"))return;const s=AM(e.config.get("fontSize.options"));t.registerFormatAttribute("fontSize","listItemFontSize"),i.registerDowncastStrategy({scope:"item",attributeName:"listItemFontSize",setAttributeOnDowncast(r,o,a,c){if(o){const d=s.find(h=>h.model==o);d&&d.view&&typeof d.view!="string"?d.view.styles?(r.addClass("ck-list-marker-font-size",a),r.setStyle("--ck-content-list-marker-font-size",d.view.styles["font-size"],a)):d.view.classes&&(r.addClass(`ck-list-marker-font-size-${o}`,a),Pe.isSafari&&!(c&&c.dataPipeline)&&r.setStyle("--ck-content-list-marker-dummy-font-size","0",a)):(r.addClass("ck-list-marker-font-size",a),r.setStyle("--ck-content-list-marker-font-size",o,a))}}})}afterInit(){const e=this.editor,t=e.model;if(!e.plugins.has("FontSizeEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting"))return;t.schema.extend("$listItem",{allowAttributes:"listItemFontSize"}),t.schema.setAttributeProperties("listItemFontSize",{isFormatting:!0}),t.schema.addAttributeCheck(s=>{if(!s.last.getAttribute("listItemId"))return!1},"listItemFontSize"),e.conversion.for("upcast").elementToAttribute({model:{key:"listItemFontSize",value:s=>s.getStyle("--ck-content-list-marker-font-size")},view:{name:"li",classes:"ck-list-marker-font-size",styles:{"--ck-content-list-marker-font-size":/.*/}}});const i=AM(e.config.get("fontSize.options"));for(const s of i)s.model&&s.view&&e.conversion.for("upcast").elementToAttribute({model:{key:"listItemFontSize",value:s.model},view:{name:"li",classes:`ck-list-marker-font-size-${s.model}`}})}}class zke extends z{static get pluginName(){return"ListItemFontColorIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[Ui]}init(){const e=this.editor,t=e.plugins.get("ListFormatting"),i=e.plugins.get(Ui);!e.plugins.has("FontColorEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.registerFormatAttribute("fontColor","listItemFontColor"),i.registerDowncastStrategy({scope:"item",attributeName:"listItemFontColor",setAttributeOnDowncast(s,r,o){r&&(s.addClass("ck-list-marker-color",o),s.setStyle("--ck-content-list-marker-color",r,o))}}))}afterInit(){const e=this.editor,t=e.model;!e.plugins.has("FontColorEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.schema.extend("$listItem",{allowAttributes:"listItemFontColor"}),t.schema.setAttributeProperties("listItemFontColor",{isFormatting:!0}),t.schema.addAttributeCheck(i=>{if(!i.last.getAttribute("listItemId"))return!1},"listItemFontColor"),e.conversion.for("upcast").attributeToAttribute({model:{key:"listItemFontColor",value:i=>i.getStyle("--ck-content-list-marker-color")},view:{name:"li",classes:"ck-list-marker-color",styles:{"--ck-content-list-marker-color":/.*/}}}))}}class jke extends z{static get pluginName(){return"ListItemFontFamilyIntegration"}static get isOfficialPlugin(){return!0}static get requires(){return[Ui]}init(){const e=this.editor,t=e.plugins.get("ListFormatting"),i=e.plugins.get(Ui);!e.plugins.has("FontFamilyEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.registerFormatAttribute("fontFamily","listItemFontFamily"),i.registerDowncastStrategy({scope:"item",attributeName:"listItemFontFamily",setAttributeOnDowncast(s,r,o){r&&(s.addClass("ck-list-marker-font-family",o),s.setStyle("--ck-content-list-marker-font-family",r,o))}}))}afterInit(){const e=this.editor,t=e.model;!e.plugins.has("FontFamilyEditing")||!this.editor.config.get("list.enableListItemMarkerFormatting")||(t.schema.extend("$listItem",{allowAttributes:"listItemFontFamily"}),t.schema.setAttributeProperties("listItemFontFamily",{isFormatting:!0}),t.schema.addAttributeCheck(i=>{if(!i.last.getAttribute("listItemId"))return!1},"listItemFontFamily"),e.conversion.for("upcast").attributeToAttribute({model:{key:"listItemFontFamily",value:i=>i.getStyle("--ck-content-list-marker-font-family")},view:{name:"li",classes:"ck-list-marker-font-family",styles:{"--ck-content-list-marker-font-family":/.*/}}}))}}class Uke extends z{_loadedFormatting={};static get pluginName(){return"ListFormatting"}static get isOfficialPlugin(){return!0}static get requires(){return[Vke,Lke,Fke,zke,jke]}constructor(e){super(e),e.config.define("list.enableListItemMarkerFormatting",!0)}afterInit(){this.editor.config.get("list.enableListItemMarkerFormatting")&&this._registerPostfixerForListItemFormatting()}_registerPostfixerForListItemFormatting(){const e=this.editor.model;e.document.registerPostFixer(t=>{const i=e.document.differ.getChanges(),s=new Set;let r=!1;for(const o of i)if(o.type==="attribute")(o.attributeKey=="listItemId"||o.attributeKey=="listType"||this._isInlineOrSelectionFormatting(o.attributeKey)||Object.values(this._loadedFormatting).includes(o.attributeKey))&&(mt(o.range.start.nodeAfter)?s.add(o.range.start.nodeAfter):mt(o.range.start.parent)&&s.add(o.range.start.parent));else if(mt(o.position.nodeAfter)&&s.add(o.position.nodeAfter),mt(o.position.nodeBefore)&&s.add(o.position.nodeBefore),mt(o.position.parent)&&s.add(o.position.parent),o.type=="insert"&&o.name!="$text"){const a=t.createRangeIn(o.position.nodeAfter);for(const c of a.getItems())mt(c)&&s.add(c)}for(const o of s){const a=Hke(e,o,Object.keys(this._loadedFormatting));for(const[c,d]of Object.entries(a)){const h=this._loadedFormatting[c];(d&&Wke(t,o,h,d)||!d&&$ke(t,o,h))&&(r=!0)}}return r})}registerFormatAttribute(e,t){this._loadedFormatting[e]=t}_isInlineOrSelectionFormatting(e){return e.replace(/^selection:/,"")in this._loadedFormatting}}function Hke(n,e,t){if(ro(e))return u4(n,e,t);const i=fa(e);return u4(n,i[0],t)}function u4(n,e,t){if(!Gke(e)||n.schema.isLimit(e))return Object.fromEntries(t.map(a=>[a]));if(e.isEmpty)return Object.fromEntries(t.map(a=>[a,e.getAttribute(`selection:${a}`)]));const i=new Set(t),s={},o=n.createRangeIn(e).getWalker({ignoreElementEnd:!0});for(const{item:a}of o){for(const c of i)if(n.schema.checkAttribute(a,c)){const d=a.getAttribute(c);d===void 0?(i.delete(c),s[c]=void 0):s[c]===void 0?s[c]=d:s[c]!==d&&(i.delete(c),s[c]=void 0)}else c in s||(s[c]=void 0);if(!i.size)break;n.schema.isLimit(a)&&o.jumpTo(n.createPositionAfter(a))}return s}function Wke(n,e,t,i){const s=fa(e);let r=!1;for(const o of s)(!o.hasAttribute(t)||o.getAttribute(t)!==i)&&(n.setAttribute(t,i,o),r=!0);return r}function $ke(n,e,t){const i=fa(e);let s=!1;for(const r of i)r.hasAttribute(t)&&(n.removeAttribute(t,r),s=!0);return s}function Gke(n){return["numbered","bulleted","customNumbered","customBulleted"].includes(n.getAttribute("listType"))}class Yke extends z{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(e){return by(e)}isFirstBlockOfListItem(e){return ro(e)}isListItemBlock(e){return mt(e)}expandListBlocksToCompleteItems(e,t={}){return Gm(e,t)}isNumberedListType(e){return Nw(e)}}function Kke(n){return n.is("element","ol")||n.is("element","ul")}function ZC(n){return n.is("element","li")}function qke(n){let e=0,t=n.parent;for(;t;){if(ZC(t))e++;else{const i=t.previousSibling;i&&ZC(i)&&e++}t=t.parent}return e}function Qke(n,e,t,i=X7(t,e)){return n.createAttributeElement(J7(t),null,{priority:2*e/100-100,id:i})}function Zke(n,e,t){return n.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:t})}function J7(n){return n=="numbered"||n=="customNumbered"?"ol":"ul"}function X7(n,e){return`list-${n}-${e}`}function fr(n,e,t){const i=n.nodeBefore;if(mt(i)){let s=i;for(const{node:r}of new $m(s,"backward"))if(s=r,t.has(s)||(t.add(s),e.has(i)))return;e.add(s)}else{const s=n.nodeAfter;mt(s)&&e.add(s)}}function Jke(n,e){let t=0,i=-1,s=null,r=!1;for(const{node:o}of n){const a=o.getAttribute("listIndent");if(a>t){let c;s===null?(s=a-t,c=t):(s>a&&(s=a),c=a-s),c>i+1&&(c=i+1),e.setAttribute("listIndent",c,o),r=!0,i=c}else s=null,t=a+1,i=a}return r}function Xke(n,e,t){const i=new Set;let s=!1;for(const{node:r}of n){if(i.has(r))continue;let o=r.getAttribute("listType"),a=r.getAttribute("listItemId");if(e.has(a)&&(a=Sd.next()),e.add(a),r.is("element","listItem")){r.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,r),s=!0);continue}for(const c of ul(r,{direction:"forward"}))i.add(c),c.getAttribute("listType")!=o&&(a=Sd.next(),o=c.getAttribute("listType")),c.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,c),s=!0)}return s}function eEe(){return(n,e,t)=>{const{writer:i,schema:s}=t;if(!e.modelRange)return;const r=Array.from(e.modelRange.getItems({shallow:!0})).filter(m=>s.checkAttribute(m,"listItemId"));if(!r.length)return;const o=e.viewItem.getAttribute("data-list-item-id")||Sd.next();t.consumable.consume(e.viewItem,{attributes:"data-list-item-id"});const a=qke(e.viewItem);let c=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted";const d=r[0].getAttribute("listType");d&&(c=d);const h={listItemId:o,listIndent:a,listType:c};for(const m of r)m.hasAttribute("listItemId")||i.setAttributes(h,m);r.length>1&&r[1].getAttribute("listItemId")!=h.listItemId&&t.keepEmptyElement(r[0])}}function tEe(n,e,t,i){return()=>{const c=n.document.differ.getChanges(),d=[],h=new Set,m=new Set,p=new Set;for(const w of c)if(w.type=="insert"&&w.name!="$text")fr(w.position,h,p),w.attributes.has("listItemId")?m.add(w.position.nodeAfter):fr(w.position.getShiftedBy(w.length),h,p);else if(w.type=="remove"&&w.attributes.has("listItemId"))fr(w.position,h,p);else if(w.type=="attribute"){const A=w.range.start.nodeAfter;t.includes(w.attributeKey)?(fr(w.range.start,h,p),w.attributeNewValue===null?(fr(w.range.start.getShiftedBy(1),h,p),r(A)&&d.push(A)):m.add(A)):mt(A)&&r(A)&&d.push(A)}for(const w of h.values())d.push(...s(w,m));for(const w of new Set(d))e.reconvertItem(w)};function s(c,d){const h=[],m=new Set,p=[];for(const{node:w,previous:A}of new $m(c)){if(m.has(w))continue;const C=w.getAttribute("listIndent");A&&C<A.getAttribute("listIndent")&&(p.length=C+1),p[C]={modelAttributes:Object.fromEntries(Array.from(w.getAttributes()).filter(([E])=>t.includes(E))),modelElement:w};const k=ul(w,{direction:"forward"});for(const E of k)m.add(E),(r(E,k)||a(E,p,d))&&h.push(E)}return h}function r(c,d){const h=e.mapper.toViewElement(c);if(!h)return!1;if(o(h)||i.fire("checkElement",{modelElement:c,viewElement:h}))return!0;if(!c.is("element","paragraph")&&!c.is("element","listItem"))return!1;const p=tz(c,t,d);return p&&h.is("element","p")?!0:!!(!p&&h.is("element","span"))}function o(c){for(c=c.parent;c.is("attributeElement")&&["ol","ul","li"].includes(c.name);)c=c.parent;return!!(c.getCustomProperty("$structureSlotParent")&&!e.mapper.toModelElement(c))}function a(c,d,h){if(h.has(c))return!1;const m=e.mapper.toViewElement(c);let p=d.length-1;for(let w=m.parent;!w.is("editableElement");w=w.parent){const A=ZC(w),C=Kke(w);if(!C&&!A)continue;const k=`checkAttributes:${A?"item":"list"}`;if(i.fire(k,{viewElement:w,modelAttributes:d[p].modelAttributes,modelReferenceElement:d[p].modelElement}))break;if(C&&(p--,p<0))return!1}return!0}}function d4(n,e,t,{dataPipeline:i}={}){const s=lEe(n,e);return(r,o,a)=>{const{writer:c,mapper:d,consumable:h}=a,m=o.item;if(!n.includes(o.attributeKey)||!s(m,h))return;const p={...a.options,dataPipeline:i},w=iEe(m,d,t,c);ez(w,c,d),oEe(w,c);const A=rEe(m,w,e,c,p);aEe(m,A,e,c,p)}}function nEe(n){return(e,t,i)=>{const{writer:s,mapper:r}=i,o=e.name.split(":")[1];if(!n.checkAttribute(o,"listItemId"))return;const a=r.toViewPosition(t.position),c=t.position.getShiftedBy(t.length),d=r.toViewPosition(c,{isPhantom:!0}),m=s.createRange(a,d).getTrimmed().end.nodeBefore;m&&ez(m,s,r)}}function f4(n,{dataPipeline:e}={}){return(t,{writer:i})=>{if(!tz(t,n))return null;if(!e)return i.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const s=i.createContainerElement("p");return i.setCustomProperty("dataPipeline:transparentRendering",!0,s),s}}function iEe(n,e,t,i){const s=t.createRangeOn(n),o=e.toViewRange(s).getTrimmed().getWalker();for(const{item:a}of o)if(a.is("element")&&a.getCustomProperty("listItemMarker"))o.jumpTo(i.createPositionAfter(a));else if(a.is("element")&&!a.getCustomProperty("listItemWrapper"))return a}function sEe(n,e){return(t,i)=>{if(i.modelPosition.offset>0)return;const s=i.modelPosition.parent;if(!mt(s)||!n.some(d=>d.scope=="itemMarker"&&d.canInjectMarkerIntoElement&&d.canInjectMarkerIntoElement(s)))return;const r=i.mapper.toViewElement(s),o=e.createRangeIn(r),a=o.getWalker();let c=o.start;for(const{item:d}of a){if(d.is("element")&&i.mapper.toModelElement(d)||d.is("$textProxy"))break;d.is("element")&&d.getCustomProperty("listItemMarker")&&(c=e.createPositionAfter(d),a.skip(({previousPosition:h})=>!h.isEqual(c)))}i.viewPosition=c}}function ez(n,e,t){for(;n.parent.is("attributeElement")&&n.parent.getCustomProperty("listItemWrapper");)e.unwrap(e.createRangeOn(n),n.parent);const i=[];s(e.createPositionBefore(n).getWalker({direction:"backward"})),s(e.createRangeIn(n).getWalker());for(const r of i)e.remove(r);function s(r){for(const{item:o}of r){if(o.is("element")&&t.toModelElement(o))break;o.is("element")&&o.getCustomProperty("listItemMarker")&&i.push(o)}}}function rEe(n,e,t,i,{dataPipeline:s}){let r=i.createRangeOn(e);if(!ro(n))return r;for(const o of t){if(o.scope!="itemMarker")continue;const a=o.createElement(i,n,{dataPipeline:s});if(!a||(i.setCustomProperty("listItemMarker",!0,a),o.canInjectMarkerIntoElement&&o.canInjectMarkerIntoElement(n)?i.insert(i.createPositionAt(e,0),a):(i.insert(r.start,a),r=i.createRange(i.createPositionBefore(a),i.createPositionAfter(e))),!o.createWrapperElement||!o.canWrapElement))continue;const c=o.createWrapperElement(i,n,{dataPipeline:s});i.setCustomProperty("listItemWrapper",!0,c),o.canWrapElement(n)?r=i.wrap(r,c):(r=i.wrap(i.createRangeOn(a),c),r=i.createRange(r.start,i.createPositionAfter(e)))}return r}function oEe(n,e){let t=n.parent;for(;t.is("attributeElement")&&["ul","ol","li"].includes(t.name);){const i=t.parent;e.unwrap(e.createRangeOn(n),t),t=i}}function aEe(n,e,t,i,s){if(!n.hasAttribute("listIndent"))return;const r=n.getAttribute("listIndent");let o=n;for(let a=r;a>=0;a--){const c=Zke(i,a,o.getAttribute("listItemId")),d=Qke(i,a,o.getAttribute("listType"));for(const h of t)(h.scope=="list"||h.scope=="item")&&o.hasAttribute(h.attributeName)&&h.setAttributeOnDowncast(i,o.getAttribute(h.attributeName),h.scope=="list"?d:c,s,o);if(e=i.wrap(e,c),e=i.wrap(e,d),a==0||(o=Zs.first(o,{lowerIndent:!0}),!o))break}}function lEe(n,e){const t=e.filter(i=>i.consume===!1).map(i=>i.attributeName);return(i,s)=>{const r=[];for(const o of n)i.hasAttribute(o)&&!t.includes(o)&&r.push(`attribute:${o}`);return r.every(o=>s.test(i,o)!==!1)?(r.forEach(o=>s.consume(i,o)),!0):!1}}function tz(n,e,t=fa(n)){if(!mt(n))return!1;for(const i of n.getAttributeKeys())if(!(i.startsWith("selection:")||i=="htmlEmptyBlock")&&!e.includes(i))return!1;return t.length<2}const Sb=["listType","listIndent","listItemId"];class Ui extends z{_downcastStrategies=[];static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Hm,so,Yke,Ps,Uke]}constructor(e){super(e),e.config.define("list.multiBlock",!0)}init(){const e=this.editor,t=e.model,i=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new D("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});t.schema.register("$listItem",{allowAttributes:Sb}),i?(t.schema.extend("$container",{allowAttributesOf:"$listItem"}),t.schema.extend("$block",{allowAttributesOf:"$listItem"}),t.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):t.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const s of Sb)t.schema.setAttributeProperties(s,{copyOnReplace:!0});e.commands.add("numberedList",new fh(e,"numbered")),e.commands.add("bulletedList",new fh(e,"bulleted")),e.commands.add("customNumberedList",new fh(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new fh(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new o4(e,"forward")),e.commands.add("outdentList",new o4(e,"backward")),e.commands.add("splitListItemBefore",new c4(e,"before")),e.commands.add("splitListItemAfter",new c4(e,"after")),i&&(e.commands.add("mergeListItemBackward",new l4(e,"backward")),e.commands.add("mergeListItemForward",new l4(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration(),this._setupListItemIdConversionStrategy()}afterInit(){const t=this.editor.commands,i=t.get("indent"),s=t.get("outdent");i&&i.registerChildCommand(t.get("indentList"),{priority:"high"}),s&&s.registerChildCommand(t.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...Sb,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){const e=this.editor,t=e.commands.get("mergeListItemBackward"),i=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(s,r)=>{const o=e.model.document.selection;fm(e.model)||e.model.change(()=>{const a=o.getFirstPosition();if(o.isCollapsed&&r.direction=="backward"){if(!a.isAtStart)return;const c=a.parent;if(!mt(c))return;if(!Zs.first(c,{sameAttributes:"listType",sameIndent:!0})&&c.getAttribute("listIndent")===0)r4(c)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!t||!t.isEnabled)return;t.execute({shouldMergeOnBlocksContentLevel:h4(e.model,"backward")})}r.preventDefault(),s.stop()}else{if(o.isCollapsed&&!o.getLastPosition().isAtEnd||!i||!i.isEnabled)return;i.execute({shouldMergeOnBlocksContentLevel:h4(e.model,"forward")}),r.preventDefault(),s.stop()}})},{context:"li"})}_setupEnterIntegration(){const e=this.editor,t=e.model,i=e.commands,s=i.get("enter");this.listenTo(e.editing.view.document,"enter",(r,o)=>{const a=t.document,c=a.selection.getFirstPosition().parent;if(a.selection.isCollapsed&&mt(c)&&c.isEmpty&&!o.isSoft){const d=ro(c),h=r4(c);d&&h?(e.execute("outdentList"),o.preventDefault(),r.stop()):d&&!h?(e.execute("splitListItemAfter"),o.preventDefault(),r.stop()):h&&(e.execute("splitListItemBefore"),o.preventDefault(),r.stop())}},{context:"li"}),this.listenTo(s,"afterExecute",()=>{const r=i.get("splitListItemBefore");if(r.refresh(),!r.isEnabled)return;const a=e.model.document.selection.getLastPosition().parent;fa(a).length===2&&r.execute()})}_setupTabIntegration(){const e=this.editor;this.listenTo(e.editing.view.document,"tab",(t,i)=>{const s=i.shiftKey?"outdentList":"indentList";this.editor.commands.get(s).isEnabled&&(e.execute(s),i.stopPropagation(),i.preventDefault(),t.stop())},{context:"li"})}_setupConversion(){const e=this.editor,t=e.model,i=this.getListAttributeNames(),s=e.config.get("list.multiBlock"),r=s?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(a,{writer:c})=>c.createElement(r,{listType:""})}).elementToElement({view:"p",model:(a,{writer:c})=>a.parent&&a.parent.is("element","li")?c.createElement(r,{listType:""}):null,converterPriority:"high"}).add(a=>{a.on("element:li",eEe())}),s||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:r,view:f4(i),converterPriority:"high"}).add(a=>{a.on("attribute",d4(i,this._downcastStrategies,t)),a.on("remove",nEe(t.schema))}),e.conversion.for("dataDowncast").elementToElement({model:r,view:f4(i,{dataPipeline:!0}),converterPriority:"high"}).add(a=>{a.on("attribute",d4(i,this._downcastStrategies,t,{dataPipeline:!0}))});const o=sEe(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",o),e.data.mapper.on("modelToViewPosition",o),this.listenTo(t.document,"change:data",tEe(t,e.editing,i,this),{priority:"high"}),this.on("checkAttributes:item",(a,{viewElement:c,modelAttributes:d})=>{c.id!=d.listItemId&&(a.return=!0,a.stop())}),this.on("checkAttributes:list",(a,{viewElement:c,modelAttributes:d})=>{(c.name!=J7(d.listType)||c.id!=X7(d.listType,d.listIndent))&&(a.return=!0,a.stop())})}_setupModelPostFixing(){const e=this.editor.model,t=this.getListAttributeNames();e.document.registerPostFixer(i=>cEe(e,i,t,this)),this.on("postFixer",(i,{listNodes:s,writer:r})=>{i.return=Jke(s,r)||i.return},{priority:"high"}),this.on("postFixer",(i,{listNodes:s,writer:r,seenIds:o})=>{i.return=Xke(s,o,r)||i.return},{priority:"high"})}_setupClipboardIntegration(){const e=this.editor.model,t=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",uEe(e),{priority:"high"}),this.listenTo(t,"outputTransformation",(i,s)=>{e.change(r=>{const o=Array.from(s.content.getChildren()),a=o[o.length-1];if(o.length>1&&a.is("element")&&a.isEmpty&&o.slice(0,-1).every(mt)&&r.remove(a),s.method=="copy"||s.method=="cut"){const c=Array.from(s.content.getChildren());dm(c)&&wy(c,r)}})})}_setupAccessibilityIntegration(){const e=this.editor,t=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:t("Keystrokes that can be used in a list"),keystrokes:[{label:t("Increase list item indent"),keystroke:"Tab"},{label:t("Decrease list item indent"),keystroke:"Shift+Tab"}]})}_setupListItemIdConversionStrategy(){this.registerDowncastStrategy({scope:"item",attributeName:"listItemId",setAttributeOnDowncast(e,t,i,s){s&&(s.skipListItemIds||s.isClipboardPipeline)||e.setAttribute("data-list-item-id",t,i)}})}}function cEe(n,e,t,i){const s=n.document.differ.getChanges(),r=new Set,o=new Set,a=i.editor.config.get("list.multiBlock");let c=!1;for(const h of s){if(h.type=="insert"&&h.name!="$text"){const m=h.position.nodeAfter;if(!n.schema.checkAttribute(m,"listItemId"))for(const p of Array.from(m.getAttributeKeys()))t.includes(p)&&(e.removeAttribute(p,m),c=!0);fr(h.position,o,r),h.attributes.has("listItemId")||fr(h.position.getShiftedBy(h.length),o,r);for(const{item:p,previousPosition:w}of n.createRangeIn(m))mt(p)&&fr(w,o,r)}else h.type=="remove"?fr(h.position,o,r):h.type=="attribute"&&t.includes(h.attributeKey)&&(fr(h.range.start,o,r),h.attributeNewValue===null&&fr(h.range.start.getShiftedBy(1),o,r));if(!a&&h.type=="attribute"&&Sb.includes(h.attributeKey)){const m=h.range.start.nodeAfter;h.attributeNewValue===null&&m&&m.is("element","listItem")?(e.rename(m,"paragraph"),c=!0):h.attributeOldValue===null&&m&&m.is("element")&&m.name!="listItem"&&(e.rename(m,"listItem"),c=!0)}}const d=new Set;for(const h of o.values())c=i.fire("postFixer",{listNodes:new Oke(h),listHead:h,writer:e,seenIds:d})||c;return c}function uEe(n){return(e,[t,i])=>{const s=t.is("documentFragment")?Array.from(t.getChildren()):[t];if(!s.length)return;const o=(i?n.createSelection(i):n.document.selection).getFirstPosition();let a;if(mt(o.parent))a=o.parent;else if(mt(o.nodeBefore)&&mt(o.nodeAfter))a=o.nodeBefore;else return;n.change(c=>{const d=a.getAttribute("listType"),h=a.getAttribute("listIndent"),m=s[0].getAttribute("listIndent")||0,p=Math.max(h-m,0);for(const w of s){const A=mt(w);a.is("element","listItem")&&w.is("element","paragraph")&&c.rename(w,"listItem"),c.setAttributes({listIndent:(A?w.getAttribute("listIndent"):0)+p,listItemId:A?w.getAttribute("listItemId"):Sd.next(),listType:d},w)}})}}function h4(n,e){const t=n.document.selection;if(!t.isCollapsed)return!fm(n);if(e==="forward")return!0;const s=t.getFirstPosition().parent,r=s.previousSibling;return n.schema.isObject(r)?!1:r.isEmpty?!0:dm([s,r])}function JC(n,e,t,i){n.ui.componentFactory.add(e,()=>{const s=m4(Se,n,e,t,i);return s.set({tooltip:!0,isToggleable:!0}),s}),n.ui.componentFactory.add(`menuBar:${e}`,()=>{const s=m4(xn,n,e,t,i);return s.set({role:"menuitemcheckbox",isToggleable:!0}),s})}function m4(n,e,t,i,s){const r=e.commands.get(t),o=new n(e.locale);return o.set({label:i,icon:s}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),o.on("execute",()=>{e.execute(t),e.editing.view.focus()}),o}class dEe extends z{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||JC(this.editor,"numberedList",e("Numbered List"),WE),this.editor.ui.componentFactory.has("bulletedList")||JC(this.editor,"bulletedList",e("Bulleted List"),HE)}}class fEe extends z{static get requires(){return[Ui,dEe]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}class hEe extends je{refresh(){const e=this._getValue();this.value=e,this.isEnabled=e!=null}execute({startIndex:e=1}={}){const t=this.editor.model,i=t.document;let s=Array.from(i.selection.getSelectedBlocks()).filter(r=>mt(r)&&Nw(r.getAttribute("listType")));s=by(s),t.change(r=>{for(const o of s)r.setAttribute("listStart",e>=0?e:1,o)})}_getValue(){const t=this.editor.model.document,i=qt(t.selection.getSelectedBlocks());return i&&mt(i)&&Nw(i.getAttribute("listType"))?i.getAttribute("listStart"):null}}const nz={},iz={},sz={},rz=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:n,typeAttribute:e,listType:t}of rz)nz[n]=t,iz[n]=e,e&&(sz[e]=n);function oz(){return rz.map(n=>n.listStyle)}function gS(n){return nz[n]||null}function az(n){return sz[n]||null}function XC(n){return iz[n]||null}function mEe(n){switch(n){case"lower-alpha":return"lower-latin";case"upper-alpha":return"upper-latin";default:return n}}class gEe extends je{defaultType;_supportedTypes;constructor(e,t,i){super(e),this.defaultType=t,this._supportedTypes=i}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){const t=this.editor.model,i=t.document;t.change(s=>{this._tryToConvertItemsToList(e);let r=Array.from(i.selection.getSelectedBlocks()).filter(o=>o.hasAttribute("listType"));if(r.length){r=by(r);for(const o of r)s.setAttribute("listStyle",e.type||this.defaultType,o)}})}isStyleTypeSupported(e){return this._supportedTypes?this._supportedTypes.includes(e):!0}_getValue(){const e=qt(this.editor.model.document.selection.getSelectedBlocks());return mt(e)?e.getAttribute("listStyle"):null}_checkEnabled(){const e=this.editor,t=e.commands.get("numberedList"),i=e.commands.get("bulletedList");return t.isEnabled||i.isEnabled}_tryToConvertItemsToList(e){if(!e.type)return;const t=gS(e.type);if(!t)return;const i=this.editor,s=`${t}List`;i.commands.get(s).value||i.execute(s)}}class pEe extends je{refresh(){const e=this._getValue();this.value=e,this.isEnabled=e!=null}execute(e={}){const t=this.editor.model,i=t.document;let s=Array.from(i.selection.getSelectedBlocks()).filter(r=>mt(r)&&r.getAttribute("listType")=="numbered");s=by(s),t.change(r=>{for(const o of s)r.setAttribute("listReversed",!!e.reversed,o)})}_getValue(){const t=this.editor.model.document,i=qt(t.selection.getSelectedBlocks());return mt(i)&&i.getAttribute("listType")=="numbered"?i.getAttribute("listReversed"):null}}function g4(n){return(e,t,i)=>{const{writer:s,schema:r,consumable:o}=i;if(o.test(t.viewItem,n.viewConsumables)===!1)return;t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor));let a=!1;for(const c of t.modelRange.getItems({shallow:!0}))r.checkAttribute(c,n.attributeName)&&n.appliesToListItem(c)&&(c.hasAttribute(n.attributeName)||(s.setAttribute(n.attributeName,n.getAttributeOnUpcast(t.viewItem),c),a=!0));a&&o.consume(t.viewItem,n.viewConsumables)}}class bEe extends z{static get pluginName(){return"ListPropertiesUtils"}static get isOfficialPlugin(){return!0}getAllSupportedStyleTypes(){return oz()}getListTypeFromListStyleType(e){return gS(e)}getListStyleTypeFromTypeAttribute(e){return az(e)}getTypeAttributeFromListStyleType(e){return XC(e)}}function lz(n){const{startIndex:e,reversed:t,styles:i}=n;return{styles:wEe(i),startIndex:e||!1,reversed:t||!1}}function wEe(n){const e={listTypes:["bulleted","numbered"],useAttribute:!1};return n===!0||(n?Array.isArray(n)||typeof n=="string"?e.listTypes=yt(n):(e.listTypes=n.listTypes?yt(n.listTypes):e.listTypes,e.useAttribute=!!n.useAttribute,n.listStyleTypes&&(e.listStyleTypes=n.listStyleTypes)):e.listTypes=[]),e}const nh="default";class vEe extends z{static get requires(){return[Ui,bEe]}static get pluginName(){return"ListPropertiesEditing"}static get licenseFeatureCode(){return"LP"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}constructor(e){super(e),e.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const e=this.editor,t=e.model,i=e.plugins.get(Ui),s=e.config.get("list.properties"),r=yEe(s);for(const o of r)o.addCommand(e),t.schema.extend("$listItem",{allowAttributes:o.attributeName}),i.registerDowncastStrategy({scope:"list",attributeName:o.attributeName,setAttributeOnDowncast(a,c,d){o.setAttributeOnDowncast(a,c,d)}});e.conversion.for("upcast").add(o=>{for(const a of r)o.on("element:ol",g4(a)),o.on("element:ul",g4(a))}),i.on("checkAttributes:list",(o,{viewElement:a,modelAttributes:c,modelReferenceElement:d})=>{for(const h of r)h.appliesToListItem(d)&&h.getAttributeOnUpcast(a)!=c[h.attributeName]&&(o.return=!0,o.stop())}),this.listenTo(e.commands.get("indentList"),"afterExecute",(o,a)=>{t.change(c=>{for(const d of a)for(const h of r)h.appliesToListItem(d)&&c.setAttribute(h.attributeName,h.defaultValue,d)})}),i.on("postFixer",(o,{listNodes:a,writer:c})=>{for(const{node:d}of a)for(const h of r)h.hasValidAttribute(d)||(h.appliesToListItem(d)?c.setAttribute(h.attributeName,h.defaultValue,d):c.removeAttribute(h.attributeName,d),o.return=!0)}),i.on("postFixer",(o,{listNodes:a,writer:c})=>{for(const{node:d,previousNodeInList:h}of a)if(h&&h.getAttribute("listType")==d.getAttribute("listType"))for(const m of r){const{attributeName:p}=m;if(!m.appliesToListItem(d))continue;const w=h.getAttribute(p);d.getAttribute(p)!=w&&(c.setAttribute(p,w,d),o.return=!0)}})}}function yEe(n){const e=[],t=lz(n);if(n.styles){const i=t.styles.useAttribute;e.push({attributeName:"listStyle",defaultValue:nh,viewConsumables:{styles:"list-style-type"},addCommand(s){let r=oz();i&&(r=r.filter(o=>!!XC(o))),s.commands.add("listStyle",new gEe(s,nh,r))},appliesToListItem(s){return s.getAttribute("listType")=="numbered"||s.getAttribute("listType")=="bulleted"},hasValidAttribute(s){if(!this.appliesToListItem(s))return!s.hasAttribute("listStyle");if(!s.hasAttribute("listStyle"))return!1;const r=s.getAttribute("listStyle");return r==nh?!0:gS(r)==s.getAttribute("listType")},setAttributeOnDowncast(s,r,o){if(r&&r!==nh)if(i){const a=XC(r);if(a){s.setAttribute("type",a,o);return}}else{s.setStyle("list-style-type",r,o);return}s.removeStyle("list-style-type",o),s.removeAttribute("type",o)},getAttributeOnUpcast(s){const r=s.getStyle("list-style-type");if(r)return mEe(r);const o=s.getAttribute("type");return o?az(o):nh}})}return n.reversed&&e.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(i){i.commands.add("listReversed",new pEe(i))},appliesToListItem(i){return i.getAttribute("listType")=="numbered"},hasValidAttribute(i){return this.appliesToListItem(i)==i.hasAttribute("listReversed")},setAttributeOnDowncast(i,s,r){s?i.setAttribute("reversed","reversed",r):i.removeAttribute("reversed",r)},getAttributeOnUpcast(i){return i.hasAttribute("reversed")}}),n.startIndex&&e.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(i){i.commands.add("listStart",new hEe(i))},appliesToListItem(i){return Nw(i.getAttribute("listType"))},hasValidAttribute(i){return this.appliesToListItem(i)==i.hasAttribute("listStart")},setAttributeOnDowncast(i,s,r){s==0||s>1?i.setAttribute("start",s,r):i.removeAttribute("start",r)},getAttributeOnUpcast(i){const s=i.getAttribute("start");return s>=0?s:1}}),e}class cz extends we{children;stylesView=null;additionalPropertiesCollapsibleView=null;startIndexFieldView=null;reversedSwitchButtonView=null;focusTracker=new St;keystrokes=new Ht;focusables=new ei;focusCycler;constructor(e,{enabledProperties:t,styleButtonViews:i,styleGridAriaLabel:s}){super(e);const r=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new ui({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),i&&i.length?(this.stylesView=this._createStylesView(i,s),this.children.add(this.stylesView)):r.push("ck-list-properties_without-styles"),(t.startIndex||t.reversed)&&(this._addNumberedListPropertyViews(t),r.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:r},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const e of this.stylesView.children)this.stylesView.focusTracker.add(e.element);uy({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>me.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(e,t){const i=new we(this.locale);return i.children=i.createCollection(),i.children.addMany(e),i.setTemplate({tag:"div",attributes:{"aria-label":t,class:["ck","ck-list-styles-list"]},children:i.children}),i.children.delegate("execute").to(this),i.focus=function(){for(const s of this.children)if(s instanceof Se&&s.isOn){s.focus();return}this.children.first.focus()},i.focusTracker=new St,i.keystrokes=new Ht,i.render(),i.keystrokes.listenTo(i.element),i}_addNumberedListPropertyViews(e){const t=this.locale.t,i=[];e.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),i.push(this.startIndexFieldView)),e.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),i.push(this.reversedSwitchButtonView)),this.stylesView?(this.additionalPropertiesCollapsibleView=new QE(this.locale,i),this.additionalPropertiesCollapsibleView.set({label:t("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(i,"isEnabled",(...s)=>s.some(r=>r)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(s,r,o)=>{o||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(i)}_createStartIndexField(){const e=this.locale.t,t=new un(this.locale,e7);return t.set({label:e("Start at"),class:"ck-numbered-list-properties__start-index"}),t.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),t.fieldView.on("input",()=>{const i=t.fieldView.element,s=i.valueAsNumber;if(Number.isNaN(s)){t.errorText=e("Invalid start index value.");return}i.checkValidity()?this.fire("listStart",{startIndex:s}):t.errorText=e("Start index must be greater than 0.")}),t}_createReversedSwitchButton(){const e=this.locale.t,t=new pc(this.locale);return t.set({withText:!0,label:e("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),t.delegate("execute").to(this,"listReversed"),t}}class AEe extends z{static get pluginName(){return"ListPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.locale.t,i=e.config.get("list.properties"),s=lz(i),r=s.styles.listTypes;if(r.includes("bulleted")){const o=[{label:t("Toggle the disc list style"),tooltip:t("Disc"),type:"disc",icon:Bwe},{label:t("Toggle the circle list style"),tooltip:t("Circle"),type:"circle",icon:Owe},{label:t("Toggle the square list style"),tooltip:t("Square"),type:"square",icon:Lwe}],a=t("Bulleted List"),c=t("Bulleted list styles toolbar"),d="bulletedList";e.ui.componentFactory.add(d,p4({editor:e,normalizedConfig:s,parentCommandName:d,buttonLabel:a,buttonIcon:HE,styleGridAriaLabel:c,styleDefinitions:o})),e.ui.componentFactory.add(`menuBar:${d}`,b4({editor:e,normalizedConfig:s,parentCommandName:d,buttonLabel:a,styleGridAriaLabel:c,styleDefinitions:o}))}if(r.includes("numbered")||i.startIndex||i.reversed){const o=[{label:t("Toggle the decimal list style"),tooltip:t("Decimal"),type:"decimal",icon:Mwe},{label:t("Toggle the decimal with leading zero list style"),tooltip:t("Decimal with leading zero"),type:"decimal-leading-zero",icon:Dwe},{label:t("Toggle the lowerroman list style"),tooltip:t("Lowerroman"),type:"lower-roman",icon:Vwe},{label:t("Toggle the upperroman list style"),tooltip:t("Upper-roman"),type:"upper-roman",icon:zwe},{label:t("Toggle the lowerlatin list style"),tooltip:t("Lower-latin"),type:"lower-latin",icon:Nwe},{label:t("Toggle the upperlatin list style"),tooltip:t("Upper-latin"),type:"upper-latin",icon:Fwe}],a=t("Numbered List"),c=t("Numbered list styles toolbar"),d="numberedList";e.ui.componentFactory.add(d,p4({editor:e,normalizedConfig:s,parentCommandName:d,buttonLabel:a,buttonIcon:WE,styleGridAriaLabel:c,styleDefinitions:o})),r.includes("numbered")&&e.ui.componentFactory.add(`menuBar:${d}`,b4({editor:e,normalizedConfig:s,parentCommandName:d,buttonLabel:a,styleGridAriaLabel:c,styleDefinitions:o}))}}}function p4({editor:n,normalizedConfig:e,parentCommandName:t,buttonLabel:i,buttonIcon:s,styleGridAriaLabel:r,styleDefinitions:o}){const a=n.commands.get(t);return c=>{const d=ls(c,jm),h=d.buttonView;return d.bind("isEnabled").to(a),d.class="ck-list-styles-dropdown",h.on("execute",()=>{n.execute(t),n.editing.view.focus()}),h.set({label:i,icon:s,tooltip:!0,isToggleable:!0}),h.bind("isOn").to(a,"value",m=>!!m),d.once("change:isOpen",()=>{const m=_Ee({editor:n,normalizedConfig:e,dropdownView:d,parentCommandName:t,styleGridAriaLabel:r,styleDefinitions:o});d.panelView.children.add(m)}),d.on("execute",()=>{n.editing.view.focus()}),d}}function uz({editor:n,listStyleCommand:e,parentCommandName:t}){const i=n.locale,s=n.commands.get(t);return({label:r,type:o,icon:a,tooltip:c})=>{const d=new Se(i);return d.set({label:r,icon:a,tooltip:c}),d.bind("isOn").to(e,"value",h=>h===o),d.on("execute",()=>{s.value?e.value===o?n.execute(t):e.value!==o&&n.execute("listStyle",{type:o}):n.model.change(()=>{n.execute("listStyle",{type:o})})}),d}}function _Ee({editor:n,normalizedConfig:e,dropdownView:t,parentCommandName:i,styleDefinitions:s,styleGridAriaLabel:r}){const o=n.locale,a={...e,...i!="numberedList"?{startIndex:!1,reversed:!1}:null},c=i.replace("List","");let d=null;if(e.styles.listTypes.includes(c)){const m=n.commands.get("listStyle"),p=uz({editor:n,parentCommandName:i,listStyleCommand:m}),w=e.styles.listStyleTypes;let A=s;if(w){const k=w[c];k&&(A=s.filter(E=>k.includes(E.type)))}const C=dz(m);d=A.filter(C).map(p)}const h=new cz(o,{styleGridAriaLabel:r,enabledProperties:a,styleButtonViews:d});if(e.styles.listTypes.includes(c)&&JE(t,()=>h.stylesView.children.find(m=>m.isOn)),a.startIndex){const m=n.commands.get("listStart");h.startIndexFieldView.bind("isEnabled").to(m),h.startIndexFieldView.fieldView.bind("value").to(m),h.on("listStart",(p,w)=>n.execute("listStart",w))}if(a.reversed){const m=n.commands.get("listReversed");h.reversedSwitchButtonView.bind("isEnabled").to(m),h.reversedSwitchButtonView.bind("isOn").to(m,"value",p=>!!p),h.on("listReversed",()=>{const p=m.value;n.execute("listReversed",{reversed:!p})})}return h.delegate("execute").to(t),h}function b4({editor:n,normalizedConfig:e,parentCommandName:t,buttonLabel:i,styleGridAriaLabel:s,styleDefinitions:r}){return o=>{const a=new Zr(o),c=n.commands.get(t),d=n.commands.get("listStyle"),h=dz(d),m=uz({editor:n,parentCommandName:t,listStyleCommand:d}),p=e.styles.listStyleTypes;let w=r;if(p){const k=c.type,E=p[k];E&&(w=r.filter(S=>E.includes(S.type)))}const A=w.filter(h).map(m),C=new cz(o,{styleGridAriaLabel:s,enabledProperties:{...e,startIndex:!1,reversed:!1},styleButtonViews:A});return C.delegate("execute").to(a),a.buttonView.set({label:i,icon:t==="bulletedList"?HE:WE}),a.panelView.children.add(C),a.bind("isEnabled").to(c,"isEnabled"),a.on("execute",()=>{n.editing.view.focus()}),a}}function dz(n){return typeof n.isStyleTypeSupported=="function"?e=>n.isStyleTypeSupported(e.type):()=>!0}class CEe extends z{static get requires(){return[vEe,AEe]}static get pluginName(){return"ListProperties"}static get isOfficialPlugin(){return!0}}class xEe extends je{constructor(e){super(e),this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){const e=this._getSelectedItems();this.value=this._getValue(e),this.isEnabled=!!e.length}execute(e={}){this.editor.model.change(t=>{const i=this._getSelectedItems(),s=e.forceValue===void 0?!this._getValue(i):e.forceValue;for(const r of i)s?t.setAttribute("todoListChecked",!0,r):t.removeAttribute("todoListChecked",r)})}_getValue(e){return e.every(t=>t.getAttribute("todoListChecked"))}_getSelectedItems(){const e=this.editor.model,t=e.schema,i=e.document.selection.getFirstRange(),s=i.start.parent,r=[];t.checkAttribute(s,"todoListChecked")&&r.push(...fa(s));for(const o of i.getItems({shallow:!0}))t.checkAttribute(o,"todoListChecked")&&!r.includes(o)&&r.push(...fa(o));return r}}class kEe extends Mr{domEventType=["change"];onDomEvent(e){if(e.target){const t=this.view.domConverter.mapDomToView(e.target);t&&t.is("element","input")&&t.getAttribute("type")=="checkbox"&&t.findAncestor({classes:"todo-list__label"})&&this.fire("todoCheckboxChange",e)}}}const EEe=ty("Ctrl+Enter");class SEe extends z{static get pluginName(){return"TodoListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Ui]}init(){const e=this.editor,t=e.model,i=e.editing,s=e.plugins.get(Ui),o=e.config.get("list.multiBlock")?"paragraph":"listItem";e.commands.add("todoList",new fh(e,"todo")),e.commands.add("checkTodoList",new xEe(e)),i.view.addObserver(kEe),t.schema.extend("$listItem",{allowAttributes:"todoListChecked"}),t.schema.addAttributeCheck(a=>{const c=a.last;if(!c.getAttribute("listItemId")||c.getAttribute("listType")!="todo")return!1},"todoListChecked"),e.conversion.for("upcast").add(a=>{a.on("element:input",IEe()),a.on("element:li",TEe(),{priority:"low"}),a.on("element:label",b1({name:"label",classes:"todo-list__label"})),a.on("element:label",b1({name:"label",classes:["todo-list__label","todo-list__label_without-description"]})),a.on("element:span",b1({name:"span",classes:"todo-list__label__description"})),a.on("element:ul",REe({name:"ul",classes:"todo-list"}))}),e.conversion.for("downcast").elementToElement({model:o,view:(a,{writer:c})=>{if(Qp(a,s.getListAttributeNames()))return c.createContainerElement("span",{class:"todo-list__label__description"})},converterPriority:"highest"}),s.registerDowncastStrategy({scope:"list",attributeName:"listType",setAttributeOnDowncast(a,c,d){c=="todo"?a.addClass("todo-list",d):a.removeClass("todo-list",d)}}),s.registerDowncastStrategy({scope:"itemMarker",attributeName:"todoListChecked",createElement(a,c,{dataPipeline:d}){if(c.getAttribute("listType")!="todo")return null;const h=a.createUIElement("input",{type:"checkbox",...c.getAttribute("todoListChecked")?{checked:"checked"}:null,...d?{disabled:"disabled"}:{tabindex:"-1"}});if(d)return h;const m=a.createContainerElement("span",{contenteditable:"false"},h);return m.getFillerOffset=()=>null,m},canWrapElement(a){return Qp(a,s.getListAttributeNames())},createWrapperElement(a,c,{dataPipeline:d}){const h=["todo-list__label"];return Qp(c,s.getListAttributeNames())||h.push("todo-list__label_without-description"),a.createAttributeElement(d?"label":"span",{class:h.join(" ")})}}),s.on("checkElement",(a,{modelElement:c,viewElement:d})=>{const h=Qp(c,s.getListAttributeNames());d.hasClass("todo-list__label__description")!=h&&(a.return=!0,a.stop())}),s.on("checkElement",(a,{modelElement:c,viewElement:d})=>{const h=c.getAttribute("listType")=="todo"&&ro(c);let m=!1;const p=e.editing.view.createPositionBefore(d).getWalker({direction:"backward"});for(const{item:w}of p){if(w.is("element")&&e.editing.mapper.toModelElement(w))break;w.is("element","input")&&w.getAttribute("type")=="checkbox"&&(m=!0)}m!=h&&(a.return=!0,a.stop())}),s.on("postFixer",(a,{listNodes:c,writer:d})=>{for(const{node:h,previousNodeInList:m}of c){if(!m||m.getAttribute("listItemId")!=h.getAttribute("listItemId"))continue;const p=m.hasAttribute("todoListChecked"),w=h.hasAttribute("todoListChecked");w&&!p?(d.removeAttribute("todoListChecked",h),a.return=!0):!w&&p&&(d.setAttribute("todoListChecked",!0,h),a.return=!0)}}),t.document.registerPostFixer(a=>{const c=t.document.differ.getChanges();let d=!1;for(const h of c)if(h.type=="attribute"&&h.attributeKey=="listType"){const m=h.range.start.nodeAfter;h.attributeOldValue=="todo"&&m.hasAttribute("todoListChecked")&&(a.removeAttribute("todoListChecked",m),d=!0)}else if(h.type=="insert"&&h.name!="$text")for(const{item:m}of a.createRangeOn(h.position.nodeAfter))m.is("element")&&m.getAttribute("listType")!="todo"&&m.hasAttribute("todoListChecked")&&(a.removeAttribute("todoListChecked",m),d=!0);return d}),this.listenTo(i.view.document,"keydown",(a,c)=>{mc(c)===EEe&&(e.execute("checkTodoList"),a.stop())},{priority:"high"}),this.listenTo(i.view.document,"todoCheckboxChange",(a,c)=>{const d=c.target;if(!d||!d.is("element","input"))return;const h=i.view.createPositionAfter(d),p=i.mapper.toModelPosition(h).parent;p&&mt(p)&&p.getAttribute("listType")=="todo"&&this._handleCheckmarkChange(p)}),this.listenTo(i.view.document,"arrowKey",OEe(t,e.locale),{context:"$text"}),this.listenTo(i.mapper,"viewToModelPosition",(a,c)=>{const d=c.viewPosition.parent,h=d.is("attributeElement","li")&&c.viewPosition.offset==0,m=w4(d)&&c.viewPosition.offset<=1,p=d.is("element","span")&&d.getAttribute("contenteditable")=="false"&&w4(d.parent);if(!h&&!m&&!p)return;const w=c.modelPosition.nodeAfter;w&&w.getAttribute("listType")=="todo"&&(c.modelPosition=t.createPositionAt(w,0))},{priority:"low"}),this._initAriaAnnouncements()}_handleCheckmarkChange(e){const t=this.editor,i=t.model,s=Array.from(i.document.selection.getRanges());i.change(r=>{r.setSelection(e,"end"),t.execute("checkTodoList"),r.setSelection(s)})}_initAriaAnnouncements(){const{model:e,ui:t,t:i}=this.editor;let s=null;t&&e.document.selection.on("change:range",()=>{const r=e.document.selection.focus.parent,o=v4(s),a=v4(r);o&&!a?t.ariaLiveAnnouncer.announce(i("Leaving a to-do list")):!o&&a&&t.ariaLiveAnnouncer.announce(i("Entering a to-do list")),s=r})}}function TEe(){return(n,e,t)=>{const{writer:i,schema:s}=t;if(!e.modelRange)return;const r=Array.from(e.modelRange.getItems({shallow:!0})).filter(o=>o.getAttribute("listType")==="todo"&&s.checkAttribute(o,"listItemId")).reduce((o,a)=>{const c=a.getAttribute("listItemId");return o.has(c)||o.set(c,fa(a)),o},new Map);for(const[,o]of r.entries())if(o.some(a=>a.getAttribute("todoListChecked")))for(const a of o)i.setAttribute("todoListChecked",!0,a)}}function IEe(){return(n,e,t)=>{const i=e.modelCursor,s=i.parent,r=e.viewItem;if(!t.consumable.test(r,{name:!0})||r.getAttribute("type")!="checkbox"||!i.isAtStart||!s.hasAttribute("listType"))return;t.consumable.consume(r,{name:!0});const o=t.writer;o.setAttribute("listType","todo",s),e.viewItem.hasAttribute("checked")&&o.setAttribute("todoListChecked",!0,s),e.modelRange=o.createRange(i)}}function b1(n){const e=new ji(n);return(t,i,s)=>{const r=e.match(i.viewItem);r&&s.consumable.consume(i.viewItem,r.match)&&Object.assign(i,s.convertChildren(i.viewItem,i.modelCursor))}}function REe(n){const e=new ji(n);return(t,i,s)=>{const r=e.match(i.viewItem);if(!r)return;const o=r.match;o.name=!1,s.consumable.consume(i.viewItem,o)}}function Qp(n,e){return(n.is("element","paragraph")||n.is("element","listItem"))&&n.getAttribute("listType")=="todo"&&ro(n)&&PEe(n,e)}function PEe(n,e){for(const t of n.getAttributeKeys())if(!t.startsWith("selection:")&&!e.includes(t))return!1;return!0}function OEe(n,e){return(t,i)=>{const s=ny(i.keyCode,e.contentLanguageDirection),r=n.schema,o=n.document.selection;if(!o.isCollapsed)return;const a=o.getFirstPosition(),c=a.parent;if(s=="right"&&a.isAtEnd){const d=r.getNearestSelectionRange(n.createPositionAfter(c),"forward");if(!d)return;const h=d.start.parent;h&&mt(h)&&h.getAttribute("listType")=="todo"&&(n.change(m=>m.setSelection(d)),i.preventDefault(),i.stopPropagation(),t.stop())}else if(s=="left"&&a.isAtStart&&mt(c)&&c.getAttribute("listType")=="todo"){const d=r.getNearestSelectionRange(n.createPositionBefore(c),"backward");if(!d)return;n.change(h=>h.setSelection(d)),i.preventDefault(),i.stopPropagation(),t.stop()}}}function w4(n){return!!n&&n.is("attributeElement")&&n.hasClass("todo-list__label")}function v4(n){return!n||!n.is("element","paragraph")&&!n.is("element","listItem")?!1:n.getAttribute("listType")=="todo"}class DEe extends z{static get pluginName(){return"TodoListUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.t;JC(this.editor,"todoList",e("To-do List"),mve)}}class MEe extends z{static get requires(){return[SEe,DEe]}static get pluginName(){return"TodoList"}static get isOfficialPlugin(){return!0}}function y4(n,e){const t=(i,s,r)=>{if(!r.consumable.consume(s.item,i.name))return;const o=s.attributeNewValue,a=r.writer,c=r.mapper.toViewElement(s.item),d=[...c.getChildren()].find(m=>m.getCustomProperty("media-content"));a.remove(d);const h=n.getMediaViewElement(a,o,e);a.insert(a.createPositionAt(c,0),h)};return i=>{i.on("attribute:url:media",t)}}function BEe(n,e,t){return e.setCustomProperty("media",!0,n),Tc(n,e,{label:t})}function A4(n,e,t,i){return n.createContainerElement("figure",{class:"media"},[e.getMediaViewElement(n,t,i),n.createSlot()])}function _4(n){const e=n.getSelectedElement();return e&&e.is("element","media")?e:null}function fz(n,e,t,i){n.change(s=>{const r=s.createElement("media",{url:e});n.insertObject(r,t,null,{setSelection:"on",findOptimalPosition:i?"auto":void 0})})}class NEe extends je{refresh(){const e=this.editor.model,t=e.document.selection,i=_4(t);this.value=i?i.getAttribute("url"):void 0,this.isEnabled=LEe(t)||VEe(t,e)}execute(e){const t=this.editor.model,i=t.document.selection,s=_4(i);s?t.change(r=>{r.setAttribute("url",e,s)}):fz(t,e,i,!0)}}function VEe(n,e){let i=my(n,e).start.parent;return i.isEmpty&&!e.schema.isLimit(i)&&(i=i.parent),e.schema.checkChild(i,"media")}function LEe(n){const e=n.getSelectedElement();return!!e&&e.name==="media"}const FEe="0 0 64 42";class zEe{locale;providerDefinitions;constructor(e,t){const i=t.providers,s=t.extraProviders||[],r=new Set(t.removeProviders),o=i.concat(s).filter(a=>{const c=a.name;return c?!r.has(c):(lt("media-embed-no-provider-name",{provider:a}),!1)});this.locale=e,this.providerDefinitions=o}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,i){return this._getMedia(t).getViewElement(e,i)}_getMedia(e){if(!e)return new C4(this.locale);e=e.trim();for(const t of this.providerDefinitions){const i=t.html,s=yt(t.url);for(const r of s){const o=this._getUrlMatches(e,r);if(o)return new C4(this.locale,e,o,i)}}return null}_getUrlMatches(e,t){let i=e.match(t);if(i)return i;let s=e.replace(/^https?:\/\//,"");return i=s.match(t),i||(s=s.replace(/^www\./,""),i=s.match(t),i)?i:null}}class C4{url;_locale;_match;_previewRenderer;constructor(e,t,i,s){this.url=this._getValidUrl(t),this._locale=e,this._match=i,this._previewRenderer=s}getViewElement(e,t){const i={};let s;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),t.renderForEditingView&&(i.class="ck-media__wrapper");const r=this._getPreviewHtml(t);s=e.createRawElement("div",i,(o,a)=>{a.setContentOf(o,r)})}else this.url&&(i.url=this.url),s=e.createEmptyElement(t.elementName,i);return e.setCustomProperty("media-content",!0,s),s}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const e=new Br,t=this._locale.t;return e.content=jwe,e.viewBox=FEe,new Vi({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}}class Vw extends z{static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}registry;constructor(e){super(e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:t=>{const i=t[1],s=t[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${i}${s?`?start=${s}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new zEe(e.locale,e.config.get("mediaEmbed"))}init(){const e=this.editor,t=e.model.schema,i=e.t,s=e.conversion,r=e.config.get("mediaEmbed.previewsInData"),o=e.config.get("mediaEmbed.elementName"),a=this.registry;e.commands.add("mediaEmbed",new NEe(e)),t.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),s.for("dataDowncast").elementToStructure({model:"media",view:(c,{writer:d})=>{const h=c.getAttribute("url");return A4(d,a,h,{elementName:o,renderMediaPreview:!!h&&r})}}),s.for("dataDowncast").add(y4(a,{elementName:o,renderMediaPreview:r})),s.for("editingDowncast").elementToStructure({model:"media",view:(c,{writer:d})=>{const h=c.getAttribute("url"),m=A4(d,a,h,{elementName:o,renderForEditingView:!0});return BEe(m,d,i("media widget"))}}),s.for("editingDowncast").add(y4(a,{elementName:o,renderForEditingView:!0})),s.for("upcast").elementToElement({view:c=>["oembed",o].includes(c.name)&&c.getAttribute("url")?{name:!0}:null,model:(c,{writer:d})=>{const h=c.getAttribute("url");return a.hasMedia(h)?d.createElement("media",{url:h}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(c,{writer:d})=>{const h=c.getAttribute("data-oembed-url");return a.hasMedia(h)?d.createElement("media",{url:h}):null}}).add(c=>{const d=(h,m,p)=>{if(!p.consumable.consume(m.viewItem,{name:!0,classes:"media"}))return;const{modelRange:w,modelCursor:A}=p.convertChildren(m.viewItem,m.modelCursor);m.modelRange=w,m.modelCursor=A,qt(w.getItems())||p.consumable.revert(m.viewItem,{name:!0,classes:"media"})};c.on("element:figure",d)})}}const jEe=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class UEe extends z{static get requires(){return[sS,so,oS]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}_timeoutId;_positionToInsert;constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){const e=this.editor,t=e.model.document,i=e.plugins.get("ClipboardPipeline");this.listenTo(i,"inputTransformation",()=>{const r=t.selection.getFirstRange(),o=Xt.fromPosition(r.start);o.stickiness="toPrevious";const a=Xt.fromPosition(r.end);a.stickiness="toNext",t.once("change:data",()=>{this._embedMediaBetweenPositions(o,a),o.detach(),a.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(me.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,t){const i=this.editor,s=i.plugins.get(Vw).registry,r=new Bi(e,t),o=r.getWalker({ignoreElementEnd:!0});let a="";for(const d of o)d.item.is("$textProxy")&&(a+=d.item.data);if(a=a.trim(),!a.match(jEe)){r.detach();return}if(!s.hasMedia(a)){r.detach();return}if(!i.commands.get("mediaEmbed").isEnabled){r.detach();return}this._positionToInsert=Xt.fromPosition(e),this._timeoutId=me.window.setTimeout(()=>{i.model.change(d=>{this._timeoutId=null,d.remove(r),r.detach();let h=null;this._positionToInsert.root.rootName!=="$graveyard"&&(h=this._positionToInsert),fz(i.model,a,h,!1),this._positionToInsert.detach(),this._positionToInsert=null}),i.plugins.get(so).requestUndoOnBackspace()},100)}}class HEe extends we{focusTracker;keystrokes;urlInputView;_validators;_urlInputViewInfoDefault;_urlInputViewInfoTip;constructor(e,t){super(t),this.focusTracker=new St,this.keystrokes=new Ht,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),va({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.value=e.trim()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const e=this.locale.t,t=new un(this.locale,os),i=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,i.inputMode="url",i.on("input",()=>{t.infoText=i.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=i.element.value.trim()}),t}}class WEe extends z{static get requires(){return[Vw,ns]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}_formView;init(){const e=this.editor;e.ui.componentFactory.add("mediaEmbed",()=>{const t=this.editor.locale.t,i=this._createDialogButton(Se);return i.tooltip=!0,i.label=t("Insert media"),i}),e.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const t=this.editor.locale.t,i=this._createDialogButton(xn);return i.label=t("Media"),i})}_createDialogButton(e){const t=this.editor,i=new e(t.locale),s=t.commands.get("mediaEmbed"),r=this.editor.plugins.get("Dialog");return i.icon=Uwe,i.bind("isEnabled").to(s,"isEnabled"),i.on("execute",()=>{r.id==="mediaEmbed"?r.hide():this._showDialog()}),i}_showDialog(){const e=this.editor,t=e.plugins.get("Dialog"),i=e.commands.get("mediaEmbed"),s=e.locale.t,r=i.value!==void 0;if(!this._formView){const o=e.plugins.get(Vw).registry;this._formView=new(Cd(HEe))($Ee(e.t,o),e.locale),this._formView.on("submit",()=>this._handleSubmitForm())}t.show({id:"mediaEmbed",title:s("Media embed"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=i.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:s("Cancel"),withText:!0,onExecute:()=>t.hide()},{label:s(r?"Save":"Insert"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const e=this.editor,t=e.plugins.get("Dialog");this._formView.isValid()&&(e.execute("mediaEmbed",this._formView.url),t.hide(),e.editing.view.focus())}}function $Ee(n,e){return[t=>{if(!t.url.length)return n("The URL must not be empty.")},t=>{if(!e.hasMedia(t.url))return n("This media URL is not supported.")}]}class GEe extends z{static get requires(){return[Vw,WEe,UEe,Cl]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}tt.arrowup,tt.arrowdown,tt.esc;tt.enter,tt.tab;class YEe extends je{refresh(){const e=this.editor.model,t=e.schema,i=e.document.selection;this.isEnabled=KEe(i,t,e)}execute(){const e=this.editor.model;e.change(t=>{const i=t.createElement("pageBreak");e.insertObject(i,null,null,{setSelection:"after"})})}}function KEe(n,e,t){const i=qEe(n,t);return e.checkChild(i,"pageBreak")}function qEe(n,e){const i=my(n,e).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}class QEe extends z{static get pluginName(){return"PageBreakEditing"}static get licenseFeatureCode(){return"PB"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){const e=this.editor,t=e.model.schema,i=e.t,s=e.conversion;t.register("pageBreak",{inheritAllFrom:"$blockObject"}),s.for("dataDowncast").elementToStructure({model:"pageBreak",view:(r,{writer:o})=>o.createContainerElement("div",{class:"page-break",style:"page-break-after: always"},o.createContainerElement("span",{style:"display: none"}))}),s.for("editingDowncast").elementToStructure({model:"pageBreak",view:(r,{writer:o})=>{const a=i("Page break"),c=o.createContainerElement("div"),d=o.createRawElement("span",{class:"page-break__label"},function(h){h.innerText=i("Page break")});return o.addClass("page-break",c),o.insert(o.createPositionAt(c,0),d),ZEe(c,o,a)}}),s.for("upcast").elementToElement({view:r=>{const o=r.getStyle("page-break-before")=="always",a=r.getStyle("page-break-after")=="always";if(!o&&!a)return null;if(r.childCount==1){const c=r.getChild(0);if(!c.is("element","span")||c.getStyle("display")!="none")return null}else if(r.childCount>1)return null;return{name:!0,styles:[...o?["page-break-before"]:[],...a?["page-break-after"]:[]],...r.hasClass("page-break")&&{classes:["page-break"]}}},model:"pageBreak",converterPriority:"high"}),e.commands.add("pageBreak",new YEe(e))}}function ZEe(n,e,t){return e.setCustomProperty("pageBreak",!0,n),Tc(n,e,{label:t})}class JEe extends z{static get pluginName(){return"PageBreakUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("pageBreak",()=>{const t=this._createButton(Se);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:pageBreak",()=>this._createButton(xn))}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("pageBreak"),r=new e(t.locale),o=i.t;return r.set({label:o("Page break"),icon:qwe}),r.bind("isEnabled").to(s,"isEnabled"),this.listenTo(r,"execute",()=>{t.execute("pageBreak"),t.editing.view.focus()}),r}}class XEe extends z{static get requires(){return[QEe,JEe,Cl]}static get pluginName(){return"PageBreak"}static get isOfficialPlugin(){return!0}}function eSe(n,e){const t=[];for(const i of e.createRangeIn(n)){const s=i.item;s.is("element","a")&&!s.hasAttribute("href")&&(s.hasAttribute("id")||s.hasAttribute("name"))&&t.push(s)}for(const i of t){const s=i.parent.getChildIndex(i)+1,r=i.getChildren();e.insertChild(s,r,i.parent)}}function hz(n){const e=parseFloat(n);return n.endsWith("pt")?$u(e*96/72):n.endsWith("pc")?$u(e*12*96/72):n.endsWith("in")?$u(e*96):n.endsWith("cm")?$u(e*96/2.54):n.endsWith("mm")?$u(e/10*96/2.54):n}function x4(n){return n!==void 0&&n.endsWith("px")}function $u(n){return Math.round(n)+"px"}function tSe(n,e,t){if(!n.childCount)return;const i=new sr(n.document),s=iSe(n,i);if(!s.length)return;const r={},o=[];for(const a of s)if(a.indent!==void 0){sSe(a)||(o.length=0);const c=`${a.id}:${a.indent}`,d=Math.min(a.indent-1,o.length);if(d<o.length&&o[d].id!==a.id&&(o.length=d),d<o.length-1)o.length=d+1;else{const m=rSe(a,e);if(d>o.length-1||o[d].listElement.name!=m.type){d==0&&m.type=="ol"&&a.id!==void 0&&r[c]&&(m.startIndex=r[c]);const p=cSe(m,i,t);if(x4(a.marginLeft)&&(d==0||x4(o[d-1].marginLeft))){let w=a.marginLeft;d>0&&(w=$u(parseFloat(w)-parseFloat(o[d-1].marginLeft))),i.setStyle("padding-left",w,p)}if(o.length==0){const w=a.element.parent,A=w.getChildIndex(a.element)+1;i.insertChild(A,p,w)}else{const w=o[d-1].listItemElements;i.appendChild(p,w[w.length-1])}o[d]={...a,listElement:p,listItemElements:[]},d==0&&a.id!==void 0&&(r[c]=m.startIndex||1)}}const h=a.element.name=="li"?a.element:i.createElement("li");i.appendChild(h,o[d].listElement),o[d].listItemElements.push(h),d==0&&a.id!==void 0&&r[c]++,a.element!=h&&i.appendChild(a.element,h),dSe(a.element,i),i.removeStyle("text-indent",a.element),i.removeStyle("margin-left",a.element)}else{const c=o.find(d=>d.marginLeft==a.marginLeft);if(c){const d=c.listItemElements;i.appendChild(a.element,d[d.length-1]),i.removeStyle("margin-left",a.element)}else o.length=0}}function nSe(n,e){for(const t of e.createRangeIn(n)){const i=t.item;if(i.is("element","li")){const s=i.getChild(0);s&&s.is("element","p")&&e.unwrapElement(s)}}}function iSe(n,e){const t=e.createRangeIn(n),i=[],s=new Set;for(const r of t.getItems()){if(!r.is("element")||!r.name.match(/^(p|h\d+|li|div)$/))continue;let o=fSe(r);if(o!==void 0&&parseFloat(o)==0&&!Array.from(r.getClassNames()).find(a=>a.startsWith("MsoList"))&&(o=void 0),r.hasStyle("mso-list")&&r.getStyle("mso-list")!=="none"||o!==void 0&&s.has(o)){const a=uSe(r);i.push({element:r,id:a.id,order:a.order,indent:a.indent,marginLeft:o}),o!==void 0&&s.add(o)}else s.clear()}return i}function sSe(n){const e=n.element.previousSibling;if(!e){const t=n.element.parent;return w1(t)&&(!t.previousSibling||w1(t.previousSibling))}return w1(e)}function w1(n){return n.is("element","ol")||n.is("element","ul")}function rSe(n,e){const t=new RegExp(`@list l${n.id}:level${n.indent}\\s*({[^}]*)`,"gi"),i=/mso-level-number-format:([^;]{0,100});/gi,s=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,r=new RegExp(`@list\\s+l${n.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),o=new RegExp(`@list l${n.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),a=r.exec(e),c=o.exec(e),d=a&&!c,h=t.exec(e);let m="decimal",p="ol",w=null;if(h&&h[1]){const A=i.exec(h[1]);if(A&&A[1]&&(m=A[1].trim(),p=m!=="bullet"&&m!=="image"?"ol":"ul"),m==="bullet"){const C=oSe(n.element);C&&(m=C)}else{const C=s.exec(h[1]);C&&C[1]&&(w=parseInt(C[1]))}d&&(p="ol")}return{type:p,startIndex:w,style:lSe(m),isLegalStyleList:d}}function oSe(n){if(n.name=="li"&&n.parent.name=="ul"&&n.parent.hasAttribute("type"))return n.parent.getAttribute("type");const e=aSe(n);if(!e)return null;const t=e._data;return t==="o"?"circle":t===""?"disc":t===""?"square":null}function aSe(n){if(n.getChild(0).is("$text"))return null;for(const e of n.getChildren()){if(!e.is("element","span"))continue;const t=e.getChild(0);if(t)return t.is("$text")?t:t.getChild(0)}return null}function lSe(n){if(n.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(n){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return n;default:return null}}function cSe(n,e,t){const i=e.createElement(n.type);return n.style&&e.setStyle("list-style-type",n.style,i),n.startIndex&&n.startIndex>1&&e.setAttribute("start",n.startIndex,i),n.isLegalStyleList&&t&&e.addClass("legal-list",i),i}function uSe(n){const e=n.getStyle("mso-list");if(e===void 0)return{};const t=e.match(/(^|\s{1,100})l(\d+)/i),i=e.match(/\s{0,100}lfo(\d+)/i),s=e.match(/\s{0,100}level(\d+)/i);return t&&i&&s?{id:t[2],order:i[1],indent:parseInt(s[1])}:{indent:1}}function dSe(n,e){const t=new ji({name:"span",styles:{"mso-list":"Ignore"}}),i=e.createRangeIn(n);for(const s of i)s.type==="elementStart"&&t.match(s.item)&&e.remove(s.item)}function fSe(n){const e=n.getStyle("margin-left");return e===void 0||e.endsWith("px")?e:hz(e)}function hSe(n,e){if(!n.childCount)return;const t=new sr(n.document),i=gSe(n,t);pSe(i,n,t),wSe(i,n,t),bSe(n,t);const s=vSe(n,t);s.length&&ASe(s,ySe(e),t)}function mSe(n){return btoa(n.match(/\w{2}/g).map(e=>String.fromCharCode(parseInt(e,16))).join(""))}function gSe(n,e){const t=e.createRangeIn(n),i=new ji({name:/v:(.+)/}),s=[];for(const r of t){if(r.type!="elementStart")continue;const o=r.item,a=o.previousSibling,c=a&&a.is("element")?a.name:null,d=["Chart"],h=i.match(o),m=o.getAttribute("o:gfxdata"),p=c==="v:shapetype",w=m&&d.some(A=>o.getAttribute("id").includes(A));h&&m&&!p&&!w&&s.push(r.item.getAttribute("id"))}return s}function pSe(n,e,t){const i=t.createRangeIn(e),s=new ji({name:"img"}),r=[];for(const o of i)if(o.item.is("element")&&s.match(o.item)){const a=o.item,c=a.getAttribute("v:shapes")?a.getAttribute("v:shapes").split(" "):[];c.length&&c.every(d=>n.indexOf(d)>-1)?r.push(a):a.getAttribute("src")||r.push(a)}for(const o of r)t.remove(o)}function bSe(n,e){const t=e.createRangeIn(n),i=new ji({name:/v:(.+)/}),s=[];for(const r of t)r.type=="elementStart"&&i.match(r.item)&&s.push(r.item);for(const r of s)e.remove(r)}function wSe(n,e,t){const i=t.createRangeIn(e),s=[];for(const a of i)if(a.type=="elementStart"&&a.item.is("element","v:shape")){const c=a.item.getAttribute("id");if(n.includes(c))continue;r(a.item.parent.getChildren(),c)||s.push(a.item)}for(const a of s){const c={src:o(a)};a.hasAttribute("alt")&&(c.alt=a.getAttribute("alt"));const d=t.createElement("img",c);t.insertChild(a.index+1,d,a.parent)}function r(a,c){for(const d of a){if(d.is("element")&&(d.name=="img"&&d.getAttribute("v:shapes")==c||r(d.getChildren(),c)))return!0}return!1}function o(a){for(const c of a.getChildren()){if(c.is("element")&&c.getAttribute("src"))return c.getAttribute("src")}}}function vSe(n,e){const t=e.createRangeIn(n),i=new ji({name:"img"}),s=[];let r=0;for(const o of t)o.item.is("element")&&i.match(o.item)&&(o.item.getAttribute("src").startsWith("file://")&&s.push({element:o.item,imageIndex:r}),r++);return s}function ySe(n){if(!n)return[];const e=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,t=new RegExp("(?:("+e.source+"))([\\da-fA-F\\s]+)\\}","g"),i=n.match(t),s=[];if(i)for(const r of i){let o=!1;r.includes("\\pngblip")?o="image/png":r.includes("\\jpegblip")&&(o="image/jpeg"),o&&s.push({hex:r.replace(e,"").replace(/[^\da-fA-F]/g,""),type:o})}return s}function ASe(n,e,t){for(let i=0;i<n.length;i++){const{element:s,imageIndex:r}=n[i],o=e[r];if(o){const a=`data:${o.type};base64,${mSe(o.hex)}`;t.setAttribute("src",a,s)}}}function _Se(n){const e=[],t=new sr(n.document);for(const{item:i}of t.createRangeIn(n))if(i.is("element")){for(const s of i.getClassNames())/\bmso/gi.exec(s)&&t.removeClass(s,i);for(const s of i.getStyleNames())/\bmso/gi.exec(s)&&t.removeStyle(s,i);(i.is("element","w:sdt")||i.is("element","w:sdtpr")&&i.isEmpty||i.is("element","o:p")&&i.isEmpty)&&e.push(i)}for(const i of e){const s=i.parent,r=s.getChildIndex(i);t.insertChild(r,i.getChildren(),s),t.remove(i)}}function CSe(n,e,t=!1,i=!1){for(const s of e.createRangeIn(n).getItems()){if(!s.is("element","table")&&!s.is("element","td")&&!s.is("element","th"))continue;if(t&&i&&s.is("element","table")){const a=s.parent?.is("element","div")?s.parent:null,c=s.parent?.parent?.is("element","div")?s.parent.parent:null,d=a??c;d&&d.getAttribute("align")==="center"&&!s.getAttribute("align")?(e.setStyle("margin-left","auto",s),e.setStyle("margin-right","auto",s)):d&&d.getAttribute("align")==="right"&&!s.getAttribute("align")?(e.setStyle("margin-left","auto",s),e.setStyle("margin-right","0",s)):!d&&!s.getAttribute("align")&&(e.setStyle("margin-left","0",s),e.setStyle("margin-right","auto",s))}const r=["left","top","right","bottom"];if(r.every(a=>!s.hasStyle(`border-${a}-style`)))e.setStyle("border-style","none",s);else for(const a of r)s.hasStyle(`border-${a}-style`)||e.setStyle(`border-${a}-style`,"none",s);const o=["width","height",...r.map(a=>`border-${a}-width`),...r.map(a=>`padding-${a}`)];for(const a of o)s.hasStyle(a)&&e.setStyle(a,hz(s.getStyle(a)),s)}}function mz(n,e){for(const t of e.createRangeIn(n).getItems())t.is("element","table")&&(t.getStyle("width")==="0px"&&e.removeStyle("width",t),t.getAttribute("width")==="0"&&e.removeAttribute("width",t))}function xSe(n,e){const t=new Map,i=new Map;let s=null;for(const{item:o}of e.createRangeIn(n))if(o.is("element")){if(o.getStyle("mso-element")==="footnote-list"){s=o;continue}if(o.hasStyle("mso-footnote-id")){const a=o.findAncestor("element",c=>c.getStyle("mso-element")==="footnote");if(a){const c=a.getAttribute("id");i.set(c,a)}else{const c=o.getStyle("mso-footnote-id");t.set(c,o)}continue}}if(!t.size||!s)return;const r=ESe(e);e.replace(s,r);for(const[o,a]of t){const c=i.get(o);if(!c)continue;e.replace(a,SSe(e,o));const d=TSe(e,o);kSe(e,c);for(const h of c.getChildren()){let m=h;h.is("element")&&(m=e.clone(h,!0)),e.appendChild(m,d.content)}e.appendChild(d.listItem,r)}}function kSe(n,e){const t=[],i=[];for(const{item:s}of n.createRangeIn(e))if(s.is("element")&&s.getStyle("mso-footnote-id")){t.unshift(s);const{nextSibling:r}=s;r?.is("$text")&&r.data.startsWith(" ")&&i.unshift(r)}for(const s of t)n.remove(s);for(const s of i){const r=s.data.substring(1);if(r.length>0){const o=s.parent,a=o.getChildIndex(s),c=n.createText(r);n.remove(s),n.insertChild(a,c,o)}else n.remove(s)}return e}function ESe(n){return n.createElement("ol",{class:"footnotes"})}function SSe(n,e){const t=n.createElement("sup",{class:"footnote"}),i=n.createElement("a",{id:`ref-${e}`,href:`#${e}`});return n.appendChild(i,t),t}function TSe(n,e){const t=n.createElement("li",{id:e,class:"footnote-definition"}),i=n.createElement("a",{href:`#ref-${e}`,class:"footnote-backlink"}),s=n.createElement("div",{class:"footnote-content"});return n.appendChild(n.createText("^"),i),n.appendChild(i,t),n.appendChild(s,t),{listItem:t,content:s}}const ISe=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,RSe=/xmlns:o="urn:schemas-microsoft-com/i;class PSe{document;hasMultiLevelListPlugin;hasTablePropertiesPlugin;hasExtendedTableBlockAlignment;constructor(e,t=!1,i=!1,s=!1){this.document=e,this.hasMultiLevelListPlugin=t,this.hasTablePropertiesPlugin=i,this.hasExtendedTableBlockAlignment=s}isActive(e){return ISe.test(e)||RSe.test(e)}execute(e){const t=new sr(this.document),{body:i,stylesString:s}=e._parsedData;eSe(i,t),tSe(i,s,this.hasMultiLevelListPlugin),hSe(i,e.dataTransfer.getData("text/rtf")),CSe(i,t,this.hasTablePropertiesPlugin,this.hasExtendedTableBlockAlignment),mz(i,t),xSe(i,t),_Se(i),e.content=i}}function OSe(n,e){for(const t of n.getChildren())if(t.is("element","b")&&t.getStyle("font-weight")==="normal"){const i=n.getChildIndex(t);e.remove(t),e.insertChild(i,t.getChildren(),n)}}function DSe(n,e){const t=new ry(e.document.stylesProcessor),i=new ay(t,{renderingMode:"data"}),s=i.blockElements,r=i.inlineObjectElements,o=[];for(const a of e.createRangeIn(n)){const c=a.item;if(c.is("element","br")){const d=k4(c,"forward",e,{blockElements:s,inlineObjectElements:r}),h=k4(c,"backward",e,{blockElements:s,inlineObjectElements:r}),m=E4(d,s);(E4(h,s)||m)&&o.push(c)}}for(const a of o)a.hasClass("Apple-interchange-newline")?e.remove(a):e.replace(a,e.createElement("p"))}function k4(n,e,t,{blockElements:i,inlineObjectElements:s}){let r=t.createPositionAt(n,e=="forward"?"after":"before");return r=r.getLastMatchingPosition(({item:o})=>o.is("element")&&!i.includes(o.name)&&!s.includes(o.name),{direction:e}),e=="forward"?r.nodeAfter:r.nodeBefore}function E4(n,e){return!!n&&n.is("element")&&e.includes(n.name)}function MSe(n,e,t){const i=new Set;for(const s of e.createRangeIn(n).getItems())!s.is("view:$textProxy")||!s.data.includes("	")||BSe(s.parent)&&i.add(s.textNode);for(const s of i)NSe(s,e,t)}function BSe(n){let e=n;for(;e;){if(e.is("element")&&e.getStyle?.("white-space")==="pre-wrap")return!0;e=e.parent}return!1}function NSe(n,e,t){const{parent:i,data:s}=n,r=s.replaceAll("	"," ".repeat(t)),o=i.getChildIndex(n);e.remove(n),e.insertChild(o,e.createText(r),i)}const VSe=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class LSe{document;constructor(e){this.document=e}isActive(e){return VSe.test(e)}execute(e){const t=new sr(this.document),{body:i}=e._parsedData;OSe(i,t),nSe(i,t),DSe(i,t),MSe(i,t,8),e.content=i}}function FSe(n,e){for(const t of n.getChildren())t.is("element","table")&&t.hasAttribute("xmlns")&&e.removeAttribute("xmlns",t)}function zSe(n,e){for(const t of n.getChildren())if(t.is("element","google-sheets-html-origin")){const i=n.getChildIndex(t);e.remove(t),e.insertChild(i,t.getChildren(),n)}}function jSe(n,e){for(const t of Array.from(n.getChildren()))t.is("element","style")&&e.remove(t)}const USe=/<google-sheets-html-origin/i;class HSe{document;constructor(e){this.document=e}isActive(e){return USe.test(e)}execute(e){const t=new sr(this.document),{body:i}=e._parsedData;zSe(i,t),FSe(i,t),mz(i,t),jSe(i,t),e.content=i}}function WSe(n){return S4(S4(n)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g,"</").replace(/ <o:p><\/o:p>/g,"<o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function $Se(n){n.querySelectorAll("span[style*=spacerun]").forEach(e=>{const t=e,i=t.innerText.length||0;t.innerText=Array(i+1).join(" ").substr(0,i)})}function S4(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length===1?" ":Array(t.length+1).join(" ").substr(0,t.length))}function GSe(n,e){const t=new DOMParser;n=n.replace(/<!--\[if gte vml 1]>/g,""),n=n.replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,"");const i=WSe(qSe(n)),s=t.parseFromString(i,"text/html");$Se(s);const r=s.body.innerHTML,o=YSe(s,e),a=KSe(s);return{body:o,bodyString:r,styles:a.styles,stylesString:a.stylesString}}function YSe(n,e){const t=new ry(e),i=new ay(t,{renderingMode:"data"}),s=n.createDocumentFragment(),r=n.body.childNodes;for(;r.length>0;)s.appendChild(r[0]);return i.domToView(s,{skipComments:!0})}function KSe(n){const e=[],t=[],i=Array.from(n.getElementsByTagName("style"));for(const s of i)s.sheet&&s.sheet.cssRules&&s.sheet.cssRules.length&&(e.push(s.sheet),t.push(s.innerHTML));return{styles:e,stylesString:t.join(" ")}}function qSe(n){const e="</body>",t="</html>",i=n.indexOf(e);if(i<0)return n;const s=n.indexOf(t,i+e.length);return n.substring(0,i+e.length)+(s>=0?n.substring(s):"")}class QSe extends z{static get pluginName(){return"PasteFromOffice"}static get licenseFeatureCode(){return"PFO"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[Ps]}init(){const e=this.editor,t=e.plugins.get("ClipboardPipeline"),i=e.editing.view.document,s=[],r=this.editor.plugins.has("MultiLevelListEditing"),o=this.editor.plugins.has("TablePropertiesEditing"),a=!!this.editor.config.get("experimentalFlags.useExtendedTableBlockAlignment");s.push(new PSe(i,r,o,a)),s.push(new LSe(i)),s.push(new HSe(i)),t.on("inputTransformation",(c,d)=>{if(d._isTransformedWithPasteFromOffice||e.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const m=d.dataTransfer.getData("text/html"),p=s.find(w=>w.isActive(m));p&&(d._parsedData||(d._parsedData=GSe(m,i.stylesProcessor)),p.execute(d),d._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}class ZSe extends je{constructor(e){super(e),this.affectsData=!1,this.value=!1}execute(){const e="ck-show-blocks",t=this.editor.editing.view;t.change(i=>{for(const s of t.document.roots)s.hasClass(e)?(i.removeClass(e,s),this.value=!1):(i.addClass(e,s),this.value=!0)})}}class JSe extends z{static get pluginName(){return"ShowBlocksEditing"}static get isOfficialPlugin(){return!0}init(){const{editor:e}=this;e.commands.add("showBlocks",new ZSe(e))}}class XSe extends z{static get pluginName(){return"ShowBlocksUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;e.ui.componentFactory.add("showBlocks",()=>{const t=this._createButton(Se);return t.set({tooltip:!0,icon:sve}),t}),e.ui.componentFactory.add("menuBar:showBlocks",()=>this._createButton(xn))}_createButton(e){const t=this.editor,i=t.locale,s=t.commands.get("showBlocks"),r=new e(i),o=i.t;return r.set({label:o("Show blocks"),isToggleable:!0,role:"menuitemcheckbox"}),r.bind("isEnabled").to(s),r.bind("isOn").to(s,"value",s,"isEnabled",(a,c)=>a&&c),this.listenTo(r,"execute",()=>{t.execute("showBlocks"),t.editing.view.focus()}),r}}class eTe extends z{static get pluginName(){return"ShowBlocks"}static get isOfficialPlugin(){return!0}static get requires(){return[JSe,XSe]}}const Zp="SourceEditingMode";class tTe extends z{static get pluginName(){return"SourceEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Ad]}_elementReplacer;_replacedRoots;_dataFromRoots;constructor(e){super(e),this.set("isSourceEditingMode",!1),this._elementReplacer=new a6,this._replacedRoots=new Map,this._dataFromRoots=new Map,e.config.define("sourceEditing.allowCollaborationFeatures",!1)}init(){this._checkCompatibility();const e=this.editor,t=e.locale.t;e.ui.componentFactory.add("sourceEditing",()=>{const i=this._createButton(Se);return i.set({label:t("Source"),icon:rve,tooltip:!0,class:"ck-source-editing-button"}),i}),e.ui.componentFactory.add("menuBar:sourceEditing",()=>{const i=this._createButton(xn);return i.set({label:t("Show source"),role:"menuitemcheckbox"}),i}),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",(i,s,r)=>{r?(this._hideVisibleDialog(),this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())}),this.on("change:isEnabled",(i,s,r)=>this._handleReadOnlyMode(!r)),this.listenTo(e,"change:isReadOnly",(i,s,r)=>this._handleReadOnlyMode(r))),e.data.on("get",()=>{this.isSourceEditingMode&&this.updateEditorData()},{priority:"high"})}updateEditorData(){const e=this.editor,t={};for(const[i,s]of this._replacedRoots){const r=this._dataFromRoots.get(i),o=s.dataset.value;r!==o&&(t[i]=o,this._dataFromRoots.set(i,o))}Object.keys(t).length&&e.data.set(t,{batchType:{isUndoable:!0},suppressErrorInCollaboration:!0})}_checkCompatibility(){const e=this.editor,t=e.config.get("sourceEditing.allowCollaborationFeatures");if(!t&&e.plugins.has("RealTimeCollaborativeEditing"))throw new D("source-editing-incompatible-with-real-time-collaboration",null);!t&&["CommentsEditing","TrackChangesEditing","RevisionHistory"].some(s=>e.plugins.has(s))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),e.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){const e=this.editor,t=e.editing.view,i=e.model;i.change(s=>{s.setSelection(null),s.removeSelectionAttribute(i.document.selection.getAttributeKeys())});for(const[s,r]of t.domRoots){const o=nTe(e.data.get({rootName:s})),a=si(r.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),c=si(r.ownerDocument,"div",{class:"ck-source-editing-area","data-value":o},[a]);a.value=o,a.setSelectionRange(0,0),a.addEventListener("input",()=>{c.dataset.value=a.value,e.ui.update()}),t.change(d=>{const h=t.document.getRoot(s);d.addClass("ck-hidden",h)}),e.ui.setEditableElement("sourceEditing:"+s,a),this._replacedRoots.set(s,c),this._elementReplacer.replace(r,c),this._dataFromRoots.set(s,o)}this._hideDocumentOutline(),this._refreshAnnotationsVisibility(),this._focusSourceEditing()}_hideSourceEditing(){const t=this.editor.editing.view;this.updateEditorData(),t.change(i=>{for(const[s]of this._replacedRoots)i.removeClass("ck-hidden",t.document.getRoot(s))}),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),this._showDocumentOutline(),this._refreshAnnotationsVisibility(),t.focus()}_hideDocumentOutline(){this.editor.plugins.has("DocumentOutlineUI")&&(this.editor.plugins.get("DocumentOutlineUI").view.element.style.display="none")}_showDocumentOutline(){this.editor.plugins.has("DocumentOutlineUI")&&(this.editor.plugins.get("DocumentOutlineUI").view.element.style.display="")}_refreshAnnotationsVisibility(){this.editor.plugins.has("Annotations")&&this.editor.plugins.get("Annotations").refreshVisibility()}_focusSourceEditing(){const e=this.editor,[t]=this._replacedRoots.values(),i=t.querySelector("textarea");e.editing.view.document.isFocused=!1,i.focus()}_disableCommands(){const e=this.editor;for(const t of e.commands.commands())t.forceDisabled(Zp);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").forceDisabled(Zp)}_enableCommands(){const e=this.editor;for(const t of e.commands.commands())t.clearForceDisabled(Zp);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").clearForceDisabled(Zp)}_handleReadOnlyMode(e){if(this.isSourceEditingMode)for(const[,t]of this._replacedRoots)t.querySelector("textarea").readOnly=e}_isAllowedToHandleSourceEditingMode(){const t=this.editor.ui.view.editable;return t&&!t.hasExternalElement}_hideVisibleDialog(){if(this.editor.plugins.has("Dialog")){const e=this.editor.plugins.get("Dialog");e.isOpen&&e.hide()}}_createButton(e){const t=this.editor,i=new e(t.locale);return i.set({withText:!0,isToggleable:!0}),i.bind("isOn").to(this,"isSourceEditingMode"),i.bind("isEnabled").to(this,"isEnabled",t,"isReadOnly",t.plugins.get(Ad),"hasAny",(s,r,o)=>!(!s||r||o)),this.listenTo(i,"execute",()=>{this.isSourceEditingMode=!this.isSourceEditingMode}),i}}function nTe(n){return iTe(n)?Rhe(n):n}function iTe(n){return n.startsWith("<")}class sTe extends we{tiles;focusTracker;keystrokes;constructor(e){super(e),this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}}),this.focusTracker=new St,this.keystrokes=new Ht,uy({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>me.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}createTile(e,t){const i=new Se(this.locale);return i.set({label:e,withText:!0,class:"ck-character-grid__tile"}),i.extendTemplate({attributes:{title:t},on:{mouseover:i.bindTemplate.to("mouseover"),focus:i.bindTemplate.to("focus")}}),i.on("mouseover",()=>{this.fire("tileHover",{name:t,character:e})}),i.on("focus",()=>{this.fire("tileFocus",{name:t,character:e})}),i.on("execute",()=>{this.fire("execute",{name:t,character:e})}),i}render(){super.render();for(const e of this.tiles)this.focusTracker.add(e.element);this.tiles.on("change",(e,{added:t,removed:i})=>{if(t.length>0)for(const s of t)this.focusTracker.add(s.element);if(i.length>0)for(const s of i)this.focusTracker.remove(s.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}focus(){this.tiles.first.focus()}}class rTe extends we{constructor(e){super(e);const t=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",oTe),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:t.to("name",i=>i||"")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:t.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function oTe(n){return n===null?"":"U+"+("0000"+n.codePointAt(0).toString(16)).slice(-4)}class aTe extends we{items;focusTracker;keystrokes;_focusCycler;categoriesView;gridView;infoView;constructor(e,t,i,s){super(e),this.categoriesView=t,this.gridView=i,this.infoView=s,this.items=this.createCollection(),this.focusTracker=new St,this.keystrokes=new Ht,this._focusCycler=new ui({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[this.categoriesView,this.gridView,this.infoView],attributes:{tabindex:"-1"}}),this.items.add(this.categoriesView),this.items.add(this.gridView)}render(){super.render(),this.focusTracker.add(this.categoriesView.element),this.focusTracker.add(this.gridView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class lTe extends we{_groupNames;_dropdownView;constructor(e,t){super(e),this.set("currentGroupName",Array.from(t.entries())[0][0]),this._groupNames=t,this._dropdownView=new un(e,XE),this.setTemplate({tag:"div",attributes:{class:["ck","ck-character-categories"]},children:[this._dropdownView]})}render(){super.render(),this._setupDropdown()}focus(){this._dropdownView.focus()}_setupDropdown(){const e=new Wn;for(const[s,r]of this._groupNames){const o={type:"button",model:new cl({name:s,label:r,role:"menuitemradio",withText:!0})};o.model.bind("isOn").to(this,"currentGroupName",a=>a===s),e.add(o)}const t=this.locale.t,i=t("Category");this._dropdownView.set({label:i,isEmpty:!1}),this._dropdownView.fieldView.panelPosition=this.locale.uiLanguageDirection==="rtl"?"se":"sw",this._dropdownView.fieldView.buttonView.set({withText:!0,tooltip:i,ariaLabel:i,ariaLabelledBy:void 0,isOn:!1}),this._dropdownView.fieldView.buttonView.bind("label").to(this,"currentGroupName",s=>this._groupNames.get(s)),this._dropdownView.fieldView.on("execute",({source:s})=>{this.currentGroupName=s.name}),Sc(this._dropdownView.fieldView,e,{ariaLabel:i,role:"menu"})}}const v1="All";class cTe extends z{_characters;_groups;_allSpecialCharactersGroupLabel;static get requires(){return[u7,ns]}static get pluginName(){return"SpecialCharacters"}static get licenseFeatureCode(){return"SCH"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}constructor(e){super(e);const t=e.t;this._characters=new Map,this._groups=new Map,this._allSpecialCharactersGroupLabel=t("All")}init(){const e=this.editor;e.ui.componentFactory.add("specialCharacters",()=>{const t=this._createDialogButton(Se);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:specialCharacters",()=>this._createDialogButton(xn))}addItems(e,t,i={label:e}){if(e===v1)throw new D("special-character-invalid-group-name",null);const s=this._getGroup(e,i.label);for(const r of t)s.items.add(r.title),this._characters.set(r.title,r.character)}getGroups(){const e=Array.from(this._groups.keys()),t=this.editor.config.get("specialCharacters.order")||[],i=t.find(s=>!e.includes(s));if(i)throw new D("special-character-invalid-order-group-name",null,{invalidGroup:i});return new Set([...t,...e])}getCharactersForGroup(e){if(e===v1)return new Set(this._characters.keys());const t=this._groups.get(e);if(t)return t.items}getCharacter(e){return this._characters.get(e)}_getGroup(e,t){return this._groups.has(e)||this._groups.set(e,{items:new Set,label:t}),this._groups.get(e)}_updateGrid(e,t){t.tiles.clear();const i=this.getCharactersForGroup(e);for(const s of i){const r=this.getCharacter(s);t.tiles.add(t.createTile(r,s))}}_createDropdownPanelContent(e){const t=Array.from(this.getGroups()).map(a=>[a,this._groups.get(a).label]),i=new Map([[v1,this._allSpecialCharactersGroupLabel],...t]),s=new lTe(e,i),r=new sTe(e),o=new rTe(e);return r.on("tileHover",(a,c)=>{o.set(c)}),r.on("tileFocus",(a,c)=>{o.set(c)}),s.on("change:currentGroupName",(a,c,d)=>{this._updateGrid(d,r)}),this._updateGrid(s.currentGroupName,r),{categoriesView:s,gridView:r,infoView:o}}_createDialogButton(e){const t=this.editor,i=t.locale,s=new e(t.locale),r=t.commands.get("insertText"),o=i.t,a=this.editor.plugins.get("Dialog");return s.set({label:o("Special characters"),icon:ove,isToggleable:!0}),s.bind("isOn").to(a,"id",c=>c==="specialCharacters"),s.bind("isEnabled").to(r,"isEnabled"),s.on("execute",()=>{if(a.id==="specialCharacters"){a.hide();return}this._showDialog()}),s}_showDialog(){const e=this.editor,t=e.plugins.get("Dialog"),i=e.locale,s=i.t,{categoriesView:r,gridView:o,infoView:a}=this._createDropdownPanelContent(i),c=new aTe(i,r,o,a);o.on("execute",(d,h)=>{e.execute("insertText",{text:h.character})}),t.show({id:"specialCharacters",title:s("Special characters"),className:"ck-special-characters",content:c,position:vs.EDITOR_TOP_SIDE})}}class gz extends z{static get pluginName(){return"SpecialCharactersArrows"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Arrows",[{title:t("leftwards simple arrow"),character:""},{title:t("rightwards simple arrow"),character:""},{title:t("upwards simple arrow"),character:""},{title:t("downwards simple arrow"),character:""},{title:t("leftwards double arrow"),character:""},{title:t("rightwards double arrow"),character:""},{title:t("upwards double arrow"),character:""},{title:t("downwards double arrow"),character:""},{title:t("leftwards dashed arrow"),character:""},{title:t("rightwards dashed arrow"),character:""},{title:t("upwards dashed arrow"),character:""},{title:t("downwards dashed arrow"),character:""},{title:t("leftwards arrow to bar"),character:""},{title:t("rightwards arrow to bar"),character:""},{title:t("upwards arrow to bar"),character:""},{title:t("downwards arrow to bar"),character:""},{title:t("up down arrow with base"),character:""},{title:t("back with leftwards arrow above"),character:""},{title:t("end with leftwards arrow above"),character:""},{title:t("on with exclamation mark with left right arrow above"),character:""},{title:t("soon with rightwards arrow above"),character:""},{title:t("top with upwards arrow above"),character:""}],{label:t("Arrows")})}}class pz extends z{static get pluginName(){return"SpecialCharactersText"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Text",[{character:"",title:t("Single left-pointing angle quotation mark")},{character:"",title:t("Single right-pointing angle quotation mark")},{character:"",title:t("Left-pointing double angle quotation mark")},{character:"",title:t("Right-pointing double angle quotation mark")},{character:"",title:t("Left single quotation mark")},{character:"",title:t("Right single quotation mark")},{character:"",title:t("Left double quotation mark")},{character:"",title:t("Right double quotation mark")},{character:"",title:t("Single low-9 quotation mark")},{character:"",title:t("Double low-9 quotation mark")},{character:"",title:t("Inverted exclamation mark")},{character:"",title:t("Inverted question mark")},{character:"",title:t("Two dot leader")},{character:"",title:t("Horizontal ellipsis")},{character:"",title:t("Double dagger")},{character:"",title:t("Per mille sign")},{character:"",title:t("Per ten thousand sign")},{character:"",title:t("Double exclamation mark")},{character:"",title:t("Question exclamation mark")},{character:"",title:t("Exclamation question mark")},{character:"",title:t("Double question mark")},{character:"",title:t("Copyright sign")},{character:"",title:t("Registered sign")},{character:"",title:t("Trade mark sign")},{character:"",title:t("Section sign")},{character:"",title:t("Paragraph sign")},{character:"",title:t("Reversed paragraph sign")}],{label:t("Text")})}}class bz extends z{static get pluginName(){return"SpecialCharactersMathematical"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Mathematical",[{character:"<",title:t("Less-than sign")},{character:">",title:t("Greater-than sign")},{character:"",title:t("Less-than or equal to")},{character:"",title:t("Greater-than or equal to")},{character:"",title:t("En dash")},{character:"",title:t("Em dash")},{character:"",title:t("Macron")},{character:"",title:t("Overline")},{character:"",title:t("Degree sign")},{character:"",title:t("Minus sign")},{character:"",title:t("Plus-minus sign")},{character:"",title:t("Division sign")},{character:"",title:t("Fraction slash")},{character:"",title:t("Multiplication sign")},{character:"",title:t("Latin small letter f with hook")},{character:"",title:t("Integral")},{character:"",title:t("N-ary summation")},{character:"",title:t("Infinity")},{character:"",title:t("Square root")},{character:"",title:t("Tilde operator")},{character:"",title:t("Approximately equal to")},{character:"",title:t("Almost equal to")},{character:"",title:t("Not equal to")},{character:"",title:t("Identical to")},{character:"",title:t("Element of")},{character:"",title:t("Not an element of")},{character:"",title:t("Contains as member")},{character:"",title:t("N-ary product")},{character:"",title:t("Logical and")},{character:"",title:t("Logical or")},{character:"",title:t("Not sign")},{character:"",title:t("Intersection")},{character:"",title:t("Union")},{character:"",title:t("Partial differential")},{character:"",title:t("For all")},{character:"",title:t("There exists")},{character:"",title:t("Empty set")},{character:"",title:t("Nabla")},{character:"",title:t("Asterisk operator")},{character:"",title:t("Proportional to")},{character:"",title:t("Angle")},{character:"",title:t("Vulgar fraction one quarter")},{character:"",title:t("Vulgar fraction one half")},{character:"",title:t("Vulgar fraction three quarters")}],{label:t("Mathematical")})}}class wz extends z{static get pluginName(){return"SpecialCharactersLatin"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Latin",[{character:"",title:t("Latin capital letter a with macron")},{character:"",title:t("Latin small letter a with macron")},{character:"",title:t("Latin capital letter a with breve")},{character:"",title:t("Latin small letter a with breve")},{character:"",title:t("Latin capital letter a with ogonek")},{character:"",title:t("Latin small letter a with ogonek")},{character:"",title:t("Latin capital letter c with acute")},{character:"",title:t("Latin small letter c with acute")},{character:"",title:t("Latin capital letter c with circumflex")},{character:"",title:t("Latin small letter c with circumflex")},{character:"",title:t("Latin capital letter c with dot above")},{character:"",title:t("Latin small letter c with dot above")},{character:"",title:t("Latin capital letter c with caron")},{character:"",title:t("Latin small letter c with caron")},{character:"",title:t("Latin capital letter d with caron")},{character:"",title:t("Latin small letter d with caron")},{character:"",title:t("Latin capital letter d with stroke")},{character:"",title:t("Latin small letter d with stroke")},{character:"",title:t("Latin capital letter e with macron")},{character:"",title:t("Latin small letter e with macron")},{character:"",title:t("Latin capital letter e with breve")},{character:"",title:t("Latin small letter e with breve")},{character:"",title:t("Latin capital letter e with dot above")},{character:"",title:t("Latin small letter e with dot above")},{character:"",title:t("Latin capital letter e with ogonek")},{character:"",title:t("Latin small letter e with ogonek")},{character:"",title:t("Latin capital letter e with caron")},{character:"",title:t("Latin small letter e with caron")},{character:"",title:t("Latin capital letter g with circumflex")},{character:"",title:t("Latin small letter g with circumflex")},{character:"",title:t("Latin capital letter g with breve")},{character:"",title:t("Latin small letter g with breve")},{character:"",title:t("Latin capital letter g with dot above")},{character:"",title:t("Latin small letter g with dot above")},{character:"",title:t("Latin capital letter g with cedilla")},{character:"",title:t("Latin small letter g with cedilla")},{character:"",title:t("Latin capital letter h with circumflex")},{character:"",title:t("Latin small letter h with circumflex")},{character:"",title:t("Latin capital letter h with stroke")},{character:"",title:t("Latin small letter h with stroke")},{character:"",title:t("Latin capital letter i with tilde")},{character:"",title:t("Latin small letter i with tilde")},{character:"",title:t("Latin capital letter i with macron")},{character:"",title:t("Latin small letter i with macron")},{character:"",title:t("Latin capital letter i with breve")},{character:"",title:t("Latin small letter i with breve")},{character:"",title:t("Latin capital letter i with ogonek")},{character:"",title:t("Latin small letter i with ogonek")},{character:"",title:t("Latin capital letter i with dot above")},{character:"",title:t("Latin small letter dotless i")},{character:"",title:t("Latin capital ligature ij")},{character:"",title:t("Latin small ligature ij")},{character:"",title:t("Latin capital letter j with circumflex")},{character:"",title:t("Latin small letter j with circumflex")},{character:"",title:t("Latin capital letter k with cedilla")},{character:"",title:t("Latin small letter k with cedilla")},{character:"",title:t("Latin small letter kra")},{character:"",title:t("Latin capital letter l with acute")},{character:"",title:t("Latin small letter l with acute")},{character:"",title:t("Latin capital letter l with cedilla")},{character:"",title:t("Latin small letter l with cedilla")},{character:"",title:t("Latin capital letter l with caron")},{character:"",title:t("Latin small letter l with caron")},{character:"",title:t("Latin capital letter l with middle dot")},{character:"",title:t("Latin small letter l with middle dot")},{character:"",title:t("Latin capital letter l with stroke")},{character:"",title:t("Latin small letter l with stroke")},{character:"",title:t("Latin capital letter n with acute")},{character:"",title:t("Latin small letter n with acute")},{character:"",title:t("Latin capital letter n with cedilla")},{character:"",title:t("Latin small letter n with cedilla")},{character:"",title:t("Latin capital letter n with caron")},{character:"",title:t("Latin small letter n with caron")},{character:"",title:t("Latin small letter n preceded by apostrophe")},{character:"",title:t("Latin capital letter eng")},{character:"",title:t("Latin small letter eng")},{character:"",title:t("Latin capital letter o with macron")},{character:"",title:t("Latin small letter o with macron")},{character:"",title:t("Latin capital letter o with breve")},{character:"",title:t("Latin small letter o with breve")},{character:"",title:t("Latin capital letter o with double acute")},{character:"",title:t("Latin small letter o with double acute")},{character:"",title:t("Latin capital ligature oe")},{character:"",title:t("Latin small ligature oe")},{character:"",title:t("Latin capital letter r with acute")},{character:"",title:t("Latin small letter r with acute")},{character:"",title:t("Latin capital letter r with cedilla")},{character:"",title:t("Latin small letter r with cedilla")},{character:"",title:t("Latin capital letter r with caron")},{character:"",title:t("Latin small letter r with caron")},{character:"",title:t("Latin capital letter s with acute")},{character:"",title:t("Latin small letter s with acute")},{character:"",title:t("Latin capital letter s with circumflex")},{character:"",title:t("Latin small letter s with circumflex")},{character:"",title:t("Latin capital letter s with cedilla")},{character:"",title:t("Latin small letter s with cedilla")},{character:"",title:t("Latin capital letter s with caron")},{character:"",title:t("Latin small letter s with caron")},{character:"",title:t("Latin capital letter t with cedilla")},{character:"",title:t("Latin small letter t with cedilla")},{character:"",title:t("Latin capital letter t with caron")},{character:"",title:t("Latin small letter t with caron")},{character:"",title:t("Latin capital letter t with stroke")},{character:"",title:t("Latin small letter t with stroke")},{character:"",title:t("Latin capital letter u with tilde")},{character:"",title:t("Latin small letter u with tilde")},{character:"",title:t("Latin capital letter u with macron")},{character:"",title:t("Latin small letter u with macron")},{character:"",title:t("Latin capital letter u with breve")},{character:"",title:t("Latin small letter u with breve")},{character:"",title:t("Latin capital letter u with ring above")},{character:"",title:t("Latin small letter u with ring above")},{character:"",title:t("Latin capital letter u with double acute")},{character:"",title:t("Latin small letter u with double acute")},{character:"",title:t("Latin capital letter u with ogonek")},{character:"",title:t("Latin small letter u with ogonek")},{character:"",title:t("Latin capital letter w with circumflex")},{character:"",title:t("Latin small letter w with circumflex")},{character:"",title:t("Latin capital letter y with circumflex")},{character:"",title:t("Latin small letter y with circumflex")},{character:"",title:t("Latin capital letter y with diaeresis")},{character:"",title:t("Latin capital letter z with acute")},{character:"",title:t("Latin small letter z with acute")},{character:"",title:t("Latin capital letter z with dot above")},{character:"",title:t("Latin small letter z with dot above")},{character:"",title:t("Latin capital letter z with caron")},{character:"",title:t("Latin small letter z with caron")},{character:"",title:t("Latin small letter long s")}],{label:t("Latin")})}}class vz extends z{static get pluginName(){return"SpecialCharactersCurrency"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.t;e.plugins.get("SpecialCharacters").addItems("Currency",[{character:"$",title:t("Dollar sign")},{character:"",title:t("Euro sign")},{character:"",title:t("Yen sign")},{character:"",title:t("Pound sign")},{character:"",title:t("Cent sign")},{character:"",title:t("Euro-currency sign")},{character:"",title:t("Colon sign")},{character:"",title:t("Cruzeiro sign")},{character:"",title:t("French franc sign")},{character:"",title:t("Lira sign")},{character:"",title:t("Currency sign")},{character:"",title:t("Bitcoin sign")},{character:"",title:t("Mill sign")},{character:"",title:t("Naira sign")},{character:"",title:t("Peseta sign")},{character:"",title:t("Rupee sign")},{character:"",title:t("Won sign")},{character:"",title:t("New sheqel sign")},{character:"",title:t("Dong sign")},{character:"",title:t("Kip sign")},{character:"",title:t("Tugrik sign")},{character:"",title:t("Drachma sign")},{character:"",title:t("German penny sign")},{character:"",title:t("Peso sign")},{character:"",title:t("Guarani sign")},{character:"",title:t("Austral sign")},{character:"",title:t("Hryvnia sign")},{character:"",title:t("Cedi sign")},{character:"",title:t("Livre tournois sign")},{character:"",title:t("Spesmilo sign")},{character:"",title:t("Tenge sign")},{character:"",title:t("Indian rupee sign")},{character:"",title:t("Turkish lira sign")},{character:"",title:t("Nordic mark sign")},{character:"",title:t("Manat sign")},{character:"",title:t("Ruble sign")}],{label:t("Currency")})}}class uTe extends z{static get pluginName(){return"SpecialCharactersEssentials"}static get isOfficialPlugin(){return!0}static get requires(){return[vz,pz,bz,gz,wz]}}const dTe=/^(left|center|right)$/,fTe=/^(left|none|right)$/;function pS(n,e){const{modelAttribute:t,styleName:i,attributeName:s,attributeType:r,viewElement:o,defaultValue:a,shouldUpcast:c=()=>!0,reduceBoxSides:d=!1}=e;n.for("upcast").attributeToAttribute({view:{name:o,styles:{[i]:/[\s\S]+/}},model:{key:t,value:(h,m,p)=>{if(!c(h))return;const w=yr(a,"",p),A=h.getNormalizedStyle(i),C=d?Ib(A):A;if(w!==C)return C;m.consumable.consume(h,{styles:i})}}}),s&&n.for("upcast").attributeToAttribute({view:{name:o,attributes:{[s]:/.+/}},model:{key:t,value:(h,m,p)=>{if(h.name=="figure"||h.hasStyle(i)||h.name=="table"&&h.parent.name=="figure"&&h.parent.hasStyle(i))return;const w=yr(a,"",p);let A=h.getAttribute(s);if(A&&r=="length"&&!A.endsWith("px")&&(A+="px"),w!==A)return A;m.consumable.consume(h,{attributes:s})}}})}function ex(n,e,t,i){const{conversion:s}=n;s.for("upcast").add(r=>r.on("element:"+e,(o,a,c)=>{if(!a.modelRange)return;const d=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(k=>a.viewItem.hasStyle(k));if(!d.length)return;const h={styles:d};if(!c.consumable.test(a.viewItem,h))return;const m=[...a.modelRange.getItems({shallow:!0})].pop(),p=m.findAncestor("table",{includeSelf:!0});let w=i;p&&p.getAttribute("tableType")=="layout"&&(w={style:"none",color:"",width:""}),c.consumable.consume(a.viewItem,h);const A={style:a.viewItem.getNormalizedStyle("border-style"),color:a.viewItem.getNormalizedStyle("border-color"),width:a.viewItem.getNormalizedStyle("border-width")},C={style:Ib(A.style),color:Ib(A.color),width:Ib(A.width)};C.style!==w.style&&c.writer.setAttribute(t.style,C.style,m),C.color!==w.color&&c.writer.setAttribute(t.color,C.color,m),C.width!==w.width&&c.writer.setAttribute(t.width,C.width,m)})),n.config.get("experimentalFlags.upcastTableBorderZeroAttributes")&&s.for("upcast").add(r=>{r.on(`element:${e}`,(o,a,c)=>{const{modelRange:d,viewItem:h}=a,m=h.is("element","table")?h:h.findAncestor("table");if(!c.consumable.test(m,{attributes:"border"})||m.getAttribute("border")!=="0")return;const p=d?.start?.nodeAfter;!p||p.hasAttribute(t.style)||(c.writer.setAttribute(t.style,"none",p),h.is("element","table")&&c.consumable.consume(h,{attributes:"border"}))})})}function Sh(n,e){const{modelElement:t,modelAttribute:i,styleName:s}=e;n.for("downcast").attributeToAttribute({model:{name:t,key:i},view:r=>({key:"style",value:{[s]:r}})})}function Tb(n,e){const{modelAttribute:t,styleName:i}=e;n.for("downcast").add(s=>s.on(`attribute:${t}:table`,(r,o,a)=>{const{item:c,attributeNewValue:d}=o,{mapper:h,writer:m}=a;if(!a.consumable.consume(o.item,r.name))return;const p=[...h.toViewElement(c).getChildren()].find(w=>w.is("element","table"));d?m.setStyle(i,d,p):m.removeStyle(i,p)}))}function yr(n,e,t){const i=t.modelRange&&qt(t.modelRange.getItems({shallow:!0})),s=i&&i.is("element")&&i.findAncestor("table",{includeSelf:!0});return s&&s.getAttribute("tableType")==="layout"?e:n}function Ib(n){if(!n)return;const e=["top","right","bottom","left"];if(!e.every(r=>n[r]))return n;const i=n.top;return e.every(r=>n[r]===i)?i:n}const Ei={left:{className:"table-style-align-left"},center:{className:"table-style-align-center"},right:{className:"table-style-align-right"},blockLeft:{className:"table-style-block-align-left"},blockRight:{className:"table-style-block-align-right"}},hTe=[{view:{name:/^(table|figure)$/,styles:{float:fTe}},getAlign:n=>{let e=n.getStyle("float");return e==="none"&&(e="center"),e},getConsumables(n){const e=n.getStyle("float"),t=["float"];return e==="left"&&n.hasStyle("margin-right")?t.push("margin-right"):e==="right"&&n.hasStyle("margin-left")&&t.push("margin-left"),{styles:t}}},{view:{name:/^(table|figure)$/,styles:{"margin-left":"auto","margin-right":"auto"}},getAlign:()=>"center",getConsumables:()=>({styles:["margin-left","margin-right"]})},{view:{name:/^(table|figure)$/,key:"class",value:"table-style-align-left"},getAlign:()=>"left",getConsumables(){return{classes:Ei.left.className}}},{view:{name:/^(table|figure)$/,key:"class",value:Ei.right.className},getAlign:()=>"right",getConsumables(){return{classes:Ei.right.className}}},{view:{name:/^(table|figure)$/,key:"class",value:Ei.center.className},getAlign:()=>"center",getConsumables(){return{classes:Ei.center.className}}},{view:{name:/^(table|figure)$/,key:"class",value:Ei.blockLeft.className},getAlign:()=>"blockLeft",getConsumables(){return{classes:Ei.blockLeft.className}}},{view:{name:/^(table|figure)$/,key:"class",value:Ei.blockRight.className},getAlign:()=>"blockRight",getConsumables(){return{classes:Ei.blockRight.className}}},{view:{name:/^(table|figure)$/,styles:{"margin-left":"0","margin-right":"auto"}},getAlign:()=>"blockLeft",getConsumables(){return{styles:["margin-left","margin-right"]}}},{view:{name:/^(table|figure)$/,styles:{"margin-left":"auto","margin-right":"0"}},getAlign:()=>"blockRight",getConsumables(){return{styles:["margin-left","margin-right"]}}},{view:{name:"table",attributes:{align:dTe}},getAlign:n=>n.getAttribute("align"),getConsumables(){return{attributes:"align"}}}],Jp={center:{align:"center",style:"margin-left: auto; margin-right: auto;",className:"table-style-align-center"},left:{align:"left",style:"float: left;",className:"table-style-align-left"},right:{align:"right",style:"float: right;",className:"table-style-align-right"},blockLeft:{align:void 0,style:"margin-left: 0; margin-right: auto;",className:Ei.blockLeft.className},blockRight:{align:void 0,style:"margin-left: auto; margin-right: 0;",className:Ei.blockRight.className}};class at{_table;_startRow;_endRow;_startColumn;_endColumn;_includeAllSlots;_skipRows;_row;_rowIndex;_column;_cellIndex;_spannedCells;_nextCellAtColumn;_jumpedToStartRow=!1;constructor(e,t={}){this._table=e,this._startRow=t.row!==void 0?t.row:t.startRow||0,this._endRow=t.row!==void 0?t.row:t.endRow,this._startColumn=t.column!==void 0?t.column:t.startColumn||0,this._endColumn=t.column!==void 0?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0,value:void 0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const i=this._getSpanned();if(i)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(i.cell,i.row,i.column));else{const s=e.getChild(this._cellIndex);if(!s)return this._advanceToNextRow();const r=parseInt(s.getAttribute("colspan")||"1"),o=parseInt(s.getAttribute("rowspan")||"1");(r>1||o>1)&&this._recordSpans(s,o,r),this._shouldSkipSlot()||(t=this._formatOutValue(s)),this._nextCellAtColumn=this._column+r}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(e){this._skipRows.add(e)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(e,t=this._row,i=this._column){return{done:!1,value:new mTe(this,e,t,i)}}_shouldSkipSlot(){const e=this._skipRows.has(this._row),t=this._row<this._startRow,i=this._column<this._startColumn,s=this._endColumn!==void 0&&this._column>this._endColumn;return e||t||i||s}_getSpanned(){const e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}_recordSpans(e,t,i){const s={cell:e,row:this._row,column:this._column};for(let r=this._row;r<this._row+t;r++)for(let o=this._column;o<this._column+i;o++)(r!=this._row||o!=this._column)&&this._markSpannedCell(r,o,s)}_markSpannedCell(e,t,i){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,i)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const e=this._getRowLength(0);for(let t=this._startRow;!this._jumpedToStartRow;t--)e===this._getRowLength(t)&&(this._row=t,this._rowIndex=t,this._jumpedToStartRow=!0)}_getRowLength(e){return[...this._table.getChild(e).getChildren()].reduce((i,s)=>i+parseInt(s.getAttribute("colspan")||"1"),0)}}class mTe{cell;row;column;cellAnchorRow;cellAnchorColumn;_cellIndex;_rowIndex;_table;constructor(e,t,i,s){this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=i,this.cellAnchorColumn=s,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function Rn(n,e,t,i,s=1){e!=null&&s!==void 0&&s!==null&&e>s?i.setAttribute(n,e,t):i.removeAttribute(n,t)}function Rc(n,e,t={}){const i=n.createElement("tableCell",t);return n.insertElement("paragraph",i),n.insert(i,e),i}function tx(n,e){const t=e.parent.parent,i=parseInt(t.getAttribute("headingColumns")||"0"),{column:s}=n.getCellLocation(e);return!!i&&s<i}function Rb(n,e,t){const{modelAttribute:i}=t;n.extend("tableCell",{allowAttributes:[i]}),n.setAttributeProperties(i,{isFormatting:!0}),pS(e,{viewElement:/^(td|th)$/,...t}),Sh(e,{modelElement:"tableCell",...t})}function ia(n){const e=n.getSelectedElement();return e&&e.is("element","table")?e:n.getFirstPosition().findAncestor("table")}function gTe(n){const e=new Map;for(const t of n){const i=t.findAncestor("table");e.has(i)||e.set(i,[]),e.get(i).push(t)}return e}function Vu({table:n,row:e,column:t}){const i=new at(n,{row:e,column:t});for(const{cell:s}of i)if(s.getAttribute("tableCellType")!=="header")return!1;return!0}function $o(n){const{model:e,config:t}=n;return e.schema.checkAttribute("tableCell","tableCellType")&&t.get("experimentalFlags.tableCellTypeSupport")===!0}function yz(n,e,t){const{startRow:i,startColumn:s,endRow:r,endColumn:o}=e,a=t.createElement("table"),c=n.getAttribute("tableType");c&&t.setAttribute("tableType",c,a);const d=r-i+1;for(let m=0;m<d;m++)t.insertElement("tableRow",a,"end");const h=[...new at(n,{startRow:i,endRow:r,startColumn:s,endColumn:o,includeAllSlots:!0})];for(const{row:m,column:p,cell:w,isAnchor:A,cellAnchorRow:C,cellAnchorColumn:k}of h){const E=m-i,S=a.getChild(E);if(!A)(C<i||k<s)&&Rc(t,t.createPositionAt(S,"end"));else{const I=t.cloneElement(w);t.append(I,S),kz(I,m,p,r,o,t)}}return pTe(a,n,i,s,t),a}function Az(n,e,t=0){const i=[],s=new at(n,{startRow:t,endRow:e-1});for(const r of s){const{row:o,cellHeight:a}=r,c=o+a-1;o<e&&e<=c&&i.push(r)}return i}function _z(n,e,t){const i=n.parent,s=i.parent,r=i.index,o=parseInt(n.getAttribute("rowspan")),a=e-r,c={},d=o-a;d>1&&(c.rowspan=d);const h=parseInt(n.getAttribute("colspan")||"1");h>1&&(c.colspan=h);const m=r,p=m+a,w=[...new at(s,{startRow:m,endRow:p,includeAllSlots:!0})];let A=null,C;for(const k of w){const{row:E,column:S,cell:I}=k;I===n&&C===void 0&&(C=S),C!==void 0&&C===S&&E===p&&(A=Rc(t,k.getPositionBefore(),c))}return Rn("rowspan",a,n,t),A}function Cz(n,e){const t=[],i=new at(n);for(const s of i){const{column:r,cellWidth:o}=s,a=r+o-1;r<e&&e<=a&&t.push(s)}return t}function xz(n,e,t,i){const s=parseInt(n.getAttribute("colspan")),r=t-e,o={},a=s-r;a>1&&(o.colspan=a);const c=parseInt(n.getAttribute("rowspan")||"1");c>1&&(o.rowspan=c);const d=Rc(i,i.createPositionAfter(n),o);return Rn("colspan",r,n,i),d}function kz(n,e,t,i,s,r){const o=parseInt(n.getAttribute("colspan")||"1"),a=parseInt(n.getAttribute("rowspan")||"1");if(t+o-1>s){const h=s-t+1;Rn("colspan",h,n,r,1)}if(e+a-1>i){const h=i-e+1;Rn("rowspan",h,n,r,1)}}function pTe(n,e,t,i,s){const r=parseInt(e.getAttribute("headingRows")||"0");if(r>0){const a=r-t;Rn("headingRows",a,n,s,0)}const o=parseInt(e.getAttribute("headingColumns")||"0");if(o>0){const a=o-i;Rn("headingColumns",a,n,s,0)}}function nx(n,e){const t=e.getColumns(n),i=new Array(t).fill(0);for(const{column:r}of new at(n))i[r]++;const s=i.reduce((r,o,a)=>o?r:[...r,a],[]);if(s.length>0){const r=s[s.length-1];return e.removeColumns(n,{at:r}),!0}return!1}function ix(n,e){const t=[],i=e.getRows(n);for(let s=0;s<i;s++)n.getChild(s).isEmpty&&t.push(s);if(t.length>0){const s=t[t.length-1];return e.removeRows(n,{at:s}),!0}return!1}function bS(n,e){nx(n,e)||ix(n,e)}function Ez(n,e){const t=Array.from(new at(n,{startColumn:e.firstColumn,endColumn:e.lastColumn,row:e.lastRow}));if(t.every(({cellHeight:r})=>r===1))return e.lastRow;const s=t[0].cellHeight-1;return e.lastRow+s}function Sz(n,e){const t=Array.from(new at(n,{startRow:e.firstRow,endRow:e.lastRow,column:e.lastColumn}));if(t.every(({cellWidth:r})=>r===1))return e.lastColumn;const s=t[0].cellWidth-1;return e.lastColumn+s}function Tz(n){for(const e of n.getChildren())if(e.is("element","table"))return e}function bTe(){return n=>{n.on("element:figure",(e,t,i)=>{if(!i.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;const s=Tz(t.viewItem);if(!s||!i.consumable.test(s,{name:!0}))return;i.consumable.consume(t.viewItem,{name:!0,classes:"table"});const r=i.convertItem(s,t.modelCursor),o=qt(r.modelRange.getItems());if(!o||!o.is("element","table")){i.consumable.revert(t.viewItem,{name:!0,classes:"table"}),r.modelRange&&!r.modelRange.isCollapsed&&(t.modelRange=r.modelRange,t.modelCursor=r.modelCursor);return}i.convertChildren(t.viewItem,i.writer.createPositionAt(o,"end")),i.updateConversionResult(o,t)})}}function wTe(){return n=>{n.on("element:table",(e,t,i)=>{const s=t.viewItem;if(!i.consumable.test(s,{name:!0}))return;const{rows:r,headingRows:o,headingColumns:a}=yTe(s),c={};a&&(c.headingColumns=a),o&&(c.headingRows=o);const d=i.writer.createElement("table",c);if(i.safeInsert(d,t.modelCursor)){if(i.consumable.consume(s,{name:!0}),r.forEach(h=>i.convertItem(h,i.writer.createPositionAt(d,"end"))),i.convertChildren(s,i.writer.createPositionAt(d,"end")),d.isEmpty){const h=i.writer.createElement("tableRow");i.writer.insert(h,i.writer.createPositionAt(d,"end")),Rc(i.writer,i.writer.createPositionAt(h,"end"))}i.updateConversionResult(d,t)}})}}function vTe(){return n=>{n.on("element:tr",(e,t)=>{t.viewItem.isEmpty&&t.modelCursor.index==0&&e.stop()},{priority:"high"})}}function T4(n){return e=>{e.on(`element:${n}`,(t,i,{writer:s})=>{if(!i.modelRange)return;const r=i.modelRange.start.nodeAfter,o=s.createPositionAt(r,0);if(i.viewItem.isEmpty){s.insertElement("paragraph",o);return}const a=Array.from(r.getChildren());if(a.every(c=>c.is("element","$marker"))){const c=s.createElement("paragraph");s.insert(c,s.createPositionAt(r,0));for(const d of a)s.move(s.createRangeOn(d),s.createPositionAt(c,"end"))}},{priority:"low"})}}function yTe(n){let e,t=!0;const i=[],s=[];let r;for(const a of Array.from(n.getChildren())){if(a.name!=="tbody"&&a.name!=="thead"&&a.name!=="tfoot")continue;a.name==="thead"&&!r&&(t=!0,r=a);const c=Array.from(a.getChildren()).filter(h=>h.is("element","tr"));let d=null;for(const h of c){const m=Array.from(h.getChildren()).filter(p=>p.is("element","td")||p.is("element","th"));r&&a===r||a.name==="tbody"&&m.length>0&&(d===null||m.length===d)&&m.every(p=>p.is("element","th"))&&t?(i.push(h),t=!0):(s.push(h),t=!1),d=Math.max(d||0,m.length)}}const o=ATe(s);for(const a of o){let c=0;for(;c<a.length&&a[c]?.name==="th";)c+=1;(e===void 0||c<e)&&(e=c)}return{headingRows:i.length,headingColumns:e||0,rows:[...i,...s]}}function ATe(n){let e=new Map,t=0;const i=n.map(s=>{const r=[],o=Array.from(s.getChildren()).filter(c=>c.name==="th"||c.name==="td"),a=new Map;for(;o.length||r.length<t;){const c=e.get(r.length);if(c&&c.remaining>0)r.push(c.cell);else{const d=o.shift();if(d){const h=parseInt(d.getAttribute("colspan")||"1"),m=parseInt(d.getAttribute("rowspan")||"1");for(let p=0;p<h;p++)m>1&&a.set(r.length,{cell:d,remaining:m-1}),r.push(d)}else{r.push(null);continue}}}for(const[c,d]of e.entries())d.remaining-=1,d.remaining>0&&!a.has(c)&&a.set(c,d);return e=a,t=Math.max(t,r.length),r});for(const s of i)for(;s.length<t;)s.push(null);return i}function Pc(n){if(!n||!Fi(n))return n;const{top:e,right:t,bottom:i,left:s}=n;if(e==t&&t==i&&i==s)return e}function Oc(n,e){const t=parseFloat(n);return Number.isNaN(t)||String(t)!==String(n)?n:`${t}${e}`}function vy(n,e={}){const t={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...n};return e.includeAlignmentProperty&&!t.alignment&&(t.alignment="center"),e.includePaddingProperty&&!t.padding&&(t.padding=""),e.includeVerticalAlignmentProperty&&!t.verticalAlignment&&(t.verticalAlignment="middle"),e.includeHorizontalAlignmentProperty&&!t.horizontalAlignment&&(t.horizontalAlignment=e.isRightToLeftContent?"right":"left"),t}function wS(n,e){return vy({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...n},e)}function vS(n,e){return vy({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...n},e)}function I4(n,e){return(t,{writer:i})=>{const s=t.getAttribute("headingRows")||0,r=i.createContainerElement("table",null,[]),o=i.createContainerElement("figure",{class:"table"},r);s>0&&i.insert(i.createPositionAt(r,"end"),i.createContainerElement("thead",null,i.createSlot(a=>a.is("element","tableRow")&&a.index<s))),s<n.getRows(t)&&i.insert(i.createPositionAt(r,"end"),i.createContainerElement("tbody",null,i.createSlot(a=>a.is("element","tableRow")&&a.index>=s)));for(const{positionOffset:a,filter:c}of e.additionalSlots)i.insert(i.createPositionAt(r,a),i.createSlot(c));return i.insert(i.createPositionAt(r,"after"),i.createSlot(a=>a.is("element","tableRow")?!1:!e.additionalSlots.some(({filter:c})=>c(a)))),e.asWidget?CTe(o,i):o}}function _Te(){return(n,{writer:e})=>n.isEmpty?e.createEmptyElement("tr"):e.createContainerElement("tr")}function R4(n){return(t,{writer:i})=>{if(n.cellTypeEnabled?.()){const m=t.getAttribute("tableCellType")==="header"?"th":"td";return e(i,m)}const s=t.parent,r=s.parent,o=r.getChildIndex(s),a=new at(r,{row:o}),c=r.getAttribute("headingRows")||0,d=r.getAttribute("headingColumns")||0;let h=null;for(const m of a)if(m.cell==t){const p=m.row<c||m.column<d;h=e(i,p?"th":"td");break}return h};function e(t,i){return n.asWidget?nS(t.createEditableElement(i),t,{withAriaRole:!1}):t.createContainerElement(i)}}function P4(n={}){return(e,{writer:t})=>{if(!e.parent.is("element","tableCell")||!Iz(e))return null;if(n.asWidget)return t.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const i=t.createContainerElement("p");return t.setCustomProperty("dataPipeline:transparentRendering",!0,i),i}}}function Iz(n){return n.parent.childCount==1&&!xTe(n)}function CTe(n,e){return e.setCustomProperty("table",!0,n),Tc(n,e,{hasSelectionHandle:!0})}function xTe(n){for(const e of n.getAttributeKeys())if(!(e.startsWith("selection:")||e=="htmlEmptyBlock"))return!0;return!1}function kTe(n){return(e,t)=>{const i=n.plugins.has("PlainTableOutput"),s=t.options.isClipboardPipeline,r=n.config.get("experimentalFlags.useExtendedTableBlockAlignment");return!i&&!(r&&s)?null:STe(e,t,n)}}function ETe(n){return(e,{writer:t,options:i})=>{const s=n.plugins.has("PlainTableOutput"),r=i.isClipboardPipeline,o=n.config.get("experimentalFlags.useExtendedTableBlockAlignment");return!s&&!(o&&r)?null:e.parent.name==="table"?t.createContainerElement("caption"):null}}function STe(n,e,t){const i=e.writer,s=n.getAttribute("headingRows")||0,r=i.createSlot(p=>p.is("element","tableRow")&&p.index<s),o=i.createSlot(p=>p.is("element","tableRow")&&p.index>=s),a=i.createSlot(p=>!p.is("element","tableRow")),c=i.createContainerElement("thead",null,r),d=i.createContainerElement("tbody",null,o),h=[];s&&h.push(c),s<n.childCount&&h.push(d);const m={class:"table"};if(t.plugins.has("TablePropertiesEditing")&&e.options.isClipboardPipeline){const p=wS(t.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),w=n.getAttribute("tableAlignment");let A=p.alignment;n.getAttribute("tableType")==="layout"&&(A="");const C=w||A;C&&(m.class+=" "+Jp[C].className,m.style=Jp[C].style,Jp[C].align!==void 0&&(m.align=Jp[C].align))}return i.createContainerElement("table",m,[a,...h])}function TTe(n){const e={"border-width":"tableBorderWidth","border-color":"tableBorderColor","border-style":"tableBorderStyle","background-color":"tableBackgroundColor"};for(const[t,i]of Object.entries(e))n.conversion.for("dataDowncast").add(s=>s.on(`attribute:${i}:table`,(r,o,a)=>{const{item:c,attributeNewValue:d}=o,{mapper:h,writer:m}=a,p=n.plugins.has("PlainTableOutput"),w=a.options.isClipboardPipeline,A=n.config.get("experimentalFlags.useExtendedTableBlockAlignment");if(!p&&!(A&&w)||!a.consumable.consume(c,r.name))return;const C=h.toViewElement(c);d?m.setStyle(t,d,C):m.removeStyle(t,C)},{priority:"high"}))}class ITe extends je{refresh(){const e=this.editor.model,t=e.document.selection,i=e.schema;this.isEnabled=RTe(t,i)}execute(e={}){const t=this.editor,i=t.model,s=t.plugins.get("TableUtils"),r=t.config.get("table.defaultHeadings.rows"),o=t.config.get("table.defaultHeadings.columns");e.headingRows===void 0&&r&&(e.headingRows=r),e.headingColumns===void 0&&o&&(e.headingColumns=o),i.change(a=>{const c=s.createTable(a,e);i.insertObject(c,null,null,{findOptimalPosition:"auto"}),a.setSelection(a.createPositionAt(c.getNodeByPath([0,0,0]),0))})}}function RTe(n,e){const t=n.getFirstPosition().parent,i=t===t.root?t:t.parent;return e.checkChild(i,"table")}class O4 extends je{order;constructor(e,t={}){super(e),this.order=t.order||"below"}refresh(){const e=this.editor.model.document.selection,i=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=i}execute(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),s=this.order==="above",r=i.getSelectionAffectedTableCells(t),o=i.getRowIndexes(r),a=s?o.first:o.last,c=r[0].findAncestor("table");i.insertRows(c,{at:s?a:a+1,copyStructureFromAbove:!s})}}class D4 extends je{order;constructor(e,t={}){super(e),this.order=t.order||"right"}refresh(){const e=this.editor.model.document.selection,i=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=i}execute(){const e=this.editor,t=e.model.document.selection,i=e.plugins.get("TableUtils"),s=this.order==="left",r=i.getSelectionAffectedTableCells(t),o=i.getColumnIndexes(r),a=s?o.first:o.last,c=r[0].findAncestor("table");i.insertColumns(c,{columns:1,at:s?a:a+1})}}class M4 extends je{direction;constructor(e,t={}){super(e),this.direction=t.direction||"horizontally"}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(t,2):e.splitCellVertically(t,2)}}class Xp extends je{direction;isHorizontal;constructor(e,t){super(e),this.direction=t.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,t=e.document,s=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(t.selection)[0],r=this.value,o=this.direction;e.change(a=>{const c=o=="right"||o=="down",d=c?s:r,h=c?r:s,m=h.parent;DTe(h,d,a);const p=this.isHorizontal?"colspan":"rowspan",w=parseInt(s.getAttribute(p)||"1"),A=parseInt(r.getAttribute(p)||"1");a.setAttribute(p,w+A,d),a.setSelection(a.createRangeIn(d));const C=this.editor.plugins.get("TableUtils"),k=m.findAncestor("table");bS(k,C)})}_getMergeableCell(){const t=this.editor.model.document,i=this.editor.plugins.get("TableUtils"),s=i.getTableCellsContainingSelection(t.selection)[0];if(!s)return;const r=this.isHorizontal?PTe(s,this.direction,i):OTe(s,this.direction,i);if(!r)return;const o=this.isHorizontal?"rowspan":"colspan",a=parseInt(s.getAttribute(o)||"1");if(parseInt(r.getAttribute(o)||"1")===a)return r}}function PTe(n,e,t){const s=n.parent.parent,r=e=="right"?n.nextSibling:n.previousSibling,o=(s.getAttribute("headingColumns")||0)>0;if(!r)return;const a=e=="right"?n:r,c=e=="right"?r:n,{column:d}=t.getCellLocation(a),{column:h}=t.getCellLocation(c),m=parseInt(a.getAttribute("colspan")||"1"),p=tx(t,a),w=tx(t,c);return o&&p!=w?void 0:d+m===h?r:void 0}function OTe(n,e,t){const i=n.parent,s=i.parent,r=s.getChildIndex(i);if(e=="down"&&r===t.getRows(s)-1||e=="up"&&r===0)return null;const o=parseInt(n.getAttribute("rowspan")||"1"),a=s.getAttribute("headingRows")||0,c=e=="down"&&r+o===a,d=e=="up"&&r===a;if(a&&(c||d))return null;const h=parseInt(n.getAttribute("rowspan")||"1"),m=e=="down"?r+h:r,p=[...new at(s,{endRow:m})],A=p.find(k=>k.cell===n).column,C=p.find(({row:k,cellHeight:E,column:S})=>S!==A?!1:e=="down"?k===m:m===k+E);return C&&C.cell?C.cell:null}function DTe(n,e,t){B4(n)||(B4(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(n),t.createPositionAt(e,"end"))),t.remove(n)}function B4(n){const e=n.getChild(0);return n.childCount==1&&e.is("element","paragraph")&&e.isEmpty}class MTe extends je{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),i=t[0];if(i){const s=i.findAncestor("table"),o=e.getRows(s)-1,a=e.getRowIndexes(t),c=a.first===0&&a.last===o;this.isEnabled=!c}else this.isEnabled=!1}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),i=t.getSelectionAffectedTableCells(e.document.selection),s=t.getRowIndexes(i),r=i[0],o=r.findAncestor("table"),a=t.getCellLocation(r).column;e.change(c=>{const d=s.last-s.first+1;t.removeRows(o,{at:s.first,rows:d});const h=BTe(o,s.first,a,t.getRows(o));c.setSelection(c.createPositionAt(h,0))})}}function BTe(n,e,t,i){const s=n.getChild(Math.min(e,i-1));let r=s.getChild(0),o=0;for(const a of s.getChildren()){if(o>t)return r;r=a,o+=parseInt(a.getAttribute("colspan")||"1")}return r}class NTe extends je{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),i=t[0];if(i){const s=i.findAncestor("table"),r=e.getColumns(s),{first:o,last:a}=e.getColumnIndexes(t);this.isEnabled=a-o<r-1}else this.isEnabled=!1}execute(){const e=this.editor.plugins.get("TableUtils"),[t,i]=LTe(this.editor.model.document.selection,e),s=t.parent.parent,r=[...new at(s)],o={first:r.find(c=>c.cell===t).column,last:r.find(c=>c.cell===i).column},a=VTe(r,t,i,o);this.editor.model.change(c=>{const d=o.last-o.first+1;e.removeColumns(s,{at:o.first,columns:d}),c.setSelection(c.createPositionAt(a,0))})}}function VTe(n,e,t,i){return parseInt(t.getAttribute("colspan")||"1")>1?t:e.previousSibling||t.nextSibling?t.nextSibling||e.previousSibling:i.first?n.reverse().find(({column:r})=>r<i.first).cell:n.reverse().find(({column:r})=>r>i.last).cell}function LTe(n,e){const t=e.getSelectionAffectedTableCells(n),i=t[0],s=t.pop(),r=[i,s];return i.isBefore(s)?r:r.reverse()}class FTe extends je{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,i=e.getSelectionAffectedTableCells(t.document.selection);if(i.length===0){this.isEnabled=!1,this.value=!1;return}const s=i[0].findAncestor("table");this.isEnabled=t.schema.checkAttribute(s,"headingRows"),this.value=i.every(r=>this._isInHeading(r,r.parent.parent))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),i=this.editor.model,s=t.getSelectionAffectedTableCells(i.document.selection),r=s[0].findAncestor("table"),{first:o,last:a}=t.getRowIndexes(s),c=this.value?o:a+1,d=r.getAttribute("headingRows")||0;i.change(h=>{if(c){const m=c>d?d:0,p=Az(r,c,m);for(const{cell:w}of p)_z(w,c,h)}t.setHeadingRowsCount(h,r,c)})}_isInHeading(e,t){const i=parseInt(t.getAttribute("headingRows")||"0");return!!i&&e.parent.index<i}}class zTe extends je{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,i=e.getSelectionAffectedTableCells(t.document.selection);if(i.length===0){this.isEnabled=!1,this.value=!1;return}const s=i[0].findAncestor("table");this.isEnabled=t.schema.checkAttribute(s,"headingColumns"),this.value=i.every(r=>tx(e,r))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),i=this.editor.model,s=t.getSelectionAffectedTableCells(i.document.selection),r=s[0].findAncestor("table"),{first:o,last:a}=t.getColumnIndexes(s),c=this.value?o:a+1;i.change(d=>{if(c){const h=Cz(r,c);for(const{cell:m,column:p}of h)xz(m,p,c,d)}t.setHeadingColumnsCount(d,r,c)})}}const jTe=5,sx=40,UTe=2,HTe=3;function WTe(n){const e=new Set;for(const t of n.document.differ.getChanges()){let i=null;switch(t.type){case"insert":i=["table","tableRow","tableCell"].includes(t.name)?t.position:null;break;case"remove":i=["tableRow","tableCell"].includes(t.name)?t.position:null;break;case"attribute":t.range.start.nodeAfter&&(i=["table","tableRow","tableCell"].includes(t.range.start.nodeAfter.name)?t.range.start:null);break}if(!i)continue;const s=i.nodeAfter&&i.nodeAfter.is("element","table")?i.nodeAfter:i.findAncestor("table");for(const r of n.createRangeOn(s).getItems())r.is("element","table")&&Ym(r)&&e.add(r)}return e}function $Te(n,e){return sx*100/Rz(n,e)}function Rz(n,e){const t=N4(n,"tbody",e)||N4(n,"thead",e),i=e.editing.view.domConverter.mapViewToDom(t);return rx(i)}function N4(n,e,t){return[...[...t.editing.mapper.toViewElement(n).getChildren()].find(r=>r.is("element","table")).getChildren()].find(r=>r.is("element",e))}function rx(n){const e=me.window.getComputedStyle(n);return e.boxSizing==="border-box"?parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):parseFloat(e.width)}function GTe(n,e){const t=e.getCellLocation(n).column,i=n.getAttribute("colspan")||1;return{leftEdge:t,rightEdge:t+i-1}}function ss(n){const e=Math.pow(10,UTe),t=typeof n=="number"?n:parseFloat(n);return Math.round(t*e)/e}function YTe(n,e,t){return n<=e?ss(e):n>=t?ss(t):ss(n)}function KTe(n,e){return Array(n).fill(e)}function hm(n){return n.map(e=>typeof e=="number"?e:parseFloat(e)).filter(e=>!Number.isNaN(e)).reduce((e,t)=>e+t,0)}function yS(n){const e=n.map(s=>s==="auto"||s===void 0?"auto":parseFloat(s.replace("%","")));let t=qTe(e);const i=hm(t);return i!==100&&(t=t.map(s=>ss(s*100/i)).map((s,r,o)=>{if(!(r===o.length-1))return s;const c=hm(o);return ss(s+100-c)})),t.map(s=>s+"%")}function qTe(n){const e=n.filter(s=>s==="auto").length;if(e===0)return n.map(s=>ss(s));const t=hm(n),i=Math.max((100-t)/e,jTe);return n.map(s=>s==="auto"?i:s).map(s=>ss(s))}function QTe(n){const e=me.window.getComputedStyle(n);return e.boxSizing==="border-box"?parseInt(e.width):parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderWidth)}function Pz(n,e,t,i){for(let s=0;s<Math.max(t.length,n.length);s++){const r=n[s],o=t[s];o?r?i.setAttribute("columnWidth",o,r):i.appendElement("tableColumn",{columnWidth:o},e):i.remove(r)}}function Ym(n){if(n.is("element","tableColumnGroup"))return n;const e=n.getChildren();return Array.from(e).find(t=>t.is("element","tableColumnGroup"))}function Km(n){const e=Ym(n);return e?Array.from(e.getChildren()):[]}function ZTe(n){return Km(n).map(e=>e.getAttribute("columnWidth"))}function JTe(n,e){return Km(n).reduce((i,s)=>{const r=s.getAttribute("columnWidth"),o=s.getAttribute("colSpan");if(!o)return i.push(r),i;for(let a=0;a<o;a++)i.push(r);return e.removeAttribute("colSpan",s),i},[])}class jn extends z{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(e){const t=e.parent,i=t.parent,s=i.getChildIndex(t),r=new at(i,{row:s});for(const{cell:o,row:a,column:c}of r)if(o===e)return{row:a,column:c};}createTable(e,t){const i=e.createElement("table"),s=t.rows||2,r=t.columns||2;return y1(e,i,0,s,r),t.headingRows&&this.setHeadingRowsCount(e,i,Math.min(t.headingRows,s)),t.headingColumns&&this.setHeadingColumnsCount(e,i,Math.min(t.headingColumns,r)),i}insertRows(e,t={}){const i=this.editor.model,s=t.at||0,r=t.rows||1,o=t.copyStructureFromAbove!==void 0,a=t.copyStructureFromAbove?s-1:s,c=$o(this.editor),d=this.getRows(e),h=this.getColumns(e);if(s>d)throw new D("tableutils-insertrows-insert-out-of-range",this,{options:t});i.change(m=>{let p=e.getAttribute("headingRows")||0;const w=e.getAttribute("headingColumns")||0;if(p>s&&(p+=r,this.setHeadingRowsCount(m,e,p,{shallow:!0})),!o&&(s===0||s===d)){const E=y1(m,e,s,r,h);if(c)for(let S=0;S<E.length;S++){const I=E[S];for(let R=0;R<h;R++){const O=I[R];(s+S<p||R<w)&&m.setAttribute("tableCellType","header",O)}}return}const A=o?Math.max(s,a):s,C=new at(e,{endRow:A}),k=new Array(h).fill(1);for(const{row:E,column:S,cellHeight:I,cellWidth:R,cell:O}of C){const U=E+I-1,P=E<s&&s<=U,V=E<=a&&a<=U;P?(m.setAttribute("rowspan",I+r,O),k[S]=-R):o&&V&&(k[S]=R)}for(let E=0;E<r;E++){const S=m.createElement("tableRow");m.insert(S,e,s);for(let I=0;I<k.length;I++){const R=k[I],O=m.createPositionAt(S,"end");if(R>0){const U=Rc(m,O,R>1?{colspan:R}:void 0);c&&(s+E<p||I<w)&&m.setAttribute("tableCellType","header",U)}I+=Math.abs(R)-1}}})}insertColumns(e,t={}){const i=this.editor.model,s=t.at||0,r=t.columns||1,o=$o(this.editor);i.change(a=>{const c=e.getAttribute("headingRows")||0;let d=e.getAttribute("headingColumns");s<d&&(d+=r,this.setHeadingColumnsCount(a,e,d,{shallow:!0}));const h=this.getColumns(e);if(s===0||h===s){let p=0;for(const w of e.getChildren()){if(!w.is("element","tableRow"))continue;const A=Gu(r,a,a.createPositionAt(w,s?"end":0));if(o)for(let C=0;C<A.length;C++)(s+C<d||p<c)&&a.setAttribute("tableCellType","header",A[C]);p++}return}const m=new at(e,{column:s,includeAllSlots:!0});for(const p of m){const{row:w,cell:A,cellAnchorColumn:C,cellAnchorRow:k,cellWidth:E,cellHeight:S}=p;if(C<s){a.setAttribute("colspan",E+r,A);const I=k+S-1;for(let R=w;R<=I;R++)m.skipRow(R)}else{const I=Gu(r,a,p.getPositionBefore());if(o)for(let R=0;R<I.length;R++)(s+R<d||w<c)&&a.setAttribute("tableCellType","header",I[R])}}})}removeRows(e,t){const i=this.editor.model,s=t.rows||1,r=this.getRows(e),o=t.at,a=o+s-1;if(a>r-1)throw new D("tableutils-removerows-row-index-out-of-range",this,{table:e,options:t});i.change(c=>{const d={first:o,last:a},{cellsToMove:h,cellsToTrim:m}=t2e(e,d);if(h.size){const p=a+1;n2e(e,p,h,c)}for(let p=a;p>=o;p--)c.remove(e.getChild(p));for(const{rowspan:p,cell:w}of m)Rn("rowspan",p,w,c);if(e2e(e,d,c),nx(e,this)||ix(e,this),$o(this.editor)){let p=e.getAttribute("headingRows")||0;const w=this.getRows(e);for(;p<w&&Vu({table:e,row:p});)p++;this.setHeadingRowsCount(c,e,p,{shallow:!0})}})}removeColumns(e,t){const i=this.editor.model,s=t.at,r=t.columns||1,o=t.at+r-1;i.change(a=>{XTe(e,{first:s,last:o},a);const c=Km(e);for(let d=o;d>=s;d--){for(const{cell:h,column:m,cellWidth:p}of[...new at(e)])m<=d&&p>1&&m+p>d?Rn("colspan",p-1,h,a):m===d&&a.remove(h);if(c[d]){const h=d===0?c[1]:c[d-1],m=parseFloat(c[d].getAttribute("columnWidth")),p=parseFloat(h.getAttribute("columnWidth"));a.remove(c[d]),a.setAttribute("columnWidth",m+p+"%",h)}}if(ix(e,this)||nx(e,this),$o(this.editor)){let d=e.getAttribute("headingColumns")||0;const h=this.getColumns(e);for(;d<h&&Vu({table:e,column:d});)d++;this.setHeadingColumnsCount(a,e,d,{shallow:!0})}})}splitCellVertically(e,t=2){const i=this.editor.model,r=e.parent.parent,o=parseInt(e.getAttribute("rowspan")||"1"),a=parseInt(e.getAttribute("colspan")||"1");i.change(c=>{if(a>1){const{newCellsSpan:d,updatedSpan:h}=V4(a,t);Rn("colspan",h,e,c);const m={};d>1&&(m.colspan=d),o>1&&(m.rowspan=o);const p=a>t?t-1:a-1;Gu(p,c,c.createPositionAfter(e),m)}if(a<t){const d=t-a,h=[...new at(r)],{column:m}=h.find(({cell:C})=>C===e),p=h.filter(({cell:C,cellWidth:k,column:E})=>{const S=C!==e&&E===m,I=E<m&&E+k>m;return S||I});for(const{cell:C,cellWidth:k}of p)c.setAttribute("colspan",k+d,C);const w={};o>1&&(w.rowspan=o),Gu(d,c,c.createPositionAfter(e),w);const A=r.getAttribute("headingColumns")||0;A>m&&Rn("headingColumns",A+d,r,c)}})}splitCellHorizontally(e,t=2){const i=this.editor.model,s=e.parent,r=s.parent,o=r.getChildIndex(s),a=parseInt(e.getAttribute("rowspan")||"1"),c=parseInt(e.getAttribute("colspan")||"1");i.change(d=>{if(a>1){const h=[...new at(r,{startRow:o,endRow:o+a-1,includeAllSlots:!0})],{newCellsSpan:m,updatedSpan:p}=V4(a,t);Rn("rowspan",p,e,d);const{column:w}=h.find(({cell:k})=>k===e),A={};m>1&&(A.rowspan=m),c>1&&(A.colspan=c);let C=0;for(const k of h){const{column:E,row:S}=k,I=S>=o+p,R=E===w;C>=m&&R&&(C=0),I&&R&&(C||Gu(1,d,k.getPositionBefore(),A),C++)}}if(a<t){const h=t-a,m=[...new at(r,{startRow:0,endRow:o})];for(const{cell:A,cellHeight:C,row:k}of m)if(A!==e&&k+C>o){const E=C+h;d.setAttribute("rowspan",E,A)}const p={};c>1&&(p.colspan=c),y1(d,r,o+1,h,1,p);const w=r.getAttribute("headingRows")||0;w>o&&Rn("headingRows",w+h,r,d)}})}getColumns(e){return[...e.getChild(0).getChildren()].filter(i=>i.is("element","tableCell")).reduce((i,s)=>{const r=parseInt(s.getAttribute("colspan")||"1");return i+r},0)}getRows(e){return Array.from(e.getChildren()).reduce((t,i)=>i.is("element","tableRow")?t+1:t,0)}createTableWalker(e,t={}){return new at(e,t)}getSelectedTableCells(e){const t=[];for(const i of this.sortRanges(e.getRanges())){const s=i.getContainedElement();s&&s.is("element","tableCell")&&t.push(s)}return t}setHeadingRowsCount(e,t,i,s={}){const{shallow:r,resetFormerHeadingCells:o=!0,autoExpand:a=!0}=s,c=t.getAttribute("headingRows")||0;if(i!==c&&(Rn("headingRows",i,t,e,0),!(r||!$o(this.editor)))){for(const{cell:d,row:h,column:m}of new at(t,{endRow:i-1}))eb({table:t,writer:e,cell:d,row:h,column:m});if(o&&i<c)for(let d=i;d<c&&Vu({table:t,row:d});d++)for(const{cell:h,row:m,column:p}of new at(t,{row:d}))eb({table:t,writer:e,cell:h,row:m,column:p});if(a&&i>c){const d=this.getRows(t);for(;i<d&&Vu({table:t,row:i});)i++;Rn("headingRows",i,t,e,0)}}}setHeadingColumnsCount(e,t,i,s={}){const{shallow:r,resetFormerHeadingCells:o=!0,autoExpand:a=!0}=s,c=t.getAttribute("headingColumns")||0;if(i!==c&&(Rn("headingColumns",i,t,e,0),!(r||!$o(this.editor)))){for(const{cell:d,row:h,column:m}of new at(t,{endColumn:i-1}))eb({table:t,writer:e,cell:d,row:h,column:m});if(o&&i<c)for(let d=i;d<c&&Vu({table:t,column:d});d++)for(const{cell:h,row:m,column:p}of new at(t,{column:d}))eb({table:t,writer:e,cell:h,row:m,column:p});if(a&&i>c){const d=this.getColumns(t);for(;i<d&&Vu({table:t,column:i});)i++;Rn("headingColumns",i,t,e,0)}}}getTableCellsContainingSelection(e){const t=[];for(const i of e.getRanges()){const s=i.start.findAncestor("tableCell");s&&t.push(s)}return t}getSelectionAffectedTableCells(e){const t=this.getSelectedTableCells(e);return t.length?t:this.getTableCellsContainingSelection(e)}getRowIndexes(e){const t=e.map(i=>i.parent.index);return this._getFirstLastIndexesObject(t)}getColumnIndexes(e){const t=e[0].findAncestor("table"),s=[...new at(t)].filter(r=>e.includes(r.cell)).map(r=>r.column);return this._getFirstLastIndexesObject(s)}isSelectionRectangular(e){if(e.length<2||!this._areCellInTheSameTableSection(e))return!1;const t=new Set,i=new Set;let s=0;for(const o of e){const{row:a,column:c}=this.getCellLocation(o),d=parseInt(o.getAttribute("rowspan"))||1,h=parseInt(o.getAttribute("colspan"))||1;t.add(a),i.add(c),d>1&&t.add(a+d-1),h>1&&i.add(c+h-1),s+=d*h}return s2e(t,i)==s}sortRanges(e){return Array.from(e).sort(i2e)}_getFirstLastIndexesObject(e){const t=e.sort((r,o)=>r-o),i=t[0],s=t[t.length-1];return{first:i,last:s}}_areCellInTheSameTableSection(e){const t=e[0].findAncestor("table"),i=this.getRowIndexes(e),s=parseInt(t.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(i,s))return!1;const r=this.getColumnIndexes(e),o=parseInt(t.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(r,o)}_areIndexesInSameSection({first:e,last:t},i){const s=e<i,r=t<i;return s===r}}function y1(n,e,t,i,s,r={}){const o=[];for(let a=0;a<i;a++){const c=n.createElement("tableRow");n.insert(c,e,t),o.push(Gu(s,n,n.createPositionAt(c,"end"),r))}return o}function Gu(n,e,t,i={}){const s=[];let r=t;for(let o=0;o<n;o++){const a=Rc(e,r,i);s.push(a),r=e.createPositionAfter(a)}return s}function V4(n,e){if(n<e)return{newCellsSpan:1,updatedSpan:1};const t=Math.floor(n/e),i=n-t*e+t;return{newCellsSpan:t,updatedSpan:i}}function XTe(n,e,t){const i=n.getAttribute("headingColumns")||0;if(i&&e.first<i){const s=Math.min(i-1,e.last)-e.first+1;t.setAttribute("headingColumns",i-s,n)}}function e2e(n,{first:e,last:t},i){const s=n.getAttribute("headingRows")||0;if(e<s){const r=t<s?s-(t-e+1):e;Rn("headingRows",r,n,i,0)}}function t2e(n,{first:e,last:t}){const i=new Map,s=[];for(const{row:r,column:o,cellHeight:a,cell:c}of new at(n,{endRow:t})){const d=r+a-1;if(r>=e&&r<=t&&d>t){const p=t-r+1,w=a-p;i.set(o,{cell:c,rowspan:w})}if(r<e&&d>=e){let p;d>=t?p=t-e+1:p=d-e+1,s.push({cell:c,rowspan:a-p})}}return{cellsToMove:i,cellsToTrim:s}}function n2e(n,e,t,i){const r=[...new at(n,{includeAllSlots:!0,row:e})],o=n.getChild(e);let a;for(const{column:c,cell:d,isAnchor:h}of r)if(t.has(c)){const{cell:m,rowspan:p}=t.get(c),w=a?i.createPositionAfter(a):i.createPositionAt(o,0);i.move(i.createRangeOn(m),w),Rn("rowspan",p,m,i),a=m}else h&&(a=d)}function i2e(n,e){const t=n.start,i=e.start;return t.isBefore(i)?-1:1}function s2e(n,e){const t=Array.from(n.values()),i=Array.from(e.values()),s=Math.max(...t),r=Math.min(...t),o=Math.max(...i),a=Math.min(...i);return(s-r+1)*(o-a+1)}function eb({writer:n,table:e,row:t,column:i,cell:s}){const r=e.getAttribute("headingRows")||0,o=e.getAttribute("headingColumns")||0;t>=r&&i>=o?n.removeAttribute("tableCellType",s):n.setAttribute("tableCellType","header",s)}class r2e extends je{refresh(){const e=this.editor.plugins.get(jn),t=e.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=e.isSelectionRectangular(t)}execute(){const e=this.editor.model,t=this.editor.plugins.get(jn);e.change(i=>{const s=t.getSelectedTableCells(e.document.selection),r=s.shift(),{mergeWidth:o,mergeHeight:a}=a2e(r,s,t);Rn("colspan",o,r,i),Rn("rowspan",a,r,i);for(const d of s)o2e(d,r,i);const c=r.findAncestor("table");bS(c,t),i.setSelection(r,"in")})}}function o2e(n,e,t){L4(n)||(L4(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(n),t.createPositionAt(e,"end"))),t.remove(n)}function L4(n){const e=n.getChild(0);return n.childCount==1&&e.is("element","paragraph")&&e.isEmpty}function a2e(n,e,t){let i=0,s=0;for(const d of e){const{row:h,column:m}=t.getCellLocation(d);i=F4(d,m,i,"colspan"),s=F4(d,h,s,"rowspan")}const{row:r,column:o}=t.getCellLocation(n),a=i-o,c=s-r;return{mergeWidth:a,mergeHeight:c}}function F4(n,e,t,i){const s=parseInt(n.getAttribute(i)||"1");return Math.max(t,e+s)}class l2e extends je{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),i=t.getSelectionAffectedTableCells(e.document.selection),s=t.getRowIndexes(i),r=i[0].findAncestor("table"),o=[];for(let a=s.first;a<=s.last;a++)for(const c of r.getChild(a).getChildren())o.push(e.createRangeOn(c));e.change(a=>{a.setSelection(o)})}}class c2e extends je{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,i=e.getSelectionAffectedTableCells(t.document.selection),s=i[0],r=i.pop(),o=s.findAncestor("table"),a=e.getCellLocation(s),c=e.getCellLocation(r),d=Math.min(a.column,c.column),h=Math.max(a.column,c.column),m=[];for(const p of new at(o,{startColumn:d,endColumn:h}))m.push(t.createRangeOn(p.cell));t.change(p=>{p.setSelection(m)})}}function u2e(n){n.document.registerPostFixer(e=>d2e(e,n))}function d2e(n,e){const t=e.document.differ.getChanges();let i=!1;const s=new Set;for(const r of t){let o=null;r.type=="insert"&&r.name=="table"&&(o=r.position.nodeAfter),(r.type=="insert"||r.type=="remove")&&(r.name=="tableRow"||r.name=="tableCell")&&(o=r.position.findAncestor("table")),p2e(r)&&(o=r.range.start.findAncestor("table")),o&&!s.has(o)&&(i=f2e(o,n)||i,i=h2e(o,n)||i,s.add(o))}return i}function f2e(n,e){let t=!1;const i=m2e(n);if(i.length){t=!0;for(const s of i)Rn("rowspan",s.rowspan,s.cell,e,1)}return t}function h2e(n,e){let t=!1;const i=g2e(n),s=[];for(const[c,d]of i.entries())!d&&n.getChild(c).is("element","tableRow")&&s.push(c);if(s.length){t=!0;for(const c of s.reverse())e.remove(n.getChild(c)),i.splice(c,1)}const r=i.filter((c,d)=>n.getChild(d).is("element","tableRow")),o=r[0];if(!r.every(c=>c===o)){const c=r.reduce((d,h)=>h>d?h:d,0);for(const[d,h]of r.entries()){const m=c-h;if(m){for(let p=0;p<m;p++)Rc(e,e.createPositionAt(n.getChild(d),"end"));t=!0}}}return t}function m2e(n){const e=parseInt(n.getAttribute("headingRows")||"0"),t=Array.from(n.getChildren()).reduce((s,r)=>r.is("element","tableRow")?s+1:s,0),i=[];for(const{row:s,cell:r,cellHeight:o}of new at(n)){if(o<2)continue;const c=s<e?e:t;if(s+o>c){const d=c-s;i.push({cell:r,rowspan:d})}}return i}function g2e(n){const e=new Array(n.childCount).fill(0);for(const{rowIndex:t}of new at(n,{includeAllSlots:!0}))e[t]++;return e}function p2e(n){if(n.type!=="attribute")return!1;const e=n.attributeKey;return e==="headingRows"||e==="colspan"||e==="rowspan"}function b2e(n){n.document.registerPostFixer(e=>w2e(e,n))}function w2e(n,e){const t=e.document.differ.getChanges();let i=!1;for(const s of t)s.type=="insert"&&s.name=="table"&&(i=v2e(s.position.nodeAfter,n)||i),s.type=="insert"&&s.name=="tableRow"&&(i=Oz(s.position.nodeAfter,n)||i),s.type=="insert"&&s.name=="tableCell"&&(i=ox(s.position.nodeAfter,n)||i),(s.type=="remove"||s.type=="insert")&&y2e(s)&&(i=ox(s.position.parent,n)||i);return i}function v2e(n,e){let t=!1;for(const i of n.getChildren())i.is("element","tableRow")&&(t=Oz(i,e)||t);return t}function Oz(n,e){let t=!1;for(const i of n.getChildren())t=ox(i,e)||t;return t}function ox(n,e){if(n.childCount==0)return e.insertElement("paragraph",n),!0;const t=Array.from(n.getChildren()).filter(i=>i.is("$text"));for(const i of t)e.wrap(e.createRangeOn(i),"paragraph");return!!t.length}function y2e(n){return n.position.parent.is("element","tableCell")?n.type=="insert"&&n.name=="$text"||n.type=="remove":!1}function A2e(n,e){const t=n.document.differ;for(const i of t.getChanges()){let s,r=!1;if(i.type=="attribute"){const d=i.range.start.nodeAfter;if(!d||!d.is("element","table")||i.attributeKey!="headingRows"&&i.attributeKey!="headingColumns")continue;s=d,r=i.attributeKey=="headingRows"}else(i.name=="tableRow"||i.name=="tableCell")&&(s=i.position.findAncestor("table"),r=i.name=="tableRow");if(!s)continue;const o=s.getAttribute("headingRows")||0,a=s.getAttribute("headingColumns")||0,c=new at(s);for(const d of c){const m=d.row<o||d.column<a?"th":"td",p=e.mapper.toViewElement(d.cell);p&&p.is("element")&&p.name!=m&&e.reconvertItem(r?d.cell.parent:d.cell)}}}function _2e(n,e){const t=n.document.differ,i=new Set;for(const s of t.getChanges()){const r=s.type=="attribute"?s.range.start.parent:s.position.parent;r.is("element","tableCell")&&i.add(r)}for(const s of i.values()){const r=Array.from(s.getChildren()).filter(o=>C2e(o,e.mapper));for(const o of r)e.reconvertItem(o)}}function C2e(n,e){if(!n.is("element","paragraph"))return!1;const t=e.toViewElement(n);return t?Iz(n)!==t.is("element","span"):!1}class qm extends z{_additionalSlots;static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[jn]}constructor(e){super(e),this._additionalSlots=[]}init(){const e=this.editor,t=e.model,i=t.schema,s=e.conversion,r=e.plugins.get(jn);i.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),i.register("tableRow",{allowIn:"table",isLimit:!0}),i.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),s.for("upcast").add(bTe()),s.for("upcast").add(wTe()),s.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:I4(r,{asWidget:!0,additionalSlots:this._additionalSlots})}),s.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:I4(r,{additionalSlots:this._additionalSlots})}),s.for("upcast").elementToElement({model:"tableRow",view:"tr"}),s.for("upcast").add(vTe()),s.for("downcast").elementToElement({model:"tableRow",view:_Te()}),s.for("upcast").elementToElement({model:"tableCell",view:"td"}),s.for("upcast").elementToElement({model:"tableCell",view:"th"}),s.for("upcast").add(T4("td")),s.for("upcast").add(T4("th")),s.for("editingDowncast").elementToElement({model:"tableCell",view:R4({asWidget:!0,cellTypeEnabled:()=>$o(this.editor)})}),s.for("dataDowncast").elementToElement({model:"tableCell",view:R4({cellTypeEnabled:()=>$o(this.editor)})}),s.for("editingDowncast").elementToElement({model:"paragraph",view:P4({asWidget:!0}),converterPriority:"high"}),s.for("dataDowncast").elementToElement({model:"paragraph",view:P4(),converterPriority:"high"}),s.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),s.for("upcast").attributeToAttribute({model:{key:"colspan",value:z4("colspan")},view:"colspan"}),s.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),s.for("upcast").attributeToAttribute({model:{key:"rowspan",value:z4("rowspan")},view:"rowspan"}),this._addPlainTableOutputConverters(),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.config.define("table.showHiddenBorders",!0),e.config.get("table.showHiddenBorders")&&e.editing.view.change(o=>{for(const a of e.editing.view.document.roots)o.addClass("ck-table-show-hidden-borders",a)}),e.commands.add("insertTable",new ITe(e)),e.commands.add("insertTableRowAbove",new O4(e,{order:"above"})),e.commands.add("insertTableRowBelow",new O4(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new D4(e,{order:"left"})),e.commands.add("insertTableColumnRight",new D4(e,{order:"right"})),e.commands.add("removeTableRow",new MTe(e)),e.commands.add("removeTableColumn",new NTe(e)),e.commands.add("splitTableCellVertically",new M4(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new M4(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new r2e(e)),e.commands.add("mergeTableCellRight",new Xp(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new Xp(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new Xp(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new Xp(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new zTe(e)),e.commands.add("setTableRowHeader",new FTe(e)),e.commands.add("selectTableRow",new l2e(e)),e.commands.add("selectTableColumn",new c2e(e)),u2e(t),b2e(t),this.listenTo(t.document,"change:data",()=>{$o(e)||A2e(t,e.editing),_2e(t,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}_addPlainTableOutputConverters(){const e=this.editor;e.conversion.for("dataDowncast").elementToStructure({model:"table",view:kTe(e),converterPriority:"high"}),e.plugins.has("TableCaptionEditing")&&e.conversion.for("dataDowncast").elementToElement({model:"caption",view:ETe(e),converterPriority:"high"}),e.plugins.has("TablePropertiesEditing")&&TTe(e)}}function z4(n){return e=>{const t=parseInt(e.getAttribute(n));return Number.isNaN(t)||t<=0?null:t}}class j4 extends we{items;keystrokes;focusTracker;constructor(e){super(e);const t=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new Ht,this.focusTracker=new St,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(i,s)=>`${s}  ${i}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:t.to("label")}]}],on:{mousedown:t.to(i=>{i.preventDefault()}),click:t.to(()=>{this.fire("execute")})}}),this.on("boxover",(i,s)=>{const{row:r,column:o}=s.target.dataset;this.items.get((parseInt(r,10)-1)*10+(parseInt(o,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(i,s,r)=>{if(!r)return;const{row:o,column:a}=r.dataset;this.set({rows:parseInt(o),columns:parseInt(a)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),uy({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,t=this.columns;this.items.map((i,s)=>{const r=Math.floor(s/10),o=s%10,a=r<e&&o<t;i.set("isOn",a)})}_createGridButton(e,t,i,s){const r=new Se(e);return r.set({label:s,class:"ck-insert-table-dropdown-grid-box"}),r.extendTemplate({attributes:{"data-row":t,"data-column":i}}),r}_createGridCollection(){const e=[];for(let t=0;t<100;t++){const i=Math.floor(t/10),s=t%10,r=`${i+1}  ${s+1}`;e.push(this._createGridButton(this.locale,i+1,s+1,r))}return this.createCollection(e)}}class x2e extends z{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t,s=e.locale.contentLanguageDirection==="ltr";e.ui.componentFactory.add("insertTable",r=>{const o=e.commands.get("insertTable"),a=ls(r);a.bind("isEnabled").to(o),a.buttonView.set({icon:fD,label:t("Insert table"),tooltip:!0});let c;return a.on("change:isOpen",()=>{c||(c=new j4(r),a.panelView.children.add(c),c.delegate("execute").to(a),a.on("execute",()=>{e.execute("insertTable",{rows:c.rows,columns:c.columns}),e.editing.view.focus()}))}),a}),e.ui.componentFactory.add("menuBar:insertTable",r=>{const o=e.commands.get("insertTable"),a=new Zr(r),c=new j4(r);return c.delegate("execute").to(a),a.on("change:isOpen",(d,h,m)=>{m||c.reset()}),c.on("execute",()=>{e.execute("insertTable",{rows:c.rows,columns:c.columns}),e.editing.view.focus()}),a.buttonView.set({label:t("Table"),icon:fD}),a.panelView.children.add(c),a.bind("isEnabled").to(o),a}),e.ui.componentFactory.add("tableColumn",r=>{const o=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:s?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:s?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return this._prepareDropdown(t("Column"),lve,o,r)}),e.ui.componentFactory.add("tableRow",r=>{const o=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return this._prepareDropdown(t("Row"),dve,o,r)}),e.ui.componentFactory.add("mergeTableCells",r=>{const o=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:s?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:s?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(t("Merge cells"),cve,o,r)})}_prepareDropdown(e,t,i,s){const r=this.editor,o=ls(s),a=this._fillDropdownWithListOptions(o,i);return o.buttonView.set({label:e,icon:t,tooltip:!0}),o.bind("isEnabled").toMany(a,"isEnabled",(...c)=>c.some(d=>d)),this.listenTo(o,"execute",c=>{r.execute(c.source.commandName),c.source instanceof pc||r.editing.view.focus()}),o}_prepareMergeSplitButtonDropdown(e,t,i,s){const r=this.editor,o=ls(s,jm),a="mergeTableCells",c=r.commands.get(a),d=this._fillDropdownWithListOptions(o,i);return o.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),o.bind("isEnabled").toMany([c,...d],"isEnabled",(...h)=>h.some(m=>m)),this.listenTo(o.buttonView,"execute",()=>{r.execute(a),r.editing.view.focus()}),this.listenTo(o,"execute",h=>{r.execute(h.source.commandName),r.editing.view.focus()}),o}_fillDropdownWithListOptions(e,t){const i=this.editor,s=[],r=new Wn;for(const o of t)k2e(o,i,s,r);return Sc(e,r),s}}function k2e(n,e,t,i){if(n.type==="button"||n.type==="switchbutton"){const s=n.model=new cl(n.model),{commandName:r,bindIsOn:o}=n.model,a=e.commands.get(r);t.push(a),s.set({commandName:r}),s.bind("isEnabled").to(a),o&&s.bind("isOn").to(a,"value"),s.set({withText:!0})}i.add(n)}class nl extends z{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[jn,jn]}init(){const e=this.editor,t=e.model,i=e.editing.view;this.listenTo(t,"deleteContent",(s,r)=>this._handleDeleteContent(s,r),{priority:"high"}),this.listenTo(i.document,"insertText",(s,r)=>this._handleInsertTextEvent(s,r),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const e=this.editor.plugins.get(jn),t=this.editor.model.document.selection,i=e.getSelectedTableCells(t);return i.length==0?null:i}getSelectionAsFragment(){const e=this.editor.plugins.get(jn),t=this.getSelectedTableCells();return t?this.editor.model.change(i=>{const s=i.createDocumentFragment(),{first:r,last:o}=e.getColumnIndexes(t),{first:a,last:c}=e.getRowIndexes(t),d=t[0].findAncestor("table");let h=c,m=o;if(e.isSelectionRectangular(t)){const A={firstColumn:r,lastColumn:o,firstRow:a,lastRow:c};h=Ez(d,A),m=Sz(d,A)}const w=yz(d,{startRow:a,startColumn:r,endRow:h,endColumn:m},i);return i.insert(w,s,0),s}):null}setCellSelection(e,t){const i=this._getCellsToSelect(e,t);this.editor.model.change(s=>{s.setSelection(i.cells.map(r=>s.createRangeOn(r)),{backward:i.backward})})}getFocusCell(){const i=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return i&&i.is("element","tableCell")?i:null}getAnchorCell(){const e=this.editor.model.document.selection,i=qt(e.getRanges()).getContainedElement();return i&&i.is("element","tableCell")?i:null}_defineSelectionConverter(){const e=this.editor,t=new Set;e.conversion.for("editingDowncast").add(s=>s.on("selection",(r,o,a)=>{const c=a.writer;i(c);const d=this.getSelectedTableCells();if(!d)return;for(const m of d){const p=a.mapper.toViewElement(m);c.addClass("ck-editor__editable_selected",p),t.add(p)}const h=a.mapper.toViewElement(d[d.length-1]);c.setSelection(h,0)},{priority:"lowest"}));function i(s){for(const r of t)s.removeClass("ck-editor__editable_selected",r);t.clear()}}_enablePluginDisabling(){const e=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const t=this.getSelectedTableCells();if(!t)return;e.model.change(i=>{const s=i.createPositionAt(t[0],0),r=e.model.schema.getNearestSelectionRange(s);i.setSelection(r)})}})}_handleDeleteContent(e,t){const i=this.editor.plugins.get(jn),s=t[0],r=t[1],o=this.editor.model,a=!r||r.direction=="backward",c=i.getSelectedTableCells(s);c.length&&(e.stop(),o.change(d=>{const h=c[a?c.length-1:0];o.change(p=>{for(const w of c)o.deleteContent(p.createSelection(w,"in"))});const m=o.schema.getNearestSelectionRange(d.createPositionAt(h,0));s.is("documentSelection")?d.setSelection(m):s.setTo(m)}))}_handleInsertTextEvent(e,t){const i=this.editor,s=this.getSelectedTableCells();if(!s)return;const r=i.editing.view,o=i.editing.mapper,a=s.map(c=>r.createRangeOn(o.toViewElement(c)));t.selection=r.createSelection(a),t.preventDefault()}_getCellsToSelect(e,t){const i=this.editor.plugins.get("TableUtils"),s=i.getCellLocation(e),r=i.getCellLocation(t),o=Math.min(s.row,r.row),a=Math.max(s.row,r.row),c=Math.min(s.column,r.column),d=parseInt(t.getAttribute("colspan")||"1")-1,h=Math.max(s.column,r.column+d),m=new Array(a-o+1).fill(null).map(()=>[]),p={startRow:o,endRow:a,startColumn:c,endColumn:h};for(const{row:C,cell:k}of new at(e.findAncestor("table"),p))m[C-o].push(k);const w=r.row<s.row,A=r.column<s.column;return w&&m.reverse(),A&&m.forEach(C=>C.reverse()),{cells:m.flat(),backward:w||A}}}class E2e extends z{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Eh,Ps,nl,jn]}init(){const t=this.editor.editing.view.document;this.listenTo(t,"copy",(i,s)=>this._onCopyCut(i,s)),this.listenTo(t,"cut",(i,s)=>this._onCopyCut(i,s)),this._listenToContentInsertion(),this.decorate("_replaceTableSlotCell")}_listenToContentInsertion(){const{editor:e}=this,t=e.plugins.get(Ps),i=e.plugins.get(nl);let s=!1;t.on("contentInsertion",(r,o)=>{s=o.method==="paste"}),this.listenTo(e.model,"insertContent",(r,[o,a])=>{(s||i.getSelectedTableCells()!==null)&&this._onInsertContent(r,o,a)},{priority:"high"}),t.on("contentInsertion",()=>{s=!1},{priority:"lowest"})}_onCopyCut(e,t){const i=this.editor.editing.view,s=this.editor.plugins.get(nl),r=this.editor.plugins.get(Eh);s.getSelectedTableCells()&&(e.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(t.preventDefault(),e.stop(),this.editor.model.enqueueChange({isUndoable:e.name==="cut"},()=>{const o=r._copySelectedFragmentWithMarkers(e.name,this.editor.model.document.selection,()=>s.getSelectionAsFragment());i.document.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:this.editor.data.toView(o),method:e.name})})))}_onInsertContent(e,t,i){if(i&&!i.is("documentSelection"))return;const s=this.editor.model,r=this.editor.plugins.get(jn),o=this.editor.plugins.get(Eh),a=this.getTableIfOnlyTableInContent(t,s);if(!a)return;const c=r.getSelectionAffectedTableCells(s.document.selection);if(!c.length){bS(a,r);return}e.stop(),t.is("documentFragment")?o._pasteMarkersIntoTransformedElement(t.markers,d=>this._replaceSelectedCells(a,c,d)):this.editor.model.change(d=>{this._replaceSelectedCells(a,c,d)})}_replaceSelectedCells(e,t,i){const s=this.editor.plugins.get(jn),r={width:s.getColumns(e),height:s.getRows(e)},o=S2e(t,r,i,s),a=o.lastRow-o.firstRow+1,c=o.lastColumn-o.firstColumn+1,d={startRow:0,startColumn:0,endRow:Math.min(a,r.height)-1,endColumn:Math.min(c,r.width)-1};e=yz(e,d,i);const h=t[0].findAncestor("table"),m=this._replaceSelectedCellsWithPasted(e,r,h,o,i);if(this.editor.plugins.get("TableSelection").isEnabled){const p=s.sortRanges(m.map(w=>i.createRangeOn(w)));i.setSelection(p)}else i.setSelection(m[0],0);return h}_replaceSelectedCellsWithPasted(e,t,i,s,r){const{width:o,height:a}=t,c=I2e(e,o,a),d=[...new at(i,{startRow:s.firstRow,endRow:s.lastRow,startColumn:s.firstColumn,endColumn:s.lastColumn,includeAllSlots:!0})],h=[];let m;for(const k of d){const{row:E,column:S}=k;S===s.firstColumn&&(m=k.getPositionBefore());const I=E-s.firstRow,R=S-s.firstColumn,O=c[I%a][R%o],U=O?r.cloneElement(O):null,P=this._replaceTableSlotCell(k,U,m,r);P&&(kz(P,E,S,s.lastRow,s.lastColumn,r),h.push(P),m=r.createPositionAfter(P))}const p=parseInt(i.getAttribute("headingRows")||"0"),w=parseInt(i.getAttribute("headingColumns")||"0"),A=s.firstRow<p&&p<=s.lastRow,C=s.firstColumn<w&&w<=s.lastColumn;if(A){const k={first:s.firstColumn,last:s.lastColumn},E=ax(i,p,k,r,s.firstRow);h.push(...E)}if(C){const k={first:s.firstRow,last:s.lastRow},E=lx(i,w,k,r);h.push(...E)}return h}_replaceTableSlotCell(e,t,i,s){const{cell:r,isAnchor:o}=e;return o&&s.remove(r),t?(s.insert(t,i),t):null}getTableIfOnlyTableInContent(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(e.childCount==1&&e.getChild(0).is("element","table"))return e.getChild(0);const i=t.createRangeIn(e);for(const s of i.getItems())if(s.is("element","table")){const r=t.createRange(i.start,t.createPositionBefore(s));if(t.hasContent(r,{ignoreWhitespaces:!0}))return null;const o=t.createRange(t.createPositionAfter(s),i.end);return t.hasContent(o,{ignoreWhitespaces:!0})?null:s}return null}}function S2e(n,e,t,i){const s=n[0].findAncestor("table"),r=i.getColumnIndexes(n),o=i.getRowIndexes(n),a={firstColumn:r.first,lastColumn:r.last,firstRow:o.first,lastRow:o.last},c=n.length===1;return c&&(a.lastRow+=e.height-1,a.lastColumn+=e.width-1,T2e(s,a.lastRow+1,a.lastColumn+1,i)),c||!i.isSelectionRectangular(n)?R2e(s,a,t):(a.lastRow=Ez(s,a),a.lastColumn=Sz(s,a)),a}function T2e(n,e,t,i){const s=i.getColumns(n),r=i.getRows(n);t>s&&i.insertColumns(n,{at:s,columns:t-s}),e>r&&i.insertRows(n,{at:r,rows:e-r})}function I2e(n,e,t){const i=new Array(t).fill(null).map(()=>new Array(e).fill(null));for(const{column:s,row:r,cell:o}of new at(n))i[r][s]=o;return i}function R2e(n,e,t){const{firstRow:i,lastRow:s,firstColumn:r,lastColumn:o}=e,a={first:i,last:s},c={first:r,last:o};lx(n,r,a,t),lx(n,o+1,a,t),ax(n,i,c,t),ax(n,s+1,c,t,i)}function ax(n,e,t,i,s=0){return e<1?void 0:Az(n,e,s).filter(({column:a,cellWidth:c})=>Dz(a,c,t)).map(({cell:a})=>_z(a,e,i))}function lx(n,e,t,i){return e<1?void 0:Cz(n,e).filter(({row:o,cellHeight:a})=>Dz(o,a,t)).map(({cell:o,column:a})=>xz(o,a,e,i))}function Dz(n,e,t){const i=n+e-1,{first:s,last:r}=t,o=n>=s&&n<=r,a=n<s&&i>=s;return o||a}class P2e extends z{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[nl,jn]}init(){const e=this.editor,i=e.editing.view.document,s=e.t;this.listenTo(i,"arrowKey",(...r)=>this._onArrowKey(...r),{context:"table"}),this.listenTo(i,"tab",(...r)=>this._handleTabOnSelectedTable(...r),{context:"figure"}),this.listenTo(i,"tab",(...r)=>this._handleTab(...r),{context:["th","td"]}),e.accessibility.addKeystrokeInfoGroup({id:"table",label:s("Keystrokes that can be used in a table cell"),keystrokes:[{label:s("Move the selection to the next cell"),keystroke:"Tab"},{label:s("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:s("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:s("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(e,t){const r=this.editor.model.document.selection.getSelectedElement();!r||!r.is("element","table")||t.stopPropagation()}_handleTab(e,t){const i=this.editor,s=this.editor.plugins.get(jn),r=this.editor.plugins.get("TableSelection"),o=i.model.document.selection,a=!t.shiftKey;let c=s.getTableCellsContainingSelection(o)[0];if(c||(c=r.getFocusCell()),!c)return;t.stopPropagation();const d=c.parent,h=d.parent,m=h.getChildIndex(d),w=d.getChildIndex(c)===d.childCount-1,A=m===s.getRows(h)-1;a&&A&&w&&i.execute("insertTableRowBelow")}_onArrowKey(e,t){const i=this.editor,s=t.keyCode,r=ny(s,i.locale.contentLanguageDirection);this._handleArrowKeys(r,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}_handleArrowKeys(e,t){const i=this.editor.plugins.get(jn),s=this.editor.plugins.get("TableSelection"),r=this.editor.model,o=r.document.selection,a=["right","down"].includes(e),c=i.getSelectedTableCells(o);if(c.length){let h;return t?h=s.getFocusCell():h=a?c[c.length-1]:c[0],this._navigateFromCellInDirection(h,e,t),!0}const d=o.focus.findAncestor("tableCell");if(!d)return!1;if(!o.isCollapsed)if(t){if(o.isBackward==a&&!o.containsEntireContent(d))return!1}else{const h=o.getSelectedElement();if(!h||!r.schema.isObject(h))return!1}return this._isSelectionAtCellEdge(o,d,a)?(this._navigateFromCellInDirection(d,e,t),!0):!1}_isSelectionAtCellEdge(e,t,i){const s=this.editor.model,r=this.editor.model.schema,o=i?e.getLastPosition():e.getFirstPosition();if(!r.getLimitElement(o).is("element","tableCell"))return s.createPositionAt(t,i?"end":0).isTouching(o);const a=s.createSelection(o);return s.modifySelection(a,{direction:i?"forward":"backward"}),o.isEqual(a.focus)}_navigateFromCellInDirection(e,t,i=!1){const s=this.editor.model,r=e.findAncestor("table"),o=[...new at(r,{includeAllSlots:!0})],{row:a,column:c}=o[o.length-1],d=o.find(({cell:S})=>S==e);let{row:h,column:m}=d;switch(t){case"left":m--;break;case"up":h--;break;case"right":m+=d.cellWidth;break;case"down":h+=d.cellHeight;break}const p=h<0||h>a,w=m<0&&h<=0,A=m>c&&h>=a;if(p||w||A){s.change(S=>{S.setSelection(S.createRangeOn(r))});return}m<0?(m=i?0:c,h--):m>c&&(m=i?c:0,h++);const C=o.find(S=>S.row==h&&S.column==m).cell,k=["right","down"].includes(t),E=this.editor.plugins.get("TableSelection");if(i&&E.isEnabled){const S=E.getAnchorCell()||e;E.setCellSelection(S,C)}else{const S=s.createPositionAt(C,k?0:"end");s.change(I=>{I.setSelection(S)})}}}class Mz extends Mr{domEventType=["mousemove","mouseleave"];onDomEvent(e){this.fire(e.type,e)}}class O2e extends z{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[nl,jn]}init(){this.editor.editing.view.addObserver(Mz),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const e=this.editor,t=e.plugins.get(jn);let i=!1;const s=e.plugins.get(nl);this.listenTo(e.editing.view.document,"mousedown",(r,o)=>{const a=e.model.document.selection;if(!this.isEnabled||!s.isEnabled||!o.domEvent.shiftKey)return;const c=s.getAnchorCell()||t.getTableCellsContainingSelection(a)[0];if(!c)return;const d=this._getModelTableCellFromDomEvent(o);d&&U4(c,d)&&(i=!0,s.setCellSelection(c,d),o.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{i=!1}),this.listenTo(e.editing.view.document,"selectionChange",r=>{i&&r.stop()},{priority:"highest"})}_enableMouseDragSelection(){const e=this.editor;let t,i,s=!1,r=!1;const o=e.plugins.get(nl);this.listenTo(e.editing.view.document,"mousedown",(a,c)=>{!this.isEnabled||!o.isEnabled||c.domEvent.shiftKey||c.domEvent.ctrlKey||c.domEvent.altKey||(t=this._getModelTableCellFromDomEvent(c))}),this.listenTo(e.editing.view.document,"mousemove",(a,c)=>{if(!c.domEvent.buttons||!t)return;const d=this._getModelTableCellFromDomEvent(c);d&&U4(t,d)&&(i=d,!s&&i!=t&&(s=!0)),s&&(r=!0,o.setCellSelection(t,i),c.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{s=!1,r=!1,t=null,i=null}),this.listenTo(e.editing.view.document,"selectionChange",a=>{r&&a.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(e){const t=e.target,i=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(i).parent.findAncestor("tableCell",{includeSelf:!0})}}function U4(n,e){return n.parent.parent==e.parent.parent}class D2e extends z{static get requires(){return[qm,x2e,nl,O2e,P2e,E2e,Cl]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}function Lw(n){const e=Bz(n);return e||yy(n)}function Bz(n){const e=n.getSelectedElement();return e&&Nz(e)?e:null}function yy(n){const e=n.getFirstPosition();if(!e)return null;let t=e.parent;for(;t;){if(t.is("element")&&Nz(t))return t;t=t.parent}return null}function Nz(n){return n.is("element")&&!!n.getCustomProperty("table")&&tn(n)}class M2e extends z{static get requires(){return[Pw]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const e=this.editor,t=e.t,i=e.plugins.get(Pw),s=e.config.get("table.contentToolbar"),r=e.config.get("table.tableToolbar");s&&i.register("tableContent",{ariaLabel:t("Table toolbar"),items:s,getRelatedElement:yy}),r&&i.register("table",{ariaLabel:t("Table toolbar"),items:r,getRelatedElement:Bz})}}class B2e extends we{options;focusTracker;focusCycler;_focusables;dropdownView;inputView;keystrokes;_stillTyping;constructor(e,t){super(e),this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=t,this.focusTracker=new St,this._focusables=new ei,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new Ht,this._stillTyping=!1,this.focusCycler=new ui({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(i,s,r)=>this._setInputValue(r))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(e=>{this.focusTracker.add(e.element),this._focusables.add(e)}),this.keystrokes.listenTo(this.element)}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const e=this.locale,t=e.t,i=this.bindTemplate,s=this._createColorSelector(e),r=ls(e),o=new we;return o.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:i.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",i.if("value","ck-hidden",a=>a!="")]}}]}),r.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),r.buttonView.children.add(o),r.buttonView.label=t("Color picker"),r.buttonView.tooltip=!0,r.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",r.panelView.children.add(s),r.bind("isEnabled").to(this,"isReadOnly",a=>!a),r.on("change:isOpen",(a,c,d)=>{d&&(s.updateSelectedColors(),s.showColorGridsFragment())}),r}_createInputTextView(){const e=this.locale,t=new q8(e);return t.extendTemplate({on:{blur:t.bindTemplate.to("blur")}}),t.value=this.value,t.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(t),t.on("input",()=>{const i=t.element.value,s=this.options.colorDefinitions.find(r=>i===r.label);this._stillTyping=!0,this.value=s&&s.color||i}),t.on("blur",()=>{this._stillTyping=!1,this._setInputValue(t.element.value)}),t.delegate("input").to(this),t}_createColorSelector(e){const t=e.t,i=this.options.defaultColorValue||"",s=t(i?"Restore default":"Remove color"),r=new Qye(e,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:s,colorPickerLabel:t("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});r.appendUI(),r.on("execute",(a,c)=>{if(c.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=c.value||i,this.fire("input"),c.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let o=this.value;return r.on("colorPicker:cancel",()=>{this.value=o,this.fire("input"),this.dropdownView.isOpen=!1}),r.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{o=this.value}),r.bind("selectedColor").to(this,"value"),r}_setInputValue(e){if(!this._stillTyping){const t=H4(e),i=this.options.colorDefinitions.find(s=>t===H4(s.color));i?this.inputView.value=i.label:this.inputView.value=e||""}}}function H4(n){return n.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const AS=n=>n==="";function _S(n){return{none:n("None"),solid:n("Solid"),dotted:n("Dotted"),dashed:n("Dashed"),double:n("Double"),groove:n("Groove"),ridge:n("Ridge"),inset:n("Inset"),outset:n("Outset")}}function Vz(n){return n('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function Lz(n){return n('The value is invalid. Try "10px" or "2em" or simply "2".')}function Fw(n){return n=n.trim().toLowerCase(),AS(n)||m8(n)}function Th(n){return n=n.trim(),AS(n)||jz(n)||jE(n)||Ibe(n)}function Fz(n){return n=n.trim(),AS(n)||jz(n)||jE(n)}function zz(n,e){const t=new Wn,i=_S(n.t);for(const s in i){const r={type:"button",model:new cl({_borderStyleValue:s,label:i[s],role:"menuitemradio",withText:!0})};s==="none"?r.model.bind("isOn").to(n,"borderStyle",o=>e==="none"?!o:o===s):r.model.bind("isOn").to(n,"borderStyle",o=>o===s),t.add(r)}return t}function cx(n){const{view:e,icons:t,toolbar:i,labels:s,propertyName:r,nameToValue:o,defaultValue:a}=n;for(const c in s){const d=new Se(e.locale);d.set({role:"radio",isToggleable:!0,label:s[c],icon:t[c],tooltip:s[c]});const h=o?o(c):c;d.bind("isOn").to(e,r,m=>{let p=m;return m===""&&a&&(p=a),h===p}),d.on("execute",()=>{!a&&h&&e[r]===h?e[r]=void 0:e[r]=h}),i.items.add(d)}}const zw=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function jw(n){return(e,t,i)=>{const s=new B2e(e.locale,{colorDefinitions:N2e(n.colorConfig),columns:n.columns,defaultColorValue:n.defaultColorValue,colorPickerConfig:n.colorPickerConfig});return s.inputView.set({id:t,ariaDescribedById:i}),s.bind("isReadOnly").to(e,"isEnabled",r=>!r),s.bind("hasError").to(e,"errorText",r=>!!r),s.on("input",()=>{e.errorText=null}),e.bind("isEmpty","isFocused").to(s),s}}function jz(n){const e=parseFloat(n);return!Number.isNaN(e)&&n===String(e)}function N2e(n){return n.map(e=>({color:e.model,label:e.label,options:{hasBorder:e.hasBorder}}))}class V2e extends we{options;focusTracker;keystrokes;children;borderStyleDropdown;borderWidthInput;borderColorInput;backgroundInput;paddingInput;widthInput;heightInput;horizontalAlignmentToolbar;verticalAlignmentToolbar;saveButtonView;cancelButtonView;_focusables;_focusCycler;constructor(e,t){super(e),this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=t;const{borderStyleDropdown:i,borderWidthInput:s,borderColorInput:r,borderRowLabel:o}=this._createBorderFields(),{backgroundRowLabel:a,backgroundInput:c}=this._createBackgroundFields(),{widthInput:d,operatorLabel:h,heightInput:m,dimensionsLabel:p}=this._createDimensionFields(),{horizontalAlignmentToolbar:w,verticalAlignmentToolbar:A,alignmentLabel:C}=this._createAlignmentFields();this.focusTracker=new St,this.keystrokes=new Ht,this.children=this.createCollection(),this.borderStyleDropdown=i,this.borderWidthInput=s,this.borderColorInput=r,this.backgroundInput=c,this.paddingInput=this._createPaddingField(),this.widthInput=d,this.heightInput=m,this.horizontalAlignmentToolbar=w,this.verticalAlignmentToolbar=A;const{saveButtonView:k,cancelButtonView:E}=this._createActionButtons();this.saveButtonView=k,this.cancelButtonView=E,this._focusables=new ei,this._focusCycler=new ui({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new ya(e,{label:this.t("Cell properties")})),this.children.add(new bi(e,{labelView:o,children:[o,i,r,s],class:"ck-table-form__border-row"})),this.children.add(new bi(e,{labelView:a,children:[a,c],class:"ck-table-form__background-row"})),this.children.add(new bi(e,{children:[new bi(e,{labelView:p,children:[p,d,h,m],class:"ck-table-form__dimensions-row"}),new bi(e,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new bi(e,{labelView:C,children:[C,w,A],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new bi(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),va({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableCellProperties,t={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},i=jw({colorConfig:this.options.borderColors,columns:5,defaultColorValue:t.color,colorPickerConfig:this.options.colorPickerConfig}),s=this.locale,r=this.t,o=r("Style"),a=new Ys(s);a.text=r("Border");const c=_S(r),d=new un(s,XE);d.set({label:o,class:"ck-table-form__border-style"}),d.fieldView.buttonView.set({ariaLabel:o,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:o}),d.fieldView.buttonView.bind("label").to(this,"borderStyle",p=>c[p||"none"]),d.fieldView.on("execute",p=>{this.borderStyle=p.source._borderStyleValue}),d.bind("isEmpty").to(this,"borderStyle",p=>!p),Sc(d.fieldView,zz(this,t.style),{role:"menu",ariaLabel:o});const h=new un(s,os);h.set({label:r("Width"),class:"ck-table-form__border-width"}),h.fieldView.bind("value").to(this,"borderWidth"),h.bind("isEnabled").to(this,"borderStyle",tb),h.fieldView.on("input",()=>{this.borderWidth=h.fieldView.element.value});const m=new un(s,i);return m.set({label:r("Color"),class:"ck-table-form__border-color"}),m.fieldView.bind("value").to(this,"borderColor"),m.bind("isEnabled").to(this,"borderStyle",tb),m.fieldView.on("input",()=>{this.borderColor=m.fieldView.value}),this.on("change:borderStyle",(p,w,A,C)=>{tb(A)||(this.borderColor="",this.borderWidth=""),tb(C)||(this.borderColor=t.color,this.borderWidth=t.width)}),{borderRowLabel:a,borderStyleDropdown:d,borderColorInput:m,borderWidthInput:h}}_createBackgroundFields(){const e=this.locale,t=this.t,i=new Ys(e);i.text=t("Background");const s=jw({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),r=new un(e,s);return r.set({label:t("Color"),class:"ck-table-cell-properties-form__background"}),r.fieldView.bind("value").to(this,"backgroundColor"),r.fieldView.on("input",()=>{this.backgroundColor=r.fieldView.value}),{backgroundRowLabel:i,backgroundInput:r}}_createDimensionFields(){const e=this.locale,t=this.t,i=new Ys(e);i.text=t("Dimensions");const s=new un(e,os);s.set({label:t("Width"),class:"ck-table-form__dimensions-row__width"}),s.fieldView.bind("value").to(this,"width"),s.fieldView.on("input",()=>{this.width=s.fieldView.element.value});const r=new we(e);r.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:""}]});const o=new un(e,os);return o.set({label:t("Height"),class:"ck-table-form__dimensions-row__height"}),o.fieldView.bind("value").to(this,"height"),o.fieldView.on("input",()=>{this.height=o.fieldView.element.value}),{dimensionsLabel:i,widthInput:s,operatorLabel:r,heightInput:o}}_createPaddingField(){const e=this.locale,t=this.t,i=new un(e,os);return i.set({label:t("Padding"),class:"ck-table-cell-properties-form__padding"}),i.fieldView.bind("value").to(this,"padding"),i.fieldView.on("input",()=>{this.padding=i.fieldView.element.value}),i}_createAlignmentFields(){const e=this.locale,t=this.t,i=new Ys(e),s={left:x8,center:pwe,right:vwe,justify:bwe,top:ywe,middle:wwe,bottom:gwe};i.text=t("Table cell text alignment");const r=new da(e),o=e.contentLanguageDirection==="rtl";r.set({isCompact:!0,role:"radiogroup",ariaLabel:t("Horizontal text alignment toolbar")}),cx({view:this,icons:s,toolbar:r,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:c=>{if(o){if(c==="left")return"right";if(c==="right")return"left"}return c},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const a=new da(e);return a.set({isCompact:!0,role:"radiogroup",ariaLabel:t("Vertical text alignment toolbar")}),cx({view:this,icons:s,toolbar:a,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:r,verticalAlignmentToolbar:a,alignmentLabel:i}}_createActionButtons(){const e=this.locale,t=this.t,i=new Se(e),s=new Se(e),r=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return i.set({label:t("Save"),icon:Lm,class:"ck-button-save",type:"submit",withText:!0}),i.bind("isEnabled").toMany(r,"errorText",(...o)=>o.every(a=>!a)),s.set({label:t("Cancel"),icon:Vm,class:"ck-button-cancel",withText:!0}),s.delegate("execute").to(this,"cancel"),{saveButtonView:i,cancelButtonView:s}}get _horizontalAlignmentLabels(){const e=this.locale,t=this.t,i=t("Align cell text to the left"),s=t("Align cell text to the center"),r=t("Align cell text to the right"),o=t("Justify cell text");return e.uiLanguageDirection==="rtl"?{right:r,center:s,left:i,justify:o}:{left:i,center:s,right:r,justify:o}}get _verticalAlignmentLabels(){const e=this.t;return{top:e("Align cell text to the top"),middle:e("Align cell text to the middle"),bottom:e("Align cell text to the bottom")}}}function tb(n){return n!=="none"}const ux=[rn.defaultPositions.northArrowSouth,rn.defaultPositions.northArrowSouthWest,rn.defaultPositions.northArrowSouthEast,rn.defaultPositions.southArrowNorth,rn.defaultPositions.southArrowNorthWest,rn.defaultPositions.southArrowNorthEast,rn.defaultPositions.viewportStickyNorth];function Uz(n,e){const t=n.plugins.get("ContextualBalloon"),i=n.editing.view.document.selection;let s;e==="cell"?yy(i)&&(s=Wz(n)):Lw(i)&&(s=Hz(n)),s&&t.updatePosition(s)}function Hz(n){const e=n.model.document.selection,t=ia(e),i=n.editing.mapper.toViewElement(t);return{target:n.editing.view.domConverter.mapViewToDom(i),positions:ux}}function Wz(n){const e=n.editing.mapper,t=n.editing.view.domConverter,i=n.model.document.selection;if(i.rangeCount>1)return{target:()=>L2e(i.getRanges(),n),positions:ux};const s=$z(i.getFirstPosition()),r=e.toViewElement(s);return{target:t.mapViewToDom(r),positions:ux}}function $z(n){return n.nodeAfter&&n.nodeAfter.is("element","tableCell")?n.nodeAfter:n.findAncestor("tableCell")}function L2e(n,e){const t=e.editing.mapper,i=e.editing.view.domConverter,s=Array.from(n).map(r=>{const o=$z(r.start),a=t.toViewElement(o);return new Le(i.mapViewToDom(a))});return Le.getBoundingRect(s)}const F2e=500,W4={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class z2e extends z{_defaultContentTableCellProperties;_defaultLayoutTableCellProperties;_balloon;view;_viewWithContentTableDefaults;_viewWithLayoutTableDefaults;_undoStepBatch;_isReady;static get requires(){return[Rr]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("table.tableCellProperties",{borderColors:zw,backgroundColors:zw})}init(){const e=this.editor,t=e.t;this._defaultContentTableCellProperties=vS(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._defaultLayoutTableCellProperties=vy(void 0,{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._balloon=e.plugins.get(Rr),this.view=null,this._isReady=!1,e.ui.componentFactory.add("tableCellProperties",i=>{const s=new Se(i);s.set({label:t("Cell properties"),icon:ave,tooltip:!0}),this.listenTo(s,"execute",()=>this._showView());const r=Object.values(W4).map(o=>e.commands.get(o));return s.bind("isEnabled").toMany(r,"isEnabled",(...o)=>o.some(a=>a)),s})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(e){const t=this.editor,i=t.config.get("table.tableCellProperties"),s=Iw(i.borderColors),r=Tw(t.locale,s),o=Iw(i.backgroundColors),a=Tw(t.locale,o),c=i.colorPicker!==!1,d=new V2e(t.locale,{borderColors:r,backgroundColors:a,defaultTableCellProperties:e,colorPickerConfig:c?i.colorPicker||{}:!1}),h=t.t;d.render(),this.listenTo(d,"submit",()=>{this._hideView()}),this.listenTo(d,"cancel",()=>{this._undoStepBatch.operations.length&&t.execute("undo",this._undoStepBatch),this._hideView()}),d.keystrokes.set("Esc",(w,A)=>{this._hideView(),A()}),_l({emitter:d,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const m=Vz(h),p=Lz(h);return d.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),d.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:d.borderColorInput,commandName:"tableCellBorderColor",errorText:m,validator:Fw})),d.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:d.borderWidthInput,commandName:"tableCellBorderWidth",errorText:p,validator:Fz})),d.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:d.paddingInput,commandName:"tableCellPadding",errorText:p,validator:Th})),d.on("change:width",this._getValidatedPropertyChangeCallback({viewField:d.widthInput,commandName:"tableCellWidth",errorText:p,validator:Th})),d.on("change:height",this._getValidatedPropertyChangeCallback({viewField:d.heightInput,commandName:"tableCellHeight",errorText:p,validator:Th})),d.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:d.backgroundInput,commandName:"tableCellBackgroundColor",errorText:m,validator:Fw})),d.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),d.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),d}_fillViewFormFromCommandValues(){const e=this.editor.commands,t=e.get("tableCellBorderStyle");Object.entries(W4).map(([i,s])=>{const r=i,o=this.view===this._viewWithContentTableDefaults?this._defaultContentTableCellProperties[r]||"":this._defaultLayoutTableCellProperties[r]||"";return[i,e.get(s).value||o]}).forEach(([i,s])=>{(i==="borderColor"||i==="borderWidth")&&t.value==="none"||this.view.set(i,s)}),this._isReady=!0}_showView(){const e=this.editor,t=Lw(e.editing.view.document.selection),i=t&&e.editing.mapper.toModelElement(t),s=!i||i.getAttribute("tableType")!=="layout";s&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableCellProperties):!s&&!this._viewWithLayoutTableDefaults&&(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableCellProperties)),this.view=s?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:Wz(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,t=e.editing.view.document;yy(t.selection)?this._isViewVisible&&Uz(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(t,i,s)=>{this._isReady&&this.editor.execute(e,{value:s,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:t,viewField:i,validator:s,errorText:r}=e,o=Ts(()=>{i.errorText=r},F2e);return(a,c,d)=>{o.cancel(),this._isReady&&(s(d)?(this.editor.execute(t,{value:d,batch:this._undoStepBatch}),i.errorText=null):o())}}}class mo extends je{attributeName;_defaultValue;_defaultContentTableValue;_defaultLayoutTableValue;constructor(e,t,i){switch(super(e),this.attributeName=t,this._defaultContentTableValue=i,t){case"tableCellType":this._defaultLayoutTableValue="data";break;case"tableCellBorderStyle":this._defaultLayoutTableValue="none";break;case"tableCellHorizontalAlignment":this._defaultLayoutTableValue="left";break;case"tableCellVerticalAlignment":this._defaultLayoutTableValue="middle";break;default:this._defaultLayoutTableValue=void 0}}refresh(){const t=this.editor.model.document.selection,s=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t),r=ia(t);this._defaultValue=!r||r.getAttribute("tableType")!=="layout"?this._defaultContentTableValue:this._defaultLayoutTableValue,this.isEnabled=!!s.length,this.value=this._getSingleValue(s)}execute(e={}){const{value:t,batch:i}=e,s=this.editor.model,o=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(s.document.selection),a=this._getValueToSet(t);s.enqueueChange(i,c=>{a?o.forEach(d=>c.setAttribute(this.attributeName,a,d)):o.forEach(d=>c.removeAttribute(this.attributeName,d)),this.fire("afterExecute",{writer:c,tableCells:o,valueToSet:a})})}_getAttribute(e){if(!e)return;const t=e.getAttribute(this.attributeName);if(t!==this._defaultValue)return t}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const t=this._getAttribute(e[0]);return e.every(s=>this._getAttribute(s)===t)?t:void 0}}class j2e extends mo{constructor(e,t){super(e,"tableCellWidth",t)}_getValueToSet(e){if(e=Oc(e,"px"),e!==this._defaultValue)return e}}class Gz extends z{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[qm]}init(){const e=this.editor,t=vS(e.config.get("table.tableCellProperties.defaultProperties"));Rb(e.model.schema,e.conversion,{modelAttribute:"tableCellWidth",styleName:"width",attributeName:"width",attributeType:"length",defaultValue:t.width}),e.commands.add("tableCellWidth",new j2e(e,t.width))}}class U2e extends mo{constructor(e,t){super(e,"tableCellPadding",t)}_getAttribute(e){if(!e)return;const t=Pc(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=Oc(e,"px");if(t!==this._defaultValue)return t}}class H2e extends mo{constructor(e,t){super(e,"tableCellHeight",t)}_getValueToSet(e){const t=Oc(e,"px");if(t!==this._defaultValue)return t}}class W2e extends mo{constructor(e,t){super(e,"tableCellBackgroundColor",t)}}class $2e extends mo{constructor(e,t){super(e,"tableCellVerticalAlignment",t)}}class G2e extends mo{constructor(e,t){super(e,"tableCellHorizontalAlignment",t)}}class Y2e extends mo{constructor(e,t){super(e,"tableCellBorderStyle",t)}_getAttribute(e){if(!e)return;const t=Pc(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}class K2e extends mo{constructor(e,t){super(e,"tableCellBorderColor",t)}_getAttribute(e){if(!e)return;const t=Pc(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}class q2e extends mo{constructor(e,t){super(e,"tableCellBorderWidth",t)}_getAttribute(e){if(!e)return;const t=Pc(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=Oc(e,"px");if(t!==this._defaultValue)return t}}class Q2e extends mo{constructor(e){super(e,"tableCellType","data"),this.on("afterExecute",(t,i)=>{const{writer:s,tableCells:r}=i,o=this.editor.plugins.get(jn),a=gTe(r);Yz(o,s,a.keys())})}refresh(){super.refresh();const e=ia(this.editor.model.document.selection);this.isEnabled&&e&&e.getAttribute("tableType")==="layout"&&(this.isEnabled=!1)}_getAttribute(e){return e?.getAttribute(this.attributeName)||"data"}}function Yz(n,e,t){let i=!1;for(const s of t){let r=s.getAttribute("headingRows")||0,o=s.getAttribute("headingColumns")||0;const a=o>r;if(a){const d=A1(n,s,"column",o,r);d!==o&&(n.setHeadingColumnsCount(e,s,d,{shallow:!0}),o=d,i=!0)}const c=A1(n,s,"row",r,o);if(c!==r&&(n.setHeadingRowsCount(e,s,c,{shallow:!0}),r=c,i=!0),!a){const d=A1(n,s,"column",o,r);d!==o&&(n.setHeadingColumnsCount(e,s,d,{shallow:!0}),i=!0)}}return i}function A1(n,e,t,i,s){const r=t==="row"?n.getRows(e):n.getColumns(e);let o=i;for(let a=0;a<r;a++){const c=new at(e,{[t]:a});let d=!0,h=!1;for(const{cell:m,row:p,column:w}of c){if(m.getAttribute("tableCellType")!=="header"){d=!1;break}(t==="row"?w:p)>=s&&(h=!0)}if(!d)return Math.min(o,a);h&&(o=Math.max(o,a+1))}return Math.min(o,r)}const $4=/^(top|middle|bottom)$/,G4=/^(left|center|right|justify)$/;class Z2e extends z{static get pluginName(){return"TableCellPropertiesEditing"}static get licenseFeatureCode(){return"TCP"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[qm,Gz]}init(){const e=this.editor,t=e.model.schema,i=e.conversion;e.config.define("table.tableCellProperties.defaultProperties",{});const s=vS(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"});e.data.addStyleProcessorRules(b8),J2e(e,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),e.commands.add("tableCellBorderStyle",new Y2e(e,s.borderStyle)),e.commands.add("tableCellBorderColor",new K2e(e,s.borderColor)),e.commands.add("tableCellBorderWidth",new q2e(e,s.borderWidth)),Rb(t,i,{modelAttribute:"tableCellHeight",styleName:"height",attributeName:"height",attributeType:"length",defaultValue:s.height}),e.commands.add("tableCellHeight",new H2e(e,s.height)),e.data.addStyleProcessorRules($be),Rb(t,i,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:s.padding}),e.commands.add("tableCellPadding",new U2e(e,s.padding)),e.data.addStyleProcessorRules(p8),Rb(t,i,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",attributeName:"bgcolor",attributeType:"color",defaultValue:s.backgroundColor}),e.commands.add("tableCellBackgroundColor",new W2e(e,s.backgroundColor)),X2e(t,i,s.horizontalAlignment),e.commands.add("tableCellHorizontalAlignment",new G2e(e,s.horizontalAlignment)),eIe(t,i,s.verticalAlignment),e.commands.add("tableCellVerticalAlignment",new $2e(e,s.verticalAlignment)),e.config.get("experimentalFlags.tableCellTypeSupport")&&(tIe(e),e.commands.add("tableCellType",new Q2e(e)))}}function J2e(n,e){const{conversion:t}=n,{schema:i}=n.model,s={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};i.extend("tableCell",{allowAttributes:Object.values(s)});for(const r of Object.values(s))i.setAttributeProperties(r,{isFormatting:!0});ex(n,"td",s,e),ex(n,"th",s,e),Sh(t,{modelElement:"tableCell",modelAttribute:s.style,styleName:"border-style"}),Sh(t,{modelElement:"tableCell",modelAttribute:s.color,styleName:"border-color"}),Sh(t,{modelElement:"tableCell",modelAttribute:s.width,styleName:"border-width"})}function X2e(n,e,t){n.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),n.setAttributeProperties("tableCellHorizontalAlignment",{isFormatting:!0}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:i=>({key:"style",value:{"text-align":i}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":G4}},model:{key:"tableCellHorizontalAlignment",value:(i,s,r)=>{const o=yr(t,"left",r),a=i.getStyle("text-align");if(a!==o)return a;s.consumable.consume(i,{styles:"text-align"})}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:G4}},model:{key:"tableCellHorizontalAlignment",value:(i,s,r)=>{const o=yr(t,"left",r),a=i.getAttribute("align");if(a!==o)return a;s.consumable.consume(i,{attributes:"align"})}}})}function eIe(n,e,t){n.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),n.setAttributeProperties("tableCellVerticalAlignment",{isFormatting:!0}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:i=>({key:"style",value:{"vertical-align":i}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":$4}},model:{key:"tableCellVerticalAlignment",value:(i,s,r)=>{const o=yr(t,"middle",r),a=i.getStyle("vertical-align");if(a!==o)return a;s.consumable.consume(i,{styles:"vertical-align"})}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:$4}},model:{key:"tableCellVerticalAlignment",value:(i,s,r)=>{const o=yr(t,"middle",r),a=i.getAttribute("valign");if(a!==o)return a;s.consumable.consume(i,{attributes:"valign"})}}})}function tIe(n){const{model:e,conversion:t,editing:i}=n,{schema:s}=e,r=n.plugins.get(jn);s.extend("tableCell",{allowAttributes:["tableCellType"]}),s.setAttributeProperties("tableCellType",{isFormatting:!0}),s.addAttributeCheck(o=>{if(Array.from(o).reverse().find(c=>c.name==="table")?.getAttribute("tableType")==="layout")return!1},"tableCellType"),t.for("upcast").add(o=>{o.on("element:th",(a,c,d)=>{const{writer:h}=d,{modelRange:m}=c,p=m?.start.nodeAfter;p?.is("element","tableCell")&&h.setAttribute("tableCellType","header",p)}),o.on("element:table",(a,c,d)=>{const{writer:h}=d,{modelRange:m}=c,p=m?.start.nodeAfter;if(p?.is("element","table")&&p.getAttribute("tableType")==="layout"){for(const{cell:w}of new at(p))if(w.getAttribute("tableCellType")==="header"){h.setAttribute("tableType","content",p);break}}},{priority:rs.low-1})}),e.document.registerPostFixer(o=>{const a=e.document.differ.getChanges(),c=new Set;for(const d of a){if(d.type==="attribute"&&(d.attributeKey==="headingRows"||d.attributeKey==="headingColumns")){const h=d.range.start.nodeAfter;h?.is("element","table")&&h.root.rootName!=="$graveyard"&&c.add(h)}if(d.type==="attribute"&&d.attributeKey==="tableCellType"){const h=d.range.start.nodeAfter;if(h?.is("element","tableCell")&&h.root.rootName!=="$graveyard"){const m=h.findAncestor("table");m&&c.add(m)}}if(d.type==="insert"&&d.position.nodeAfter){for(const{item:h}of e.createRangeOn(d.position.nodeAfter))if(h.is("element","tableCell")&&h.getAttribute("tableCellType")&&h.root.rootName!=="$graveyard"){const m=h.findAncestor("table");m&&c.add(m)}}}return Yz(r,o,c)}),e.document.on("change:data",()=>{const{differ:o}=e.document,a=new Set;for(const c of o.getChanges())if(c.type==="attribute"&&c.attributeKey==="tableCellType"){const d=c.range.start.nodeAfter;d.is("element","tableCell")&&a.add(d)}for(const c of a){const d=i.mapper.toViewElement(c),m=c.getAttribute("tableCellType")==="header"?"th":"td";d?.name!==m&&i.reconvertItem(c)}})}class nIe extends z{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[Z2e,z2e]}}class iIe extends je{refresh(){this.isEnabled=!0}execute(e={}){const{model:t,plugins:i}=this.editor;let{table:s=t.document.selection.getSelectedElement(),columnWidths:r,tableWidth:o}=e;r&&(r=Array.isArray(r)?r:r.split(",")),t.change(a=>{o?a.setAttribute("tableWidth",o,s):a.removeAttribute("tableWidth",s);const c=i.get("TableColumnResizeEditing").getColumnGroupElement(s);if(!r&&!c)return;if(!r)return a.remove(c);const d=yS(r);if(c)Array.from(c.getChildren()).forEach((h,m)=>a.setAttribute("columnWidth",d[m],h));else{const h=a.createElement("tableColumnGroup");d.forEach(m=>a.appendElement("tableColumn",{columnWidth:m},h)),a.append(h,s)}})}}function sIe(n){return e=>e.on("element:colgroup",(t,i,s)=>{const r=i.modelCursor.findAncestor("table"),o=Ym(r);if(!o)return;const a=Km(o),c=n.getColumns(r);let d=JTe(o,s.writer);d=Array.from({length:c},(h,m)=>d[m]||"auto"),(d.length!=a.length||d.includes("auto"))&&Pz(a,o,yS(d),s.writer)},{priority:"low"})}function rIe(){return n=>n.on("insert:table",(e,t,i)=>{const s=i.writer,r=t.item,o=i.mapper.toViewElement(r),a=o.is("element","table")?o:Array.from(o.getChildren()).find(d=>d.is("element","table"));Ym(r)?s.addClass("ck-table-resized",a):s.removeClass("ck-table-resized",a)},{priority:"low"})}function oIe(){return n=>{n.on("element:table",(e,t,i)=>{i.consumable.consume(t.viewItem,{classes:"ck-table-resized"})})}}const Y4=wa("px");class aIe extends z{_isResizingActive;_resizingData;_domEmitter;_tableUtilsPlugin;_initialMouseEventData=null;static get requires(){return[qm,jn]}static get pluginName(){return"TableColumnResizeEditing"}static get licenseFeatureCode(){return"TCR"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}constructor(e){super(e),this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(Wi()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(t,i,s)=>{const r=s?"removeClass":"addClass";e.editing.view.change(o=>{for(const a of e.editing.view.document.roots)o[r]("ck-column-resize_disabled",e.editing.view.document.getRoot(a.rootName))})})}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,t=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:r=>r.is("element","tableColumnGroup"),positionOffset:0});const s=new iIe(e);e.commands.add("resizeTableWidth",s),e.commands.add("resizeColumnWidths",s),this.bind("_isResizingAllowed").to(e,"isReadOnly",t,"isEnabled",s,"isEnabled",(r,o,a)=>!r&&o&&a)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return Ym(e)}getTableColumnElements(e){return Km(e)}getTableColumnsWidths(e){return ZTe(e)}_extendSchema(){const e=this.editor.model.schema;e.extend("table",{allowAttributes:["tableWidth"]}),e.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),e.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0}),e.setAttributeProperties("columnWidth",{isFormatting:!0})}_registerPostFixer(){const t=this.editor.model;t.document.registerPostFixer(r=>{let o=!1;for(const a of WTe(t)){const c=this.getColumnGroupElement(a),d=this.getTableColumnElements(c),h=this.getTableColumnsWidths(c);let m=yS(h);m=i(m,a,this),!yd(h,m)&&(Pz(d,c,m,r),o=!0)}return o});function i(r,o,a){const c=a._tableUtilsPlugin.getColumns(o);if(c-r.length===0)return r;const h=r.map(p=>Number(p.replace("%",""))),m=s(a.editor.model.document.differ,o);for(const p of m){const w=c-h.length;if(w===0)continue;const A=w>0,C=a._tableUtilsPlugin.getCellLocation(p).column;if(A){const k=$Te(o,a.editor),E=KTe(w,k);h.splice(C,0,...E)}else{const k=h.splice(C,Math.abs(w));h[C]+=hm(k)}}return h.map(p=>p+"%")}function s(r,o){const a=new Set;for(const c of r.getChanges())if(c.type=="insert"&&c.position.nodeAfter&&c.position.nodeAfter.name=="tableCell"&&c.position.nodeAfter.getAncestors().includes(o))a.add(c.position.nodeAfter);else if(c.type=="remove"){const d=c.position.nodeBefore||c.position.nodeAfter;d.name=="tableCell"&&d.getAncestors().includes(o)&&a.add(d)}return a}}_registerConverters(){const t=this.editor.conversion;t.for("upcast").attributeToAttribute({view:{name:/^(figure|table)$/,styles:{width:/[\s\S]+/}},model:{key:"tableWidth",value:i=>{if(!i.parent.is("element","figure"))return i.getStyle("width")}}}),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:i=>({name:"figure",key:"style",value:{width:i}})}),t.elementToElement({model:"tableColumnGroup",view:"colgroup"}),t.elementToElement({model:"tableColumn",view:"col"}),t.for("downcast").add(rIe()),t.for("upcast").add(oIe()),t.for("upcast").add(sIe(this._tableUtilsPlugin)),t.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:i=>{const s=i.getStyle("width");return!s||!s.endsWith("%")&&!s.endsWith("pt")?"auto":s}}}),t.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),t.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:i=>({key:"style",value:{width:i}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(Mz),e.document.on("mouseover",this._onMouseOverHandler.bind(this),{priority:"high"}),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),e.document.on("mouseout",this._onMouseOutHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(me.window.document,"mousemove",hc(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(me.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_recalculateResizerElement(e){const t=this.editor,i=t.editing.view.domConverter,s=i.mapViewToDom(e.findAncestor("table")),r=i.mapViewToDom(e.findAncestor(h=>["td","th"].includes(h.name))),o=new Le(s),a=new Le(r),c=Y4(Number((o.top-a.top).toFixed(4))),d=Y4(Number((a.bottom-o.bottom).toFixed(4)));t.editing.view.change(h=>{h.setStyle("top",c,e),h.setStyle("bottom",d,e)})}_resetResizerStyles(e){this.editor.editing.view.change(t=>{t.removeStyle("top",e),t.removeStyle("bottom",e)})}_onMouseOverHandler(e,t){const i=t.target;i.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&this._recalculateResizerElement(i)}_onMouseOutHandler(e,t){const i=t.target;i.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&(this._isResizingActive||this._resetResizerStyles(i))}_onMouseDownHandler(e,t){const i=t.target;if(!i.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const s=this.editor,r=s.editing.mapper.toModelElement(i.findAncestor("figure"));s.model.canEditAt(r)&&(t.preventDefault(),e.stop(),this._initialMouseEventData=t)}_startResizingAfterThreshold(){const e=this._initialMouseEventData,{target:t}=e,i=this.editor.editing.mapper.toModelElement(t.findAncestor("figure")),s=t.findAncestor("table"),r=o(i,this._tableUtilsPlugin,this.editor);Array.from(s.getChildren()).find(d=>d.is("element","colgroup"))||this.editor.editing.view.change(d=>{a(d,r,s)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(e,r),this.editor.editing.view.change(d=>c(d,s,this._resizingData));function o(d,h,m){const p=Array(h.getColumns(d)),w=new at(d);for(const A of w){const C=m.editing.mapper.toViewElement(A.cell),k=m.editing.view.domConverter.mapViewToDom(C),E=QTe(k);(!p[A.column]||E<p[A.column])&&(p[A.column]=ss(E))}return p}function a(d,h,m){const p=d.createContainerElement("colgroup");for(let w=0;w<h.length;w++){const A=d.createEmptyElement("col"),C=`${ss(h[w]/hm(h)*100)}%`;d.setStyle("width",C,A),d.insert(d.createPositionAt(p,"end"),A)}d.insert(d.createPositionAt(m,0),p)}function c(d,h,m){const p=m.widths.viewFigureWidth/m.widths.viewFigureParentWidth;d.addClass("ck-table-resized",h),d.addClass("ck-table-column-resizer__active",m.elements.viewResizer),d.setStyle("width",`${ss(p*100)}%`,h.findAncestor("figure"))}}_onMouseMoveHandler(e,t){if(this._initialMouseEventData){const I=this._initialMouseEventData.domEvent;if(Math.abs(t.clientX-I.clientX)>=HTe)this._startResizingAfterThreshold(),this._initialMouseEventData=null;else return}if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:i,flags:{isRightEdge:s,isTableCentered:r,isLtrContent:o},elements:{viewFigure:a,viewLeftColumn:c,viewRightColumn:d,viewResizer:h},widths:{viewFigureParentWidth:m,tableWidth:p,leftColumnWidth:w,rightColumnWidth:A}}=this._resizingData,C=-w+sx,k=s?m-p:A-sx,E=(o?1:-1)*(s&&r?2:1),S=YTe((t.clientX-i)*E,Math.min(C,0),Math.max(k,0));S!==0&&(this.editor.editing.view.change(I=>{const R=ss((w+S)*100/p);if(I.setStyle("width",`${R}%`,c),s){const O=ss((p+S)*100/m);I.setStyle("width",`${O}%`,a)}else{const O=ss((A-S)*100/p);I.setStyle("width",`${O}%`,d)}}),this._recalculateResizerElement(h))}_onMouseUpHandler(){if(this._initialMouseEventData=null,!this._isResizingActive)return;const{viewResizer:e,modelTable:t,viewFigure:i,viewColgroup:s}=this._resizingData.elements,r=this.editor,o=r.editing.view,a=this.getColumnGroupElement(t),c=Array.from(s.getChildren()).filter(k=>k.is("view:element")),d=a?this.getTableColumnsWidths(a):null,h=c.map(k=>k.getStyle("width")),m=!yd(d,h),p=t.getAttribute("tableWidth"),w=i.getStyle("width"),A=p!==w;(m||A)&&(this._isResizingAllowed?r.execute("resizeTableWidth",{table:t,tableWidth:`${ss(w)}%`,columnWidths:h}):o.change(k=>{if(d)for(const E of c)k.setStyle("width",d.shift(),E);else k.remove(s);A&&(p?k.setStyle("width",p,i):k.removeStyle("width",i)),!d&&!p&&k.removeClass("ck-table-resized",[...i.getChildren()].find(E=>E.name==="table"))})),o.change(k=>{k.removeClass("ck-table-column-resizer__active",e)}),o.domConverter.mapViewToDom(e).matches(":hover")||this._resetResizerStyles(e),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,t){const i=this.editor,s=e.domEvent.clientX,r=e.target,o=r.findAncestor("td")||r.findAncestor("th"),a=i.editing.mapper.toModelElement(o),c=a.findAncestor("table"),d=GTe(a,this._tableUtilsPlugin).rightEdge,h=this._tableUtilsPlugin.getColumns(c)-1,m=d===h,p=!c.hasAttribute("tableAlignment"),w=i.locale.contentLanguageDirection!=="rtl",A=o.findAncestor("table"),C=A.findAncestor("figure"),k=[...A.getChildren()].find(V=>V.is("element","colgroup")),E=k.getChild(d),S=m?void 0:k.getChild(d+1),I=rx(i.editing.view.domConverter.mapViewToDom(C.parent)),R=rx(i.editing.view.domConverter.mapViewToDom(C)),O=Rz(c,i),U=t[d],P=m?void 0:t[d+1];return{columnPosition:s,flags:{isRightEdge:m,isTableCentered:p,isLtrContent:w},elements:{viewResizer:r,modelTable:c,viewFigure:C,viewColgroup:k,viewLeftColumn:E,viewRightColumn:S},widths:{viewFigureParentWidth:I,viewFigureWidth:R,tableWidth:O,leftColumnWidth:U,rightColumnWidth:P}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(t,i,s)=>{const r=i.item,o=s.mapper.toViewElement(r),a=s.writer;a.insert(a.createPositionAt(o,"end"),a.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class lIe extends z{static get requires(){return[aIe,Gz]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}class Dc extends je{attributeName;_defaultValue;_defaultContentTableValue;_defaultLayoutTableValue;constructor(e,t,i){super(e),this.attributeName=t,this._defaultContentTableValue=i,this._defaultLayoutTableValue=t==="tableBorderStyle"?"none":void 0}refresh(){const t=this.editor.model.document.selection,i=ia(t);this._defaultValue=!i||i.getAttribute("tableType")!=="layout"?this._defaultContentTableValue:this._defaultLayoutTableValue,this.isEnabled=!!i,this.value=this._getValue(i)}execute(e={}){const t=this.editor.model,i=t.document.selection,{value:s,batch:r}=e,o=ia(i),a=this._getValueToSet(s);t.enqueueChange(r,c=>{a?c.setAttribute(this.attributeName,a,o):c.removeAttribute(this.attributeName,o)})}_getValue(e){if(!e)return;const t=e.getAttribute(this.attributeName);if(t!==this._defaultValue)return t}_getValueToSet(e){if(e!==this._defaultValue)return e}}class cIe extends Dc{constructor(e,t){super(e,"tableBackgroundColor",t)}}class uIe extends Dc{constructor(e,t){super(e,"tableBorderColor",t)}_getValue(e){if(!e)return;const t=Pc(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}class dIe extends Dc{constructor(e,t){super(e,"tableBorderStyle",t)}_getValue(e){if(!e)return;const t=Pc(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}class fIe extends Dc{constructor(e,t){super(e,"tableBorderWidth",t)}_getValue(e){if(!e)return;const t=Pc(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=Oc(e,"px");if(t!==this._defaultValue)return t}}class hIe extends Dc{constructor(e,t){super(e,"tableWidth",t)}_getValueToSet(e){if(e=Oc(e,"px"),e!==this._defaultValue)return e}}class mIe extends Dc{constructor(e,t){super(e,"tableHeight",t)}_getValueToSet(e){if(e=Oc(e,"px"),e!==this._defaultValue)return e}}class gIe extends Dc{constructor(e,t){super(e,"tableAlignment",t)}}class pIe extends z{static get pluginName(){return"TablePropertiesEditing"}static get licenseFeatureCode(){return"TCP"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}static get requires(){return[qm]}init(){const e=this.editor,t=e.model.schema,i=e.conversion;e.config.define("table.tableProperties.defaultProperties",{});const s=wS(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),r=e.config.get("table.tableProperties.alignment.useInlineStyles")!==!1;if(e.data.addStyleProcessorRules(v8),e.data.addStyleProcessorRules(b8),wIe(e,{color:s.borderColor,style:s.borderStyle,width:s.borderWidth}),e.commands.add("tableBorderColor",new uIe(e,s.borderColor)),e.commands.add("tableBorderStyle",new dIe(e,s.borderStyle)),e.commands.add("tableBorderWidth",new fIe(e,s.borderWidth)),e.config.get("experimentalFlags.useExtendedTableBlockAlignment")?vIe(t,i,s.alignment,r):yIe(t,i,s.alignment),e.commands.add("tableAlignment",new gIe(e,s.alignment)),q4(t,i,{modelAttribute:"tableWidth",styleName:"width",attributeName:"width",attributeType:"length",defaultValue:s.width}),e.commands.add("tableWidth",new hIe(e,s.width)),q4(t,i,{modelAttribute:"tableHeight",styleName:"height",attributeName:"height",attributeType:"length",defaultValue:s.height}),e.commands.add("tableHeight",new mIe(e,s.height)),e.data.addStyleProcessorRules(p8),CIe(t,i,{modelAttribute:"tableBackgroundColor",styleName:"background-color",attributeName:"bgcolor",attributeType:"color",defaultValue:s.backgroundColor}),e.commands.add("tableBackgroundColor",new cIe(e,s.backgroundColor)),e.config.get("experimentalFlags.useExtendedTableBlockAlignment")){const o=e.editing.view.document;this.listenTo(o,"clipboardOutput",(a,c)=>{e.editing.view.change(d=>{for(const{item:h}of d.createRangeIn(c.content))bIe(h,d);c.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(c.content))})},{priority:"lowest"})}}}function bIe(n,e){if(!n.is("element","table"))return;const t=n.getAttribute("align"),i=n.getStyle("float"),s=n.getStyle("margin-left"),r=n.getStyle("margin-right");if(t&&t==="center"||i&&i==="right"&&t&&t==="right"){K4(e,t,n);return}i===void 0&&s==="auto"&&r==="0"&&K4(e,"right",n)}function K4(n,e,t){const i=n.createPositionBefore(t),s=n.createContainerElement("div",{align:e},t);n.insert(i,s)}function wIe(n,e){const{conversion:t}=n,{schema:i}=n.model,s={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};i.extend("table",{allowAttributes:Object.values(s)});for(const r of Object.values(s))i.setAttributeProperties(r,{isFormatting:!0});ex(n,"table",s,e),Tb(t,{modelAttribute:s.color,styleName:"border-color"}),Tb(t,{modelAttribute:s.style,styleName:"border-style"}),Tb(t,{modelAttribute:s.width,styleName:"border-width"})}function vIe(n,e,t,i){n.extend("table",{allowAttributes:["tableAlignment"]}),n.setAttributeProperties("tableAlignment",{isFormatting:!0}),e.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment",values:["left","center","right","blockLeft","blockRight"]},view:{left:i?{key:"style",value:{float:"left","margin-right":"var(--ck-content-table-style-spacing, 1.5em)"}}:{key:"class",value:Ei.left.className},right:i?{key:"style",value:{float:"right","margin-left":"var(--ck-content-table-style-spacing, 1.5em)"}}:{key:"class",value:Ei.right.className},center:i?{key:"style",value:{"margin-left":"auto","margin-right":"auto"}}:{key:"class",value:Ei.center.className},blockLeft:i?{key:"style",value:{"margin-left":"0","margin-right":"auto"}}:{key:"class",value:Ei.blockLeft.className},blockRight:i?{key:"style",value:{"margin-left":"auto","margin-right":"0"}}:{key:"class",value:Ei.blockRight.className}},converterPriority:"high"}),hTe.forEach(s=>{e.for("upcast").attributeToAttribute({view:s.view,model:{key:"tableAlignment",value:(r,o,a)=>{if(xIe(r))return;const c=yr(t,"",a),d=s.getAlign(r),h=s.getConsumables(r);if(o.consumable.consume(r,h),d!==c)return d}}})}),e.for("upcast").add(AIe(t))}function yIe(n,e,t){const i=/^(left|center|right)$/,s=/^(left|none|right)$/;n.extend("table",{allowAttributes:["tableAlignment"]}),n.setAttributeProperties("tableAlignment",{isFormatting:!0}),e.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment",values:["left","center","right"]},view:{left:{key:"style",value:{float:"left"}},right:{key:"style",value:{float:"right"}},center:(r,o,a)=>({key:"style",value:a.item.getAttribute("tableType")!=="layout"?{float:"none"}:{"margin-left":"auto","margin-right":"auto"}})},converterPriority:"high"}),e.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:s}},model:{key:"tableAlignment",value:(r,o,a)=>{if(r.name=="figure"&&!r.hasClass("table"))return;const c=yr(t,"",a);let d=r.getStyle("float");if(d==="none"&&(d="center"),d!==c)return d;o.consumable.consume(r,{styles:"float"})}}}).attributeToAttribute({view:{name:/^(table|figure)$/,styles:{"margin-left":"auto","margin-right":"auto"}},model:{key:"tableAlignment",value:(r,o,a)=>{if(r.name=="figure"&&!r.hasClass("table"))return;const c=yr(t,"",a),d="center";if(d!==c)return d;o.consumable.consume(r,{styles:["margin-left","margin-right"]})}}}).attributeToAttribute({view:{name:"table",attributes:{align:i}},model:{key:"tableAlignment",value:(r,o,a)=>{const c=yr(t,"",a),d=r.getAttribute("align");if(d!==c)return d;o.consumable.consume(r,{attributes:"align"})}}})}function AIe(n){return e=>{e.on("element:div",(t,i,s)=>{if(!s.consumable.test(i.viewItem,{name:!0,attributes:"align"}))return;const r=Tz(i.viewItem);if(!r||!s.consumable.test(r,{name:!0}))return;s.consumable.consume(i.viewItem,{name:!0,attributes:"align"});const o=s.convertItem(r,i.modelCursor),a=qt(o.modelRange.getItems());if(!a||!a.is("element","table")){s.consumable.revert(i.viewItem,{name:!0,attributes:"align"}),o.modelRange&&!o.modelRange.isCollapsed&&(i.modelRange=o.modelRange,i.modelCursor=o.modelCursor);return}const c=i.viewItem.getAttribute("align"),d=r.getAttribute("align"),h=yr(n,"",i),m=_Ie(c,d,h);m&&s.writer.setAttribute("tableAlignment",m,a),s.convertChildren(i.viewItem,s.writer.createPositionAt(a,"end")),s.updateConversionResult(a,i)})}}function _Ie(n,e,t){if(n)switch(n){case"right":return e==="right"?"right":e==="left"?"left":"blockRight";case"center":return"center";case"left":return e===void 0?"blockLeft":"left";default:return t}}function CIe(n,e,t){const{modelAttribute:i}=t;n.extend("table",{allowAttributes:[i]}),n.setAttributeProperties(i,{isFormatting:!0}),pS(e,{viewElement:"table",...t}),Tb(e,t)}function q4(n,e,t){const{modelAttribute:i}=t;n.extend("table",{allowAttributes:[i]}),n.setAttributeProperties(i,{isFormatting:!0}),pS(e,{viewElement:/^(table|figure)$/,shouldUpcast:s=>!(s.name=="table"&&s.parent.name=="figure"||s.name=="figure"&&!s.hasClass("table")),...t}),Sh(e,{modelElement:"table",...t})}function xIe(n){return n.name=="figure"&&!n.hasClass("table")}class kIe extends we{options;focusTracker;keystrokes;children;borderStyleDropdown;borderWidthInput;borderColorInput;backgroundInput;widthInput;heightInput;alignmentToolbar;saveButtonView;cancelButtonView;_focusables;_focusCycler;constructor(e,t){super(e),this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=t;const{borderStyleDropdown:i,borderWidthInput:s,borderColorInput:r,borderRowLabel:o}=this._createBorderFields(),{backgroundRowLabel:a,backgroundInput:c}=this._createBackgroundFields(),{widthInput:d,operatorLabel:h,heightInput:m,dimensionsLabel:p}=this._createDimensionFields(),{alignmentToolbar:w,alignmentLabel:A}=this._createAlignmentFields();this.focusTracker=new St,this.keystrokes=new Ht,this.children=this.createCollection(),this.borderStyleDropdown=i,this.borderWidthInput=s,this.borderColorInput=r,this.backgroundInput=c,this.widthInput=d,this.heightInput=m,this.alignmentToolbar=w;const{saveButtonView:C,cancelButtonView:k}=this._createActionButtons();this.saveButtonView=C,this.cancelButtonView=k,this._focusables=new ei,this._focusCycler=new ui({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new ya(e,{label:this.t("Table properties")})),this.children.add(new bi(e,{labelView:o,children:[o,i,r,s],class:"ck-table-form__border-row"})),this.children.add(new bi(e,{labelView:a,children:[a,c],class:"ck-table-form__background-row"})),this.children.add(new bi(e,{children:[new bi(e,{labelView:p,children:[p,d,h,m],class:"ck-table-form__dimensions-row"}),new bi(e,{labelView:A,children:[A,w],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new bi(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),va({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableProperties,t={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},i=jw({colorConfig:this.options.borderColors,columns:5,defaultColorValue:t.color,colorPickerConfig:this.options.colorPickerConfig}),s=this.locale,r=this.t,o=r("Style"),a=new Ys(s);a.text=r("Border");const c=_S(r),d=new un(s,XE);d.set({label:o,class:"ck-table-form__border-style"}),d.fieldView.buttonView.set({ariaLabel:o,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:o}),d.fieldView.buttonView.bind("label").to(this,"borderStyle",p=>c[p||"none"]),d.fieldView.on("execute",p=>{this.borderStyle=p.source._borderStyleValue}),d.bind("isEmpty").to(this,"borderStyle",p=>!p),Sc(d.fieldView,zz(this,t.style),{role:"menu",ariaLabel:o});const h=new un(s,os);h.set({label:r("Width"),class:"ck-table-form__border-width"}),h.fieldView.bind("value").to(this,"borderWidth"),h.bind("isEnabled").to(this,"borderStyle",nb),h.fieldView.on("input",()=>{this.borderWidth=h.fieldView.element.value});const m=new un(s,i);return m.set({label:r("Color"),class:"ck-table-form__border-color"}),m.fieldView.bind("value").to(this,"borderColor"),m.bind("isEnabled").to(this,"borderStyle",nb),m.fieldView.on("input",()=>{this.borderColor=m.fieldView.value}),this.on("change:borderStyle",(p,w,A,C)=>{nb(A)||(this.borderColor="",this.borderWidth=""),nb(C)||(this.borderColor=t.color,this.borderWidth=t.width)}),{borderRowLabel:a,borderStyleDropdown:d,borderColorInput:m,borderWidthInput:h}}_createBackgroundFields(){const e=this.locale,t=this.t,i=new Ys(e);i.text=t("Background");const s=jw({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),r=new un(e,s);return r.set({label:t("Color"),class:"ck-table-properties-form__background"}),r.fieldView.bind("value").to(this,"backgroundColor"),r.fieldView.on("input",()=>{this.backgroundColor=r.fieldView.value}),{backgroundRowLabel:i,backgroundInput:r}}_createDimensionFields(){const e=this.locale,t=this.t,i=new Ys(e);i.text=t("Dimensions");const s=new un(e,os);s.set({label:t("Width"),class:"ck-table-form__dimensions-row__width"}),s.fieldView.bind("value").to(this,"width"),s.fieldView.on("input",()=>{this.width=s.fieldView.element.value});const r=new we(e);r.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:""}]});const o=new un(e,os);return o.set({label:t("Height"),class:"ck-table-form__dimensions-row__height"}),o.fieldView.bind("value").to(this,"height"),o.fieldView.on("input",()=>{this.height=o.fieldView.element.value}),{dimensionsLabel:i,widthInput:s,operatorLabel:r,heightInput:o}}_createAlignmentFields(){const e=this.locale,t=this.t,i=new Ys(e);i.text=t("Alignment");const s=new da(e);return s.set({role:"radiogroup",isCompact:!0,ariaLabel:t("Table alignment toolbar")}),cx({view:this,icons:{left:$E,center:kw,right:Ew},toolbar:s,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:i,alignmentToolbar:s}}_createActionButtons(){const e=this.locale,t=this.t,i=new Se(e),s=new Se(e),r=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return i.set({label:t("Save"),icon:Lm,class:"ck-button-save",type:"submit",withText:!0}),i.bind("isEnabled").toMany(r,"errorText",(...o)=>o.every(a=>!a)),s.set({label:t("Cancel"),icon:Vm,class:"ck-button-cancel",withText:!0}),s.delegate("execute").to(this,"cancel"),{saveButtonView:i,cancelButtonView:s}}get _alignmentLabels(){const e=this.locale,t=this.t,i=t("Align table to the left"),s=t("Center table"),r=t("Align table to the right");return e.uiLanguageDirection==="rtl"?{right:r,center:s,left:i}:{left:i,center:s,right:r}}}function nb(n){return n!=="none"}const EIe=500,Q4={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class SIe extends z{_defaultContentTableProperties;_defaultLayoutTableProperties;_balloon;view=null;_viewWithContentTableDefaults=null;_viewWithLayoutTableDefaults=null;_undoStepBatch;_isReady;static get requires(){return[Rr]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("table.tableProperties",{borderColors:zw,backgroundColors:zw})}init(){const e=this.editor;this._defaultContentTableProperties=wS(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._defaultLayoutTableProperties=vy(),this._balloon=e.plugins.get(Rr),e.ui.componentFactory.add("tableProperties",()=>this._createTablePropertiesButton())}_createTablePropertiesButton(){const e=this.editor,t=e.t,i=new Se(e.locale);i.set({label:t("Table properties"),icon:uve,tooltip:!0}),this.listenTo(i,"execute",()=>this._showView());const s=Object.values(Q4).map(r=>e.commands.get(r));return i.bind("isEnabled").toMany(s,"isEnabled",(...r)=>r.some(o=>o)),i}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(e){const t=this.editor,i=t.config.get("table.tableProperties"),s=Iw(i.borderColors),r=Tw(t.locale,s),o=Iw(i.backgroundColors),a=Tw(t.locale,o),c=i.colorPicker!==!1,d=new kIe(t.locale,{borderColors:r,backgroundColors:a,defaultTableProperties:e,colorPickerConfig:c?i.colorPicker||{}:!1}),h=t.t;d.render(),this.listenTo(d,"submit",()=>{this._hideView()}),this.listenTo(d,"cancel",()=>{this._undoStepBatch.operations.length&&t.execute("undo",this._undoStepBatch),this._hideView()}),d.keystrokes.set("Esc",(w,A)=>{this._hideView(),A()}),_l({emitter:d,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const m=Vz(h),p=Lz(h);return d.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),d.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:d.borderColorInput,commandName:"tableBorderColor",errorText:m,validator:Fw})),d.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:d.borderWidthInput,commandName:"tableBorderWidth",errorText:p,validator:Fz})),d.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:d.backgroundInput,commandName:"tableBackgroundColor",errorText:m,validator:Fw})),d.on("change:width",this._getValidatedPropertyChangeCallback({viewField:d.widthInput,commandName:"tableWidth",errorText:p,validator:Th})),d.on("change:height",this._getValidatedPropertyChangeCallback({viewField:d.heightInput,commandName:"tableHeight",errorText:p,validator:Th})),d.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),d}_fillViewFormFromCommandValues(){const e=this.editor.commands,t=e.get("tableBorderStyle");Object.entries(Q4).map(([i,s])=>{const r=i,o=this.view===this._viewWithContentTableDefaults?this._defaultContentTableProperties[r]||"":this._defaultLayoutTableProperties[r]||"";return[r,e.get(s).value||o]}).forEach(([i,s])=>{(i==="borderColor"||i==="borderWidth")&&t.value==="none"||this.view.set(i,s)}),this._isReady=!0}_showView(){const e=this.editor,t=Lw(e.editing.view.document.selection),i=t&&e.editing.mapper.toModelElement(t),s=!i||i.getAttribute("tableType")!=="layout";s&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableProperties):!s&&!this._viewWithLayoutTableDefaults&&(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableProperties)),this.view=s?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:Hz(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,t=e.editing.view.document;Lw(t.selection)?this._isViewVisible&&Uz(e,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(t,i,s)=>{this._isReady&&this.editor.execute(e,{value:s,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:t,viewField:i,validator:s,errorText:r}=e,o=Ts(()=>{i.errorText=r},EIe);return(a,c,d)=>{o.cancel(),this._isReady&&(s(d)?(this.editor.execute(t,{value:d,batch:this._undoStepBatch}),i.errorText=null):o())}}}class TIe extends z{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[pIe,SIe]}}function IIe(n){n.document.registerPostFixer(e=>RIe(e,n))}function RIe(n,e){const t=e.document.differ.getChanges();let i=!1;for(const s of t){if(s.type!="insert")continue;const r=s.position.parent;if(r.is("element","table")||s.name=="table"){const o=s.name=="table"?s.position.nodeAfter:r,a=Array.from(o.getChildren()).filter(d=>d.is("element","caption")),c=a.shift();if(!c)continue;for(const d of a)n.move(n.createRangeIn(d),c,"end"),n.remove(d);c.nextSibling&&(n.move(n.createRangeOn(c),o,"end"),i=!0),i=!!a.length||i}}return i}function Z4(n){return!!n&&n.is("element","table")}function dx(n){for(const e of n.getChildren())if(e.is("element","caption"))return e;return null}function PIe(n){const e=ia(n);return e?dx(e):null}function OIe(n){const e=n.parent;return n.name=="figcaption"&&e&&e.is("element","figure")&&e.hasClass("table")?{name:!0}:n.name=="caption"&&e&&e.is("element","table")?{name:!0}:null}class DIe extends je{refresh(){const e=this.editor,t=ia(e.model.document.selection);this.isEnabled=!!t&&e.model.schema.checkChild(t,"caption"),this.isEnabled?this.value=!!dx(t):this.value=!1}execute({focusCaptionOnShow:e=!1}={}){this.editor.model.change(t=>{this.value?this._hideTableCaption(t):this._showTableCaption(t,e)})}_showTableCaption(e,t){const i=this.editor.model,s=ia(i.document.selection),a=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(s)||e.createElement("caption");i.insertContent(a,s,"end"),t&&e.setSelection(a,"in")}_hideTableCaption(e){const t=this.editor.model,i=ia(t.document.selection),s=this.editor.plugins.get("TableCaptionEditing"),r=dx(i);s._saveCaption(i,r),t.deleteContent(e.createSelection(r,"on"))}}class MIe extends z{_savedCaptionsMap=new WeakMap;static get pluginName(){return"TableCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.model.schema,i=e.editing.view,s=e.t,r=e.config.get("table.tableCaption.useCaptionElement");t.isRegistered("caption")?t.extend("caption",{allowIn:"table"}):t.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleTableCaption",new DIe(this.editor)),r&&e.plugins.get("TableEditing").registerAdditionalSlot({filter:a=>a.is("element","caption"),positionOffset:"end"}),e.conversion.for("upcast").elementToElement({view:OIe,model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>Z4(o.parent)?a.createContainerElement(r?"caption":"figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(o,{writer:a})=>{if(!Z4(o.parent))return null;const c=a.createEditableElement(r?"caption":"figcaption");return a.setCustomProperty("tableCaption",!0,c),c.placeholder=s("Enter table caption"),iy({view:i,element:c,keepOnFocus:!0}),nS(c,a)}}),IIe(e.model)}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?Vt.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}}class BIe extends z{static get pluginName(){return"TableCaptionUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view,i=e.t;e.ui.componentFactory.add("toggleTableCaption",s=>{const r=e.commands.get("toggleTableCaption"),o=new Se(s);return o.set({icon:E8,tooltip:!0,isToggleable:!0}),o.bind("isOn","isEnabled").to(r,"value","isEnabled"),o.bind("label").to(r,"value",a=>i(a?"Toggle caption off":"Toggle caption on")),this.listenTo(o,"execute",()=>{if(e.execute("toggleTableCaption",{focusCaptionOnShow:!0}),r.value){const a=PIe(e.model.document.selection),c=e.editing.mapper.toViewElement(a);if(!c)return;t.scrollToTheSelection(),t.change(d=>{d.addClass("table__caption_highlighted",c)})}e.editing.view.focus()}),o})}}class NIe extends z{static get pluginName(){return"TableCaption"}static get isOfficialPlugin(){return!0}static get requires(){return[MIe,BIe]}}function Kz(n){if(n.is("$text")||n.is("$textProxy"))return n.data;const e=n;let t="",i=null;for(const s of e.getChildren()){const r=Kz(s);i&&i.is("element")&&(t+=`
`),t+=r,i=s}return t}class VIe extends z{_config;_outputView;_wordsMatchRegExp;constructor(e){super(e),this.set("characters",0),this.set("words",0),Object.defineProperties(this,{characters:{get(){return this.characters=this._getCharacters(this._getText())}},words:{get(){return this.words=this._getWords(this._getText())}}}),this.set("_wordsLabel",void 0),this.set("_charactersLabel",void 0),this._config=e.config.get("wordCount")||{},this._outputView=void 0,this._wordsMatchRegExp=Pe.features.isRegExpUnicodePropertySupported?new RegExp("([\\p{L}\\p{N}]+\\S?)+","gu"):/([a-zA-Z0-9-]+\S?)+/gu}static get pluginName(){return"WordCount"}static get licenseFeatureCode(){return"WC"}static get isOfficialPlugin(){return!0}static get isPremiumPlugin(){return!0}init(){this.editor.model.document.on("change:data",hc(this._refreshStats.bind(this),250)),typeof this._config.onUpdate=="function"&&this.on("update",(t,i)=>{this._config.onUpdate(i)}),ca(this._config.container)&&this._config.container.appendChild(this.wordCountContainer)}destroy(){this._outputView&&(this._outputView.element.remove(),this._outputView.destroy()),super.destroy()}get wordCountContainer(){const e=this.editor,t=e.t,i=e.config.get("wordCount.displayWords"),s=e.config.get("wordCount.displayCharacters"),r=Vi.bind(this,this),o=[];return this._outputView||(this._outputView=new we,(i||i===void 0)&&(this.bind("_wordsLabel").to(this,"words",a=>t("Words: %0",a)),o.push({tag:"div",children:[{text:[r.to("_wordsLabel")]}],attributes:{class:"ck-word-count__words"}})),(s||s===void 0)&&(this.bind("_charactersLabel").to(this,"characters",a=>t("Characters: %0",a)),o.push({tag:"div",children:[{text:[r.to("_charactersLabel")]}],attributes:{class:"ck-word-count__characters"}})),this._outputView.setTemplate({tag:"div",attributes:{class:["ck","ck-word-count"]},children:o}),this._outputView.render()),this._outputView.element}_getText(){let e="";for(const t of this.editor.model.document.getRoots())e!==""&&(e+=`
`),e+=Kz(t);return e}_getCharacters(e){return e.replace(/\n/g,"").length}_getWords(e){return(e.match(this._wordsMatchRegExp)||[]).length}_refreshStats(){const e=this._getText(),t=this.words=this._getWords(e),i=this.characters=this._getCharacters(e);this.fire("update",{words:t,characters:i})}}const LIe="GPL";function qz({props:n}){const e=_.useRef(null),t=_.useRef(null),i=_.useRef(null),[s,r]=_.useState(!1);_.useEffect(()=>(r(!0),()=>r(!1)),[]);const o=_.useMemo(()=>s?{toolbar:{items:["sourceEditing","showBlocks","findAndReplace","textPartLanguage","|","heading","|","bold","italic","underline","|","specialCharacters","pageBreak","link","insertImage","mediaEmbed","insertTable","blockQuote","htmlEmbed","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[Q0e,xCe,Z0e,A0e,pAe,x0e,eAe,y_e,N_e,q_e,oCe,nCe,a1e,sCe,b1e,MCe,zCe,NCe,oxe,z7,bxe,Pxe,uS,Oxe,F7,Nxe,Lxe,iAe,xke,Pke,fEe,CEe,GEe,XEe,gy,QSe,eTe,hwe,tTe,cTe,gz,vz,uTe,wz,bz,pz,D2e,NIe,nIe,lIe,TIe,M2e,Hxe,j0e,l1e,MEe,oAe,VIe],balloonToolbar:["bold","italic","|","link","insertImage","|","bulletedList","numberedList"],blockToolbar:["bold","italic","|","link","insertImage","insertTable","|","bulletedList","numberedList","outdent","indent"],heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},htmlSupport:{allow:[{name:/^.*$/,styles:!0,attributes:!0,classes:!0}]},image:{toolbar:["toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"]},initialData:n?.initialData||"",licenseKey:LIe,link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},placeholder:"Type or paste your content here!",table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties"]}}:null,[s,n?.initialData]);return v.jsx("div",{className:"main-container",children:v.jsxs("div",{className:"editor-container editor-container_classic-editor editor-container_include-block-toolbar editor-container_include-word-count",ref:e,children:[v.jsx("div",{className:"editor-container__editor",children:v.jsx("div",{ref:t,children:o&&v.jsx(zF,{editor:C_e,config:o,onChange:n.onChange,onReady:a=>{const c=a.plugins.get("WordCount");i.current&&i.current.appendChild(c.wordCountContainer)},onAfterDestroy:()=>{i.current&&Array.from(i.current.children).forEach(a=>a.remove())}})})}),v.jsx("div",{className:"editor_container__word-count",ref:i})]})})}const FIe=bl({category:pn().min(1,"Please select a category."),title:pn().min(3,"Title must be at least 3 characters long."),slug:pn().min(3,"Slug must be at least 3 characters long."),blogContent:pn().min(3,"Blog content must be at least 3 characters long.")}),zIe=()=>{const n=ma(),e=dl(p=>p.user),[t,i]=_.useState(),[s,r]=_.useState(),{data:o}=vi(`${Et("VITE_API_BASE_URL")}/category/all-category`,{method:"get",credentials:"include"}),a=hl({resolver:wl(FIe),defaultValues:{category:"",title:"",slug:"",blogContent:""}}),c=(p,w)=>{const A=w.getData();a.setValue("blogContent",A)},d=a.watch("title");_.useEffect(()=>{if(d){const p=Vv(d,{lower:!0,strict:!0});a.setValue("slug",p)}},[d,a]);async function h(p){if(!s)return bt("error","Featured image is required.");try{const w={...p,author:Number(e.user?.id||e.user?.id)},A=new FormData;A.append("file",s),A.append("data",JSON.stringify(w));const C=await fetch(`${Et("VITE_API_BASE_URL")}/blog/add`,{method:"POST",credentials:"include",body:A}),k=await C.json();if(!C.ok)return bt("error",k.message||"Failed to add blog");a.reset(),r(void 0),i(void 0),bt("success",k.message),n(dv)}catch(w){bt("error",w.message||"An unexpected error occurred.")}}const m=p=>{const w=p[0];if(w){const A=URL.createObjectURL(w);r(w),i(A)}};return v.jsx("div",{className:"container mx-auto max-w-4xl py-6",children:v.jsx(Xs,{className:"shadow-lg",children:v.jsxs(lo,{className:"pt-6",children:[v.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Create New Blog"}),v.jsx(ml,{...a,children:v.jsxs("form",{onSubmit:a.handleSubmit(h),className:"space-y-6",children:[v.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[v.jsx(dn,{control:a.control,name:"category",render:({field:p})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Category"}),v.jsxs(IF,{onValueChange:p.onChange,defaultValue:p.value,children:[v.jsx(mn,{children:v.jsx(PF,{children:v.jsx(RF,{placeholder:"Select a category"})})}),v.jsx(OF,{children:o?.category.map(w=>v.jsx(DF,{value:w.id?.toString()||"",children:w.name},w.id))})]}),v.jsx(gn,{})]})}),v.jsx(dn,{control:a.control,name:"title",render:({field:p})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Blog Title"}),v.jsx(mn,{children:v.jsx(oi,{placeholder:"Enter catchy title",...p})}),v.jsx(gn,{})]})})]}),v.jsx(dn,{control:a.control,name:"slug",render:({field:p})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"URL Slug"}),v.jsx(mn,{children:v.jsx(oi,{placeholder:"auto-generated-slug",...p,readOnly:!0,className:"bg-muted"})}),v.jsx(gn,{})]})}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("span",{className:"text-sm font-medium",children:"Featured Image"}),v.jsx(zd,{onDrop:m,multiple:!1,accept:{"image/*":[]},children:({getRootProps:p,getInputProps:w})=>v.jsxs("div",{...p(),className:"cursor-pointer group",children:[v.jsx("input",{...w()}),v.jsx("div",{className:"flex flex-col justify-center items-center w-full h-48 border-2 border-dashed rounded-lg bg-gray-50 group-hover:bg-gray-100 transition-colors border-muted-foreground/25",children:t?v.jsx("img",{src:t,alt:"Preview",className:"h-full w-full object-contain p-2"}):v.jsx("p",{className:"text-muted-foreground text-sm",children:"Drag & drop or click to upload"})})]})})]}),v.jsx(dn,{control:a.control,name:"blogContent",render:()=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Content"}),v.jsx(mn,{children:v.jsx("div",{className:"min-h-[400px] border rounded-md overflow-hidden",children:v.jsx(qz,{props:{initialData:"",onChange:c}})})}),v.jsx(gn,{})]})}),v.jsx(ai,{type:"submit",className:"w-full h-12 text-lg",children:"Publish Blog"})]})})]})})})},jIe=()=>{const[n,e]=_.useState(!1),{data:t,loading:i}=vi(`${Et("VITE_API_BASE_URL")}/blog/get-all`,{method:"get",credentials:"include"},[n]),s=async r=>{if(window.confirm("Are you sure you want to delete this blog?"))try{await jv(`${Et("VITE_API_BASE_URL")}/blog/delete/${r}`)?(e(a=>!a),bt("success","Data deleted.")):bt("error","Data not deleted.")}catch(o){bt("error",o.message||"An error occurred during deletion.")}};return i?v.jsx(fo,{}):v.jsx("div",{className:"p-4",children:v.jsxs(Xs,{className:"shadow-sm",children:[v.jsxs(pV,{className:"flex flex-row items-center justify-between space-y-0 pb-5",children:[v.jsx("h2",{className:"text-xl font-bold",children:"Manage Blogs"}),v.jsx(ai,{asChild:!0,children:v.jsx(_n,{to:rk,children:"Add Blog"})})]}),v.jsx(lo,{children:v.jsxs(Lv,{children:[v.jsx(Fv,{children:v.jsxs(qs,{children:[v.jsx(zn,{className:"w-[80px]",children:"Image"})," ",v.jsx(zn,{children:"Author"}),v.jsx(zn,{children:"Category"}),v.jsx(zn,{children:"Title"}),v.jsx(zn,{children:"Slug"}),v.jsx(zn,{children:"Dated"}),v.jsx(zn,{className:"text-right",children:"Action"})]})}),v.jsx(zv,{children:t&&t.blog.length>0?t.blog.map(r=>v.jsxs(qs,{className:"hover:bg-muted/50",children:[v.jsx(nn,{children:r.featured_image?v.jsx("img",{src:r.featured_image,alt:r.title,className:"w-12 h-12 object-cover rounded-md border bg-muted"}):v.jsx("div",{className:"w-12 h-12 bg-muted rounded-md flex items-center justify-center text-[10px] text-muted-foreground",children:"No Img"})}),v.jsx(nn,{className:"font-medium",children:r?.author?.name}),v.jsx(nn,{children:r?.category?.name}),v.jsx(nn,{className:"max-w-[200px] truncate",children:r?.title}),v.jsx(nn,{className:"italic text-muted-foreground text-xs",children:r?.slug}),v.jsx(nn,{children:ye(r?.createdAt).format("DD-MM-YYYY")}),v.jsx(nn,{className:"text-right",children:v.jsxs("div",{className:"flex justify-end gap-2",children:[v.jsx(ai,{variant:"outline",size:"icon",className:"hover:bg-violet-600 hover:text-white",asChild:!0,children:v.jsx(_n,{to:wN(r.id),children:v.jsx(nF,{className:"h-4 w-4"})})}),v.jsx(ai,{onClick:()=>s(r.id),variant:"outline",size:"icon",className:"hover:bg-red-600 hover:text-white",children:v.jsx(gv,{className:"h-4 w-4"})})]})})]},r.id)):v.jsx(qs,{children:v.jsxs(nn,{colSpan:7,className:"h-24 text-center",children:[" ","No blogs found."]})})})]})})]})})};var _1;const UIe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),HIe=(_1=String.fromCodePoint)!==null&&_1!==void 0?_1:(n=>{let e="";return n>65535&&(n-=65536,e+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023),e+=String.fromCharCode(n),e});function WIe(n){var e;return n>=55296&&n<=57343||n>1114111?65533:(e=UIe.get(n))!==null&&e!==void 0?e:n}function Qz(n){const e=typeof atob=="function"?atob(n):typeof Buffer.from=="function"?Buffer.from(n,"base64").toString("binary"):new Buffer(n,"base64").toString("binary"),t=e.length&-2,i=new Uint16Array(t/2);for(let s=0,r=0;s<t;s+=2){const o=e.charCodeAt(s),a=e.charCodeAt(s+1);i[r++]=o|a<<8}return i}const $Ie=Qz("QR08ALkAAgH6AYsDNQR2BO0EPgXZBQEGLAbdBxMISQrvCmQLfQurDKQNLw4fD4YPpA+6D/IPAAAAAAAAAAAAAAAAKhBMEY8TmxUWF2EYLBkxGuAa3RsJHDscWR8YIC8jSCSIJcMl6ie3Ku8rEC0CLjoupS7kLgAIRU1hYmNmZ2xtbm9wcnN0dVQAWgBeAGUAaQBzAHcAfgCBAIQAhwCSAJoAoACsALMAbABpAGcAO4DGAMZAUAA7gCYAJkBjAHUAdABlADuAwQDBQHIiZXZlAAJhAAFpeW0AcgByAGMAO4DCAMJAEGRyAADgNdgE3XIAYQB2AGUAO4DAAMBA8CFoYZFj4SFjcgBhZAAAoFMqAAFncIsAjgBvAG4ABGFmAADgNdg43fAlbHlGdW5jdGlvbgCgYSBpAG4AZwA7gMUAxUAAAWNzpACoAHIAAOA12Jzc6SFnbgCgVCJpAGwAZABlADuAwwDDQG0AbAA7gMQAxEAABGFjZWZvcnN1xQDYANoA7QDxAPYA+QD8AAABY3LJAM8AayNzbGFzaAAAoBYidgHTANUAAKDnKmUAZAAAoAYjeQARZIABY3J0AOAA5QDrAGEidXNlAACgNSLuI291bGxpcwCgLCFhAJJjcgAA4DXYBd1wAGYAAOA12Dnd5SF2ZdhiYwDyAOoAbSJwZXEAAKBOIgAHSE9hY2RlZmhpbG9yc3UXARoBHwE6AVIBVQFiAWQBZgGCAakB6QHtAfIBYwB5ACdkUABZADuAqQCpQIABY3B5ACUBKAE1AfUhdGUGYWmg0iJ0KGFsRGlmZmVyZW50aWFsRAAAoEUhbCJleXMAAKAtIQACYWVpb0EBRAFKAU0B8iFvbgxhZABpAGwAO4DHAMdAcgBjAAhhbiJpbnQAAKAwIm8AdAAKYQABZG5ZAV0BaSJsbGEAuGB0I2VyRG90ALdg8gA5AWkAp2NyImNsZQAAAkRNUFRwAXQBeQF9AW8AdAAAoJkiaSJudXMAAKCWIuwhdXMAoJUiaSJtZXMAAKCXIm8AAAFjc4cBlAFrKndpc2VDb250b3VySW50ZWdyYWwAAKAyImUjQ3VybHkAAAFEUZwBpAFvJXVibGVRdW90ZQAAoB0gdSJvdGUAAKAZIAACbG5wdbABtgHNAdgBbwBuAGWgNyIAoHQqgAFnaXQAvAHBAcUB8iJ1ZW50AKBhIm4AdAAAoC8i7yV1ckludGVncmFsAKAuIgABZnLRAdMBAKACIe8iZHVjdACgECJuLnRlckNsb2Nrd2lzZUNvbnRvdXJJbnRlZ3JhbAAAoDMi7yFzcwCgLypjAHIAAOA12J7ccABDoNMiYQBwAACgTSKABURKU1phY2VmaW9zAAsCEgIVAhgCGwIsAjQCOQI9AnMCfwNvoEUh9CJyYWhkAKARKWMAeQACZGMAeQAFZGMAeQAPZIABZ3JzACECJQIoAuchZXIAoCEgcgAAoKEhaAB2AACg5CoAAWF5MAIzAvIhb24OYRRkbAB0oAciYQCUY3IAAOA12AfdAAFhZkECawIAAWNtRQJnAvIjaXRpY2FsAAJBREdUUAJUAl8CYwJjInV0ZQC0YG8AdAFZAloC2WJiJGxlQWN1dGUA3WJyImF2ZQBgYGkibGRlANxi7yFuZACgxCJmJWVyZW50aWFsRAAAoEYhcAR9AgAAAAAAAIECjgIAABoDZgAA4DXYO91EoagAhQKJAm8AdAAAoNwgcSJ1YWwAAKBQIuIhbGUAA0NETFJVVpkCqAK1Au8C/wIRA28AbgB0AG8AdQByAEkAbgB0AGUAZwByAGEA7ADEAW8AdAKvAgAAAACwAqhgbiNBcnJvdwAAoNMhAAFlb7kC0AJmAHQAgAFBUlQAwQLGAs0CciJyb3cAAKDQIekkZ2h0QXJyb3cAoNQhZQDlACsCbgBnAAABTFLWAugC5SFmdAABQVLcAuECciJyb3cAAKD4J+kkZ2h0QXJyb3cAoPon6SRnaHRBcnJvdwCg+SdpImdodAAAAUFU9gL7AnIicm93AACg0iFlAGUAAKCoInAAQQIGAwAAAAALA3Iicm93AACg0SFvJHduQXJyb3cAAKDVIWUlcnRpY2FsQmFyAACgJSJuAAADQUJMUlRhJAM2AzoDWgNxA3oDciJyb3cAAKGTIUJVLAMwA2EAcgAAoBMpcCNBcnJvdwAAoPUhciJldmUAEWPlIWZ00gJDAwAASwMAAFIDaSVnaHRWZWN0b3IAAKBQKWUkZVZlY3RvcgAAoF4p5SJjdG9yQqC9IWEAcgAAoFYpaSJnaHQA1AFiAwAAaQNlJGVWZWN0b3IAAKBfKeUiY3RvckKgwSFhAHIAAKBXKWUAZQBBoKQiciJyb3cAAKCnIXIAcgBvAPcAtAIAAWN0gwOHA3IAAOA12J/c8iFvaxBhAAhOVGFjZGZnbG1vcHFzdHV4owOlA6kDsAO/A8IDxgPNA9ID8gP9AwEEFAQeBCAEJQRHAEphSAA7gNAA0EBjAHUAdABlADuAyQDJQIABYWl5ALYDuQO+A/Ihb24aYXIAYwA7gMoAykAtZG8AdAAWYXIAAOA12AjdcgBhAHYAZQA7gMgAyEDlIm1lbnQAoAgiAAFhcNYD2QNjAHIAEmF0AHkAUwLhAwAAAADpA20lYWxsU3F1YXJlAACg+yVlJ3J5U21hbGxTcXVhcmUAAKCrJQABZ3D2A/kDbwBuABhhZgAA4DXYPN3zImlsb26VY3UAAAFhaQYEDgRsAFSgdSppImxkZQAAoEIi7CNpYnJpdW0AoMwhAAFjaRgEGwRyAACgMCFtAACgcyphAJdjbQBsADuAywDLQAABaXApBC0E8yF0cwCgAyLvJG5lbnRpYWxFAKBHIYACY2Zpb3MAPQQ/BEMEXQRyBHkAJGRyAADgNdgJ3WwibGVkAFMCTAQAAAAAVARtJWFsbFNxdWFyZQAAoPwlZSdyeVNtYWxsU3F1YXJlAACgqiVwA2UEAABpBAAAAABtBGYAAOA12D3dwSFsbACgACLyI2llcnRyZgCgMSFjAPIAcQQABkpUYWJjZGZnb3JzdIgEiwSOBJMElwSkBKcEqwStBLIE5QTqBGMAeQADZDuAPgA+QO0hbWFkoJMD3GNyImV2ZQAeYYABZWl5AJ0EoASjBOQhaWwiYXIAYwAcYRNkbwB0ACBhcgAA4DXYCt0AoNkicABmAADgNdg+3eUiYXRlcgADRUZHTFNUvwTIBM8E1QTZBOAEcSJ1YWwATKBlIuUhc3MAoNsidSRsbEVxdWFsAACgZyJyI2VhdGVyAACgoirlIXNzAKB3IuwkYW50RXF1YWwAoH4qaSJsZGUAAKBzImMAcgAA4DXYotwAoGsiAARBYWNmaW9zdfkE/QQFBQgFCwUTBSIFKwVSIkRjeQAqZAABY3QBBQQFZQBrAMdiXmDpIXJjJGFyAACgDCFsJWJlcnRTcGFjZQAAoAsh8AEYBQAAGwVmAACgDSHpJXpvbnRhbExpbmUAoAAlAAFjdCYFKAXyABIF8iFvayZhbQBwAEQBMQU5BW8AdwBuAEgAdQBtAPAAAAFxInVhbAAAoE8iAAdFSk9hY2RmZ21ub3N0dVMFVgVZBVwFYwVtBXAFcwV6BZAFtgXFBckFzQVjAHkAFWTsIWlnMmFjAHkAAWRjAHUAdABlADuAzQDNQAABaXlnBWwFcgBjADuAzgDOQBhkbwB0ADBhcgAAoBEhcgBhAHYAZQA7gMwAzEAAoREhYXB/BYsFAAFjZ4MFhQVyACphaSNuYXJ5SQAAoEghbABpAGUA8wD6AvQBlQUAAKUFZaAsIgABZ3KaBZ4F8iFhbACgKyLzI2VjdGlvbgCgwiJpI3NpYmxlAAABQ1SsBbEFbyJtbWEAAKBjIGkibWVzAACgYiCAAWdwdAC8Bb8FwwVvAG4ALmFmAADgNdhA3WEAmWNjAHIAAKAQIWkibGRlAChh6wHSBQAA1QVjAHkABmRsADuAzwDPQIACY2Zvc3UA4QXpBe0F8gX9BQABaXnlBegFcgBjADRhGWRyAADgNdgN3XAAZgAA4DXYQd3jAfcFAAD7BXIAAOA12KXc8iFjeQhk6yFjeQRkgANISmFjZm9zAAwGDwYSBhUGHQYhBiYGYwB5ACVkYwB5AAxk8CFwYZpjAAFleRkGHAbkIWlsNmEaZHIAAOA12A7dcABmAADgNdhC3WMAcgAA4DXYptyABUpUYWNlZmxtb3N0AD0GQAZDBl4GawZkB2gHcAd0B80H2gdjAHkACWQ7gDwAPECAAmNtbnByAEwGTwZSBlUGWwb1IXRlOWHiIWRhm2NnAACg6ifsI2FjZXRyZgCgEiFyAACgniGAAWFleQBkBmcGagbyIW9uPWHkIWlsO2EbZAABZnNvBjQHdAAABUFDREZSVFVWYXKABp4GpAbGBssG3AYDByEHwQIqBwABbnKEBowGZyVsZUJyYWNrZXQAAKDoJ/Ihb3cAoZAhQlKTBpcGYQByAACg5CHpJGdodEFycm93AKDGIWUjaWxpbmcAAKAII28A9QGqBgAAsgZiJWxlQnJhY2tldAAAoOYnbgDUAbcGAAC+BmUkZVZlY3RvcgAAoGEp5SJjdG9yQqDDIWEAcgAAoFkpbCJvb3IAAKAKI2kiZ2h0AAABQVbSBtcGciJyb3cAAKCUIeUiY3RvcgCgTikAAWVy4AbwBmUAAKGjIkFW5gbrBnIicm93AACgpCHlImN0b3IAoFopaSNhbmdsZQBCorIi+wYAAAAA/wZhAHIAAKDPKXEidWFsAACgtCJwAIABRFRWAAoHEQcYB+8kd25WZWN0b3IAoFEpZSRlVmVjdG9yAACgYCnlImN0b3JCoL8hYQByAACgWCnlImN0b3JCoLwhYQByAACgUilpAGcAaAB0AGEAcgByAG8A9wDMAnMAAANFRkdMU1Q/B0cHTgdUB1gHXwfxJXVhbEdyZWF0ZXIAoNoidSRsbEVxdWFsAACgZiJyI2VhdGVyAACgdiLlIXNzAKChKuwkYW50RXF1YWwAoH0qaSJsZGUAAKByInIAAOA12A/dZaDYIuYjdGFycm93AKDaIWkiZG90AD9hgAFucHcAege1B7kHZwAAAkxSbHKCB5QHmwerB+UhZnQAAUFSiAeNB3Iicm93AACg9SfpJGdodEFycm93AKD3J+kkZ2h0QXJyb3cAoPYn5SFmdAABYXLcAqEHaQBnAGgAdABhAHIAcgBvAPcA5wJpAGcAaAB0AGEAcgByAG8A9wDuAmYAAOA12EPdZQByAAABTFK/B8YHZSRmdEFycm93AACgmSHpJGdodEFycm93AKCYIYABY2h0ANMH1QfXB/IAWgYAoLAh8iFva0FhAKBqIgAEYWNlZmlvc3XpB+wH7gf/BwMICQgOCBEIcAAAoAUpeQAcZAABZGzyB/kHaSR1bVNwYWNlAACgXyBsI2ludHJmAACgMyFyAADgNdgQ3e4jdXNQbHVzAKATInAAZgAA4DXYRN1jAPIA/gecY4AESmFjZWZvc3R1ACEIJAgoCDUIgQiFCDsKQApHCmMAeQAKZGMidXRlAENhgAFhZXkALggxCDQI8iFvbkdh5CFpbEVhHWSAAWdzdwA7CGEIfQjhInRpdmWAAU1UVgBECEwIWQhlJWRpdW1TcGFjZQAAoAsgaABpAAABY25SCFMIawBTAHAAYQBjAOUASwhlAHIAeQBUAGgAaQDuAFQI9CFlZAABR0xnCHUIcgBlAGEAdABlAHIARwByAGUAYQB0AGUA8gDrBGUAcwBzAEwAZQBzAPMA2wdMImluZQAKYHIAAOA12BHdAAJCbnB0jAiRCJkInAhyImVhawAAoGAgwiZyZWFraW5nU3BhY2WgYGYAAKAVIUOq7CqzCMIIzQgAAOcIGwkAAAAAAAAtCQAAbwkAAIcJAACdCcAJGQoAADQKAAFvdbYIvAjuI2dydWVudACgYiJwIkNhcAAAoG0ibyh1YmxlVmVydGljYWxCYXIAAKAmIoABbHF4ANII1wjhCOUibWVudACgCSL1IWFsVKBgImkibGRlAADgQiI4A2kic3RzAACgBCJyI2VhdGVyAACjbyJFRkdMU1T1CPoIAgkJCQ0JFQlxInVhbAAAoHEidSRsbEVxdWFsAADgZyI4A3IjZWF0ZXIAAOBrIjgD5SFzcwCgeSLsJGFudEVxdWFsAOB+KjgDaSJsZGUAAKB1IvUhbXBEASAJJwnvI3duSHVtcADgTiI4A3EidWFsAADgTyI4A2UAAAFmczEJRgn0JFRyaWFuZ2xlQqLqIj0JAAAAAEIJYQByAADgzyk4A3EidWFsAACg7CJzAICibiJFR0xTVABRCVYJXAlhCWkJcSJ1YWwAAKBwInIjZWF0ZXIAAKB4IuUhc3MA4GoiOAPsJGFudEVxdWFsAOB9KjgDaSJsZGUAAKB0IuUic3RlZAABR0x1CX8J8iZlYXRlckdyZWF0ZXIA4KIqOAPlI3NzTGVzcwDgoSo4A/IjZWNlZGVzAKGAIkVTjwmVCXEidWFsAADgryo4A+wkYW50RXF1YWwAoOAiAAFlaaAJqQl2JmVyc2VFbGVtZW50AACgDCLnJWh0VHJpYW5nbGVCousitgkAAAAAuwlhAHIAAODQKTgDcSJ1YWwAAKDtIgABcXXDCeAJdSNhcmVTdQAAAWJwywnVCfMhZXRF4I8iOANxInVhbAAAoOIi5SJyc2V0ReCQIjgDcSJ1YWwAAKDjIoABYmNwAOYJ8AkNCvMhZXRF4IIi0iBxInVhbAAAoIgi4yJlZWRzgKGBIkVTVAD6CQAKBwpxInVhbAAA4LAqOAPsJGFudEVxdWFsAKDhImkibGRlAADgfyI4A+UicnNldEXggyLSIHEidWFsAACgiSJpImxkZQCAoUEiRUZUACIKJwouCnEidWFsAACgRCJ1JGxsRXF1YWwAAKBHImkibGRlAACgSSJlJXJ0aWNhbEJhcgAAoCQiYwByAADgNdip3GkAbABkAGUAO4DRANFAnWMAB0VhY2RmZ21vcHJzdHV2XgphCmgKcgp2CnoKgQqRCpYKqwqtCrsKyArNCuwhaWdSYWMAdQB0AGUAO4DTANNAAAFpeWwKcQpyAGMAO4DUANRAHmRiImxhYwBQYXIAAOA12BLdcgBhAHYAZQA7gNIA0kCAAWFlaQCHCooKjQpjAHIATGFnAGEAqWNjInJvbgCfY3AAZgAA4DXYRt3lI25DdXJseQABRFGeCqYKbyV1YmxlUXVvdGUAAKAcIHUib3RlAACgGCAAoFQqAAFjbLEKtQpyAADgNdiq3GEAcwBoADuA2ADYQGkAbAHACsUKZABlADuA1QDVQGUAcwAAoDcqbQBsADuA1gDWQGUAcgAAAUJQ0wrmCgABYXLXCtoKcgAAoD4gYQBjAAABZWvgCuIKAKDeI2UAdAAAoLQjYSVyZW50aGVzaXMAAKDcI4AEYWNmaGlsb3JzAP0KAwsFCwkLCwsMCxELIwtaC3IjdGlhbEQAAKACInkAH2RyAADgNdgT3WkApmOgY/Ujc01pbnVzsWAAAWlwFQsgC24AYwBhAHIAZQBwAGwAYQBuAOUACgVmAACgGSGAobsqZWlvACoLRQtJC+MiZWRlc4CheiJFU1QANAs5C0ALcSJ1YWwAAKCvKuwkYW50RXF1YWwAoHwiaSJsZGUAAKB+Im0AZQAAoDMgAAFkcE0LUQv1IWN0AKAPIm8jcnRpb24AYaA3ImwAAKAdIgABY2leC2ILcgAA4DXYq9yoYwACVWZvc2oLbwtzC3cLTwBUADuAIgAiQHIAAOA12BTdcABmAACgGiFjAHIAAOA12KzcAAZCRWFjZWZoaW9yc3WPC5MLlwupC7YL2AvbC90LhQyTDJoMowzhIXJyAKAQKUcAO4CuAK5AgAFjbnIAnQugC6ML9SF0ZVRhZwAAoOsncgB0oKAhbAAAoBYpgAFhZXkArwuyC7UL8iFvblhh5CFpbFZhIGR2oBwhZSJyc2UAAAFFVb8LzwsAAWxxwwvIC+UibWVudACgCyL1JGlsaWJyaXVtAKDLIXAmRXF1aWxpYnJpdW0AAKBvKXIAAKAcIW8AoWPnIWh0AARBQ0RGVFVWYewLCgwQDDIMNwxeDHwM9gIAAW5y8Av4C2clbGVCcmFja2V0AACg6SfyIW93AKGSIUJM/wsDDGEAcgAAoOUhZSRmdEFycm93AACgxCFlI2lsaW5nAACgCSNvAPUBFgwAAB4MYiVsZUJyYWNrZXQAAKDnJ24A1AEjDAAAKgxlJGVWZWN0b3IAAKBdKeUiY3RvckKgwiFhAHIAAKBVKWwib29yAACgCyMAAWVyOwxLDGUAAKGiIkFWQQxGDHIicm93AACgpiHlImN0b3IAoFspaSNhbmdsZQBCorMiVgwAAAAAWgxhAHIAAKDQKXEidWFsAACgtSJwAIABRFRWAGUMbAxzDO8kd25WZWN0b3IAoE8pZSRlVmVjdG9yAACgXCnlImN0b3JCoL4hYQByAACgVCnlImN0b3JCoMAhYQByAACgUykAAXB1iQyMDGYAAKAdIe4kZEltcGxpZXMAoHAp6SRnaHRhcnJvdwCg2yEAAWNongyhDHIAAKAbIQCgsSHsJGVEZWxheWVkAKD0KYAGSE9hY2ZoaW1vcXN0dQC/DMgMzAzQDOIM5gwKDQ0NFA0ZDU8NVA1YDQABQ2PDDMYMyCFjeSlkeQAoZEYiVGN5ACxkYyJ1dGUAWmEAorwqYWVpedgM2wzeDOEM8iFvbmBh5CFpbF5hcgBjAFxhIWRyAADgNdgW3e8hcnQAAkRMUlXvDPYM/QwEDW8kd25BcnJvdwAAoJMhZSRmdEFycm93AACgkCHpJGdodEFycm93AKCSIXAjQXJyb3cAAKCRIechbWGjY+EkbGxDaXJjbGUAoBgicABmAADgNdhK3XICHw0AAAAAIg10AACgGiLhIXJlgKGhJUlTVQAqDTINSg3uJXRlcnNlY3Rpb24AoJMidQAAAWJwNw1ADfMhZXRFoI8icSJ1YWwAAKCRIuUicnNldEWgkCJxInVhbAAAoJIibiJpb24AAKCUImMAcgAA4DXYrtxhAHIAAKDGIgACYmNtcF8Nag2ODZANc6DQImUAdABFoNAicSJ1YWwAAKCGIgABY2huDYkNZSJlZHMAgKF7IkVTVAB4DX0NhA1xInVhbAAAoLAq7CRhbnRFcXVhbACgfSJpImxkZQAAoH8iVABoAGEA9ADHCwCgESIAodEiZXOVDZ8NciJzZXQARaCDInEidWFsAACghyJlAHQAAKDRIoAFSFJTYWNmaGlvcnMAtQ27Db8NyA3ODdsN3w3+DRgOHQ4jDk8AUgBOADuA3gDeQMEhREUAoCIhAAFIY8MNxg1jAHkAC2R5ACZkAAFidcwNzQ0JYKRjgAFhZXkA1A3XDdoN8iFvbmRh5CFpbGJhImRyAADgNdgX3QABZWnjDe4N8gHoDQAA7Q3lImZvcmUAoDQiYQCYYwABY27yDfkNayNTcGFjZQAA4F8gCiDTInBhY2UAoAkg7CFkZYChPCJFRlQABw4MDhMOcSJ1YWwAAKBDInUkbGxFcXVhbAAAoEUiaSJsZGUAAKBIInAAZgAA4DXYS93pI3BsZURvdACg2yAAAWN0Jw4rDnIAAOA12K/c8iFva2Zh4QpFDlYOYA5qDgAAbg5yDgAAAAAAAAAAAAB5DnwOqA6zDgAADg8RDxYPGg8AAWNySA5ODnUAdABlADuA2gDaQHIAb6CfIeMhaXIAoEkpcgDjAVsOAABdDnkADmR2AGUAbGEAAWl5Yw5oDnIAYwA7gNsA20AjZGIibGFjAHBhcgAA4DXYGN1yAGEAdgBlADuA2QDZQOEhY3JqYQABZGl/Dp8OZQByAAABQlCFDpcOAAFhcokOiw5yAF9gYQBjAAABZWuRDpMOAKDfI2UAdAAAoLUjYSVyZW50aGVzaXMAAKDdI28AbgBQoMMi7CF1cwCgjiIAAWdwqw6uDm8AbgByYWYAAOA12EzdAARBREVUYWRwc78O0g7ZDuEOBQPqDvMOBw9yInJvdwDCoZEhyA4AAMwOYQByAACgEilvJHduQXJyb3cAAKDFIW8kd25BcnJvdwAAoJUhcSV1aWxpYnJpdW0AAKBuKWUAZQBBoKUiciJyb3cAAKClIW8AdwBuAGEAcgByAG8A9wAQA2UAcgAAAUxS+Q4AD2UkZnRBcnJvdwAAoJYh6SRnaHRBcnJvdwCglyFpAGyg0gNvAG4ApWPpIW5nbmFjAHIAAOA12LDcaSJsZGUAaGFtAGwAO4DcANxAgAREYmNkZWZvc3YALQ8xDzUPNw89D3IPdg97D4AP4SFzaACgqyJhAHIAAKDrKnkAEmThIXNobKCpIgCg5ioAAWVyQQ9DDwCgwSKAAWJ0eQBJD00Paw9hAHIAAKAWIGmgFiDjIWFsAAJCTFNUWA9cD18PZg9hAHIAAKAjIukhbmV8YGUkcGFyYXRvcgAAoFgnaSJsZGUAAKBAItQkaGluU3BhY2UAoAogcgAA4DXYGd1wAGYAAOA12E3dYwByAADgNdix3GQiYXNoAACgqiKAAmNlZm9zAI4PkQ+VD5kPng/pIXJjdGHkIWdlAKDAInIAAOA12BrdcABmAADgNdhO3WMAcgAA4DXYstwAAmZpb3OqD64Prw+0D3IAAOA12BvdnmNwAGYAAOA12E/dYwByAADgNdiz3IAEQUlVYWNmb3N1AMgPyw/OD9EP2A/gD+QP6Q/uD2MAeQAvZGMAeQAHZGMAeQAuZGMAdQB0AGUAO4DdAN1AAAFpedwP3w9yAGMAdmErZHIAAOA12BzdcABmAADgNdhQ3WMAcgAA4DXYtNxtAGwAeGEABEhhY2RlZm9z/g8BEAUQDRAQEB0QIBAkEGMAeQAWZGMidXRlAHlhAAFheQkQDBDyIW9ufWEXZG8AdAB7YfIBFRAAABwQbwBXAGkAZAB0AOgAVAhhAJZjcgAAoCghcABmAACgJCFjAHIAAOA12LXc4QtCEEkQTRAAAGcQbRByEAAAAAAAAAAAeRCKEJcQ8hD9EAAAGxEhETIROREAAD4RYwB1AHQAZQA7gOEA4UByImV2ZQADYYCiPiJFZGl1eQBWEFkQWxBgEGUQAOA+IjMDAKA/InIAYwA7gOIA4kB0AGUAO4C0ALRAMGRsAGkAZwA7gOYA5kByoGEgAOA12B7dcgBhAHYAZQA7gOAA4EAAAWVwfBCGEAABZnCAEIQQ8yF5bQCgNSHoAIMQaABhALFjAAFhcI0QWwAAAWNskRCTEHIAAWFnAACgPypkApwQAAAAALEQAKInImFkc3ajEKcQqRCuEG4AZAAAoFUqAKBcKmwib3BlAACgWCoAoFoqAKMgImVsbXJzersQvRDAEN0Q5RDtEACgpCllAACgICJzAGQAYaAhImEEzhDQENIQ1BDWENgQ2hDcEACgqCkAoKkpAKCqKQCgqykAoKwpAKCtKQCgrikAoK8pdAB2oB8iYgBkoL4iAKCdKQABcHTpEOwQaAAAoCIixWDhIXJyAKB8IwABZ3D1EPgQbwBuAAVhZgAA4DXYUt0Ao0giRWFlaW9wBxEJEQ0RDxESERQRAKBwKuMhaXIAoG8qAKBKImQAAKBLInMAJ2DyIW94ZaBIIvEADhFpAG4AZwA7gOUA5UCAAWN0eQAmESoRKxFyAADgNdi23CpgbQBwAGWgSCLxAPgBaQBsAGQAZQA7gOMA40BtAGwAO4DkAORAAAFjaUERRxFvAG4AaQBuAPQA6AFuAHQAAKARKgAITmFiY2RlZmlrbG5vcHJzdWQRaBGXEZ8RpxGrEdIR1hErEjASexKKEn0RThNbE3oTbwB0AACg7SoAAWNybBGJEWsAAAJjZXBzdBF4EX0RghHvIW5nAKBMInAjc2lsb24A9mNyImltZQAAoDUgaQBtAGWgPSJxAACgzSJ2AY0RkRFlAGUAAKC9ImUAZABnoAUjZQAAoAUjcgBrAHSgtSPiIXJrAKC2IwABb3mjEaYRbgDnAHcRMWTxIXVvAKAeIIACY21wcnQAtBG5Eb4RwRHFEeEhdXPloDUi5ABwInR5dgAAoLApcwDpAH0RbgBvAPUA6gCAAWFodwDLEcwRzhGyYwCgNiHlIWVuAKBsInIAAOA12B/dZwCAA2Nvc3R1dncA4xHyEQUSEhIhEiYSKRKAAWFpdQDpEesR7xHwAKMFcgBjAACg7yVwAACgwyKAAWRwdAD4EfwRABJvAHQAAKAAKuwhdXMAoAEqaSJtZXMAAKACKnECCxIAAAAADxLjIXVwAKAGKmEAcgAAoAUm8iNpYW5nbGUAAWR1GhIeEu8hd24AoL0lcAAAoLMlcCJsdXMAAKAEKmUA5QBCD+UAkg9hInJvdwAAoA0pgAFha28ANhJoEncSAAFjbjoSZRJrAIABbHN0AEESRxJNEm8jemVuZ2UAAKDrKXEAdQBhAHIA5QBcBPIjaWFuZ2xlgKG0JWRscgBYElwSYBLvIXduAKC+JeUhZnQAoMIlaSJnaHQAAKC4JWsAAKAjJLEBbRIAAHUSsgFxEgAAcxIAoJIlAKCRJTQAAKCTJWMAawAAoIglAAFlb38ShxJx4D0A5SD1IWl2AOBhIuUgdAAAoBAjAAJwdHd4kRKVEpsSnxJmAADgNdhT3XSgpSJvAG0AAKClIvQhaWUAoMgiAAZESFVWYmRobXB0dXayEsES0RLgEvcS+xIKExoTHxMjEygTNxMAAkxSbHK5ErsSvRK/EgCgVyUAoFQlAKBWJQCgUyUAolAlRFVkdckSyxLNEs8SAKBmJQCgaSUAoGQlAKBnJQACTFJsctgS2hLcEt4SAKBdJQCgWiUAoFwlAKBZJQCjUSVITFJobHLrEu0S7xLxEvMS9RIAoGwlAKBjJQCgYCUAoGslAKBiJQCgXyVvAHgAAKDJKQACTFJscgITBBMGEwgTAKBVJQCgUiUAoBAlAKAMJQCiACVEVWR1EhMUExYTGBMAoGUlAKBoJQCgLCUAoDQlaSJudXMAAKCfIuwhdXMAoJ4iaSJtZXMAAKCgIgACTFJsci8TMRMzEzUTAKBbJQCgWCUAoBglAKAUJQCjAiVITFJobHJCE0QTRhNIE0oTTBMAoGolAKBhJQCgXiUAoDwlAKAkJQCgHCUAAWV2UhNVE3YA5QD5AGIAYQByADuApgCmQAACY2Vpb2ITZhNqE24TcgAA4DXYt9xtAGkAAKBPIG0A5aA9IogRbAAAoVwAYmh0E3YTAKDFKfMhdWIAoMgnbAF+E4QTbABloCIgdAAAoCIgcAAAoU4iRWWJE4sTAKCuKvGgTyI8BeEMqRMAAN8TABQDFB8UAAAjFDQUAAAAAIUUAAAAAI0UAAAAANcU4xT3FPsUAACIFQAAlhWAAWNwcgCuE7ET1RP1IXRlB2GAoikiYWJjZHMAuxO/E8QTzhPSE24AZAAAoEQqciJjdXAAAKBJKgABYXXIE8sTcAAAoEsqcAAAoEcqbwB0AACgQCoA4CkiAP4AAWVv2RPcE3QAAKBBIO4ABAUAAmFlaXXlE+8T9RP4E/AB6hMAAO0TcwAAoE0qbwBuAA1hZABpAGwAO4DnAOdAcgBjAAlhcABzAHOgTCptAACgUCpvAHQAC2GAAWRtbgAIFA0UEhRpAGwAO4C4ALhAcCJ0eXYAAKCyKXQAAIGiADtlGBQZFKJAcgBkAG8A9ABiAXIAAOA12CDdgAFjZWkAKBQqFDIUeQBHZGMAawBtoBMn4SFyawCgEyfHY3IAAKPLJUVjZWZtcz8UQRRHFHcUfBSAFACgwykAocYCZWxGFEkUcQAAoFciZQBhAlAUAAAAAGAUciJyb3cAAAFsclYUWhTlIWZ0AKC6IWkiZ2h0AACguyGAAlJTYWNkAGgUaRRrFG8UcxSuYACgyCRzAHQAAKCbIukhcmMAoJoi4SFzaACgnSJuImludAAAoBAqaQBkAACg7yrjIWlyAKDCKfUhYnN1oGMmaQB0AACgYybsApMUmhS2FAAAwxRvAG4AZaA6APGgVCKrAG0CnxQAAAAAoxRhAHSgLABAYAChASJmbKcUqRTuABMNZQAAAW14rhSyFOUhbnQAoAEiZQDzANIB5wG6FAAAwBRkoEUibwB0AACgbSpuAPQAzAGAAWZyeQDIFMsUzhQA4DXYVN1vAOQA1wEAgakAO3MeAdMUcgAAoBchAAFhb9oU3hRyAHIAAKC1IXMAcwAAoBcnAAFjdeYU6hRyAADgNdi43AABYnDuFPIUZaDPKgCg0SploNAqAKDSKuQhb3QAoO8igANkZWxwcnZ3AAYVEBUbFSEVRBVlFYQV4SFycgABbHIMFQ4VAKA4KQCgNSlwAhYVAAAAABkVcgAAoN4iYwAAoN8i4SFycnCgtiEAoD0pgKIqImJjZG9zACsVMBU6FT4VQRVyImNhcAAAoEgqAAFhdTQVNxVwAACgRipwAACgSipvAHQAAKCNInIAAKBFKgDgKiIA/gACYWxydksVURVuFXMVcgByAG2gtyEAoDwpeQCAAWV2dwBYFWUVaRVxAHACXxUAAAAAYxVyAGUA4wAXFXUA4wAZFWUAZQAAoM4iZSJkZ2UAAKDPImUAbgA7gKQApEBlI2Fycm93AAABbHJ7FX8V5SFmdACgtiFpImdodAAAoLchZQDkAG0VAAFjaYsVkRVvAG4AaQBuAPQAkwFuAHQAAKAxImwiY3R5AACgLSOACUFIYWJjZGVmaGlqbG9yc3R1d3oAuBW7Fb8V1RXgFegV+RUKFhUWHxZUFlcWZRbFFtsW7xb7FgUXChdyAPIAtAJhAHIAAKBlKQACZ2xyc8YVyhXOFdAV5yFlcgCgICDlIXRoAKA4IfIA9QxoAHagECAAoKMiawHZFd4VYSJyb3cAAKAPKWEA4wBfAgABYXnkFecV8iFvbg9hNGQAoUYhYW/tFfQVAAFnciEC8RVyAACgyiF0InNlcQAAoHcqgAFnbG0A/xUCFgUWO4CwALBAdABhALRjcCJ0eXYAAKCxKQABaXIOFhIW8yFodACgfykA4DXYId1hAHIAAAFschsWHRYAoMMhAKDCIYACYWVnc3YAKBauAjYWOhY+Fm0AAKHEIm9zLhY0Fm4AZABzoMQi9SFpdACgZiZhIm1tYQDdY2kAbgAAoPIiAKH3AGlvQxZRFmQAZQAAgfcAO29KFksW90BuI3RpbWVzAACgxyJuAPgAUBZjAHkAUmRjAG8CXhYAAAAAYhZyAG4AAKAeI28AcAAAoA0jgAJscHR1dwBuFnEWdRaSFp4W7CFhciRgZgAA4DXYVd0AotkCZW1wc30WhBaJFo0WcQBkoFAibwB0AACgUSJpIm51cwAAoDgi7CF1cwCgFCLxInVhcmUAoKEiYgBsAGUAYgBhAHIAdwBlAGQAZwDlANcAbgCAAWFkaAClFqoWtBZyAHIAbwD3APUMbwB3AG4AYQByAHIAbwB3APMA8xVhI3Jwb29uAAABbHK8FsAWZQBmAPQAHBZpAGcAaAD0AB4WYgHJFs8WawBhAHIAbwD3AJILbwLUFgAAAADYFnIAbgAAoB8jbwBwAACgDCOAAWNvdADhFukW7BYAAXJ55RboFgDgNdi53FVkbAAAoPYp8iFvaxFhAAFkcvMW9xZvAHQAAKDxImkA5qC/JVsSAAFhaP8WAhdyAPIANQNhAPIA1wvhIm5nbGUAoKYpAAFjaQ4XEBd5AF9k5yJyYXJyAKD/JwAJRGFjZGVmZ2xtbm9wcXJzdHV4MRc4F0YXWxcyBF4XaRd5F40XrBe0F78X2RcVGCEYLRg1GEAYAAFEbzUXgRZvAPQA+BUAAWNzPBdCF3UAdABlADuA6QDpQPQhZXIAoG4qAAJhaW95TRdQF1YXWhfyIW9uG2FyAGOgViI7gOoA6kDsIW9uAKBVIk1kbwB0ABdhAAFEcmIXZhdvAHQAAKBSIgDgNdgi3XKhmipuF3QXYQB2AGUAO4DoAOhAZKCWKm8AdAAAoJgqgKGZKmlscwCAF4UXhxfuInRlcnMAoOcjAKATIWSglSpvAHQAAKCXKoABYXBzAJMXlheiF2MAcgATYXQAeQBzogUinxcAAAAAoRdlAHQAAKAFInAAMaADIDMBqRerFwCgBCAAoAUgAAFnc7AXsRdLYXAAAKACIAABZ3C4F7sXbwBuABlhZgAA4DXYVt2AAWFscwDFF8sXzxdyAHOg1SJsAACg4yl1AHMAAKBxKmkAAKG1A2x21RfYF28AbgC1Y/VjAAJjc3V24BfoF/0XEBgAAWlv5BdWF3IAYwAAoFYiaQLuFwAAAADwF+0ADQThIW50AAFnbPUX+Rd0AHIAAKCWKuUhc3MAoJUqgAFhZWkAAxgGGAoYbABzAD1gcwB0AACgXyJ2AESgYSJEAACgeCrwImFyc2wAoOUpAAFEYRkYHRhvAHQAAKBTInIAcgAAoHEpgAFjZGkAJxgqGO0XcgAAoC8hbwD0AIwCAAFhaDEYMhi3YzuA8ADwQAABbXI5GD0YbAA7gOsA60BvAACgrCCAAWNpcABGGEgYSxhsACFgcwD0ACwEAAFlb08YVxhjAHQAYQB0AGkAbwDuABoEbgBlAG4AdABpAGEAbADlADME4Ql1GAAAgRgAAIMYiBgAAAAAoRilGAAAqhgAALsYvhjRGAAA1xgnGWwAbABpAG4AZwBkAG8AdABzAGUA8QBlF3kARGRtImFsZQAAoEAmgAFpbHIAjRiRGJ0Y7CFpZwCgA/tpApcYAAAAAJoYZwAAoAD7aQBnAACgBPsA4DXYI93sIWlnAKAB++whaWcA4GYAagCAAWFsdACvGLIYthh0AACgbSZpAGcAAKAC+24AcwAAoLElbwBmAJJh8AHCGAAAxhhmAADgNdhX3QABYWvJGMwYbADsAGsEdqDUIgCg2SphI3J0aW50AACgDSoAAWFv2hgiGQABY3PeGB8ZsQPnGP0YBRkSGRUZAAAdGbID7xjyGPQY9xj5GAAA+xg7gL0AvUAAoFMhO4C8ALxAAKBVIQCgWSEAoFshswEBGQAAAxkAoFQhAKBWIbQCCxkOGQAAAAAQGTuAvgC+QACgVyEAoFwhNQAAoFghtgEZGQAAGxkAoFohAKBdITgAAKBeIWwAAKBEIHcAbgAAoCIjYwByAADgNdi73IAIRWFiY2RlZmdpamxub3JzdHYARhlKGVoZXhlmGWkZkhmWGZkZnRmgGa0ZxhnLGc8Z4BkjGmygZyIAoIwqgAFjbXAAUBlTGVgZ9SF0ZfVhbQBhAOSgswM6FgCghipyImV2ZQAfYQABaXliGWUZcgBjAB1hM2RvAHQAIWGAoWUibHFzAMYEcBl6GfGhZSLOBAAAdhlsAGEAbgD0AN8EgKF+KmNkbACBGYQZjBljAACgqSpvAHQAb6CAKmyggioAoIQqZeDbIgD+cwAAoJQqcgAA4DXYJN3noGsirATtIWVsAKA3IWMAeQBTZIChdyJFYWoApxmpGasZAKCSKgCgpSoAoKQqAAJFYWVztBm2Gb0ZwhkAoGkicABwoIoq8iFveACgiipxoIgq8aCIKrUZaQBtAACg5yJwAGYAAOA12FjdYQB2AOUAYwIAAWNp0xnWGXIAAKAKIW0AAKFzImVs3BneGQCgjioAoJAqAIM+ADtjZGxxco0E6xn0GfgZ/BkBGgABY2nvGfEZAKCnKnIAAKB6Km8AdAAAoNci0CFhcgCglSl1ImVzdAAAoHwqgAJhZGVscwAKGvQZFhrVBCAa8AEPGgAAFBpwAHIAbwD4AFkZcgAAoHgpcQAAAWxxxAQbGmwAZQBzAPMASRlpAO0A5AQAAWVuJxouGnIjdG5lcXEAAOBpIgD+xQAsGgAFQWFiY2Vma29zeUAaQxpmGmoabRqDGocalhrCGtMacgDyAMwCAAJpbG1yShpOGlAaVBpyAHMA8ABxD2YAvWBpAGwA9AASBQABZHJYGlsaYwB5AEpkAKGUIWN3YBpkGmkAcgAAoEgpAKCtIWEAcgAAoA8h6SFyYyVhgAFhbHIAcxp7Gn8a8iF0c3WgZSZpAHQAAKBlJuwhaXAAoCYg4yFvbgCguSJyAADgNdgl3XMAAAFld4wakRphInJvdwAAoCUpYSJyb3cAAKAmKYACYW1vcHIAnxqjGqcauhq+GnIAcgAAoP8h9CFodACgOyJrAAABbHKsGrMaZSRmdGFycm93AACgqSHpJGdodGFycm93AKCqIWYAAOA12Fnd4iFhcgCgFSCAAWNsdADIGswa0BpyAADgNdi93GEAcwDoAGka8iFvaydhAAFicNca2xr1IWxsAKBDIOghZW4AoBAg4Qr2GgAA/RoAAAgbExsaGwAAIRs7GwAAAAA+G2IbmRuVG6sbAACyG80b0htjAHUAdABlADuA7QDtQAChYyBpeQEbBhtyAGMAO4DuAO5AOGQAAWN4CxsNG3kANWRjAGwAO4ChAKFAAAFmcssCFhsA4DXYJt1yAGEAdgBlADuA7ADsQIChSCFpbm8AJxsyGzYbAAFpbisbLxtuAHQAAKAMKnQAAKAtIuYhaW4AoNwpdABhAACgKSHsIWlnM2GAAWFvcABDG1sbXhuAAWNndABJG0sbWRtyACthgAFlbHAAcQVRG1UbaQBuAOUAyAVhAHIA9AByBWgAMWFmAACgtyJlAGQAtWEAoggiY2ZvdGkbbRt1G3kb4SFyZQCgBSFpAG4AdKAeImkAZQAAoN0pZABvAPQAWxsAoisiY2VscIEbhRuPG5QbYQBsAACguiIAAWdyiRuNG2UAcgDzACMQ4wCCG2EicmhrAACgFyryIW9kAKA8KgACY2dwdJ8boRukG6gbeQBRZG8AbgAvYWYAAOA12FrdYQC5Y3UAZQBzAHQAO4C/AL9AAAFjabUbuRtyAADgNdi+3G4AAKIIIkVkc3bCG8QbyBvQAwCg+SJvAHQAAKD1Inag9CIAoPMiaaBiIOwhZGUpYesB1hsAANkbYwB5AFZkbAA7gO8A70AAA2NmbW9zdeYb7hvyG/Ub+hsFHAABaXnqG+0bcgBjADVhOWRyAADgNdgn3eEhdGg3YnAAZgAA4DXYW93jAf8bAAADHHIAAOA12L/c8iFjeVhk6yFjeVRkAARhY2ZnaGpvcxUcGhwiHCYcKhwtHDAcNRzwIXBhdqC6A/BjAAFleR4cIRzkIWlsN2E6ZHIAAOA12CjdciJlZW4AOGFjAHkARWRjAHkAXGRwAGYAAOA12FzdYwByAADgNdjA3IALQUJFSGFiY2RlZmdoamxtbm9wcnN0dXYAXhxtHHEcdRx5HN8cBx0dHTwd3B3tHfEdAR4EHh0eLB5FHrwewx7hHgkfPR9LH4ABYXJ0AGQcZxxpHHIA8gBvB/IAxQLhIWlsAKAbKeEhcnIAoA4pZ6BmIgCgiyphAHIAAKBiKWMJjRwAAJAcAACVHAAAAAAAAAAAAACZHJwcAACmHKgcrRwAANIc9SF0ZTph7SJwdHl2AKC0KXIAYQDuAFoG4iFkYbtjZwAAoegnZGyhHKMcAKCRKeUAiwYAoIUqdQBvADuAqwCrQHIAgKOQIWJmaGxwc3QAuhy/HMIcxBzHHMoczhxmoOQhcwAAoB8pcwAAoB0p6wCyGnAAAKCrIWwAAKA5KWkAbQAAoHMpbAAAoKIhAKGrKmFl1hzaHGkAbAAAoBkpc6CtKgDgrSoA/oABYWJyAOUc6RztHHIAcgAAoAwpcgBrAACgcicAAWFr8Rz4HGMAAAFla/Yc9xx7YFtgAAFlc/wc/hwAoIspbAAAAWR1Ax0FHQCgjykAoI0pAAJhZXV5Dh0RHRodHB3yIW9uPmEAAWRpFR0YHWkAbAA8YewAowbiAPccO2QAAmNxcnMkHScdLB05HWEAAKA2KXUAbwDyoBwgqhEAAWR1MB00HeghYXIAoGcpcyJoYXIAAKBLKWgAAKCyIQCiZCJmZ3FzRB1FB5Qdnh10AIACYWhscnQATh1WHWUdbB2NHXIicm93AHSgkCFhAOkAzxxhI3Jwb29uAAABZHVeHWId7yF3bgCgvSFwAACgvCHlJGZ0YXJyb3dzAKDHIWkiZ2h0AIABYWhzAHUdex2DHXIicm93APOglCGdBmEAcgBwAG8AbwBuAPMAzgtxAHUAaQBnAGEAcgByAG8A9wBlGugkcmVldGltZXMAoMsi8aFkIk0HAACaHWwAYQBuAPQAXgcAon0qY2Rnc6YdqR2xHbcdYwAAoKgqbwB0AG+gfypyoIEqAKCDKmXg2iIA/nMAAKCTKoACYWRlZ3MAwB3GHcod1h3ZHXAAcAByAG8A+ACmHG8AdAAAoNYicQAAAWdxzx3SHXQA8gBGB2cAdADyAHQcdADyAFMHaQDtAGMHgAFpbHIA4h3mHeod8yFodACgfClvAG8A8gDKBgDgNdgp3UWgdiIAoJEqYQH1Hf4dcgAAAWR1YB35HWygvCEAoGopbABrAACghCVjAHkAWWQAomoiYWNodAweDx4VHhkecgDyAGsdbwByAG4AZQDyAGAW4SFyZACgaylyAGkAAKD6JQABaW8hHiQe5CFvdEBh9SFzdGGgsCPjIWhlAKCwIwACRWFlczMeNR48HkEeAKBoInAAcKCJKvIhb3gAoIkqcaCHKvGghyo0HmkAbQAAoOYiAARhYm5vcHR3elIeXB5fHoUelh6mHqsetB4AAW5yVh5ZHmcAAKDsJ3IAAKD9IXIA6wCwBmcAgAFsbXIAZh52Hnse5SFmdAABYXKIB2weaQBnAGgAdABhAHIAcgBvAPcAkwfhInBzdG8AoPwnaQBnAGgAdABhAHIAcgBvAPcAmgdwI2Fycm93AAABbHKNHpEeZQBmAPQAxhxpImdodAAAoKwhgAFhZmwAnB6fHqIecgAAoIUpAOA12F3ddQBzAACgLSppIm1lcwAAoDQqYQGvHrMecwB0AACgFyLhAIoOZaHKJbkeRhLuIWdlAKDKJWEAcgBsoCgAdAAAoJMpgAJhY2htdADMHs8e1R7bHt0ecgDyAJ0GbwByAG4AZQDyANYWYQByAGSgyyEAoG0pAKAOIHIAaQAAoL8iAANhY2hpcXTrHu8e1QfzHv0eBh/xIXVvAKA5IHIAAOA12MHcbQDloXIi+h4AAPweAKCNKgCgjyoAAWJ19xwBH28AcqAYIACgGiDyIW9rQmEAhDwAO2NkaGlscXJCBhcfxh0gHyQfKB8sHzEfAAFjaRsfHR8AoKYqcgAAoHkqcgBlAOUAkx3tIWVzAKDJIuEhcnIAoHYpdSJlc3QAAKB7KgABUGk1HzkfYQByAACglillocMlAgdfEnIAAAFkdUIfRx9zImhhcgAAoEop6CFhcgCgZikAAWVuTx9WH3IjdG5lcXEAAOBoIgD+xQBUHwAHRGFjZGVmaGlsbm9wc3VuH3Ifoh+rH68ftx+7H74f5h/uH/MfBwj/HwsgxCFvdACgOiIAAmNscHJ5H30fiR+eH3IAO4CvAK9AAAFldIEfgx8AoEImZaAgJ3MAZQAAoCAnc6CmIXQAbwCAoaYhZGx1AJQfmB+cH28AdwDuAHkDZQBmAPQA6gbwAOkO6yFlcgCgriUAAW95ph+qH+0hbWEAoCkqPGThIXNoAKAUIOElc3VyZWRhbmdsZQCgISJyAADgNdgq3W8AAKAnIYABY2RuAMQfyR/bH3IAbwA7gLUAtUBhoiMi0B8AANMf1x9zAPQAKxFpAHIAAKDwKm8AdAA7gLcAt0B1AHMA4qESIh4TAADjH3WgOCIAoCoqYwHqH+0fcAAAoNsq8gB+GnAAbAB1APMACAgAAWRw9x/7H+UhbHMAoKciZgAA4DXYXt0AAWN0AyAHIHIAAOA12MLc8CFvcwCgPiJsobwDECAVIPQiaW1hcACguCJhAPAAEyAADEdMUlZhYmNkZWZnaGlqbG1vcHJzdHV2dzwgRyBmIG0geSCqILgg2iDeIBEhFSEyIUMhTSFQIZwhnyHSIQAiIyKLIrEivyIUIwABZ3RAIEMgAODZIjgD9uBrItIgBwmAAWVsdABNIF8gYiBmAHQAAAFhclMgWCByInJvdwAAoM0h6SRnaHRhcnJvdwCgziEA4NgiOAP24Goi0iBfCekkZ2h0YXJyb3cAoM8hAAFEZHEgdSDhIXNoAKCvIuEhc2gAoK4igAJiY25wdACCIIYgiSCNIKIgbABhAACgByL1IXRlRGFnAADgICLSIACiSSJFaW9wlSCYIJwgniAA4HAqOANkAADgSyI4A3MASWFyAG8A+AAyCnUAcgBhoG4mbADzoG4mmwjzAa8gAACzIHAAO4CgAKBAbQBwAOXgTiI4AyoJgAJhZW91eQDBIMogzSDWINkg8AHGIAAAyCAAoEMqbwBuAEhh5CFpbEZhbgBnAGSgRyJvAHQAAOBtKjgDcAAAoEIqPWThIXNoAKATIACjYCJBYWRxc3jpIO0g+SD+IAIhDCFyAHIAAKDXIXIAAAFocvIg9SBrAACgJClvoJch9wAGD28AdAAA4FAiOAN1AGkA9gC7CAABZWkGIQohYQByAACgKCntAN8I6SFzdPOgBCLlCHIAAOA12CvdAAJFZXN0/wgcISshLiHxoXEiIiEAABMJ8aFxIgAJAAAnIWwAYQBuAPQAEwlpAO0AGQlyoG8iAKBvIoABQWFwADghOyE/IXIA8gBeIHIAcgAAoK4hYQByAACg8ipzogsiSiEAAAAAxwtkoPwiAKD6ImMAeQBaZIADQUVhZGVzdABcIV8hYiFmIWkhkyGWIXIA8gBXIADgZiI4A3IAcgAAoJohcgAAoCUggKFwImZxcwBwIYQhjiF0AAABYXJ1IXohcgByAG8A9wBlIWkAZwBoAHQAYQByAHIAbwD3AD4h8aFwImAhAACKIWwAYQBuAPQAZwlz4H0qOAMAoG4iaQDtAG0JcqBuImkA5aDqIkUJaQDkADoKAAFwdKMhpyFmAADgNdhf3YCBrAA7aW4AriGvIcchrEBuAIChCSJFZHYAtyG6Ib8hAOD5IjgDbwB0AADg9SI4A+EB1gjEIcYhAKD3IgCg9iJpAHagDCLhAagJzyHRIQCg/iIAoP0igAFhb3IA2CHsIfEhcgCAoSYiYXN0AOAh5SHpIWwAbABlAOwAywhsAADg/SrlIADgAiI4A2wiaW50AACgFCrjoYAi9yEAAPohdQDlAJsJY+CvKjgDZaCAIvEAkwkAAkFhaXQHIgoiFyIeInIA8gBsIHIAcgAAoZshY3cRIhQiAOAzKTgDAOCdITgDZyRodGFycm93AACgmyFyAGkA5aDrIr4JgANjaGltcHF1AC8iPCJHIpwhTSJQIloigKGBImNlcgA2Iv0JOSJ1AOUABgoA4DXYw9zvIXJ0bQKdIQAAAABEImEAcgDhAOEhbQBloEEi8aBEIiYKYQDyAMsIcwB1AAABYnBWIlgi5QDUCeUA3wmAAWJjcABgInMieCKAoYQiRWVzAGci7glqIgDgxSo4A2UAdABl4IIi0iBxAPGgiCJoImMAZaCBIvEA/gmAoYUiRWVzAH8iFgqCIgDgxio4A2UAdABl4IMi0iBxAPGgiSKAIgACZ2lscpIilCKaIpwi7AAMCWwAZABlADuA8QDxQOcAWwlpI2FuZ2xlAAABbHKkIqoi5SFmdGWg6iLxAEUJaSJnaHQAZaDrIvEAvgltoL0DAKEjAGVzuCK8InIAbwAAoBYhcAAAoAcggARESGFkZ2lscnMAziLSItYi2iLeIugi7SICIw8j4SFzaACgrSLhIXJyAKAEKXAAAOBNItIg4SFzaACgrCIAAWV04iLlIgDgZSLSIADgPgDSIG4iZmluAACg3imAAUFldADzIvci+iJyAHIAAKACKQDgZCLSIHLgPADSIGkAZQAA4LQi0iAAAUF0BiMKI3IAcgAAoAMp8iFpZQDgtSLSIGkAbQAA4Dwi0iCAAUFhbgAaIx4jKiNyAHIAAKDWIXIAAAFociMjJiNrAACgIylvoJYh9wD/DuUhYXIAoCcpUxJqFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVCMAAF4jaSN/I4IjjSOeI8AUAAAAAKYjwCMAANoj3yMAAO8jHiQvJD8kRCQAAWNzVyNsFHUAdABlADuA8wDzQAABaXlhI2cjcgBjoJoiO4D0APRAPmSAAmFiaW9zAHEjdCN3I3EBeiNzAOgAdhTsIWFjUWF2AACgOCrvIWxkAKC8KewhaWdTYQABY3KFI4kjaQByAACgvykA4DXYLN1vA5QjAAAAAJYjAACcI24A22JhAHYAZQA7gPIA8kAAoMEpAAFibaEjjAphAHIAAKC1KQACYWNpdKwjryO6I70jcgDyAFkUAAFpcrMjtiNyAACgvinvIXNzAKC7KW4A5QDZCgCgwCmAAWFlaQDFI8gjyyNjAHIATWFnAGEAyWOAAWNkbgDRI9Qj1iPyIW9uv2MAoLYpdQDzAHgBcABmAADgNdhg3YABYWVsAOQj5yPrI3IAAKC3KXIAcAAAoLkpdQDzAHwBAKMoImFkaW9zdvkj/CMPJBMkFiQbJHIA8gBeFIChXSplZm0AAyQJJAwkcgBvoDQhZgAAoDQhO4CqAKpAO4C6ALpA5yFvZgCgtiJyAACgVipsIm9wZQAAoFcqAKBbKoABY2xvACMkJSQrJPIACCRhAHMAaAA7gPgA+EBsAACgmCJpAGwBMyQ4JGQAZQA7gPUA9UBlAHMAYaCXInMAAKA2Km0AbAA7gPYA9kDiIWFyAKA9I+EKXiQAAHokAAB8JJQkAACYJKkkAAAAALUkEQsAAPAkAAAAAAQleiUAAIMlcgCAoSUiYXN0AGUkbyQBCwCBtgA7bGokayS2QGwAZQDsABgDaQJ1JAAAAAB4JG0AAKDzKgCg/Sp5AD9kcgCAAmNpbXB0AIUkiCSLJJkSjyRuAHQAJWBvAGQALmBpAGwAAKAwIOUhbmsAoDEgcgAA4DXYLd2AAWltbwCdJKAkpCR2oMYD1WNtAGEA9AD+B24AZQAAoA4m9KHAA64kAAC0JGMjaGZvcmsAAKDUItZjAAFhdbgkxCRuAAABY2u9JMIkawBooA8hAKAOIfYAaRpzAACkKwBhYmNkZW1zdNMkIRPXJNsk4STjJOck6yTjIWlyAKAjKmkAcgAAoCIqAAFvdYsW3yQAoCUqAKByKm4AO4CxALFAaQBtAACgJip3AG8AAKAnKoABaXB1APUk+iT+JO4idGludACgFSpmAADgNdhh3W4AZAA7gKMAo0CApHoiRWFjZWlub3N1ABMlFSUYJRslTCVRJVklSSV1JQCgsypwAACgtyp1AOUAPwtjoK8qgKJ6ImFjZW5zACclLSU0JTYlSSVwAHAAcgBvAPgAFyV1AHIAbAB5AGUA8QA/C/EAOAuAAWFlcwA8JUElRSXwInByb3gAoLkqcQBxAACgtSppAG0AAKDoImkA7QBEC20AZQDzoDIgIguAAUVhcwBDJVclRSXwAEAlgAFkZnAATwtfJXElgAFhbHMAZSVpJW0l7CFhcgCgLiPpIW5lAKASI/UhcmYAoBMjdKAdIu8AWQvyIWVsAKCwIgABY2l9JYElcgAA4DXYxdzIY24iY3NwAACgCCAAA2Zpb3BzdZElKxuVJZolnyWkJXIAAOA12C7dcABmAADgNdhi3XIiaW1lAACgVyBjAHIAAOA12MbcgAFhZW8AqiW6JcAldAAAAWVpryW2JXIAbgBpAG8AbgDzABkFbgB0AACgFipzAHQAZaA/APEACRj0AG0LgApBQkhhYmNkZWZoaWxtbm9wcnN0dXgA4yXyJfYl+iVpJpAmpia9JtUm5ib4JlonaCdxJ3UnnietJ7EnyCfiJ+cngAFhcnQA6SXsJe4lcgDyAJkM8gD6AuEhaWwAoBwpYQByAPIA3BVhAHIAAKBkKYADY2RlbnFydAAGJhAmEyYYJiYmKyZaJgABZXUKJg0mAOA9IjEDdABlAFVhaQDjACAN7SJwdHl2AKCzKWcAgKHpJ2RlbAAgJiImJCYAoJIpAKClKeUA9wt1AG8AO4C7ALtAcgAApZIhYWJjZmhscHN0dz0mQCZFJkcmSiZMJk4mUSZVJlgmcAAAoHUpZqDlIXMAAKAgKQCgMylzAACgHinrALka8ACVHmwAAKBFKWkAbQAAoHQpbAAAoKMhAKCdIQABYWleJmImaQBsAACgGilvAG6gNiJhAGwA8wB2C4ABYWJyAG8mciZ2JnIA8gAvEnIAawAAoHMnAAFha3omgSZjAAABZWt/JoAmfWBdYAABZXOFJocmAKCMKWwAAAFkdYwmjiYAoI4pAKCQKQACYWV1eZcmmiajJqUm8iFvbllhAAFkaZ4moSZpAGwAV2HsAA8M4gCAJkBkAAJjbHFzrSawJrUmuiZhAACgNylkImhhcgAAoGkpdQBvAPKgHSCjAWgAAKCzIYABYWNnAMMm0iaUC2wAgKEcIWlwcwDLJs4migxuAOUAoAxhAHIA9ADaC3QAAKCtJYABaWxyANsm3ybjJvMhaHQAoH0pbwBvAPIANgwA4DXYL90AAWFv6ib1JnIAAAFkde8m8SYAoMEhbKDAIQCgbCl2oMED8WOAAWducwD+Jk4nUCdoAHQAAANhaGxyc3QKJxInISc1Jz0nRydyInJvdwB0oJIhYQDpAFYmYSNycG9vbgAAAWR1GiceJ28AdwDuAPAmcAAAoMAh5SFmdAABYWgnJy0ncgByAG8AdwDzAAkMYQByAHAAbwBvAG4A8wATBGklZ2h0YXJyb3dzAACgySFxAHUAaQBnAGEAcgByAG8A9wBZJugkcmVldGltZXMAoMwiZwDaYmkAbgBnAGQAbwB0AHMAZQDxABwYgAFhaG0AYCdjJ2YncgDyAAkMYQDyABMEAKAPIG8idXN0AGGgsSPjIWhlAKCxI+0haWQAoO4qAAJhYnB0fCeGJ4knmScAAW5ygCeDJ2cAAKDtJ3IAAKD+IXIA6wAcDIABYWZsAI8nkieVJ3IAAKCGKQDgNdhj3XUAcwAAoC4qaSJtZXMAAKA1KgABYXCiJ6gncgBnoCkAdAAAoJQp7yJsaW50AKASKmEAcgDyADwnAAJhY2hxuCe8J6EMwCfxIXVvAKA6IHIAAOA12MfcAAFidYAmxCdvAPKgGSCoAYABaGlyAM4n0ifWJ3IAZQDlAE0n7SFlcwCgyiJpAIChuSVlZmwAXAxjEt4n9CFyaQCgzinsInVoYXIAoGgpAKAeIWENBSgJKA0oSyhVKIYoAACLKLAoAAAAAOMo5ygAABApJCkxKW0pcSmHKaYpAACYKgAAAACxKmMidXRlAFthcQB1AO8ABR+ApHsiRWFjZWlucHN5ABwoHignKCooLygyKEEoRihJKACgtCrwASMoAAAlKACguCpvAG4AYWF1AOUAgw1koLAqaQBsAF9hcgBjAF1hgAFFYXMAOCg6KD0oAKC2KnAAAKC6KmkAbQAAoOki7yJsaW50AKATKmkA7QCIDUFkbwB0AGKixSKRFgAAAABTKACgZiqAA0FhY21zdHgAYChkKG8ocyh1KHkogihyAHIAAKDYIXIAAAFocmkoayjrAJAab6CYIfcAzAd0ADuApwCnQGkAO2D3IWFyAKApKW0AAAFpbn4ozQBuAHUA8wDOAHQAAKA2J3IA7+A12DDdIxkAAmFjb3mRKJUonSisKHIAcAAAoG8mAAFoeZkonChjAHkASWRIZHIAdABtAqUoAAAAAKgoaQDkAFsPYQByAGEA7ABsJDuArQCtQAABZ22zKLsobQBhAAChwwNmdroouijCY4CjPCJkZWdsbnByAMgozCjPKNMo1yjaKN4obwB0AACgairxoEMiCw5FoJ4qAKCgKkWgnSoAoJ8qZQAAoEYi7CF1cwCgJCrhIXJyAKByKWEAcgDyAPwMAAJhZWl07Sj8KAEpCCkAAWxz8Sj4KGwAcwBlAHQAbQDpAH8oaABwAACgMyrwImFyc2wAoOQpAAFkbFoPBSllAACgIyNloKoqc6CsKgDgrCoA/oABZmxwABUpGCkfKfQhY3lMZGKgLwBhoMQpcgAAoD8jZgAA4DXYZN1hAAABZHIoKRcDZQBzAHWgYCZpAHQAAKBgJoABY3N1ADYpRilhKQABYXU6KUApcABzoJMiAOCTIgD+cABzoJQiAOCUIgD+dQAAAWJwSylWKQChjyJlcz4NUCllAHQAZaCPIvEAPw0AoZAiZXNIDVspZQB0AGWgkCLxAEkNAKGhJWFmZilbBHIAZQFrKVwEAKChJWEAcgDyAAMNAAJjZW10dyl7KX8pgilyAADgNdjI3HQAbQDuAM4AaQDsAAYpYQByAOYAVw0AAWFyiimOKXIA5qAGJhESAAFhbpIpoylpImdodAAAAWVwmSmgKXAAcwBpAGwAbwDuANkXaADpAKAkcwCvYIACYmNtbnAArin8KY4NJSooKgCkgiJFZGVtbnByc7wpvinCKcgpzCnUKdgp3CkAoMUqbwB0AACgvSpkoIYibwB0AACgwyr1IWx0AKDBKgABRWXQKdIpAKDLKgCgiiLsIXVzAKC/KuEhcnIAoHkpgAFlaXUA4inxKfQpdAAAoYIiZW7oKewpcQDxoIYivSllAHEA8aCKItEpbQAAoMcqAAFicPgp+ikAoNUqAKDTKmMAgKJ7ImFjZW5zAAcqDSoUKhYqRihwAHAAcgBvAPgAIyh1AHIAbAB5AGUA8QCDDfEAfA2AAWFlcwAcKiIqPShwAHAAcgBvAPgAPChxAPEAOShnAACgaiYApoMiMTIzRWRlaGxtbnBzPCo/KkIqRSpHKlIqWCpjKmcqaypzKncqO4C5ALlAO4CyALJAO4CzALNAAKDGKgABb3NLKk4qdAAAoL4qdQBiAACg2CpkoIcibwB0AACgxCpzAAABb3VdKmAqbAAAoMknYgAAoNcq4SFycgCgeyn1IWx0AKDCKgABRWVvKnEqAKDMKgCgiyLsIXVzAKDAKoABZWl1AH0qjCqPKnQAAKGDImVugyqHKnEA8aCHIkYqZQBxAPGgiyJwKm0AAKDIKgABYnCTKpUqAKDUKgCg1iqAAUFhbgCdKqEqrCpyAHIAAKDZIXIAAAFocqYqqCrrAJUab6CZIfcAxQf3IWFyAKAqKWwAaQBnADuA3wDfQOELzyrZKtwq6SrsKvEqAAD1KjQrAAAAAAAAAAAAAEwrbCsAAHErvSsAAAAAAADRK3IC1CoAAAAA2CrnIWV0AKAWI8RjcgDrAOUKgAFhZXkA4SrkKucq8iFvbmVh5CFpbGNhQmRvAPQAIg5sInJlYwAAoBUjcgAA4DXYMd0AAmVpa2/7KhIrKCsuK/IBACsAAAkrZQAAATRm6g0EK28AcgDlAOsNYQBzorgDECsAAAAAEit5AG0A0WMAAWNuFislK2sAAAFhcxsrIStwAHAAcgBvAPgAFw5pAG0AAKA8InMA8AD9DQABYXMsKyEr8AAXDnIAbgA7gP4A/kDsATgrOyswG2QA5QBnAmUAcwCAgdcAO2JkAEMrRCtJK9dAYaCgInIAAKAxKgCgMCqAAWVwcwBRK1MraSvhAAkh4qKkIlsrXysAAAAAYytvAHQAAKA2I2kAcgAAoPEqb+A12GXdcgBrAACg2irhAHgociJpbWUAAKA0IIABYWlwAHYreSu3K2QA5QC+DYADYWRlbXBzdACFK6MrmiunK6wrsCuzK24iZ2xlAACitSVkbHFykCuUK5ornCvvIXduAKC/JeUhZnRloMMl8QACBwCgXCJpImdodABloLkl8QBdDG8AdAAAoOwlaSJudXMAAKA6KuwhdXMAoDkqYgAAoM0p6SFtZQCgOyrlInppdW0AoOIjgAFjaHQAwivKK80rAAFyecYrySsA4DXYydxGZGMAeQBbZPIhb2tnYQABaW/UK9creAD0ANERaCJlYWQAAAFsct4r5ytlAGYAdABhAHIAcgBvAPcAXQbpJGdodGFycm93AKCgIQAJQUhhYmNkZmdobG1vcHJzdHV3CiwNLBEsHSwnLDEsQCxLLFIsYix6LIQsjyzLLOgs7Sz/LAotcgDyAAkDYQByAACgYykAAWNyFSwbLHUAdABlADuA+gD6QPIACQ1yAOMBIywAACUseQBeZHYAZQBtYQABaXkrLDAscgBjADuA+wD7QENkgAFhYmgANyw6LD0scgDyANEO7CFhY3FhYQDyAOAOAAFpckQsSCzzIWh0AKB+KQDgNdgy3XIAYQB2AGUAO4D5APlAYQFWLF8scgAAAWxyWixcLACgvyEAoL4hbABrAACggCUAAWN0Zix2LG8CbCwAAAAAcyxyAG4AZaAcI3IAAKAcI28AcAAAoA8jcgBpAACg+CUAAWFsfiyBLGMAcgBrYTuAqACoQAABZ3CILIssbwBuAHNhZgAA4DXYZt0AA2FkaGxzdZksniynLLgsuyzFLHIAcgBvAPcACQ1vAHcAbgBhAHIAcgBvAPcA2A5hI3Jwb29uAAABbHKvLLMsZQBmAPQAWyxpAGcAaAD0AF0sdQDzAKYOaQAAocUDaGzBLMIs0mNvAG4AxWPwI2Fycm93cwCgyCGAAWNpdADRLOEs5CxvAtcsAAAAAN4scgBuAGWgHSNyAACgHSNvAHAAAKAOI24AZwBvYXIAaQAAoPklYwByAADgNdjK3IABZGlyAPMs9yz6LG8AdAAAoPAi7CFkZWlhaQBmoLUlAKC0JQABYW0DLQYtcgDyAMosbAA7gPwA/EDhIm5nbGUAoKcpgAdBQkRhY2RlZmxub3Byc3oAJy0qLTAtNC2bLZ0toS2/LcMtxy3TLdgt3C3gLfwtcgDyABADYQByAHag6CoAoOkqYQBzAOgA/gIAAW5yOC08LechcnQAoJwpgANla25wcnN0AJkpSC1NLVQtXi1iLYItYQBwAHAA4QAaHG8AdABoAGkAbgDnAKEXgAFoaXIAoSmzJFotbwBwAPQAdCVooJUh7wD4JgABaXVmLWotZwBtAOEAuygAAWJwbi14LXMjZXRuZXEAceCKIgD+AODLKgD+cyNldG5lcQBx4IsiAP4A4MwqAP4AAWhyhi2KLWUAdADhABIraSNhbmdsZQAAAWxyki2WLeUhZnQAoLIiaSJnaHQAAKCzInkAMmThIXNoAKCiIoABZWxyAKcttC24LWKiKCKuLQAAAACyLWEAcgAAoLsicQAAoFoi7CFpcACg7iIAAWJ0vC1eD2EA8gBfD3IAAOA12DPddAByAOkAlS1zAHUAAAFicM0t0C0A4IIi0iAA4IMi0iBwAGYAAOA12GfdcgBvAPAAWQt0AHIA6QCaLQABY3XkLegtcgAA4DXYy9wAAWJw7C30LW4AAAFFZXUt8S0A4IoiAP5uAAABRWV/LfktAOCLIgD+6SJnemFnAKCaKYADY2Vmb3BycwANLhAuJS4pLiMuLi40LukhcmN1YQABZGkULiEuAAFiZxguHC5hAHIAAKBfKmUAcaAnIgCgWSLlIXJwAKAYIXIAAOA12DTdcABmAADgNdho3WWgQCJhAHQA6ABqD2MAcgAA4DXYzNzjCuQRUC4AAFQuAABYLmIuAAAAAGMubS5wLnQuAAAAAIguki4AAJouJxIqEnQAcgDpAB0ScgAA4DXYNd0AAUFhWy5eLnIA8gDnAnIA8gCTB75jAAFBYWYuaS5yAPIA4AJyAPIAjAdhAPAAeh5pAHMAAKD7IoABZHB0APgReS6DLgABZmx9LoAuAOA12GnddQDzAP8RaQBtAOUABBIAAUFhiy6OLnIA8gDuAnIA8gCaBwABY3GVLgoScgAA4DXYzdwAAXB0nS6hLmwAdQDzACUScgDpACASAARhY2VmaW9zdbEuvC7ELsguzC7PLtQu2S5jAAABdXm2LrsudABlADuA/QD9QE9kAAFpecAuwy5yAGMAd2FLZG4AO4ClAKVAcgAA4DXYNt1jAHkAV2RwAGYAAOA12GrdYwByAADgNdjO3AABY23dLt8ueQBOZGwAO4D/AP9AAAVhY2RlZmhpb3N38y73Lv8uAi8MLxAvEy8YLx0vIi9jInV0ZQB6YQABYXn7Lv4u8iFvbn5hN2RvAHQAfGEAAWV0Bi8KL3QAcgDmAB8QYQC2Y3IAAOA12DfdYwB5ADZk5yJyYXJyAKDdIXAAZgAA4DXYa91jAHIAAOA12M/cAAFqbiYvKC8AoA0gagAAoAwg"),GIe=Qz("AAJhZ2xxBwARABMAFQBtAg0AAAAAAA8AcAAmYG8AcwAnYHQAPmB0ADxg9SFvdCJg");var Oi;(function(n){n[n.VALUE_LENGTH=49152]="VALUE_LENGTH",n[n.FLAG13=8192]="FLAG13",n[n.BRANCH_LENGTH=8064]="BRANCH_LENGTH",n[n.JUMP_TABLE=127]="JUMP_TABLE"})(Oi||(Oi={}));var cn;(function(n){n[n.NUM=35]="NUM",n[n.SEMI=59]="SEMI",n[n.EQUALS=61]="EQUALS",n[n.ZERO=48]="ZERO",n[n.NINE=57]="NINE",n[n.LOWER_A=97]="LOWER_A",n[n.LOWER_F=102]="LOWER_F",n[n.LOWER_X=120]="LOWER_X",n[n.LOWER_Z=122]="LOWER_Z",n[n.UPPER_A=65]="UPPER_A",n[n.UPPER_F=70]="UPPER_F",n[n.UPPER_Z=90]="UPPER_Z"})(cn||(cn={}));const J4=32;function fx(n){return n>=cn.ZERO&&n<=cn.NINE}function YIe(n){return n>=cn.UPPER_A&&n<=cn.UPPER_F||n>=cn.LOWER_A&&n<=cn.LOWER_F}function KIe(n){return n>=cn.UPPER_A&&n<=cn.UPPER_Z||n>=cn.LOWER_A&&n<=cn.LOWER_Z||fx(n)}function qIe(n){return n===cn.EQUALS||KIe(n)}var ii;(function(n){n[n.EntityStart=0]="EntityStart",n[n.NumericStart=1]="NumericStart",n[n.NumericDecimal=2]="NumericDecimal",n[n.NumericHex=3]="NumericHex",n[n.NamedEntity=4]="NamedEntity"})(ii||(ii={}));var Go;(function(n){n[n.Legacy=0]="Legacy",n[n.Strict=1]="Strict",n[n.Attribute=2]="Attribute"})(Go||(Go={}));class QIe{constructor(e,t,i){this.decodeTree=e,this.emitCodePoint=t,this.errors=i,this.state=ii.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Go.Strict,this.runConsumed=0}startEntity(e){this.decodeMode=e,this.state=ii.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1,this.runConsumed=0}write(e,t){switch(this.state){case ii.EntityStart:return e.charCodeAt(t)===cn.NUM?(this.state=ii.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=ii.NamedEntity,this.stateNamedEntity(e,t));case ii.NumericStart:return this.stateNumericStart(e,t);case ii.NumericDecimal:return this.stateNumericDecimal(e,t);case ii.NumericHex:return this.stateNumericHex(e,t);case ii.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|J4)===cn.LOWER_X?(this.state=ii.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=ii.NumericDecimal,this.stateNumericDecimal(e,t))}stateNumericHex(e,t){for(;t<e.length;){const i=e.charCodeAt(t);if(fx(i)||YIe(i)){const s=i<=cn.NINE?i-cn.ZERO:(i|J4)-cn.LOWER_A+10;this.result=this.result*16+s,this.consumed++,t++}else return this.emitNumericEntity(i,3)}return-1}stateNumericDecimal(e,t){for(;t<e.length;){const i=e.charCodeAt(t);if(fx(i))this.result=this.result*10+(i-cn.ZERO),this.consumed++,t++;else return this.emitNumericEntity(i,2)}return-1}emitNumericEntity(e,t){var i;if(this.consumed<=t)return(i=this.errors)===null||i===void 0||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===cn.SEMI)this.consumed+=1;else if(this.decodeMode===Go.Strict)return 0;return this.emitCodePoint(WIe(this.result),this.consumed),this.errors&&(e!==cn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:i}=this;let s=i[this.treeIndex],r=(s&Oi.VALUE_LENGTH)>>14;for(;t<e.length;){if(r===0&&(s&Oi.FLAG13)!==0){const a=(s&Oi.BRANCH_LENGTH)>>7;if(this.runConsumed===0){const c=s&Oi.JUMP_TABLE;if(e.charCodeAt(t)!==c)return this.result===0?0:this.emitNotTerminatedNamedEntity();t++,this.excess++,this.runConsumed++}for(;this.runConsumed<a;){if(t>=e.length)return-1;const c=this.runConsumed-1,d=i[this.treeIndex+1+(c>>1)],h=c%2===0?d&255:d>>8&255;if(e.charCodeAt(t)!==h)return this.runConsumed=0,this.result===0?0:this.emitNotTerminatedNamedEntity();t++,this.excess++,this.runConsumed++}this.runConsumed=0,this.treeIndex+=1+(a>>1),s=i[this.treeIndex],r=(s&Oi.VALUE_LENGTH)>>14}if(t>=e.length)break;const o=e.charCodeAt(t);if(o===cn.SEMI&&r!==0&&(s&Oi.FLAG13)!==0)return this.emitNamedEntityData(this.treeIndex,r,this.consumed+this.excess);if(this.treeIndex=ZIe(i,s,this.treeIndex+Math.max(1,r),o),this.treeIndex<0)return this.result===0||this.decodeMode===Go.Attribute&&(r===0||qIe(o))?0:this.emitNotTerminatedNamedEntity();if(s=i[this.treeIndex],r=(s&Oi.VALUE_LENGTH)>>14,r!==0){if(o===cn.SEMI)return this.emitNamedEntityData(this.treeIndex,r,this.consumed+this.excess);this.decodeMode!==Go.Strict&&(s&Oi.FLAG13)===0&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}t++,this.excess++}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:i}=this,s=(i[t]&Oi.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,i){const{decodeTree:s}=this;return this.emitCodePoint(t===1?s[e]&~(Oi.VALUE_LENGTH|Oi.FLAG13):s[e+1],i),t===3&&this.emitCodePoint(s[e+2],i),i}end(){var e;switch(this.state){case ii.NamedEntity:return this.result!==0&&(this.decodeMode!==Go.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ii.NumericDecimal:return this.emitNumericEntity(0,2);case ii.NumericHex:return this.emitNumericEntity(0,3);case ii.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ii.EntityStart:return 0}}}function Zz(n){let e="";const t=new QIe(n,i=>e+=HIe(i));return function(s,r){let o=0,a=0;for(;(a=s.indexOf("&",a))>=0;){e+=s.slice(o,a),t.startEntity(r);const d=t.write(s,a+1);if(d<0){o=a+t.end();break}o=a+d,a=d===0?o+1:o}const c=e+s.slice(o);return e="",c}}function ZIe(n,e,t,i){const s=(e&Oi.BRANCH_LENGTH)>>7,r=e&Oi.JUMP_TABLE;if(s===0)return r!==0&&i===r?t:-1;if(r){const d=i-r;return d<0||d>=s?-1:n[t+d]-1}const o=s+1>>1;let a=0,c=s-1;for(;a<=c;){const d=a+c>>>1,h=d>>1,p=n[t+h]>>(d&1)*8&255;if(p<i)a=d+1;else if(p>i)c=d-1;else return n[t+o+d]}return-1}const JIe=Zz($Ie),XIe=Zz(GIe);function eRe(n,e=Go.Legacy){return JIe(n,e)}function tRe(n){return XIe(n,Go.Strict)}var Uw;(function(n){n[n.XML=0]="XML",n[n.HTML=1]="HTML"})(Uw||(Uw={}));var X4;(function(n){n[n.UTF8=0]="UTF8",n[n.ASCII=1]="ASCII",n[n.Extensive=2]="Extensive",n[n.Attribute=3]="Attribute",n[n.Text=4]="Text"})(X4||(X4={}));function Jz(n,e=Uw.XML){if((typeof e=="number"?e:e.level)===Uw.HTML){const i=typeof e=="object"?e.mode:void 0;return eRe(n,i)}return tRe(n)}const nRe=bl({category:pn().min(1,"Please select a category"),title:pn().min(3,"Title must be at least 3 characters long."),slug:pn().min(3,"Slug must be at least 3 characters long."),blogContent:pn().min(3,"Blog content must be at least 3 characters long.")}),iRe=()=>{const{blogid:n}=Jw(),e=ma(),[t,i]=_.useState(),[s,r]=_.useState(null),{data:o}=vi(`${Et("VITE_API_BASE_URL")}/category/all-category`,{method:"get",credentials:"include"}),{data:a,loading:c}=vi(`${Et("VITE_API_BASE_URL")}/blog/edit/${n}`,{method:"get",credentials:"include"},[n]),d=hl({resolver:wl(nRe),defaultValues:{category:"",title:"",slug:"",blogContent:""}});_.useEffect(()=>{a?.blog&&(i(a.blog.featured_image),d.reset({category:a.blog.category.id,title:a.blog.title,slug:a.blog.slug,blogContent:Jz(a.blog.blog_content)}))},[a,d]);const h=(A,C)=>{const k=C.getData();d.setValue("blogContent",k)},m=d.watch("title");_.useEffect(()=>{if(m){const A=Vv(m,{lower:!0});d.setValue("slug",A)}},[m,d]);const p=A=>{const C=A[0];if(C){const k=URL.createObjectURL(C);r(C),i(k)}};async function w(A){try{const C=new FormData;s&&C.append("file",s),C.append("data",JSON.stringify(A));const k=await fetch(`${Et("VITE_API_BASE_URL")}/blog/update/${n}`,{method:"put",credentials:"include",body:C}),E=await k.json();if(!k.ok)return bt("error",E.message);bt("success",E.message),e(dv)}catch(C){bt("error",C.message||"Failed to update blog")}}return c?v.jsx(fo,{}):v.jsx("div",{className:"container mx-auto max-w-4xl py-6",children:v.jsx(Xs,{className:"pt-5 border-none shadow-md",children:v.jsxs(lo,{children:[v.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Edit Blog"}),v.jsx(ml,{...d,children:v.jsxs("form",{onSubmit:d.handleSubmit(w),className:"space-y-6",children:[v.jsx(dn,{control:d.control,name:"category",render:({field:A})=>v.jsxs(fn,{children:[v.jsx(hn,{className:"font-semibold",children:"Category"}),v.jsxs(IF,{onValueChange:A.onChange,value:A.value,children:[v.jsx(mn,{children:v.jsx(PF,{children:v.jsx(RF,{placeholder:"Select a category"})})}),v.jsx(OF,{children:o?.category.map(C=>v.jsx(DF,{value:C.id?.toString()||"",children:C.name},C.id))})]}),v.jsx(gn,{})]})}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsx(dn,{control:d.control,name:"title",render:({field:A})=>v.jsxs(fn,{children:[v.jsx(hn,{className:"font-semibold",children:"Title"}),v.jsx(mn,{children:v.jsx(oi,{placeholder:"Enter blog title",...A})}),v.jsx(gn,{})]})}),v.jsx(dn,{control:d.control,name:"slug",render:({field:A})=>v.jsxs(fn,{children:[v.jsx(hn,{className:"font-semibold",children:"Slug"}),v.jsx(mn,{children:v.jsx(oi,{placeholder:"slug-path",...A})}),v.jsx(gn,{})]})})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("span",{className:"text-sm font-semibold block",children:"Featured Image"}),v.jsx(zd,{onDrop:p,multiple:!1,children:({getRootProps:A,getInputProps:C})=>v.jsxs("div",{...A(),className:"flex flex-col justify-center items-center w-full h-48 border-2 border-dashed rounded-lg bg-gray-50 hover:bg-gray-100 transition-colors cursor-pointer overflow-hidden",children:[v.jsx("input",{...C()}),t?v.jsx("img",{src:t,alt:"Preview",className:"h-full w-full object-cover"}):v.jsx("p",{className:"text-gray-400 text-sm",children:"Drag & drop or click to upload"})]})})]}),v.jsx(dn,{control:d.control,name:"blogContent",render:({field:A})=>v.jsxs(fn,{children:[v.jsx(hn,{className:"font-semibold",children:"Blog Content"}),v.jsx(mn,{children:A.value!==void 0&&v.jsx(qz,{props:{initialData:A.value,onChange:h}})}),v.jsx(gn,{})]})}),v.jsx(ai,{type:"submit",className:"w-full bg-violet-600 hover:bg-violet-700 h-12 text-lg",children:"Update Blog Post"})]})})]})})})},sRe=({props:n})=>{const e=dl(r=>r.user),{data:t,loading:i}=vi(`${Et("VITE_API_BASE_URL")}/comment/get/${n.blogid}`,{method:"get",credentials:"include"});if(i)return v.jsx("div",{className:"py-4 text-center",children:"Loading comments..."});const s=(t?.comments?.length||0)+(n.newComment?1:0);return v.jsxs("div",{children:[v.jsxs("h4",{className:"text-2xl font-bold",children:[v.jsx("span",{className:"me-2",children:s}),"Comments"]}),v.jsxs("div",{className:"mt-5",children:[n.newComment&&v.jsxs("div",{className:"flex gap-2 mb-3 animate-in fade-in slide-in-from-top-1",children:[v.jsx(lc,{children:v.jsx(gd,{src:e?.user?.avatar||Lh})}),v.jsxs("div",{children:[v.jsxs("p",{className:"font-bold text-violet-600",children:[e?.user?.name," (Just now)"]}),v.jsx("p",{className:"text-sm text-gray-500",children:ye(n.newComment.createdAt).format("DD-MM-YYYY")}),v.jsx("div",{className:"pt-3 text-gray-800",children:n.newComment.content})]})]}),t?.comments&&t.comments.length>0?t.comments.map(r=>v.jsxs("div",{className:"flex gap-2 mb-3 border-t pt-3 first:border-none",children:[v.jsx(lc,{children:v.jsx(gd,{src:r.user?.avatar||Lh})}),v.jsxs("div",{children:[v.jsx("p",{className:"font-bold",children:r.user?.name}),v.jsx("p",{className:"text-sm text-gray-500",children:ye(r.createdAt).format("DD-MM-YYYY")}),v.jsx("div",{className:"pt-3 text-gray-800",children:r.content})]})]},r.id)):!n.newComment&&v.jsx("p",{className:"text-gray-500 italic",children:"No comments yet."})]})]})},rRe=bl({comment:pn().min(3,"Comment must be at least 3 characters long.")}),oRe=({props:n})=>{const[e,t]=_.useState(),i=dl(o=>o.user),s=hl({resolver:wl(rRe),defaultValues:{comment:""}});async function r(o){try{if(!i.user?.id)return bt("error","You must be logged in to comment.");const a={content:o.comment,blogid:n.blogid,user:i.user.id},c=await fetch(`${Et("VITE_API_BASE_URL")}/comment/add`,{method:"post",credentials:"include",headers:{"Content-type":"application/json"},body:JSON.stringify(a)}),d=await c.json();if(!c.ok)return bt("error",d.message);t(d.comment),s.reset(),bt("success",d.message)}catch(a){bt("error",a.message||"Something went wrong")}}return v.jsxs("div",{children:[v.jsxs("h4",{className:"flex items-center gap-2 text-2xl font-bold",children:[v.jsx(DX,{className:"text-violet-500"})," Comment"]}),i&&i.isLoggedIn?v.jsx(ml,{...s,children:v.jsxs("form",{onSubmit:s.handleSubmit(r),children:[v.jsx("div",{className:"mb-3",children:v.jsx(dn,{control:s.control,name:"comment",render:({field:o})=>v.jsxs(fn,{children:[v.jsx(hn,{children:"Comment"}),v.jsx(mn,{children:v.jsx($L,{placeholder:"Type your comment...",...o})}),v.jsx(gn,{})]})})}),v.jsx(ai,{type:"submit",children:"Submit"})]})}):v.jsx("div",{className:"py-4",children:v.jsx(ai,{asChild:!0,variant:"outline",children:v.jsx(_n,{to:ac,children:"Sign In to Comment"})})}),v.jsx("div",{className:"mt-5",children:v.jsx(sRe,{props:{blogid:n.blogid,newComment:e}})})]})},aRe=({props:n})=>{const{data:e,loading:t}=vi(`${Et("VITE_API_BASE_URL")}/comment/get-count/${n.blogid}`,{method:"get",credentials:"include"});return v.jsxs("button",{type:"button",className:"flex justify-between items-center gap-1 hover:text-violet-500 transition-colors",disabled:t,children:[v.jsx(BX,{}),v.jsx("span",{children:e?e.commentCount:0})]})},lRe=({props:n})=>{const{data:e,loading:t}=vi(`${Et("VITE_API_BASE_URL")}/blog/get-related-blog/${n.category}/${n.currentBlog}`,{method:"get",credentials:"include"});return t?v.jsx("div",{className:"py-4 text-gray-500",children:"Loading related blogs..."}):v.jsxs("div",{className:"mt-8",children:[v.jsx("h2",{className:"text-2xl font-bold mb-5",children:"Related Blogs"}),v.jsx("div",{children:e&&e.relatedBlog.length>0?e.relatedBlog.map(i=>v.jsx(_n,{to:ok(n.category,i.slug),className:"group",children:v.jsxs("div",{className:"flex items-center gap-3 mb-4 transition-transform group-hover:translate-x-1",children:[v.jsx("img",{className:"w-[100px] h-[70px] object-cover rounded-md shadow-sm",src:i.featured_image,alt:i.title}),v.jsx("h4",{className:"line-clamp-2 text-lg font-semibold group-hover:text-violet-600 transition-colors",children:i.title})]})},i._id)):v.jsx("div",{className:"text-gray-400 italic",children:"No related blogs found."})})]})},cRe=()=>{const{blog:n,category:e}=Jw(),{data:t,loading:i}=vi(`${Et("VITE_API_BASE_URL")}/blog/get-blog/${n}`,{method:"get",credentials:"include"},[n,e]);if(i)return v.jsx(fo,{});if(!t?.blog)return v.jsx("div",{className:"text-center py-20 text-gray-500",children:"Blog post not found."});const{blog:s}=t;return v.jsxs("div",{className:"md:flex-nowrap flex-wrap flex justify-between gap-10 lg:gap-20",children:[v.jsxs("div",{className:"border rounded md:w-[70%] w-full p-5 bg-white shadow-sm",children:[v.jsx("h1",{className:"text-3xl font-bold mb-5 leading-tight",children:s.title}),v.jsxs("div",{className:"flex justify-between items-center border-b pb-5",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx(lc,{className:"h-10 w-10",children:v.jsx(gd,{src:s.author.avatar,alt:s.author.name})}),v.jsxs("div",{children:[v.jsx("p",{className:"font-bold text-gray-800",children:s.author.name}),v.jsx("p",{className:"text-sm text-muted-foreground",children:ye(s.createdAt).format("MMMM DD, YYYY")})]})]}),v.jsx("div",{className:"flex items-center gap-6",children:v.jsx(aRe,{props:{blogid:s.id}})})]}),v.jsx("div",{className:"my-8",children:v.jsx("img",{src:s.featured_image,className:"rounded-lg w-full object-cover max-h-[500px]",alt:s.title})}),v.jsx("div",{className:"prose prose-violet max-w-none dark:prose-invert",dangerouslySetInnerHTML:{__html:Jz(s.blog_content)||""}}),v.jsx("div",{className:"border-t mt-10 pt-8",children:v.jsx(oRe,{props:{blogid:s.id}})})]}),v.jsx("div",{className:"md:w-[30%] w-full",children:v.jsx("div",{className:"sticky top-20 border rounded p-5 bg-gray-50/50",children:v.jsx(lRe,{props:{category:e||"",currentBlog:n||""}})})})]})},uRe=()=>{const{category:n}=Jw(),{data:e,loading:t}=vi(`${Et("VITE_API_BASE_URL")}/blog/get-blog-by-category/${n}`,{method:"get",credentials:"include"},[n]);return t?v.jsx(fo,{}):v.jsxs("div",{className:"container mx-auto px-4 py-6",children:[v.jsxs("div",{className:"flex items-center gap-3 text-2xl font-bold text-violet-600 border-b-2 border-violet-100 pb-4 mb-8",children:[v.jsx(pZ,{className:"text-3xl"}),v.jsx("h4",{className:"capitalize",children:e?.categoryData?.name||"Category"})]}),e&&e.blog.length>0?v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:e.blog.map(i=>v.jsx(Uk,{props:i},i.id))}):v.jsx("div",{className:"flex flex-col items-center justify-center py-20 bg-gray-50 rounded-lg border-2 border-dashed",children:v.jsx("p",{className:"text-gray-500 text-lg italic",children:"No blog posts found in this category."})})]})},dRe=()=>{const[n]=W$(),e=n.get("q")||"",{data:t,loading:i}=vi(`${Et("VITE_API_BASE_URL")}/blog/search?q=${encodeURIComponent(e)}`,{method:"get",credentials:"include"},[e]);return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"flex items-center gap-3 text-2xl font-bold text-violet-500 border-b pb-3 mb-5",children:v.jsxs("h4",{children:["Search Result For: ",v.jsx("span",{className:"text-black",children:e})]})}),i?v.jsx("div",{className:"text-center py-10 text-gray-500",children:"Searching for blogs..."}):v.jsx("div",{className:"grid md:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-10",children:t&&t.blog.length>0?t.blog.map(s=>v.jsx(Uk,{props:s},s._id)):v.jsx("div",{className:"col-span-full py-10 text-gray-500 italic",children:"No blogs match your search criteria."})})]})},fRe=()=>{const[n,e]=_.useState(!1),{data:t,loading:i}=vi(`${Et("VITE_API_BASE_URL")}/comment/get-all-comment`,{method:"get",credentials:"include"},[n]),s=async r=>{await jv(`${Et("VITE_API_BASE_URL")}/comment/delete/${r}`)?(e(a=>!a),bt("success","Comment deleted successfully.")):bt("error","Failed to delete comment.")};return i?v.jsx(fo,{}):v.jsxs("div",{className:"p-4",children:[v.jsx("h2",{className:"text-2xl font-bold mb-4",children:"All Comments"}),v.jsx(Xs,{children:v.jsx(lo,{className:"pt-6",children:v.jsxs(Lv,{children:[v.jsx(Fv,{children:v.jsxs(qs,{children:[v.jsx(zn,{className:"w-[30%]",children:"Blog Title"}),v.jsx(zn,{className:"w-[20%]",children:"Commented By"}),v.jsx(zn,{className:"w-[40%]",children:"Comment"}),v.jsx(zn,{className:"w-[10%] text-right",children:"Action"})]})}),v.jsx(zv,{children:t&&t.comments.length>0?t.comments.map(r=>v.jsxs(qs,{children:[v.jsx(nn,{className:"font-medium",children:r.blog_id?.title||"Deleted Blog"}),v.jsx(nn,{children:r.user_id?.name||"Unknown User"}),v.jsx(nn,{className:"max-w-xs truncate",children:r.content}),v.jsx(nn,{className:"text-right",children:v.jsx(ai,{onClick:()=>s(r.id),variant:"outline",size:"icon",className:"hover:bg-red-500 hover:text-white transition-colors",title:"Delete Comment",children:v.jsx(gv,{})})})]},r.id)):v.jsx(qs,{children:v.jsx(nn,{colSpan:4,className:"h-24 text-center",children:"No comments found."})})})]})})})]})},hRe=()=>{const[n,e]=_.useState(!1),{data:t,loading:i}=vi(`${Et("VITE_API_BASE_URL")}/user/get-all-user`,{method:"get",credentials:"include"},[n]),s=async r=>{await jv(`${Et("VITE_API_BASE_URL")}/user/delete/${r}`)?(e(a=>!a),bt("success","User deleted successfully.")):bt("error","User deletion failed or cancelled.")};return i?v.jsx(fo,{}):v.jsxs("div",{className:"space-y-4",children:[v.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"User Management"}),v.jsx(Xs,{children:v.jsx(lo,{className:"pt-6",children:v.jsxs(Lv,{children:[v.jsx(Fv,{children:v.jsxs(qs,{children:[v.jsx(zn,{className:"w-[100px]",children:"Role"}),v.jsx(zn,{children:"Name"}),v.jsx(zn,{children:"Email"}),v.jsx(zn,{children:"Avatar"}),v.jsx(zn,{children:"Joined Date"}),v.jsx(zn,{className:"text-right",children:"Action"})]})}),v.jsx(zv,{children:t&&t.user.length>0?t.user.map(r=>v.jsxs(qs,{children:[v.jsx(nn,{children:v.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${r.role==="admin"?"bg-violet-100 text-violet-700":"bg-gray-100 text-gray-700"}`,children:r.role})}),v.jsx(nn,{className:"font-medium",children:r.name}),v.jsx(nn,{children:r.email}),v.jsx(nn,{children:v.jsx(lc,{className:"w-9 h-9",children:v.jsx(gd,{src:r.avatar||Lh,alt:r.name})})}),v.jsx(nn,{children:ye(r.createdAt).format("DD MMM YYYY")}),v.jsx(nn,{className:"text-right",children:v.jsx(ai,{onClick:()=>s(r._id),variant:"ghost",size:"icon",className:"text-red-500 hover:text-white hover:bg-red-500",children:v.jsx(gv,{size:16})})})]},r._id)):v.jsx(qs,{children:v.jsx(nn,{colSpan:6,className:"h-24 text-center text-gray-500",children:"No users found."})})})]})})})]})},mRe=()=>{const n=dl(e=>e.user);return n&&n.isLoggedIn?v.jsx(Ox,{}):v.jsx(N3,{to:ac,replace:!0})},gRe=()=>{const n=dl(e=>e.user);return n?.isLoggedIn&&n.user?.role==="admin"?v.jsx(Ox,{}):v.jsx(N3,{to:ac,replace:!0})},pRe=()=>v.jsx(F$,{children:v.jsxs(m$,{children:[v.jsxs(Vn,{path:md,element:v.jsx(XX,{}),children:[v.jsx(Vn,{index:!0,element:v.jsx(ise,{})}),v.jsx(Vn,{path:ok(),element:v.jsx(cRe,{})}),v.jsx(Vn,{path:vN(),element:v.jsx(uRe,{})}),v.jsx(Vn,{path:yN(),element:v.jsx(dRe,{})}),v.jsxs(Vn,{element:v.jsx(mRe,{}),children:[v.jsx(Vn,{path:mN,element:v.jsx(iue,{})}),v.jsx(Vn,{path:rk,element:v.jsx(zIe,{})}),v.jsx(Vn,{path:dv,element:v.jsx(jIe,{})}),v.jsx(Vn,{path:wN(),element:v.jsx(iRe,{})}),v.jsx(Vn,{path:AN,element:v.jsx(fRe,{})})]}),v.jsxs(Vn,{element:v.jsx(gRe,{}),children:[v.jsx(Vn,{path:pN,element:v.jsx(lue,{})}),v.jsx(Vn,{path:gN,element:v.jsx(cue,{})}),v.jsx(Vn,{path:bN(),element:v.jsx(due,{})}),v.jsx(Vn,{path:_N,element:v.jsx(hRe,{})})]})]}),v.jsx(Vn,{path:ac,element:v.jsx(tce,{})}),v.jsx(Vn,{path:hN,element:v.jsx(Xle,{})}),v.jsx(Vn,{path:"*",element:v.jsx("div",{children:"404 - Page Not Found"})})]})});CU.createRoot(document.getElementById("root")).render(v.jsx(Ee.StrictMode,{children:v.jsx(zU,{store:A3,children:v.jsx(i3,{loading:null,persistor:gW,children:v.jsx(pRe,{})})})}))});export default bRe();
